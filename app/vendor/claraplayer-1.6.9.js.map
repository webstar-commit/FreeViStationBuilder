{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2a4926623201b58d1636","webpack:///./src/player.js","webpack:///./~/babel-runtime/helpers/toConsumableArray.js","webpack:///./~/babel-runtime/core-js/array/from.js","webpack:///./~/babel-runtime/~/core-js/library/fn/array/from.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.string.iterator.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_string-at.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-integer.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_defined.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-define.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_library.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_export.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_global.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_core.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_ctx.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_a-function.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_hide.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-dp.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_an-object.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_is-object.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_ie8-dom-define.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_descriptors.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_fails.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_dom-create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-primitive.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_property-desc.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_redefine.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_has.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iterators.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-dps.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-keys.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-keys-internal.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-iobject.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iobject.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_cof.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_array-includes.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-length.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-index.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_shared-key.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_shared.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_uid.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_enum-bug-keys.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_html.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_set-to-string-tag.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_wks.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-gpo.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_to-object.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.array.from.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-call.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_is-array-iter.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_create-property.js","webpack:///./~/babel-runtime/~/core-js/library/modules/core.get-iterator-method.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_classof.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-detect.js","webpack:///./~/babel-runtime/core-js/object/assign.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/assign.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.assign.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-assign.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-gops.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-pie.js","webpack:///./vendor/three.js","webpack:///./~/rollbar-browser/dist/rollbar.umd.nojson.min.js","webpack:///./~/immutable/dist/immutable.js","webpack:///./~/snabbdom/snabbdom.js","webpack:///./~/snabbdom/vnode.js","webpack:///./~/snabbdom/is.js","webpack:///./~/snabbdom/h.js","webpack:///./~/snabbdom/modules/class.js","webpack:///./~/snabbdom/modules/props.js","webpack:///./~/snabbdom/modules/attributes.js","webpack:///./~/snabbdom/modules/style.js","webpack:///./~/snabbdom/modules/eventlisteners.js","webpack:///./src/utils/eventEmitter.js","webpack:///./vendor/ramda.js","webpack:///./src/store/api.js","webpack:///./src/store/apiBase.js","webpack:///./~/babel-runtime/core-js/promise.js","webpack:///./~/babel-runtime/~/core-js/library/fn/promise.js","webpack:///./~/babel-runtime/~/core-js/library/modules/web.dom.iterable.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.array.iterator.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_add-to-unscopables.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_iter-step.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.promise.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_an-instance.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_for-of.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_set-proto.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-gopd.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_species-constructor.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_task.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_invoke.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_microtask.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_redefine-all.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_set-species.js","webpack:///./~/babel-runtime/helpers/slicedToArray.js","webpack:///./~/babel-runtime/core-js/is-iterable.js","webpack:///./~/babel-runtime/~/core-js/library/fn/is-iterable.js","webpack:///./~/babel-runtime/~/core-js/library/modules/core.is-iterable.js","webpack:///./~/babel-runtime/core-js/get-iterator.js","webpack:///./~/babel-runtime/~/core-js/library/fn/get-iterator.js","webpack:///./~/babel-runtime/~/core-js/library/modules/core.get-iterator.js","webpack:///./~/rsvp/dist/rsvp.js","webpack:///(webpack)/~/node-libs-browser/~/process/browser.js","webpack:///(webpack)/~/node-libs-browser/~/timers-browserify/main.js","webpack:///(webpack)/buildin/module.js","webpack:///vertx (ignored)","webpack:///(webpack)/buildin/amd-define.js","webpack:///./~/redux-logger/lib/index.js","webpack:///./src/store/clientMiddleware.js","webpack:///./~/babel-runtime/helpers/extends.js","webpack:///./src/store/isPromise.js","webpack:///./~/babel-runtime/helpers/typeof.js","webpack:///./~/babel-runtime/core-js/symbol/iterator.js","webpack:///./~/babel-runtime/~/core-js/library/fn/symbol/iterator.js","webpack:///./~/babel-runtime/core-js/symbol.js","webpack:///./~/babel-runtime/~/core-js/library/fn/symbol/index.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.symbol.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_meta.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_keyof.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_enum-keys.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_is-array.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-gopn-ext.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-gopn.js","webpack:///./src/store/isPlainObject.js","webpack:///./~/babel-runtime/core-js/object/get-prototype-of.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/get-prototype-of.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.get-prototype-of.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-sap.js","webpack:///./src/modules/animation.js","webpack:///./~/babel-runtime/core-js/object/keys.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/keys.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.keys.js","webpack:///./~/babel-runtime/helpers/defineProperty.js","webpack:///./~/babel-runtime/core-js/object/define-property.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/define-property.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.define-property.js","webpack:///./~/cuid/dist/browser-cuid.js","webpack:///./src/modules/utils/createReducer.js","webpack:///./src/modules/sceneGraph.js","webpack:///./~/node-uuid/uuid.js","webpack:///./src/modules/assets.js","webpack:///./~/babel-runtime/core-js/json/stringify.js","webpack:///./~/babel-runtime/~/core-js/library/fn/json/stringify.js","webpack:///./src/modules/scene.js","webpack:///./src/modules/utils/evalSceneGraph.js","webpack:///./src/modules/utils/immutablediff.js","webpack:///./src/modules/utils/iteration.js","webpack:///./src/modules/sceneIO.js","webpack:///./src/store/bindActionCreators.js","webpack:///./src/modules/actionTypes.js","webpack:///./src/modules/utils/selectors.js","webpack:///./src/modules/utils/tweenFunctions.js","webpack:///./src/modules/annotations.js","webpack:///./src/modules/player.js","webpack:///./src/translators/utils/updateCameraLookAtTarget.js","webpack:///./vendor/webvr-polyfill.js","webpack:///./src/modules/plugins.js","webpack:///./src/modules/configuration.js","webpack:///./src/operators/makeAllOperators.js","webpack:///./~/babel-runtime/helpers/classCallCheck.js","webpack:///./~/babel-runtime/helpers/createClass.js","webpack:///./~/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///./~/babel-runtime/helpers/get.js","webpack:///./~/babel-runtime/core-js/object/get-own-property-descriptor.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/get-own-property-descriptor.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.get-own-property-descriptor.js","webpack:///./~/babel-runtime/helpers/inherits.js","webpack:///./~/babel-runtime/core-js/object/set-prototype-of.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/set-prototype-of.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///./~/babel-runtime/core-js/object/create.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.create.js","webpack:///./src/operators/schemaTypes.js","webpack:///./src/operators/primitives.js","webpack:///./src/operators/minimal.js","webpack:///./src/operators/Annotation.js","webpack:///./src/operators/BinMesh.js","webpack:///./src/translators/bingeom.js","webpack:///(webpack)/~/node-libs-browser/~/buffer/index.js","webpack:///(webpack)/~/node-libs-browser/~/buffer/~/base64-js/lib/b64.js","webpack:///(webpack)/~/node-libs-browser/~/buffer/~/ieee754/index.js","webpack:///(webpack)/~/node-libs-browser/~/buffer/~/isarray/index.js","webpack:///./src/polyMesh/index.js","webpack:///./src/polyMesh/three/ThreeInstanceScalarSize.js","webpack:///./src/polyMesh/generic/utility/polyfill.js","webpack:///./src/polyMesh/geometric/tool/Importer.js","webpack:///./src/polyMesh/generic/container/ObjectArrayView.js","webpack:///./src/polyMesh/generic/utility/Arrays.js","webpack:///./~/babel-runtime/core-js/object/freeze.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/freeze.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.object.freeze.js","webpack:///./src/polyMesh/generic/utility/Orders.js","webpack:///./src/polyMesh/generic/container/FlatArrayView.js","webpack:///./src/polyMesh/generic/container/ObjectBuffer.js","webpack:///./src/polyMesh/generic/container/BlockBuffer.js","webpack:///./src/polyMesh/generic/container/ScalarArrayView.js","webpack:///./src/polyMesh/generic/container/ScalarBuffer.js","webpack:///./src/polyMesh/geometric/model/PolyMaps.js","webpack:///./src/polyMesh/generic/container/ObjectsByName.js","webpack:///./src/polyMesh/geometric/model/PolyMap.js","webpack:///./src/polyMesh/generic/algorithm/IndexMappings.js","webpack:///./src/polyMesh/geometric/model/adjacency/EdgeVertexAdjacency.js","webpack:///./src/polyMesh/generic/algorithm/MergeSort.js","webpack:///./src/polyMesh/geometric/model/adjacency/FaceEdgeAdjacency.js","webpack:///./src/polyMesh/geometric/model/adjacency/ValueAdjacency.js","webpack:///./src/polyMesh/geometric/model/PolyMesh.js","webpack:///./src/polyMesh/geometric/model/Skinning.js","webpack:///./src/polyMesh/geometric/algorithm/ImportConversions.js","webpack:///./src/polyMesh/generic/algorithm/GlobalCompaction.js","webpack:///./src/polyMesh/generic/container/BitSet.js","webpack:///./src/polyMesh/geometric/transient/Selection.js","webpack:///./src/polyMesh/three/ThreeExport.js","webpack:///./src/polyMesh/geometric/tool/Exporter.js","webpack:///./src/polyMesh/geometric/algorithm/RenderIndexing.js","webpack:///./src/polyMesh/geometric/algorithm/SimpleFanTriangulation.js","webpack:///./src/operators/PolyMesh/MeshSmooth.js","webpack:///./src/polyMesh/geometric/operator/subdivision2.js","webpack:///./src/polyMesh/geometric/operator/polyMeshValidation.js","webpack:///./src/polyMesh/geometric/operator/removeDuplicateNormals.js","webpack:///./src/operators/Camera.js","webpack:///./src/operators/Environment.js","webpack:///./src/operators/Image.js","webpack:///./src/translators/asset.js","webpack:///./src/translators/translator.js","webpack:///./src/operators/Light.js","webpack:///./src/operators/Material.js","webpack:///./src/operators/Player.js","webpack:///./src/operators/PolyMesh/index.js","webpack:///./src/operators/PolyMesh/Mesh.js","webpack:///./src/operators/PolyMesh/TransformVertices.js","webpack:///./src/operators/PolyMesh/UVMap.js","webpack:///./src/operators/PolyMesh/Skin.js","webpack:///./src/polyMesh/geometric/operator/skin.js","webpack:///./src/operators/PolyMesh/Box.js","webpack:///./src/polyMesh/geometric/primitives/Box.js","webpack:///./src/polyMesh/geometric/operator/removeDuplicateValues.js","webpack:///./~/babel-runtime/core-js/map.js","webpack:///./~/babel-runtime/~/core-js/library/fn/map.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es6.map.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_collection-strong.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_collection.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_array-methods.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_array-species-create.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es7.map.to-json.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_collection-to-json.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_array-from-iterable.js","webpack:///./src/operators/PolyMesh/Sphere.js","webpack:///./src/polyMesh/geometric/primitives/Sphere.js","webpack:///./src/polyMesh/geometric/primitives/Lathe.js","webpack:///./src/polyMesh/geometric/operator/cleanPolyMesh.js","webpack:///./src/polyMesh/geometric/operator/removeDuplicateIndices.js","webpack:///./src/polyMesh/geometric/operator/removeInvalidSurfaces.js","webpack:///./src/polyMesh/geometric/operator/removeUnusedValues.js","webpack:///./src/operators/PolyMesh/Cone.js","webpack:///./src/polyMesh/geometric/primitives/Cone.js","webpack:///./src/operators/PolyMesh/Capsule.js","webpack:///./src/polyMesh/geometric/primitives/Capsule.js","webpack:///./src/operators/PolyMesh/Cylinder.js","webpack:///./src/polyMesh/geometric/primitives/Cylinder.js","webpack:///./src/operators/PolyMesh/Plane.js","webpack:///./src/polyMesh/geometric/primitives/Plane.js","webpack:///./src/operators/PolyMesh/Torus.js","webpack:///./src/polyMesh/geometric/primitives/Torus.js","webpack:///./src/operators/PolyMesh/Disk.js","webpack:///./src/polyMesh/geometric/primitives/Disk.js","webpack:///./src/operators/Properties.js","webpack:///./src/operators/Transform.js","webpack:///./src/store/index.js","webpack:///./src/store/createReducer.js","webpack:///./src/store/applyMiddleware.js","webpack:///./src/store/createStore.js","webpack:///./~/babel-runtime/core-js/set-immediate.js","webpack:///./~/babel-runtime/~/core-js/library/fn/set-immediate.js","webpack:///./~/babel-runtime/~/core-js/library/modules/web.immediate.js","webpack:///./src/store/transitImmutable.js","webpack:///./vendor/transit-0.8.837-min.js","webpack:///./src/store/bindActionCreatorsAndSelectors.js","webpack:///./src/components/player.js","webpack:///./src/components/canvas.js","webpack:///./~/babel-runtime/core-js/object/values.js","webpack:///./~/babel-runtime/~/core-js/library/fn/object/values.js","webpack:///./~/babel-runtime/~/core-js/library/modules/es7.object.values.js","webpack:///./~/babel-runtime/~/core-js/library/modules/_object-to-array.js","webpack:///./src/components/annotation.js","webpack:///./src/components/styles.js","webpack:///./src/components/error.js","webpack:///./src/components/manipulatorTools.js","webpack:///./src/components/icons.js","webpack:///./src/components/timeline.js","webpack:///./src/components/marker.js","webpack:///./src/components/progress.js","webpack:///./src/translators/tools.js","webpack:///./src/translators/three.js","webpack:///./src/translators/materials.js","webpack:///./src/translators/polyMesh.js","webpack:///./src/translators/light.js","webpack:///./src/translators/transform.js","webpack:///./src/translators/navigator.js","webpack:///./src/translators/utils/clamp.js","webpack:///./src/translators/utils/getProjectionMatrix.js","webpack:///./src/translators/utils/deviceOrientationControls.js","webpack:///./src/translators/manipulators.js","webpack:///./vendor/flyd.js","webpack:///./src/translators/annotation.js","webpack:///./src/translators/utils/getBoundingBox.js","webpack:///./src/translators/utils/outlinePass.js","webpack:///./src/translators/utils/FXAAShader.js","webpack:///./src/translators/utils/vrEffect.js","webpack:///./src/translators/utils/vrControls.js","webpack:///./src/translators/utils/parallaxBarrierEffect.js","webpack:///./src/translators/utils/reticle.js","webpack:///./src/translators/utils/viveController.js","webpack:///./src/translators/utils/objLoader.js","webpack:///./src/autoRotate.js"],"names":[],"mappings":"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ChD,cAAO,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,oBAAoB,CAAC,CAAC;MAClF,CAAC;;AAGF,WAAM,CAAC,OAAO,GAAG,WAAW,CAAC;;EAE5B,CAAC,OAAO,CAAC,EAAE;AACV,OAAI,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;;;;;;;;;;ACrKhC;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA,8CAA6C,gBAAgB;AAC7D;AACA;;AAEA;AACA,IAAG;AACH;AACA;AACA,G;;;;;;;;;ACpBA,mBAAkB,4F;;;;;;;;;ACAlB;AACA;AACA,gF;;;;;;;;;ACFA;AACA;;AAEA;AACA;AACA,8BAA6B;AAC7B,eAAc;AACd;AACA,EAAC;AACD;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,WAAU;AACV,EAAC,E;;;;;;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACLA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA4B,aAAa;;AAEzC;AACA;AACA;AACA;AACA;AACA,yCAAwC,oCAAoC;AAC5E,6CAA4C,oCAAoC;AAChF,MAAK,2BAA2B,oCAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAiC,2BAA2B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,G;;;;;;;;;ACrEA,uB;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAmE;AACnE;AACA,sFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,gDAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd,eAAc;AACd,eAAc;AACd,eAAc;AACd,gBAAe;AACf,gBAAe;AACf,gBAAe;AACf,iBAAgB;AAChB,0B;;;;;;;;;AC5DA;AACA;AACA;AACA,wCAAuC,gC;;;;;;;;;ACHvC,8BAA6B;AAC7B,sCAAqC,gC;;;;;;;;;ACDrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACnBA;AACA;AACA;AACA,G;;;;;;;;;ACHA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,G;;;;;;;;;ACPA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,UAAU;AACb;AACA;AACA;AACA,G;;;;;;;;;ACfA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACJA;AACA;AACA,G;;;;;;;;;ACFA;AACA,2FAAsE,gBAAgB,UAAU,GAAG;AACnG,EAAC,E;;;;;;;;;ACFD;AACA;AACA,kCAAiC,QAAQ,gBAAgB,UAAU,GAAG;AACtE,EAAC,E;;;;;;;;;ACHD;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,G;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACPA,yD;;;;;;;;;ACAA,wBAAuB;AACvB;AACA;AACA,G;;;;;;;;;ACHA,qB;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA,yHAAgF,aAAa,EAAE;;AAE/F;AACA,sDAAqD,0BAA0B;AAC/E;AACA,G;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,G;;;;;;;;;ACvCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACZA;AACA;AACA;;AAEA;AACA;AACA,G;;;;;;;;;ACNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACLA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACJA,kBAAiB;;AAEjB;AACA;AACA,G;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,WAAW,eAAe;AAC/B;AACA,MAAK;AACL;AACA,G;;;;;;;;;ACpBA;AACA;AACA;AACA;AACA,4DAA2D;AAC3D,G;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACNA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACJA;AACA;AACA,oDAAmD;AACnD;AACA,wCAAuC;AACvC,G;;;;;;;;;ACLA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACJA;AACA;AACA;AACA,c;;;;;;;;;ACHA,gG;;;;;;;;;ACAA;AACA;AACA;;AAEA;AACA,mEAAkE,+BAA+B;AACjG,G;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,G;;;;;;;;;ACZA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+FAA0E,kBAAkB,EAAE;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,gCAAgC;AACpF;AACA;AACA,MAAK;AACL;AACA,kCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;;;;ACpCD;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,G;;;;;;;;;ACXA;AACA;AACA;AACA;;AAEA;AACA;AACA,G;;;;;;;;;ACPA;AACA;AACA;;AAEA;AACA;AACA;AACA,G;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACPA;AACA;AACA;AACA;AACA,0BAAyB,kBAAkB,EAAE;;AAE7C;AACA;AACA;AACA;AACA,IAAG,UAAU;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACtBA;AACA;;AAEA;AACA;AACA,gCAA+B,qBAAqB;AACpD,gCAA+B,SAAS,EAAE;AAC1C,EAAC,UAAU;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,SAAS,mBAAmB;AACvD,gCAA+B,aAAa;AAC5C;AACA,IAAG,UAAU;AACb;AACA,G;;;;;;;;;ACpBA,mBAAkB,gG;;;;;;;;;ACAlB;AACA,mF;;;;;;;;;ACDA;AACA;;AAEA,2CAA0C,wDAAoC,E;;;;;;;;;ACH9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,UAAU,EAAE;AAC9C,oBAAmB,sCAAsC;AACzD,EAAC,oCAAoC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC,W;;;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AEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA,IAAG;;AAEH;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,2BAA0B;AAC1B,2BAA0B;AAC1B,2BAA0B;AAC1B;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA,mEAAkE;;AAElE;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,2BAA0B;AAC1B,2BAA0B;AAC1B,2BAA0B;AAC1B,2BAA0B;AAC1B;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,iBAAgB;;AAEhB;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA,KAAI;;AAEJ;;AAEA;;AAEA;AACA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA,KAAI;;AAEJ;;AAEA;;AAEA;AACA;AACA;;AAEA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,gBAAe;;AAEf;;AAEA;;AAEA;AACA;AACA,sDAAqD;;AAErD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,KAAI;;AAEJ;AACA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;AACA;;AAEA,KAAI;;AAEJ;AACA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;AACA;;AAEA,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F;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,sCAAqC,OAAO;;AAE5C;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,sCAAqC,OAAO;;AAE5C;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,uCAAsC,OAAO;;AAE7C;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,uCAAsC,OAAO;;AAE7C;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,uCAAsC,OAAO;;AAE7C;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,uCAAsC,OAAO;;AAE7C;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA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;AAEA,IAAG;;AAEH,GAAE;;AAEF;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA,GAAE;;AAEF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AACA;AACA;;AAEA;AACA,8DAA6D;;AAE7D;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iEAAgE;;AAEhE;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAqB;AACrB,sBAAqB;;AAErB;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8DAA6D;;AAE7D;AACA;;AAEA;;AAEA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA,GAAE;;AAEF;;A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EA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,wCAAuC,OAAO;;AAE9C;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,MAAK;;AAEL;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,2CAA0C;;AAE1C;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,2CAA0C;;AAE1C;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,2CAA0C;AAC1C;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,kBAAiB;;AAEjB;;AAEA,2CAA0C;AAC1C;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;;AAEA,kBAAiB;;AAEjB;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;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A,QAAO;;AAEP;;AAEA;;AAEA;AACA;;AAEA;;AAEA,MAAK;;AAEL;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA,IAAG;;AAEH;;AAEA,IAAG;;AAEH;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,IAAG;;AAEH;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,IAAG;;AAEH;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;A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EA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;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ACA,GAAE;AACF;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;A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;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,IAAG;;AAEH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,iEAAgE;AAChE;;AAEA;;AAEA,EAAC;;;AAGD;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA,iCAAgC;AAChC;AACA;AACA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,+BAA8B;AAC9B;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA,MAAK,yFAAyF;;AAE9F;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,mBAAkB,0BAA0B;;AAE5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,qBAAoB;AACpB;AACA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA,gBAAe;AACf;;AAEA,iCAAgC;AAChC,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA,kBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA2E,kBAAkB;;AAE7F;AACA;;AAEA;;AAEA;;AAEA;AACA,oBAAmB;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,QAAO,yFAAyF;AAChG;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,EAAC;AACD;;AAEA;AACA;AACA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AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,IAAG;;AAEH;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,yCAAwC;AACxC;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,GAAE;;AAEF;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,IAAG;;AAEH;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,KAAI;;AAEJ;AACA;;AAEA;;AAEA,uBAAsB;;AAEtB;;AAEA;;AAEA,KAAI;;AAEJ;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,KAAI;;AAEJ;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAI;;AAEJ;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,EAAC;;AAED;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;A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AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,cAAa,qBAAqB;;AAElC,eAAc,sBAAsB;;AAEpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,cAAa,sBAAsB;;AAEnC;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,eAAc,qBAAqB;;AAEnC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,cAAa,sBAAsB;;AAEnC,eAAc,qBAAqB;;AAEnC;AACA;AACA;AACA;AACA;;AAEA;AACA,mCAAkC;AAClC,mCAAkC;AAClC,mCAAkC;;AAElC;AACA,mCAAkC;AAClC,mCAAkC;AAClC,mCAAkC;;AAElC;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA,4DAA2D,wBAAwB;AACnF;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA,aAAY;AACZ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oCAAmC,KAAK;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;;AAEA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;;;;AAKA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA,4CAA2C;;AAE3C,8CAA6C;;AAE7C,0CAAyC;;;AAGzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAuC,SAAS;AAChD;AACA;;AAEA;AACA;AACA,oFAAmF,yCAAyC;AAC5H;AACA;AACA,kFAAiF,yCAAyC;AAC1H;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,iBAAgB;AAChB;AACA;AACA;AACA,8EAA6E;AAC7E;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,oBAAoB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,+BAA8B,SAAS;AACvC;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qDAAoD;AACpD;AACA;AACA,kDAAiD;AACjD;AACA;AACA;;AAEA,gEAA+D;AAC/D;AACA;AACA,gDAA+C;AAC/C;AACA;AACA;;AAEA,kEAAiE;AACjE;AACA;AACA;AACA,4BAA2B,wBAAwB;AACnD;AACA,2BAA0B,4CAA4C;AACtE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oEAAmE;AACnE;AACA,iDAAgD,mCAAmC;AACnF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gEAA+D;AAC/D,iDAAgD,wBAAwB;AACxE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA,2DAA0D;AAC1D,4CAA2C;AAC3C;AACA;AACA,wCAAuC;AACvC,6CAA4C;AAC5C;AACA,8DAA6D;AAC7D,kDAAiD,kCAAkC;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,gEAA+D;AAC/D;AACA,6BAA4B,8DAA8D;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,6CAA4C;AAC5C;AACA;AACA;AACA,6CAA4C;AAC5C;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP,mDAAkD;AAClD;AACA,0DAAyD;AACzD,kDAAiD,wBAAwB;AACzE;AACA;AACA,iCAAgC;AAChC;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA,MAAK;AACL;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA,MAAK;AACL;AACA,uCAAsC,oCAAoC;AAC1E;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;;AAEA;AACA;;;AAGA;AACA;AACA,6DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,gEAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;;AAGA;AACA;AACA,8DAA6D;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,gEAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK,uBAAuB,oBAAoB;;AAEhD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;;AAGA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;;;AAGA;AACA;AACA;AACA,mEAAkE;AAClE;AACA;AACA,UAAS;AACT,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA,mCAAkC,6CAA6C;AAC/E;AACA,wBAAuB,uBAAuB,EAAE;AAChD,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,mCAAmC;AACjE,kCAAiC,kDAAkD;AACnF;AACA,MAAK;AACL,+CAA8C,4CAA4C;AAC1F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,8DAA6D,cAAc;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,gBAAgB;AAC9D,6CAA4C,cAAc;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD,eAAe;AACpE;AACA,QAAO;AACP;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,qBAAqB;AAC7D,UAAS;AACT;;AAEA;AACA,oCAAmC,KAAK;AACxC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,2DAA0D,SAAS;AACnE;;AAEA;AACA;AACA;;AAEA;AACA,kDAAiD,eAAe;AAChE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,0DAAyD;AACzD;AACA;;AAEA,yDAAwD;AACxD;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8DAA6D;AAC7D;AACA;;AAEA,6DAA4D;AAC5D;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+DAA8D;AAC9D;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA4C,UAAU;AACtD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,gBAAe;AACf;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6CAA4C,UAAU;AACtD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAoC,WAAW;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,gBAAe;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA,oDAAmD,gBAAgB;AACnE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kDAAiD,gBAAgB;AACjE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kDAAiD,UAAU;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB,cAAc;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA,uCAAsC,iBAAiB;AACvD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,wCAAuC,oBAAoB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,UAAS;AACT;AACA;AACA;AACA,uBAAsB,mBAAmB;AACzC;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,aAAa;AACjC;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,aAAa;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,sBAAsB;AAC5D,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAwB,oBAAoB;AAC5C;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAwB,oBAAoB;AAC5C;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,kDAAiD;AACjD;AACA;;AAEA;AACA;AACA;;AAEA,sDAAqD;AACrD;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,kBAAkB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAgC,eAAe;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,uCAAsC,iBAAiB;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC,qBAAqB;AAC7D,UAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA,2CAA0C,KAAK;AAC/C;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,6DAA4D;AAC5D;AACA,2BAA0B,+CAA+C;AACzE;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA,sDAAqD,wCAAwC;AAC7F,6DAA4D,gBAAgB;AAC5E;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,kBAAkB;AACvD,UAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oCAAmC,KAAK;AACxC;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,gDAA+C;AAC/C,0CAAyC,oBAAoB;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,mBAAmB;AAC3C,4DAA2D,sBAAsB;AACjF;AACA,QAAO;AACP;;AAEA,oDAAmD;AACnD;AACA;AACA;AACA,0CAAyC,yBAAyB;AAClE;AACA;AACA;AACA,6CAA4C,4BAA4B;AACxE;AACA;AACA,UAAS;AACT,QAAO;AACP;;AAEA,mDAAkD;AAClD;AACA;AACA;AACA,0CAAyC,yBAAyB;AAClE;AACA;AACA;AACA,2CAA0C,4BAA4B;AACtE;AACA;AACA,UAAS;AACT,QAAO;AACP;;AAEA;AACA;AACA;;AAEA,0DAAyD;AACzD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,+DAA8D;AAC9D,mDAAkD,wBAAwB;AAC1E;;AAEA;AACA,6CAA4C,SAAS;AACrD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,kBAAkB;AACvD,UAAS;AACT;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2CAA0C,KAAK;AAC/C;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oDAAmD,KAAK;AACxD;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4DAA2D;AAC3D,sEAAqE,qBAAqB;AAC1F;;AAEA,yDAAwD;AACxD,sEAAqE,qBAAqB;AAC1F;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAsB,gBAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA,4DAA2D;AAC3D;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA,qCAAoC,oCAAoC;AACxE;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,kDAAiD,cAAc,EAAE;AACjE;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,2BAA0B;AAC1B;AACA,MAAK;;AAEL;AACA;AACA,2BAA0B;AAC1B;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,uCAAsC,eAAe,EAAE;AACvD;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;;AAGL;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;;AAGL;;AAEA,yBAAwB;AACxB;AACA,MAAK;;AAEL;AACA,0CAAyC,8BAA8B;AACvE,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;;AAGL;;AAEA;AACA;AACA,MAAK;;AAEL;AACA,kFAAiF,YAAY;AAC7F,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD;AAClD;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA,2CAA0C,0BAA0B;AACpE,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,2CAA0C,4BAA4B;AACtE,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;;AAGL;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,wBAAwB;AACnE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL,IAAG;;;;AAIH;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA,6CAA4C,8BAA8B;AAC1E,MAAK;;AAEL;AACA,iDAAgD,8BAA8B;AAC9E,MAAK;;AAEL,4CAA2C;AAC3C;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA,MAAK;;AAEL,yCAAwC;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;AACA,8DAA6D;;;;AAI7D;;AAEA;;AAEA;AACA;AACA,MAAK;;;AAGL;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;;AAGL;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,sCAAqC,qBAAqB;AAC1D,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;;AAGL;;AAEA;AACA;AACA;;AAEA,IAAG;;AAEH;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,8CAA8C,EAAE;AAC3E,4BAA2B,yCAAyC,EAAE;AACtE;AACA,yBAAwB,0BAA0B,EAAE;AACpD,yBAAwB,qBAAqB;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yDAAwD;AACxD;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,EAAC,G;;;;;;;;;AC/1JD;AACA;AACA;;AAEA;AACA;;AAEA,sBAAqB,wBAAwB;AAC7C,oBAAmB,wBAAwB;;AAE3C;AACA,+BAA8B;AAC9B;;AAEA,6BAA4B;;AAE5B;AACA;AACA;;AAEA;AACA,kBAAiB;AACjB,qBAAoB,aAAa;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,cAAa,kBAAkB;AAC/B;AACA,gBAAe,oBAAoB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA,QAAO;AACP;AACA;AACA,kBAAiB,uBAAuB;AACxC,2BAA0B;AAC1B;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,WAAU,oBAAoB;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB,wBAAwB;AACzC;AACA,oBAAmB,2BAA2B;AAC9C;AACA;AACA;AACA;AACA;;AAEA;AACA,WAAU,oBAAoB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,uBAAuB;AAC5C;AACA;AACA,YAAW;AACX;AACA;AACA,UAAS,OAAO;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA6C;AAC7C,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,QAAO,kDAAkD;AACzD;AACA;AACA;AACA;AACA,QAAO,kDAAkD;AACzD;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,iCAAgC;AAChC;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,oBAAoB;AACnC;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,gBAAe,+BAA+B;AAC9C;AACA;AACA,gBAAe,qBAAqB;AACpC;AACA;AACA;;AAEA,mBAAkB;;;;;;;;;;ACxOlB;AACA;AACA,WAAU;AACV;AACA;;;;;;;;;;ACJA;AACA;AACA,2BAA0B,uDAAuD,EAAE;AACnF;;;;;;;;;;ACHA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;;AAEA;AACA,gBAAe;AACf;AACA;AACA,uBAAsB,cAAc;AACpC,gCAA+B,UAAU;AACzC,IAAG;AACH,uBAAsB,cAAc;AACpC,gCAA+B,UAAU;AACzC,WAAU,UAAU;AACpB;AACA;AACA,gBAAe,qBAAqB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AChCA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAkB;;;;;;;;;;ACZlB;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAkB;;;;;;;;;;ACZlB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAuC,SAAS;AAChD;AACA;;AAEA;AACA;AACA,2CAA0C;;AAE1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAkB;;;;;;;;;;ACtClB;AACA,+BAA8B,iBAAiB,SAAS,EAAE,EAAE;;AA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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,gBAAgB;AAC/B,gBAAe,gBAAgB;AAC/B,iBAAgB,MAAM;AACtB;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,EAAE;AACjB,iBAAgB,QAAQ;AACxB;AACA;AACA,0BAAyB;AACzB,4BAA2B;AAC3B,wBAAuB,EAAE;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,gBAAgB;AAC/B,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,MAAM;AACtB;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA,wCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA;AACA;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,MAAM;AACrB,gBAAe,SAAS;AACxB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,gBAAe,SAAS;AACxB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,MAAM;AACrB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC,sCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,EAAE;AAC3B,gBAAe,SAAS;AACxB,gBAAe,OAAO;AACtB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,MAAM;AACrB,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;AACA,4CAA2C;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA,gBAAe,MAAM;AACrB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,wBAAuB,KAAK,GAAG,KAAK,GAAG,KAAK;AAC5C,0CAAyC,OAAO;AAChD,0CAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA,gBAAe,MAAM;AACrB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,wBAAuB,KAAK,GAAG,KAAK,GAAG,KAAK;AAC5C,+CAA8C;AAC9C,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,MAAM;AACrB,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA,kDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,EAAE;AACjB,gBAAe,EAAE;AACjB,iBAAgB;AAChB;AACA;AACA;AACA,+BAA8B;AAC9B,+BAA8B;AAC9B,iCAAgC;AAChC,iCAAgC;AAChC,gCAA+B;AAC/B,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,EAAE;AACrB,gBAAe,OAAO;AACtB,gBAAe,EAAE;AACjB,iBAAgB;AAChB;AACA;AACA,4BAA2B,EAAE;AAC7B,6BAA4B;AAC5B,6BAA4B;AAC5B,+BAA8B;AAC9B,0CAAyC;AACzC,0CAAyC;AACzC,+BAA8B;AAC9B,4BAA2B,EAAE;AAC7B;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,EAAE;AACjB,iBAAgB,QAAQ,yEAAyE;AACjG;AACA;AACA,+BAA8B;AAC9B,iCAAgC;AAChC,6BAA4B,EAAE;AAC9B,4BAA2B,WAAW,EAAE;AACxC,4BAA2B,iCAAiC,EAAE;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,KAAK;AAClB,gBAAe,OAAO;AACtB,iBAAgB,MAAM;AACtB;AACA;AACA,qBAAoB,iBAAiB,EAAE;AACvC;AACA;AACA;AACA;AACA,4BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,KAAK,KAAK;AAC9B,gBAAe,MAAM;AACrB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,iCAAgC,uBAAuB,EAAE,OAAO;AAChE,sCAAqC,uBAAuB,EAAE,OAAO;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,KAAK,KAAK;AAC5C,gBAAe,SAAS;AACxB;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA,oCAAmC,uBAAuB,EAAE,OAAO;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,KAAK;AACvB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,iBAAgB,EAAE;AAClB;AACA;AACA,0BAAyB,OAAO,EAAE;AAClC,2BAA0B,EAAE;AAC5B;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,KAAK;AACzB,gBAAe,MAAM;AACrB,gBAAe,OAAO;AACtB,iBAAgB,MAAM;AACtB;AACA;AACA,kCAAiC,WAAW,EAAE;AAC9C,uCAAsC,WAAW,EAAE;AACnD;AACA;AACA,uBAAsB,6CAA6C,EAAE;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,aAAa;AAC5B,iBAAgB;AAChB;AACA;AACA,kCAAiC;AACjC,+BAA8B;AAC9B,4BAA2B;AAC3B,2BAA0B;AAC1B;AACA,8BAA6B;AAC7B,6BAA4B;AAC5B,4BAA2B;AAC3B,2BAA0B;AAC1B;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,EAAE;AACjB,iBAAgB;AAChB;AACA;AACA,iDAAgD;AAChD,wDAAuD;AACvD,kDAAiD;AACjD,mDAAkD;AAClD,oCAAmC;AACnC;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,EAAE;AACjB,iBAAgB;AAChB;AACA;AACA;AACA,+BAA8B;AAC9B,4BAA2B;AAC3B,yBAAwB;AACxB,wBAAuB;AACvB;AACA,2BAA0B;AAC1B,0BAAyB;AACzB,yBAAwB;AACxB,wBAAuB;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,EAAE;AACrB,gBAAe,EAAE;AACjB,iBAAgB;AAChB;AACA;AACA,sBAAqB,EAAE;AACvB,uBAAsB;AACtB,2BAA0B;AAC1B,yBAAwB;AACxB,0BAAyB;AACzB,wBAAuB;AACvB,6BAA4B;AAC5B;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,KAAK;AAClB,gBAAe,OAAO;AACtB,iBAAgB,MAAM;AACtB;AACA;AACA,uBAAsB,iBAAiB,EAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,EAAE;AACjB,gBAAe,EAAE;AACjB,iBAAgB;AAChB;AACA;AACA,4BAA2B;AAC3B,8BAA6B;AAC7B,4CAA2C;AAC3C;AACA,wBAAuB;AACvB,wBAAuB;AACvB,4BAA2B;AAC3B;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,MAAM;AACrB,iBAAgB,MAAM;AACtB;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA,4BAA2B,iBAAiB,EAAE,OAAO;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,cAAa,IAAI;AACjB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,KAAK,WAAW,KAAK,KAAK;AAC9C,gBAAe,SAAS;AACxB;AACA,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,2BAA0B;AAC1B;AACA;AACA,0DAAyD,OAAO;AAChE;AACA;AACA;AACA;AACA;AACA,UAAS,IAAI;AACb,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA,gBAAe,EAAE;AACjB,gBAAe,MAAM;AACrB,iBAAgB,EAAE;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,wCAAuC;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,SAAS;AACxB,gBAAe,MAAM;AACrB,iBAAgB;AAChB;AACA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,YAAY;AAC3B,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,YAAY;AAC3B,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,MAAM;AACrB,iBAAgB,QAAQ;AACxB;AACA;AACA;AACA,sCAAqC;AACrC,sCAAqC;AACrC,sCAAqC;AACrC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB,UAAU,KAAK;AACxC,gBAAe,MAAM;AACrB,gBAAe,OAAO;AACtB,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,iCAAgC,uBAAuB,EAAE,OAAO;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH,wBAAuB,UAAU,EAAE;AACnC,IAAG;AACH;AACA;;AAEA,EAAC;;;;;;;;;;;;;;;;;;;;;;ACj0DD,UAAS,SAAS,CAAC,GAAG,EAAE,I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AC,CAAC;AAC/B,gBAAO,CAAC,QAAQ,CAAC,CAAC;QACnB,CAAC;;AAGF,gBAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,SAAS,EAAE,SAAS,EAAE,EAAE,WAAW,EAAX,WAAW,EAAE,MAAM,EAAN,MAAM,EAAE,IAAI,EAAJ,IAAI,EAAE,KAAK,EAAL,KAAK,EAAE,CAAC,CAAC;MAC/F,CAAC,CAAC;;AAEH,YAAO,aAAa,GAAG,IAAI,GAAG,OAAO,CAAC;IACvC;;;;;;;;;;AC5DH,mBAAkB,0F;;;;;;;;;ACAlB;AACA;AACA;AACA;AACA,0E;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;;AAEA,yGAAwG,OAAO;AAC/G;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC,eAAc;AACd,kBAAiB;AACjB;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,6B;;;;;;;;;ACjCA,6BAA4B,e;;;;;;;;;ACA5B;AACA,WAAU;AACV,G;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC;AACpC;;AAEA;AACA;AACA;AACA;AACA,gDAA+C,qEAAiD,oBAAoB;AACpH;AACA;AACA,IAAG,UAAU;AACb,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,YAAW;AACX,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA,4CAA2C;AAC3C;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,oBAAmB,gCAAgC;AACnD,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,gBAAe,qCAAqC;AACpD;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;AACA,wBAAuB,wBAAwB;AAC/C;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH,mBAAkB,uBAAuB,KAAK;AAC9C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,kBAAiB;AACjB,yBAAwB;AACxB,iBAAgB;AAChB,qBAAoB;AACpB,yBAAwB;AACxB,iBAAgB;AAChB,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2DAA0D,kBAAkB;AAC5E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA,EAAC,E;;;;;;;;;AC5SD;AACA;AACA;AACA,IAAG;AACH,G;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC,iBAAiB,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA,iEAAgE,gBAAgB;AAChF;AACA,IAAG,2CAA2C,gCAAgC;AAC9E;AACA;AACA,G;;;;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA,QAAO,UAAU,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,MAAK,GAAG;AACR;AACA,G;;;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG,UAAU;AACb;AACA,G;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,G;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,sCAAqC,oBAAoB,EAAE;AAC3D;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA,IAAG;AACH,G;;;;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,G;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAoB,aAAa;AACjC,IAAG;AACH,G;;;;;;;;;ACbA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yDAAwD,+BAA+B;AACvF;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC,G;;;;;;;;;AClDD,mBAAkB,8F;;;;;;;;;ACAlB;AACA;AACA,6E;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;ACRA,mBAAkB,gG;;;;;;;;;ACAlB;AACA;AACA,+E;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;+CCNA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA,uDAAsD,6BAA6B;;AAEnF,mCAAkC;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,wCAAuC,KAAK;AAC5C,yCAAwC,UAAU;AAClD;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;;AAET,qCAAoC,gBAAgB;AACpD;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;AACA,UAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP;AACA;;AAEA;AACA,6BAA4B;AAC5B;;AAEA,iCAAgC;;AAEhC;AACA;AACA,iCAAgC;AAChC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iCAAgC;;AAEhC;AACA,iCAAgC;AAChC;;AAEA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,4BAA2B,4BAA4B;AACvD,QAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET,gCAA+B,cAAc;AAC7C;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,EAAE;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,oBAAoB;AAC3C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,yDAAwD;AACxD;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,wBAAuB,uCAAuC;AAC9D;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,sBAAqB,8DAA8D;AACnF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT,uDAAsD,gBAAgB,EAAE;AACxE;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAqB,8DAA8D;AACnF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,QAAO;;AAEP;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,cAAa;AACb,YAAW;AACX;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA,eAAc,SAAS;AACvB,eAAc,SAAS;AACvB,eAAc,OAAO;AACrB;AACA,gBAAe;AACf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA,eAAc,SAAS;AACvB,eAAc,OAAO;AACrB;AACA,gBAAe;AACf;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6BAA4B;AAC5B,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA,eAAc,SAAS;AACvB,eAAc,OAAO;AACrB;AACA,gBAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,UAAS;AACT,wBAAuB,QAAQ;AAC/B;;AAEA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4DAA2D,QAAQ;;AAEnE;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,4DAA2D,QAAQ;AACnE;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sCAAqC,QAAQ;;AAE7C;;AAEA,sBAAqB,wBAAwB;AAC7C;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAAyB,QAAQ;AACjC;AACA;AACA,UAAS;AACT,0BAAyB,QAAQ;AACjC;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,2CAA0C;;AAE1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA8B,sBAAsB;;AAEpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB,wBAAwB;AAC7C;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAuB,YAAY;AACnC;AACA;;AAEA;AACA;AACA;;AAEA,0BAAyB,YAAY;AACrC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,UAAS;AACT,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA,sBAAqB,8DAA8D;AACnF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wBAAuB,YAAY;AACnC;AACA;;AAEA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,sBAAqB,YAAY;AACjC;AACA;;AAEA,kBAAiB,0BAA0B;AAC3C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAqB,YAAY;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,OAAO;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qDAAyB,2BAA2B,EAAE;AACtD,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA,EAAC;;;;;;;;;;;;AC3jDD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;;;;;;;;;ACnLtC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C,iBAAiB;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,G;;;;;;;;;;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACTA,gB;;;;;;;;;ACAA,8BAA6B,mDAAmD;;;;;;;;;;ACAhF;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,OAAO;AACrB,eAAc,QAAQ;AACtB,eAAc,QAAQ;AACtB,eAAc,KAAK;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,IAAI;AACxD,IAAG;AACH,EAAC;AACD;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,EAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD;AACzD;AACA,MAAK;AACL;AACA,uBAAsB,iCAAiC;AACvD,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,KAAK,QAAQ,iCAAiC;AAClG,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,2DAA0D,gBAAgB;;AAE1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB,oBAAoB;AACxC;AACA;AACA;AACA,0CAAyC,oCAAoC;AAC7E;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH,yBAAwB,eAAe,EAAE;AACzC,yBAAwB,gBAAgB;AACxC,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA,gFAA+E,sBAAsB;;AAErG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2C;;;;;;;;;AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAiD;AACjD,EAAC;A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A;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA8B,sBAAsB;;AAEpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB,+BAA+B;AACpD;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAuB,QAAQ;AAC/B;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,UAAS;AACT,wBAAuB,QAAQ;AAC/B;;AAEA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,mEAAkE,QAAQ;;AAE1E;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mEAAkE,QAAQ;AAC1E;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sCAAqC,QAAQ;;AAE7C;;AAEA,sBAAqB,wBAAwB;AAC7C;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAqB,qEAAqE;AAC1F;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;;AAEP;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAO;AACP;;AAEA;AACA,eAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,QAAO;;AAEP;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,cAAa;AACb,YAAW;AACX;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;;AAEA;AACA,eAAc,SAAS;AACvB,eAAc,SAAS;AACvB;AACA,gBAAe;AACf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA,eAAc,SAAS;AACvB;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAqB,kEAAkE;AACvF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT,uDAAsD,gBAAgB,EAAE;AACxE;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qDAAyB,wCAAwC,EAAE;AACnE,MAAK;AACL;AACA,MAAK;AACL;AACA;;AAEA;AACA,EAAC;;;AAGD,EAAC,yJAAyJ;AAC1J,EAAC,EAAE,aAAa;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,EAAC,GAAG;AACJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA2B;AAC3B;AACA;AACA;AACA,6BAA4B,UAAU;;AAEtC,EAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAuE,QAAQ;AAC/E;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wEAAuE,QAAQ;AAC/E;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0DAAyD,SAAS,iBAAiB;AACnF;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,EAAC,EAAE,kCAAkC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA2B;AAC3B,4BAA2B;;AAE3B,2BAA0B;;AAE1B,wCAAuC;;AAEvC,iBAAgB;AAChB,2DAA0D;AAC1D,4DAA2D;AAC3D,+CAA8C;AAC9C,KAAI;AACJ;;AAEA;AACA,4BAA2B;AAC3B,8BAA6B;;AAE7B,2BAA0B;;AAE1B,iBAAgB;AAChB,mDAAkD;AAClD,KAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B,4CAA4C;AACvE;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,4BAA2B,2CAA2C;;AAEtE;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,+CAA8C;AAC9C,iDAAgD;AAChD,wCAAuC;AACvC,qDAAoD;AACpD,qDAAoD;AACpD;AACA;AACA;;AAEA;AACA;AACA,gDAA+C;AAC/C,kDAAiD;AACjD,yCAAwC;AACxC,sDAAqD;AACrD,sDAAqD;AACrD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+CAA8C;AAC9C,+CAA8C;AAC9C,+CAA8C;AAC9C,+CAA8C;;AAE9C;AACA,gDAA+C;AAC/C,gDAA+C;AAC/C,gDAA+C;AAC/C,gDAA+C;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yBAAwB,yCAAyC;AACjE,0BAAyB,0CAA0C;AACnE,sBAAqB,qCAAqC;AAC1D,4BAA2B,4CAA4C;AACvE,4BAA2B,4CAA4C;AACvE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yBAAwB,wCAAwC;AAChE,0BAAyB,yCAAyC;AAClE,sBAAqB,oCAAoC;AACzD,4BAA2B,2CAA2C;AACtE,4BAA2B,2CAA2C;;AAEtE;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB,OAAO;AACxB,oBAAmB,YAAY;AAC/B,sBAAqB,WAAW;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2DAA0D;AAC1D;;AAEA,sCAAqC;AACrC,sCAAqC;AACrC,sCAAqC;AACrC,sCAAqC;AACrC,sCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,OAAO;AACxB,oBAAmB,YAAY;AAC/B,sBAAqB,WAAW;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,EAAE,uEAAuE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4BAA2B;;AAE3B,+BAA8B;;AAE9B,iBAAgB;AAChB,gEAA+D;AAC/D,KAAI;AACJ;;AAEA;AACA,4BAA2B;;AAE3B,uBAAsB;;AAEtB,iBAAgB;AAChB,2BAA0B;AAC1B,KAAI;AACJ;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,QAAQ;AAC3B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,EAAE,iDAAiD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAAyD,QAAQ;;AAEjE;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA,EAAC,EAAE,4NAA4N;AAC/N;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,kBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kBAAiB,qBAAqB;AACtC;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;;AAGA,4BAA2B;AAC3B,6BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,EAAC,EAAE,mEAAmE;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB,qFAAqF;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAA+B,gEAAgE;AAC/F,sCAAqC,iGAAiG;AACtI;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;;AAGA,EAAC,EAAE,cAAc;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,kBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,WAAW;AAC5B,wBAAuB,OAAO;AAC9B;AACA,0BAAyB,OAAO;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAqB,QAAQ;AAC7B;AACA,wBAAuB,OAAO;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,qBAAqB;AAClC;AACA,gBAAe,qBAAqB;AACpC;AACA,kBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,qBAAqB;AAClC;AACA,gBAAe,gBAAgB;AAC/B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,qBAAqB;AAClC;AACA;AACA;;AAEA,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA,gBAAe,qBAAqB;AACpC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,EAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO,6BAA6B;AACpC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,+BAA+B;AACtC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,+BAA+B;AACtC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,+BAA+B;AACtC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,+BAA+B;AACtC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,6BAA6B;AACpC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,6BAA6B;AACpC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,8BAA8B;AACrC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,yCAAyC;AAChD,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,oCAAoC;AAC3C,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,8BAA8B;AACrC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,kCAAkC;AACzC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,kCAAkC;AACzC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,0BAA0B;AACjC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,kCAAkC;AACzC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,yCAAyC;AAChD,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,gCAAgC;AACvC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,kCAAkC;AACzC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,yCAAyC;AAChD,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,qCAAqC;AAC5C,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,2BAA2B;AAClC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,2BAA2B;AAClC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,2BAA2B;AAClC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,2BAA2B;AAClC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,4BAA4B;AACnC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,6CAA6C;AACpD,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,6BAA6B;AACpC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,QAAO,iCAAiC;AACxC,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,iBAAgB,uBAAuB;AACvC;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,iBAAgB,uBAAuB;AACvC;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,iBAAgB,uBAAuB;AACvC;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,iBAAgB,uBAAuB;AACvC;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,iBAAgB,wBAAwB;AACxC;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,iBAAgB,wBAAwB;AACxC;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAiB,uBAAuB;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,oBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,8BAA6B,6CAA6C;AAC1E;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,EAAC,EAAE,qCAAqC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,sBAAsB;AACvC;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA,EAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;;AAEA,EAAC,EAAE,wCAAwC;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA,EAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAwB;AACxB;AACA,IAAG,4BAA4B;AAC/B;AACA,IAAG,4BAA4B;AAC/B;AACA,IAAG,4BAA4B;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,EAAE,iDAAiD;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,EAAE,eAAe;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA,EAAC,EAAE,6DAA6D;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,EAAE,qHAAqH;AACxH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA,EAAC,EAAE,qBAAqB;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAC,GAAG;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,EAAC,EAAE,mCAAmC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,iCAAgC;AAChC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe,k7DAAk7D;AACj8D;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,EAAC,EAAE,kBAAkB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,EAAC,EAAE,sDAAsD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA,EAAC,EAAE,eAAe;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,qBAAqB;AAChD;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;;AAEA;AACA;AACA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ACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB,mDAAmD;AACxE;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,wCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA,cAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iDAAgD,EAAE;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,0CAAyC;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAwB,eAAe;AACvC;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,yBAAwB,QAAQ;AAChC;AACA,sBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,sBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,sBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,oBAAmB,cAAc;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD,OAAO;AAC9D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD,OAAO;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,sBAAqB,QAAQ;AAC7B;AACA;AACA,IAAG;AACH;AACA,gBAAe,SAAS;AACxB;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,oBAAmB,SAAS;AAC5B;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,YAAY;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,kBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAiB,gBAAgB;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;AC5vDA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qCAAoC,SAAS;AAC7C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA,qBAAoB,OAAO;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,2CAA0C,UAAU;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;;;;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAQ,WAAW;;AAEnB;AACA;AACA;AACA,SAAQ,WAAW;;AAEnB;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA,SAAQ,WAAW;;AAEnB;AACA;AACA,SAAQ,UAAU;;AAElB;AACA;;;;;;;;;;ACnFA,kBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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B,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;AACvE,eAAU,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE;;AAEvE,YAAO,EAAE,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,YAAY,EAAE,YAAY,EAAE,IAAI,EAAE;IACtE;EACF,CAAC;;AAEF,KAAM,KAAK,GAAG;AACZ,SAAM,EAAE;AACN,kBAAa,EAAG,EAAE,IAAI,EAAE,MAAM,EAAG,MAAM,EAAE,IAAI,EAAE;AAC/C,cAAS,EAAO,EAAE,IAAI,EAAE,OAAO,EAAE,YAAY,EAAE,EAAC,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,KAAK,EAAE,gBAAgB,EAAE;IACxG;EACF;;mBAEc,EAAE,QAAQ,EAAR,QAAQ,EAAE,QAAQ,EAAR,QAAQ,EAAE,iBAAiB,EAAjB,iBAAiB,EAAE,SAAS,EAAT,SAAS,EAAE,cAAc,EAAd,cAAc;AAC/E,UAAO,EAAP,OAAO,EAAE,QAAQ,EAAR,QAAQ,EAAE,cAAc,EAAd,cAAc,EAAE,OAAO,EAAP,OAAO,EAAE,YAAY,EAAE,KAAK,EAAE,C;;;;;;;;;;;;;;;AC1LnE,KAAM,MAAM,GAAG;AACb,SAAM,EAAE;AACN,eAAU,EAAE,EAAE,KAAK,EAAE,oBAAoB,EAAE,IAAI,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAC;AAChF,mBAAc,EAAE,EAAE,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,MAAM,EAAE;AACtD,oBAAe,EAAE,EAAE,KAAK,EAAE,wBAAwB,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE,YAAY,EAAE,EAAE,EAAE;AACjH,wBAAmB,EAAE,EAAE,KAAK,EAAE,kBAAkB,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,CAAC,GAAG,EAAC,GAAG,CAAC,EAAE,MAAM,EAAE,CAAC,WAAW,EAAE,mBAAmB,CAAC,EAAE,YAAY,EAAE,GAAG,EAAE;;AAErJ,WAAM,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE;AACzC,sBAAiB,EAAE,EAAE,KAAK,EAAE,gCAAgC,EAAE,IAAI,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE;AACpG,gBAAW,EAAE,EAAE,KAAK,EAAE,cAAc,EAAE,IAAI,EAAE,MAAM,EAAE;AACpD,cAAS,EAAE,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI,EAAG,SAAS,EAAE,MAAM,EAAE,CAAC,WAAW,EAAE,WAAW,CAAC,EAAE,MAAM,EAAE,CAAC,YAAY,EAAE,WAAW,CAAC,EAAE,YAAY,EAAE,WAAW,EAAE;;AAExJ,iBAAY,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,CAAC,QAAQ,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,CAAC,EAAE,YAAY,EAAE,QAAQ,EAAE;AAC7H,wBAAmB,EAAE,EAAE,KAAK,EAAE,eAAe,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE;AAC5H,sBAAiB,EAAE,EAAE,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE;;AAExH,YAAO,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE;AACnE,iBAAY,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE;AACnH,aAAQ,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE;;AAE5G,oBAAe,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE;AAC3E,yBAAoB,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE;AACvH,6BAAwB,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE;AAC7H,4BAAuB,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE;AAC1H,wBAAmB,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE;AACnH,0BAAqB,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE;AAC3H,2BAAsB,EAAE,EAAE,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE;AACxH,2BAAsB,EAAE,EAAE,KAAK,EAAE,kBAAkB,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,EAAE,QAAQ,EAAE,CAAC,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE;AAClI,iCAA4B,EAAE,EAAE,KAAK,EAAE,mBAAmB,EAAE,IAAI,EAAE,SAAS,EAAE,YAAY,EAAE,KAAK,EAAE;;AAElG,iBAAY,EAAE,EAAE,KAAK,EAAE,cAAc,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,EAAE,EAAE;;IAEtF;EACF,CAAC;;mBAEa,EAAE,MAAM,EAAN,MAAM,EAAE,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mBCtBV,EAAE,IAAI,kBAAE,UAAU,wBAAE,IAAI,kBAAE,iBAAiB,+BAAE,KAAK,mBAAE,GAAG,iBAAE,MAAM;AAC5E,OAAI,kBAAE,OAAO,qBAAE,QAAQ,sBAAE,KAAK,mBAAE,KAAK,mBAAE,IAAI,kBAAE,C;;;;;;;;;;;;;;;;;;;;;ACX/C,KAAM,IAAI,GAAG;AACX,SAAM,EAAE;AACN,aAAQ,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,wBAAwB,EAAC;IAC1D;;AAED,SAAM,EAAE,gBAAS,QAAQ,EAAE,SAAS,QAA+B;SAA3B,IAAI,QAAJ,IAAI;SAAE,KAAK,QAAL,KAAK;SAAE,UAAU,QAAV,UAAU;;AAC7D,SAAM,OAAO,GAAG,UAAU,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AAC1C,SAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC;AACrC,SAAM,KAAK,GAAG,OAAO,IAAK,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,aAVnD,aAAa,EAUoD,KAAK,CAAE;AAC7E,SAAM,GAAG,GAAG,KAAK,IAAI,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAC9C,SAAM,OAAO,GAAG,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,IAAI,YAbpC,gBAAgB,EAaqC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;AAChF,SAAM,IAAI,GAAG,OAAO,IAAI,aAfW,oBAAoB,EAeV,OAAO,EAAE,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;;AAEpE,YAAO,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC,GAAG,SAAS,CAAC;IACvD;EACF;;mBAEc,IAAI,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBnB,UAAS,oBAAoB,GAAS;OAAR,GAAG,yDAAC,EAAE;;AAClC,OAAM,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC/B,OAAI,UAAU,GAAG,EAAE,CAAC;AACpB,OAAI,CAAC;OAAC,CAAC;OAAC,KAAK;OAAC,GAAG;OAAC,CAAC,aAAC;AACpB,QAAK,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AAC/B,MAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AACf,SAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;sBACX,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC;;;;AAAzB,YAAK;AAAC,UAAG;;AACV,YAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;AACtB,UAAG,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;AAClB,YAAK,CAAC,GAAC,KAAK,EAAE,CAAC,IAAE,GAAG,EAAE,CAAC,EAAE,EAAE;AACzB,mBAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACpB;MACF,MAAM;AACL,iBAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;MAC5B;IACF;AACD,UAAO,UAAU,CAAC;EACnB;;AAED,KAAM,iBAAiB,GAAG;AACxB,SAAM,EAAE;AACN,gBAAW,EAAE,EAAE,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,YAAY,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,UAAU,EAAE,IAAI,EAAE;AACnH,aAAQ,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,EAAE,YAAY,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE;AACzH,UAAK,EAAE,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,YAAY,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE;AACvI,kBAAa,EAAE,EAAE,KAAK,EAAE,gBAAgB,EAAE,IAAI,EAAE,SAAS,EAAE,YAAY,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE;;;;;;;AAO7F,kBAAa,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,EAAE;IACxE;;AAED,SAAM,EAAE,gBAAS,QAAQ,EAAE,SAAS,EAAE;AACpC,SAAM,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACnC,SAAI,CAAC,IAAI,EAAE,OAAO,SAAS,CAAC;;AAE5B,SAAM,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC;AAC3B,SAAM,OAAO,GAAG,GAAG,CAAC;AACpB,SAAM,OAAO,GAAG,UA3CD,SAAS,CA2CE,QAAQ,CAAC;;AAEnC,SAAM,OAAO,GAAG,oBAAoB,CAAC,QAAQ,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;;;AAGnE,SAAM,SAAS,GAAG,cAhDH,SAAS,CAgDQ,OAAO,EAAE,UAhD1B,SAAS,CAgD2B,QAAQ,CAAC,CAAC;AAC7D,SAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;;AAEhD,SAAM,OAAO,GAAG,cAnDX,QAAQ,CAmDiB,IAAI,CAAE,CAAC;AACrC,SAAM,UAAU,GAAG,cApDO,OAAO,CAoDF,UApDI,QAAQ,CAoDH,UAAU,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC,CAAC;AACvE,SAAM,YAAY,GAAG,UAAU,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;AAC/C,eAAU,CAAC,MAAM,GAAG,YAAY,CAAC;AACjC,eAvDmC,QAAQ,CAuDlC,SAAS,CAAE,OAAO,EAAE,WAAW,EAAE,UAAU,CAAE,CAAC;;AAEvD,SAAI,aAAa,GAAG,UAzDL,SAAS,CAyDM,UAAU,CAAC,IAAI,EAAE,UAzDhC,SAAS,CAyDiC,QAAQ,EAAE,WAAW,EAAE,SAAS,CAAC,CAAC;;AAE3F,SAAM,UAAU,GAAG,CAAC,CAAC,SAAS,CAAC;;AAE/B,UAAM,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,aAAa,CAAC,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,EAAG,CAAC,EAAG;AACzD,WAAI,CAAC,GAAG,aAAa,CAAE,CAAC,CAAE,CAAC;;AAE3B,mBAAY,CAAC,KAAK,CAAE,CAAC,EACjB,YAAY,CAAC,KAAK,CAAE,CAAC,EAAE,IAAI,gBAAM,OAAO,EAAE,CAAC,CAAC,GAAG,CAAE,WAAW,CAAE,CAAE,CAAC;MACtE;AACD,YAAO,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IACvC;EACF;;mBAEc,iBAAiB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClEhC,KAAM,KAAK,GAAG;AACZ,SAAM,EAAE;AACN,WAAM,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC,EAAC,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE;AACtG,YAAO,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAG,QAAQ,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE;AAC1G,YAAO,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAG,QAAQ,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE;;AAE1G,WAAM,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,YAAY,EAAE,IAAI,gBAAM,OAAO,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE,EAAE,UAAU,EAAE,IAAI,EAAE;AAClH,aAAQ,EAAE,EAAC,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,EAAG,QAAQ,EAAE,CAAC,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,YAAY,EAAE,IAAI,gBAAM,OAAO,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE,EAAE,UAAU,EAAE,IAAI,EAAE;AACnJ,UAAK,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,YAAY,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE;AAC1F,UAAK,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,EAAE,YAAY,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE;;;;;;;;;;AAU1F,YAAO,EAAE,EAAC,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAC;AAC5C,cAAS,EAAE,EAAC,KAAK,EAAE,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAC;AAChD,iBAAY,EAAE,EAAC,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,QAAQ,EAAC;AACjD,eAAU,EAAE,EAAC,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,QAAQ,EAAC;AAClD,aAAQ,EAAE,EAAC,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAC;;IAW3C;;;;;;;;;;;AAED,SAAM,EAAE,gBAAS,QAAQ,EAAE,SAAS,EAAE;AACpC,SAAM,IAAI,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACnC,SAAG,CAAC,IAAI,EAAE,OAAO,SAAS,CAAC;;AAE3B,SAAM,OAAO,GAAG,EAAE,CAAC;;AAEnB,SAAM,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AACxC,SAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACtC,SAAM,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;;AAExC,YAAO,CAAC,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACtC,YAAO,CAAC,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACtC,YAAO,CAAC,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AACxC,YAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAC5C,YAAO,CAAC,UAAU,GAAG,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AAClD,YAAO,CAAC,KAAK,GAAG,IAAI,gBAAM,OAAO,CAAC,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;;AAE5D,SAAM,WAAW,GAAG,UAAU,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;;AAE9C,YAAO,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,CAAC;IAC5C;EACF;;AAED,UAAS,UAAU,CAAE,QAAQ,EAAE,YAAY,EAAG;;AAE5C,eAAY,GAAG,YAAY,IAAI,EAAE;;AAEjC,OAAM,QAAQ,GAAG,YAAY,CAAC,QAAQ,CAAC,cAAc,CAAE,GAAG,GAAG,IAAI,CAAC,EAAE,CAAE,IAAI,IAAI,gBAAM,OAAO,EAAE,CAAC;AAC9F,OAAM,KAAK,GAAG,YAAY,CAAC,KAAK,IAAI,IAAI,gBAAM,OAAO,CAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAE,CAAC;AACjE,OAAM,MAAM,GAAG,YAAY,CAAC,MAAM,IAAI,IAAI,gBAAM,OAAO,EAAE,CAAC;AAC1D,OAAM,UAAU,GAAK,YAAY,CAAC,UAAU,KAAK,SAAS,GAAK,YAAY,CAAC,UAAU,GAAG,SAAS,CAAC;AACnG,OAAM,KAAK,GAAI,YAAY,CAAC,KAAK,KAAK,SAAS,GAAI,YAAY,CAAC,KAAK,GAAG,GAAG,CAAC;AAC5E,OAAM,KAAK,GAAI,YAAY,CAAC,KAAK,KAAK,SAAS,GAAI,YAAY,CAAC,KAAK,GAAG,GAAG;;;AAG3E,OAAM,cAAc,GAAG,IAAI,gBAAM,OAAO,EAAE,CAAC,qBAAqB,CAAE,IAAI,gBAAM,KAAK,EAAE,CAAC,cAAc,CAAE,QAAQ,EAAE,KAAK,CAAE,CAAE,CAAC;AACxH,OAAM,iBAAiB,GAAG,IAAI,gBAAM,OAAO,EAAE,CAAC,UAAU,CAAE,cAAc,CAAE,CAAC;;AAE3E,OAAM,gBAAgB,GAAG,QAAQ,CAAC,gBAAgB,CAAC;AACnD,OAAM,gBAAgB,GAAG,QAAQ,CAAC,SAAS,CAAC,gBAAgB,CAAC;AAC7D,OAAM,MAAM,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC;;AAEzC,OAAM,kBAAkB,GAAG,IAAI,WAAW,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;AACpE,OAAM,QAAQ,GAAG,8BAAoB,gBAAM,OAAO,EAAE,gBAAgB,CAAC,MAAM,CAAC,CAAC;;AAE7E,OAAM,OAAO,GAAG,IAAI,gBAAM,OAAO,EAAE,CAAC;AACpC,OAAM,OAAO,GAAG,IAAI,gBAAM,OAAO,EAAE,CAAC;AACpC,OAAM,UAAU,GAAG,IAAI,gBAAM,OAAO,EAAE,CAAC;AACvC,OAAM,KAAK,GAAG,IAAI,gBAAM,OAAO,EAAE;;;AAGjC,OAAI,SAAS,GAAG,CAAC,CAAC;AAClB,OAAI,OAAO,GAAG,CAAC,CAAC;AAChB,OAAI,cAAc,GAAG,CAAC,CAAC;AACvB,QAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAC,gBAAgB,CAAC,MAAM,EAAE,CAAC,EAAE,EAAC;AAC5C,YAAO,GAAG,gBAAgB,CAAC,CAAC,CAAC;;;AAG7B,eAAU,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;AAC7B,UAAM,IAAI,CAAC,GAAG,SAAS,EAAE,CAAC,GAAC,OAAO,EAAE,CAAC,EAAE,EAAG;;AAExC,WAAI,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AACd,WAAG,CAAC,IAAI,OAAO,EAAC;AACd,UAAC,GAAG,SAAS,CAAC;QACf;AACD,aAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;AAC3C,aAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;;AAE3C,iBAAU,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,KAAK,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAClE,iBAAU,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,KAAK,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;AAClE,iBAAU,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,KAAK,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;MACnE;AACD,eAAU,CAAC,SAAS,EAAE;;;AAGtB,UAAK,IAAI,CAAC,GAAG,SAAS,EAAE,CAAC,GAAC,OAAO,EAAE,CAAC,EAAE,EAAE;;AAEtC,aAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;;AAE3C,cAAO,CAAC,GAAG,CAAC,MAAM,CAAC;AACnB,cAAO,CAAC,YAAY,CAAE,iBAAiB,CAAE;;AAEzC,eAAQ,CAAE,OAAO,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,CAAE;;;AAG7C,WAAK,KAAK,KAAK,GAAG,EAAG;AACnB,cAAK,CAAC,CAAC,IAAI,KAAK,CAAC;QAClB;;AAED,WAAK,KAAK,KAAK,GAAG,EAAG;AACnB,cAAK,CAAC,CAAC,IAAI,KAAK,CAAC;QAClB;;;;;AAKD,yBAAkB,CAAC,CAAC,CAAC,GAAG,cAAc,CAAC;AACvC,eAAQ,CAAC,KAAK,CAAC,cAAc,EAAE,EAAE,KAAK,CAAE,CAAC;MAC1C;;AAED,cAAS,GAAG,OAAO,CAAC;IACrB;;AAED,OAAM,UAAU,GAAG,uBAAa,QAAQ,CAAC,CAAC;;AAE1C,OAAM,QAAQ,GAAG,sBAAa;AAC7B,qBAAgB,EAAE,gBAAgB;AAClC,qBAAgB,EAAE,kBAAkB;AACpC,WAAM,EAAE,QAAQ;IAChB,CAAC,CAAC;;AAEH,aAAU,CAAC,MAAM,CAAC,GAAG,CAAE,UAAU,EAAE,QAAQ,CAAE,CAAC;;AAE9C,UAAO,UAAU,CAAC;EACnB,CAAC;;AAGF,UAAS,QAAQ,CAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,EAAE,EAAG;;AAE7C,OAAI,CAAC,GAAG,CAAC,CAAC;AACV,OAAI,CAAC,GAAG,CAAC,CAAC;;AAEV,OAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;AACnB,OAAM,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;AACnB,OAAM,CAAC,GAAG,MAAM,CAAC,CAAC;;AAElB,OAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAE,MAAM,CAAC,CAAC,CAAE,CAAC;AAChC,OAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAE,MAAM,CAAC,CAAC,CAAE,CAAC;AAChC,OAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAE,MAAM,CAAC,CAAC,CAAE,CAAC;;AAEhC,OAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;AACxB,MAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;AACvB,MAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;IACvB;AACD,OAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;AACxB,MAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;AACtB,MAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;IACxB;AACD,OAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;AACxB,MAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;AACtB,MAAC,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC;IACvB;;;;AAID,OAAK,MAAM,CAAC,CAAC,GAAG,CAAC,EAAG;AAClB,MAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IACZ;AACD,OAAK,MAAM,CAAC,CAAC,GAAG,CAAC,EAAG;AAClB,MAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IACZ;AACD,OAAK,MAAM,CAAC,CAAC,GAAG,CAAC,EAAG;AAClB,MAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;IACZ;;AAED,KAAE,CAAC,GAAG,CAAE,CAAC,EAAE,CAAC,CAAE,CAAC;AACf,UAAO,EAAE,CAAC;EACX;;;AAAC,mBAGa,KAAK,C;;;;;;;;;;;;;;;;;;;;;ACzMpB,KAAM,IAAI,GAAG;AACX,SAAM,EAAE;AACN,iBAAY,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,cAAc,EAAE,IAAI,EAAE,MAAM,EAAE;AACvE,qBAAgB,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,oBAAoB,EAAE,YAAY,EAAE,IAAI,EAAE,MAAM,EAAE,gBAAS,CAAC,EAAE;AAAE,gBAAO,CAAC,CAAC,MAAM,EAAE,CAAC;QAAE,EAAE;IAChI;;AAED,SAAM,EAAE,gBAAS,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE;AAC3C,SAAM,QAAQ,GAAG,KAAK,CAAC,IAAI,CAAC;AAC5B,SAAM,kBAAkB,GAAG,QAAQ,CAAC,iBAAiB,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;;;;AAIzE,SAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AAC9C,SAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;AAClD,SAAI,aAAa,GAAG,CAAC,CAAC;;;AAGtB,SAAM,mBAAmB,GAAG,QAAQ,CAAC,GAAG,CAAC,UAAC,IAAI,EAAK;AACjD,cAAO,QAAQ,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;MACnD,CAAC,CAAC,OAAO,EAAE;;;AAGZ,SAAI,QAAQ,EAAG;AACb,YAAK,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAG,EAAG;AACjD,aAAI,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAE,CAAC,CAAE,CAAC;AACjC,aAAI,QAAQ,IAAI,QAAQ,EAAG;AACzB,wBAAa,GAAG,CAAC,CAAC;AAClB,iBAAM;UACP;QACF;MACF;;AAED,SAAM,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACvC,SAAM,oBAAoB,GAAG,kBAAkB,CAAC;;AAEhD,SAAM,WAAW,GAAG,oBAAK,QAAQ,EAAE,oBAAoB,EAAE,mBAAmB,EAAE,aAAa,CAAC,CAAC;;AAE7F,YAAO,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;IAC3C;EACF;;mBAEc,IAAI,C;;;;;;;;;;;;;;mBCtCK,IAAI;;;;;;;;;;;;;;;;;;;;AAAb,UAAS,IAAI,CAAE,QAAQ,EAAE,oBAAoB,EAAE,mBAAmB,EAAE,aAAa,EAAG;AACjG,OAAG,CAAC,QAAQ,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAC;;AAEjC,YAAO,QAAQ,CAAC;IACjB;;AAED,OAAM,QAAQ,GAAG,QAAQ,CAAC,QAAQ,CAAC;AACnC,OAAM,SAAS,GAAG,QAAQ,CAAC,eAAe,CAAC,QAAQ,CAAC,SAAS,CAAC,MAAM,EAAE,oBAAoB,EAAE,mBAAmB,EAAE,aAAa,CAAC,CAAC;;AAEhI,OAAM,YAAY,GAAG,sBAAa;AAChC,qBAAgB,EAAE,QAAQ,CAAC,gBAAgB;AAC3C,qBAAgB,EAAE,QAAQ,CAAC,SAAS,CAAC,gBAAgB;AACrD,WAAM,EAAE,SAAS;IAClB,CAAC,CAAC;;AAEH,OAAM,UAAU,GAAG,uBAAa,QAAQ,CAAC,CAAC;AAC1C,aAAU,CAAC,SAAS,GAAG,YAAY,CAAC;;AAGpC,UAAO,UAAU,CAAC;EACnB,C;;;;;;;;;;;;;;;;;;;;;ACtBD,KAAM,GAAG,GAAG;AACV,SAAM,EAAE;AACJ,UAAK,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE;AACtG,UAAK,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,YAAY,EAAE,CAAC,EAAC,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE;AACrG,WAAM,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,YAAY,EAAE,CAAC,EAAE,IAAI,EAAE,GAAG,EAAG,QAAQ,EAAE,GAAG,EAAE,UAAU,EAAE,IAAI,EAAE;AACzG,kBAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,gBAAgB,EAAE,YAAY,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,IAAI,EAAE,EAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAC,KAAK,EAAE,KAAK,EAAC,EAAE,EAAE,EAAE,EAAC,KAAK,EAAE,IAAI,EAAC,EAAC,EAAC;AACjL,kBAAa,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,gBAAgB,EAAE,YAAY,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE;AAC3H,mBAAc,EAAE,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,iBAAiB,EAAE,YAAY,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE;IAChI;;AAED,SAAM,EAAE,gBAAS,QAAQ,EAAE,SAAS,EAAE;0BAC2C,QAAQ,CAAC,IAAI,EAAE;;SAAtF,KAAK,kBAAL,KAAK;SAAE,MAAM,kBAAN,MAAM;SAAE,KAAK,kBAAL,KAAK;SAAE,aAAa,kBAAb,aAAa;SAAE,cAAc,kBAAd,cAAc;SAAE,aAAa,kBAAb,aAAa;;AAC1E,YAAO,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,mBAAI,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,cAAc,EAAE,aAAa,CAAC,CAAC,CAAC;IACvG;EACF;;mBAEc,GAAG,C;;;;;;;;;;;;;;mBCZM,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAZ,UAAS,GAAG,CAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,cAAc,EAAE,aAAa,EAAG;;AAEhG,gBAAa,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;AAC/C,iBAAc,GAAG,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;AACjD,gBAAa,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;;AAE/C,OAAM,gBAAgB,GAAG,IAAI,WAAW,CAAE,aAAa,GAAC,cAAc,GAAE,CAAC,GAAI,aAAa,GAAC,aAAa,GAAE,CAAC,GAAI,cAAc,GAAC,aAAa,GAAE,CAAC,GAAG,CAAC,CAAC;AACnJ,OAAM,gBAAgB,GAAG,IAAI,WAAW,CAAC,CAAE,aAAa,GAAC,cAAc,GAAE,CAAC,GAAI,aAAa,GAAC,aAAa,GAAE,CAAC,GAAI,cAAc,GAAC,aAAa,GAAE,CAAC,IAAE,CAAC,CAAC;AACnJ,OAAM,MAAM,GAAG,8BAAqB,gBAAM,OAAO,EAAE,CAAC,aAAa,GAAC,CAAC,KAAG,cAAc,GAAC,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,aAAa,GAAC,CAAC,KAAG,aAAa,GAAC,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,cAAc,GAAC,CAAC,KAAG,aAAa,GAAC,CAAC,CAAC,GAAC,CAAC,CAAE,CAAC;AAC7K,OAAM,OAAO,GAAG,8BAAqB,gBAAM,OAAO,EAAE,CAAC,aAAa,GAAC,CAAC,KAAG,cAAc,GAAC,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,aAAa,GAAC,CAAC,KAAG,aAAa,GAAC,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,cAAc,GAAC,CAAC,KAAG,aAAa,GAAC,CAAC,CAAC,GAAC,CAAC,CAAE,CAAC;AAC9K,OAAM,QAAQ,GAAG,8BAAqB,gBAAM,OAAO,EAAE,CAAC,aAAa,GAAC,CAAC,KAAG,cAAc,GAAC,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,aAAa,GAAC,CAAC,KAAG,aAAa,GAAC,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,cAAc,GAAC,CAAC,KAAG,aAAa,GAAC,CAAC,CAAC,GAAC,CAAC,CAAE,CAAC;;AAE/K,OAAM,aAAa,GAAG,KAAK,GAAG,aAAa,CAAC;AAC5C,OAAM,cAAc,GAAG,MAAM,GAAG,cAAc,CAAC;AAC/C,OAAM,aAAa,GAAG,KAAK,GAAG,aAAa,CAAC;;AAE5C,OAAM,UAAU,GAAG,KAAK,GAAG,CAAC,CAAC;AAC7B,OAAM,WAAW,GAAG,MAAM,GAAG,CAAC,CAAC;AAC/B,OAAM,UAAU,GAAG,KAAK,GAAG,CAAC,CAAC;;AAE7B,OAAI,EAAE;OAAE,EAAE;OAAE,EAAE,aAAC;AACf,OAAI,SAAS,GAAG,CAAC,CAAC;;AAElB,OAAM,QAAQ,GAAG,IAAI,gBAAM,OAAO,EAAE,CAAC;AACrC,OAAM,SAAS,GAAG,IAAI,gBAAM,OAAO,EAAE,CAAC;AACtC,OAAM,KAAK,GAAG,IAAI,gBAAM,OAAO,EAAE;;;AAGjC,OAAI,eAAe,GAAG,CAAC,CAAC;AACxB,YAAS,OAAO,CAAC,KAAK,EAAC;AACrB,qBAAgB,CAAC,eAAe,CAAC,GAAG,KAAK,CAAC;AAC1C,oBAAe,EAAE,CAAC;IACnB;;;AAGD,QAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,gBAAgB,CAAC,MAAM,EAAG,EAAE,EAAE,EAAE,EAAE,IAAE,CAAC,EAAC;AAC7D,qBAAgB,CAAC,EAAE,CAAC,GAAG,EAAE;AAAC,IAC3B;;;AAID,QAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAC;;AACvB,UAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,cAAc,EAAE,EAAE,EAAE,EAAC;AACrC,YAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,aAAa,EAAE,EAAE,EAAE,EAAC;AACpC,gBAAO,CAAE,SAAS,GAAG,EAAE,IAAI,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AAClD,gBAAO,CAAE,SAAS,GAAG,EAAE,IAAI,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AACtD,gBAAO,CAAE,SAAS,GAAG,CAAE,EAAE,GAAG,CAAC,KAAM,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAC9D,gBAAO,CAAE,SAAS,GAAG,CAAE,EAAE,GAAG,CAAC,KAAM,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC3D;MACF;AACD,cAAS,IAAI,CAAC,aAAa,GAAC,CAAC,KAAG,cAAc,GAAC,CAAC,CAAC,CAAC;IACnD;;;AAGD,QAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAC;;AACvB,UAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,aAAa,EAAE,EAAE,EAAE,EAAC;AACpC,YAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,aAAa,EAAE,EAAE,EAAE,EAAC;AACpC,gBAAO,CAAE,SAAS,GAAG,EAAE,IAAI,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AAClD,gBAAO,CAAE,SAAS,GAAG,EAAE,IAAI,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AACtD,gBAAO,CAAE,SAAS,GAAG,CAAE,EAAE,GAAG,CAAC,KAAM,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAC9D,gBAAO,CAAE,SAAS,GAAG,CAAE,EAAE,GAAG,CAAC,KAAM,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC3D;MACF;AACD,cAAS,IAAI,CAAC,aAAa,GAAC,CAAC,KAAG,aAAa,GAAC,CAAC,CAAC,CAAC;IAClD;;;AAGD,QAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,EAAE,EAAC;;AACvB,UAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,cAAc,EAAE,EAAE,EAAE,EAAC;AACrC,YAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,aAAa,EAAE,EAAE,EAAE,EAAC;AACpC,gBAAO,CAAE,SAAS,GAAG,EAAE,IAAI,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AAClD,gBAAO,CAAE,SAAS,GAAG,EAAE,IAAI,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AACtD,gBAAO,CAAE,SAAS,GAAG,CAAE,EAAE,GAAG,CAAC,KAAM,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAC;AAC9D,gBAAO,CAAE,SAAS,GAAG,CAAE,EAAE,GAAG,CAAC,KAAM,aAAa,GAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QAC3D;MACF;AACD,cAAS,IAAI,CAAC,aAAa,GAAC,CAAC,KAAG,cAAc,GAAC,CAAC,CAAC,CAAC;IACnD;;;AAID,OAAI,eAAe,GAAG,CAAC,CAAC;AACxB,YAAS,OAAO,CAAC,KAAK,EAAC;AACrB,WAAM,CAAC,KAAK,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC;AACrC,oBAAe,EAAE,CAAC;IACnB;;;AAGD,OAAI,mBAAmB,GAAG,CAAC,CAAC;AAC5B,YAAS,YAAY,CAAC,EAAE,EAAE,IAAI,EAAC;AAC7B,aAAQ,CAAC,KAAK,CAAC,mBAAmB,EAAE,EAAE,CAAC,CAAC;AACxC,YAAO,CAAC,KAAK,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;AACzC,wBAAmB,EAAE,CAAC;IACvB;;;;AAID,QAAK,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,IAAE,CAAC,EAAC;;AAC1B,UAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,cAAc,GAAC,CAAC,EAAE,EAAE,EAAE,EAAC;;;AAGvC,WAAI,CAAC,GAAG,CAAC,CAAC,GAAC,EAAE,GAAC,EAAE,GAAC,cAAc,GAAG,EAAE,GAAC,WAAW,CAAC;;AAEjD,YAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,aAAa,GAAC,CAAC,EAAE,EAAE,EAAE,EAAC;;AAEtC,aAAI,CAAC,GAAG,EAAE,GAAC,aAAa,GAAG,UAAU;;;AAGrC,iBAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAC,EAAE,GAAC,UAAU,CAAC,CAAC;AACrC,gBAAO,CAAC,QAAQ,CAAC;;;AAGjB,kBAAS,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAC,EAAE,CAAC;;;AAG1B,cAAK,CAAC,GAAG,CAAC,EAAE,GAAC,aAAa,EAAE,EAAE,GAAC,cAAc,CAAC,CAAC;AAC/C,qBAAY,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAEhC;MACF;IACF;;;AAGD,QAAK,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,IAAE,CAAC,EAAC;;AAC1B,UAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,aAAa,GAAC,CAAC,EAAE,EAAE,EAAE,EAAC;;;AAGtC,WAAI,CAAC,GAAG,CAAC,CAAC,GAAC,EAAE,GAAC,EAAE,GAAC,aAAa,GAAG,EAAE,GAAC,UAAU,CAAC;;AAE/C,YAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,aAAa,GAAC,CAAC,EAAE,EAAE,EAAE,EAAC;;AAEtC,aAAI,CAAC,GAAG,EAAE,GAAC,aAAa,GAAG,UAAU;;;AAGrC,iBAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAC,EAAE,GAAC,WAAW,EAAE,CAAC,CAAC,CAAC;AACtC,gBAAO,CAAC,QAAQ,CAAC;;;AAGjB,kBAAS,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAC,EAAE,EAAE,CAAC,CAAC;;;AAG1B,cAAK,CAAC,GAAG,CAAC,EAAE,GAAC,aAAa,EAAE,EAAE,GAAC,aAAa,CAAC,CAAC;AAC9C,qBAAY,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAEhC;MACF;IACF;;;AAID,QAAK,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC,EAAE,EAAE,IAAE,CAAC,EAAC;;AAC1B,UAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,aAAa,GAAC,CAAC,EAAE,EAAE,EAAE,EAAC;;;AAGtC,WAAI,CAAC,GAAG,CAAC,CAAC,GAAC,EAAE,GAAC,EAAE,GAAC,aAAa,GAAG,EAAE,GAAC,UAAU,CAAC;;AAE/C,YAAK,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,cAAc,GAAC,CAAC,EAAE,EAAE,EAAE,EAAC;;AAEvC,aAAI,CAAC,GAAG,EAAE,GAAC,cAAc,GAAG,WAAW;;;AAGvC,iBAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC,EAAE,GAAC,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACrC,gBAAO,CAAC,QAAQ,CAAC;;;AAGjB,kBAAS,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;;;AAG1B,cAAK,CAAC,GAAG,CAAC,EAAE,GAAC,aAAa,EAAE,EAAE,GAAC,cAAc,CAAC,CAAC;AAC/C,qBAAY,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;QAEhC;MACF;IACF;;AAGD,OAAM,OAAO,GAAG,sBAAa;AAC3B,qBAAgB,EAAE,gBAAgB;AAClC,qBAAgB,EAAE,gBAAgB;AAClC,WAAM,EAAE,MAAM;IACf,CAAC,CAAC;;AAEH,OAAM,SAAS,GAAG,sBAAa;AAC7B,qBAAgB,EAAE,gBAAgB;AAClC,qBAAgB,EAAE,gBAAgB;AAClC,WAAM,EAAE,OAAO;IAChB,CAAC,CAAC;;AAEH,OAAM,KAAK,GAAG,sBAAa;AACzB,qBAAgB,EAAE,gBAAgB;AAClC,qBAAgB,EAAE,gBAAgB;AAClC,WAAM,EAAE,QAAQ;IACjB,CAAC,CAAC;;AAEH,OAAM,YAAY,GAAG,6BAAmB,CAAC;AACzC,OAAI,IAAI,GAAG,SAAS,CAAC;AACrB,eAAY,CAAC,GAAG,CAAE,IAAI,EAAE,KAAK,CAAE,CAAC;;AAGhC,OAAM,QAAQ,GAAG,uBAAc;AAC7B,qBAAgB,EAAE,gBAAgB;AAClC,cAAS,EAAE,OAAO;;AAElB,gBAAW,EAAE,IAAI;;AAEjB,cAAS,EAAE,SAAS;AACpB,eAAU,EAAE,IAAI;;AAEhB,WAAM,EAAE,YAAY;AACpB,cAAS,EAAE,IAAI;IAChB,CAAC,CAAC;;AAGH,UAAO,qCAAuB,QAAQ,CAAE,CAAC;EAC1C,C;;;;;;;;;;;;;;mBCvNuB,qBAAqB;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAA9B,UAAS,qBAAqB,CAAE,QAAQ,EAAE,WAAW,EAAG;;;;;AAKrE,OAAM,CAAC,GAAG,WAAW,IAAI,KAAK,CAAC;;AAE/B,OAAM,gBAAgB,GAAG,IAAI,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;AAC9E,OAAM,MAAM,GAAG,QAAQ,CAAC,SAAS,CAAC,MAAM,CAAC;;AAEzC,OAAM,SAAS,GAAG,2BAAiB,gBAAM,OAAO,CAAC,CAAC;;AAElD,OAAM,aAAa,GAAG,mBAAS,CAAC;AAChC,OAAI,eAAe,GAAG,CAAC,CAAC;;AAExB,OAAI,GAAG,GAAG,CAAC,CAAC;AACZ,OAAI,QAAQ,GAAG,CAAC,CAAC;AACjB,OAAM,KAAK,GAAG,IAAI,gBAAM,OAAO,GAAC;;AAEhC,QAAK,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,gBAAgB,CAAC,MAAM,EAAE,EAAE,EAAE,EAAC;;AAElD,WAAM,CAAC,KAAK,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC;;;AAGzC,QAAG,GAAG,aAAa,GAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAC,IAAI,CAAC,GAAG,MAAM,GAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAC,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,GAAC,IAAI,CAAC,CAAC;;AAE1G,SAAI,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;AAC3B,oBAAa,CAAC,GAAG,CAAC,GAAG,EAAE,eAAe,CAAC;AACvC,eAAQ,GAAG,eAAe,CAAC;AAC3B,gBAAS,CAAC,IAAI,CAAC,KAAK,CAAC;AACrB,sBAAe,EAAE,CAAC;MACnB,MACI;AACH,eAAQ,GAAG,aAAa,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MACnC;;AAED,qBAAgB,CAAC,EAAE,CAAC,GAAG,QAAQ;IAEhC;AAFiC;AAIlC,OAAG,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,GAAG,MAAM,CAAC,MAAM,GAAG,qBAAqB,GAAG,eAAe,GAAG,wBAAwB,IAAI,MAAM,CAAC,MAAM,GAAC,eAAe,CAAC,CAAC,CAAC;;AAE7I,OAAG,MAAM,CAAC,MAAM,KAAK,eAAe,EAAE,OAAO,QAAQ,CAAC;;AAEtD,OAAM,cAAc,GAAG,8BAAoB,gBAAM,OAAO,EAAE,eAAe,CAAC,CAAC;AAC3E,iBAAc,CAAC,SAAS,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC;;AAE9C,OAAM,YAAY,GAAG,sBAAa;AACjC,qBAAgB,EAAE,QAAQ,CAAC,gBAAgB;AAC3C,qBAAgB,EAAE,gBAAgB;AAClC,WAAM,EAAE,cAAc;IACtB,CAAC,CAAC;;AAGH,OAAM,UAAU,GAAG,uBAAc,QAAQ,CAAE,CAAC;AAC5C,aAAU,CAAC,SAAS,GAAG,YAAY,CAAC;;AAEpC,UAAO,UAAU,CAAC;EACnB,C;;;;;;;;;AChED,mBAAkB,uF;;;;;;;;;ACAlB;AACA;AACA;AACA;AACA;AACA,sE;;;;;;;;;ACLA;AACA;;AAEA;AACA;AACA,yBAAwB,mEAAmE;AAC3F,EAAC;AACD;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,EAAC,gB;;;;;;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uBAAsB,OAAO;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,2BAA0B;AAC1B,2BAA0B;AAC1B,sBAAqB;AACrB;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,8DAA6D,OAAO;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB,sBAAqB;AACrB,2BAA0B;AAC1B,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,G;;;;;;;;;AC9IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;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A;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;AACA,EAAC;;AAED;AACA;AACA,0CAAyC,sBAAsB,EAAE;AACjE;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,sBAAsB;AACnC;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAQ,mBAAmB;AAC3B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA2C;AAC3C,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,kBAAkB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAiB,iBAAiB;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,aAAa;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY;AACZ,cAAa,oBAAoB;AACjC;AACA;AACA;AACA;A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","file":"claraplayer-1.6.9.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"claraplayer\"] = factory();\n\telse\n\t\troot[\"claraplayer\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2a4926623201b58d1636\n **/","import THREE from 'three';\nimport rollbar from 'rollbar-browser';\nimport immutable from 'immutable'\nimport snabbdom from 'snabbdom';\nimport h from 'snabbdom/h';\nimport snabbdomClass from 'snabbdom/modules/class'; // makes it easy to toggle classes\nimport snabbdomProps from 'snabbdom/modules/props'; // for setting properties on DOM elements\nimport snabbdomAttrs from 'snabbdom/modules/attributes';\nimport snabbdomStyle from 'snabbdom/modules/style'; // handles styling on elements with support for animations\nimport snabbdomEvents from 'snabbdom/modules/eventlisteners'; // attaches event listeners\nimport eventEmitter from './utils/eventEmitter';\nimport ramda from 'ramda';\nconst { mapObjIndexed }  = ramda;\n\nimport callApi from './store/api';\nimport createLogger from 'redux-logger';\nimport clientMiddleware from './store/clientMiddleware';\n\nimport animation from './modules/animation';\nimport annotations from './modules/annotations';\nimport sceneGraph from './modules/sceneGraph';\nimport sceneIO from './modules/sceneIO';\nimport assets from './modules/assets';\nimport player from './modules/player';\nimport scene from './modules/scene';\nimport plugins from './modules/plugins';\nimport configuration from './modules/configuration';\nimport { setApi } from './modules/plugins';\n\nimport operatorRecords from './operators';\nimport primitives from './operators/primitives';\n\nimport buildStore from './store';\nimport bindActionCreatorsAndSelectors from './store/bindActionCreatorsAndSelectors';\n\nimport playerView from './components/player';\n\nimport tools from './translators/tools';\nimport threeTranslator from './translators/three';\n\nimport { addTool } from './modules/player';\nimport { startAutoRotate, autoRotateTool } from './autoRotate';\n\nconst Rollbar = __ROLLBAR_TOKEN__ && rollbar.init({\n  accessToken: __ROLLBAR_TOKEN__,\n  verbose: true,\n  captureUncaught: true,\n  payload: {\n    environment: __ENV__,\n    context: 'playerv2'\n  }\n});\n\nconst reducers = {\n  animation: animation.reducer,\n  annotations: annotations.reducer,\n  assets: assets.reducer,\n  sceneGraph: sceneGraph.reducer(operatorRecords),\n  sceneIO: sceneIO.reducer,\n  player: player.reducer,\n  plugins: plugins.reducer,\n};\n\n// FIXME: remove this console.warn shim\n//if (__DEV__) console.warn = function() { };\n\ntry {\n\nconst patch = snabbdom.init([snabbdomClass,snabbdomProps,snabbdomAttrs,snabbdomStyle,snabbdomEvents]);\n\n// const middleware = [logger()];\nconst loggerMiddleware = createLogger({\n  timestamp: true, duration: true, transformer: (state) => state.toJS()\n});\nlet middleware = [clientMiddleware];\nif (false) middleware.push(loggerMiddleware);\n\nconst deps = {\n  immutable,\n  patch,\n  h,\n  ramda,\n  THREE\n};\n\n\n/**\n * The main function. This function initializes the player for a given DOM Node.\n *\n * @param {(String|DOMNode)} elOrId - the DOM Node or String id of a DOM Node.\n * @param {Function?} initializationFn - an optional initialization function that will be called (with api as argument) before the first render.\n * @returns {API} The clara playera API.\n * @public\n */\nfunction claraplayer(elOrId, initializationFn) {\n  const parentEl = typeof elOrId==='string' ? document.getElementById(elOrId) : elOrId;\n  parentEl.appendChild(document.createElement('div'));\n  const rect = parentEl.getBoundingClientRect();\n  if (!rect.height) {\n    throw new Error('Player element must have a height');\n  }\n\n  const store = buildStore(reducers, operatorRecords, primitives, middleware);\n  if (Rollbar) store.useRollbar(Rollbar);\n  let dispatch = store.dispatch.bind(store);\n  const translator = threeTranslator(store);\n  store.setTranslator(translator);\n  store.setApi(callApi);\n\n\n  const actions = bindActionCreatorsAndSelectors(store, {\n    animation, annotations, assets, configuration, scene, sceneIO, sceneGraph, player, plugins\n  });\n\n  let api = Object.assign({}, eventEmitter(), {\n    deps,\n    three: {\n      scene: translator.scene,\n      camera: translator.camera,\n    },\n    _store: store\n  }, actions);\n\n  if (initializationFn && typeof initializationFn === 'function') initializationFn(api);\n\n  const el = parentEl.children[0];\n  var parentStyle = window.getComputedStyle(parentEl, null);\n  const isFlex = parentStyle.display === 'flex';\n  const isRelative = parentStyle.position === 'relative';\n  let vnode = patch(el, playerView(store, { isFlex, isRelative, parentEl }));\n\n  store.subscribe(function(events) { //try {\n      vnode = patch(vnode, playerView(store, { isFlex, isRelative, parentEl }));\n      if (events.length) events.forEach((e) => { api.emit(e.type, ...e.args); });\n      api.emit('change');\n    //} catch (e) {\n    //  store.error(e);\n    //}\n  });\n\n  dispatch(setApi(api));\n\n  mapObjIndexed((tool, toolName) => dispatch(addTool(tool, toolName)), tools);\n  const autoRotateToolObj = autoRotateTool(store);\n  dispatch(addTool(autoRotateToolObj, 'stopAutoRotate'));\n\n  api.on('loaded', () => {\n    // TODO: zoom camera\n    autoRotateToolObj.start(1000);\n  });\n\n  return api;\n};\n\nclaraplayer.deps = deps;\n\nclaraplayer.hasWebGL = function() {\n  const canvas = document.createElement('canvas');\n  return !!canvas.getContext('webgl') || !!canvas.getContext('experimental-webgl');\n};\n\n\nmodule.exports = claraplayer;\n\n} catch (e) {\n  if (Rollbar) Rollbar.error(e);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/player.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"babel-runtime/core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/toConsumableArray.js\n ** module id = 2\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/array/from.js\n ** module id = 3\n ** module chunks = 0 1\n **/","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/array/from.js\n ** module id = 4\n ** module chunks = 0 1\n **/","'use strict';\nvar $at  = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.string.iterator.js\n ** module id = 5\n ** module chunks = 0 1\n **/","var toInteger = require('./_to-integer')\n  , defined   = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_string-at.js\n ** module id = 6\n ** module chunks = 0 1\n **/","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-integer.js\n ** module id = 7\n ** module chunks = 0 1\n **/","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_defined.js\n ** module id = 8\n ** module chunks = 0 1\n **/","'use strict';\nvar LIBRARY        = require('./_library')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , hide           = require('./_hide')\n  , has            = require('./_has')\n  , Iterators      = require('./_iterators')\n  , $iterCreate    = require('./_iter-create')\n  , setToStringTag = require('./_set-to-string-tag')\n  , getPrototypeOf = require('./_object-gpo')\n  , ITERATOR       = require('./_wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , $entries   = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined\n    , $anyNative = NAME == 'Array' ? proto.entries || $native : $native\n    , methods, key, IteratorPrototype;\n  // Fix native\n  if($anyNative){\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base));\n    if(IteratorPrototype !== Object.prototype){\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if(!LIBRARY && !has(IteratorPrototype, ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if(DEF_VALUES && $native && $native.name !== VALUES){\n    VALUES_BUG = true;\n    $default = function values(){ return $native.call(this); };\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES ? $default : getMethod(VALUES),\n      keys:    IS_SET     ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-define.js\n ** module id = 9\n ** module chunks = 0 1\n **/","module.exports = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_library.js\n ** module id = 10\n ** module chunks = 0 1\n **/","var global    = require('./_global')\n  , core      = require('./_core')\n  , ctx       = require('./_ctx')\n  , hide      = require('./_hide')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , expProto  = exports[PROTOTYPE]\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(a, b, c){\n        if(this instanceof C){\n          switch(arguments.length){\n            case 0: return new C;\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if(IS_PROTO){\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if(type & $export.R && expProto && !expProto[key])hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library` \nmodule.exports = $export;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_export.js\n ** module id = 11\n ** module chunks = 0 1\n **/","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_global.js\n ** module id = 12\n ** module chunks = 0 1\n **/","var core = module.exports = {version: '2.2.2'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_core.js\n ** module id = 13\n ** module chunks = 0 1\n **/","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_ctx.js\n ** module id = 14\n ** module chunks = 0 1\n **/","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_a-function.js\n ** module id = 15\n ** module chunks = 0 1\n **/","var dP         = require('./_object-dp')\n  , createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function(object, key, value){\n  return dP.f(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_hide.js\n ** module id = 16\n ** module chunks = 0 1\n **/","var anObject       = require('./_an-object')\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\n  , toPrimitive    = require('./_to-primitive')\n  , dP             = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes){\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if(IE8_DOM_DEFINE)try {\n    return dP(O, P, Attributes);\n  } catch(e){ /* empty */ }\n  if('get' in Attributes || 'set' in Attributes)throw TypeError('Accessors not supported!');\n  if('value' in Attributes)O[P] = Attributes.value;\n  return O;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-dp.js\n ** module id = 17\n ** module chunks = 0 1\n **/","var isObject = require('./_is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_an-object.js\n ** module id = 18\n ** module chunks = 0 1\n **/","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-object.js\n ** module id = 19\n ** module chunks = 0 1\n **/","module.exports = !require('./_descriptors') && !require('./_fails')(function(){\r\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', {get: function(){ return 7; }}).a != 7;\r\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_ie8-dom-define.js\n ** module id = 20\n ** module chunks = 0 1\n **/","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_descriptors.js\n ** module id = 21\n ** module chunks = 0 1\n **/","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_fails.js\n ** module id = 22\n ** module chunks = 0 1\n **/","var isObject = require('./_is-object')\n  , document = require('./_global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_dom-create.js\n ** module id = 23\n ** module chunks = 0 1\n **/","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function(it, S){\n  if(!isObject(it))return it;\n  var fn, val;\n  if(S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it)))return val;\n  if(!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it)))return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-primitive.js\n ** module id = 24\n ** module chunks = 0 1\n **/","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_property-desc.js\n ** module id = 25\n ** module chunks = 0 1\n **/","module.exports = require('./_hide');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_redefine.js\n ** module id = 26\n ** module chunks = 0 1\n **/","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_has.js\n ** module id = 27\n ** module chunks = 0 1\n **/","module.exports = {};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iterators.js\n ** module id = 28\n ** module chunks = 0 1\n **/","'use strict';\nvar create         = require('./_object-create')\n  , descriptor     = require('./_property-desc')\n  , setToStringTag = require('./_set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-create.js\n ** module id = 29\n ** module chunks = 0 1\n **/","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\nvar anObject    = require('./_an-object')\r\n  , dPs         = require('./_object-dps')\r\n  , enumBugKeys = require('./_enum-bug-keys')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , Empty       = function(){ /* empty */ }\r\n  , PROTOTYPE   = 'prototype';\r\n\r\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\r\nvar createDict = function(){\r\n  // Thrash, waste and sodomy: IE GC bug\r\n  var iframe = require('./_dom-create')('iframe')\r\n    , i      = enumBugKeys.length\r\n    , gt     = '>'\r\n    , iframeDocument;\r\n  iframe.style.display = 'none';\r\n  require('./_html').appendChild(iframe);\r\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\r\n  // createDict = iframe.contentWindow.Object;\r\n  // html.removeChild(iframe);\r\n  iframeDocument = iframe.contentWindow.document;\r\n  iframeDocument.open();\r\n  iframeDocument.write('<script>document.F=Object</script' + gt);\r\n  iframeDocument.close();\r\n  createDict = iframeDocument.F;\r\n  while(i--)delete createDict[PROTOTYPE][enumBugKeys[i]];\r\n  return createDict();\r\n};\r\n\r\nmodule.exports = Object.create || function create(O, Properties){\r\n  var result;\r\n  if(O !== null){\r\n    Empty[PROTOTYPE] = anObject(O);\r\n    result = new Empty;\r\n    Empty[PROTOTYPE] = null;\r\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\r\n    result[IE_PROTO] = O;\r\n  } else result = createDict();\r\n  return Properties === undefined ? result : dPs(result, Properties);\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-create.js\n ** module id = 30\n ** module chunks = 0 1\n **/","var dP       = require('./_object-dp')\r\n  , anObject = require('./_an-object')\r\n  , getKeys  = require('./_object-keys');\r\n\r\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties){\r\n  anObject(O);\r\n  var keys   = getKeys(Properties)\r\n    , length = keys.length\r\n    , i = 0\r\n    , P;\r\n  while(length > i)dP.f(O, P = keys[i++], Properties[P]);\r\n  return O;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-dps.js\n ** module id = 31\n ** module chunks = 0 1\n **/","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\r\nvar $keys       = require('./_object-keys-internal')\r\n  , enumBugKeys = require('./_enum-bug-keys');\r\n\r\nmodule.exports = Object.keys || function keys(O){\r\n  return $keys(O, enumBugKeys);\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-keys.js\n ** module id = 32\n ** module chunks = 0 1\n **/","var has          = require('./_has')\r\n  , toIObject    = require('./_to-iobject')\r\n  , arrayIndexOf = require('./_array-includes')(false)\r\n  , IE_PROTO     = require('./_shared-key')('IE_PROTO');\r\n\r\nmodule.exports = function(object, names){\r\n  var O      = toIObject(object)\r\n    , i      = 0\r\n    , result = []\r\n    , key;\r\n  for(key in O)if(key != IE_PROTO)has(O, key) && result.push(key);\r\n  // Don't enum bug & hidden keys\r\n  while(names.length > i)if(has(O, key = names[i++])){\r\n    ~arrayIndexOf(result, key) || result.push(key);\r\n  }\r\n  return result;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-keys-internal.js\n ** module id = 33\n ** module chunks = 0 1\n **/","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject')\n  , defined = require('./_defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-iobject.js\n ** module id = 34\n ** module chunks = 0 1\n **/","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iobject.js\n ** module id = 35\n ** module chunks = 0 1\n **/","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_cof.js\n ** module id = 36\n ** module chunks = 0 1\n **/","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject')\n  , toLength  = require('./_to-length')\n  , toIndex   = require('./_to-index');\nmodule.exports = function(IS_INCLUDES){\n  return function($this, el, fromIndex){\n    var O      = toIObject($this)\n      , length = toLength(O.length)\n      , index  = toIndex(fromIndex, length)\n      , value;\n    // Array#includes uses SameValueZero equality algorithm\n    if(IS_INCLUDES && el != el)while(length > index){\n      value = O[index++];\n      if(value != value)return true;\n    // Array#toIndex ignores holes, Array#includes - not\n    } else for(;length > index; index++)if(IS_INCLUDES || index in O){\n      if(O[index] === el)return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_array-includes.js\n ** module id = 37\n ** module chunks = 0 1\n **/","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-length.js\n ** module id = 38\n ** module chunks = 0 1\n **/","var toInteger = require('./_to-integer')\n  , max       = Math.max\n  , min       = Math.min;\nmodule.exports = function(index, length){\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-index.js\n ** module id = 39\n ** module chunks = 0 1\n **/","var shared = require('./_shared')('keys')\r\n  , uid    = require('./_uid');\r\nmodule.exports = function(key){\r\n  return shared[key] || (shared[key] = uid(key));\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_shared-key.js\n ** module id = 40\n ** module chunks = 0 1\n **/","var global = require('./_global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_shared.js\n ** module id = 41\n ** module chunks = 0 1\n **/","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_uid.js\n ** module id = 42\n ** module chunks = 0 1\n **/","// IE 8- don't enum bug keys\r\nmodule.exports = (\r\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\r\n).split(',');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_enum-bug-keys.js\n ** module id = 43\n ** module chunks = 0 1\n **/","module.exports = require('./_global').document && document.documentElement;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_html.js\n ** module id = 44\n ** module chunks = 0 1\n **/","var def = require('./_object-dp').f\n  , has = require('./_has')\n  , TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_set-to-string-tag.js\n ** module id = 45\n ** module chunks = 0 1\n **/","var store      = require('./_shared')('wks')\n  , uid        = require('./_uid')\n  , Symbol     = require('./_global').Symbol\n  , USE_SYMBOL = typeof Symbol == 'function';\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_wks.js\n ** module id = 46\n ** module chunks = 0 1\n **/","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\r\nvar has         = require('./_has')\r\n  , toObject    = require('./_to-object')\r\n  , IE_PROTO    = require('./_shared-key')('IE_PROTO')\r\n  , ObjectProto = Object.prototype;\r\n\r\nmodule.exports = Object.getPrototypeOf || function(O){\r\n  O = toObject(O);\r\n  if(has(O, IE_PROTO))return O[IE_PROTO];\r\n  if(typeof O.constructor == 'function' && O instanceof O.constructor){\r\n    return O.constructor.prototype;\r\n  } return O instanceof Object ? ObjectProto : null;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gpo.js\n ** module id = 47\n ** module chunks = 0 1\n **/","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_to-object.js\n ** module id = 48\n ** module chunks = 0 1\n **/","'use strict';\nvar ctx            = require('./_ctx')\n  , $export        = require('./_export')\n  , toObject       = require('./_to-object')\n  , call           = require('./_iter-call')\n  , isArrayIter    = require('./_is-array-iter')\n  , toLength       = require('./_to-length')\n  , createProperty = require('./_create-property')\n  , getIterFn      = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , aLen    = arguments.length\n      , mapfn   = aLen > 1 ? arguments[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.array.from.js\n ** module id = 49\n ** module chunks = 0 1\n **/","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-call.js\n ** module id = 50\n ** module chunks = 0 1\n **/","// check on default Array iterator\nvar Iterators  = require('./_iterators')\n  , ITERATOR   = require('./_wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-array-iter.js\n ** module id = 51\n ** module chunks = 0 1\n **/","'use strict';\r\nvar $defineProperty = require('./_object-dp')\r\n  , createDesc      = require('./_property-desc');\r\n\r\nmodule.exports = function(object, index, value){\r\n  if(index in object)$defineProperty.f(object, index, createDesc(0, value));\r\n  else object[index] = value;\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_create-property.js\n ** module id = 52\n ** module chunks = 0 1\n **/","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/core.get-iterator-method.js\n ** module id = 53\n ** module chunks = 0 1\n **/","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof')\n  , TAG = require('./_wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function(it, key){\n  try {\n    return it[key];\n  } catch(e){ /* empty */ }\n};\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_classof.js\n ** module id = 54\n ** module chunks = 0 1\n **/","var ITERATOR     = require('./_wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ return {done: safe = true}; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-detect.js\n ** module id = 55\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/assign.js\n ** module id = 56\n ** module chunks = 0 1\n **/","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/assign.js\n ** module id = 57\n ** module chunks = 0 1\n **/","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./_object-assign')});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.assign.js\n ** module id = 58\n ** module chunks = 0 1\n **/","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys  = require('./_object-keys')\n  , gOPS     = require('./_object-gops')\n  , pIE      = require('./_object-pie')\n  , toObject = require('./_to-object')\n  , IObject  = require('./_iobject')\n  , $assign  = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function(){\n  var A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , aLen  = arguments.length\n    , index = 1\n    , getSymbols = gOPS.f\n    , isEnum     = pIE.f;\n  while(aLen > index){\n    var S      = IObject(arguments[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  } return T;\n} : $assign;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-assign.js\n ** module id = 59\n ** module chunks = 0 1\n **/","exports.f = Object.getOwnPropertySymbols;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gops.js\n ** module id = 60\n ** module chunks = 0 1\n **/","exports.f = {}.propertyIsEnumerable;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-pie.js\n ** module id = 61\n ** module chunks = 0 1\n **/","// File:src/Three.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar THREE = { REVISION: '79dev' };\n\n//\n\nif ( typeof define === 'function' && define.amd ) {\n\n\tdefine( 'three', THREE );\n\n} else if ( 'undefined' !== typeof exports && 'undefined' !== typeof module ) {\n\n\tmodule.exports = THREE;\n\n}\n\n// Polyfills\n\nif ( Number.EPSILON === undefined ) {\n\n\tNumber.EPSILON = Math.pow( 2, - 52 );\n\n}\n\n//\n\nif ( Math.sign === undefined ) {\n\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n\n\tMath.sign = function ( x ) {\n\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\n\n\t};\n\n}\n\nif ( Function.prototype.name === undefined ) {\n\n\t// Missing in IE9-11.\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\n\n\tObject.defineProperty( Function.prototype, 'name', {\n\n\t\tget: function () {\n\n\t\t\treturn this.toString().match( /^\\s*function\\s*(\\S*)\\s*\\(/ )[ 1 ];\n\n\t\t}\n\n\t} );\n\n}\n\nif ( Object.assign === undefined ) {\n\n\t// Missing in IE.\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\n\t( function () {\n\n\t\tObject.assign = function ( target ) {\n\n\t\t\t'use strict';\n\n\t\t\tif ( target === undefined || target === null ) {\n\n\t\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\n\n\t\t\t}\n\n\t\t\tvar output = Object( target );\n\n\t\t\tfor ( var index = 1; index < arguments.length; index ++ ) {\n\n\t\t\t\tvar source = arguments[ index ];\n\n\t\t\t\tif ( source !== undefined && source !== null ) {\n\n\t\t\t\t\tfor ( var nextKey in source ) {\n\n\t\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\n\n\t\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn output;\n\n\t\t};\n\n\t} )();\n\n}\n\n//\n\nObject.assign( THREE, {\n\n\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\n\n\tMOUSE: { LEFT: 0, MIDDLE: 1, RIGHT: 2 },\n\n\t// GL STATE CONSTANTS\n\n\tCullFaceNone: 0,\n\tCullFaceBack: 1,\n\tCullFaceFront: 2,\n\tCullFaceFrontBack: 3,\n\n\tFrontFaceDirectionCW: 0,\n\tFrontFaceDirectionCCW: 1,\n\n\t// SHADOWING TYPES\n\n\tBasicShadowMap: 0,\n\tPCFShadowMap: 1,\n\tPCFSoftShadowMap: 2,\n\tPCSSSoftShadowMap: 3,\n\n\t// MATERIAL CONSTANTS\n\n\t// side\n\n\tFrontSide: 0,\n\tBackSide: 1,\n\tDoubleSide: 2,\n\n\t// shading\n\n\tFlatShading: 1,\n\tSmoothShading: 2,\n\n\t// colors\n\n\tNoColors: 0,\n\tFaceColors: 1,\n\tVertexColors: 2,\n\n\t// blending modes\n\n\tNoBlending: 0,\n\tNormalBlending: 1,\n\tAdditiveBlending: 2,\n\tSubtractiveBlending: 3,\n\tMultiplyBlending: 4,\n\tCustomBlending: 5,\n\n\t// custom blending equations\n\t// (numbers start from 100 not to clash with other\n\t// mappings to OpenGL constants defined in Texture.js)\n\n\tAddEquation: 100,\n\tSubtractEquation: 101,\n\tReverseSubtractEquation: 102,\n\tMinEquation: 103,\n\tMaxEquation: 104,\n\n\t// custom blending destination factors\n\n\tZeroFactor: 200,\n\tOneFactor: 201,\n\tSrcColorFactor: 202,\n\tOneMinusSrcColorFactor: 203,\n\tSrcAlphaFactor: 204,\n\tOneMinusSrcAlphaFactor: 205,\n\tDstAlphaFactor: 206,\n\tOneMinusDstAlphaFactor: 207,\n\n\t// custom blending source factors\n\n\t//ZeroFactor: 200,\n\t//OneFactor: 201,\n\t//SrcAlphaFactor: 204,\n\t//OneMinusSrcAlphaFactor: 205,\n\t//DstAlphaFactor: 206,\n\t//OneMinusDstAlphaFactor: 207,\n\tDstColorFactor: 208,\n\tOneMinusDstColorFactor: 209,\n\tSrcAlphaSaturateFactor: 210,\n\n\t// depth modes\n\n\tNeverDepth: 0,\n\tAlwaysDepth: 1,\n\tLessDepth: 2,\n\tLessEqualDepth: 3,\n\tEqualDepth: 4,\n\tGreaterEqualDepth: 5,\n\tGreaterDepth: 6,\n\tNotEqualDepth: 7,\n\n\n\t// TEXTURE CONSTANTS\n\n\tMultiplyOperation: 0,\n\tMixOperation: 1,\n\tAddOperation: 2,\n\n\t// Tone Mapping modes\n\n\tNoToneMapping: 0, // do not do any tone mapping, not even exposure (required for special purpose passes.)\n\tLinearToneMapping: 1, // only apply exposure.\n\tReinhardToneMapping: 2,\n\tUncharted2ToneMapping: 3, // John Hable\n\tCineonToneMapping: 4, // optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\n\t// Mapping modes\n\n\tUVMapping: 300,\n\n\tCubeReflectionMapping: 301,\n\tCubeRefractionMapping: 302,\n\n\tEquirectangularReflectionMapping: 303,\n\tEquirectangularRefractionMapping: 304,\n\n\tSphericalReflectionMapping: 305,\n\tCubeUVReflectionMapping: 306,\n\tCubeUVRefractionMapping: 307,\n\n\t// Wrapping modes\n\n\tRepeatWrapping: 1000,\n\tClampToEdgeWrapping: 1001,\n\tMirroredRepeatWrapping: 1002,\n\n\t// Filters\n\n\tNearestFilter: 1003,\n\tNearestMipMapNearestFilter: 1004,\n\tNearestMipMapLinearFilter: 1005,\n\tLinearFilter: 1006,\n\tLinearMipMapNearestFilter: 1007,\n\tLinearMipMapLinearFilter: 1008,\n\n\t// Data types\n\n\tUnsignedByteType: 1009,\n\tByteType: 1010,\n\tShortType: 1011,\n\tUnsignedShortType: 1012,\n\tIntType: 1013,\n\tUnsignedIntType: 1014,\n\tFloatType: 1015,\n\tHalfFloatType: 1025,\n\n\t// Pixel types\n\n\t//UnsignedByteType: 1009,\n\tUnsignedShort4444Type: 1016,\n\tUnsignedShort5551Type: 1017,\n\tUnsignedShort565Type: 1018,\n\n\t// Pixel formats\n\n\tAlphaFormat: 1019,\n\tRGBFormat: 1020,\n\tRGBAFormat: 1021,\n\tLuminanceFormat: 1022,\n\tLuminanceAlphaFormat: 1023,\n\t// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\n\tRGBEFormat: THREE.RGBAFormat, //1024;\n\tDepthFormat: 1026,\n\n\t// DDS / ST3C Compressed texture formats\n\n\tRGB_S3TC_DXT1_Format: 2001,\n\tRGBA_S3TC_DXT1_Format: 2002,\n\tRGBA_S3TC_DXT3_Format: 2003,\n\tRGBA_S3TC_DXT5_Format: 2004,\n\n\t// PVRTC compressed texture formats\n\n\tRGB_PVRTC_4BPPV1_Format: 2100,\n\tRGB_PVRTC_2BPPV1_Format: 2101,\n\tRGBA_PVRTC_4BPPV1_Format: 2102,\n\tRGBA_PVRTC_2BPPV1_Format: 2103,\n\n\t// ETC compressed texture formats\n\n\tRGB_ETC1_Format: 2151,\n\n\t// Loop styles for AnimationAction\n\n\tLoopOnce: 2200,\n\tLoopRepeat: 2201,\n\tLoopPingPong: 2202,\n\n\t// Interpolation\n\n\tInterpolateDiscrete: 2300,\n\tInterpolateLinear: 2301,\n\tInterpolateSmooth: 2302,\n\n\t// Interpolant ending modes\n\n\tZeroCurvatureEnding: 2400,\n\tZeroSlopeEnding: 2401,\n\tWrapAroundEnding: 2402,\n\n\t// Triangle Draw modes\n\n\tTrianglesDrawMode: 0,\n\tTriangleStripDrawMode: 1,\n\tTriangleFanDrawMode: 2,\n\n\t// Texture Encodings\n\n\tLinearEncoding: 3000, // No encoding at all.\n\tsRGBEncoding: 3001,\n\tGammaEncoding: 3007, // uses GAMMA_FACTOR, for backwards compatibility with WebGLRenderer.gammaInput/gammaOutput\n\n\t// The following Texture Encodings are for RGB-only (no alpha) HDR light emission sources.\n\t// These encodings should not specified as output encodings except in rare situations.\n\tRGBEEncoding: 3002, // AKA Radiance.\n\tLogLuvEncoding: 3003,\n\tRGBM7Encoding: 3004,\n\tRGBM16Encoding: 3005,\n\tRGBDEncoding: 3006, // MaxRange is 256.\n\n\t// Depth packing strategies\n\n\tBasicDepthPacking: 3200, // for writing to float textures for high precision or for visualizing results in RGB buffers\n\tRGBADepthPacking: 3201 // for packing into RGBA buffers.\n\n} );\n\n// File:src/math/Color.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Color = function ( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n};\n\nTHREE.Color.prototype = {\n\n\tconstructor: THREE.Color,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value instanceof THREE.Color ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function () {\n\n\t\tfunction hue2rgb( p, q, t ) {\n\n\t\t\tif ( t < 0 ) t += 1;\n\t\t\tif ( t > 1 ) t -= 1;\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\t\t\tif ( t < 1 / 2 ) return q;\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\t\t\treturn p;\n\n\t\t}\n\n\t\treturn function setHSL( h, s, l ) {\n\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\t\th = THREE.Math.euclideanModulo( h, 1 );\n\t\t\ts = THREE.Math.clamp( s, 0, 1 );\n\t\t\tl = THREE.Math.clamp( l, 0, 1 );\n\n\t\t\tif ( s === 0 ) {\n\n\t\t\t\tthis.r = this.g = this.b = l;\n\n\t\t\t} else {\n\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\t// color keywords\n\t\t\tvar hex = THREE.ColorKeywords[ style ];\n\n\t\t\tif ( hex !== undefined ) {\n\n\t\t\t\t// red\n\t\t\t\tthis.setHex( hex );\n\n\t\t\t} else {\n\n\t\t\t\t// unknown color\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function () {\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tthis.r = r * r;\n\t\tthis.g = g * g;\n\t\tthis.b = b * b;\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function () {\n\n\t\tthis.r = Math.sqrt( this.r );\n\t\tthis.g = Math.sqrt( this.g );\n\t\tthis.b = Math.sqrt( this.b );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( optionalTarget ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\thsl.h = hue;\n\t\thsl.s = saturation;\n\t\thsl.l = lightness;\n\n\t\treturn hsl;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tvar hsl = this.getHSL();\n\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\n\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n};\n\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\n// File:src/math/Quaternion.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nTHREE.Quaternion = function ( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n};\n\nTHREE.Quaternion.prototype = {\n\n\tconstructor: THREE.Quaternion,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget w () {\n\n\t\treturn this._w;\n\n\t},\n\n\tset w ( value ) {\n\n\t\tthis._w = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar c1 = Math.cos( euler._x / 2 );\n\t\tvar c2 = Math.cos( euler._y / 2 );\n\t\tvar c3 = Math.cos( euler._z / 2 );\n\t\tvar s1 = Math.sin( euler._x / 2 );\n\t\tvar s2 = Math.sin( euler._y / 2 );\n\t\tvar s3 = Math.sin( euler._z / 2 );\n\n\t\tvar order = euler.order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1, r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function setFromUnitVectors( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\treturn this.normalize();\n\n\t\t};\n\n\t}(),\n\n\tinverse: function () {\n\n\t\treturn this.conjugate().normalize();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\n\n\t\t\tthis._w = 0.5 * ( w + this._w );\n\t\t\tthis._x = 0.5 * ( x + this._x );\n\t\t\tthis._y = 0.5 * ( y + this._y );\n\t\t\tthis._z = 0.5 * ( z + this._z );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n};\n\nObject.assign( THREE.Quaternion, {\n\n\tslerp: function( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function(\n\t\t\tdst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\n// File:src/math/Vector2.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nTHREE.Vector2 = function ( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n};\n\nTHREE.Vector2.prototype = {\n\n\tconstructor: THREE.Vector2,\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t},\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t},\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t},\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t},\n\n\t//\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tif ( isFinite( scalar ) ) {\n\n\t\t\tthis.x *= scalar;\n\t\t\tthis.y *= scalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min, max;\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector2();\n\t\t\t\tmax = new THREE.Vector2();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tlengthManhattan: function() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( this.y, this.x );\n\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.multiplyScalar( length / this.length() );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tindex = index * attribute.itemSize + offset;\n\n\t\tthis.x = attribute.array[ index ];\n\t\tthis.y = attribute.array[ index + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n};\n\n// File:src/math/Vector3.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author *kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Vector3 = function ( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n};\n\nTHREE.Vector3.prototype = {\n\n\tconstructor: THREE.Vector3,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tif ( isFinite( scalar ) ) {\n\n\t\t\tthis.x *= scalar;\n\t\t\tthis.y *= scalar;\n\t\t\tthis.z *= scalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function applyEuler( euler ) {\n\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion;\n\n\t\treturn function applyAxisAngle( axis, angle ) {\n\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tapplyProjection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 projection matrix\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix =  qw * x + qy * z - qz * y;\n\t\tvar iy =  qw * y + qz * x - qx * z;\n\t\tvar iz =  qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function project( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\n\t\t\treturn this.applyProjection( matrix );\n\n\t\t};\n\n\t}(),\n\n\tunproject: function () {\n\n\t\tvar matrix;\n\n\t\treturn function unproject( camera ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\n\t\t\treturn this.applyProjection( matrix );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min, max;\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector3();\n\t\t\t\tmax = new THREE.Vector3();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.multiplyScalar( Math.max( min, Math.min( max, length ) ) / length );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.multiplyScalar( length / this.length() );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\n\t\tthis.x = y * v.z - z * v.y;\n\t\tthis.y = z * v.x - x * v.z;\n\t\tthis.z = x * v.y - y * v.x;\n\n\t\treturn this;\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( vector ) {\n\n\t\tvar scalar = vector.dot( this ) / vector.lengthSq();\n\n\t\treturn this.copy( vector ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1;\n\n\t\treturn function projectOnPlane( planeNormal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t};\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1;\n\n\t\treturn function reflect( normal ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t};\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tsetFromSpherical: function( s ) {\n\n\t\tvar sinPhiRadius = Math.sin( s.phi ) * s.radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( s.theta );\n\t\tthis.y = Math.cos( s.phi ) * s.radius;\n\t\tthis.z = sinPhiRadius * Math.cos( s.theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\treturn this.setFromMatrixColumn( m, 3 );\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\tif ( typeof m === 'number' ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).' );\n\t\t\tvar temp = m\n\t\t\tm = index;\n\t\t\tindex = temp;\n\n\t\t}\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tindex = index * attribute.itemSize + offset;\n\n\t\tthis.x = attribute.array[ index ];\n\t\tthis.y = attribute.array[ index + 1 ];\n\t\tthis.z = attribute.array[ index + 2 ];\n\n\t\treturn this;\n\n\t}\n\n};\n\n// File:src/math/Vector4.js\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Vector4 = function ( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n};\n\nTHREE.Vector4.prototype = {\n\n\tconstructor: THREE.Vector4,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tif ( isFinite( scalar ) ) {\n\n\t\t\tthis.x *= scalar;\n\t\t\tthis.y *= scalar;\n\t\t\tthis.z *= scalar;\n\t\t\tthis.w *= scalar;\n\n\t\t} else {\n\n\t\t\tthis.x = 0;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\t\t\tthis.w = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\t this.x = 1;\n\t\t\t this.y = 0;\n\t\t\t this.z = 0;\n\n\t\t} else {\n\n\t\t\t this.x = q.x / s;\n\t\t\t this.y = q.y / s;\n\t\t\t this.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min, max;\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tif ( min === undefined ) {\n\n\t\t\t\tmin = new THREE.Vector4();\n\t\t\t\tmax = new THREE.Vector4();\n\n\t\t\t}\n\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tlengthManhattan: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.multiplyScalar( length / this.length() );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tindex = index * attribute.itemSize + offset;\n\n\t\tthis.x = attribute.array[ index ];\n\t\tthis.y = attribute.array[ index + 1 ];\n\t\tthis.z = attribute.array[ index + 2 ];\n\t\tthis.w = attribute.array[ index + 3 ];\n\n\t\treturn this;\n\n\t}\n\n};\n\n// File:src/math/Euler.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nTHREE.Euler = function ( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || THREE.Euler.DefaultOrder;\n\n};\n\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nTHREE.Euler.DefaultOrder = 'XYZ';\n\nTHREE.Euler.prototype = {\n\n\tconstructor: THREE.Euler,\n\n\tget x () {\n\n\t\treturn this._x;\n\n\t},\n\n\tset x ( value ) {\n\n\t\tthis._x = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget y () {\n\n\t\treturn this._y;\n\n\t},\n\n\tset y ( value ) {\n\n\t\tthis._y = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget z () {\n\n\t\treturn this._z;\n\n\t},\n\n\tset z ( value ) {\n\n\t\tthis._z = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tget order () {\n\n\t\treturn this._order;\n\n\t},\n\n\tset order ( value ) {\n\n\t\tthis._order = value;\n\t\tthis.onChangeCallback();\n\n\t},\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = THREE.Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function () {\n\n\t\tvar matrix;\n\n\t\treturn function setFromQuaternion( q, order, update ) {\n\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\n\n\t\t\tmatrix.makeRotationFromQuaternion( q );\n\n\t\t\treturn this.setFromRotationMatrix( matrix, order, update );\n\n\t\t};\n\n\t}(),\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function () {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\tvar q = new THREE.Quaternion();\n\n\t\treturn function reorder( newOrder ) {\n\n\t\t\tq.setFromEuler( this );\n\n\t\t\treturn this.setFromQuaternion( q, newOrder );\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n};\n\n// File:src/math/Line3.js\n\n/**\n * @author bhouston / http://clara.io\n */\n\nTHREE.Line3 = function ( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\n\n};\n\nTHREE.Line3.prototype = {\n\n\tconstructor: THREE.Line3,\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function () {\n\n\t\tvar startP = new THREE.Vector3();\n\t\tvar startEnd = new THREE.Vector3();\n\n\t\treturn function closestPointToPointParameter( point, clampToLine ) {\n\n\t\t\tstartP.subVectors( point, this.start );\n\t\t\tstartEnd.subVectors( this.end, this.start );\n\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\n\n\t\t\tvar t = startEnd_startP / startEnd2;\n\n\t\t\tif ( clampToLine ) {\n\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\n\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n};\n\n// File:src/math/Box2.js\n\n/**\n * @author bhouston / http://clara.io\n */\n\nTHREE.Box2 = function ( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\n\n};\n\nTHREE.Box2.prototype = {\n\n\tconstructor: THREE.Box2,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new THREE.Vector2();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tsize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector2();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector2();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n};\n\n// File:src/math/Box3.js\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Box3 = function ( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\n\n};\n\nTHREE.Box3.prototype = {\n\n\tconstructor: THREE.Box3,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function setFromCenterAndSize( center, size ) {\n\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\n\n\t\t\tthis.min.copy( center ).sub( halfSize );\n\t\t\tthis.max.copy( center ).add( halfSize );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tsetFromObject: function () {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function setFromObject( object ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tobject.updateMatrixWorld( true );\n\n\t\t\tthis.makeEmpty();\n\n\t\t\tobject.traverse( function ( node ) {\n\n\t\t\t\tvar geometry = node.geometry;\n\n\t\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\n\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\n\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\n\n\t\t\t\t\t\t\tv1.fromArray( positions, i );\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tsize: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\n\t\t\t\t point.y < this.min.y || point.y > this.max.y ||\n\t\t\t\t point.z < this.min.z || point.z > this.max.z ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tgetParameter: function ( point, optionalTarget ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn result.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\t\t box.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\t\t box.max.z < this.min.z || box.min.z > this.max.z ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsSphere: ( function () {\n\n\t\tvar closestPoint;\n\n\t\treturn function intersectsSphere( sphere ) {\n\n\t\t\tif ( closestPoint === undefined ) closestPoint = new THREE.Vector3();\n\n\t\t\t// Find the point on the AABB closest to the sphere center.\n\t\t\tthis.clampPoint( sphere.center, closestPoint );\n\n\t\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\t\treturn closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t\t};\n\n\t} )(),\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= plane.constant && max >= plane.constant );\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function distanceToPoint( point ) {\n\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\n\t\t\treturn clampedPoint.sub( point ).length();\n\n\t\t};\n\n\t}(),\n\n\tgetBoundingSphere: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function getBoundingSphere( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\n\n\t\t\tresult.center = this.center();\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar points = [\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3(),\n\t\t\tnew THREE.Vector3()\n\t\t];\n\n\t\treturn function applyMatrix4( matrix ) {\n\n\t\t\t// transform of empty box is an empty box.\n\t\t\tif( this.isEmpty() ) return this;\n\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );\t// 111\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n};\n\n// File:src/math/Matrix3.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nTHREE.Matrix3 = function () {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n};\n\nTHREE.Matrix3.prototype = {\n\n\tconstructor: THREE.Matrix3,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[  8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[  9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tapplyToVector3Array: function () {\n\n\t\tvar v1;\n\n\t\treturn function applyToVector3Array( array, offset, length ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = array.length;\n\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\n\n\t\t\t\tv1.fromArray( array, j );\n\t\t\t\tv1.applyMatrix3( this );\n\t\t\t\tv1.toArray( array, j );\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t}(),\n\n\tapplyToBuffer: function () {\n\n\t\tvar v1;\n\n\t\treturn function applyToBuffer( buffer, offset, length ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\n\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\n\n\t\t\t\tv1.x = buffer.getX( j );\n\t\t\t\tv1.y = buffer.getY( j );\n\t\t\t\tv1.z = buffer.getZ( j );\n\n\t\t\t\tv1.applyMatrix3( this );\n\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn buffer;\n\n\t\t};\n\n\t}(),\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( matrix instanceof THREE.Matrix4 ) {\n\n\t\t\tconsole.error( \"THREE.Matrix3.getInverse no longer takes a Matrix4 argument.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate || false ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset is deprecated \" +\n\t\t\t\t\"- just use .toArray instead.\" );\n\n\t\treturn this.toArray( array, offset );\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n};\n\n// File:src/math/Matrix4.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.Matrix4 = function () {\n\n\tthis.elements = new Float32Array( [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t] );\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n};\n\nTHREE.Matrix4.prototype = {\n\n\tconstructor: THREE.Matrix4,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tthis.elements.set( m.elements );\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0,       0,       0,       1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1;\n\n\t\treturn function extractRotation( m ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( euler instanceof THREE.Euler === false ) {\n\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tte[ 0 ] = 1 - ( yy + zz );\n\t\tte[ 4 ] = xy - wz;\n\t\tte[ 8 ] = xz + wy;\n\n\t\tte[ 1 ] = xy + wz;\n\t\tte[ 5 ] = 1 - ( xx + zz );\n\t\tte[ 9 ] = yz - wx;\n\n\t\tte[ 2 ] = xz - wy;\n\t\tte[ 6 ] = yz + wx;\n\t\tte[ 10 ] = 1 - ( xx + yy );\n\n\t\t// last column\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// bottom row\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function () {\n\n\t\tvar x, y, z;\n\n\t\treturn function lookAt( eye, target, up ) {\n\n\t\t\tif ( x === undefined ) {\n\n\t\t\t\tx = new THREE.Vector3();\n\t\t\t\ty = new THREE.Vector3();\n\t\t\t\tz = new THREE.Vector3();\n\n\t\t\t}\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target ).normalize();\n\n\t\t\tif ( z.lengthSq() === 0 ) {\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\tif ( x.lengthSq() === 0 ) {\n\n\t\t\t\tz.z += 0.0001;\n\t\t\t\tx.crossVectors( up, z ).normalize();\n\n\t\t\t}\n\n\t\t\ty.crossVectors( z, x );\n\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyList: function ( listOfMatrices ) {\n\n\t\tfor (var i = 0, il = listOfMatrices.length; i < il ; i++) {\n\t\t  this.multiplyMatrices( this, listOfMatrices[ i ] );\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyMatricesList: function ( listOfMatrices ) {\n\n\t\tif( listOfMatrices.length > 0 ) {\n\n\t\t\tthis.copy( listOfMatrices[0] );\n\n\t\t\tthis.multiplyList( listOfMatrices.slice( 1 ) );\n\n\t\t}\n\t\telse {\n\n\t\t\tthis.identity();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyToArray: function ( a, b, r ) {\n\n\t\tvar te = this.elements;\n\n\t\tthis.multiplyMatrices( a, b );\n\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tapplyToVector3Array: function () {\n\n\t\tvar v1;\n\n\t\treturn function applyToVector3Array( array, offset, length ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = array.length;\n\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\n\n\t\t\t\tv1.fromArray( array, j );\n\t\t\t\tv1.applyMatrix4( this );\n\t\t\t\tv1.toArray( array, j );\n\n\t\t\t}\n\n\t\t\treturn array;\n\n\t\t};\n\n\t}(),\n\n\tapplyToBuffer: function () {\n\n\t\tvar v1;\n\n\t\treturn function applyToBuffer( buffer, offset, length ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\t\t\tif ( offset === undefined ) offset = 0;\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\n\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\n\n\t\t\t\tv1.x = buffer.getX( j );\n\t\t\t\tv1.y = buffer.getY( j );\n\t\t\t\tv1.z = buffer.getZ( j );\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn buffer;\n\n\t\t};\n\n\t}(),\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset is deprecated \" +\n\t\t\t\t\"- just use .toArray instead.\" );\n\n\t\treturn this.toArray( array, offset );\n\n\t},\n\n\tgetPosition: function () {\n\n\t\tvar v1;\n\n\t\treturn function getPosition() {\n\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\n\t\t\treturn v1.setFromMatrixColumn( this, 3 );\n\n\t\t};\n\n\t}(),\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate || false ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0,  0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s,  c, 0,\n\t\t\t0, 0,  0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts,  c, 0, 0,\n\t\t\t0,  0, 1, 0,\n\t\t\t0,  0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tthis.makeRotationFromQuaternion( quaternion );\n\t\tthis.scale( scale );\n\t\tthis.setPosition( position );\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector, matrix;\n\n\t\treturn function decompose( position, quaternion, scale ) {\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tvector = new THREE.Vector3();\n\t\t\t\tmatrix = new THREE.Matrix4();\n\n\t\t\t}\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) {\n\n\t\t\t\tsx = - sx;\n\n\t\t\t}\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( fov, aspect, near, far ) {\n\n\t\tvar ymax = near * Math.tan( THREE.Math.DEG2RAD * fov * 0.5 );\n\t\tvar ymin = - ymax;\n\t\tvar xmin = ymin * aspect;\n\t\tvar xmax = ymax * aspect;\n\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ]  = te[ 8 ];\n\t\tarray[ offset + 9 ]  = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n};\n\n// File:src/math/Ray.js\n\n/**\n * @author bhouston / http://clara.io\n */\n\nTHREE.Ray = function ( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\n\n};\n\nTHREE.Ray.prototype = {\n\n\tconstructor: THREE.Ray,\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function recast( t ) {\n\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclosestPointToPoint: function ( point, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\tresult.subVectors( point, this.origin );\n\t\tvar directionDistance = result.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn result.copy( this.origin );\n\n\t\t}\n\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function distanceSqToPoint( point ) {\n\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t\t// point behind the ray\n\n\t\t\tif ( directionDistance < 0 ) {\n\n\t\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t\t}\n\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\t\treturn v1.distanceToSquared( point );\n\n\t\t};\n\n\t}(),\n\n\tdistanceSqToSegment: function () {\n\n\t\tvar segCenter = new THREE.Vector3();\n\t\tvar segDir = new THREE.Vector3();\n\t\tvar diff = new THREE.Vector3();\n\n\t\treturn function distanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t\t// It returns the min distance between the ray and the segment\n\t\t\t// defined by v0 and v1\n\t\t\t// It can also set two optional targets :\n\t\t\t// - The closest point on the ray\n\t\t\t// - The closest point on the segment\n\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\n\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\t\tvar a01 = - this.direction.dot( segDir );\n\t\t\tvar b0 = diff.dot( this.direction );\n\t\t\tvar b1 = - diff.dot( segDir );\n\t\t\tvar c = diff.lengthSq();\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\t\tvar s0, s1, sqrDist, extDet;\n\n\t\t\tif ( det > 0 ) {\n\n\t\t\t\t// The ray and segment are not parallel.\n\n\t\t\t\ts0 = a01 * b1 - b0;\n\t\t\t\ts1 = a01 * b0 - b1;\n\t\t\t\textDet = segExtent * det;\n\n\t\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 5\n\n\t\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t\t// region 4\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 3\n\n\t\t\t\t\t\ts0 = 0;\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 2\n\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Ray and segment are parallel.\n\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnRay ) {\n\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t\t}\n\n\t\t\tif ( optionalPointOnSegment ) {\n\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\n\n\t\t\t}\n\n\t\t\treturn sqrDist;\n\n\t\t};\n\n\t}(),\n\n\tintersectSphere: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function intersectSphere( sphere, optionalTarget ) {\n\n\t\t\tv1.subVectors( sphere.center, this.origin );\n\t\t\tvar tca = v1.dot( this.direction );\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\t\tif ( d2 > radius2 ) return null;\n\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t\t// t0 = first intersect point - entrance on front of sphere\n\t\t\tvar t0 = tca - thc;\n\n\t\t\t// t1 = second intersect point - exit point on back of sphere\n\t\t\tvar t1 = tca + thc;\n\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t\t// test to see if t0 is behind the ray:\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t\t// in order to always return an intersect point that is in front of the ray.\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\n\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\t\treturn this.at( t0, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t :  null;\n\n\t},\n\n\tintersectPlane: function ( plane, optionalTarget ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, optionalTarget );\n\n\t},\n\n\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, optionalTarget ) {\n\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\n\n\t},\n\n\tintersectsBox: ( function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\treturn this.intersectBox( box, v ) !== null;\n\n\t\t};\n\n\t} )(),\n\n\tintersectTriangle: function () {\n\n\t\t// Compute the offset origin, edges, and normal.\n\t\tvar diff = new THREE.Vector3();\n\t\tvar edge1 = new THREE.Vector3();\n\t\tvar edge2 = new THREE.Vector3();\n\t\tvar normal = new THREE.Vector3();\n\n\t\treturn function intersectTriangle( a, b, c, backfaceCulling, optionalTarget ) {\n\n\t\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t\tedge1.subVectors( b, a );\n\t\t\tedge2.subVectors( c, a );\n\t\t\tnormal.crossVectors( edge1, edge2 );\n\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\t\tvar DdN = this.direction.dot( normal );\n\t\t\tvar sign;\n\n\t\t\tif ( DdN > 0 ) {\n\n\t\t\t\tif ( backfaceCulling ) return null;\n\t\t\t\tsign = 1;\n\n\t\t\t} else if ( DdN < 0 ) {\n\n\t\t\t\tsign = - 1;\n\t\t\t\tDdN = - DdN;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tdiff.subVectors( this.origin, a );\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\n\n\t\t\t// b1 < 0, no intersection\n\t\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\n\n\t\t\t// b2 < 0, no intersection\n\t\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// b1+b2 > 1, no intersection\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Line intersects triangle, check if ray does.\n\t\t\tvar QdN = - sign * diff.dot( normal );\n\n\t\t\t// t < 0, no intersection\n\t\t\tif ( QdN < 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Ray intersects triangle.\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.sub( this.origin );\n\t\tthis.direction.normalize();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n};\n\n// File:src/math/Sphere.js\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Sphere = function ( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n};\n\nTHREE.Sphere.prototype = {\n\n\tconstructor: THREE.Sphere,\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function () {\n\n\t\tvar box = new THREE.Box3();\n\n\t\treturn function setFromPoints( points, optionalCenter ) {\n\n\t\t\tvar center = this.center;\n\n\t\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\t\tcenter.copy( optionalCenter );\n\n\t\t\t} else {\n\n\t\t\t\tbox.setFromPoints( points ).center( center );\n\n\t\t\t}\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We use the following equation to compute the signed distance from\n\t\t// the center of the sphere to the plane.\n\t\t//\n\t\t// distance = q * n - d\n\t\t//\n\t\t// If this distance is greater than the radius of the sphere,\n\t\t// then there is no intersection.\n\n\t\treturn Math.abs( this.center.dot( plane.normal ) - plane.constant ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, optionalTarget ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tresult.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\tresult.sub( this.center ).normalize();\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetBoundingBox: function ( optionalTarget ) {\n\n\t\tvar box = optionalTarget || new THREE.Box3();\n\n\t\tbox.set( this.center, this.center );\n\t\tbox.expandByScalar( this.radius );\n\n\t\treturn box;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n};\n\n// File:src/math/Frustum.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\n\n\t];\n\n};\n\nTHREE.Frustum.prototype = {\n\n\tconstructor: THREE.Frustum,\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function () {\n\n\t\tvar sphere = new THREE.Sphere();\n\n\t\treturn function intersectsObject( object ) {\n\n\t\t\tvar geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null )\n\t\t\t\tgeometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere )\n\t\t\t\t.applyMatrix4( object.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSprite: function () {\n\n\t\tvar sphere = new THREE.Sphere();\n\n\t\treturn function intersectsSprite( sprite ) {\n\n\t\t\tsphere.center.set( 0, 0, 0 );\n\t\t\tsphere.radius = 0.7071067811865476;\n\t\t\tsphere.applyMatrix4( sprite.matrixWorld );\n\n\t\t\treturn this.intersectsSphere( sphere );\n\n\t\t};\n\n\t}(),\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function () {\n\n\t\tvar p1 = new THREE.Vector3(),\n\t\t\tp2 = new THREE.Vector3();\n\n\t\treturn function intersectsBox( box ) {\n\n\t\t\tvar planes = this.planes;\n\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\n\n\t\t\t\tvar plane = planes[ i ];\n\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\n\n\t\t\t\t// if both outside plane, no intersection\n\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t};\n\n\t}(),\n\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n};\n\n// File:src/math/Plane.js\n\n/**\n * @author bhouston / http://clara.io\n */\n\nTHREE.Plane = function ( normal, constant ) {\n\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n};\n\nTHREE.Plane.prototype = {\n\n\tconstructor: THREE.Plane,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\t\tvar v2 = new THREE.Vector3();\n\n\t\treturn function setFromCoplanarPoints( a, b, c ) {\n\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\n\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, optionalTarget ) {\n\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\n\n\t},\n\n\torthoPoint: function ( point, optionalTarget ) {\n\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\n\n\t},\n\n\tintersectLine: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function intersectLine( line, optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tvar direction = line.delta( v1 );\n\n\t\t\tvar denominator = this.normal.dot( direction );\n\n\t\t\tif ( denominator === 0 ) {\n\n\t\t\t\t// line is coplanar, return origin\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\t\treturn result.copy( line.start );\n\n\t\t\t\t}\n\n\t\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t\t};\n\n\t}(),\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\t\tvar m1 = new THREE.Matrix3();\n\n\t\treturn function applyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\t\tvar referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\n\n\t\t\t// transform normal based on theory here:\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\n\t\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t// recalculate constant (like in setFromNormalAndCoplanarPoint)\n\t\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant = this.constant - offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n};\n\n// File:src/math/Spherical.js\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The poles (phi) are at the positive and negative y axis.\n * The equator starts at positive z.\n */\n\nTHREE.Spherical = function ( radius, phi, theta ) {\n\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\n\tthis.phi = ( phi !== undefined ) ? phi : 0; // up / down towards top and bottom pole\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // around the equator of the sphere\n\n\treturn this;\n\n};\n\nTHREE.Spherical.prototype = {\n\n\tconstructor: THREE.Spherical,\n\n\tset: function ( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( other ) {\n\n\t\tthis.radius.copy( other.radius );\n\t\tthis.phi.copy( other.phi );\n\t\tthis.theta.copy( other.theta );\n\n\t\treturn this;\n\n\t},\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe: function() {\n\n\t\tvar EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromVector3: function( vec3 ) {\n\n\t\tthis.radius = vec3.length();\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( vec3.x, vec3.z ); // equator angle around y-up axis\n\t\t\tthis.phi = Math.acos( THREE.Math.clamp( vec3.y / this.radius, - 1, 1 ) ); // polar angle\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n};\n\n// File:src/math/Math.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Math = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\n\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\n\t\tvar uuid = new Array( 36 );\n\t\tvar rnd = 0, r;\n\n\t\treturn function generateUUID() {\n\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\n\n\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\n\n\t\t\t\t\tuuid[ i ] = '-';\n\n\t\t\t\t} else if ( i === 14 ) {\n\n\t\t\t\t\tuuid[ i ] = '4';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\n\t\t\t\t\tr = rnd & 0xf;\n\t\t\t\t\trnd = rnd >> 4;\n\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn uuid.join( '' );\n\n\t\t};\n\n\t}(),\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\trandom16: function () {\n\n\t\tconsole.warn( 'THREE.Math.random16() has been deprecated. Use Math.random() instead.' );\n\t\treturn Math.random();\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * THREE.Math.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * THREE.Math.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tnearestPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tnextPowerOfTwo: function ( value ) {\n\n\t\tvalue --;\n\t\tvalue |= value >> 1;\n\t\tvalue |= value >> 2;\n\t\tvalue |= value >> 4;\n\t\tvalue |= value >> 8;\n\t\tvalue |= value >> 16;\n\t\tvalue ++;\n\n\t\treturn value;\n\n\t}\n\n};\n\n// File:src/math/Spline.js\n\n/**\n * Spline from Tween.js, slightly optimized (and trashed)\n * http://sole.github.com/tween.js/examples/05_spline.html\n *\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Spline = function ( points ) {\n\n\tthis.points = points;\n\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\n\tpoint, intPoint, weight, w2, w3,\n\tpa, pb, pc, pd;\n\n\tthis.initFromArray = function ( a ) {\n\n\t\tthis.points = [];\n\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\n\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\n\n\t\t}\n\n\t};\n\n\tthis.getPoint = function ( k ) {\n\n\t\tpoint = ( this.points.length - 1 ) * k;\n\t\tintPoint = Math.floor( point );\n\t\tweight = point - intPoint;\n\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\n\t\tc[ 1 ] = intPoint;\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\n\n\t\tpa = this.points[ c[ 0 ] ];\n\t\tpb = this.points[ c[ 1 ] ];\n\t\tpc = this.points[ c[ 2 ] ];\n\t\tpd = this.points[ c[ 3 ] ];\n\n\t\tw2 = weight * weight;\n\t\tw3 = weight * w2;\n\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\n\n\t\treturn v3;\n\n\t};\n\n\tthis.getControlPointsArray = function () {\n\n\t\tvar i, p, l = this.points.length,\n\t\t\tcoords = [];\n\n\t\tfor ( i = 0; i < l; i ++ ) {\n\n\t\t\tp = this.points[ i ];\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\n\n\t\t}\n\n\t\treturn coords;\n\n\t};\n\n\t// approximate length by summing linear segments\n\n\tthis.getLength = function ( nSubDivisions ) {\n\n\t\tvar i, index, nSamples, position,\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\n\t\t\toldPosition = new THREE.Vector3(),\n\t\t\ttmpVec = new THREE.Vector3(),\n\t\t\tchunkLengths = [],\n\t\t\ttotalLength = 0;\n\n\t\t// first point has 0 length\n\n\t\tchunkLengths[ 0 ] = 0;\n\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\n\n\t\tnSamples = this.points.length * nSubDivisions;\n\n\t\toldPosition.copy( this.points[ 0 ] );\n\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\n\n\t\t\tindex = i / nSamples;\n\n\t\t\tposition = this.getPoint( index );\n\t\t\ttmpVec.copy( position );\n\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\n\n\t\t\toldPosition.copy( position );\n\n\t\t\tpoint = ( this.points.length - 1 ) * index;\n\t\t\tintPoint = Math.floor( point );\n\n\t\t\tif ( intPoint !== oldIntPoint ) {\n\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\n\t\t\t\toldIntPoint = intPoint;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// last point ends with total length\n\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\n\n\t\treturn { chunks: chunkLengths, total: totalLength };\n\n\t};\n\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\n\n\t\tvar i, j,\n\t\t\tindex, indexCurrent, indexNext,\n\t\t\trealDistance,\n\t\t\tsampling, position,\n\t\t\tnewpoints = [],\n\t\t\ttmpVec = new THREE.Vector3(),\n\t\t\tsl = this.getLength();\n\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\n\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\n\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\n\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\n\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\n\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\n\t\t\tindexNext = i / ( this.points.length - 1 );\n\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\n\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\n\n\t\t\t\tposition = this.getPoint( index );\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\n\n\t\t\t}\n\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\n\n\t\t}\n\n\t\tthis.points = newpoints;\n\n\t};\n\n\t// Catmull-Rom\n\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\n\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t}\n\n};\n\n// File:src/math/Triangle.js\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Triangle = function ( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\n\n};\n\nTHREE.Triangle.normal = function () {\n\n\tvar v0 = new THREE.Vector3();\n\n\treturn function normal( a, b, c, optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tresult.subVectors( c, b );\n\t\tv0.subVectors( a, b );\n\t\tresult.cross( v0 );\n\n\t\tvar resultLengthSq = result.lengthSq();\n\t\tif ( resultLengthSq > 0 ) {\n\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\n\n\t\t}\n\n\t\treturn result.set( 0, 0, 0 );\n\n\t};\n\n}();\n\n// static/instance method to calculate barycentric coordinates\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\nTHREE.Triangle.barycoordFromPoint = function () {\n\n\tvar v0 = new THREE.Vector3();\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\n\treturn function barycoordFromPoint( point, a, b, c, optionalTarget ) {\n\n\t\tv0.subVectors( c, a );\n\t\tv1.subVectors( b, a );\n\t\tv2.subVectors( point, a );\n\n\t\tvar dot00 = v0.dot( v0 );\n\t\tvar dot01 = v0.dot( v1 );\n\t\tvar dot02 = v0.dot( v2 );\n\t\tvar dot11 = v1.dot( v1 );\n\t\tvar dot12 = v1.dot( v2 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn result.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn result.set( 1 - u - v, v, u );\n\n\t};\n\n}();\n\nTHREE.Triangle.containsPoint = function () {\n\n\tvar v1 = new THREE.Vector3();\n\n\treturn function containsPoint( point, a, b, c ) {\n\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\n\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\n\n\t};\n\n}();\n\nTHREE.Triangle.prototype = {\n\n\tconstructor: THREE.Triangle,\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tarea: function () {\n\n\t\tvar v0 = new THREE.Vector3();\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function area() {\n\n\t\t\tv0.subVectors( this.c, this.b );\n\t\t\tv1.subVectors( this.a, this.b );\n\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\n\n\t\t};\n\n\t}(),\n\n\tmidpoint: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tnormal: function ( optionalTarget ) {\n\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tplane: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Plane();\n\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\n\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tclosestPointToPoint: function () {\n\n\t\tvar plane, edgeList, projectedPoint, closestPoint;\n\n\t\treturn function closestPointToPoint( point, optionalTarget ) {\n\n\t\t\tif ( plane === undefined ) {\n\n\t\t\t\tplane = new THREE.Plane();\n\t\t\t\tedgeList = [ new THREE.Line3(), new THREE.Line3(), new THREE.Line3() ];\n\t\t\t\tprojectedPoint = new THREE.Vector3();\n\t\t\t\tclosestPoint = new THREE.Vector3();\n\n\t\t\t}\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\t\t\tvar minDistance = Infinity;\n\n\t\t\t// project the point onto the plane of the triangle\n\n\t\t\tplane.setFromCoplanarPoints( this.a, this.b, this.c );\n\t\t\tplane.projectPoint( point, projectedPoint );\n\n\t\t\t// check if the projection lies within the triangle\n\n\t\t\tif( this.containsPoint( projectedPoint ) === true ) {\n\n\t\t\t\t// if so, this is the closest point\n\n\t\t\t\tresult.copy( projectedPoint );\n\n\t\t\t} else {\n\n\t\t\t\t// if not, the point falls outside the triangle. the result is the closest point to the triangle's edges or vertices\n\n\t\t\t\tedgeList[ 0 ].set( this.a, this.b );\n\t\t\t\tedgeList[ 1 ].set( this.b, this.c );\n\t\t\t\tedgeList[ 2 ].set( this.c, this.a );\n\n\t\t\t\tfor( var i = 0; i < edgeList.length; i ++ ) {\n\n\t\t\t\t\tedgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\n\n\t\t\t\t\tvar distance = projectedPoint.distanceToSquared( closestPoint );\n\n\t\t\t\t\tif( distance < minDistance ) {\n\n\t\t\t\t\t\tminDistance = distance;\n\n\t\t\t\t\t\tresult.copy( closestPoint );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n};\n\n// File:src/math/Interpolant.js\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nTHREE.Interpolant = function(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n};\n\nTHREE.Interpolant.prototype = {\n\n\tconstructor: THREE.Interpolant,\n\n\tevaluate: function( t ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\ti1 = this._cachedIndex,\n\n\t\t\tt1 = pp[   i1   ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tvar right;\n\n\t\t\t\tlinear_scan: {\n//- See http://jsperf.com/comparison-to-undefined/3\n//- slower code:\n//-\n//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ;) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n//- slower code:\n//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ;) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[   i1   ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function() {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\tthrow new Error( \"call to abstract method\" );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function( i1, t0, t1 ) {\n\n\t\t// empty\n\n\t}\n\n};\n\nObject.assign( THREE.Interpolant.prototype, {\n\n\tbeforeStart_: //( 0, t, t0 ), returns this.resultBuffer\n\t\tTHREE.Interpolant.prototype.copySampleValue_,\n\n\tafterEnd_: //( N-1, tN-1, t ), returns this.resultBuffer\n\t\tTHREE.Interpolant.prototype.copySampleValue_\n\n} );\n\n// File:src/math/interpolants/CubicInterpolant.js\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nTHREE.CubicInterpolant = function(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tTHREE.Interpolant.call(\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = -0;\n\tthis._offsetPrev = -0;\n\tthis._weightNext = -0;\n\tthis._offsetNext = -0;\n\n};\n\nTHREE.CubicInterpolant.prototype =\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\n\n\tconstructor: THREE.CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\n\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function( i1, t0, t1 ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\tiPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase THREE.ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase THREE.ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tvar sP =     - wP   * ppp   +         2 * wP    * pp    -          wP   * p;\n\t\tvar s0 = ( 1 + wP ) * ppp   + (-1.5 - 2 * wP )  * pp    + ( -0.5 + wP ) * p     + 1;\n\t\tvar s1 = (-1 - wN ) * ppp   + ( 1.5 +   wN   )  * pp    +    0.5        * p;\n\t\tvar sN =       wN   * ppp   -           wN      * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n// File:src/math/interpolants/DiscreteInterpolant.js\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n *\n * @author tschw\n */\n\nTHREE.DiscreteInterpolant = function(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tTHREE.Interpolant.call(\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n};\n\nTHREE.DiscreteInterpolant.prototype =\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\n\n\tconstructor: THREE.DiscreteInterpolant,\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\n// File:src/math/interpolants/LinearInterpolant.js\n\n/**\n * @author tschw\n */\n\nTHREE.LinearInterpolant = function(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tTHREE.Interpolant.call(\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n};\n\nTHREE.LinearInterpolant.prototype =\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\n\n\tconstructor: THREE.LinearInterpolant,\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n// File:src/math/interpolants/QuaternionLinearInterpolant.js\n\n/**\n * Spherical linear unit quaternion interpolant.\n *\n * @author tschw\n */\n\nTHREE.QuaternionLinearInterpolant = function(\n\t\tparameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tTHREE.Interpolant.call(\n\t\t\tthis, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n};\n\nTHREE.QuaternionLinearInterpolant.prototype =\n\t\tObject.assign( Object.create( THREE.Interpolant.prototype ), {\n\n\tconstructor: THREE.QuaternionLinearInterpolant,\n\n\tinterpolate_: function( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset = i1 * stride,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tTHREE.Quaternion.slerpFlat( result, 0,\n\t\t\t\t\tvalues, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n// File:src/core/Clock.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Clock = function ( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n};\n\nTHREE.Clock.prototype = {\n\n\tconstructor: THREE.Clock,\n\n\tstart: function () {\n\n\t\tthis.startTime = ( performance || Date ).now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.running = true;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = ( performance || Date ).now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n};\n\n// File:src/core/EventDispatcher.js\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nTHREE.EventDispatcher = function () {};\n\nObject.assign( THREE.EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = [], i = 0;\n\t\t\tvar length = listenerArray.length;\n\n\t\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ] = listenerArray[ i ];\n\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < length; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n// File:src/core/Layers.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Layers = function () {\n\n\tthis.mask = 1;\n\n};\n\nTHREE.Layers.prototype = {\n\n\tconstructor: THREE.Layers,\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel );\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n};\n\n// File:src/core/Raycaster.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://clara.io/\n * @author stephomi / http://stephaneginier.com/\n */\n\n( function ( THREE ) {\n\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\n\n\t\tthis.ray = new THREE.Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near || 0;\n\t\tthis.far = far || Infinity;\n\n\t\tthis.params = {\n\t\t\tMesh: {},\n\t\t\tLine: {},\n\t\t\tLOD: {},\n\t\t\tPoints: { threshold: 1 },\n\t\t\tSprite: {}\n\t\t};\n\n\t\tObject.defineProperties( this.params, {\n\t\t\tPointCloud: {\n\t\t\t\tget: function () {\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\t\treturn this.Points;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t};\n\n\tfunction ascSort( a, b ) {\n\n\t\treturn a.distance - b.distance;\n\n\t}\n\n\tfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tvar children = object.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t//\n\n\tTHREE.Raycaster.prototype = {\n\n\t\tconstructor: THREE.Raycaster,\n\n\t\tlinePrecision: 1,\n\n\t\tset: function ( origin, direction ) {\n\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\t\tthis.ray.set( origin, direction );\n\n\t\t},\n\n\t\tsetFromCamera: function ( coords, camera ) {\n\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t\t}\n\n\t\t},\n\n\t\tintersectObject: function ( object, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tintersectObject( object, this, intersects, recursive );\n\n\t\t\tintersects.sort( ascSort );\n\n\t\t\treturn intersects;\n\n\t\t},\n\n\t\tintersectObjects: function ( objects, recursive ) {\n\n\t\t\tvar intersects = [];\n\n\t\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\t\treturn intersects;\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t\t}\n\n\t\t\tintersects.sort( ascSort );\n\n\t\t\treturn intersects;\n\n\t\t}\n\n\t};\n\n}( THREE ) );\n\n// File:src/core/Object3D.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nTHREE.Object3D = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = THREE.Object3D.DefaultUp.clone();\n\n\tvar position = new THREE.Vector3();\n\tvar rotation = new THREE.Euler();\n\tvar quaternion = new THREE.Quaternion();\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation.onChange( onRotationChange );\n\tquaternion.onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new THREE.Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new THREE.Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new THREE.Matrix4();\n\tthis.matrixWorld = new THREE.Matrix4();\n\n\tthis.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new THREE.Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n};\n\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\nTHREE.Object3D.DefaultMatrixAutoUpdate = true;\n\nObject.assign( THREE.Object3D.prototype, THREE.EventDispatcher.prototype, {\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function () {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar q1 = new THREE.Quaternion();\n\n\t\treturn function rotateOnAxis( axis, angle ) {\n\n\t\t\tq1.setFromAxisAngle( axis, angle );\n\n\t\t\tthis.quaternion.multiply( q1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateX: function () {\n\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\treturn this.rotateOnAxis( v1, angle );\n\n\t\t};\n\n\t}(),\n\n\ttranslateOnAxis: function () {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\tvar v1 = new THREE.Vector3();\n\n\t\treturn function translateOnAxis( axis, distance ) {\n\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslateX: function () {\n\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\n\n\t\treturn function translateX( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateY: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\n\n\t\treturn function translateY( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\ttranslateZ: function () {\n\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\n\n\t\treturn function translateZ( distance ) {\n\n\t\t\treturn this.translateOnAxis( v1, distance );\n\n\t\t};\n\n\t}(),\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function () {\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function worldToLocal( vector ) {\n\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\n\n\t\tvar m1 = new THREE.Matrix4();\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tm1.lookAt( vector, this.position, this.up );\n\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t\t};\n\n\t}(),\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object instanceof THREE.Object3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tobject.dispatchEvent( { type: 'added' } );\n\n\t\t\tthis.children.push( object );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\n\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function () {\n\n\t\tvar position = new THREE.Vector3();\n\t\tvar scale = new THREE.Vector3();\n\n\t\treturn function getWorldQuaternion( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldRotation: function () {\n\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function getWorldRotation( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Euler();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\n\n\t\t};\n\n\t}(),\n\n\tgetWorldScale: function () {\n\n\t\tvar position = new THREE.Vector3();\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function getWorldScale( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\n\n\t\t\treturn result;\n\n\t\t};\n\n\t}(),\n\n\tgetWorldDirection: function () {\n\n\t\tvar quaternion = new THREE.Quaternion();\n\n\t\treturn function getWorldDirection( optionalTarget ) {\n\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\t\tthis.getWorldQuaternion( quaternion );\n\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\n\n\t\t};\n\n\t}(),\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is '' when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || meta === '' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\t//\n\n\t\tif ( this.geometry !== undefined ) {\n\n\t\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\n\n\t\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\n\n\t\t\t}\n\n\t\t\tobject.geometry = this.geometry.uuid;\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\n\n\t\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\n\n\t\t\t}\n\n\t\t\tobject.material = this.material.uuid;\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache ( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nTHREE.Object3DIdCount = 0;\n\n// File:src/core/Face3.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n};\n\nTHREE.Face3.prototype = {\n\n\tconstructor: THREE.Face3,\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n};\n\n// File:src/core/BufferAttribute.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferAttribute = function ( array, itemSize, normalized ) {\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\n\tthis.dynamic = false;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\tthis.normalized = normalized === true;\n\n};\n\nTHREE.BufferAttribute.prototype = {\n\n\tconstructor: THREE.BufferAttribute,\n\n\tget count() {\n\n\t\treturn this.array.length / this.itemSize;\n\n\t},\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t},\n\n\tsetDynamic: function ( value ) {\n\n\t\tthis.dynamic = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\n\t\tthis.dynamic = source.dynamic;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new THREE.Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyIndicesArray: function ( indices ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\tvar index = indices[ i ];\n\n\t\t\tarray[ offset ++ ] = index.a;\n\t\t\tarray[ offset ++ ] = index.b;\n\t\t\tarray[ offset ++ ] = index.c;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new THREE.Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new THREE.Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new THREE.Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n};\n\n//\n\nTHREE.Int8Attribute = function ( array, itemSize ) {\n\n\treturn new THREE.BufferAttribute( new Int8Array( array ), itemSize );\n\n};\n\nTHREE.Uint8Attribute = function ( array, itemSize ) {\n\n\treturn new THREE.BufferAttribute( new Uint8Array( array ), itemSize );\n\n};\n\nTHREE.Uint8ClampedAttribute = function ( array, itemSize ) {\n\n\treturn new THREE.BufferAttribute( new Uint8ClampedArray( array ), itemSize );\n\n};\n\nTHREE.Int16Attribute = function ( array, itemSize ) {\n\n\treturn new THREE.BufferAttribute( new Int16Array( array ), itemSize );\n\n};\n\nTHREE.Uint16Attribute = function ( array, itemSize ) {\n\n\treturn new THREE.BufferAttribute( new Uint16Array( array ), itemSize );\n\n};\n\nTHREE.Int32Attribute = function ( array, itemSize ) {\n\n\treturn new THREE.BufferAttribute( new Int32Array( array ), itemSize );\n\n};\n\nTHREE.Uint32Attribute = function ( array, itemSize ) {\n\n\treturn new THREE.BufferAttribute( new Uint32Array( array ), itemSize );\n\n};\n\nTHREE.Float32Attribute = function ( array, itemSize ) {\n\n\treturn new THREE.BufferAttribute( new Float32Array( array ), itemSize );\n\n};\n\nTHREE.Float64Attribute = function ( array, itemSize ) {\n\n\treturn new THREE.BufferAttribute( new Float64Array( array ), itemSize );\n\n};\n\n\n// Deprecated\n\nTHREE.DynamicBufferAttribute = function ( array, itemSize ) {\n\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\n\treturn new THREE.BufferAttribute( array, itemSize ).setDynamic( true );\n\n};\n\n// File:src/core/InstancedBufferAttribute.js\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nTHREE.InstancedBufferAttribute = function ( array, itemSize, meshPerAttribute ) {\n\n\tTHREE.BufferAttribute.call( this, array, itemSize );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n};\n\nTHREE.InstancedBufferAttribute.prototype = Object.create( THREE.BufferAttribute.prototype );\nTHREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute;\n\nTHREE.InstancedBufferAttribute.prototype.copy = function ( source ) {\n\n\tTHREE.BufferAttribute.prototype.copy.call( this, source );\n\n\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\treturn this;\n\n};\n\n// File:src/core/InterleavedBuffer.js\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nTHREE.InterleavedBuffer = function ( array, stride ) {\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.array = array;\n\tthis.stride = stride;\n\n\tthis.dynamic = false;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n};\n\nTHREE.InterleavedBuffer.prototype = {\n\n\tconstructor: THREE.InterleavedBuffer,\n\n\tget length () {\n\n\t\treturn this.array.length;\n\n\t},\n\n\tget count () {\n\n\t\treturn this.array.length / this.stride;\n\n\t},\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t},\n\n\tsetDynamic: function ( value ) {\n\n\t\tthis.dynamic = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.stride = source.stride;\n\t\tthis.dynamic = source.dynamic;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n};\n\n// File:src/core/InstancedInterleavedBuffer.js\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nTHREE.InstancedInterleavedBuffer = function ( array, stride, meshPerAttribute ) {\n\n\tTHREE.InterleavedBuffer.call( this, array, stride );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n};\n\nTHREE.InstancedInterleavedBuffer.prototype = Object.create( THREE.InterleavedBuffer.prototype );\nTHREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer;\n\nTHREE.InstancedInterleavedBuffer.prototype.copy = function ( source ) {\n\n\tTHREE.InterleavedBuffer.prototype.copy.call( this, source );\n\n\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\treturn this;\n\n};\n\n// File:src/core/InterleavedBufferAttribute.js\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nTHREE.InterleavedBufferAttribute = function ( interleavedBuffer, itemSize, offset ) {\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.data = interleavedBuffer;\n\tthis.itemSize = itemSize;\n\tthis.offset = offset;\n\n};\n\n\nTHREE.InterleavedBufferAttribute.prototype = {\n\n\tconstructor: THREE.InterleavedBufferAttribute,\n\n\tget length() {\n\n\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\n\t\treturn this.array.length;\n\n\t},\n\n\tget count() {\n\n\t\treturn this.data.count;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n};\n\n// File:src/core/Geometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nTHREE.Geometry = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [ [] ];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.elementsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n};\n\nObject.assign( THREE.Geometry.prototype, THREE.EventDispatcher.prototype, {\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1;\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1;\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj;\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tvar tempNormals = [];\n\t\tvar tempUVs = [];\n\t\tvar tempUVs2 = [];\n\n\t\tfor ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\n\n\t\t\tscope.vertices.push( new THREE.Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\n\n\t\t\tif ( normals !== undefined ) {\n\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\ttempUVs2.push( new THREE.Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\n\n\t\t\tvar face = new THREE.Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( indices !== undefined ) {\n\n\t\t\tvar groups = geometry.groups;\n\n\t\t\tif ( groups.length > 0 ) {\n\n\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\t\tvar start = group.start;\n\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex  );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = this.boundingBox.center().negate();\n\n\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\treturn offset;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new THREE.Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new THREE.Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new THREE.Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeTangents: function () {\n\n\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tvar d = 0;\n\t\tvar vertices = this.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\n\n\t\t\t}\n\n\t\t\tthis.lineDistances[ i ] = d;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new THREE.Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new THREE.Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\tvertexOffset = this.vertices.length,\n\t\tvertices1 = this.vertices,\n\t\tvertices2 = geometry.vertices,\n\t\tfaces1 = this.faces,\n\t\tfaces2 = geometry.faces,\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\n\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\n\n\t\t\tif ( uv === undefined ) {\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\n\n\t\t\t}\n\n\t\t\tuvs1.push( uvCopy );\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\tvar dupIndex = - 1;\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tdupIndex = n;\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t// Handle primitives\n\n\t\tvar parameters = this.parameters;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tvalues.push( parameters[ key ] );\n\n\t\t\t}\n\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\n\t\t\tthis.constructor.apply( geometry, values );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\treturn new this.constructor().copy( this );\n\t\t*/\n\n\t\treturn new THREE.Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.vertices = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [ [] ];\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nTHREE.GeometryIdCount = 0;\n\n// File:src/core/DirectGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.DirectGeometry = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'DirectGeometry';\n\n\tthis.indices = [];\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n};\n\nObject.assign( THREE.DirectGeometry.prototype, THREE.EventDispatcher.prototype, {\n\n\tcomputeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,\n\tcomputeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,\n\n\tcomputeFaceNormals: function () {\n\n\t\tconsole.warn( 'THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.' );\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tconsole.warn( 'THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.' );\n\n\t},\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tvar group;\n\t\tvar groups = [];\n\t\tvar materialIndex;\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tvar faces = geometry.faces;\n\t\tvar vertices = geometry.vertices;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tvar morphTargets = geometry.morphTargets;\n\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\tvar morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tvar morphNormals = geometry.morphNormals;\n\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\tvar morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = [];\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tvar skinIndices = geometry.skinIndices;\n\t\tvar skinWeights = geometry.skinWeights;\n\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n// File:src/core/BufferGeometry.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferGeometry = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n};\n\nObject.assign( THREE.BufferGeometry.prototype, THREE.EventDispatcher.prototype, {\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tthis.index = index;\n\n\t},\n\n\taddAttribute: function ( name, attribute ) {\n\n\t\tif ( attribute instanceof THREE.BufferAttribute === false && attribute instanceof THREE.InterleavedBufferAttribute === false ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\tthis.addAttribute( name, new THREE.BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tremoveAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tmatrix.applyToVector3Array( position.array );\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function () {\n\n\t\t// rotate geometry around world x-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateX( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeRotationX( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateY: function () {\n\n\t\t// rotate geometry around world y-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateY( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeRotationY( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\trotateZ: function () {\n\n\t\t// rotate geometry around world z-axis\n\n\t\tvar m1;\n\n\t\treturn function rotateZ( angle ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeRotationZ( angle );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\ttranslate: function () {\n\n\t\t// translate geometry\n\n\t\tvar m1;\n\n\t\treturn function translate( x, y, z ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeTranslation( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tscale: function () {\n\n\t\t// scale geometry\n\n\t\tvar m1;\n\n\t\treturn function scale( x, y, z ) {\n\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\n\n\t\t\tm1.makeScale( x, y, z );\n\n\t\t\tthis.applyMatrix( m1 );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar obj;\n\n\t\treturn function lookAt( vector ) {\n\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\n\n\t\t\tobj.lookAt( vector );\n\n\t\t\tobj.updateMatrix();\n\n\t\t\tthis.applyMatrix( obj.matrix );\n\n\t\t};\n\n\t}(),\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tvar offset = this.boundingBox.center().negate();\n\n\t\tthis.translate( offset.x, offset.y, offset.z );\n\n\t\treturn offset;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object instanceof THREE.Points || object instanceof THREE.Line ) {\n\n\t\t\tvar positions = new THREE.Float32Attribute( geometry.vertices.length * 3, 3 );\n\t\t\tvar colors = new THREE.Float32Attribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tvar lineDistances = new THREE.Float32Attribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object instanceof THREE.Mesh ) {\n\n\t\t\tif ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tvar attribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tvar attribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tvar attribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tvar attribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tvar attribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new THREE.DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.addAttribute( 'uv2', new THREE.BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\tif ( geometry.indices.length > 0 ) {\n\n\t\t\tvar TypeArray = geometry.vertices.length > 65535 ? Uint32Array : Uint16Array;\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\n\t\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new THREE.Float32Attribute( morphTarget.length * 3, 3 );\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new THREE.Float32Attribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new THREE.Float32Attribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new THREE.Box3();\n\n\t\t}\n\n\t\tvar positions = this.attributes.position.array;\n\n\t\tif ( positions !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromArray( positions );\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tvar box = new THREE.Box3();\n\t\tvar vector = new THREE.Vector3();\n\n\t\treturn function computeBoundingSphere() {\n\n\t\t\tif ( this.boundingSphere === null ) {\n\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\n\n\t\t\t}\n\n\t\t\tvar positions = this.attributes.position;\n\n\t\t\tif ( positions ) {\n\n\t\t\t\tvar array = positions.array;\n\t\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t\tbox.setFromArray( array );\n\t\t\t\tbox.center( center );\n\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\t\tvar maxRadiusSq = 0;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i += 3 ) {\n\n\t\t\t\t\tvector.fromArray( array, i );\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\n\n\t\t\t\t}\n\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\t\tvar groups = this.groups;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC,\n\n\t\t\tpA = new THREE.Vector3(),\n\t\t\tpB = new THREE.Vector3(),\n\t\t\tpC = new THREE.Vector3(),\n\n\t\t\tcb = new THREE.Vector3(),\n\t\t\tab = new THREE.Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tthis.addGroup( 0, indices.length );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\n\n\t\t\t\t\tvar group = groups[ j ];\n\n\t\t\t\t\tvar start = group.start;\n\t\t\t\t\tvar count = group.count;\n\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeSize = attribute2.itemSize;\n\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal.array;\n\n\t\tvar x, y, z, n;\n\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\n\n\t\t\tx = normals[ i ];\n\t\t\ty = normals[ i + 1 ];\n\t\t\tz = normals[ i + 2 ];\n\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\n\n\t\t\tnormals[ i ] *= n;\n\t\t\tnormals[ i + 1 ] *= n;\n\t\t\tnormals[ i + 2 ] *= n;\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new THREE.BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry2.addAttribute( name, new THREE.BufferAttribute( array2, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tvar array = Array.prototype.slice.call( index.array );\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: array\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\n\n\t\t\tdata.data.attributes[ key ] = {\n\t\t\t\titemSize: attribute.itemSize,\n\t\t\t\ttype: attribute.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: attribute.normalized\n\t\t\t};\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t// Handle primitives\n\n\t\tvar parameters = this.parameters;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tvalues.push( parameters[ key ] );\n\n\t\t\t}\n\n\t\t\tvar geometry = Object.create( this.constructor.prototype );\n\t\t\tthis.constructor.apply( geometry, values );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\treturn new this.constructor().copy( this );\n\t\t*/\n\n\t\treturn new THREE.BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.addAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nTHREE.BufferGeometry.MaxIndex = 65535;\n\n// File:src/core/InstancedBufferGeometry.js\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nTHREE.InstancedBufferGeometry = function () {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'InstancedBufferGeometry';\n\tthis.maxInstancedCount = undefined;\n\n};\n\nTHREE.InstancedBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry;\n\nTHREE.InstancedBufferGeometry.prototype.addGroup = function ( start, count, instances ) {\n\n\tthis.groups.push( {\n\n\t\tstart: start,\n\t\tcount: count,\n\t\tinstances: instances\n\n\t} );\n\n};\n\nTHREE.InstancedBufferGeometry.prototype.copy = function ( source ) {\n\n\tvar index = source.index;\n\n\tif ( index !== null ) {\n\n\t\tthis.setIndex( index.clone() );\n\n\t}\n\n\tvar attributes = source.attributes;\n\n\tfor ( var name in attributes ) {\n\n\t\tvar attribute = attributes[ name ];\n\t\tthis.addAttribute( name, attribute.clone() );\n\n\t}\n\n\tvar groups = source.groups;\n\n\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\tvar group = groups[ i ];\n\t\tthis.addGroup( group.start, group.count, group.instances );\n\n\t}\n\n\treturn this;\n\n};\n\n// File:src/core/Uniform.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Uniform = function ( value ) {\n\n\tif ( typeof value === 'string' ) {\n\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\tvalue = arguments[ 1 ];\n\n\t}\n\n\tthis.value = value;\n\n\tthis.dynamic = false;\n\n};\n\nTHREE.Uniform.prototype = {\n\n\tconstructor: THREE.Uniform,\n\n\tonUpdate: function ( callback ) {\n\n\t\tthis.dynamic = true;\n\t\tthis.onUpdateCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n};\n\n// File:src/animation/AnimationAction.js\n\n/**\n *\n * Action provided by AnimationMixer for scheduling clip playback on specific\n * objects.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n *\n */\n\nTHREE.AnimationAction = function() {\n\n\tthrow new Error( \"THREE.AnimationAction: \" +\n\t\t\t\"Use mixer.clipAction for construction.\" );\n\n};\n\nTHREE.AnimationAction._new =\n\t\tfunction AnimationAction( mixer, clip, localRoot ) {\n\n\tthis._mixer = mixer;\n\tthis._clip = clip;\n\tthis._localRoot = localRoot || null;\n\n\tvar tracks = clip.tracks,\n\t\tnTracks = tracks.length,\n\t\tinterpolants = new Array( nTracks );\n\n\tvar interpolantSettings = {\n\t\t\tendingStart: \tTHREE.ZeroCurvatureEnding,\n\t\t\tendingEnd:\t\tTHREE.ZeroCurvatureEnding\n\t};\n\n\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\tvar interpolant = tracks[ i ].createInterpolant( null );\n\t\tinterpolants[ i ] = interpolant;\n\t\tinterpolant.settings = interpolantSettings;\n\n\t}\n\n\tthis._interpolantSettings = interpolantSettings;\n\n\tthis._interpolants = interpolants;\t// bound by the mixer\n\n\t// inside: PropertyMixer (managed by the mixer)\n\tthis._propertyBindings = new Array( nTracks );\n\n\tthis._cacheIndex = null;\t\t\t// for the memory manager\n\tthis._byClipCacheIndex = null;\t\t// for the memory manager\n\n\tthis._timeScaleInterpolant = null;\n\tthis._weightInterpolant = null;\n\n\tthis.loop = THREE.LoopRepeat;\n\tthis._loopCount = -1;\n\n\t// global mixer time when the action is to be started\n\t// it's set back to 'null' upon start of the action\n\tthis._startTime = null;\n\n\t// scaled local time of the action\n\t// gets clamped or wrapped to 0..clip.duration according to loop\n\tthis.time = 0;\n\n\tthis.timeScale = 1;\n\tthis._effectiveTimeScale = 1;\n\n\tthis.weight = 1;\n\tthis._effectiveWeight = 1;\n\n\tthis.repetitions = Infinity; \t\t// no. of repetitions when looping\n\n\tthis.paused = false;\t\t\t\t// false -> zero effective time scale\n\tthis.enabled = true;\t\t\t\t// true -> zero effective weight\n\n\tthis.clampWhenFinished \t= false;\t// keep feeding the last frame?\n\n\tthis.zeroSlopeAtStart \t= true;\t\t// for smooth interpolation w/o separate\n\tthis.zeroSlopeAtEnd\t\t= true;\t\t// clips for start, loop and end\n\n};\n\nTHREE.AnimationAction._new.prototype = {\n\n\tconstructor: THREE.AnimationAction._new,\n\n\t// State & Scheduling\n\n\tplay: function() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t},\n\n\tstop: function() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t},\n\n\treset: function() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0;\t\t\t// restart clip\n\t\tthis._loopCount = -1;\t// forget previous loops\n\t\tthis._startTime = null;\t// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t},\n\n\tisRunning: function() {\n\n\t\tvar start = this._startTime;\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t},\n\n\t// return true when play has been called\n\tisScheduled: function() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t},\n\n\tstartAt: function( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t},\n\n\tsetLoop: function( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t},\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight: function( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t},\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight: function() {\n\n\t\treturn this._effectiveWeight;\n\n\t},\n\n\tfadeIn: function( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t},\n\n\tfadeOut: function( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t},\n\n\tcrossFadeFrom: function( fadeOutAction, duration, warp ) {\n\n\t\tvar mixer = this._mixer;\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif( warp ) {\n\n\t\t\tvar fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcrossFadeTo: function( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t},\n\n\tstopFading: function() {\n\n\t\tvar weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Time Scale Control\n\n\t// set the weight stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale: function( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 :timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale: function() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t},\n\n\tsetDuration: function( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\tsyncWith: function( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\thalt: function( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t},\n\n\twarp: function( startTimeScale, endTimeScale, duration ) {\n\n\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\tinterpolant = this._timeScaleInterpolant,\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tvar times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t},\n\n\tstopWarping: function() {\n\n\t\tvar timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Object Accessors\n\n\tgetMixer: function() {\n\n\t\treturn this._mixer;\n\n\t},\n\n\tgetClip: function() {\n\n\t\treturn this._clip;\n\n\t},\n\n\tgetRoot: function() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t},\n\n\t// Interna\n\n\t_update: function( time, deltaTime, timeDirection, accuIndex ) {\n\t\t// called by the mixer\n\n\t\tvar startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tvar timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tvar clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tvar weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tvar interpolants = this._interpolants;\n\t\t\tvar propertyMixers = this._propertyBindings;\n\n\t\t\tfor ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_updateWeight: function( time ) {\n\n\t\tvar weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tvar interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t},\n\n\t_updateTimeScale: function( time ) {\n\n\t\tvar timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tvar interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t},\n\n\t_updateTime: function( deltaTime ) {\n\n\t\tvar time = this.time + deltaTime;\n\n\t\tif ( deltaTime === 0 ) return time;\n\n\t\tvar duration = this._clip.duration,\n\n\t\t\tloop = this.loop,\n\t\t\tloopCount = this._loopCount;\n\n\t\tif ( loop === THREE.LoopOnce ) {\n\n\t\t\tif ( loopCount === -1 ) {\n\t\t\t\t// just started\n\n\t\t\t\tthis.loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else break handle_stop;\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? -1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tvar pingPong = ( loop === THREE.LoopPingPong );\n\n\t\t\tif ( loopCount === -1 ) {\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings(\n\t\t\t\t\t\t\ttrue, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings(\n\t\t\t\t\t\t\tthis.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\t\t\t\t// wrap around\n\n\t\t\t\tvar loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tvar pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending < 0 ) {\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : -1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 0 ) {\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tvar atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\tthis.time = time;\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.time = time;\n\t\treturn time;\n\n\t},\n\n\t_setEndings: function( atStart, atEnd, pingPong ) {\n\n\t\tvar settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart \t= THREE.ZeroSlopeEnding;\n\t\t\tsettings.endingEnd\t\t= THREE.ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ?\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = THREE.WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ?\n\t\t\t\t\t\tTHREE.ZeroSlopeEnding : THREE.ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = THREE.WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_scheduleFading: function( duration, weightNow, weightThen ) {\n\n\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\tinterpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant(),\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tvar times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now; \t\t\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n};\n\n\n// File:src/animation/AnimationClip.js\n\n/**\n *\n * Reusable set of Tracks that represent an animation.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nTHREE.AnimationClip = function ( name, duration, tracks ) {\n\n\tthis.name = name;\n\tthis.tracks = tracks;\n\tthis.duration = ( duration !== undefined ) ? duration : -1;\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\t// this means it should figure out its duration by scanning the tracks\n\tif ( this.duration < 0 ) {\n\n\t\tthis.resetDuration();\n\n\t}\n\n\t// maybe only do these on demand, as doing them here could potentially slow down loading\n\t// but leaving these here during development as this ensures a lot of testing of these functions\n\tthis.trim();\n\tthis.optimize();\n\n};\n\nTHREE.AnimationClip.prototype = {\n\n\tconstructor: THREE.AnimationClip,\n\n\tresetDuration: function() {\n\n\t\tvar tracks = this.tracks,\n\t\t\tduration = 0;\n\n\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tvar track = this.tracks[ i ];\n\n\t\t\tduration = Math.max(\n\t\t\t\t\tduration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t},\n\n\ttrim: function() {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\toptimize: function() {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n};\n\n// Static methods:\n\nObject.assign( THREE.AnimationClip, {\n\n\tparse: function( json ) {\n\n\t\tvar tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( THREE.KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\treturn new THREE.AnimationClip( json.name, json.duration, tracks );\n\n\t},\n\n\n\ttoJSON: function( clip ) {\n\n\t\tvar tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tvar json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks\n\n\t\t};\n\n\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( THREE.KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t},\n\n\n\tCreateFromMorphTargetSequence: function( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tvar numMorphTargets = morphTargetSequence.length;\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tvar times = [];\n\t\t\tvar values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\t\ti,\n\t\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tvar order = THREE.AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = THREE.AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = THREE.AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\t\tnew THREE.NumberKeyframeTrack(\n\t\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\t\ttimes, values\n\t\t\t\t\t).scale( 1.0 / fps ) );\n\t\t}\n\n\t\treturn new THREE.AnimationClip( name, -1, tracks );\n\n\t},\n\n\tfindByName: function( objectOrClipArray, name ) {\n\n\t\tvar clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tvar o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tCreateClipsFromMorphTargetSequences: function( morphTargets, fps, noLoop ) {\n\n\t\tvar animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = morphTargets[ i ];\n\t\t\tvar parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tvar name = parts[ 1 ];\n\n\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar clips = [];\n\n\t\tfor ( var name in animationToMorphTargets ) {\n\n\t\t\tclips.push( THREE.AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t},\n\n\t// parse the animation.hierarchy format\n\tparseAnimation: function( animation, bones, nodeName ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( \"  no animation in JSONLoader data\" );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar addNonemptyTrack = function(\n\t\t\t\ttrackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tvar times = [];\n\t\t\t\tvar values = [];\n\n\t\t\t\tTHREE.AnimationUtils.flattenJSON(\n\t\t\t\t\t\tanimationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar tracks = [];\n\n\t\tvar clipName = animation.name || 'default';\n\t\t// automatic length determination in AnimationClip.\n\t\tvar duration = animation.length || -1;\n\t\tvar fps = animation.fps || 30;\n\n\t\tvar hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets in a way exactly compatible\n\t\t\t// with AnimationHandler.init( animation )\n\t\t\tif ( animationKeys[0].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tvar morphTargetNames = {};\n\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[k].morphTargets ) {\n\n\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[k].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[k].morphTargets[m] ] = -1;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tvar times = [];\n\t\t\t\t\tvar values = [];\n\n\t\t\t\t\tfor ( var m = 0;\n\t\t\t\t\t\t\tm !== animationKeys[k].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tvar animationKey = animationKeys[k];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new THREE.NumberKeyframeTrack(\n\t\t\t\t\t\t\t'.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\t\tTHREE.QuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\t\tTHREE.VectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar clip = new THREE.AnimationClip( clipName, duration, tracks );\n\n\t\treturn clip;\n\n\t}\n\n} );\n\n// File:src/animation/AnimationMixer.js\n\n/**\n *\n * Player for AnimationClips.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.AnimationMixer = function( root ) {\n\n\tthis._root = root;\n\tthis._initMemoryManager();\n\tthis._accuIndex = 0;\n\n\tthis.time = 0;\n\n\tthis.timeScale = 1.0;\n\n};\n\nObject.assign( THREE.AnimationMixer.prototype, THREE.EventDispatcher.prototype, {\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction: function( clip, optionalRoot ) {\n\n\t\tvar root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\t\tTHREE.AnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject !== null ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ],\n\t\t\tprototypeAction = null;\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tvar existingAction =\n\t\t\t\t\tactionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tvar newAction = new THREE.\n\t\t\t\tAnimationMixer._Action( this, clipObject, optionalRoot );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t},\n\n\t// get an existing action\n\texistingAction: function( clip, optionalRoot ) {\n\n\t\tvar root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\t\tTHREE.AnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction: function() {\n\n\t\tvar actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tthis._nActiveActions = 0;\n\t\tthis._nActiveBindings = 0;\n\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\tactions[ i ].reset();\n\n\t\t}\n\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].useCount = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// advance the time and update apply the animation\n\tupdate: function( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tvar actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\tvar action = actions[ i ];\n\n\t\t\tif ( action.enabled ) {\n\n\t\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tvar bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// return this mixer's root target object\n\tgetRoot: function() {\n\n\t\treturn this._root;\n\n\t},\n\n\t// free all resources specific to a particular clip\n\tuncacheClip: function( clip ) {\n\n\t\tvar actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tvar actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tvar action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tvar cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t},\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot: function( root ) {\n\n\t\tvar rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( var clipUuid in actionsByClip ) {\n\n\t\t\tvar actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( var trackName in bindingByName ) {\n\n\t\t\t\tvar binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remove a targeted clip from the cache\n\tuncacheAction: function( clip, optionalRoot ) {\n\n\t\tvar action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n} );\n\nTHREE.AnimationMixer._Action = THREE.AnimationAction._new;\n\n// Implementation details:\n\nObject.assign( THREE.AnimationMixer.prototype, {\n\n\t_bindAction: function( action, prototypeAction ) {\n\n\t\tvar root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tvar track = tracks[ i ],\n\t\t\t\ttrackName = track.name,\n\t\t\t\tbinding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tvar path = prototypeAction && prototypeAction.\n\t\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new THREE.PropertyMixer(\n\t\t\t\t\t\tTHREE.PropertyBinding.create( root, trackName, path ),\n\t\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t},\n\n\t_activateAction: function( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tvar rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t},\n\n\t_deactivateAction: function( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t},\n\n\t// Memory manager\n\n\t_initMemoryManager: function() {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \t\tknownActions: Array< _Action >\t- used as prototypes\n\t\t// \t\tactionByRoot: _Action\t\t\t- lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tvar scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() { return scope._actions.length; },\n\t\t\t\tget inUse() { return scope._nActiveActions; }\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() { return scope._bindings.length; },\n\t\t\t\tget inUse() { return scope._nActiveBindings; }\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() { return scope._controlInterpolants.length; },\n\t\t\t\tget inUse() { return scope._nActiveControlInterpolants; }\n\t\t\t}\n\n\t\t};\n\n\t},\n\n\t// Memory management for _Action objects\n\n\t_isActiveAction: function( action ) {\n\n\t\tvar index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t},\n\n\t_addInactiveAction: function( action, clipUuid, rootUuid ) {\n\n\t\tvar actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tvar knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t},\n\n\t_removeInactiveAction: function( action ) {\n\n\t\tvar actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tvar clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tvar actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( actions._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t},\n\n\t_removeInactiveBindingsForAction: function( action ) {\n\n\t\tvar bindings = action._propertyBindings;\n\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tvar binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_lendAction: function( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tvar actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t},\n\n\t_takeBackAction: function( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tvar actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t},\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding: function( binding, rootUuid, trackName ) {\n\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tbindings = this._bindings;\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t},\n\n\t_removeInactiveBinding: function( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tremove_empty_map: {\n\n\t\t\tfor ( var _ in bindingByName ) break remove_empty_map;\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t},\n\n\t_lendBinding: function( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t},\n\n\t_takeBackBinding: function( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t},\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant: function() {\n\n\t\tvar interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++,\n\t\t\tinterpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new THREE.LinearInterpolant(\n\t\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t},\n\n\t_takeBackControlInterpolant: function( interpolant ) {\n\n\t\tvar interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t},\n\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 )\n\n} );\n\n// File:src/animation/AnimationObjectGroup.js\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n * \t-\tAdd objects you would otherwise pass as 'root' to the\n * \t\tconstructor or the .clipAction method of AnimationMixer.\n *\n * \t-\tInstead pass this object as 'root'.\n *\n * \t-\tYou can also add and remove objects later when the mixer\n * \t\tis running.\n *\n * Note:\n *\n *  \tObjects of this class appear as one object to the mixer,\n *  \tso cache control of the individual objects must be done\n *  \ton the group.\n *\n * Limitation:\n *\n * \t- \tThe animated properties must be compatible among the\n * \t\tall objects in the group.\n *\n *  -\tA single property can either be controlled through a\n *  \ttarget group or directly, but not both.\n *\n * @author tschw\n */\n\nTHREE.AnimationObjectGroup = function( var_args ) {\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\t// cached objects followed by the active ones\n\tthis._objects = Array.prototype.slice.call( arguments );\n\n\tthis.nCachedObjects_ = 0;\t\t\t// threshold\n\t// note: read by PropertyBinding.Composite\n\n\tvar indices = {};\n\tthis._indicesByUUID = indices;\t\t// for bookkeeping\n\n\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t}\n\n\tthis._paths = [];\t\t\t\t\t// inside: string\n\tthis._parsedPaths = [];\t\t\t\t// inside: { we don't care, here }\n\tthis._bindings = []; \t\t\t\t// inside: Array< PropertyBinding >\n\tthis._bindingsIndicesByPath = {}; \t// inside: indices in these arrays\n\n\tvar scope = this;\n\n\tthis.stats = {\n\n\t\tobjects: {\n\t\t\tget total() { return scope._objects.length; },\n\t\t\tget inUse() { return this.total - scope.nCachedObjects_;  }\n\t\t},\n\n\t\tget bindingsPerObject() { return scope._bindings.length; }\n\n\t};\n\n};\n\nTHREE.AnimationObjectGroup.prototype = {\n\n\tconstructor: THREE.AnimationObjectGroup,\n\n\tadd: function( var_args ) {\n\n\t\tvar objects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tvar object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push(\n\t\t\t\t\t\t\tnew THREE.PropertyBinding(\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tvar knownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new THREE.PropertyBinding(\n\t\t\t\t\t\t\t\tobject, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject) {\n\n\t\t\t\tconsole.error( \"Different objects with the same UUID \" +\n\t\t\t\t\t\t\"detected. Clean the caches or recreate your \" +\n\t\t\t\t\t\t\"infrastructure when reloading scenes...\" );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\tremove: function( var_args ) {\n\n\t\tvar objects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tvar object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tvar lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tvar bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// remove & forget\n\tuncache: function( var_args ) {\n\n\t\tvar objects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tfor ( var i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tvar object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tvar firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tvar lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( var j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tvar bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_: function( path, parsedPath ) {\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ],\n\t\t\tbindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tvar paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( var i = nCachedObjects,\n\t\t\t\tn = objects.length; i !== n; ++ i ) {\n\n\t\t\tvar object = objects[ i ];\n\n\t\t\tbindingsForPath[ i ] =\n\t\t\t\t\tnew THREE.PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t},\n\n\tunsubscribe_: function( path ) {\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tvar indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tvar paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n};\n\n\n// File:src/animation/AnimationUtils.js\n\n/**\n * @author tschw\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nTHREE.AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function( array, from, to ) {\n\n\t\tif ( THREE.AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\treturn new array.constructor( array.subarray( from, to ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tvar n = times.length;\n\t\tvar result = new Array( n );\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function( values, stride, order ) {\n\n\t\tvar nValues = values.length;\n\t\tvar result = new values.constructor( nValues );\n\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tvar srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tvar i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tvar value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/animation/KeyframeTrack.js\n\n/**\n *\n * A timed sequence of keyframes for a specific property.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.KeyframeTrack = function ( name, times, values, interpolation ) {\n\n\tif( name === undefined ) throw new Error( \"track name is undefined\" );\n\n\tif( times === undefined || times.length === 0 ) {\n\n\t\tthrow new Error( \"no keyframes in track named \" + name );\n\n\t}\n\n\tthis.name = name;\n\n\tthis.times = THREE.AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = THREE.AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\tthis.validate();\n\tthis.optimize();\n\n};\n\nTHREE.KeyframeTrack.prototype = {\n\n\tconstructor: THREE.KeyframeTrack,\n\n\tTimeBufferType: Float32Array,\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: THREE.InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function( result ) {\n\n\t\treturn new THREE.DiscreteInterpolant(\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function( result ) {\n\n\t\treturn new THREE.LinearInterpolant(\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function( result ) {\n\n\t\treturn new THREE.CubicInterpolant(\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function( interpolation ) {\n\n\t\tvar factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase THREE.InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase THREE.InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase THREE.InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tvar message = \"unsupported interpolation for \" +\n\t\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( message );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t},\n\n\tgetInterpolation: function() {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn THREE.InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn THREE.InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn THREE.InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function() {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function( timeOffset ) {\n\n\t\tif( timeOffset !== 0.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function( timeScale ) {\n\n\t\tif( timeScale !== 1.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function( startTime, endTime ) {\n\n\t\tvar times = this.times,\n\t\t\tnKeys = times.length,\n\t\t\tfrom = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) ++ from;\n\t\twhile ( to !== -1 && times[ to ] > endTime ) -- to;\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) to = Math.max( to , 1 ), from = to - 1;\n\n\t\t\tvar stride = this.getValueSize();\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = THREE.AnimationUtils.\n\t\t\t\t\tarraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function() {\n\n\t\tvar valid = true;\n\n\t\tvar valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( \"invalid value size in track\", this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif( nKeys === 0 ) {\n\n\t\t\tconsole.error( \"track is empty\", this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar prevTime = null;\n\n\t\tfor( var i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tvar currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( \"time is not a valid number\", this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( \"out of order keys\", this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( THREE.AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( \"value is not a valid number\", this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function() {\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\t\t\tstride = this.getValueSize(),\n\n\t\t\twriteIndex = 1;\n\n\t\tfor( var i = 1, n = times.length - 1; i <= n; ++ i ) {\n\n\t\t\tvar keep = false;\n\n\t\t\tvar time = times[ i ];\n\t\t\tvar timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\t\t\t\tvar offset = i * stride,\n\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\tvar value = values[ offset + j ];\n\n\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tvar readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = THREE.AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = THREE.AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n};\n\n// Static methods:\n\nObject.assign( THREE.KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tparse: function( json ) {\n\n\t\tif( json.type === undefined ) {\n\n\t\t\tthrow new Error( \"track type undefined, can not parse\" );\n\n\t\t}\n\n\t\tvar trackType = THREE.KeyframeTrack._getTrackTypeForValueTypeName( json.type );\n\n\t\tif ( json.times === undefined ) {\n\n\t\t\tvar times = [], values = [];\n\n\t\t\tTHREE.AnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\t\tjson.times = times;\n\t\t\tjson.values = values;\n\n\t\t}\n\n\t\t// derived classes can define a static parse method\n\t\tif ( trackType.parse !== undefined ) {\n\n\t\t\treturn trackType.parse( json );\n\n\t\t} else {\n\n\t\t\t// by default, we asssume a constructor compatible with the base\n\t\t\treturn new trackType(\n\t\t\t\t\tjson.name, json.times, json.values, json.interpolation );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function( track ) {\n\n\t\tvar trackType = track.constructor;\n\n\t\tvar json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': THREE.AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': THREE.AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tvar interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t},\n\n\t_getTrackTypeForValueTypeName: function( typeName ) {\n\n\t\tswitch( typeName.toLowerCase() ) {\n\n\t\t\tcase \"scalar\":\n\t\t\tcase \"double\":\n\t\t\tcase \"float\":\n\t\t\tcase \"number\":\n\t\t\tcase \"integer\":\n\n\t\t\t\treturn THREE.NumberKeyframeTrack;\n\n\t\t\tcase \"vector\":\n\t\t\tcase \"vector2\":\n\t\t\tcase \"vector3\":\n\t\t\tcase \"vector4\":\n\n\t\t\t\treturn THREE.VectorKeyframeTrack;\n\n\t\t\tcase \"color\":\n\n\t\t\t\treturn THREE.ColorKeyframeTrack;\n\n\t\t\tcase \"quaternion\":\n\n\t\t\t\treturn THREE.QuaternionKeyframeTrack;\n\n\t\t\tcase \"bool\":\n\t\t\tcase \"boolean\":\n\n\t\t\t\treturn THREE.BooleanKeyframeTrack;\n\n\t\t\tcase \"string\":\n\n\t\t\t\treturn THREE.StringKeyframeTrack;\n\n\t\t}\n\n\t\tthrow new Error( \"Unsupported typeName: \" + typeName );\n\n\t}\n\n} );\n\n// File:src/animation/PropertyBinding.js\n\n/**\n *\n * A reference to a real property in the scene graph.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.PropertyBinding = function ( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath ||\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\n\n\tthis.node = THREE.PropertyBinding.findNode(\n\t\t\trootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n};\n\nTHREE.PropertyBinding.prototype = {\n\n\tconstructor: THREE.PropertyBinding,\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function() {\n\n\t\tvar targetObject = this.node,\n\t\t\tparsedPath = this.parsedPath,\n\n\t\t\tobjectName = parsedPath.objectName,\n\t\t\tpropertyName = parsedPath.propertyName,\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = THREE.PropertyBinding.findNode(\n\t\t\t\t\tthis.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n \t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( \"  trying to update node for track: \" + this.path + \" but it wasn't found.\" );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tvar objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( '  can not bind to material as node does not have a material', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( '  can not bind to material.materials as node.material does not have a materials array', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( '  can not bind to bones as node does not have a skeleton', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( '  can not bind to objectName of node, undefined', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( \"  trying to bind to objectIndex of objectName, but is undefined:\", this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tvar nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tvar nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( \"  trying to update property for track: \" + nodeName +\n\t\t\t\t\t'.' + propertyName + \" but it wasn't found.\", targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tvar versioning = this.Versioning.None;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\t\t\tthis.targetObject = targetObject;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\t\t\tthis.targetObject = targetObject;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tvar bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\n\n\t\t\t\t\tconsole.error( '  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\n\n\t\t\t\t\tif ( targetObject.geometry.morphTargets[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( nodeProperty.length !== undefined ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function() {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n};\n\nObject.assign( THREE.PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function() {},\n\t_setValue_unavailable: function() {},\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: THREE.PropertyBinding.prototype.getValue,\n\t_setValue_unbound: THREE.PropertyBinding.prototype.setValue,\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tvar source = this.resolvedProperty;\n\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.node[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t]\n\n} );\n\nTHREE.PropertyBinding.Composite =\n\t\tfunction( targetGroup, path, optionalParsedPath ) {\n\n\tvar parsedPath = optionalParsedPath ||\n\t\t\tTHREE.PropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n};\n\nTHREE.PropertyBinding.Composite.prototype = {\n\n\tconstructor: THREE.PropertyBinding.Composite,\n\n\tgetValue: function( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function( array, offset ) {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function() {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function() {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_,\n\t\t\t\tn = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.PropertyBinding.create = function( root, path, parsedPath ) {\n\n\tif ( ! ( root instanceof THREE.AnimationObjectGroup ) ) {\n\n\t\treturn new THREE.PropertyBinding( root, path, parsedPath );\n\n\t} else {\n\n\t\treturn new THREE.PropertyBinding.Composite( root, path, parsedPath );\n\n\t}\n\n};\n\nTHREE.PropertyBinding.parseTrackName = function( trackName ) {\n\n\t// matches strings in the form of:\n\t//    nodeName.property\n\t//    nodeName.property[accessor]\n\t//    nodeName.material.property[accessor]\n\t//    uuid.property[accessor]\n\t//    uuid.objectName[objectIndex].propertyName[propertyIndex]\n\t//    parentName/nodeName.property\n\t//    parentName/parentName/nodeName.property[index]\n\t//\t  .bone[Armature.DEF_cog].position\n\t// created and tested via https://regex101.com/#javascript\n\n\tvar re = /^(([\\w]+\\/)*)([\\w-\\d]+)?(\\.([\\w]+)(\\[([\\w\\d\\[\\]\\_.:\\- ]+)\\])?)?(\\.([\\w.]+)(\\[([\\w\\d\\[\\]\\_. ]+)\\])?)$/;\n\tvar matches = re.exec( trackName );\n\n\tif ( ! matches ) {\n\n\t\tthrow new Error( \"cannot parse trackName at all: \" + trackName );\n\n\t}\n\n\tif ( matches.index === re.lastIndex ) {\n\n\t\tre.lastIndex++;\n\n\t}\n\n\tvar results = {\n\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\tnodeName: matches[ 3 ], \t// allowed to be null, specified root node.\n\t\tobjectName: matches[ 5 ],\n\t\tobjectIndex: matches[ 7 ],\n\t\tpropertyName: matches[ 9 ],\n\t\tpropertyIndex: matches[ 11 ]\t// allowed to be null, specifies that the whole property is set.\n\t};\n\n\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\tthrow new Error( \"can not parse propertyName from trackName: \" + trackName );\n\n\t}\n\n\treturn results;\n\n};\n\nTHREE.PropertyBinding.findNode = function( root, nodeName ) {\n\n\tif ( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === -1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\treturn root;\n\n\t}\n\n\t// search into skeleton bones.\n\tif ( root.skeleton ) {\n\n\t\tvar searchSkeleton = function( skeleton ) {\n\n\t\t\tfor( var i = 0; i < skeleton.bones.length; i ++ ) {\n\n\t\t\t\tvar bone = skeleton.bones[ i ];\n\n\t\t\t\tif ( bone.name === nodeName ) {\n\n\t\t\t\t\treturn bone;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t};\n\n\t\tvar bone = searchSkeleton( root.skeleton );\n\n\t\tif ( bone ) {\n\n\t\t\treturn bone;\n\n\t\t}\n\t}\n\n\t// search into node subtree.\n\tif ( root.children ) {\n\n\t\tvar searchNodeSubtree = function( children ) {\n\n\t\t\tfor( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tvar childNode = children[ i ];\n\n\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\treturn childNode;\n\n\t\t\t\t}\n\n\t\t\t\tvar result = searchNodeSubtree( childNode.children );\n\n\t\t\t\tif ( result ) return result;\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t};\n\n\t\tvar subTreeNode = searchNodeSubtree( root.children );\n\n\t\tif ( subTreeNode ) {\n\n\t\t\treturn subTreeNode;\n\n\t\t}\n\n\t}\n\n\treturn null;\n\n};\n\n// File:src/animation/PropertyMixer.js\n\n/**\n *\n * Buffered scene graph property that allows weighted accumulation.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.PropertyMixer = function ( binding, typeName, valueSize ) {\n\n\tthis.binding = binding;\n\tthis.valueSize = valueSize;\n\n\tvar bufferType = Float64Array,\n\t\tmixFunction;\n\n\tswitch ( typeName ) {\n\n\t\tcase 'quaternion':\t\t\tmixFunction = this._slerp;\t\tbreak;\n\n\t\tcase 'string':\n\t\tcase 'bool':\n\n\t\t\tbufferType = Array,\t\tmixFunction = this._select;\t\tbreak;\n\n\t\tdefault:\t\t\t\t\tmixFunction = this._lerp;\n\n\t}\n\n\tthis.buffer = new bufferType( valueSize * 4 );\n\t// layout: [ incoming | accu0 | accu1 | orig ]\n\t//\n\t// interpolators can use .buffer as their .result\n\t// the data then goes to 'incoming'\n\t//\n\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t// the cumulative result and are compared to detect\n\t// changes\n\t//\n\t// 'orig' stores the original state of the property\n\n\tthis._mixBufferRegion = mixFunction;\n\n\tthis.cumulativeWeight = 0;\n\n\tthis.useCount = 0;\n\tthis.referenceCount = 0;\n\n};\n\nTHREE.PropertyMixer.prototype = {\n\n\tconstructor: THREE.PropertyMixer,\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate: function( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tvar buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tcurrentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tvar mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t},\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply: function( accuIndex ) {\n\n\t\tvar stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tvar originalValueOffset = stride * 3;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tfor ( var i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState: function() {\n\n\t\tvar binding = this.binding;\n\n\t\tvar buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * 3;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\tthis.cumulativeWeight = 0;\n\n\t},\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState: function() {\n\n\t\tvar originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t},\n\n\n\t// mix functions\n\n\t_select: function( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_slerp: function( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tTHREE.Quaternion.slerpFlat( buffer, dstOffset,\n\t\t\t\tbuffer, dstOffset, buffer, srcOffset, t );\n\n\t},\n\n\t_lerp: function( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tvar s = 1 - t;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tvar j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/animation/tracks/BooleanKeyframeTrack.js\n\n/**\n *\n * A Track of Boolean keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.BooleanKeyframeTrack = function ( name, times, values ) {\n\n\tTHREE.KeyframeTrack.call( this, name, times, values );\n\n};\n\nTHREE.BooleanKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\n\n\tconstructor: THREE.BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: THREE.InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\n// File:src/animation/tracks/ColorKeyframeTrack.js\n\n/**\n *\n * A Track of keyframe values that represent color.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.ColorKeyframeTrack = function ( name, times, values, interpolation ) {\n\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\n\n};\n\nTHREE.ColorKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\n\n\tconstructor: THREE.ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\n// File:src/animation/tracks/NumberKeyframeTrack.js\n\n/**\n *\n * A Track of numeric keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.NumberKeyframeTrack = function ( name, times, values, interpolation ) {\n\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\n\n};\n\nTHREE.NumberKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\n\n\tconstructor: THREE.NumberKeyframeTrack,\n\n\tValueTypeName: 'number',\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\n// File:src/animation/tracks/QuaternionKeyframeTrack.js\n\n/**\n *\n * A Track of quaternion keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.QuaternionKeyframeTrack = function ( name, times, values, interpolation ) {\n\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\n\n};\n\nTHREE.QuaternionKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\n\n\tconstructor: THREE.QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: THREE.InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function( result ) {\n\n\t\treturn new THREE.QuaternionLinearInterpolant(\n\t\t\t\tthis.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\n// File:src/animation/tracks/StringKeyframeTrack.js\n\n/**\n *\n * A Track that interpolates Strings\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.StringKeyframeTrack = function ( name, times, values, interpolation ) {\n\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\n\n};\n\nTHREE.StringKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\n\n\tconstructor: THREE.StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: THREE.InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\n// File:src/animation/tracks/VectorKeyframeTrack.js\n\n/**\n *\n * A Track of vectored keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nTHREE.VectorKeyframeTrack = function ( name, times, values, interpolation ) {\n\n\tTHREE.KeyframeTrack.call( this, name, times, values, interpolation );\n\n};\n\nTHREE.VectorKeyframeTrack.prototype =\n\t\tObject.assign( Object.create( THREE.KeyframeTrack.prototype ), {\n\n\tconstructor: THREE.VectorKeyframeTrack,\n\n\tValueTypeName: 'vector'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\n// File:src/audio/Audio.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\n\nTHREE.Audio = function ( listener ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Audio';\n\n\tthis.context = listener.context;\n\tthis.source = this.context.createBufferSource();\n\tthis.source.onended = this.onEnded.bind( this );\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( listener.getInput() );\n\n\tthis.autoplay = false;\n\n\tthis.startTime = 0;\n\tthis.playbackRate = 1;\n\tthis.isPlaying = false;\n\tthis.hasPlaybackControl = true;\n\tthis.sourceType = 'empty';\n\n\tthis.filters = [];\n\n};\n\nTHREE.Audio.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.Audio,\n\n\tgetOutput: function () {\n\n\t\treturn this.gain;\n\n\t},\n\n\tsetNodeSource: function ( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetBuffer: function ( audioBuffer ) {\n\n\t\tthis.source.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t},\n\n\tplay: function () {\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar source = this.context.createBufferSource();\n\n\t\tsource.buffer = this.source.buffer;\n\t\tsource.loop = this.source.loop;\n\t\tsource.onended = this.source.onended;\n\t\tsource.start( 0, this.startTime );\n\t\tsource.playbackRate.value = this.playbackRate;\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\treturn this.connect();\n\n\t},\n\n\tpause: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.source.stop();\n\t\tthis.startTime = this.context.currentTime;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.source.stop();\n\t\tthis.startTime = 0;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t},\n\n\tconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( var i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetFilters: function () {\n\n\t\treturn this.filters;\n\n\t},\n\n\tsetFilters: function ( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value;\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetFilter: function () {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t},\n\n\tsetFilter: function ( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t},\n\n\tsetPlaybackRate: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.value = this.playbackRate;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetPlaybackRate: function () {\n\n\t\treturn this.playbackRate;\n\n\t},\n\n\tonEnded: function () {\n\n\t\tthis.isPlaying = false;\n\n\t},\n\n\tgetLoop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.source.loop;\n\n\t},\n\n\tsetLoop: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.source.loop = value;\n\n\t},\n\n\tgetVolume: function () {\n\n\t\treturn this.gain.gain.value;\n\n\t},\n\n\n\tsetVolume: function ( value ) {\n\n\t\tthis.gain.gain.value = value;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/audio/AudioAnalyser.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AudioAnalyser = function ( audio, fftSize ) {\n\n\tthis.analyser = audio.context.createAnalyser();\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\n\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\taudio.getOutput().connect( this.analyser );\n\n};\n\nObject.assign( THREE.AudioAnalyser.prototype, {\n\n\tgetFrequencyData: function () {\n\n\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\treturn this.data;\n\n\t},\n\n\tgetAverageFrequency: function () {\n\n\t\tvar value = 0, data = this.getFrequencyData();\n\n\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\tvalue += data[ i ];\n\n\t\t}\n\n\t\treturn value / data.length;\n\n\t}\n\n} );\n\n// File:src/audio/AudioContext.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nObject.defineProperty( THREE, 'AudioContext', {\n\n\tget: ( function () {\n\n\t\tvar context;\n\n\t\treturn function get() {\n\n\t\t\tif ( context === undefined ) {\n\n\t\t\t\tcontext = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t\t}\n\n\t\t\treturn context;\n\n\t\t};\n\n\t} )()\n\n} );\n\n// File:src/audio/PositionalAudio.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.PositionalAudio = function ( listener ) {\n\n\tTHREE.Audio.call( this, listener );\n\n\tthis.panner = this.context.createPanner();\n\tthis.panner.connect( this.gain );\n\n};\n\nTHREE.PositionalAudio.prototype = Object.assign( Object.create( THREE.Audio.prototype ), {\n\n\tconstructor: THREE.PositionalAudio,\n\n\tgetOutput: function () {\n\n\t\treturn this.panner;\n\n\t},\n\n\tgetRefDistance: function () {\n\n\t\treturn this.panner.refDistance;\n\n\t},\n\n\tsetRefDistance: function ( value ) {\n\n\t\tthis.panner.refDistance = value;\n\n\t},\n\n\tgetRolloffFactor: function () {\n\n\t\treturn this.panner.rolloffFactor;\n\n\t},\n\n\tsetRolloffFactor: function ( value ) {\n\n\t\tthis.panner.rolloffFactor = value;\n\n\t},\n\n\tgetDistanceModel: function () {\n\n\t\treturn this.panner.distanceModel;\n\n\t},\n\n\tsetDistanceModel: function ( value ) {\n\n\t\tthis.panner.distanceModel = value;\n\n\t},\n\n\tgetMaxDistance: function () {\n\n\t\treturn this.panner.maxDistance;\n\n\t},\n\n\tsetMaxDistance: function ( value ) {\n\n\t\tthis.panner.maxDistance = value;\n\n\t},\n\n\tupdateMatrixWorld: ( function () {\n\n\t\tvar position = new THREE.Vector3();\n\n\t\treturn function updateMatrixWorld( force ) {\n\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\t\tposition.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tthis.panner.setPosition( position.x, position.y, position.z );\n\n\t\t};\n\n\t} )()\n\n\n} );\n\n// File:src/audio/AudioListener.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AudioListener = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'AudioListener';\n\n\tthis.context = THREE.AudioContext;\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( this.context.destination );\n\n\tthis.filter = null;\n\n};\n\nTHREE.AudioListener.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.AudioListener,\n\n\tgetInput: function () {\n\n\t\treturn this.gain;\n\n\t},\n\n\tremoveFilter: function ( ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t},\n\n\tgetFilter: function () {\n\n\t\treturn this.filter;\n\n\t},\n\n\tsetFilter: function ( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t},\n\n\tgetMasterVolume: function () {\n\n\t\treturn this.gain.gain.value;\n\n\t},\n\n\tsetMasterVolume: function ( value ) {\n\n\t\tthis.gain.gain.value = value;\n\n\t},\n\n\tupdateMatrixWorld: ( function () {\n\n\t\tvar position = new THREE.Vector3();\n\t\tvar quaternion = new THREE.Quaternion();\n\t\tvar scale = new THREE.Vector3();\n\n\t\tvar orientation = new THREE.Vector3();\n\n\t\treturn function updateMatrixWorld( force ) {\n\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\t\tvar listener = this.context.listener;\n\t\t\tvar up = this.up;\n\n\t\t\tthis.matrixWorld.decompose( position, quaternion, scale );\n\n\t\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t\t\tlistener.setPosition( position.x, position.y, position.z );\n\t\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\n\n\t\t};\n\n\t} )()\n\n} );\n\n// File:src/cameras/Camera.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.Camera = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new THREE.Matrix4();\n\tthis.projectionMatrix = new THREE.Matrix4();\n\n};\n\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Camera.prototype.constructor = THREE.Camera;\n\nTHREE.Camera.prototype.getWorldDirection = function () {\n\n\tvar quaternion = new THREE.Quaternion();\n\n\treturn function getWorldDirection( optionalTarget ) {\n\n\t\tvar result = optionalTarget || new THREE.Vector3();\n\n\t\tthis.getWorldQuaternion( quaternion );\n\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\n\n\t};\n\n}();\n\nTHREE.Camera.prototype.lookAt = function () {\n\n\t// This routine does not support cameras with rotated and/or translated parent(s)\n\n\tvar m1 = new THREE.Matrix4();\n\n\treturn function lookAt( vector ) {\n\n\t\tm1.lookAt( this.position, vector, this.up );\n\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\n\n\t};\n\n}();\n\nTHREE.Camera.prototype.clone = function () {\n\n\treturn new this.constructor().copy( this );\n\n};\n\nTHREE.Camera.prototype.copy = function ( source ) {\n\n\tTHREE.Object3D.prototype.copy.call( this, source );\n\n\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\tthis.projectionMatrix.copy( source.projectionMatrix );\n\n\treturn this;\n\n};\n\n// File:src/cameras/CubeCamera.js\n\n/**\n * Camera for rendering cube maps\n *\t- renders scene into axis-aligned cube\n *\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'CubeCamera';\n\n\tvar fov = 90, aspect = 1;\n\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPX.up.set( 0, - 1, 0 );\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\n\tthis.add( cameraPX );\n\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNX.up.set( 0, - 1, 0 );\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\n\tthis.add( cameraNX );\n\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPY.up.set( 0, 0, 1 );\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\n\tthis.add( cameraPY );\n\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNY.up.set( 0, 0, - 1 );\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\n\tthis.add( cameraNY );\n\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraPZ.up.set( 0, - 1, 0 );\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\n\tthis.add( cameraPZ );\n\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\n\tcameraNZ.up.set( 0, - 1, 0 );\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\n\tthis.add( cameraNZ );\n\n\tvar options = { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter };\n\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, options );\n\n\tthis.updateCubeMap = function ( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tvar renderTarget = this.renderTarget;\n\t\tvar generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderTarget.activeCubeFace = 0;\n\t\trenderer.render( scene, cameraPX, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 1;\n\t\trenderer.render( scene, cameraNX, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 2;\n\t\trenderer.render( scene, cameraPY, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 3;\n\t\trenderer.render( scene, cameraNY, renderTarget );\n\n\t\trenderTarget.activeCubeFace = 4;\n\t\trenderer.render( scene, cameraPZ, renderTarget );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderTarget.activeCubeFace = 5;\n\t\trenderer.render( scene, cameraNZ, renderTarget );\n\n\t\trenderer.setRenderTarget( null );\n\n\t};\n\n};\n\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\n\n// File:src/cameras/OrthographicCamera.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\n\n\tTHREE.Camera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = left;\n\tthis.right = right;\n\tthis.top = top;\n\tthis.bottom = bottom;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n};\n\nTHREE.OrthographicCamera.prototype = Object.assign( Object.create( THREE.Camera.prototype ), {\n\n\tconstructor: THREE.OrthographicCamera,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Camera.prototype.copy.call( this, source );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.view = {\n\t\t\tfullWidth: fullWidth,\n\t\t\tfullHeight: fullHeight,\n\t\t\toffsetX: x,\n\t\t\toffsetY: y,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function() {\n\n\t\tthis.view = null;\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tvar zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\n\t\t\tvar zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.width;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.height;\n\n\t\t\tleft += scaleW * ( this.view.offsetX / zoomW );\n\t\t\tright = left + scaleW * ( this.view.width / zoomW );\n\t\t\ttop -= scaleH * ( this.view.offsetY / zoomH );\n\t\t\tbottom = top - scaleH * ( this.view.height / zoomH );\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n// File:src/cameras/PerspectiveCamera.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nTHREE.PerspectiveCamera = function( fov, aspect, near, far ) {\n\n\tTHREE.Camera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n};\n\nTHREE.PerspectiveCamera.prototype = Object.assign( Object.create( THREE.Camera.prototype ), {\n\n\tconstructor: THREE.PerspectiveCamera,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Camera.prototype.copy.call( this, source );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = THREE.Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( THREE.Math.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn THREE.Math.RAD2DEG * 2 * Math.atan(\n\t\t\t\tMath.tan( THREE.Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif( ! fullWidth ) {\n\t\t\tthis.view = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tthis.view = {\n\t\t\tfullWidth: fullWidth,\n\t\t\tfullHeight: fullHeight,\n\t\t\toffsetX: x,\n\t\t\toffsetY: y,\n\t\t\twidth: width,\n\t\t\theight: height\n\t\t};\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function() {\n\n\t\tthis.view = null;\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan(\n\t\t\t\t\tTHREE.Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( view !== null ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makeFrustum(\n\t\t\t\tleft, left + width, top - height, top, near, this.far );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n// File:src/cameras/StereoCamera.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.StereoCamera = function () {\n\n\tthis.type = 'StereoCamera';\n\n\tthis.aspect = 1;\n\n\tthis.cameraL = new THREE.PerspectiveCamera();\n\tthis.cameraL.layers.enable( 1 );\n\tthis.cameraL.matrixAutoUpdate = false;\n\n\tthis.cameraR = new THREE.PerspectiveCamera();\n\tthis.cameraR.layers.enable( 2 );\n\tthis.cameraR.matrixAutoUpdate = false;\n\n};\n\nObject.assign( THREE.StereoCamera.prototype, {\n\n\tupdate: ( function () {\n\n\t\tvar focus, fov, aspect, near, far;\n\n\t\tvar eyeRight = new THREE.Matrix4();\n\t\tvar eyeLeft = new THREE.Matrix4();\n\n\t\treturn function update( camera ) {\n\n\t\t\tvar needsUpdate = focus !== camera.focus || fov !== camera.fov ||\n\t\t\t\t\t\t\t\t\t\t\t\taspect !== camera.aspect * this.aspect || near !== camera.near ||\n\t\t\t\t\t\t\t\t\t\t\t\tfar !== camera.far;\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\tfocus = camera.focus;\n\t\t\t\tfov = camera.fov;\n\t\t\t\taspect = camera.aspect * this.aspect;\n\t\t\t\tnear = camera.near;\n\t\t\t\tfar = camera.far;\n\n\t\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\t\tvar projectionMatrix = camera.projectionMatrix.clone();\n\t\t\t\tvar eyeSep = 0.064 / 2;\n\t\t\t\tvar eyeSepOnProjection = eyeSep * near / focus;\n\t\t\t\tvar ymax = near * Math.tan( THREE.Math.DEG2RAD * fov * 0.5 );\n\t\t\t\tvar xmin, xmax;\n\n\t\t\t\t// translate xOffset\n\n\t\t\t\teyeLeft.elements[ 12 ] = - eyeSep;\n\t\t\t\teyeRight.elements[ 12 ] = eyeSep;\n\n\t\t\t\t// for left eye\n\n\t\t\t\txmin = - ymax * aspect + eyeSepOnProjection;\n\t\t\t\txmax = ymax * aspect + eyeSepOnProjection;\n\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t\t// for right eye\n\n\t\t\t\txmin = - ymax * aspect - eyeSepOnProjection;\n\t\t\t\txmax = ymax * aspect - eyeSepOnProjection;\n\n\t\t\t\tprojectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\n\t\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t}\n\n\t\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( eyeLeft );\n\t\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( eyeRight );\n\n\t\t};\n\n\t} )()\n\n} );\n\n// File:src/lights/Light.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Light = function ( color, intensity ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new THREE.Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n};\n\nTHREE.Light.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.Light,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n// File:src/lights/LightShadow.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LightShadow = function ( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new THREE.Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.matrix = new THREE.Matrix4();\n\n\tthis.cameraFovNearFar = new THREE.Vector3( 2 * THREE.Math.DEG2RAD, 0.5, 500 );\n\n};\n\nObject.assign( THREE.LightShadow.prototype, {\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\tthis.cameraFovNearFar.copy( source.cameraFovNearFar );\n\n\t\treturn this;\n\n\t},\n\n\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\n// File:src/lights/AmbientLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AmbientLight = function ( color, intensity ) {\n\n\tTHREE.Light.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n\tthis.castShadow = undefined;\n\n};\n\nTHREE.AmbientLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\n\n\tconstructor: THREE.AmbientLight\n\n} );\n\n// File:src/lights/DirectionalLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.DirectionalLight = function ( color, intensity ) {\n\n\tTHREE.Light.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.updateMatrix();\n\n\tthis.target = new THREE.Object3D();\n\n\tthis.shadow = new THREE.DirectionalLightShadow();\n\n};\n\nTHREE.DirectionalLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\n\n\tconstructor: THREE.DirectionalLight,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Light.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/lights/DirectionalLightShadow.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.DirectionalLightShadow = function ( light ) {\n\n\tTHREE.LightShadow.call( this, new THREE.OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n};\n\nTHREE.DirectionalLightShadow.prototype = Object.assign( Object.create( THREE.LightShadow.prototype ), {\n\n\tconstructor: THREE.DirectionalLightShadow,\n\n\tupdate: function ( light ) {\n\n\t\tthis.cameraFovNearFar.x = 2 * THREE.Math.DEG2RAD; // soft shadow spread angle\n\t\tthis.cameraFovNearFar.y = camera.near;\n\t\tthis.cameraFovNearFar.z = camera.far;\n\n\t}\n\n} );\n\n// File:src/lights/HemisphereLight.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\n\n\tTHREE.Light.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.castShadow = undefined;\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new THREE.Color( groundColor );\n\n};\n\nTHREE.HemisphereLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\n\n\tconstructor: THREE.HemisphereLight,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Light.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/lights/PointLight.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nTHREE.PointLight = function ( color, intensity, distance, decay ) {\n\n\tTHREE.Light.call( this, color, intensity );\n\n\tthis.type = 'PointLight';\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new THREE.LightShadow( new THREE.PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n};\n\nTHREE.PointLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\n\n\tconstructor: THREE.PointLight,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Light.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/lights/SpotLight.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SpotLight = function ( color, intensity, distance, angle, penumbra, decay ) {\n\n\tTHREE.Light.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.set( 0, 1, 0 );\n\tthis.updateMatrix();\n\n\tthis.target = new THREE.Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\treturn this.intensity * Math.PI;\n\t\t},\n\t\tset: function ( power ) {\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new THREE.SpotLightShadow();\n\n};\n\nTHREE.SpotLight.prototype = Object.assign( Object.create( THREE.Light.prototype ), {\n\n\tconstructor: THREE.SpotLight,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Light.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/lights/SpotLightShadow.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.SpotLightShadow = function () {\n\n\tTHREE.LightShadow.call( this, new THREE.PerspectiveCamera( 50 * THREE.Math.RAD2DEG * 2, 1, 0.5, 500 ) );\n\n};\n\nTHREE.SpotLightShadow.prototype = Object.assign( Object.create( THREE.LightShadow.prototype ), {\n\n\tconstructor: THREE.SpotLightShadow,\n\n\tupdate: function ( light ) {\n\n\t\tvar fov = THREE.Math.RAD2DEG * 2 * light.angle;\n\t\tvar aspect = this.mapSize.width / this.mapSize.height;\n\t\tvar far = light.distance || 500;\n\n\t\tvar camera = this.camera;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tthis.cameraFovNearFar.x = light.angle;\n\t\tthis.cameraFovNearFar.y = camera.near;\n\t\tthis.cameraFovNearFar.z = camera.far;\n\n\t}\n\n} );\n\n// File:src/loaders/AudioLoader.js\n\n/**\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\n\nTHREE.AudioLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nObject.assign( THREE.AudioLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new THREE.XHRLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tvar context = THREE.AudioContext;\n\n\t\t\tcontext.decodeAudioData( buffer, function ( audioBuffer ) {\n\n\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t} );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n} );\n\n// File:src/loaders/Cache.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n// File:src/loaders/Loader.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Loader = function () {\n\n\tthis.onLoadStart = function () {};\n\tthis.onLoadProgress = function () {};\n\tthis.onLoadComplete = function () {};\n\n};\n\nTHREE.Loader.prototype = {\n\n\tconstructor: THREE.Loader,\n\n\tcrossOrigin: undefined,\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar parts = url.split( '/' );\n\n\t\tif ( parts.length === 1 ) return './';\n\n\t\tparts.pop();\n\n\t\treturn parts.join( '/' ) + '/';\n\n\t},\n\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\n\n\t\tvar array = [];\n\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\n\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\n\n\t\t}\n\n\t\treturn array;\n\n\t},\n\n\tcreateMaterial: ( function () {\n\n\t\tvar color, textureLoader, materialLoader;\n\n\t\treturn function createMaterial( m, texturePath, crossOrigin ) {\n\n\t\t\tif ( color === undefined ) color = new THREE.Color();\n\t\t\tif ( textureLoader === undefined ) textureLoader = new THREE.TextureLoader();\n\t\t\tif ( materialLoader === undefined ) materialLoader = new THREE.MaterialLoader();\n\n\t\t\t// convert from old material format\n\n\t\t\tvar textures = {};\n\n\t\t\tfunction loadTexture( path, repeat, offset, wrap, anisotropy ) {\n\n\t\t\t\tvar fullPath = texturePath + path;\n\t\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\n\n\t\t\t\tvar texture;\n\n\t\t\t\tif ( loader !== null ) {\n\n\t\t\t\t\ttexture = loader.load( fullPath );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttextureLoader.setCrossOrigin( crossOrigin );\n\t\t\t\t\ttexture = textureLoader.load( fullPath );\n\n\t\t\t\t}\n\n\t\t\t\tif ( repeat !== undefined ) {\n\n\t\t\t\t\ttexture.repeat.fromArray( repeat );\n\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\n\n\t\t\t\t}\n\n\t\t\t\tif ( offset !== undefined ) {\n\n\t\t\t\t\ttexture.offset.fromArray( offset );\n\n\t\t\t\t}\n\n\t\t\t\tif ( wrap !== undefined ) {\n\n\t\t\t\t\tif ( wrap[ 0 ] === 'repeat' ) texture.wrapS = THREE.RepeatWrapping;\n\t\t\t\t\tif ( wrap[ 0 ] === 'mirror' ) texture.wrapS = THREE.MirroredRepeatWrapping;\n\n\t\t\t\t\tif ( wrap[ 1 ] === 'repeat' ) texture.wrapT = THREE.RepeatWrapping;\n\t\t\t\t\tif ( wrap[ 1 ] === 'mirror' ) texture.wrapT = THREE.MirroredRepeatWrapping;\n\n\t\t\t\t}\n\n\t\t\t\tif ( anisotropy !== undefined ) {\n\n\t\t\t\t\ttexture.anisotropy = anisotropy;\n\n\t\t\t\t}\n\n\t\t\t\tvar uuid = THREE.Math.generateUUID();\n\n\t\t\t\ttextures[ uuid ] = texture;\n\n\t\t\t\treturn uuid;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tvar json = {\n\t\t\t\tuuid: THREE.Math.generateUUID(),\n\t\t\t\ttype: 'MeshLambertMaterial'\n\t\t\t};\n\n\t\t\tfor ( var name in m ) {\n\n\t\t\t\tvar value = m[ name ];\n\n\t\t\t\tswitch ( name ) {\n\t\t\t\t\tcase 'DbgColor':\n\t\t\t\t\tcase 'DbgIndex':\n\t\t\t\t\tcase 'opticalDensity':\n\t\t\t\t\tcase 'illumination':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'DbgName':\n\t\t\t\t\t\tjson.name = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'blending':\n\t\t\t\t\t\tjson.blending = THREE[ value ];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorAmbient':\n\t\t\t\t\tcase 'mapAmbient':\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorDiffuse':\n\t\t\t\t\t\tjson.color = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorSpecular':\n\t\t\t\t\t\tjson.specular = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'colorEmissive':\n\t\t\t\t\t\tjson.emissive = color.fromArray( value ).getHex();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'specularCoef':\n\t\t\t\t\t\tjson.shininess = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'shading':\n\t\t\t\t\t\tif ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\n\t\t\t\t\t\tif ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\n\t\t\t\t\t\tif ( value.toLowerCase() === 'standard' ) json.type = 'MeshStandardMaterial';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapDiffuse':\n\t\t\t\t\t\tjson.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapDiffuseRepeat':\n\t\t\t\t\tcase 'mapDiffuseOffset':\n\t\t\t\t\tcase 'mapDiffuseWrap':\n\t\t\t\t\tcase 'mapDiffuseAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapEmissive':\n\t\t\t\t\t\tjson.emissiveMap = loadTexture( value, m.mapEmissiveRepeat, m.mapEmissiveOffset, m.mapEmissiveWrap, m.mapEmissiveAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapEmissiveRepeat':\n\t\t\t\t\tcase 'mapEmissiveOffset':\n\t\t\t\t\tcase 'mapEmissiveWrap':\n\t\t\t\t\tcase 'mapEmissiveAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapLight':\n\t\t\t\t\t\tjson.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapLightRepeat':\n\t\t\t\t\tcase 'mapLightOffset':\n\t\t\t\t\tcase 'mapLightWrap':\n\t\t\t\t\tcase 'mapLightAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAO':\n\t\t\t\t\t\tjson.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAORepeat':\n\t\t\t\t\tcase 'mapAOOffset':\n\t\t\t\t\tcase 'mapAOWrap':\n\t\t\t\t\tcase 'mapAOAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBump':\n\t\t\t\t\t\tjson.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBumpScale':\n\t\t\t\t\t\tjson.bumpScale = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapBumpRepeat':\n\t\t\t\t\tcase 'mapBumpOffset':\n\t\t\t\t\tcase 'mapBumpWrap':\n\t\t\t\t\tcase 'mapBumpAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormal':\n\t\t\t\t\t\tjson.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormalFactor':\n\t\t\t\t\t\tjson.normalScale = [ value, value ];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapNormalRepeat':\n\t\t\t\t\tcase 'mapNormalOffset':\n\t\t\t\t\tcase 'mapNormalWrap':\n\t\t\t\t\tcase 'mapNormalAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapSpecular':\n\t\t\t\t\t\tjson.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapSpecularRepeat':\n\t\t\t\t\tcase 'mapSpecularOffset':\n\t\t\t\t\tcase 'mapSpecularWrap':\n\t\t\t\t\tcase 'mapSpecularAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapMetalness':\n\t\t\t\t\t\tjson.metalnessMap = loadTexture( value, m.mapMetalnessRepeat, m.mapMetalnessOffset, m.mapMetalnessWrap, m.mapMetalnessAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapMetalnessRepeat':\n\t\t\t\t\tcase 'mapMetalnessOffset':\n\t\t\t\t\tcase 'mapMetalnessWrap':\n\t\t\t\t\tcase 'mapMetalnessAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapRoughness':\n\t\t\t\t\t\tjson.roughnessMap = loadTexture( value, m.mapRoughnessRepeat, m.mapRoughnessOffset, m.mapRoughnessWrap, m.mapRoughnessAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapRoughnessRepeat':\n\t\t\t\t\tcase 'mapRoughnessOffset':\n\t\t\t\t\tcase 'mapRoughnessWrap':\n\t\t\t\t\tcase 'mapRoughnessAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAlpha':\n\t\t\t\t\t\tjson.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'mapAlphaRepeat':\n\t\t\t\t\tcase 'mapAlphaOffset':\n\t\t\t\t\tcase 'mapAlphaWrap':\n\t\t\t\t\tcase 'mapAlphaAnisotropy':\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'flipSided':\n\t\t\t\t\t\tjson.side = THREE.BackSide;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'doubleSided':\n\t\t\t\t\t\tjson.side = THREE.DoubleSide;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'transparency':\n\t\t\t\t\t\tconsole.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\n\t\t\t\t\t\tjson.opacity = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'depthTest':\n\t\t\t\t\tcase 'depthWrite':\n\t\t\t\t\tcase 'colorWrite':\n\t\t\t\t\tcase 'opacity':\n\t\t\t\t\tcase 'reflectivity':\n\t\t\t\t\tcase 'transparent':\n\t\t\t\t\tcase 'visible':\n\t\t\t\t\tcase 'wireframe':\n\t\t\t\t\t\tjson[ name ] = value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'vertexColors':\n\t\t\t\t\t\tif ( value === true ) json.vertexColors = THREE.VertexColors;\n\t\t\t\t\t\tif ( value === 'face' ) json.vertexColors = THREE.FaceColors;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\n\t\t\tif ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\n\n\t\t\tif ( json.opacity < 1 ) json.transparent = true;\n\n\t\t\tmaterialLoader.setTextures( textures );\n\n\t\t\treturn materialLoader.parse( json );\n\n\t\t};\n\n\t} )()\n\n};\n\nTHREE.Loader.Handlers = {\n\n\thandlers: [],\n\n\tadd: function ( regex, loader ) {\n\n\t\tthis.handlers.push( regex, loader );\n\n\t},\n\n\tget: function ( file ) {\n\n\t\tvar handlers = this.handlers;\n\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = handlers[ i ];\n\t\t\tvar loader  = handlers[ i + 1 ];\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n};\n\n// File:src/loaders/XHRLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.XHRLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nObject.assign( THREE.XHRLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\tvar scope = this;\n\n\t\tvar cached = THREE.Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tif ( onLoad ) {\n\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tonLoad( cached );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tvar request = new XMLHttpRequest();\n\t\trequest.overrideMimeType( 'text/plain' );\n\t\trequest.open( 'GET', url, true );\n\n\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\tvar response = event.target.response;\n\n\t\t\tTHREE.Cache.add( url, response );\n\n\t\t\tif ( this.status === 200 ) {\n\n\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} else if ( this.status === 0 ) {\n\n\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\tconsole.warn( 'THREE.XHRLoader: HTTP Status 0 received.' );\n\n\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} else {\n\n\t\t\t\tif ( onError ) onError( event );\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, false );\n\n\t\tif ( onProgress !== undefined ) {\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tonProgress( event );\n\n\t\t\t}, false );\n\n\t\t}\n\n\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\n\t\t}, false );\n\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\trequest.send( null );\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/loaders/FontLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.FontLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nObject.assign( THREE.FontLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( this.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tvar font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new THREE.Font( json );\n\n\t}\n\n} );\n\n// File:src/loaders/ImageLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ImageLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nObject.assign( THREE.ImageLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\t\timage.onload = function () {\n\n\t\t\tURL.revokeObjectURL( image.src );\n\t\t\tif ( onLoad ) onLoad( image );\n\n\t\t};\n\n\t\tif ( url.indexOf( 'data:' ) === 0 ) {\n\n\t\t\timage.src = url;\n\n\t\t} else {\n\n\t\t\tvar loader = new THREE.XHRLoader( this.manager );\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'blob' );\n\t\t\tloader.load( url, function ( blob ) {\n\n\t\t\t\timage.src = URL.createObjectURL( blob );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn image;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/loaders/JSONLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.JSONLoader = function ( manager ) {\n\n\tif ( typeof manager === 'boolean' ) {\n\n\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\n\t\tmanager = undefined;\n\n\t}\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n\tthis.withCredentials = false;\n\n};\n\nObject.assign( THREE.JSONLoader.prototype, {\n\n\tload: function( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : THREE.Loader.prototype.extractUrlBase( url );\n\n\t\tvar loader = new THREE.XHRLoader( this.manager );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json = JSON.parse( text );\n\t\t\tvar metadata = json.metadata;\n\n\t\t\tif ( metadata !== undefined ) {\n\n\t\t\t\tvar type = metadata.type;\n\n\t\t\t\tif ( type !== undefined ) {\n\n\t\t\t\t\tif ( type.toLowerCase() === 'object' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( type.toLowerCase() === 'scene' ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar object = scope.parse( json, texturePath );\n\t\t\tonLoad( object.geometry, object.materials );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetTexturePath: function ( value ) {\n\n\t\tthis.texturePath = value;\n\n\t},\n\n\tparse: function ( json, texturePath ) {\n\n\t\tvar geometry = new THREE.Geometry(),\n\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\n\n\t\tparseModel( scale );\n\n\t\tparseSkin();\n\t\tparseMorphing( scale );\n\t\tparseAnimations();\n\n\t\tgeometry.computeFaceNormals();\n\t\tgeometry.computeBoundingSphere();\n\n\t\tfunction parseModel( scale ) {\n\n\t\t\tfunction isBitSet( value, position ) {\n\n\t\t\t\treturn value & ( 1 << position );\n\n\t\t\t}\n\n\t\t\tvar i, j, fi,\n\n\t\t\toffset, zLength,\n\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\n\n\t\t\ttype,\n\t\t\tisQuad,\n\t\t\thasMaterial,\n\t\t\thasFaceVertexUv,\n\t\t\thasFaceNormal, hasFaceVertexNormal,\n\t\t\thasFaceColor, hasFaceVertexColor,\n\n\t\tvertex, face, faceA, faceB, hex, normal,\n\n\t\t\tuvLayer, uv, u, v,\n\n\t\t\tfaces = json.faces,\n\t\t\tvertices = json.vertices,\n\t\t\tnormals = json.normals,\n\t\t\tcolors = json.colors,\n\n\t\t\tnUvLayers = 0;\n\n\t\t\tif ( json.uvs !== undefined ) {\n\n\t\t\t\t// disregard empty arrays\n\n\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\n\n\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\toffset = 0;\n\t\t\tzLength = vertices.length;\n\n\t\t\twhile ( offset < zLength ) {\n\n\t\t\t\tvertex = new THREE.Vector3();\n\n\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\n\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\n\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\n\n\t\t\t\tgeometry.vertices.push( vertex );\n\n\t\t\t}\n\n\t\t\toffset = 0;\n\t\t\tzLength = faces.length;\n\n\t\t\twhile ( offset < zLength ) {\n\n\t\t\t\ttype = faces[ offset ++ ];\n\n\n\t\t\t\tisQuad              = isBitSet( type, 0 );\n\t\t\t\thasMaterial         = isBitSet( type, 1 );\n\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\n\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\n\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\n\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\n\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\n\n\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\n\n\t\t\t\tif ( isQuad ) {\n\n\t\t\t\t\tfaceA = new THREE.Face3();\n\t\t\t\t\tfaceA.a = faces[ offset ];\n\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\n\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\n\n\t\t\t\t\tfaceB = new THREE.Face3();\n\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\n\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\n\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\n\n\t\t\t\t\toffset += 4;\n\n\t\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\n\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\n\n\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\n\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\n\n\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\n\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tfaceA.normal.set(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t\t);\n\n\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\t\tfaceA.color.setHex( hex );\n\t\t\t\t\t\tfaceB.color.setHex( hex );\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\n\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\n\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.faces.push( faceA );\n\t\t\t\t\tgeometry.faces.push( faceB );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface = new THREE.Face3();\n\t\t\t\t\tface.a = faces[ offset ++ ];\n\t\t\t\t\tface.b = faces[ offset ++ ];\n\t\t\t\t\tface.c = faces[ offset ++ ];\n\n\t\t\t\t\tif ( hasMaterial ) {\n\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\n\t\t\t\t\t\tface.materialIndex = materialIndex;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// to get face <=> uv index correspondence\n\n\t\t\t\t\tfi = geometry.faces.length;\n\n\t\t\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\n\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\n\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\n\n\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\n\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\n\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\n\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\tface.normal.set(\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\n\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tface.vertexNormals.push( normal );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\n\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\n\t\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.faces.push( face );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseSkin() {\n\n\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\n\n\t\t\tif ( json.skinWeights ) {\n\n\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\t\tvar x =                               json.skinWeights[ i ];\n\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\n\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\n\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\n\n\t\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( json.skinIndices ) {\n\n\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\n\n\t\t\t\t\tvar a =                               json.skinIndices[ i ];\n\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\n\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\n\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\n\n\t\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.bones = json.bones;\n\n\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\n\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseMorphing( scale ) {\n\n\t\t\tif ( json.morphTargets !== undefined ) {\n\n\t\t\t\tfor ( var i = 0, l = json.morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\t\tgeometry.morphTargets[ i ] = {};\n\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\n\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\n\n\t\t\t\t\tvar dstVertices = geometry.morphTargets[ i ].vertices;\n\t\t\t\t\tvar srcVertices = json.morphTargets[ i ].vertices;\n\n\t\t\t\t\tfor ( var v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\n\n\t\t\t\t\t\tvar vertex = new THREE.Vector3();\n\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\n\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\n\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\n\n\t\t\t\t\t\tdstVertices.push( vertex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( json.morphColors !== undefined && json.morphColors.length > 0 ) {\n\n\t\t\t\tconsole.warn( 'THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.' );\n\n\t\t\t\tvar faces = geometry.faces;\n\t\t\t\tvar morphColors = json.morphColors[ 0 ].colors;\n\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\t\tfaces[ i ].color.fromArray( morphColors, i * 3 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parseAnimations() {\n\n\t\t\tvar outputAnimations = [];\n\n\t\t\t// parse old style Bone/Hierarchy animations\n\t\t\tvar animations = [];\n\n\t\t\tif ( json.animation !== undefined ) {\n\n\t\t\t\tanimations.push( json.animation );\n\n\t\t\t}\n\n\t\t\tif ( json.animations !== undefined ) {\n\n\t\t\t\tif ( json.animations.length ) {\n\n\t\t\t\t\tanimations = animations.concat( json.animations );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tanimations.push( json.animations );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < animations.length; i ++ ) {\n\n\t\t\t\tvar clip = THREE.AnimationClip.parseAnimation( animations[ i ], geometry.bones );\n\t\t\t\tif ( clip ) outputAnimations.push( clip );\n\n\t\t\t}\n\n\t\t\t// parse implicit morph animations\n\t\t\tif ( geometry.morphTargets ) {\n\n\t\t\t\t// TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\n\t\t\t\tvar morphAnimationClips = THREE.AnimationClip.CreateClipsFromMorphTargetSequences( geometry.morphTargets, 10 );\n\t\t\t\toutputAnimations = outputAnimations.concat( morphAnimationClips );\n\n\t\t\t}\n\n\t\t\tif ( outputAnimations.length > 0 ) geometry.animations = outputAnimations;\n\n\t\t}\n\n\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\n\n\t\t\treturn { geometry: geometry };\n\n\t\t} else {\n\n\t\t\tvar materials = THREE.Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\n\n\t\t\treturn { geometry: geometry, materials: materials };\n\n\t\t}\n\n\t}\n\n} );\n\n// File:src/loaders/LoadingManager.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n};\n\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\n\n// File:src/loaders/BufferGeometryLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BufferGeometryLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nObject.assign( THREE.BufferGeometryLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometry = new THREE.BufferGeometry();\n\n\t\tvar index = json.data.index;\n\n\t\tvar TYPED_ARRAYS = {\n\t\t\t'Int8Array': Int8Array,\n\t\t\t'Uint8Array': Uint8Array,\n\t\t\t'Uint8ClampedArray': Uint8ClampedArray,\n\t\t\t'Int16Array': Int16Array,\n\t\t\t'Uint16Array': Uint16Array,\n\t\t\t'Int32Array': Int32Array,\n\t\t\t'Uint32Array': Uint32Array,\n\t\t\t'Float32Array': Float32Array,\n\t\t\t'Float64Array': Float64Array\n\t\t};\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tvar typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\n\t\t\tgeometry.setIndex( new THREE.BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tvar attributes = json.data.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize, attribute.normalized ) );\n\n\t\t}\n\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tvar center = new THREE.Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\n// File:src/loaders/MaterialLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.MaterialLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\tthis.textures = {};\n\n};\n\nObject.assign( THREE.MaterialLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\n\t},\n\n\tgetTexture: function ( name ) {\n\n\t\tvar textures = this.textures;\n\n\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t}\n\n\t\treturn textures[ name ];\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar material = new THREE[ json.type ];\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\n\t\t// for PointsMaterial\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = this.getTexture( json.map );\n\n\t\tif ( json.alphaMap !== undefined ) {\n\n\t\t\tmaterial.alphaMap = this.getTexture( json.alphaMap );\n\t\t\tmaterial.transparent = true;\n\n\t\t}\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = this.getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = this.getTexture( json.normalMap );\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tvar normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new THREE.Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = this.getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = this.getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = this.getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = this.getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = this.getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) {\n\n\t\t\tmaterial.envMap = this.getTexture( json.envMap );\n\t\t\tmaterial.combine = THREE.MultiplyOperation;\n\n\t\t}\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = this.getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = this.getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\t// MultiMaterial\n\n\t\tif ( json.materials !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\n\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n} );\n\n// File:src/loaders/ObjectLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ObjectLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\tthis.texturePath = '';\n\n};\n\nObject.assign( THREE.ObjectLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.texturePath === '' ) {\n\n\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\n\n\t\t}\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tscope.parse( JSON.parse( text ), onLoad );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetTexturePath: function ( value ) {\n\n\t\tthis.texturePath = value;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\n\t},\n\n\tparse: function ( json, onLoad ) {\n\n\t\tvar geometries = this.parseGeometries( json.geometries );\n\n\t\tvar images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tvar textures  = this.parseTextures( json.textures, images );\n\t\tvar materials = this.parseMaterials( json.materials, textures );\n\n\t\tvar object = this.parseObject( json.object, geometries, materials );\n\n\t\tif ( json.animations ) {\n\n\t\t\tobject.animations = this.parseAnimations( json.animations );\n\n\t\t}\n\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t},\n\n\tparseGeometries: function ( json ) {\n\n\t\tvar geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar geometry;\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'PlaneGeometry':\n\t\t\t\t\tcase 'PlaneBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\tcase 'BoxBufferGeometry':\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CircleGeometry':\n\t\t\t\t\tcase 'CircleBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CylinderGeometry':\n\t\t\t\t\tcase 'CylinderBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ConeGeometry':\n\t\t\t\t\tcase 'ConeBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE [ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SphereGeometry':\n\t\t\t\t\tcase 'SphereBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DodecahedronGeometry':\n\t\t\t\t\tcase 'IcosahedronGeometry':\n\t\t\t\t\tcase 'OctahedronGeometry':\n\t\t\t\t\tcase 'TetrahedronGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'RingGeometry':\n\t\t\t\t\tcase 'RingBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.innerRadius,\n\t\t\t\t\t\t\tdata.outerRadius,\n\t\t\t\t\t\t\tdata.thetaSegments,\n\t\t\t\t\t\t\tdata.phiSegments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusGeometry':\n\t\t\t\t\tcase 'TorusBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusKnotGeometry':\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\tdata.q\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'LatheGeometry':\n\t\t\t\t\tcase 'LatheBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\n\t\t\t\t\t\t\tdata.points,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t},\n\n\tparseMaterials: function ( json, textures ) {\n\n\t\tvar materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar loader = new THREE.MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar material = loader.parse( json[ i ] );\n\t\t\t\tmaterials[ material.uuid ] = material;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t},\n\n\tparseAnimations: function ( json ) {\n\n\t\tvar animations = [];\n\n\t\tfor ( var i = 0; i < json.length; i ++ ) {\n\n\t\t\tvar clip = THREE.AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t},\n\n\tparseImages: function ( json, onLoad ) {\n\n\t\tvar scope = this;\n\t\tvar images = {};\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tvar manager = new THREE.LoadingManager( onLoad );\n\n\t\t\tvar loader = new THREE.ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar image = json[ i ];\n\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\n\n\t\t\t\timages[ image.uuid ] = loadImage( path );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t},\n\n\tparseTextures: function ( json, images ) {\n\n\t\tfunction parseConstant( value ) {\n\n\t\t\tif ( typeof( value ) === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn THREE[ value ];\n\n\t\t}\n\n\t\tvar textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tvar texture = new THREE.Texture( images[ data.image ] );\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping );\n\t\t\t\tif ( data.offset !== undefined ) texture.offset = new THREE.Vector2( data.offset[ 0 ], data.offset[ 1 ] );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat = new THREE.Vector2( data.repeat[ 0 ], data.repeat[ 1 ] );\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\t\t\t\tif ( Array.isArray( data.wrap ) ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ] );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ] );\n\n\t\t\t\t}\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t},\n\n\tparseObject: function () {\n\n\t\tvar matrix = new THREE.Matrix4();\n\n\t\treturn function parseObject( data, geometries, materials ) {\n\n\t\t\tvar object;\n\n\t\t\tfunction getGeometry( name ) {\n\n\t\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t\t}\n\n\t\t\t\treturn geometries[ name ];\n\n\t\t\t}\n\n\t\t\tfunction getMaterial( name ) {\n\n\t\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t\t}\n\n\t\t\t\treturn materials[ name ];\n\n\t\t\t}\n\n\t\t\tswitch ( data.type ) {\n\n\t\t\t\tcase 'Scene':\n\n\t\t\t\t\tobject = new THREE.Scene();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'AmbientLight':\n\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DirectionalLight':\n\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Mesh':\n\n\t\t\t\t\tvar geometry = getGeometry( data.geometry );\n\t\t\t\t\tvar material = getMaterial( data.material );\n\n\t\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 ) {\n\n\t\t\t\t\t\tobject = new THREE.SkinnedMesh( geometry, material );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tobject = new THREE.Mesh( geometry, material );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'LOD':\n\n\t\t\t\t\tobject = new THREE.LOD();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Line':\n\n\t\t\t\t\tobject = new THREE.Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointCloud':\n\t\t\t\tcase 'Points':\n\n\t\t\t\t\tobject = new THREE.Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Sprite':\n\n\t\t\t\t\tobject = new THREE.Sprite( getMaterial( data.material ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Group':\n\n\t\t\t\t\tobject = new THREE.Group();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tobject = new THREE.Object3D();\n\n\t\t\t}\n\n\t\t\tobject.uuid = data.uuid;\n\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\n\t\t\tif ( data.matrix !== undefined ) {\n\n\t\t\t\tmatrix.fromArray( data.matrix );\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t\t} else {\n\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t\t}\n\n\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\n\t\t\tif ( data.children !== undefined ) {\n\n\t\t\t\tfor ( var child in data.children ) {\n\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( data.type === 'LOD' ) {\n\n\t\t\t\tvar levels = data.levels;\n\n\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\t\tvar level = levels[ l ];\n\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\t\tobject.addLevel( child, level.distance );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn object;\n\n\t\t};\n\n\t}()\n\n} );\n\n// File:src/loaders/TextureLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.TextureLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nObject.assign( THREE.TextureLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new THREE.Texture();\n\n\t\tvar loader = new THREE.ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/loaders/CubeTextureLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CubeTextureLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n};\n\nObject.assign( THREE.CubeTextureLoader.prototype, {\n\n\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new THREE.CubeTexture();\n\n\t\tvar loader = new THREE.ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tvar loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tsetCrossOrigin: function ( value ) {\n\n\t\tthis.crossOrigin = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/loaders/BinaryTextureLoader.js\n\n/**\n * @author Nikos M. / https://github.com/foo123/\n *\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n */\n\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n\t// override in sub classes\n\tthis._parser = null;\n\n};\n\nObject.assign( THREE.BinaryTextureLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texture = new THREE.DataTexture();\n\n\t\tvar loader = new THREE.XHRLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tvar texData = scope._parser( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( undefined !== texData.image ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( undefined !== texData.data ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\n\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\n\n\t\t\tif ( undefined !== texData.format ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\t\t\tif ( undefined !== texData.type ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( undefined !== texData.mipmaps ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\n\t\t\t}\n\n\t\t\tif ( 1 === texData.mipmapCount ) {\n\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n// File:src/loaders/CompressedTextureLoader.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n */\n\nTHREE.CompressedTextureLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n\t// override in sub classes\n\tthis._parser = null;\n\n};\n\nObject.assign( THREE.CompressedTextureLoader.prototype, {\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar images = [];\n\n\t\tvar texture = new THREE.CompressedTexture();\n\t\ttexture.image = images;\n\n\t\tvar loader = new THREE.XHRLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\n\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tvar loaded = 0;\n\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\n\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/materials/Map.js\n\n/**\n * @author Ben Houston / bhouston / http://clara.io\n *\n */\n\nTHREE.Map = function ( name, uvChannel, uvTransform, texelTransform ) {\n\n  this.name = name || \"unnamed\";\n\n  this.texture = null;\n\n  this.uvChannel = uvChannel || 0;\n\n  this.uvTransform = uvTransform || false;\n  this.uvOffset = new THREE.Vector2( 0, 0 );\n  this.uvRepeat = new THREE.Vector2( 1.0, 1.0 );\n  //this.uvRotation = 0;  - not implemented because offset/repeat fix in a vec4 uniform, rotation doesn't.\n\n  this.texelTransform = uvTransform || false;\n  this.texelScale = 1.0;\n  this.texelOffset = 0.0;\n  this.texelInvert = false;\n\n};\n\nTHREE.Map.prototype = {\n\n  constructor: THREE.Map,\n\n  copy: function ( source ) {\n\n    this.name = source.name;\n\n  \tthis.texture = source.texture;\n\n    this.uvChannel = source.uvChannel;\n\n    this.uvTransform = source.uvTransform;\n    this.uvOffset = source.uvOffset;\n    this.uvRepeat = source.uvRepeat;\n    //this.uvRotation = source.uvRotation;\n\n    this.texelTransform = source.texelTransform;\n    this.texelScale = source.texelScale;\n    this.texelOffset = source.texelOffset;\n    this.texelInvert = source.texelInvert;\n\n  \treturn this;\n\n  },\n\n  // bakes all the input texel parameters into just two.\n  getFlattenedTexelTransform: function( optionalTexelTransform ) {\n      var texelTransform = optionalTexelTransform || {};\n      if( this.texelInvert ) {\n        texelTransform.texelScale = -this.texelScale;\n        texelTransform.texelOffset = this.texelScale + this.texelOffset;\n      }\n      else {\n        texelTransform.texelScale = this.texelScale;\n        texelTransform.texelOffset = this.texelOffset;\n      }\n      return texelTransform;\n  }\n\n};\n\nTHREE.Map.SupportedMapNames = [\n\t'map', 'lightMap', 'aoMap', 'emissiveMap', 'specularMap', 'bumpMap', 'normalMap', 'roughnessMap', 'metalnessMap', 'alphaMap', 'displacementMap'\n];\nTHREE.Map.SupportedMapSlotNames = [];\nTHREE.Map.SupportedMapUVNames = [];\nTHREE.Map.SupportedMapTexelNames = [];\n\nfor( var i = 0; i < THREE.Map.SupportedMapNames.length; i ++ ) {\n  var name = THREE.Map.SupportedMapNames [i];\n  THREE.Map.SupportedMapSlotNames.push( name + 'Slot' );\n  THREE.Map.SupportedMapUVNames.push( name + 'UVTransformParams' );\n  THREE.Map.SupportedMapTexelNames.push( name + 'TexelTransformParams' );\n}\n// File:src/materials/Material.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Material = function () {\n\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\tthis.lights = true;\n\n\tthis.blending = THREE.NormalBlending;\n\tthis.side = THREE.FrontSide;\n\tthis.shading = THREE.SmoothShading; // THREE.FlatShading, THREE.SmoothShading\n\tthis.vertexColors = THREE.NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = THREE.SrcAlphaFactor;\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\n\tthis.blendEquation = THREE.AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = THREE.LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.clippingPlanes = null;\n\tthis.clipShadows = false;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\n\n\tthis.visible = true;\n\n\tthis._needsUpdate = true;\n\n\tthis.version = 0;\n\n};\n\nTHREE.Material.prototype = {\n\n\tconstructor: THREE.Material,\n\n\tget needsUpdate() {\n\n\t\treturn this._needsUpdate;\n\n\t},\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.update();\n\t\tthis._needsUpdate = value;\n\t\tthis.version ++;\n\n\t},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue instanceof THREE.Color ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else if ( key === 'overdraw' ) {\n\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\n\t\t\t\tthis[ key ] = Number( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = meta === undefined;\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color instanceof THREE.Color ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.emissive instanceof THREE.Color ) data.emissive = this.emissive.getHex();\n\t\tif ( this.specular instanceof THREE.Color ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\n\t\tif ( this.map instanceof THREE.Texture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap instanceof THREE.Texture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap instanceof THREE.Texture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\tif ( this.bumpMap instanceof THREE.Texture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\t\tif ( this.normalMap instanceof THREE.Texture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\t\tif ( this.displacementMap instanceof THREE.Texture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\t\tif ( this.roughnessMap instanceof THREE.Texture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap instanceof THREE.Texture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap instanceof THREE.Texture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap instanceof THREE.Texture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap instanceof THREE.Texture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== THREE.NormalBlending ) data.blending = this.blending;\n\t\tif ( this.shading !== THREE.SmoothShading ) data.shading = this.shading;\n\t\tif ( this.side !== THREE.FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors !== THREE.NoColors ) data.vertexColors = this.vertexColors;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache ( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.shading = source.shading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.alphaTest = source.alphaTest;\n\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.overdraw = source.overdraw;\n\n\t\tthis.visible = source.visible;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\n\t\treturn this;\n\n\t},\n\n\tupdate: function () {\n\n\t\tthis.dispatchEvent( { type: 'update' } );\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n};\n\nObject.assign( THREE.Material.prototype, THREE.EventDispatcher.prototype );\n\nTHREE.MaterialIdCount = 0;\n\n// File:src/materials/LineBasicMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nTHREE.LineBasicMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\n\nTHREE.LineBasicMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\treturn this;\n\n};\n\n// File:src/materials/LineDashedMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nTHREE.LineDashedMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\n\nTHREE.LineDashedMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\n// File:src/materials/MeshBasicMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  shading: THREE.SmoothShading,\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nTHREE.MeshBasicMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\n\nTHREE.MeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n// File:src/materials/MeshDepthMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nTHREE.MeshDepthMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = THREE.BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\t// far clipping plane in both RGBA and Basic encoding\n\tthis.clearColor = new THREE.Color( 1.0, 1.0, 1.0 );\n\tthis.clearAlpha = 1.0;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\n\nTHREE.MeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.clearColor = source.clearColor;\n\tthis.clearAlpha = source.clearAlpha;\n\n\treturn this;\n\n};\n\n// File:src/materials/MeshLambertMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nTHREE.MeshLambertMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new THREE.Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\n\nTHREE.MeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n// File:src/materials/MeshCubeMaterial.js\n\n/**\n * @author bhouston / http://clara.io/\n *\n */\n\nTHREE.MeshCubeMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this, parameters );\n\n\tthis.type = 'MeshCubeMaterial';\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.roughness = 0.0;\n\n\tthis.depthTest = false;\n\tthis.depthWrite = false;\n\tthis.side = THREE.BackSide;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshCubeMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshCubeMaterial.prototype.constructor = THREE.MeshCubeMaterial;\n\nTHREE.MeshCubeMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.roughness = source.roughness;\n\n\treturn this;\n\n};\n\n// File:src/materials/MeshNormalMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nTHREE.MeshNormalMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this, parameters );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\tthis.morphTargets = false;\n\n\t// default normal is facing the camera.\n\tthis.clearColor = new THREE.Color( 0.5, 0.5, 1.0 );\n\tthis.clearAlpha = 1.0;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\n\nTHREE.MeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.clearColor = source.clearColor;\n\tthis.clearAlpha = source.clearAlpha;\n\n\treturn this;\n\n};\n\n// File:src/materials/MeshPhongMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nTHREE.MeshPhongMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\n\tthis.specular = new THREE.Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new THREE.Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = THREE.MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\n\nTHREE.MeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n// File:src/materials/MeshStandardMaterial.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @author Ben Houston / bhouston / http://clara.io\n *\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nTHREE.MeshStandardMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\n\t//this.map = null;\n\tthis.mapSlot = new THREE.Map( \"map\", 0, false, false );\n\n\tthis.reflectivity = 0.5;\n\n\tthis.roughness = 0.5;\n\t//this.roughnessMap = null;\n\tthis.roughnessMapSlot = new THREE.Map( \"roughnessMap\", 0, false, false );\n\n\tthis.metalness = 0.5;\n\t//this.metalnessMap = null;\n\tthis.metalnessMapSlot = new THREE.Map( \"metalnessMap\", 0, false, false );\n\n\tthis.emissive = new THREE.Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\t//this.emissiveMap = null;\n\tthis.emissiveMapSlot = new THREE.Map( \"emissiveMap\", 0, false, false );\n\n\t//this.bumpMap = null;\n\t//this.bumpScale = 1;\n\tthis.bumpMapSlot = new THREE.Map( \"bumpMap\", 0, false, true );\n\n\t//this.normalMap = null;\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\n\tthis.normalMapSlot = new THREE.Map( \"normalMap\", 0, false, false );\n\n\t//this.displacementMap = null;\n\t//this.displacementScale = 1;\n\t//this.displacementBias = 0;\n\tthis.displacementMapSlot = new THREE.Map( \"displacementMap\", 0, false, true );\n\n\t//this.lightMap = null;\n\t//this.lightMapIntensity = 1.0;\n\tthis.lightMapSlot = new THREE.Map( \"lightMap\", 1, false, true );\n\n\t//this.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\tthis.aoMapSlot = new THREE.Map( \"aoMap\", 1, false, true );\n\n\t//this.alphaMap = null;\n\tthis.alphaMapSlot = new THREE.Map( \"alphaMap\", 0, false, false );\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshStandardMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.MeshStandardMaterial.prototype.constructor = THREE.MeshStandardMaterial;\n\nvar closure = function () {\n\tvar propertyMappings = {\n\t\t\"map\": {\n\t\t  get: function() {\n\t\t\t\treturn this.mapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.mapSlot.texture = value;\n\t\t\t}\n\t\t},\n\t\t\"lightMap\": {\n\t\t  get: function() {\n\t\t\t\treturn this.lightMapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.lightMapSlot.texture = value;\n\t\t\t}\n\t\t},\n\t\t\"lightMapIntensity\": {\n\t\t  get: function() {\n\t\t\t\treturn this.lightMapSlot.texelScale;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.lightMapSlot.texelTransform = true;\n\t\t\t\tthis.lightMapSlot.texelScale = value;\n\t\t\t}\n\t\t},\n\t\t\"aoMap\": {\n\t\t  get: function() {\n\t\t\t\treturn this.aoMapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.aoMapSlot.texture = value;\n\t\t\t}\n\t\t},\n\t\t\"emissiveMap\": {\n\t\t  get: function() {\n\t\t\t\treturn this.emissiveMapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.emissiveMapSlot.texture = value;\n\t\t\t}\n\t\t},\n\t\t\"bumpMap\": {\n\t\t  get: function() {\n\t\t\t\treturn this.bumpMapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.bumpMapSlot.texture = value;\n\t\t\t}\n\t\t},\n\t\t\"bumpScale\": {\n\t\t  get: function() {\n\t\t\t\treturn this.bumpMapSlot.texelScale;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.bumpMapSlot.texelTransform = true;\n\t\t\t\tthis.bumpMapSlot.texelScale = value;\n\t\t\t}\n\t\t},\n\t\t\"normalMap\": {\n\t\t  get: function() {\n\t\t\t\treturn this.normalMapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.normalMapSlot.texture = value;\n\t\t\t}\n\t\t},\n\t\t\"displacementMap\": {\n\t\t  get: function() {\n\t\t\t\treturn this.displacementMapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.displacementMapSlot.texture = value;\n\t\t\t}\n\t\t},\n\t\t\"displacementScale\": {\n\t\t  get: function() {\n\t\t\t\treturn this.displacementMapSlot.texelScale;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.displacementMapSlot.texelTransform = true;\n\t\t\t\tthis.displacementMapSlot.texelScale = value;\n\t\t\t}\n\t\t},\n\t\t\"displacementBias\": {\n\t\t  get: function() {\n\t\t\t\treturn this.displacementMapSlot.texelOffset;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.displacementMapSlot.texelTransform = true;\n\t\t\t\tthis.displacementMapSlot.texelOffset = value;\n\t\t\t}\n\t\t},\n\t\t\"roughnessMap\": {\n\t\t  get: function() {\n\t\t\t\treturn this.roughnessMapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.roughnessMapSlot.texture = value;\n\t\t\t}\n\t\t},\n\t\t\"metalnessMap\": {\n\t\t  get: function() {\n\t\t\t\treturn this.metalnessMapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.metalnessMapSlot.texture = value;\n\t\t\t}\n\t\t},\n\t\t\"alphaMap\": {\n\t\t  get: function() {\n\t\t\t\treturn this.alphaMapSlot.texture;\n\t\t  },\n\t\t\tset: function( value ) {\n\t\t\t\tthis.alphaMapSlot.texture = value;\n\t\t\t}\n\t\t}\n\t};\n\tfor( var propertyName in propertyMappings ) {\n\t\tObject.defineProperty(THREE.MeshStandardMaterial.prototype, propertyName, propertyMappings[ propertyName ] );\n\t}\n}();\n\nTHREE.MeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.mapSlot.copy( source.mapSlot );\n\n\tthis.reflectivity = source.reflectivity;\n\n\tthis.roughness = source.roughness;\n\tthis.roughnessMapSlot.copy( source.roughnessMapSlot );\n\n\tthis.metalness = source.metalness;\n\tthis.metalnessMapSlot.copy( source.metalnessMapSlot );\n\n\tthis.lightMapSlot.copy( source.lightMapSlot );\n\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\tthis.aoMapSlot.copy( source.aoMapSlot );\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\tthis.emissiveMapSlot.copy( source.emissiveMapSlot );\n\n\tthis.bumpMapSlot.copy( source.bumpMapSlot );\n\n\tthis.normalScale.copy( source.normalScale );\n\tthis.normalMapSlot.copy( source.normalMapSlot );\n\n\tthis.displacementMapSlot.copy( source.displacementMapSlot );\n\n\tthis.alphaMapSlot.copy( source.alphaMapSlot );\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n// File:src/materials/MeshPhysicalMaterial.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  reflectivity: <float>\n * }\n */\n\nTHREE.MeshPhysicalMaterial = function ( parameters ) {\n\n\tTHREE.MeshStandardMaterial.call( this );\n\n\tthis.defines = { 'PHYSICAL': '' };\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tthis.clearCoat = 0.0;\n\tthis.clearCoatRoughness = 0.0;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.MeshPhysicalMaterial.prototype = Object.create( THREE.MeshStandardMaterial.prototype );\nTHREE.MeshPhysicalMaterial.prototype.constructor = THREE.MeshPhysicalMaterial;\n\nTHREE.MeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.MeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'PHYSICAL': '' };\n\n\tthis.reflectivity = source.reflectivity;\n\n\tthis.clearCoat = source.clearCoat;\n\tthis.clearCoatRoughness = source.clearCoatRoughness;\n\n\treturn this;\n\n};\n\n// File:src/materials/MultiMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.MultiMaterial = function ( materials ) {\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.type = 'MultiMaterial';\n\n\tthis.materials = materials instanceof Array ? materials : [];\n\n\tthis.visible = true;\n\n};\n\nTHREE.MultiMaterial.prototype = {\n\n\tconstructor: THREE.MultiMaterial,\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.2,\n\t\t\t\ttype: 'material',\n\t\t\t\tgenerator: 'MaterialExporter'\n\t\t\t},\n\t\t\tuuid: this.uuid,\n\t\t\ttype: this.type,\n\t\t\tmaterials: []\n\t\t};\n\n\t\tvar materials = this.materials;\n\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n\t\t\tvar material = materials[ i ].toJSON( meta );\n\t\t\tdelete material.metadata;\n\n\t\t\toutput.materials.push( material );\n\n\t\t}\n\n\t\toutput.visible = this.visible;\n\n\t\treturn output;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar material = new this.constructor();\n\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\n\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\n\n\t\t}\n\n\t\tmaterial.visible = this.visible;\n\n\t\treturn material;\n\n\t}\n\n};\n\n// File:src/materials/PointsMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nTHREE.PointsMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.PointsMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial;\n\nTHREE.PointsMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\n// File:src/materials/ShaderMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nTHREE.ShaderMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n};\n\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\n\nTHREE.ShaderMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = THREE.UniformsUtils.clone( source.uniforms );\n\n\tthis.defines = source.defines;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nTHREE.ShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = THREE.Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = this.uniforms;\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\treturn data;\n\n};\n\n// File:src/materials/RawShaderMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.RawShaderMaterial = function ( parameters ) {\n\n\tTHREE.ShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n};\n\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\n\n// File:src/materials/SpriteMaterial.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *\tuvOffset: new THREE.Vector2(),\n *\tuvScale: new THREE.Vector2()\n * }\n */\n\nTHREE.SpriteMaterial = function ( parameters ) {\n\n\tTHREE.Material.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new THREE.Color( 0xffffff );\n\tthis.map = null;\n\n\tthis.rotation = 0;\n\n\tthis.fog = false;\n\tthis.lights = false;\n\n\tthis.setValues( parameters );\n\n};\n\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\n\nTHREE.SpriteMaterial.prototype.copy = function ( source ) {\n\n\tTHREE.Material.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.map = source.map;\n\n\tthis.rotation = source.rotation;\n\n\treturn this;\n\n};\n\n// File:src/materials/ShadowMaterial.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ShadowMaterial = function () {\n\n\tTHREE.ShaderMaterial.call( this, {\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\t\tvertexShader: THREE.ShaderChunk[ 'shadow_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'shadow_frag' ]\n\t} );\n\n\tthis.lights = true;\n\tthis.transparent = true;\n\n\tObject.defineProperties( this, {\n\t\topacity: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn this.uniforms.opacity.value;\n\t\t\t},\n\t\t\tset: function ( value ) {\n\t\t\t\tthis.uniforms.opacity.value = value;\n\t\t\t}\n\t\t}\n\t} );\n\n};\n\nTHREE.ShadowMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\nTHREE.ShadowMaterial.prototype.constructor = THREE.ShadowMaterial;\n\n// File:src/textures/Texture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.name = '';\n\tthis.sourceFile = '';\n\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\n\n\tthis.offset = new THREE.Vector2( 0, 0 );\n\tthis.repeat = new THREE.Vector2( 1, 1 );\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding :  THREE.LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n};\n\nTHREE.Texture.DEFAULT_IMAGE = undefined;\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\n\nTHREE.Texture.prototype = {\n\n\tconstructor: THREE.Texture,\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tfunction getDataURL( image ) {\n\n\t\t\tvar canvas;\n\n\t\t\tif ( image.toDataURL !== undefined ) {\n\n\t\t\t\tcanvas = image;\n\n\t\t\t} else {\n\n\t\t\t\tcanvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\t\tcanvas.width = image.width;\n\t\t\t\tcanvas.height = image.height;\n\n\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t\t} else {\n\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar output = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.4,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = THREE.Math.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: getDataURL( image )\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tmeta.textures[ this.uuid ] = output;\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== THREE.UVMapping )  return;\n\n\t\tuv.multiply( this.repeat );\n\t\tuv.add( this.offset );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase THREE.RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase THREE.RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t}\n\n};\n\nObject.assign( THREE.Texture.prototype, THREE.EventDispatcher.prototype );\n\nTHREE.TextureIdCount = 0;\n\n// File:src/textures/DepthTexture.js\n\n/**\n * @author Matt DesLauriers / @mattdesl\n */\n\nTHREE.DepthTexture = function ( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\n\n  THREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, THREE.DepthFormat, type, anisotropy );\n\n  this.image = { width: width, height: height };\n\n  this.type = type !== undefined ? type : THREE.UnsignedShortType;\n\n  this.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\n  this.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\n\n  this.flipY = false;\n  this.generateMipmaps  = false;\n\n};\n\nTHREE.DepthTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.DepthTexture.prototype.constructor = THREE.DepthTexture;\n\n// File:src/textures/CanvasTexture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CanvasTexture = function ( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTHREE.Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.needsUpdate = true;\n\n};\n\nTHREE.CanvasTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture;\n\n// File:src/textures/CubeTexture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\n\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n};\n\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\n\nObject.defineProperty( THREE.CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n// File:src/textures/CompressedTexture.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n};\n\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\n\n// File:src/textures/DataTexture.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data, width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\n\n\tthis.flipY = false;\n\tthis.generateMipmaps  = false;\n\n};\n\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\n\n// File:src/textures/VideoTexture.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.generateMipmaps = false;\n\n\tvar scope = this;\n\n\tfunction update() {\n\n\t\trequestAnimationFrame( update );\n\n\t\tif ( video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tscope.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tupdate();\n\n};\n\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\n\n// File:src/objects/Group.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Group = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Group';\n\n};\n\nTHREE.Group.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.Group\n\n} );\n\n// File:src/objects/Points.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Points = function ( geometry, material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.BufferGeometry();\n\tthis.material = material !== undefined ? material : new THREE.PointsMaterial( { color: Math.random() * 0xffffff } );\n\n};\n\nTHREE.Points.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.Points,\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new THREE.Matrix4();\n\t\tvar ray = new THREE.Ray();\n\t\tvar sphere = new THREE.Sphere();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar object = this;\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\t\t\tvar threshold = raycaster.params.Points.threshold;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\t\tvar localThresholdSq = localThreshold * localThreshold;\n\t\t\tvar position = new THREE.Vector3();\n\n\t\t\tfunction testPoint( point, index ) {\n\n\t\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\n\n\t\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\n\t\t\t\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\t\t\t\tpoint: intersectPoint.clone(),\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tobject: object\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar a = indices[ i ];\n\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\n\n\t\t\t\t\t\ttestPoint( position, a );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\n\n\t\t\t\t\t\tposition.fromArray( positions, i * 3 );\n\n\t\t\t\t\t\ttestPoint( position, i );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\n\t\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\t\ttestPoint( vertices[ i ], i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n// File:src/objects/Line.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Line = function ( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\n\t\treturn new THREE.LineSegments( geometry, material );\n\n\t}\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.BufferGeometry();\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n};\n\nTHREE.Line.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.Line,\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new THREE.Matrix4();\n\t\tvar ray = new THREE.Ray();\n\t\tvar sphere = new THREE.Sphere();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar precision = raycaster.linePrecision;\n\t\t\tvar precisionSq = precision * precision;\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\tvar vStart = new THREE.Vector3();\n\t\t\tvar vEnd = new THREE.Vector3();\n\t\t\tvar interSegment = new THREE.Vector3();\n\t\t\tvar interRay = new THREE.Vector3();\n\t\t\tvar step = this instanceof THREE.LineSegments ? 2 : 1;\n\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvar a = indices[ i ];\n\t\t\t\t\t\tvar b = indices[ i + 1 ];\n\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\t\tface: null,\n\t\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar nbVertices = vertices.length;\n\n\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n// File:src/objects/LineSegments.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LineSegments = function ( geometry, material ) {\n\n\tTHREE.Line.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n};\n\nTHREE.LineSegments.prototype = Object.assign( Object.create( THREE.Line.prototype ), {\n\n\tconstructor: THREE.LineSegments\n\n} );\n\n// File:src/objects/Mesh.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nTHREE.Mesh = function ( geometry, material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.BufferGeometry();\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.drawMode = THREE.TrianglesDrawMode;\n\n\tthis.updateMorphTargets();\n\n};\n\nTHREE.Mesh.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.Mesh,\n\n\tsetDrawMode: function ( value ) {\n\n\t\tthis.drawMode = value;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\n\n\t\tthis.drawMode = source.drawMode;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\n\n\t\t\tthis.morphTargetBase = - 1;\n\t\t\tthis.morphTargetInfluences = [];\n\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\n\n\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tgetMorphTargetIndexByName: function ( name ) {\n\n\t\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\n\n\t\t\treturn this.morphTargetDictionary[ name ];\n\n\t\t}\n\n\t\tconsole.warn( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\n\n\t\treturn 0;\n\n\t},\n\n\traycast: ( function () {\n\n\t\tvar inverseMatrix = new THREE.Matrix4();\n\t\tvar ray = new THREE.Ray();\n\t\tvar sphere = new THREE.Sphere();\n\n\t\tvar vA = new THREE.Vector3();\n\t\tvar vB = new THREE.Vector3();\n\t\tvar vC = new THREE.Vector3();\n\n\t\tvar tempA = new THREE.Vector3();\n\t\tvar tempB = new THREE.Vector3();\n\t\tvar tempC = new THREE.Vector3();\n\n\t\tvar uvA = new THREE.Vector2();\n\t\tvar uvB = new THREE.Vector2();\n\t\tvar uvC = new THREE.Vector2();\n\n\t\tvar barycoord = new THREE.Vector3();\n\n\t\tvar intersectionPoint = new THREE.Vector3();\n\t\tvar intersectionPointWorld = new THREE.Vector3();\n\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\n\n\t\t\tTHREE.Triangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\n\n\t\t\tuv1.multiplyScalar( barycoord.x );\n\t\t\tuv2.multiplyScalar( barycoord.y );\n\t\t\tuv3.multiplyScalar( barycoord.z );\n\n\t\t\tuv1.add( uv2 ).add( uv3 );\n\n\t\t\treturn uv1.clone();\n\n\t\t}\n\n\t\tfunction checkIntersection( object, raycaster, ray, pA, pB, pC, point ) {\n\n\t\t\tvar intersect;\n\t\t\tvar material = object.material;\n\n\t\t\tif ( material.side === THREE.BackSide ) {\n\n\t\t\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t\t\t} else {\n\n\t\t\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== THREE.DoubleSide, point );\n\n\t\t\t}\n\n\t\t\tif ( intersect === null ) return null;\n\n\t\t\tintersectionPointWorld.copy( point );\n\t\t\tintersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\n\n\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\t\t\treturn {\n\t\t\t\tdistance: distance,\n\t\t\t\tpoint: intersectionPointWorld.clone(),\n\t\t\t\tobject: object\n\t\t\t};\n\n\t\t}\n\n\t\tfunction checkBufferGeometryIntersection( object, raycaster, ray, positions, uvs, a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tvar intersection = checkIntersection( object, raycaster, ray, vA, vB, vC, intersectionPoint );\n\n\t\t\tif ( intersection ) {\n\n\t\t\t\tif ( uvs ) {\n\n\t\t\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint,  vA, vB, vC,  uvA, uvB, uvC );\n\n\t\t\t\t}\n\n\t\t\t\tintersection.face = new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) );\n\t\t\t\tintersection.faceIndex = a;\n\n\t\t\t}\n\n\t\t\treturn intersection;\n\n\t\t}\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tvar geometry = this.geometry;\n\t\t\tvar material = this.material;\n\t\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t\tif ( material === undefined ) return;\n\n\t\t\t// Checking boundingSphere distance to ray\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\tsphere.copy( geometry.boundingSphere );\n\t\t\tsphere.applyMatrix4( matrixWorld );\n\n\t\t\tif ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\n\n\t\t\t//\n\n\t\t\tinverseMatrix.getInverse( matrixWorld );\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\n\n\t\t\t// Check boundingBox before continuing\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tif ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t\t}\n\n\t\t\tvar uvs, intersection;\n\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\t\tvar a, b, c;\n\t\t\t\tvar index = geometry.index;\n\t\t\t\tvar attributes = geometry.attributes;\n\t\t\t\tvar positions = attributes.position.array;\n\n\t\t\t\tif ( attributes.uv !== undefined ) {\n\n\t\t\t\t\tuvs = attributes.uv.array;\n\n\t\t\t\t}\n\n\t\t\t\tif ( index !== null ) {\n\n\t\t\t\t\tvar indices = index.array;\n\n\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\n\n\t\t\t\t\t\ta = indices[ i ];\n\t\t\t\t\t\tb = indices[ i + 1 ];\n\t\t\t\t\t\tc = indices[ i + 2 ];\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indices buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 9 ) {\n\n\t\t\t\t\t\ta = i / 3;\n\t\t\t\t\t\tb = a + 1;\n\t\t\t\t\t\tc = a + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, raycaster, ray, positions, uvs, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.index = a; // triangle number in positions buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\t\tvar fvA, fvB, fvC;\n\t\t\t\tvar isFaceMaterial = material instanceof THREE.MultiMaterial;\n\t\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\n\n\t\t\t\tvar vertices = geometry.vertices;\n\t\t\t\tvar faces = geometry.faces;\n\t\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tvar face = faces[ f ];\n\t\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\n\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\n\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\n\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\n\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\n\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\n\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\n\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvA.add( fvA );\n\t\t\t\t\t\tvB.add( fvB );\n\t\t\t\t\t\tvC.add( fvC );\n\n\t\t\t\t\t\tfvA = vA;\n\t\t\t\t\t\tfvB = vB;\n\t\t\t\t\t\tfvC = vC;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection = checkIntersection( this, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tif ( uvs ) {\n\n\t\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t\tuvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t\tuvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t\tuvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\t\tintersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tintersection.face = face;\n\t\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n// File:src/objects/Bone.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.Bone = function ( skin ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Bone';\n\n\tthis.skin = skin;\n\n};\n\nTHREE.Bone.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.Bone,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\n\n\t\tthis.skin = source.skin;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n// File:src/objects/Skeleton.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\n\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\n\n\tthis.identityMatrix = new THREE.Matrix4();\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\n\t// create a bone texture or an array of floats\n\n\tif ( this.useVertexTexture ) {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\tsize = THREE.Math.nextPowerOfTwo( Math.ceil( size ) );\n\t\tsize = Math.max( size, 4 );\n\n\t\tthis.boneTextureWidth = size;\n\t\tthis.boneTextureHeight = size;\n\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\n\n\t} else {\n\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\n\n\t}\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n};\n\nObject.assign( THREE.Skeleton.prototype, {\n\n\tcalculateInverses: function () {\n\n\t\tthis.boneInverses = [];\n\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\tvar inverse = new THREE.Matrix4();\n\n\t\t\tif ( this.bones[ b ] ) {\n\n\t\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t},\n\n\tpose: function () {\n\n\t\tvar bone;\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\tbone = this.bones[ b ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\tbone = this.bones[ b ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent instanceof THREE.Bone ) {\n\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: ( function () {\n\n\t\tvar offsetMatrix = new THREE.Matrix4();\n\n\t\treturn function update() {\n\n\t\t\t// flatten bone matrices to array\n\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\n\n\t\t\t\t// compute the offset between the current and the original transform\n\n\t\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\n\n\t\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\n\t\t\t\toffsetMatrix.toArray( this.boneMatrices, b * 16 );\n\n\t\t\t}\n\n\t\t\tif ( this.useVertexTexture ) {\n\n\t\t\t\tthis.boneTexture.needsUpdate = true;\n\n\t\t\t}\n\n\t\t};\n\n\t} )(),\n\n\tclone: function () {\n\n\t\treturn new THREE.Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\n\n\t}\n\n} );\n\n// File:src/objects/SkinnedMesh.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = \"attached\";\n\tthis.bindMatrix = new THREE.Matrix4();\n\tthis.bindMatrixInverse = new THREE.Matrix4();\n\n\t// init bones\n\n\t// TODO: remove bone creation as there is no reason (other than\n\t// convenience) for THREE.SkinnedMesh to do this.\n\n\tvar bones = [];\n\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\n\n\t\tvar bone, gbone;\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tbone = new THREE.Bone( this );\n\t\t\tbones.push( bone );\n\n\t\t\tbone.name = gbone.name;\n\t\t\tbone.position.fromArray( gbone.pos );\n\t\t\tbone.quaternion.fromArray( gbone.rotq );\n\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\n\n\t\t}\n\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\n\n\t\t\tgbone = this.geometry.bones[ b ];\n\n\t\t\tif ( gbone.parent !== - 1 && gbone.parent !== null &&\n\t\t\t\t\tbones[ gbone.parent ] !== undefined ) {\n\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\n\n\t\t\t} else {\n\n\t\t\t\tthis.add( bones[ b ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.normalizeSkinWeights();\n\n\tthis.updateMatrixWorld( true );\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\n\n};\n\n\nTHREE.SkinnedMesh.prototype = Object.assign( Object.create( THREE.Mesh.prototype ), {\n\n\tconstructor: THREE.SkinnedMesh,\n\n\tbind: function( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n\t},\n\n\tpose: function () {\n\n\t\tthis.skeleton.pose();\n\n\t},\n\n\tnormalizeSkinWeights: function () {\n\n\t\tif ( this.geometry instanceof THREE.Geometry ) {\n\n\t\t\tfor ( var i = 0; i < this.geometry.skinWeights.length; i ++ ) {\n\n\t\t\t\tvar sw = this.geometry.skinWeights[ i ];\n\n\t\t\t\tvar scale = 1.0 / sw.lengthManhattan();\n\n\t\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\t\tsw.multiplyScalar( scale );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsw.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( this.geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar vec = new THREE.Vector4();\n\n\t\t\tvar skinWeight = this.geometry.attributes.skinWeight;\n\n\t\t\tfor ( var i = 0; i < skinWeight.count; i ++ ) {\n\n\t\t\t\tvec.x = skinWeight.getX( i );\n\t\t\t\tvec.y = skinWeight.getY( i );\n\t\t\t\tvec.z = skinWeight.getZ( i );\n\t\t\t\tvec.w = skinWeight.getW( i );\n\n\t\t\t\tvar scale = 1.0 / vec.lengthManhattan();\n\n\t\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\t\tvec.multiplyScalar( scale );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvec.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t\t}\n\n\t\t\t\tskinWeight.setXYZW( i, vec.x, vec.y, vec.z, vec.w );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMatrixWorld: function( force ) {\n\n\t\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\n\n\t\tif ( this.bindMode === \"attached\" ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t\t} else if ( this.bindMode === \"detached\" ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t},\n\n\tclone: function() {\n\n\t\treturn new this.constructor( this.geometry, this.material, this.skeleton.useVertexTexture ).copy( this );\n\n\t}\n\n} );\n\n// File:src/objects/LOD.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.LOD = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n};\n\n\nTHREE.LOD.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.LOD,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Object3D.prototype.copy.call( this, source, false );\n\n\t\tvar levels = source.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance ) {\n\n\t\tif ( distance === undefined ) distance = 0;\n\n\t\tdistance = Math.abs( distance );\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn levels[ i - 1 ].object;\n\n\t},\n\n\traycast: ( function () {\n\n\t\tvar matrixPosition = new THREE.Vector3();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t};\n\n\t}() ),\n\n\tupdate: function () {\n\n\t\tvar v1 = new THREE.Vector3();\n\t\tvar v2 = new THREE.Vector3();\n\n\t\treturn function update( camera ) {\n\n\t\t\tvar levels = this.levels;\n\n\t\t\tif ( levels.length > 1 ) {\n\n\t\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\t\tvar distance = v1.distanceTo( v2 );\n\n\t\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.levels = [];\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\n// File:src/objects/Sprite.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Sprite = function ( material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Sprite';\n\n\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\n\n};\n\nTHREE.Sprite.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.Sprite,\n\n\traycast: ( function () {\n\n\t\tvar matrixPosition = new THREE.Vector3();\n\n\t\treturn function raycast( raycaster, intersects ) {\n\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\n\t\t\tvar guessSizeSq = this.scale.x * this.scale.y / 4;\n\n\t\t\tif ( distanceSq > guessSizeSq ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tintersects.push( {\n\n\t\t\t\tdistance: Math.sqrt( distanceSq ),\n\t\t\t\tpoint: this.position,\n\t\t\t\tface: null,\n\t\t\t\tobject: this\n\n\t\t\t} );\n\n\t\t};\n\n\t}() ),\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.material ).copy( this );\n\n\t}\n\n} );\n\n// File:src/objects/LensFlare.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.lensFlares = [];\n\n\tthis.positionScreen = new THREE.Vector3();\n\tthis.customUpdateCallback = undefined;\n\n\tif ( texture !== undefined ) {\n\n\t\tthis.add( texture, size, distance, blending, color );\n\n\t}\n\n};\n\nTHREE.LensFlare.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.LensFlare,\n\n\tcopy: function ( source ) {\n\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\n\n\t\tthis.positionScreen.copy( source.positionScreen );\n\t\tthis.customUpdateCallback = source.customUpdateCallback;\n\n\t\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\n\n\t\t\tthis.lensFlares.push( source.lensFlares[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( texture, size, distance, blending, color, opacity ) {\n\n\t\tif ( size === undefined ) size = - 1;\n\t\tif ( distance === undefined ) distance = 0;\n\t\tif ( opacity === undefined ) opacity = 1;\n\t\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\n\t\tif ( blending === undefined ) blending = THREE.NormalBlending;\n\n\t\tdistance = Math.min( distance, Math.max( 0, distance ) );\n\n\t\tthis.lensFlares.push( {\n\t\t\ttexture: texture,\t// THREE.Texture\n\t\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\n\t\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\n\t\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\n\t\t\tscale: 1, \t\t// scale\n\t\t\trotation: 0, \t\t// rotation\n\t\t\topacity: opacity,\t// opacity\n\t\t\tcolor: color,\t\t// color\n\t\t\tblending: blending\t// blending\n\t\t} );\n\n\t},\n\n\t/*\n\t * Update lens flares update positions on all flares based on the screen position\n\t * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\n\t */\n\n\tupdateLensFlares: function () {\n\n\t\tvar f, fl = this.lensFlares.length;\n\t\tvar flare;\n\t\tvar vecX = - this.positionScreen.x * 2;\n\t\tvar vecY = - this.positionScreen.y * 2;\n\n\t\tfor ( f = 0; f < fl; f ++ ) {\n\n\t\t\tflare = this.lensFlares[ f ];\n\n\t\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\n\t\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\n\n\t\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\n\t\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\n\n\t\t}\n\n\t}\n\n} );\n\n// File:src/scenes/Scene.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Scene = function () {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.fog = null;\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n};\n\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.Scene.prototype.constructor = THREE.Scene;\n\nTHREE.Scene.prototype.copy = function ( source, recursive ) {\n\n\tTHREE.Object3D.prototype.copy.call( this, source, recursive );\n\n\tif ( source.background !== null ) this.background = source.background.clone();\n\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\tthis.autoUpdate = source.autoUpdate;\n\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\treturn this;\n\n};\n\n// File:src/scenes/Fog.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Fog = function ( color, near, far ) {\n\n\tthis.name = '';\n\n\tthis.color = new THREE.Color( color );\n\n\tthis.near = ( near !== undefined ) ? near : 1;\n\tthis.far = ( far !== undefined ) ? far : 1000;\n\n};\n\nTHREE.Fog.prototype.clone = function () {\n\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\n\n};\n\n// File:src/scenes/FogExp2.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.FogExp2 = function ( color, density ) {\n\n\tthis.name = '';\n\n\tthis.color = new THREE.Color( color );\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n};\n\nTHREE.FogExp2.prototype.clone = function () {\n\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\n\n};\n\n// File:src/renderers/shaders/ShaderChunk.js\n\nTHREE.ShaderChunk = {};\n\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphamap_fragment' ] =\"#ifdef USE_ALPHAMAP\\n\\n#if defined( TEXTURE_SLOTS )\\n\\tvec2 alphaUv = alphaMapUV();\\n#else\\n\\tvec2 alphaUv = vUv;\\n#endif\\n\\n\\tdiffuseColor.a *= alphaMapTexelTransform( texture2D( alphaMap, alphaUv ) ).g;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphamap_pars_fragment' ] =\"#if ! defined( TEXTURE_SLOTS )\\n\\t#ifdef USE_ALPHAMAP\\n\\n\\t\\tuniform sampler2D alphaMap;\\n\\n\\t#endif\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\n\nTHREE.ShaderChunk[ 'alphatest_fragment' ] =\"#ifdef ALPHATEST\\n\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\n\nTHREE.ShaderChunk[ 'aomap_fragment' ] =\"#ifdef USE_AOMAP\\n\\n#if defined( TEXTURE_SLOTS )\\n\\tvec2 aoUv = aoMapUV();\\n#else\\n\\tvec2 aoUv = vUv2;\\n#endif\\n\\n\\tfloat ambientOcclusion = ( aoMapTexelTransform( texture2D( aoMap, aoUv ) ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'aomap_pars_fragment' ] =\"#ifdef USE_AOMAP\\n\\n#if ! defined( TEXTURE_SLOTS )\\n\\tuniform sampler2D aoMap;\\n#endif\\n\\n\\tuniform float aoMapIntensity;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\n\nTHREE.ShaderChunk[ 'begin_vertex' ] =\"\\nvec3 transformed = vec3( position );\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'beginnormal_vertex' ] =\"\\nvec3 objectNormal = vec3( normal );\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/bsdfs.glsl\n\nTHREE.ShaderChunk[ 'bsdfs' ] =\"bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\\n\\n\\treturn any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\\n\\n}\\n\\n/*float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\n\\t\\tif( decayExponent > 0.0 ) {\\n\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\n\\t\\t\\t// based upon Frostbite 3 Moving to Physically-based Rendering\\n\\t\\t\\t// page 32, equation 26: E[window1]\\n\\t\\t\\t// http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr_v2.pdf\\n\\t\\t\\t// this is intended to be used on spot and point lights who are represented as luminous intensity\\n\\t\\t\\t// but who must be converted to luminous irradiance for surface lighting calculation\\n\\t\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n\\n#else\\n\\n\\t\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\n#endif\\n\\n\\t\\t}\\n\\n\\t\\treturn 1.0;\\n}*/\\n\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\n\\tif ( decayExponent > 0.0 && cutoffDistance > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\telse if ( decayExponent < 0.0 ) {\\n\\t\\t// this is based upon UE4 light fall as described on page 11 of:\\n\\t\\t//  https://de45xmedrsdbp.cloudfront.net/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\\n\\t\\tfloat maxDistanceCutoffFactor = 1.0;\\n\\t\\tif( cutoffDistance > 0.0 ) {\\n\\t\\t\\tmaxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t}\\n\\t\\tfloat distanceFalloff = 1.0 / ( pow2( lightDistance ) + 1.0 );\\n\\n\\t\\treturn maxDistanceCutoffFactor * distanceFalloff;\\n\\t}\\n\\telse {\\n\\t\\treturn 1.0;\\n\\t}\\n}\\n\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n\\n} // validated\\n\\n\\nfloat F_Schlick( const in float specular, const in float dotLH ) {\\n\\n\\t// Original approximation by Christophe Schlick '94\\n\\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\\n\\n\\t// Optimized variant (presented by Epic at SIGGRAPH '13)\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\n\\treturn ( 1.0 - specular ) * fresnel + specular;\\n\\n} // validated\\n\\n\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\n\\t// Original approximation by Christophe Schlick '94\\n\\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\\n\\n\\t// Optimized variant (presented by Epic at SIGGRAPH '13)\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n\\n} // validated\\n\\n\\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\\n// alpha is \\\"roughness squared\\\" in Disney’s reparameterization\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\n\\t// geometry term = G(l)⋅G(v) / 4(n⋅l)(n⋅v)\\n\\n\\tfloat a2 = pow2( alpha );\\n\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\n\\treturn 1.0 / ( gl * gv );\\n\\n} // validated\\n\\n// from page 12, listing 2 of http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr_v2.pdf\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\n\\tfloat a2 = pow2( alpha );\\n\\n\\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\n\\n\\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\\n// alpha is \\\"roughness squared\\\" in Disney’s reparameterization\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\n\\tfloat a2 = pow2( alpha );\\n\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\\n\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n\\n}\\n \\n\\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\n\\tfloat alpha = pow2( roughness ); // UE4's roughness\\n\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\n\\tfloat dotNL = clamp( dot( geometry.normal, incidentLight.direction ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\\n\\tfloat dotNV = clamp( dot( geometry.normal, geometry.viewDir ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\\n\\tfloat dotNH = clamp( dot( geometry.normal, halfDir ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\n\\treturn F * ( G * D );\\n\\n} // validated\\n\\nfloat BRDF_ClearCoat_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttenuation ) {\\n\\n\\tfloat alpha = pow2( roughness ); // UE4's roughness\\n\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\n\\tfloat dotNL = clamp( dot( geometry.normal, incidentLight.direction ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\\n\\tfloat dotNV = clamp( dot( geometry.normal, geometry.viewDir ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\\n\\tfloat dotNH = clamp( dot( geometry.normal, halfDir ), EPSILON, 1.0 ); // avoid artifacts from divides by zero\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\n\\tfloat F = F_Schlick( specular, dotLH );\\n\\n\\tlayerAttenuation = F;\\n\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\n\\treturn F * ( G * D );\\n\\n}\\n\\n\\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\n\\tvec4 r = roughness * c0 + c1;\\n\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\n\\treturn specularColor * AB.x + AB.y;\\n\\n} // validated\\n\\n\\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\\nfloat BRDF_ClearCoat_GGX_Environment( const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttention ) {\\n\\n\\tvec3 incidentLightDirection = reflect( geometry.viewDir, geometry.normal );\\n\\tvec3 halfDir = normalize( incidentLightDirection + geometry.viewDir );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLightDirection, halfDir ) );\\n\\n\\tlayerAttention = F_Schlick( specular, dotLH );\\n\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\n\\tvec4 r = roughness * c0 + c1;\\n\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\n\\treturn specular * AB.x + AB.y;\\n\\n} // validated\\n\\n\\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\\n\\n\\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\\n\\treturn 0.25;\\n\\n}\\n\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n\\n}\\n\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\n\\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\n\\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\\n\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\n\\treturn F * ( G * D );\\n\\n} // validated\\n\\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\n\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment' ] =\"#ifdef USE_BUMPMAP\\n\\n#if ! defined( TEXTURE_SLOTS )\\n\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\n#endif\\n\\n\\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\\tvec2 dHdxy_fwd() {\\n\\n#if defined( TEXTURE_SLOTS )\\n\\t\\tvec2 bumpUv = bumpMapUV();\\n#else\\n\\t\\tvec2 bumpUv = vUv;\\n#endif\\n\\n\\t\\tvec2 dSTdx = dFdx( bumpUv );\\n\\t\\tvec2 dSTdy = dFdy( bumpUv );\\n\\n\\t\\tfloat Hll = bumpMapTexelTransform( texture2D( bumpMap, bumpUv ) ).x;\\n\\t\\tfloat dBx = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdx ) ).x - Hll;\\n\\t\\tfloat dBy = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdy ) ).x - Hll;\\n\\n\\t\\treturn vec2( dBx, dBy );\\n\\n\\t}\\n\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\\t\\tvec3 vSigmaX = dFdx( surf_pos );\\n\\t\\tvec3 vSigmaY = dFdy( surf_pos );\\n\\t\\tvec3 vN = surf_norm;\\t\\t// normalized\\n\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\\t}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl\n\nTHREE.ShaderChunk[ 'clipping_planes_fragment' ] =\"#if NUM_CLIPPING_PLANES > 0\\n\\n\\tfor ( int i = 0; i < NUM_CLIPPING_PLANES; ++ i ) {\\n\\n\\t\\tvec4 plane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\n\\t}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'clipping_planes_pars_fragment' ] =\"#if NUM_CLIPPING_PLANES > 0\\n\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'clipping_planes_pars_vertex' ] =\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl\n\nTHREE.ShaderChunk[ 'clipping_planes_vertex' ] =\"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\n\nTHREE.ShaderChunk[ 'color_fragment' ] =\"#ifdef USE_COLOR\\n\\n\\tdiffuseColor.rgb *= vColor;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'color_pars_fragment' ] =\"#ifdef USE_COLOR\\n\\n\\tvarying vec3 vColor;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'color_pars_vertex' ] =\"#ifdef USE_COLOR\\n\\n\\tvarying vec3 vColor;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\n\nTHREE.ShaderChunk[ 'color_vertex' ] =\"#ifdef USE_COLOR\\n\\n\\tvColor.xyz = color.xyz;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/common.glsl\n\nTHREE.ShaderChunk[ 'common' ] =\"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 0.00001 // required for mediump\\n\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\n\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\n\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\n\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\n\\n\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n\\n}\\n\\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n\\n}\\n\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\n\\treturn - distance * planeNormal + point;\\n\\n}\\n\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n\\n}\\n\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl\n\nTHREE.ShaderChunk[ 'cube_uv_reflection_fragment' ] =\"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\n#define cubeUV_textureSize (1024.0)\\n\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction); \\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\n\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\t// Clamp the value to the max mip level counts. hard coded to 6 mips\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\n\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\t// float powScale = exp2(roughnessLevel + mipLevel);\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\n\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\n\\t// round to nearest mipmap if we are not interpolating.\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\n\\t// Tri linear interpolation.\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\n\\tvec4 result = mix(color10, color20, t);\\n\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'defaultnormal_vertex' ] =\"#ifdef FLIP_SIDED\\n\\n\\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'displacementmap_vertex' ] =\"#ifdef USE_DISPLACEMENTMAP\\n\\n\\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'displacementmap_pars_vertex' ] =\"#ifdef USE_DISPLACEMENTMAP\\n\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\n\nTHREE.ShaderChunk[ 'emissivemap_fragment' ] =\"#ifdef USE_EMISSIVEMAP\\n\\n#if defined( TEXTURE_SLOTS )\\n\\tvec2 emissiveUv = emissiveMapUV();\\n#else\\n\\tvec2 emissiveUv = vUv;\\n#endif\\n\\n\\tvec4 emissiveColor = texture2D( emissiveMap, emissiveUv );\\n\\n\\temissiveColor.rgb = emissiveMapTexelTransform( emissiveMapTexelToLinear( emissiveColor ) ).rgb;\\n\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'emissivemap_pars_fragment' ] =\"#if ! defined( TEXTURE_SLOTS )\\n\\t#ifdef USE_EMISSIVEMAP\\n\\n\\t\\tuniform sampler2D emissiveMap;\\n\\n\\t#endif\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'encodings_pars_fragment' ] =\"// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\\n\\nvec4 LinearToLinear( in vec4 value ) {\\n  return value;\\n}\\n\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\n\\nvec4 sRGBToLinear( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\n\\nvec4 RGBEToLinear( in vec4 value ) {\\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n  float maxComponent = max( max( value.r, value.g ), value.b );\\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\\n}\\n\\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n  float maxRGB = max( value.x, max( value.g, value.b ) );\\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n  M            = ceil( M * 255.0 ) / 255.0;\\n  return vec4( value.rgb / ( M * maxRange ), M );\\n}\\n\\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n    float maxRGB = max( value.x, max( value.g, value.b ) );\\n    float D      = max( maxRange / maxRGB, 1.0 );\\n    D            = min( floor( D ) / 255.0, 1.0 );\\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\n\\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\\n\\n// M matrix, for encoding\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n  vec4 vResult;\\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n  vResult.w = fract(Le);\\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n  return vResult;\\n}\\n\\n// Inverse M matrix, for decoding\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n  float Le = value.z * 255.0 + value.w;\\n  vec3 Xp_Y_XYZp;\\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n  return vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/encodings_fragment.glsl\n\nTHREE.ShaderChunk[ 'encodings_fragment' ] =\"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'envmap_fragment' ] =\"#ifdef USE_ENVMAP\\n\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\\t\\t// Transforming Normal Vectors with the Inverse Transformation\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\\t\\t#else\\n\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\\t\\t#endif\\n\\n\\t#else\\n\\n\\t\\tvec3 reflectVec = vReflect;\\n\\n\\t#endif\\n\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\n\\t\\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\n\\t\\tvec2 sampleUV;\\n\\t\\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\\t\\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\n\\t\\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\n\\t#endif\\n\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'envmap_pars_fragment' ] =\"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntenstiy;\\n#endif\\n\\n#ifdef USE_ENVMAP\\n\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'envmap_pars_vertex' ] =\"#ifdef USE_ENVMAP\\n\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\n\\t#else\\n\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'envmap_vertex' ] =\"#ifdef USE_ENVMAP\\n\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\n\\t#else\\n\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\\t\\t#else\\n\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\\t\\t#endif\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\n\nTHREE.ShaderChunk[ 'fog_fragment' ] =\"#ifdef USE_FOG\\n\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\\t\\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\\t#else\\n\\n\\t\\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\\t#endif\\n\\n\\t#ifdef FOG_EXP2\\n\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\\n\\t#else\\n\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\\t#endif\\n\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'fog_pars_fragment' ] =\"#ifdef USE_FOG\\n\\n\\tuniform vec3 fogColor;\\n\\n\\t#ifdef FOG_EXP2\\n\\n\\t\\tuniform float fogDensity;\\n\\n\\t#else\\n\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'lightmap_fragment' ] =\"#ifdef USE_LIGHTMAP\\n\\n#if defined( TEXTURE_SLOTS )\\n\\tvec2 lightUv = lightMapUV();\\n#else\\n\\tvec2 lightUv = vUv2;\\n#endif\\n\\n\\treflectedLight.indirectDiffuse += PI * emissiveMapTexelTransform( texture2D( lightMap, lightUv ) ).xyz; // factor of PI should not be present; included here to prevent breakage\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'lightmap_pars_fragment' ] =\"#if ! defined( TEXTURE_SLOTS )\\n\\t#ifdef USE_LIGHTMAP\\n\\n\\t\\tuniform sampler2D lightMap;\\n\\t\\tuniform float lightMapIntensity;\\n\\n\\t#endif\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\n\nTHREE.ShaderChunk[ 'lights_lambert_vertex' ] =\"vec3 diffuse = vec3( 1.0 );\\n\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\n\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\n\\nvLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\n\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n\\n#if NUM_POINT_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#endif\\n\\n\\t}\\n\\n#endif\\n\\n#if NUM_SPOT_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#endif\\n\\t}\\n\\n#endif\\n\\n#if NUM_DIR_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\n\\t\\t#endif\\n\\n\\t}\\n\\n#endif\\n\\n#if NUM_HEMI_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\n\\t\\t#endif\\n\\n\\t}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_pars.glsl\n\nTHREE.ShaderChunk[ 'lights_pars' ] =\"uniform vec3 ambientLightColor;\\n\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\n\\tvec3 irradiance = ambientLightColor;\\n\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\tirradiance *= PI;\\n\\n\\t#endif\\n\\n\\treturn irradiance;\\n\\n}\\n\\n#if NUM_DIR_LIGHTS > 0\\n\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tvec3 shadowCameraFovNearFar;\\n\\t};\\n\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\n\\t}\\n\\n#endif\\n\\n\\n#if NUM_POINT_LIGHTS > 0\\n\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\n\\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.direction = lVector / lightDistance;\\n\\n\\n\\t\\tif ( testLightInRange( lightDistance, pointLight.distance ) ) {\\n\\n\\t\\t\\tdirectLight.color = pointLight.color;\\n\\t\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\n\\t\\t\\tdirectLight.visible = true;\\n\\n\\t\\t} else {\\n\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\n\\t\\t}\\n\\n\\t}\\n\\n#endif\\n\\n\\n#if NUM_SPOT_LIGHTS > 0\\n\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tvec3 shadowCameraFovNearFar;\\n\\t};\\n\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\n\\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.direction = lVector / lightDistance;\\n\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\n\\t\\tif ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\\n\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\n\\t\\t\\tdirectLight.visible = true;\\n\\n\\t\\t} else {\\n\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\n\\t\\t}\\n\\n\\t}\\n\\n#endif\\n\\n\\n#if NUM_HEMI_LIGHTS > 0\\n\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\t\\tirradiance *= PI;\\n\\n\\t\\t#endif\\n\\n\\t\\treturn irradiance;\\n\\n\\t}\\n\\n#endif\\n\\n\\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\n\\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\n\\t\\t#include <normal_flip>\\n\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\n\\t\\t\\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\n\\t\\t\\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\\n\\t\\t\\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\\n\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\n\\t\\t\\t#else\\n\\n\\t\\t\\t\\t// force the bias high to get the last LOD level as it is the most blurred.\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\n\\t\\t\\t#endif\\n\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\n\\t\\t\\tvec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\n\\t\\t#else\\n\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\n\\t\\t#endif\\n\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\n\\t}\\n\\n\\t// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\n\\t\\t//float envMapWidth = pow( 2.0, maxMIPLevelScalar );\\n\\t\\t//float desiredMIPLevel = log2( envMapWidth * sqrt( 3.0 ) ) - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\n\\t\\t// clamp to allowable LOD ranges.\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\n\\t}\\n\\n\\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\n\\t\\t#else\\n\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\n\\t\\t#endif\\n\\n\\t\\t#include <normal_flip>\\n\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\n\\t\\t\\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\n\\t\\t\\t#else\\n\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\n\\t\\t\\t#endif\\n\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\n\\t\\t\\tvec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent) );\\n\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\\t\\t\\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\n\\t\\t\\t#else\\n\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\n\\t\\t\\t#endif\\n\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\n\\t\\t\\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\n\\t\\t\\t#else\\n\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\n\\t\\t\\t#endif\\n\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\n\\t\\t#endif\\n\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\n\\t}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_fragment' ] =\"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment' ] =\"varying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n\\nstruct BlinnPhongMaterial {\\n\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n\\n};\\n\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\tirradiance *= PI; // punctual light\\n\\n\\t#endif\\n\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n\\n}\\n\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\n}\\n\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n\\n#define Material_LightProbeLOD( material )\\t(0)\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_physical_fragment' ] =\"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\n\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'lights_physical_pars_fragment' ] =\"struct PhysicalMaterial {\\n\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n\\n};\\n\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\n\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\tirradiance *= PI; // punctual light\\n\\n\\t#endif\\n\\n\\tvec3 specularRadiance = irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\n\\t#ifndef STANDARD\\n\\n\\t\\tfloat layerAttention;\\n\\t\\tvec3 clearCoatSpecularRadiance = irradiance * BRDF_ClearCoat_GGX( directLight, geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\\n\\n\\t\\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\\n\\t\\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\\n\\n\\t#endif\\n\\n\\treflectedLight.directSpecular += specularRadiance;\\n\\treflectedLight.directDiffuse += diffuseRadiance;\\n\\n\\n}\\n\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\n\\t#ifndef STANDARD\\n\\n\\t\\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\\n\\n\\t#endif\\n\\n\\treflectedLight.indirectDiffuse += diffuseRadiance;\\n\\n}\\n\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\n\\tvec3 specularRadiance = radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\n\\t#ifndef STANDARD\\n\\n\\t\\tfloat layerAttention;\\n\\t\\tvec3 clearCoatSpecularRadiance = clearCoatRadiance * BRDF_ClearCoat_GGX_Environment( geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\\n\\n\\t\\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\\n\\n\\t#endif\\n\\n\\treflectedLight.indirectSpecular += specularRadiance;\\n\\n}\\n\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\n\\n// ref: http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr_v2.pdf\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/lights_template.glsl\n\nTHREE.ShaderChunk[ 'lights_template' ] =\"//\\n// This is a template that can be used to light a material, it uses pluggable RenderEquations (RE)\\n//   for specific lighting scenarios.\\n//\\n// Instructions for use:\\n//  - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\\n//  - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\\n//  - Create a material parameter that is to be passed as the third parameter to your lighting functions.\\n//\\n// TODO:\\n//  - Add area light support.\\n//  - Add sphere light support.\\n//  - Add diffuse light probe (irradiance cubemap) support.\\n//\\n\\nGeometricContext geometry;\\n\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\n\\nIncidentLight directLight;\\n\\n#ifdef USE_SHADOWMAP\\n\\tinitShadows();\\n#endif\\n\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\n\\tPointLight pointLight;\\n\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\n\\t\\tpointLight = pointLights[ i ];\\n\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\n\\t}\\n\\n#endif\\n\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\n\\tSpotLight spotLight;\\n\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\n\\t\\tspotLight = spotLights[ i ];\\n\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, spotLight.shadowCameraFovNearFar, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\n\\t}\\n\\n#endif\\n\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\n\\tDirectionalLight directionalLight;\\n\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vec3( PI / 6.0, 0.5, 500.0 ), vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\n\\t}\\n\\n#endif\\n\\n#if defined( RE_IndirectDiffuse )\\n\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\n\\t#ifdef USE_LIGHTMAP\\n\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\n\\t\\t\\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\\n\\n\\t\\t#endif\\n\\n\\t\\tirradiance += lightMapIrradiance;\\n\\n\\t#endif\\n\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\n\\t\\t}\\n\\n\\t#endif\\n\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\n\\t\\t// TODO, replace 8 with the real maxMIPLevel\\n\\t \\tirradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, 8 );\\n\\n\\t#endif\\n\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n\\n#endif\\n\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\n\\t// TODO, replace 8 with the real maxMIPLevel\\n\\tvec3 radiance = getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry, Material_BlinnShininessExponent( material ), 8 );\\n\\n\\t#ifndef STANDARD\\n\\t\\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\\n\\t#else\\n\\t\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n\\t#endif\\n\\t\\t\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_fragment' ] =\"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment' ] =\"#ifdef USE_LOGDEPTHBUF\\n\\n\\tuniform float logDepthBufFC;\\n\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\\t\\tvarying float vFragDepth;\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex' ] =\"#ifdef USE_LOGDEPTHBUF\\n\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\\t\\tvarying float vFragDepth;\\n\\n\\t#endif\\n\\n\\tuniform float logDepthBufFC;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\n\nTHREE.ShaderChunk[ 'logdepthbuf_vertex' ] =\"#ifdef USE_LOGDEPTHBUF\\n\\n\\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\n\\t#else\\n\\n\\t\\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_fragment' ] =\"#ifdef USE_MAP\\n\\n#if defined( TEXTURE_SLOTS )\\n\\tvec2 mapUv = mapUV();\\n#else\\n\\tvec2 mapUv = vUv;\\n#endif\\n\\n\\tvec4 texelColor = texture2D( map, mapUv );\\n\\n\\ttexelColor = mapTexelTransform( mapTexelToLinear( texelColor ) );\\n\\tdiffuseColor *= texelColor;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_pars_fragment' ] =\"#if ! defined( TEXTURE_SLOTS )\\n\\t#ifdef USE_MAP\\n\\n\\t\\tuniform sampler2D map;\\n\\n\\t#endif\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_particle_fragment' ] =\"#ifdef USE_MAP\\n\\n\\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'map_particle_pars_fragment' ] =\"#ifdef USE_MAP\\n\\n\\tuniform vec4 offsetRepeat;\\n\\tuniform sampler2D map;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'metalnessmap_fragment' ] =\"float metalnessFactor = metalness;\\n\\n#ifdef USE_METALNESSMAP\\n\\n\\t#if defined( TEXTURE_SLOTS )\\n\\t\\tvec2 metalnessUv = metalnessMapUV();\\n\\t#else\\n\\t\\tvec2 metalnessUv = vUv;\\n\\t#endif\\n\\n\\tvec4 texelMetalness = metalnessMapTexelTransform( texture2D( metalnessMap, metalnessUv ) );\\n\\tmetalnessFactor *= texelMetalness.r;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'metalnessmap_pars_fragment' ] =\"#if ! defined( TEXTURE_SLOTS )\\n\\t#ifdef USE_METALNESSMAP\\n\\n\\t\\tuniform sampler2D metalnessMap;\\n\\n\\t#endif\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphnormal_vertex' ] =\"#ifdef USE_MORPHNORMALS\\n\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex' ] =\"#ifdef USE_MORPHTARGETS\\n\\n\\t#ifndef USE_MORPHNORMALS\\n\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\n\\t#else\\n\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\n\\t#endif\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\n\nTHREE.ShaderChunk[ 'morphtarget_vertex' ] =\"#ifdef USE_MORPHTARGETS\\n\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\\t#ifndef USE_MORPHNORMALS\\n\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/normal_flip.glsl\n\nTHREE.ShaderChunk[ 'normal_flip' ] =\"#ifdef DOUBLE_SIDED\\n\\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n#else\\n\\tfloat flipNormal = 1.0;\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/normal_fragment.glsl\n\nTHREE.ShaderChunk[ 'normal_fragment' ] =\"#ifdef FLAT_SHADED\\n\\n\\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\\n\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n\\n#else\\n\\n\\tvec3 normal = normalize( vNormal ) * flipNormal;\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'normalmap_pars_fragment' ] =\"#ifdef USE_NORMALMAP\\n\\n\\t#if ! defined( TEXTURE_SLOTS )\\n\\t\\tuniform sampler2D normalMap;\\n\\t#endif\\n\\t\\tuniform vec2 normalScale;\\n\\n\\t// Per-Pixel Tangent Space Normal Mapping\\n\\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\\t\\t#if defined( TEXTURE_SLOTS )\\n\\t\\t\\tvec2 normalUv = normalMapUV();\\n\\t\\t#else\\n\\t\\t\\tvec2 normalUv = vUv;\\n\\t\\t#endif\\n\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( normalUv.st );\\n\\t\\tvec2 st1 = dFdy( normalUv.st );\\n\\n\\t\\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\\t\\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\n\\t\\tvec3 mapN = texture2D( normalMap, normalUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy = normalScale * mapN.xy;\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\treturn normalize( tsn * mapN );\\n\\n\\t}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/packing.glsl\n\nTHREE.ShaderChunk[ 'packing' ] =\"vec3 packNormalToRGB( const in vec3 normal ) {\\n  return normalize( normal ) * 0.5 + 0.5;\\n}\\n\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n  return 1.0 - 2.0 * rgb.xyz;\\n}\\n\\n/*const highp float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\\nconst highp float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\\n\\nconst highp vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst highp vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\n\\nconst highp float ShiftRight8 = 1. / 256.;\\n*/\\n\\nvec4 packDepthToRGBA( const in highp float v ) {\\n\\n  const highp vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\\n  const highp vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\\n  highp vec4 res = mod( v * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 ); // vec4 res = fract( depth * bit_shift );\\\",\\n  res -= res.xxyz * bit_mask;\\n  return res;\\n  \\n/* \\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\\n\\treturn r * PackUpscale;*/\\n  \\n\\n}\\n\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\n  const highp vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\\treturn dot( v, bit_shift );\\n\\n  //return dot( v, UnpackFactors );\\n\\n}\\n\\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\\n\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n  return ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n  return linearClipZ * ( near - far ) - near;\\n}\\n\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl\n\nTHREE.ShaderChunk[ 'premultiplied_alpha_fragment' ] =\"#ifdef PREMULTIPLIED_ALPHA\\n\\n\\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\n\nTHREE.ShaderChunk[ 'project_vertex' ] =\"#ifdef USE_SKINNING\\n\\n\\tvec4 mvPosition = modelViewMatrix * skinned;\\n\\n#else\\n\\n\\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'roughnessmap_fragment' ] =\"float roughnessFactor = roughness;\\n\\n#ifdef USE_ROUGHNESSMAP\\n\\n\\t#if defined( TEXTURE_SLOTS )\\n\\t\\tvec2 roughnessUv = roughnessMapUV();\\n\\t#else\\n\\t\\tvec2 roughnessUv = vUv;\\n\\t#endif\\n\\n\\tvec4 texelRoughness = roughnessMapTexelTransform( texture2D( roughnessMap, roughnessUv ) );\\n\\troughnessFactor *= texelRoughness.r;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'roughnessmap_pars_fragment' ] =\"#if ! defined( TEXTURE_SLOTS )\\n\\t#ifdef USE_ROUGHNESSMAP\\n\\n\\t\\tuniform sampler2D roughnessMap;\\n\\n\\t#endif\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment' ] =\"#ifdef USE_SHADOWMAP\\n\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t#if defined( SHADOWMAP_TYPE_PCSS )\\n\\t\\t#define PCSS_QUALITY_LEVEL 5\\n\\t\\t#define PCSS_NUM_POISSON_SAMPLES 16\\n\\n\\t\\tvec2 poissonDisk[PCSS_NUM_POISSON_SAMPLES];\\n\\n\\t\\tvoid initPercentCloserSoftShadow( const in vec2 randomSeed )\\t{\\n\\n\\t\\t\\tpoissonDisk[0] = vec2(-0.94201624, -0.39906216 );\\n\\t\\t\\tpoissonDisk[1] = vec2( 0.94558609, -0.76890725 );\\n\\t\\t\\tpoissonDisk[2] = vec2( -0.094184101, -0.92938870 );\\n\\t\\t\\tpoissonDisk[3] = vec2( 0.34495938, 0.29387760 );\\n\\t\\t\\tpoissonDisk[4] = vec2( -0.91588581, 0.45771432 );\\n\\t\\t\\tpoissonDisk[5] = vec2( -0.81544232, -0.87912464 );\\n\\t\\t\\tpoissonDisk[6] = vec2( -0.38277543, 0.27676845 );\\n\\t\\t\\tpoissonDisk[7] = vec2( 0.97484398, 0.75648379 );\\n\\t\\t\\tpoissonDisk[8] = vec2( 0.44323325, -0.97511554 );\\n\\t\\t\\tpoissonDisk[9] = vec2( 0.53742981, -0.47373420 );\\n\\t\\t\\tpoissonDisk[10] = vec2( -0.26496911, -0.41893023 );\\n\\t\\t\\tpoissonDisk[11] = vec2( 0.79197514, 0.19090188 );\\n\\t\\t\\tpoissonDisk[12] = vec2( -0.24188840, 0.99706507 );\\n\\t\\t\\tpoissonDisk[13] = vec2( -0.81409955, 0.91437590 );\\n\\t\\t\\tpoissonDisk[14] = vec2( 0.19984126, 0.78641367 );\\n\\t\\t\\tpoissonDisk[15] = vec2( 0.14383161, -0.14100790 );\\n\\t\\t}\\n\\n\\t\\tmat2 createRotationMatrix( const in vec2 randomSeed ) {\\n\\t\\t\\tfloat angle = rand( randomSeed ) * PI2;\\n\\t\\t\\tfloat c = cos( angle ), s = sin( angle );\\n\\t\\t\\treturn mat2( c, s, -s, c );\\n\\t\\t}\\n\\n\\t\\tfloat findBlockerLightZ( sampler2D shadowMap, const in vec2 uv, const in float lightFrustumHalfHeightAt1m, const in float receiverLightZ, const in float lightRadius, const in float cameraNear, const in float cameraFar ) {\\n\\t\\t\\t// compute the search radius at the near clipping plane\\n\\t\\t\\tfloat searchRadius = ( lightRadius / receiverLightZ ) * max( receiverLightZ - cameraNear, 0.0 ) / ( lightFrustumHalfHeightAt1m * cameraNear * 2.0 );\\n\\t\\t\\tfloat blockerLightZSum = 0.0;\\n\\t\\t\\tint numBlockers = 0;\\n\\n\\t\\t\\tfor( int j = 0; j < PCSS_QUALITY_LEVEL; j ++ ) {\\n\\n\\t\\t\\t\\tmat2 poissonRotation = createRotationMatrix( uv + vec2( 0.33, 0.66 ) * float( j ) );\\n\\n\\t\\t\\t\\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i++ ) {\\n\\n\\t\\t\\t\\t\\tvec2 uvOffset = ( poissonDisk[i] * poissonRotation ) * searchRadius;\\n\\n\\t\\t\\t\\t\\tfloat shadowMapLightZ = -perspectiveDepthToViewZ( unpackRGBAToDepth( texture2D( shadowMap, uv + uvOffset ) ), cameraNear, cameraFar );\\n\\t\\t\\t\\t\\tif ( shadowMapLightZ < receiverLightZ ) {\\n\\t\\t\\t\\t\\t\\tblockerLightZSum += shadowMapLightZ;\\n\\t\\t\\t\\t\\t\\tnumBlockers ++;\\n\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\tif( numBlockers == 0 ) return -1.0;\\n\\n\\t\\t\\treturn blockerLightZSum / float( numBlockers );\\n\\t\\t}\\n\\n\\t\\tfloat percentCloserFilter( sampler2D shadowMap, const in vec2 uv, const in float receiverClipZ, const in float filterRadius ) {\\n\\n\\t\\t\\tint numBlockers = 0;\\n\\n\\t\\t\\tfor( int j = 0; j < PCSS_QUALITY_LEVEL; j ++ ) {\\n\\n\\t\\t\\t\\tmat2 poissonRotation = createRotationMatrix( uv.yx + vec2( 0.12, 0.30 ) * float( j ) );\\n\\n\\t\\t\\t\\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i ++ ) {\\n\\n\\t\\t\\t\\t\\tvec2 uvOffset = ( poissonDisk[i] * poissonRotation ) * filterRadius;\\n\\n\\t\\t\\t\\t\\tfloat blockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv + uvOffset ) );\\n\\t\\t\\t\\t\\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\\n\\n\\t\\t\\t\\t\\tblockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv - uvOffset ) );\\n\\t\\t\\t\\t\\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\\n\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn float( numBlockers ) / ( 2.0 * float( PCSS_NUM_POISSON_SAMPLES * PCSS_QUALITY_LEVEL ) );\\n\\t\\t}\\n\\n\\t\\tfloat percentCloserSoftShadow( sampler2D shadowMap, const in float lightRadius, const in vec3 shadowCameraFovNearFar, const in vec4 coords ) {\\n\\n\\t\\t\\tvec2 uv = coords.xy;\\n\\t\\t\\tfloat receiverClipZ = coords.z, cameraNear = shadowCameraFovNearFar.y, cameraFar = shadowCameraFovNearFar.z;\\n\\t\\t\\tfloat lightFrustumHalfHeightAt1m = tan( cameraNear * 0.5 );\\n\\n\\t\\t\\tfloat receiverLightZ = -perspectiveDepthToViewZ( receiverClipZ, cameraNear, cameraFar );\\n\\n\\t\\t\\t// STEP 1: blocker search\\n\\t\\t\\tfloat blockerLightZ = findBlockerLightZ( shadowMap, uv, lightFrustumHalfHeightAt1m, receiverLightZ, lightRadius, cameraNear, cameraFar );\\n\\t\\t\\n\\t\\t\\t//There are no occluders so early out (this saves filtering)\\n\\t\\t\\tif( blockerLightZ == -1.0 ) return 1.0;\\n\\n\\t\\t\\t// STEP 2: penumbra size\\n\\t\\t\\tfloat filterRadius = ( lightRadius / blockerLightZ ) * ( receiverLightZ - blockerLightZ ) / ( receiverLightZ * lightFrustumHalfHeightAt1m * 2.0 );\\n\\n\\t\\t\\t// STEP 3: filtering\\n\\t\\t\\treturn percentCloserFilter( shadowMap, uv, receiverClipZ, filterRadius );\\n\\t\\t}\\n\\n\\t#endif\\n\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\n\\t}\\n\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\n\\t\\treturn c;\\n\\n\\t}\\n\\n\\tvoid initShadows() {\\n\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCSS )\\n\\n\\t\\t  initPercentCloserSoftShadow( vViewPosition.xy );\\n\\n\\t\\t#endif\\n\\n\\t}\\n\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec3 shadowCameraFovNearFar, vec4 shadowCoord ) {\\n\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\n\\t\\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\\t\\t// if ( all( something, something ) ) using this instead\\n\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\n\\t\\tif ( frustumTest ) {\\n\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCSS )\\n\\n\\t\\t  return percentCloserSoftShadow( shadowMap, /* interpreted as lightRadius */ shadowRadius, shadowCameraFovNearFar, shadowCoord );\\n\\n\\t\\t#else // no percentage-closer filtering:\\n\\n\\t\\t\\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\n\\t\\t#endif\\n\\n\\t\\t}\\n\\n\\t\\treturn 1.0;\\n\\n\\t}\\n\\n\\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\\n\\t// vector suitable for 2D texture mapping. This code uses the following layout for the\\n\\t// 2D texture:\\n\\t//\\n\\t// xzXZ\\n\\t//  y Y\\n\\t//\\n\\t// Y - Positive y direction\\n\\t// y - Negative y direction\\n\\t// X - Positive x direction\\n\\t// x - Negative x direction\\n\\t// Z - Positive z direction\\n\\t// z - Negative z direction\\n\\t//\\n\\t// Source and test bed:\\n\\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\\n\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\n\\t\\t// Number of texels to avoid at the edge of each square\\n\\n\\t\\tvec3 absV = abs( v );\\n\\n\\t\\t// Intersect unit cube\\n\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\n\\t\\t// Apply scale to avoid seams\\n\\n\\t\\t// two texels less per square (one texel will do for NEAREST)\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\n\\t\\t// Unwrap\\n\\n\\t\\t// space: -1 ... 1 range for each square\\n\\t\\t//\\n\\t\\t// #X##\\t\\tdim    := ( 4 , 2 )\\n\\t\\t//  # #\\t\\tcenter := ( 1 , 1 )\\n\\n\\t\\tvec2 planar = v.xy;\\n\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\n\\t\\t}\\n\\n\\t\\t// Transform to UV space\\n\\n\\t\\t// scale := 0.5 / dim\\n\\t\\t// translate := ( center + 0.5 ) / dim\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\n\\t}\\n\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\n\\t\\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\\n\\t\\t// the distance from the light to the world-space position of the fragment.\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\n\\t\\t// bd3D = base direction 3D\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t// dp = distance from light to fragment position\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\\n\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\n\\t\\t#else // no percentage-closer filtering\\n\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\n\\t\\t#endif\\n\\n\\t}\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex' ] =\"#ifdef USE_SHADOWMAP\\n\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\n\\t#endif\\n\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\n\nTHREE.ShaderChunk[ 'shadowmap_vertex' ] =\"#ifdef USE_SHADOWMAP\\n\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\n\\t}\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'shadowmask_pars_fragment' ] =\"float getShadowMask() {\\n\\n\\tfloat shadow = 1.0;\\n\\n\\t#ifdef USE_SHADOWMAP\\n\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\n\\tDirectionalLight directionalLight;\\n\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\n\\tSpotLight spotLight;\\n\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\n\\tPointLight pointLight;\\n\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\\n\\n\\t}\\n\\n\\t#endif\\n\\n\\t#endif\\n\\n\\treturn shadow;\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinbase_vertex' ] =\"#ifdef USE_SKINNING\\n\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinning_pars_vertex' ] =\"#ifdef USE_SKINNING\\n\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\n\\t#ifdef BONE_TEXTURE\\n\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureWidth;\\n\\t\\tuniform int boneTextureHeight;\\n\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureWidth ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureWidth );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\\t\\t\\treturn bone;\\n\\n\\t\\t}\\n\\n\\t#else\\n\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\n\\t\\t}\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinning_vertex' ] =\"#ifdef USE_SKINNING\\n\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\n\nTHREE.ShaderChunk[ 'skinnormal_vertex' ] =\"#ifdef USE_SKINNING\\n\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\n\nTHREE.ShaderChunk[ 'specularmap_fragment' ] =\"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\\t#if defined( TEXTURE_SLOTS )\\n\\t\\tvec2 specularUv = specularMapUV();\\n\\t#else\\n\\t\\tvec2 specularUv = vUv;\\n\\t#endif\\n\\n\\tvec4 texelSpecular = specularMapTexelTransform( texture2D( specularMap, specularUv ) );\\n\\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\\tspecularStrength = 1.0;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'specularmap_pars_fragment' ] =\"#if ! defined( TEXTURE_SLOTS )\\n\\t#ifdef USE_SPECULARMAP\\n\\n\\t\\tuniform sampler2D specularMap;\\n\\n\\t#endif\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/slot_texel_transform_template.glsl\n\nTHREE.ShaderChunk[ 'slot_texel_transform_template' ] =\"uniform vec2 $SLOT_NAME$TexelTransformParams;\\n\\nvec4 $SLOT_NAME$TexelTransform( vec4 value ) {\\n    value.rgb *= $SLOT_NAME$TexelTransformParams.x;\\n    value.rgb += vec3( $SLOT_NAME$TexelTransformParams.y );\\n    return value;\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/slot_uv_transform_template.glsl\n\nTHREE.ShaderChunk[ 'slot_uv_transform_template' ] =\"uniform vec4 $SLOT_NAME$UVTransformParams;\\n\\nvec2 $SLOT_NAME$UV() {\\n  vec2 value = $UV_VAR_NAME$;\\n  value.xy *= $SLOT_NAME$UVTransformParams.xy;\\n  value.xy += $SLOT_NAME$UVTransformParams.zw;\\n  return value;\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl\n\nTHREE.ShaderChunk[ 'tonemapping_fragment' ] =\"#if defined( TONE_MAPPING )\\n\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'tonemapping_pars_fragment' ] =\"#define saturate(a) clamp( a, 0.0, 1.0 )\\n\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\n\\n// exposure only\\nvec3 LinearToneMapping( vec3 color ) {\\n\\n  return toneMappingExposure * color;\\n\\n}\\n\\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\n  color *= toneMappingExposure;\\n  return saturate( color / ( vec3( 1.0 ) + color ) );\\n\\n}\\n\\n// source: http://filmicgames.com/archives/75\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\n  // John Hable's filmic operator from Uncharted 2 video game\\n  color *= toneMappingExposure;\\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n\\n}\\n\\n// source: http://filmicgames.com/archives/75\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\n  // optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\\n  color *= toneMappingExposure;\\n  color = max( vec3( 0.0 ), color - 0.004 );\\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'uv2_pars_fragment' ] =\"#if ! defined( TEXTURE_SLOTS )\\n\\t#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\\t\\tvarying vec2 vUv2;\\n\\n\\t#endif\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'uv2_pars_vertex' ] =\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\n\nTHREE.ShaderChunk[ 'uv2_vertex' ] =\"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\\tvUv2 = uv2;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\n\nTHREE.ShaderChunk[ 'uv_pars_fragment' ] =\"#if ! defined( TEXTURE_SLOTS )\\n\\n\\t#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\n\\t\\tvarying vec2 vUv;\\n\\n\\t#endif\\n\\t\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\n\nTHREE.ShaderChunk[ 'uv_pars_vertex' ] =\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\n\\tvarying vec2 vUv;\\n\\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\n\nTHREE.ShaderChunk[ 'uv_vertex' ] =\"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\n\\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\n\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\n\nTHREE.ShaderChunk[ 'worldpos_vertex' ] =\"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\\t#ifdef USE_SKINNING\\n\\n\\t\\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\\t#else\\n\\n\\t\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\\n\\t#endif\\n\\n#endif\\n\";\n\n// File:src/renderers/shaders/UniformsUtils.js\n\n/**\n * Uniform Utilities\n */\n\nTHREE.UniformsUtils = {\n\n\tmerge: function ( uniforms ) {\n\n\t\tvar merged = {};\n\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\n\n\t\t\tfor ( var p in tmp ) {\n\n\t\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn merged;\n\n\t},\n\n\tcloneDefines: function ( defines_src ) {\n\n\t\tvar defines_dst = {};\n\n\t\tfor ( var u in defines_src ) {\n\n\t\t\tdefines_dst[ u ] = this.cloneValue( defines_src[ u ] );\n\n\t\t}\n\n\t\treturn defines_dst;\n\n\t},\n\n\n\tclone: function ( uniforms_src ) {\n\n\t\tvar uniforms_dst = {};\n\n\t\tfor ( var u in uniforms_src ) {\n\n\t\t\tuniforms_dst[ u ] = {};\n\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\n\n\t\t\t\tuniforms_dst[ u ][ p ] = THREE.UniformsUtils.cloneValue( uniforms_src[ u ][ p ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn uniforms_dst;\n\n\t},\n\n\tcloneValue: function( parameter_src ) {\n\n\t\tif ( parameter_src instanceof THREE.Color ||\n\t\t\t parameter_src instanceof THREE.Vector2 ||\n\t\t\t parameter_src instanceof THREE.Vector3 ||\n\t\t\t parameter_src instanceof THREE.Vector4 ||\n\t\t\t parameter_src instanceof THREE.Matrix3 ||\n\t\t\t parameter_src instanceof THREE.Matrix4 ||\n\t\t\t parameter_src instanceof THREE.Texture ) {\n\n\t\t\treturn parameter_src.clone();\n\n\t\t} else if ( Array.isArray( parameter_src ) ) {\n\n\t\t\treturn parameter_src.slice();\n\n\t\t} else {\n\n\t\t\treturn parameter_src;\n\n\t\t}\n\t}\n\n};\n\n// File:src/renderers/shaders/UniformsLib.js\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nTHREE.UniformsLib = {\n\n\tcommon: {\n\n\t\t\"diffuse\": { value: new THREE.Color( 0xeeeeee ) },\n\t\t\"opacity\": { value: 1.0 },\n\n\t\t\"map\": { value: null },\n\t\t\"mapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"mapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) },\n\t\t\"offsetRepeat\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\n\t\t\"specularMap\": { value: null },\n\t\t\"specularMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"specularMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) },\n\n\t\t\"alphaMap\": { value: null },\n\t\t\"alphaMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"alphaMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) },\n\n\t\t\"envMap\": { value: null },\n\t\t\"flipEnvMap\": { value: - 1 },\n\t\t\"reflectivity\": { value: 1.0 },\n\t\t\"refractionRatio\": { value: 0.98 }\n\n\t},\n\n\taomap: {\n\n\t\t\"aoMap\": { value: null },\n\t\t\"aoMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"aoMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) },\n\t\t\"aoMapIntensity\": { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\t\"lightMap\": { value: null },\n\t\t\"lightMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"lightMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) },\n\t\t\"lightMapIntensity\": { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\t\"emissiveMap\": { value: null },\n\t\t\"emissiveMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"emissiveMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) }\n\n\t},\n\n\tbumpmap: {\n\n\t\t\"bumpMap\": { value: null },\n\t\t\"bumpScale\": { value: 1 },\n\t\t\"bumpMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"bumpMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) }\n\n\t},\n\n\tnormalmap: {\n\n\t\t\"normalMap\": { value: null },\n\t\t\"normalScale\": { value: new THREE.Vector2( 1, 1 ) }, // for backwards compatibility\n\t\t\"normalMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"normalMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\t\"displacementMap\": { value: null },\n\t\t\"displacementScale\": { value: 1 }, // for backwards compatibility\n\t\t\"displacementBias\": { value: 0 }, // for backwards compatibility\n\t\t\"displacementMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"displacementMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) }\n\n\t},\n\n\troughnessmap: {\n\n\t\t\"roughnessMap\": { value: null },\n\t\t\"roughnessMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"roughnessMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\t\"metalnessMap\": { value: null },\n\t\t\"metalnessMapUVTransformParams\": { value: new THREE.Vector4( 0, 0, 1, 1 ) },\n\t\t\"metalnessMapTexelTransformParams\": { value: new THREE.Vector2( 1, 0 ) }\n\n\t},\n\n\tfog: {\n\n\t\t\"fogDensity\": { value: 0.00025 },\n\t\t\"fogNear\": { value: 1 },\n\t\t\"fogFar\": { value: 2000 },\n\t\t\"fogColor\": { value: new THREE.Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\t\"ambientLightColor\": { value: [] },\n\n\t\t\"directionalLights\": { value: [], properties: {\n\t\t\t\"direction\": {},\n\t\t\t\"color\": {},\n\n\t\t\t\"shadow\": {},\n\t\t\t\"shadowBias\": {},\n\t\t\t\"shadowRadius\": {},\n\t\t\t\"shadowMapSize\": {},\n\t\t\t\"shadowCameraFovNearFar\": {}\n\t\t} },\n\n\t\t\"directionalShadowMap\": { value: [] },\n\t\t\"directionalShadowMatrix\": { value: [] },\n\n\t\t\"spotLights\": { value: [], properties: {\n\t\t\t\"color\": {},\n\t\t\t\"position\": {},\n\t\t\t\"direction\": {},\n\t\t\t\"distance\": {},\n\t\t\t\"coneCos\": {},\n\t\t\t\"penumbraCos\": {},\n\t\t\t\"decay\": {},\n\n\t\t\t\"shadow\": {},\n\t\t\t\"shadowBias\": {},\n\t\t\t\"shadowRadius\": {},\n\t\t\t\"shadowMapSize\": {},\n\t\t\t\"shadowCameraFovNearFar\": {}\n\t\t} },\n\n\t\t\"spotShadowMap\": { value: [] },\n\t\t\"spotShadowMatrix\": { value: [] },\n\n\t\t\"pointLights\": { value: [], properties: {\n\t\t\t\"color\": {},\n\t\t\t\"position\": {},\n\t\t\t\"decay\": {},\n\t\t\t\"distance\": {},\n\n\t\t\t\"shadow\": {},\n\t\t\t\"shadowBias\": {},\n\t\t\t\"shadowRadius\": {},\n\t\t\t\"shadowMapSize\": {}\n\t\t} },\n\n\t\t\"pointShadowMap\": { value: [] },\n\t\t\"pointShadowMatrix\": { value: [] },\n\n\t\t\"hemisphereLights\": { value: [], properties: {\n\t\t\t\"direction\": {},\n\t\t\t\"skyColor\": {},\n\t\t\t\"groundColor\": {}\n\t\t} }\n\n\t},\n\n\tpoints: {\n\n\t\t\"diffuse\": { value: new THREE.Color( 0xeeeeee ) },\n\t\t\"opacity\": { value: 1.0 },\n\t\t\"size\": { value: 1.0 },\n\t\t\"scale\": { value: 1.0 },\n\t\t\"map\": { value: null },\n\t\t\"offsetRepeat\": { value: new THREE.Vector4( 0, 0, 1, 1 ) }\n\n\t}\n\n};\n\n// File:src/renderers/shaders/ShaderLib/cube_frag.glsl\n\nTHREE.ShaderChunk[ 'cube_frag' ] =\"uniform float envMapIntensity;\\nuniform float tFlip;\\nuniform float opacity;\\nuniform float roughness;\\n\\nvarying vec3 vWorldPosition;\\n\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec3 queryReflectVec = vec3( tFlip * vWorldPosition.x, vWorldPosition.yz );\\n\\n\\tvec4 envMapColor = vec4( 0.0 );\\n\\n\\t#if defined( ENVMAP_TYPE_CUBE )\\n\\n\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\n\\t\\t\\tenvMapColor = textureCubeLodEXT( envMap, queryReflectVec, roughness * 8.0 );\\n\\n\\t\\t#else\\n\\n\\t\\t\\tenvMapColor = textureCube( envMap, queryReflectVec, roughness * 8.0 );\\n\\n\\t\\t#endif\\n\\n\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\n\\t\\tenvMapColor = textureCubeUV( queryReflectVec, roughness );\\n\\n\\t#endif\\n\\n\\tgl_FragColor = envMapColor;\\n\\tgl_FragColor.rgb *= envMapIntensity;\\n\\tgl_FragColor.a = opacity;\\n\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/cube_vert.glsl\n\nTHREE.ShaderChunk[ 'cube_vert' ] =\"varying vec3 vWorldPosition;\\n\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/depth_frag.glsl\n\nTHREE.ShaderChunk[ 'depth_frag' ] =\"precision highp float;\\n\\n#if DEPTH_PACKING == 3200\\n\\n\\tuniform float opacity;\\n\\n#endif\\n\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\n\\t#if DEPTH_PACKING == 3200\\n\\n\\t\\tdiffuseColor.a = opacity;\\n\\n\\t#endif\\n\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\n\\t#include <logdepthbuf_fragment>\\n\\n\\t#if DEPTH_PACKING == 3200\\n\\n\\t\\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\\n\\n\\t#elif DEPTH_PACKING == 3201\\n\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\n\\t#endif\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/depth_vert.glsl\n\nTHREE.ShaderChunk[ 'depth_vert' ] =\"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\n\\t#include <skinbase_vertex>\\n\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl\n\nTHREE.ShaderChunk[ 'distanceRGBA_frag' ] =\"uniform vec3 lightPos;\\nvarying vec4 vWorldPosition;\\n\\n#include <common>\\n#include <packing>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main () {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl\n\nTHREE.ShaderChunk[ 'distanceRGBA_vert' ] =\"varying vec4 vWorldPosition;\\n\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <skinbase_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n\\tvWorldPosition = worldPosition;\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/equirect_frag.glsl\n\nTHREE.ShaderChunk[ 'equirect_frag' ] =\"uniform sampler2D tEquirect;\\nuniform float tFlip;\\n\\nvarying vec3 vWorldPosition;\\n\\n#include <common>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\t// \\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\n\\t#include <logdepthbuf_fragment>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/equirect_vert.glsl\n\nTHREE.ShaderChunk[ 'equirect_vert' ] =\"varying vec3 vWorldPosition;\\n\\n#include <common>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/linedashed_frag.glsl\n\nTHREE.ShaderChunk[ 'linedashed_frag' ] =\"uniform vec3 diffuse;\\nuniform float opacity;\\n\\nuniform float dashSize;\\nuniform float totalSize;\\n\\nvarying float vLineDistance;\\n\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\n\\t\\tdiscard;\\n\\n\\t}\\n\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\n\\toutgoingLight = diffuseColor.rgb; // simple shader\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/linedashed_vert.glsl\n\nTHREE.ShaderChunk[ 'linedashed_vert' ] =\"uniform float scale;\\nattribute float lineDistance;\\n\\nvarying float vLineDistance;\\n\\n#include <common>\\n#include <color_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <color_vertex>\\n\\n\\tvLineDistance = scale * lineDistance;\\n\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/meshbasic_frag.glsl\n\nTHREE.ShaderChunk[ 'meshbasic_frag' ] =\"uniform vec3 diffuse;\\nuniform float opacity;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\n\\tReflectedLight reflectedLight;\\n\\treflectedLight.directDiffuse = vec3( 0.0 );\\n\\treflectedLight.directSpecular = vec3( 0.0 );\\n\\treflectedLight.indirectDiffuse = diffuseColor.rgb;\\n\\treflectedLight.indirectSpecular = vec3( 0.0 );\\n\\n\\t#include <aomap_fragment>\\n\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/meshbasic_vert.glsl\n\nTHREE.ShaderChunk[ 'meshbasic_vert' ] =\"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\n\\t#ifdef USE_ENVMAP\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\n\\t#endif\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/meshlambert_frag.glsl\n\nTHREE.ShaderChunk[ 'meshlambert_frag' ] =\"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n\\nvarying vec3 vLightFront;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\\tvarying vec3 vLightBack;\\n\\n#endif\\n\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\n\\t// accumulation\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\n\\t#include <lightmap_fragment>\\n\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\n\\t#ifdef DOUBLE_SIDED\\n\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\n\\t#else\\n\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\n\\t#endif\\n\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\n\\t// modulation\\n\\t#include <aomap_fragment>\\n\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\n\\t#include <normal_flip>\\n\\t#include <envmap_fragment>\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/meshlambert_vert.glsl\n\nTHREE.ShaderChunk[ 'meshlambert_vert' ] =\"#define LAMBERT\\n\\nvarying vec3 vLightFront;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\\tvarying vec3 vLightBack;\\n\\n#endif\\n\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/meshphong_frag.glsl\n\nTHREE.ShaderChunk[ 'meshphong_frag' ] =\"#define PHONG\\n\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\n\\t// accumulation\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_template>\\n\\n\\t// modulation\\n\\t#include <aomap_fragment>\\n\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\n\\t#include <envmap_fragment>\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/meshphong_vert.glsl\n\nTHREE.ShaderChunk[ 'meshphong_vert' ] =\"#define PHONG\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\\n\\n\\tvNormal = normalize( transformedNormal );\\n\\n#endif\\n\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n\\tvViewPosition = - mvPosition.xyz;\\n\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/meshphysical_frag.glsl\n\nTHREE.ShaderChunk[ 'meshphysical_frag' ] =\"precision highp float;\\n#define PHYSICAL\\n\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\n\\nuniform float envMapIntensity; // temporary\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_flip>\\n\\t#include <normal_fragment>\\n\\t#include <emissivemap_fragment>\\n\\n\\t// accumulation\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_template>\\n\\n\\t// modulation\\n\\t#include <aomap_fragment>\\n\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/meshphysical_vert.glsl\n\nTHREE.ShaderChunk[ 'meshphysical_vert' ] =\"#define PHYSICAL\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\\tvarying vec3 vNormal;\\n\\n#endif\\n\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\\n\\n\\tvNormal = normalize( transformedNormal );\\n\\n#endif\\n\\n\\t#include <begin_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n\\tvViewPosition = - mvPosition.xyz;\\n\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/normal_frag.glsl\n\nTHREE.ShaderChunk[ 'normal_frag' ] =\"uniform float opacity;\\nvarying vec3 vNormal;\\n\\n#include <common>\\n#include <packing>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\tgl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\\n\\n\\t#include <logdepthbuf_fragment>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/normal_vert.glsl\n\nTHREE.ShaderChunk[ 'normal_vert' ] =\"varying vec3 vNormal;\\n\\n#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\tvNormal = normalize( normalMatrix * normal );\\n\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/points_frag.glsl\n\nTHREE.ShaderChunk[ 'points_frag' ] =\"uniform vec3 diffuse;\\nuniform float opacity;\\n\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\n\\nvoid main() {\\n\\n\\t#include <clipping_planes_fragment>\\n\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\n\\toutgoingLight = diffuseColor.rgb;\\n\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/points_vert.glsl\n\nTHREE.ShaderChunk[ 'points_vert' ] =\"uniform float size;\\nuniform float scale;\\n\\n#include <common>\\n#include <color_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/shadow_frag.glsl\n\nTHREE.ShaderChunk[ 'shadow_frag' ] =\"uniform float opacity;\\n\\n#include <common>\\n#include <packing>\\n#include <bsdfs>\\n#include <lights_pars>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n\\nvoid main() {\\n\\n\\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib/shadow_vert.glsl\n\nTHREE.ShaderChunk[ 'shadow_vert' ] =\"#include <shadowmap_pars_vertex>\\n\\nvoid main() {\\n\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\n}\\n\";\n\n// File:src/renderers/shaders/ShaderLib.js\n\n/**\n * Webgl Shader Library for three.js\n *\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\n\nTHREE.ShaderLib = {\n\n\t'basic': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ 'common' ],\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\n\t\t\tTHREE.UniformsLib[ 'fog' ]\n\n\t\t] ),\n\n\t\tvertexShader: THREE.ShaderChunk[ 'meshbasic_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshbasic_frag' ]\n\n\t},\n\n\t'lambert': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ 'common' ],\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\n\t\t\tTHREE.UniformsLib[ 'lightmap' ],\n\t\t\tTHREE.UniformsLib[ 'emissivemap' ],\n\t\t\tTHREE.UniformsLib[ 'fog' ],\n\t\t\tTHREE.UniformsLib[ 'lights' ],\n\n\t\t\t{\n\t\t\t\t\"emissive\" : { value: new THREE.Color( 0x000000 ) }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: THREE.ShaderChunk[ 'meshlambert_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshlambert_frag' ]\n\n\t},\n\n\t'phong': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ 'common' ],\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\n\t\t\tTHREE.UniformsLib[ 'lightmap' ],\n\t\t\tTHREE.UniformsLib[ 'emissivemap' ],\n\t\t\tTHREE.UniformsLib[ 'bumpmap' ],\n\t\t\tTHREE.UniformsLib[ 'normalmap' ],\n\t\t\tTHREE.UniformsLib[ 'displacementmap' ],\n\t\t\tTHREE.UniformsLib[ 'fog' ],\n\t\t\tTHREE.UniformsLib[ 'lights' ],\n\n\t\t\t{\n\t\t\t\t\"emissive\" : { value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\"specular\" : { value: new THREE.Color( 0x111111 ) },\n\t\t\t\t\"shininess\": { value: 30 }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: THREE.ShaderChunk[ 'meshphong_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshphong_frag' ]\n\n\t},\n\n\t'standard': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ 'common' ],\n\t\t\tTHREE.UniformsLib[ 'aomap' ],\n\t\t\tTHREE.UniformsLib[ 'lightmap' ],\n\t\t\tTHREE.UniformsLib[ 'emissivemap' ],\n\t\t\tTHREE.UniformsLib[ 'bumpmap' ],\n\t\t\tTHREE.UniformsLib[ 'normalmap' ],\n\t\t\tTHREE.UniformsLib[ 'displacementmap' ],\n\t\t\tTHREE.UniformsLib[ 'roughnessmap' ],\n\t\t\tTHREE.UniformsLib[ 'metalnessmap' ],\n\t\t\tTHREE.UniformsLib[ 'fog' ],\n\t\t\tTHREE.UniformsLib[ 'lights' ],\n\n\t\t\t{\n\t\t\t\t\"emissive\" : { value: new THREE.Color( 0x000000 ) },\n\t\t\t\t\"roughness\": { value: 0.5 },\n\t\t\t\t\"metalness\": { value: 0 },\n\t\t\t\t\"envMapIntensity\" : { value: 1 }, // temporary\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: THREE.ShaderChunk[ 'meshphysical_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'meshphysical_frag' ]\n\n\t},\n\n\t'points': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ 'points' ],\n\t\t\tTHREE.UniformsLib[ 'fog' ]\n\n\t\t] ),\n\n\t\tvertexShader: THREE.ShaderChunk[ 'points_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'points_frag' ]\n\n\t},\n\n\t'dashed': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ 'common' ],\n\t\t\tTHREE.UniformsLib[ 'fog' ],\n\n\t\t\t{\n\t\t\t\t\"scale\"    : { value: 1 },\n\t\t\t\t\"dashSize\" : { value: 1 },\n\t\t\t\t\"totalSize\": { value: 2 }\n\t\t\t}\n\n\t\t] ),\n\n\t\tvertexShader: THREE.ShaderChunk[ 'linedashed_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'linedashed_frag' ]\n\n\t},\n\n\t'depth': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\t\tTHREE.UniformsLib[ 'common' ],\n\t\t\tTHREE.UniformsLib[ 'displacementmap' ]\n\n\t\t] ),\n\n\t\tvertexShader: THREE.ShaderChunk[ 'depth_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'depth_frag' ]\n\n\t},\n\n\t'normal': {\n\n\t\tuniforms: {\n\n\t\t\t\"opacity\" : { value: 1.0 }\n\n\t\t},\n\n\t\tvertexShader: THREE.ShaderChunk[ 'normal_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'normal_frag' ]\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\t'cube': {\n\n\t\tuniforms: THREE.UniformsUtils.merge( [\n\t\t\tTHREE.UniformsLib[ 'common' ],\n\n\t\t\t{\n\t\t\t\t\"envMap\": { value: null },\n\t\t\t\t\"envMapIntensity\": { value: 1.0 },\n\t\t\t\t\"tFlip\": { value: - 1 },\n\t\t\t\t\"opacity\": { value: 1.0 },\n\t\t\t\t\"roughness\": { value: 0.0 },\n\t\t\t}\n\t\t]),\n\n\t\tvertexShader: THREE.ShaderChunk[ 'cube_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'cube_frag' ]\n\n\t},\n\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\t'equirect': {\n\n\t\tuniforms: {\n\t\t\t\"tEquirect\": { value: null },\n\t\t\t\"tFlip\": { value: - 1 }\n\t\t},\n\n\t\tvertexShader: THREE.ShaderChunk[ 'equirect_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'equirect_frag' ]\n\n\t},\n\n\t'distanceRGBA': {\n\n\t\tuniforms: {\n\n\t\t\t\"lightPos\": { value: new THREE.Vector3() }\n\n\t\t},\n\n\t\tvertexShader: THREE.ShaderChunk[ 'distanceRGBA_vert' ],\n\t\tfragmentShader: THREE.ShaderChunk[ 'distanceRGBA_frag' ]\n\n\t}\n\n};\n\nTHREE.ShaderLib[ 'physical' ] = {\n\n\tuniforms: THREE.UniformsUtils.merge( [\n\n\t\tTHREE.ShaderLib[ 'standard' ].uniforms,\n\n\t\t{\n\t\t\t\"clearCoat\": { value: 0 },\n\t\t\t\"clearCoatRoughness\": { value: 0 }\n\t\t}\n\n\t] ),\n\n\tvertexShader: THREE.ShaderChunk[ 'meshphysical_vert' ],\n\tfragmentShader: THREE.ShaderChunk[ 'meshphysical_frag' ]\n\n};\n\n// File:src/renderers/WebGLRenderer.js\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nTHREE.WebGLRenderer = function ( parameters ) {\n\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false;\n\n\tvar lights = [];\n\n\tvar opaqueObjects = [];\n\tvar opaqueObjectsLastIndex = - 1;\n\tvar transparentObjects = [];\n\tvar transparentObjectsLastIndex = - 1;\n\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tvar sprites = [];\n\tvar lensFlares = [];\n\n\tvar passScene = null, passCamera = null, passQuad = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\tthis.context = null;\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.gammaInput = false;\n\tthis.gammaOutput = false;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = THREE.LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// flags\n\n\tthis.autoScaleCubemaps = true;\n\tthis.autoResizeTextures = false;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t// internal state cache\n\n\t_currentProgram = null,\n\t_currentRenderTarget = null,\n\t_currentFramebuffer = null,\n\t_currentMaterialId = - 1,\n\t_currentGeometryProgram = '',\n\t_currentCamera = null,\n\n\t_currentScissor = new THREE.Vector4(),\n\t_currentScissorTest = null,\n\n\t_currentViewport = new THREE.Vector4(),\n\n\t//\n\n\t_usedTextureUnits = 0,\n\n\t//\n\n\t_clearColor = new THREE.Color( 0x000000 ),\n\t_clearAlpha = 0,\n\n\t_width = _canvas.width,\n\t_height = _canvas.height,\n\n\t_pixelRatio = 1,\n\n\t_scissor = new THREE.Vector4( 0, 0, _width, _height ),\n\t_scissorTest = false,\n\n\t_viewport = new THREE.Vector4( 0, 0, _width, _height ),\n\n\t// frustum\n\n\t_frustum = new THREE.Frustum(),\n\n\t// clipping\n\n\t_clipping = new THREE.WebGLClipping(),\n\t_clippingEnabled = false,\n\t_localClippingEnabled = false,\n\n\t_sphere = new THREE.Sphere(),\n\n\t// camera matrices cache\n\n\t_projScreenMatrix = new THREE.Matrix4(),\n\n\t_vector3 = new THREE.Vector3(),\n\n\t// light arrays cache\n\n\t_lights = {\n\n\t\thash: '',\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tdirectional: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\tpoint: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: [],\n\n\t\tshadows: []\n\n\t},\n\n\t// info\n\n\t_infoRender = {\n\n\t\tcalls: 0,\n\t\tvertices: 0,\n\t\tfaces: 0,\n\t\tpoints: 0\n\n\t};\n\n\tthis.info = {\n\n\t\trender: _infoRender,\n\t\tmemory: {\n\n\t\t\tgeometries: 0,\n\t\t\ttextures: 0\n\n\t\t},\n\t\tprograms: null\n\n\t};\n\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar attributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\n\t\t};\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\n\n\t\t\t} else {\n\n\t\t\t\tthrow 'Error creating WebGL context.';\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\n\n\t}\n\n\tvar extensions = new THREE.WebGLExtensions( _gl );\n\n\textensions.get( 'WEBGL_depth_texture' );\n\textensions.get( 'OES_texture_float' );\n\textensions.get( 'OES_texture_float_linear' );\n\textensions.get( 'OES_texture_half_float' );\n\textensions.get( 'OES_texture_half_float_linear' );\n\textensions.get( 'OES_standard_derivatives' );\n\textensions.get( 'ANGLE_instanced_arrays' );\n\n\tif ( extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\tTHREE.BufferGeometry.MaxIndex = 4294967296;\n\n\t}\n\n\tvar capabilities = new THREE.WebGLCapabilities( _gl, extensions, parameters );\n\n\tvar state = new THREE.WebGLState( _gl, extensions, paramThreeToGL );\n\tvar properties = new THREE.WebGLProperties();\n\tvar textures = new THREE.WebGLTextures( _gl, extensions, state, properties, capabilities, paramThreeToGL, this.info );\n\tvar objects = new THREE.WebGLObjects( _gl, properties, this.info );\n\tvar programCache = new THREE.WebGLPrograms( this, capabilities );\n\tvar lightCache = new THREE.WebGLLights();\n\n\tthis.info.programs = programCache.programs;\n\n\tvar bufferRenderer = new THREE.WebGLBufferRenderer( _gl, extensions, _infoRender );\n\tvar indexedBufferRenderer = new THREE.WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\n\n\t//\n\n\tvar backgroundCamera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tvar backgroundCamera2 = new THREE.PerspectiveCamera();\n\tvar backgroundPlaneMesh = new THREE.Mesh(\n\t\tnew THREE.PlaneBufferGeometry( 2, 2 ),\n\t\tnew THREE.MeshBasicMaterial( { depthTest: false, depthWrite: false } )\n\t);\n\tvar backgroundBoxShader = THREE.ShaderLib[ 'cube' ];\n\tvar backgroundBoxMesh = new THREE.Mesh(\n\t\tnew THREE.BoxBufferGeometry( 5, 5, 5 ),\n\t\tnew THREE.ShaderMaterial( {\n\t\t\tuniforms: backgroundBoxShader.uniforms,\n\t\t\tvertexShader: backgroundBoxShader.vertexShader,\n\t\t\tfragmentShader: backgroundBoxShader.fragmentShader,\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\tside: THREE.BackSide\n\t\t} )\n\t);\n\tobjects.update( backgroundPlaneMesh );\n\tobjects.update( backgroundBoxMesh );\n\n\t//\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\tfunction glClearColor( r, g, b, a ) {\n\n\t\tif ( _premultipliedAlpha === true ) {\n\n\t\t\tr *= a; g *= a; b *= a;\n\n\t\t}\n\n\t\tstate.clearColor( r, g, b, a );\n\n\t}\n\n\tfunction setDefaultGLState() {\n\n\t\tstate.init();\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\n\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t}\n\n\tfunction resetGLState() {\n\n\t\t_currentProgram = null;\n\t\t_currentCamera = null;\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\n\t\tstate.reset();\n\n\t}\n\n\tsetDefaultGLState();\n\n\tthis.context = _gl;\n\tthis.capabilities = capabilities;\n\tthis.extensions = extensions;\n\tthis.properties = properties;\n\tthis.state = state;\n\n\t// shadow map\n\n\tvar shadowMap = new THREE.WebGLShadowMap( this, _lights, objects );\n\n\tthis.shadowMap = shadowMap;\n\n\n\t// Plugins\n\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\n\n\t};\n\n\tthis.getMaxAnisotropy = function () {\n\n\t\treturn capabilities.getMaxAnisotropy();\n\n\t};\n\n\tthis.getPrecision = function () {\n\n\t\treturn capabilities.precision;\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _viewport.z, _viewport.w, false );\n\n\t};\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = width * _pixelRatio;\n\t\t_canvas.height = height * _pixelRatio;\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tstate.viewport( _viewport.set( x, y, width, height ) );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tstate.scissor( _scissor.set( x, y, width, height ) );\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn _clearColor;\n\n\t};\n\n\tthis.setClearColor = function ( color, alpha ) {\n\n\t\t_clearColor.set( color );\n\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\n\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn _clearAlpha;\n\n\t};\n\n\tthis.setClearAlpha = function ( alpha ) {\n\n\t\t_clearAlpha = alpha;\n\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\n\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t};\n\n\t// Reset\n\n\tthis.resetGLState = resetGLState;\n\n\tthis.dispose = function() {\n\n\t\ttransparentObjects = [];\n\t\ttransparentObjectsLastIndex = -1;\n\t\topaqueObjects = [];\n\t\topaqueObjectsLastIndex = -1;\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tresetGLState();\n\t\tsetDefaultGLState();\n\n\t\tproperties.clear();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.delete( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tthis.renderBufferImmediate = function ( object, program, material ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar attributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( attributes.position );\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\n\t\t\tif ( material.type !== 'MeshPhongMaterial' && material.type !== 'MeshStandardMaterial' && material.type !== 'MeshPhysicalMaterial' && material.shading === THREE.FlatShading ) {\n\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\n\n\t\t\t\t\tvar array = object.normalArray;\n\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\n\n\t\t\t\t\tarray[ i + 0 ] = nx;\n\t\t\t\t\tarray[ i + 1 ] = ny;\n\t\t\t\t\tarray[ i + 2 ] = nz;\n\n\t\t\t\t\tarray[ i + 3 ] = nx;\n\t\t\t\t\tarray[ i + 4 ] = ny;\n\t\t\t\t\tarray[ i + 5 ] = nz;\n\n\t\t\t\t\tarray[ i + 6 ] = nx;\n\t\t\t\t\tarray[ i + 7 ] = ny;\n\t\t\t\t\tarray[ i + 8 ] = nz;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( attributes.normal );\n\n\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs && material.map ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( attributes.uv );\n\n\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( attributes.color );\n\n\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\n\n\t\tsetMaterial( material );\n\n\t\tvar program = setProgram( camera, fog, material, object );\n\n\t\tvar updateBuffers = false;\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\n\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\n\n\t\t\t_currentGeometryProgram = geometryProgram;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargetInfluences = object.morphTargetInfluences;\n\n\t\tif ( morphTargetInfluences !== undefined ) {\n\n\t\t\tvar activeInfluences = [];\n\n\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\n\n\t\t\t\tvar influence = morphTargetInfluences[ i ];\n\t\t\t\tactiveInfluences.push( [ influence, i ] );\n\n\t\t\t}\n\n\t\t\tactiveInfluences.sort( absNumericalSort );\n\n\t\t\tif ( activeInfluences.length > 8 ) {\n\n\t\t\t\tactiveInfluences.length = 8;\n\n\t\t\t}\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\n\n\t\t\t\tvar influence = activeInfluences[ i ];\n\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\n\n\t\t\t\tif ( influence[ 0 ] !== 0 ) {\n\n\t\t\t\t\tvar index = influence[ 1 ];\n\n\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\n\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\n\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tprogram.getUniforms().setValue(\n\t\t\t\t\t_gl, 'morphTargetInfluences', morphInfluences );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = objects.getWireframeAttribute( geometry );\n\n\t\t}\n\n\t\tvar renderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( index );\n\n\t\t} else {\n\n\t\t\trenderer = bufferRenderer;\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataStart = 0;\n\t\tvar dataCount = Infinity;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdataCount = index.count;\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\tdataCount = position.count;\n\n\t\t}\n\n\t\tvar rangeStart = geometry.drawRange.start;\n\t\tvar rangeCount = geometry.drawRange.count;\n\n\t\tvar groupStart = group !== null ? group.start : 0;\n\t\tvar groupCount = group !== null ? group.count : Infinity;\n\n\t\tvar drawStart = Math.max( dataStart, rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataStart + dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\t//\n\n\t\tif ( object instanceof THREE.Mesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\tswitch ( object.drawMode ) {\n\n\t\t\t\t\tcase THREE.TrianglesDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.TriangleStripDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_STRIP );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.TriangleFanDrawMode:\n\t\t\t\t\t\trenderer.setMode( _gl.TRIANGLE_FAN );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t} else if ( object instanceof THREE.Line ) {\n\n\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object instanceof THREE.LineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object instanceof THREE.Points ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t}\n\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\n\n\t\t\tif ( geometry.maxInstancedCount > 0 ) {\n\n\t\t\t\trenderer.renderInstances( geometry, drawStart, drawCount );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\n\n\t\tvar extension;\n\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( startIndex === undefined ) startIndex = 0;\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar type = _gl.FLOAT;\n\t\t\t\t\tvar array = geometryAttribute.array;\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\n\t\t\t\t\tif ( array instanceof Float32Array ) {\n\n\t\t\t\t\t\ttype = _gl.FLOAT;\n\n\t\t\t\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\t\t\t\tconsole.warn(\"Unsupported data buffer format: Float64Array\");\n\n\t\t\t\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\t\t\t\ttype = _gl.UNSIGNED_SHORT;\n\n\t\t\t\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\t\t\t\ttype = _gl.SHORT;\n\n\t\t\t\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\t\t\t\ttype = _gl.UNSIGNED_INT;\n\n\t\t\t\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\t\t\t\ttype = _gl.INT;\n\n\t\t\t\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\t\t\t\ttype = _gl.BYTE;\n\n\t\t\t\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\t\t\t\ttype = _gl.UNSIGNED_BYTE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\t\t\t\t\tvar buffer = objects.getAttributeBuffer( geometryAttribute );\n\n\t\t\t\t\tif ( geometryAttribute instanceof THREE.InterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data instanceof THREE.InstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute, extension );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * data.array.BYTES_PER_ELEMENT, ( startIndex * stride + offset ) * data.array.BYTES_PER_ELEMENT );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute, extension );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, startIndex * size * geometryAttribute.array.BYTES_PER_ELEMENT );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Sorting\n\n\tfunction absNumericalSort( a, b ) {\n\n\t\treturn Math.abs( b[ 0 ] ) - Math.abs( a[ 0 ] );\n\n\t}\n\n\tfunction painterSortStable ( a, b ) {\n\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\n\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\n\n\t\t} else if ( a.material.program && b.material.program && a.material.program !== b.material.program ) {\n\n\t\t\treturn a.material.program.id - b.material.program.id;\n\n\t\t} else if ( a.material.id !== b.material.id ) {\n\n\t\t\treturn a.material.id - b.material.id;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn a.z - b.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\tfunction reversePainterSortStable ( a, b ) {\n\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\n\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\n\n\t\t} if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn a.id - b.id;\n\n\t\t}\n\n\t}\n\n\t// Rendering\n\n\tthis.renderOverride = function ( overrideMaterial, scene, camera, renderTarget, forceClear ) {\n\n\t\tscene.overrideMaterial = overrideMaterial;\n\t\tthis.render( scene, camera, renderTarget, forceClear );\n\t\tscene.overrideMaterial = null;\n\n\t};\n\n\tthis.renderPass = function ( passMaterial, renderTarget, forceClear ) {\n\n\t\tif( passScene === null ) {\n\t\t\tpassCamera = new THREE.OrthographicCamera( -1, 1, 1, -1, 0, 1 );\n\t\t\tpassQuad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );\n\t\t\tpassScene = new THREE.Scene();\n\t\t\tpassScene.add( passQuad );\n\t\t}\n\n\t\tpassQuad.material = passMaterial;\n\t\tthis.render( passScene, passCamera, renderTarget, forceClear );\n\t\tpassQuad.material = null;\n\n\t};\n\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( camera instanceof THREE.Camera === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar fog = scene.fog;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram = '';\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\tlights.length = 0;\n\n\t\topaqueObjectsLastIndex = - 1;\n\t\ttransparentObjectsLastIndex = - 1;\n\n\t\tsprites.length = 0;\n\t\tlensFlares.length = 0;\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tprojectObject( scene, camera );\n\n\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\n\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\topaqueObjects.sort( painterSortStable );\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tsetupShadows( lights );\n\n\t\tshadowMap.render( scene, camera );\n\n\t\tsetupLights( lights, camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\t_infoRender.calls = 0;\n\t\t_infoRender.vertices = 0;\n\t\t_infoRender.faces = 0;\n\t\t_infoRender.points = 0;\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\trenderTarget = null;\n\n\t\t}\n\n\t\t//console.log( \"render() renderTarget: \", renderTarget );\n\n\t\tthis.setRenderTarget( renderTarget );\n\n\t\t//\n\n\t\tvar background = scene.background;\n\t\tbackground = null;\n\n\t\tif ( background === null ) {\n\n\t\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\n\n\t\t} else if ( background instanceof THREE.Color ) {\n\n\t\t\tglClearColor( background.r, background.g, background.b, 1 );\n\n\t\t}\n\n\t\tif ( this.autoClear || forceClear ) {\n\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background instanceof THREE.CubeTexture ) {\n\n\t\t\tbackgroundCamera2.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\tbackgroundCamera2.matrixWorld.extractRotation( camera.matrixWorld );\n\t\t\tbackgroundCamera2.matrixWorldInverse.getInverse( backgroundCamera2.matrixWorld );\n\n\t\t\tbackgroundBoxMesh.material.uniforms[ \"tCube\" ].value = background;\n\t\t\tbackgroundBoxMesh.modelViewMatrix.multiplyMatrices( backgroundCamera2.matrixWorldInverse, backgroundBoxMesh.matrixWorld );\n\n\t\t\t_this.renderBufferDirect( backgroundCamera2, null, backgroundBoxMesh.geometry, backgroundBoxMesh.material, backgroundBoxMesh, null );\n\n\t\t} else if ( background instanceof THREE.Texture ) {\n\n\t\t\tbackgroundPlaneMesh.material.map = background;\n\n\t\t\t_this.renderBufferDirect( backgroundCamera, null, backgroundPlaneMesh.geometry, backgroundPlaneMesh.material, backgroundPlaneMesh, null );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\trenderObjects( opaqueObjects, camera, fog, overrideMaterial );\n\t\t\trenderObjects( transparentObjects, camera, fog, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tstate.setBlending( THREE.NoBlending );\n\t\t\trenderObjects( opaqueObjects, camera, fog );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\trenderObjects( transparentObjects, camera, fog );\n\n\t\t}\n\n\t\t// custom render plugins (post pass)\n\n\t\tspritePlugin.render( scene, camera );\n\t\tlensFlarePlugin.render( scene, camera, _currentViewport );\n\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\tif ( renderTarget ) {\n\n\t\t\ttextures.updateRenderTargetMipmap( renderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.setDepthTest( true );\n\t\tstate.setDepthWrite( true );\n\t\tstate.setColorWrite( true );\n\n\t\t// _gl.finish();\n\n\t};\n\n\tfunction pushRenderItem( object, geometry, material, z, group ) {\n\n\t\tvar array, index;\n\n\t\t// allocate the next position in the appropriate array\n\n\t\tif ( material.transparent ) {\n\n\t\t\tarray = transparentObjects;\n\t\t\tindex = ++ transparentObjectsLastIndex;\n\n\t\t} else {\n\n\t\t\tarray = opaqueObjects;\n\t\t\tindex = ++ opaqueObjectsLastIndex;\n\n\t\t}\n\n\t\t// recycle existing render item or grow the array\n\n\t\tvar renderItem = array[ index ];\n\n\t\tif ( renderItem !== undefined ) {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.z = _vector3.z;\n\t\t\trenderItem.group = group;\n\n\t\t} else {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tz: _vector3.z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\t// assert( index === array.length );\n\t\t\tarray.push( renderItem );\n\n\t\t}\n\n\t}\n\n\t// TODO Duplicated code (Frustum)\n\n\tfunction isObjectViewable( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null )\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).\n\t\t\tapplyMatrix4( object.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSpriteViewable( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn isSphereViewable( _sphere );\n\n\t}\n\n\tfunction isSphereViewable( sphere ) {\n\n\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\n\n\t\tvar numPlanes = _clipping.numPlanes;\n\n\t\tif ( numPlanes === 0 ) return true;\n\n\t\tvar planes = _this.clippingPlanes,\n\n\t\t\tcenter = sphere.center,\n\t\t\tnegRad = - sphere.radius,\n\t\t\ti = 0;\n\n\t\tdo {\n\n\t\t\t// out when deeper than radius in the negative halfspace\n\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\n\n\t\t} while ( ++ i !== numPlanes );\n\n\t\treturn true;\n\n\t}\n\n\tfunction projectObject( object, camera ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tif ( object.layers.test( camera.layers ) ) {\n\n\t\t\tif ( object instanceof THREE.Light ) {\n\n\t\t\t\tlights.push( object );\n\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\n\n\t\t\t\tif ( object.frustumCulled === false || isSpriteViewable( object ) === true ) {\n\n\t\t\t\t\tsprites.push( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\n\n\t\t\t\tlensFlares.push( object );\n\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject ) {\n\n\t\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tpushRenderItem( object, null, object.material, _vector3.z, null );\n\n\t\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\n\n\t\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\n\n\t\t\t\t\tobject.skeleton.update();\n\n\t\t\t\t}\n\n\t\t\t\tif ( object.frustumCulled === false || isObjectViewable( object ) === true ) {\n\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( material.visible === true ) {\n\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar geometry = objects.update( object );\n\n\t\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\n\n\t\t\t\t\t\t\tvar groups = geometry.groups;\n\t\t\t\t\t\t\tvar materials = material.materials;\n\n\t\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\n\n\t\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\n\n\t\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z, null );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, camera, fog, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\t\tif ( object instanceof THREE.ImmediateRenderObject ) {\n\n\t\t\t\tsetMaterial( material );\n\n\t\t\t\tvar program = setProgram( camera, fog, material, object );\n\n\t\t\t\t_currentGeometryProgram = '';\n\n\t\t\t\tobject.render( function ( object ) {\n\n\t\t\t\t\t_this.renderBufferImmediate( object, program, material );\n\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\t_this.renderBufferDirect( camera, fog, geometry, material, object, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initMaterial( material, fog, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar parameters = programCache.getParameters(\n\t\t\t\tmaterial, _lights, fog, _clipping.numPlanes, object );\n\n\t\tvar code = programCache.getProgramCode( material, parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.code !== code ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\tvar shader = THREE.ShaderLib[ parameters.shaderID ];\n\n\t\t\t\tmaterialProperties.__webglShader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\n\t\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tmaterialProperties.__webglShader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: material.uniforms,\n\t\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\n\n\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar attributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.__webglShader.uniforms;\n\n\t\tif ( ! ( material instanceof THREE.ShaderMaterial ) &&\n\t\t\t\t! ( material instanceof THREE.RawShaderMaterial ) ||\n\t\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tif ( material.lights ) {\n\n\t\t\t// store the light setup it was created for\n\n\t\t\tmaterialProperties.lightsHash = _lights.hash;\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = _lights.ambient;\n\t\t\tuniforms.directionalLights.value = _lights.directional;\n\t\t\tuniforms.spotLights.value = _lights.spot;\n\t\t\tuniforms.pointLights.value = _lights.point;\n\t\t\tuniforms.hemisphereLights.value = _lights.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = _lights.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = _lights.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = _lights.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = _lights.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = _lights.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = _lights.pointShadowMatrix;\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\t\tTHREE.WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\t\tmaterialProperties.dynamicUniforms =\n\t\t\t\tTHREE.WebGLUniforms.splitDynamic( uniformsList, uniforms );\n\n\t}\n\n\tfunction setMaterial( material ) {\n\n\t\tif ( material.side !== THREE.DoubleSide )\n\t\t\tstate.enable( _gl.CULL_FACE );\n\t\telse\n\t\t\tstate.disable( _gl.CULL_FACE );\n\n\t\tstate.setFlipSided( material.side === THREE.BackSide );\n\n\t\tif ( material.transparent === true ) {\n\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\t} else {\n\n\t\t\tstate.setBlending( THREE.NoBlending );\n\n\t\t}\n\n\t\tstate.setDepthFunc( material.depthFunc );\n\t\tstate.setDepthTest( material.depthTest );\n\t\tstate.setDepthWrite( material.depthWrite );\n\t\tstate.setColorWrite( material.colorWrite );\n\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\tfunction setProgram( camera, fog, material, object ) {\n\n\t\t_usedTextureUnits = 0;\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\t\tmaterial.clippingPlanes, material.clipShadows,\n\t\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t\tif ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\tmaterialProperties.numClippingPlanes !== _clipping.numPlanes ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\tmaterial.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( materialProperties.lightsHash !== undefined &&\n\t\t\tmaterialProperties.lightsHash !== _lights.hash ) {\n\n\t\t\tmaterial.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( material.needsUpdate ) {\n\n\t\t\tinitMaterial( material, fog, object );\n\t\t\tmaterial.needsUpdate = false;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\n\n\t\tif ( program.id !== _currentProgram ) {\n\n\t\t\t_gl.useProgram( program.program );\n\t\t\t_currentProgram = program.id;\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\n\n\t\t\tp_uniforms.set( _gl, camera, 'projectionMatrix' );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\n\t\t\tif ( camera !== _currentCamera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\n\t\t\t\t material.envMap ) {\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\n\t\t\t\t material.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t\tp_uniforms.set( _gl, _this, 'toneMappingExposure' );\n\t\t\tp_uniforms.set( _gl, _this, 'toneMappingWhitePoint' );\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tif ( capabilities.floatVertexTextures && skeleton.useVertexTexture ) {\n\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTexture' );\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTextureWidth' );\n\t\t\t\t\tp_uniforms.set( _gl, skeleton, 'boneTextureHeight' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tif ( material.lights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\n\t\t\t\t material instanceof THREE.MeshStandardMaterial ||\n\t\t\t\t material instanceof THREE.MeshDepthMaterial ||\n\t\t\t\t material instanceof THREE.MeshCubeMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t}\n\n\t\t\t// refresh single material specific uniforms\n\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.PointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshCubeMaterial ) {\n\n\t\t\t\trefreshUniformsCube( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshStandardMaterial ) {\n\n\t\t\t\trefreshUniformsStandard( m_uniforms, material );\n\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\n\n\t\t\t\tif ( material.displacementMap ) {\n\n\t\t\t\t\tm_uniforms.displacementMap.value = material.displacementMap;\n\t\t\t\t\tm_uniforms.displacementScale.value = material.displacementScale;\n\t\t\t\t\tm_uniforms.displacementBias.value = material.displacementBias;\n\n\t\t\t\t}\n\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\n\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\tTHREE.WebGLUniforms.upload(\n\t\t\t\t\t_gl, materialProperties.uniformsList, m_uniforms, _this );\n\n\t\t}\n\n\n\t\t// common matrices\n\n\t\tp_uniforms.set( _gl, object, 'modelViewMatrix' );\n\t\tp_uniforms.set( _gl, object, 'normalMatrix' );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\n\t\t// dynamic uniforms\n\n\t\tvar dynUniforms = materialProperties.dynamicUniforms;\n\n\t\tif ( dynUniforms !== null ) {\n\n\t\t\tTHREE.WebGLUniforms.evalDynamic(\n\t\t\t\t\tdynUniforms, m_uniforms, object, camera );\n\n\t\t\tTHREE.WebGLUniforms.upload( _gl, dynUniforms, m_uniforms, _this );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tvar texelTransform = { texelScale: 0, texelOffset: 0 };\n\n\tfunction refreshUniformsCommon ( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tuniforms.diffuse.value = material.color;\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tvar supportedMapNames = THREE.Map.SupportedMapNames;\n\t\tvar supportedMapSlotNames = THREE.Map.SupportedMapSlotNames;\n\t\tvar supportedMapUVNames = THREE.Map.SupportedMapUVNames;\n\t\tvar supportedMapTexelNames = THREE.Map.SupportedMapTexelNames;\n\n\t\tif( ! material.usedSlots || material.usedSlotsVersion != material.version ) {\n\t\t\tmaterial.usedSlots = [];\n\t\t\tfor( var i = 0, il = supportedMapNames.length; i < il; i ++ ) {\n\t\t\t\tvar mapName = supportedMapNames[i];\n\t\t\t\tvar mapSlotName = supportedMapSlotNames[i];\n\n\t\t\t\tvar map = material[ mapSlotName ];\n\n\t\t\t\tmaterial.usedSlots.push( {\n\t\t\t\t\tindex: i,\n\t\t\t\t\tmapUniform: uniforms[mapName],\n\t\t\t\t\tuvUniform: uniforms[ supportedMapUVNames[i] ],\n\t\t\t\t\ttexelUniform: uniforms[ supportedMapTexelNames[i] ]\n\t\t\t\t} );\n\t\t\t}\n\t\t\tmaterial.usedSlotsVersion = material.version;\n\t\t}\n\n\t\tfor( var j = 0, jl = material.usedSlots.length; j < jl; j ++ ) {\n\t\t\tvar usedSlots = material.usedSlots[j];\n\t\t\tvar i = usedSlots.index;\n\n\t\t\tvar mapName = supportedMapNames[i];\n\t\t\tvar mapSlotName = supportedMapSlotNames[i];\n\n\t\t\tvar map = material[ mapSlotName ];\n\t\t\tif( map ) {\n\t\t\t\tusedSlots.mapUniform.value = map.texture;\n\t\t\t\tif( map.texture ) {\n\t\t\t\t\tif( map.uvTransform ) {\n\t\t\t\t\t\tvar value = usedSlots.uvUniform.value;\n\t\t\t\t\t\tvalue.set(\n\t\t\t\t\t\t\tmap.uvRepeat.x,\n\t\t\t\t\t\t\tmap.uvRepeat.y,\n\t\t\t\t\t\t\tmap.uvOffset.x,\n\t\t\t\t\t\t\tmap.uvOffset.y );\n\t\t\t\t\t}\n\t\t\t\t\tif( map.texelTransform ) {\n\t\t\t\t\t\ttexelTransform = map.getFlattenedTexelTransform( texelTransform );\n\t\t\t\t\t\tusedSlots.texelUniform.value.set( texelTransform.texelScale, texelTransform.texelOffset );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if( material[ mapName ] ) {\n\t\t\t\tuniforms[mapName].value = material[mapName];\n\t\t\t}\n\t\t}\n\t\t//uniforms.map.value = material.map;\n\t\t//uniforms.specularMap.value = material.specularMap;\n\t\t//uniforms.alphaMap.value = material.alphaMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\t//uniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap instanceof THREE.WebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tvar offset = uvScaleMap.offset;\n\t\t\tvar repeat = uvScaleMap.repeat;\n\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t}\n\n\t\tuniforms.envMap.value = material.envMap;\n\n\t\t// don't flip CubeTexture envMaps, flip everything else:\n\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\n\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n\t\tuniforms.flipEnvMap.value = ( ! ( material.envMap instanceof THREE.CubeTexture ) ) ? 1 : - 1;\n\n\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t}\n\n\tfunction refreshUniformsCube ( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t}\n\n\tfunction refreshUniformsLine ( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash ( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints ( uniforms, material ) {\n\n\t\tuniforms.diffuse.value = material.color;\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _canvas.clientHeight * 0.5;\n\n\t\tuniforms.map.value = material.map;\n\n\t\tif ( material.map !== null ) {\n\n\t\t\tvar offset = material.map.offset;\n\t\t\tvar repeat = material.map.repeat;\n\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog ( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value = fog.color;\n\n\t\tif ( fog instanceof THREE.Fog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert ( uniforms, material ) {\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong ( uniforms, material ) {\n\n\t\tuniforms.specular.value = material.specular;\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard ( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical ( uniforms, material ) {\n\n\t\tuniforms.clearCoat.value = material.clearCoat;\n\t\tuniforms.clearCoatRoughness.value = material.clearCoatRoughness;\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\t// Lighting\n\n\tfunction setupShadows ( lights ) {\n\n\t\tvar lightShadowsLength = 0;\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t_lights.shadows[ lightShadowsLength ++ ] = light;\n\n\t\t\t}\n\n\t\t}\n\n\t\t_lights.shadows.length = lightShadowsLength;\n\n\t}\n\n\tfunction setupLights ( lights, camera ) {\n\n\t\tvar l, ll, light,\n\t\tr = 0, g = 0, b = 0,\n\t\tcolor,\n\t\tintensity,\n\t\tdistance,\n\t\tshadowMap,\n\n\t\tviewMatrix = camera.matrixWorldInverse,\n\n\t\tdirectionalLength = 0,\n\t\tpointLength = 0,\n\t\tspotLength = 0,\n\t\themiLength = 0;\n\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\n\n\t\t\tlight = lights[ l ];\n\n\t\t\tcolor = light.color;\n\t\t\tintensity = light.intensity;\n\t\t\tdistance = light.distance;\n\n\t\t\tshadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( _vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\n\t\t\t\t\tuniforms.shadowCameraFovNearFar = light.shadow.cameraFovNearFar;\n\n\t\t\t\t}\n\n\t\t\t\t_lights.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t_lights.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\t\t\t\t_lights.directional[ directionalLength ++ ] = uniforms;\n\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( _vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\n\t\t\t\t\tuniforms.shadowCameraFovNearFar = light.shadow.cameraFovNearFar;\n\n\t\t\t\t}\n\n\t\t\t\t_lights.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t_lights.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\t\t\t\t_lights.spot[ spotLength ++ ] = uniforms;\n\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tuniforms.shadowBias = light.shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = light.shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = light.shadow.mapSize;\n\n\t\t\t\t}\n\n\t\t\t\t_lights.pointShadowMap[ pointLength ] = shadowMap;\n\n\t\t\t\tif ( _lights.pointShadowMatrix[ pointLength ] === undefined ) {\n\n\t\t\t\t\t_lights.pointShadowMatrix[ pointLength ] = new THREE.Matrix4();\n\n\t\t\t\t}\n\n\t\t\t\t// for point lights we set the shadow matrix to be a translation-only matrix\n\t\t\t\t// equal to inverse of the light's position\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld ).negate();\n\t\t\t\t_lights.pointShadowMatrix[ pointLength ].identity().setPosition( _vector3 );\n\n\t\t\t\t_lights.point[ pointLength ++ ] = uniforms;\n\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\n\n\t\t\t\tvar uniforms = lightCache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\t_lights.hemi[ hemiLength ++ ] = uniforms;\n\n\t\t\t}\n\n\t\t}\n\n\t\t_lights.ambient[ 0 ] = r;\n\t\t_lights.ambient[ 1 ] = g;\n\t\t_lights.ambient[ 2 ] = b;\n\n\t\t_lights.directional.length = directionalLength;\n\t\t_lights.spot.length = spotLength;\n\t\t_lights.point.length = pointLength;\n\t\t_lights.hemi.length = hemiLength;\n\n\t\t_lights.hash = directionalLength + ',' + pointLength + ',' + spotLength + ',' + hemiLength + ',' + _lights.shadows.length;\n\n\t}\n\n\t// GL state setting\n\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\n\n\t\tstate.setCullFace( cullFace );\n\t\tstate.setFlipSided( frontFaceDirection === THREE.FrontFaceDirectionCW );\n\n\t};\n\n\t// Textures\n\n\tfunction allocTextureUnit() {\n\n\t\tvar textureUnit = _usedTextureUnits;\n\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\n\n\t\t}\n\n\t\t_usedTextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tthis.allocTextureUnit = allocTextureUnit;\n\n\t// this.setTexture2D = setTexture2D;\n\tthis.setTexture2D = ( function() {\n\n\t\tvar warned = false;\n\n\t\t// backwards compatibility: peel texture.texture\n\t\treturn function setTexture2D( texture, slot ) {\n\n\t\t\tif ( texture instanceof THREE.WebGLRenderTarget ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTexture = ( function() {\n\n\t\tvar warned = false;\n\n\t\treturn function setTexture( texture, slot ) {\n\n\t\t\tif ( ! warned ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\n\t\t\t\twarned = true;\n\n\t\t\t}\n\n\t\t\ttextures.setTexture2D( texture, slot );\n\n\t\t};\n\n\t}() );\n\n\tthis.setTextureCube = ( function() {\n\n\t\tvar warned = false;\n\n\t\treturn function setTextureCube( texture, slot ) {\n\n\t\t\t// backwards compatibility: peel texture.texture\n\t\t\tif ( texture instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\t\twarned = true;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = texture.texture;\n\n\t\t\t}\n\n\t\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n\t\t\t// TODO: unify these code paths\n\t\t\tif ( texture instanceof THREE.CubeTexture ||\n\t\t\t\t ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t\t// this function alone should take care of cube textures\n\t\t\t\ttextures.setTextureCube( texture, slot );\n\n\t\t\t} else {\n\n\t\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\n\n\t\t\t\ttextures.setTextureCubeDynamic( texture, slot );\n\n\t\t\t}\n\n\t\t};\n\n\t}() );\n\n\tthis.getCurrentRenderTarget = function() {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\n\t\tvar framebuffer;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\n\t\t} else {\n\n\t\t\tframebuffer = null;\n\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tstate.viewport( _currentViewport );\n\n\t\tif ( isCube ) {\n\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\n\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTarget === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && paramThreeToGL( texture.format ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.type !== THREE.UnsignedByteType &&\n\t\t\t\t     paramThreeToGL( texture.type ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) &&\n\t\t\t\t     ! ( texture.type === THREE.FloatType && extensions.get( 'WEBGL_color_buffer_float' ) ) &&\n\t\t\t\t     ! ( texture.type === THREE.HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, paramThreeToGL( texture.format ), paramThreeToGL( texture.type ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t// Map three.js constants to WebGL constants\n\n\tfunction paramThreeToGL ( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\n\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\n\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\n\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\n\t\tif ( p === THREE.IntType ) return _gl.INT;\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\n\n\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.HalfFloatType ) return extension.HALF_FLOAT_OES;\n\n\t\t}\n\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\n\t\tif ( p === THREE.DepthFormat ) return _gl.DEPTH_COMPONENT;\n\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\n\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\n\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\n\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t}\n\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t}\n\n\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.RGB_ETC1_Format ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n};\n\n// File:src/renderers/WebGLRenderTarget.js\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\n\n\tthis.uuid = THREE.Math.generateUUID();\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new THREE.Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new THREE.Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tif ( options.minFilter === undefined ) options.minFilter = THREE.LinearFilter;\n\n\tthis.texture = new THREE.Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = null;\n\n};\n\nObject.assign( THREE.WebGLRenderTarget.prototype, THREE.EventDispatcher.prototype, {\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n// File:src/renderers/WebGLRenderTargetCube.js\n\n/**\n * @author alteredq / http://alteredqualia.com\n */\n\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\n\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\n\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\n\tthis.activeMipMapLevel = 0;\n\n};\n\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\n\n// File:src/renderers/webgl/WebGLBufferRenderer.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLBufferRenderer = function ( _gl, extensions, _infoRender ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\t_gl.drawArrays( mode, start, count );\n\n\t\t_infoRender.calls ++;\n\t\t_infoRender.vertices += count;\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\n\n\t}\n\n\tfunction renderInstances( geometry ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar position = geometry.attributes.position;\n\n\t\tvar count = 0;\n\n\t\tif ( position instanceof THREE.InterleavedBufferAttribute ) {\n\n\t\t\tcount = position.data.count;\n\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\tcount = position.count;\n\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, count, geometry.maxInstancedCount );\n\n\t\t}\n\n\t\t_infoRender.calls ++;\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\n\n\t}\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n};\n\n// File:src/renderers/webgl/WebGLClipping.js\n\nTHREE.WebGLClipping = function() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new THREE.Plane(),\n\t\tviewNormalMatrix = new THREE.Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\n\tthis.init = function( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function() {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function() {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function( planes, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled ||\n\t\t\t\tplanes === null || planes.length === 0 ||\n\t\t\t\trenderingShadows && ! clipShadows ) {\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset;\n\t\t\t\t\t\t\t\t\ti !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).\n\t\t\t\t\t\t\tapplyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\treturn dstArray;\n\n\t}\n\n};\n\n\n// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLIndexedBufferRenderer = function ( _gl, extensions, _infoRender ) {\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, size;\n\n\tfunction setIndex( index ) {\n\n\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\n\n\t\t\ttype = _gl.UNSIGNED_INT;\n\t\t\tsize = 4;\n\n\t\t} else {\n\n\t\t\ttype = _gl.UNSIGNED_SHORT;\n\t\t\tsize = 2;\n\n\t\t}\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\t_gl.drawElements( mode, count, type, start * size );\n\n\t\t_infoRender.calls ++;\n\t\t_infoRender.vertices += count;\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\n\n\t}\n\n\tfunction renderInstances( geometry, start, count ) {\n\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\textension.drawElementsInstancedANGLE( mode, count, type, start * size, geometry.maxInstancedCount );\n\n\t\t_infoRender.calls ++;\n\t\t_infoRender.vertices += count * geometry.maxInstancedCount;\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += geometry.maxInstancedCount * count / 3;\n\t}\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n};\n\n// File:src/renderers/webgl/WebGLExtensions.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLExtensions = function ( gl ) {\n\n\tvar extensions = {};\n\n\tthis.get = function ( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tvar extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_etc1':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_etc1' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\tif ( extension === null ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t};\n\n};\n\n// File:src/renderers/webgl/WebGLCapabilities.js\n\nTHREE.WebGLCapabilities = function ( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tthis.getMaxAnisotropy = getMaxAnisotropy;\n\tthis.getMaxPrecision = getMaxPrecision;\n\n\tthis.precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tthis.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false;\n\n\tthis.maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tthis.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tthis.maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tthis.maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tthis.maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tthis.maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tthis.maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tthis.maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tthis.vertexTextures = this.maxVertexTextures > 0;\n\tthis.floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\n\tthis.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\n\n\tvar _maxPrecision = getMaxPrecision( this.precision );\n\n\tif ( _maxPrecision !== this.precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', this.precision, 'not supported, using', _maxPrecision, 'instead.' );\n\t\tthis.precision = _maxPrecision;\n\n\t}\n\n\tif ( this.logarithmicDepthBuffer ) {\n\n\t\tthis.logarithmicDepthBuffer = !! extensions.get( 'EXT_frag_depth' );\n\n\t}\n\n};\n\n// File:src/renderers/webgl/WebGLGeometries.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLGeometries = function ( gl, properties, info ) {\n\n\tvar geometries = {};\n\n\tfunction get( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometries[ geometry.id ] !== undefined ) {\n\n\t\t\treturn geometries[ geometry.id ];\n\n\t\t}\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tvar buffergeometry;\n\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new THREE.BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries[ geometry.id ] = buffergeometry;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries[ geometry.id ];\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tdeleteAttribute( buffergeometry.index );\n\n\t\t}\n\n\t\tdeleteAttributes( buffergeometry.attributes );\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\t// TODO\n\n\t\tvar property = properties.get( geometry );\n\n\t\tif ( property.wireframe ) {\n\n\t\t\tdeleteAttribute( property.wireframe );\n\n\t\t}\n\n\t\tproperties.delete( geometry );\n\n\t\tvar bufferproperty = properties.get( buffergeometry );\n\n\t\tif ( bufferproperty.wireframe ) {\n\n\t\t\tdeleteAttribute( bufferproperty.wireframe );\n\n\t\t}\n\n\t\tproperties.delete( buffergeometry );\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction getAttributeBuffer( attribute ) {\n\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\n\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\n\n\t\t}\n\n\t\treturn properties.get( attribute ).__webglBuffer;\n\n\t}\n\n\tfunction deleteAttribute( attribute ) {\n\n\t\tvar buffer = getAttributeBuffer( attribute );\n\n\t\tif ( buffer !== undefined ) {\n\n\t\t\tgl.deleteBuffer( buffer );\n\t\t\tremoveAttributeBuffer( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction deleteAttributes( attributes ) {\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tdeleteAttribute( attributes[ name ] );\n\n\t\t}\n\n\t}\n\n\tfunction removeAttributeBuffer( attribute ) {\n\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\n\n\t\t\tproperties.delete( attribute.data );\n\n\t\t} else {\n\n\t\t\tproperties.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tthis.get = get;\n\n};\n\n// File:src/renderers/webgl/WebGLLights.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLLights = function () {\n\n\tvar lights = {};\n\n\tthis.get = function ( light ) {\n\n\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\treturn lights[ light.id ];\n\n\t\t}\n\n\t\tvar uniforms;\n\n\t\tswitch ( light.type ) {\n\n\t\t\tcase 'DirectionalLight':\n\t\t\t\tuniforms = {\n\t\t\t\t\tdirection: new THREE.Vector3(),\n\t\t\t\t\tcolor: new THREE.Color(),\n\n\t\t\t\t\tshadow: false,\n\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\tshadowMapSize: new THREE.Vector2(),\n\t\t\t\t\tshadowCameraFovNearFar: new THREE.Vector3()\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\t\t\t\tuniforms = {\n\t\t\t\t\tposition: new THREE.Vector3(),\n\t\t\t\t\tdirection: new THREE.Vector3(),\n\t\t\t\t\tcolor: new THREE.Color(),\n\t\t\t\t\tdistance: 0,\n\t\t\t\t\tconeCos: 0,\n\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\tshadow: false,\n\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\tshadowMapSize: new THREE.Vector2(),\n\t\t\t\t\tshadowCameraFovNearFar: new THREE.Vector3()\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\t\t\t\tuniforms = {\n\t\t\t\t\tposition: new THREE.Vector3(),\n\t\t\t\t\tcolor: new THREE.Color(),\n\t\t\t\t\tdistance: 0,\n\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\tshadow: false,\n\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\tshadowMapSize: new THREE.Vector2()\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\t\t\t\tuniforms = {\n\t\t\t\t\tdirection: new THREE.Vector3(),\n\t\t\t\t\tskyColor: new THREE.Color(),\n\t\t\t\t\tgroundColor: new THREE.Color()\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tlights[ light.id ] = uniforms;\n\n\t\treturn uniforms;\n\n\t};\n\n};\n\n// File:src/renderers/webgl/WebGLObjects.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLObjects = function ( gl, properties, info ) {\n\n\tvar geometries = new THREE.WebGLGeometries( gl, properties, info );\n\n\t//\n\n\tfunction update( object ) {\n\n\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\n\n\t\tvar geometry = geometries.get( object );\n\n\t\tif ( object.geometry instanceof THREE.Geometry ) {\n\n\t\t\tgeometry.updateFromObject( object );\n\n\t\t}\n\n\t\tvar index = geometry.index;\n\t\tvar attributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction updateAttribute( attribute, bufferType ) {\n\n\t\tvar data = ( attribute instanceof THREE.InterleavedBufferAttribute ) ? attribute.data : attribute;\n\n\t\tvar attributeProperties = properties.get( data );\n\n\t\tif ( attributeProperties.__webglBuffer === undefined ) {\n\n\t\t\tcreateBuffer( attributeProperties, data, bufferType );\n\n\t\t} else if ( attributeProperties.version !== data.version ) {\n\n\t\t\tupdateBuffer( attributeProperties, data, bufferType );\n\n\t\t}\n\n\t}\n\n\tfunction createBuffer( attributeProperties, data, bufferType ) {\n\n\t\tattributeProperties.__webglBuffer = gl.createBuffer();\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\n\n\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n\n\t\tgl.bufferData( bufferType, data.array, usage );\n\n\t\tattributeProperties.version = data.version;\n\n\t}\n\n\tfunction updateBuffer( attributeProperties, data, bufferType ) {\n\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\n\n\t\tif ( data.dynamic === false || data.updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, data.array );\n\n\t\t} else if ( data.updateRange.count === 0 ) {\n\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\n\n\t\t} else {\n\n\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\n\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\n\n\t\t\tdata.updateRange.count = 0; // reset range\n\n\t\t}\n\n\t\tattributeProperties.version = data.version;\n\n\t}\n\n\tfunction getAttributeBuffer( attribute ) {\n\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\n\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\n\n\t\t}\n\n\t\treturn properties.get( attribute ).__webglBuffer;\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar property = properties.get( geometry );\n\n\t\tif ( property.wireframe !== undefined ) {\n\n\t\t\treturn property.wireframe;\n\n\t\t}\n\n\t\tvar indices = [];\n\n\t\tvar index = geometry.index;\n\t\tvar attributes = geometry.attributes;\n\t\tvar position = attributes.position;\n\n\t\t// console.time( 'wireframe' );\n\n\t\tif ( index !== null ) {\n\n\t\t\tvar edges = {};\n\t\t\tvar array = index.array;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tif ( checkEdge( edges, a, b ) ) indices.push( a, b );\n\t\t\t\tif ( checkEdge( edges, b, c ) ) indices.push( b, c );\n\t\t\t\tif ( checkEdge( edges, c, a ) ) indices.push( c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = attributes.position.array;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// console.timeEnd( 'wireframe' );\n\n\t\tvar TypeArray = position.count > 65535 ? Uint32Array : Uint16Array;\n\t\tvar attribute = new THREE.BufferAttribute( new TypeArray( indices ), 1 );\n\n\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\tproperty.wireframe = attribute;\n\n\t\treturn attribute;\n\n\t}\n\n\tfunction checkEdge( edges, a, b ) {\n\n\t\tif ( a > b ) {\n\n\t\t\tvar tmp = a;\n\t\t\ta = b;\n\t\t\tb = tmp;\n\n\t\t}\n\n\t\tvar list = edges[ a ];\n\n\t\tif ( list === undefined ) {\n\n\t\t\tedges[ a ] = [ b ];\n\t\t\treturn true;\n\n\t\t} else if ( list.indexOf( b ) === -1 ) {\n\n\t\t\tlist.push( b );\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tthis.getAttributeBuffer = getAttributeBuffer;\n\tthis.getWireframeAttribute = getWireframeAttribute;\n\n\tthis.update = update;\n\n};\n\n// File:src/renderers/webgl/WebGLProgram.js\n\nTHREE.WebGLProgram = ( function () {\n\n\tvar programIdCount = 0;\n\n\tfunction getEncodingComponents( encoding ) {\n\n\t\tswitch ( encoding ) {\n\n\t\t\tcase THREE.LinearEncoding:\n\t\t\t\treturn [ 'Linear','( value )' ];\n\t\t\tcase THREE.sRGBEncoding:\n\t\t\t\treturn [ 'sRGB','( value )' ];\n\t\t\tcase THREE.RGBEEncoding:\n\t\t\t\treturn [ 'RGBE','( value )' ];\n\t\t\tcase THREE.RGBM7Encoding:\n\t\t\t\treturn [ 'RGBM','( value, 7.0 )' ];\n\t\t\tcase THREE.RGBM16Encoding:\n\t\t\t\treturn [ 'RGBM','( value, 16.0 )' ];\n\t\t\tcase THREE.RGBDEncoding:\n\t\t\t\treturn [ 'RGBD','( value, 256.0 )' ];\n\t\t\tcase THREE.GammaEncoding:\n\t\t\t\treturn [ 'Gamma','( value, float( GAMMA_FACTOR ) )' ];\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t\t}\n\n\t}\n\n\tfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\t\tvar components = getEncodingComponents( encoding );\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return \" + components[ 0 ] + \"ToLinear\" + components[ 1 ] + \"; }\";\n\n\t}\n\n\tfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\t\tvar components = getEncodingComponents( encoding );\n\t\treturn \"vec4 \" + functionName + \"( vec4 value ) { return LinearTo\" + components[ 0 ] + components[ 1 ] + \"; }\";\n\n\t}\n\n\tfunction getTexelTransformFunction( mapName, map ) {\n\n\t\tif( ! map || ! map.texelTransform ) {\n\t\t\treturn \"vec4 \" + mapName + \"TexelTransform( vec4 value ) { return value; }\\n\";\n\t\t}\n\n\t\tvar transform = map.getFlattenedTexelTransform();\n\t\tvar template = THREE.ShaderChunk[ 'slot_texel_transform_template' ];\n\t\tvar result = template.replace( /\\$SLOT_NAME\\$/g, mapName );\n\t\treturn result;\n\n\t}\n\n\tfunction getUVFunction( mapName, map, isVertexShader ) {\n\n\t\tvar uvVariableName = ( isVertexShader ) ? \"uv\" : \"vUv\";\n\t\tif( map && map.uvChannel > 0 ) {\n\t\t\tuvVariableName += ( map.uvChannel + 1 );\n\t\t}\n\n\t\tif( ! map || ! map.uvTransform ) {\n\t\t\treturn \"vec2 \" + mapName + \"UV() { return \" + uvVariableName + \"; }\\n\";\n\t\t}\n\n\t\tvar transform = map.getFlattenedTexelTransform();\n\t\tvar template = THREE.ShaderChunk[ 'slot_uv_transform_template' ];\n\t\tvar result = template.replace( /\\$SLOT_NAME\\$/g, mapName );\n\t\tresult = result.replace( /\\$UV_VAR_NAME\\$/g, uvVariableName );\n\t\treturn result;\n\n\t}\n\n\tfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\t\tvar toneMappingName;\n\n\t\tswitch ( toneMapping ) {\n\n\t\t\tcase THREE.LinearToneMapping:\n\t\t\t\ttoneMappingName = \"Linear\";\n\t\t\t\tbreak;\n\n\t\t\tcase THREE.ReinhardToneMapping:\n\t\t\t\ttoneMappingName = \"Reinhard\";\n\t\t\t\tbreak;\n\n\t\t\tcase THREE.Uncharted2ToneMapping:\n\t\t\t\ttoneMappingName = \"Uncharted2\";\n\t\t\t\tbreak;\n\n\t\t\tcase THREE.CineonToneMapping:\n\t\t\t\ttoneMappingName = \"OptimizedCineon\";\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t\t}\n\n\t\treturn \"vec3 \" + functionName + \"( vec3 color ) { return \" + toneMappingName + \"ToneMapping( color ); }\";\n\n\t}\n\n\tfunction generateExtensions( extensions, parameters, rendererExtensions ) {\n\n\t\textensions = extensions || {};\n\n\t\tvar chunks = [\n\t\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : '',\n\t\t];\n\n\t\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tfunction generateDefines( defines ) {\n\n\t\tvar chunks = [];\n\n\t\tfor ( var name in defines ) {\n\n\t\t\tvar value = defines[ name ];\n\n\t\t\tif ( value === false ) continue;\n\n\t\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t\t}\n\n\t\treturn chunks.join( '\\n' );\n\n\t}\n\n\tfunction fetchAttributeLocations( gl, program, identifiers ) {\n\n\t\tvar attributes = {};\n\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\t\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\t\tvar info = gl.getActiveAttrib( program, i );\n\t\t\tvar name = info.name;\n\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\n\n\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t\t}\n\n\t\treturn attributes;\n\n\t}\n\n\tfunction filterEmptyLine( string ) {\n\n\t\treturn string !== '';\n\n\t}\n\n\tfunction replaceLightNums( string, parameters ) {\n\n\t\treturn string\n\t\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\n\n\t}\n\n\tfunction parseIncludes( string ) {\n\n\t\tvar pattern = /#include +<([\\w\\d.]+)>/g;\n\n\t\tfunction replace( match, include ) {\n\n\t\t\tvar replace = THREE.ShaderChunk[ include ];\n\n\t\t\tif ( replace === undefined ) {\n\n\t\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t\t\t}\n\n\t\t\treturn parseIncludes( replace );\n\n\t\t}\n\n\t\treturn string.replace( pattern, replace );\n\n\t}\n\n\tfunction unrollLoops( string ) {\n\n\t\tvar pattern = /for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\n\t\tfunction replace( match, start, end, snippet ) {\n\n\t\t\tvar unroll = '';\n\n\t\t\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\t\t\tunroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\n\n\t\t\t}\n\n\t\t\treturn unroll;\n\n\t\t}\n\n\t\treturn string.replace( pattern, replace );\n\n\t}\n\n\treturn function WebGLProgram( renderer, code, material, parameters ) {\n\n\t\tvar gl = renderer.context;\n\n\t\tvar extensions = material.extensions;\n\t\tvar defines = material.defines;\n\n\t\tvar vertexShader = material.__webglShader.vertexShader;\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\n\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t\t} else if ( parameters.shadowMapType === THREE.PCSSSoftShadowMap ) {\n\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCSS';\n\n\t\t}\n\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\n\t\tif ( parameters.envMap ) {\n\n\t\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\t\tcase THREE.CubeReflectionMapping:\n\t\t\t\tcase THREE.CubeRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.CubeUVReflectionMapping:\n\t\t\t\tcase THREE.CubeUVRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.SphericalReflectionMapping:\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tswitch ( material.envMap.mapping ) {\n\n\t\t\t\tcase THREE.CubeRefractionMapping:\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tswitch ( material.combine ) {\n\n\t\t\t\tcase THREE.MultiplyOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.MixOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.AddOperation:\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\t\t// console.log( 'building new program ' );\n\n\t\t//\n\n\t\tvar customExtensions = generateExtensions( extensions, parameters, renderer.extensions );\n\n\t\tvar customDefines = generateDefines( defines );\n\n\t\t//\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar prefixVertex, prefixFragment;\n\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\n\n\t\t\tprefixVertex = [\n\n\t\t\t\tcustomDefines\n\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\t\tprefixFragment = [\n\n\t\t\t\tcustomDefines\n\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\t} else {\n\n\t\t\tprefixVertex = [\n\n\t\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t\t'attribute vec3 position;',\n\t\t\t\t'attribute vec3 normal;',\n\t\t\t\t'attribute vec2 uv;',\n\n\t\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t\t'\tattribute vec3 color;',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t\t'\t#else',\n\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t\t'\t#endif',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t\t'#endif',\n\n\t\t\t\t'\\n'\n\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\t\tprefixFragment = [\n\n\t\t\t\tcustomExtensions,\n\n\t\t\t\t'precision ' + parameters.precision + ' float;',\n\t\t\t\t'precision ' + parameters.precision + ' int;',\n\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\n\n\t\t\t\tcustomDefines,\n\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\n\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\n\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\t\t'#define NUM_CLIPPING_PLANES ' + parameters.numClippingPlanes,\n\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\t\tparameters.premultipliedAlpha ? \"#define PREMULTIPLIED_ALPHA\" : '',\n\n\t\t\t\tparameters.physicallyCorrectLights ? \"#define PHYSICALLY_CORRECT_LIGHTS\" : '',\n\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t\tparameters.envMap && renderer.extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t'uniform vec3 cameraPosition;',\n\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? \"#define TONE_MAPPING\" : '',\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? THREE.ShaderChunk[ 'tonemapping_pars_fragment' ] : '',  // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t\t( parameters.toneMapping !== THREE.NoToneMapping ) ? getToneMappingFunction( \"toneMapping\", parameters.toneMapping ) : '',\n\n\t\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? THREE.ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( \"linearToOutputTexel\", parameters.outputEncoding ) : '',\n\n\t\t\t\tparameters.depthPacking ? \"#define DEPTH_PACKING \" + material.depthPacking : '',\n\n\t\t\t\t'\\n'\n\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\n\t\t}\n\n\n\t\tvar supportedMapNames = THREE.Map.SupportedMapNames;\n\n\t\tvar mapUVChannelsCode = \"\";\n\t\tvar mapTexelTransformCode = \"\";\n\t\tvar mapUvChannels = [];\n\t\tfor( var i = 0; i < supportedMapNames.length; i ++ ) {\n\t\t\tvar mapName = supportedMapNames[i];\n\t\t\tvar map = material[ mapName + 'Slot' ];\n\t\t\tif( material[ mapName ] || ( map && map.texture ) ) {\n\t\t\t\tif( map && ! mapUvChannels[ map.uvChannel ]) mapUvChannels[ map.uvChannel ] = true;\n\t\t\t\tmapTexelTransformCode += getTexelTransformFunction( mapName, map );\n\t\t\t\tmapUVChannelsCode += \"uniform sampler2D \" + mapName + \";\\n\";\n\t\t\t\tmapUVChannelsCode += getUVFunction( mapName, map, false );\n\t\t\t}\n\t\t}\n\t\tif( Object.keys( mapUvChannels ).length > 0 ) {\n\t\t\tvar mapUVPrefix = \"\";\n\t\t\tmapUVPrefix += \"#define TEXTURE_SLOTS\\n\";\n\t\t\tfor( var uvChannel in mapUvChannels ) {\n\t\t\t\tuvChannel = parseInt( uvChannel );\n\t\t\t\tvar uvChannelName = \"vUv\";\n\t\t\t\tif( uvChannel > 0 ) uvChannelName += '' + ( uvChannel + 1 );\n\t\t\t\tmapUVPrefix += \"varying vec2 \" + uvChannelName + \";\\n\";\n\t\t\t}\n\t\t\tprefixFragment += mapUVPrefix + mapUVChannelsCode;\n\t\t}\n\t\tprefixFragment += mapTexelTransformCode;\n\n\t\tvertexShader = parseIncludes( vertexShader, parameters );\n\t\tvertexShader = replaceLightNums( vertexShader, parameters );\n\n\t\tfragmentShader = parseIncludes( fragmentShader, parameters );\n\t\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\n\t\tif ( material instanceof THREE.ShaderMaterial === false ) {\n\n\t\t\tvertexShader = unrollLoops( vertexShader );\n\t\t\tfragmentShader = unrollLoops( fragmentShader );\n\n\t\t}\n\n\t\tvar vertexGlsl = prefixVertex + vertexShader;\n\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t\t// console.log( '*VERTEX*', vertexGlsl );\n\t\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\t\tvar glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\t\tvar glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\t\tgl.attachShader( program, glVertexShader );\n\t\tgl.attachShader( program, glFragmentShader );\n\n\t\t// Force a particular attribute to index 0.\n\n\t\tif ( material.index0AttributeName !== undefined ) {\n\n\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\n\n\t\t} else if ( parameters.morphTargets === true ) {\n\n\t\t\t// programs with morphTargets displace position out of attribute 0\n\t\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t\t}\n\n\t\tgl.linkProgram( program );\n\n\t\tvar programLog = gl.getProgramInfoLog( program );\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\n\n\t\tvar runnable = true;\n\t\tvar haveDiagnostics = true;\n\n\t\t// console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\n\t\t// console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\n\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\t\t\t\tmaterial: material,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\t// clean up\n\n\t\tgl.deleteShader( glVertexShader );\n\t\tgl.deleteShader( glFragmentShader );\n\n\t\t// set up caching for uniform locations\n\n\t\tvar cachedUniforms;\n\n\t\tthis.getUniforms = function() {\n\n\t\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\t\tcachedUniforms =\n\t\t\t\t\t\tnew THREE.WebGLUniforms( gl, program, renderer );\n\n\t\t\t}\n\n\t\t\treturn cachedUniforms;\n\n\t\t};\n\n\t\t// set up caching for attribute locations\n\n\t\tvar cachedAttributes;\n\n\t\tthis.getAttributes = function() {\n\n\t\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t\t}\n\n\t\t\treturn cachedAttributes;\n\n\t\t};\n\n\t\t// free resource\n\n\t\tthis.destroy = function() {\n\n\t\t\tgl.deleteProgram( program );\n\t\t\tthis.program = undefined;\n\n\t\t};\n\n\t\t// DEPRECATED\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tuniforms: {\n\t\t\t\tget: function() {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\n\t\t\t\t\treturn this.getUniforms();\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tattributes: {\n\t\t\t\tget: function() {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\n\t\t\t\t\treturn this.getAttributes();\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\n\t\t//\n\n\t\tthis.id = programIdCount ++;\n\t\tthis.code = code;\n\t\tthis.usedTimes = 1;\n\t\tthis.program = program;\n\t\tthis.vertexShader = glVertexShader;\n\t\tthis.fragmentShader = glFragmentShader;\n\n\t\treturn this;\n\n\t};\n\n} )();\n\n// File:src/renderers/webgl/WebGLPrograms.js\n\nTHREE.WebGLPrograms = function ( renderer, capabilities ) {\n\n\tvar programs = [];\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshCubeMaterial: 'cube',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points'\n\t};\n\n\tvar parameterNames = [\n\t\t\"precision\", \"supportsVertexTextures\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\n\t\t\"emissiveMapEncoding\",\n\t\t\"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"depthPacking\"\n\t];\n\n\tvar supportedMaps = THREE.Map.SupportedMapNames;\n\tfor( var i = 0; i < supportedMaps.length; i ++ ) {\n\t\tvar name = supportedMaps[i];\n\t\tparameterNames.push( name );\n\t\tparameterNames.push( name + 'UVChannel' );\n\t\tparameterNames.push( name + 'UVTransform' );\n\t\tparameterNames.push( name + 'TexelTransform' );\n\t}\n\n\tfunction allocateBones ( object ) {\n\n\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = nVertexMatrices;\n\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\n\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\n\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\n\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map, gammaOverrideLinear ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = THREE.LinearEncoding;\n\n\t\t} else if ( map instanceof THREE.Texture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map instanceof THREE.WebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\t// add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\n\t\tif ( encoding === THREE.LinearEncoding && gammaOverrideLinear ) {\n\n\t\t\tencoding = THREE.GammaEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, fog, nClipPlanes, object ) {\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones = allocateBones( object );\n\t\tvar precision = renderer.getPrecision();\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar currentRenderTarget = renderer.getCurrentRenderTarget();\n\n\t\tvar parameters = {\n\n\t\t\tshaderID: shaderID,\n\n\t\t\tprecision: precision,\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\n\t\t\toutputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\n\t\t\tenvMap: !!material.envMap,\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\n\t\t\tenvMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === THREE.CubeUVReflectionMapping ) || ( material.envMap.mapping === THREE.CubeUVRefractionMapping ) ),\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexColors: material.vertexColors,\n\n\t\t\tfog: fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\n\n\t\t\tflatShading: material.shading === THREE.FlatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && lights.shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: renderer.toneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\n\t\t\tflipSided: material.side === THREE.BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\n\n\t\t};\n\n\t\tvar supportedMapNames = THREE.Map.SupportedMapNames;\n\n\t\tfor( var i = 0; i < supportedMapNames.length; i ++ ) {\n\t\t\tvar mapName = supportedMapNames[i];\n\t\t\tvar mapSlotName = THREE.Map.SupportedMapSlotNames[i];\n\t\t\t// backwards compatibility\n\t\t\tparameters[mapName] = !! material[ mapName ];\n\n\t\t\t// new functional for slot-based maps\n\t\t\tvar map = material[ mapSlotName ];\n\t\t\tparameters[mapName + \"UVChannel\" ] = ( map !== undefined ) ? map.uvChannel : 0;\n\t\t\tparameters[mapName + \"UVTransform\" ] = ( map !== undefined ) ? map.uvTransform : false;\n\t\t\tparameters[mapName + \"TexelTransform\" ] = ( map !== undefined ) ? map.texelTransform : false;\n\t\t}\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCode = function ( material, parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( material.fragmentShader );\n\t\t\tarray.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t}\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( material, parameters, code ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar programInfo = programs[ p ];\n\n\t\t\tif ( programInfo.code === code ) {\n\n\t\t\t\tprogram = programInfo;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new THREE.WebGLProgram( renderer, code, material, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n};\n\n// File:src/renderers/webgl/WebGLProperties.js\n\n/**\n* @author fordacious / fordacious.github.io\n*/\n\nTHREE.WebGLProperties = function () {\n\n\tvar properties = {};\n\n\tthis.get = function ( object ) {\n\n\t\tvar uuid = object.uuid;\n\t\tvar map = properties[ uuid ];\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties[ uuid ] = map;\n\n\t\t}\n\n\t\treturn map;\n\n\t};\n\n\tthis.delete = function ( object ) {\n\n\t\tdelete properties[ object.uuid ];\n\n\t};\n\n\tthis.clear = function () {\n\n\t\tproperties = {};\n\n\t};\n\n};\n\n// File:src/renderers/webgl/WebGLShader.js\n\nTHREE.WebGLShader = ( function () {\n\n\tfunction addLineNumbers( string ) {\n\n\t\tvar lines = string.split( '\\n' );\n\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t\t}\n\n\t\treturn lines.join( '\\n' );\n\n\t}\n\n\treturn function WebGLShader( gl, type, string ) {\n\n\t\tvar shader = gl.createShader( type );\n\n\t\tgl.shaderSource( shader, string );\n\t\tgl.compileShader( shader );\n\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\n\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\n\n\t\t}\n\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\n\n\t\t}\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\treturn shader;\n\n\t};\n\n} )();\n\n// File:src/renderers/webgl/WebGLShadowMap.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.WebGLShadowMap = function ( _renderer, _lights, _objects ) {\n\n\tvar _gl = _renderer.context,\n\t_state = _renderer.state,\n\t_frustum = new THREE.Frustum(),\n\t_projScreenMatrix = new THREE.Matrix4(),\n\n\t_lightShadows = _lights.shadows,\n\n\t_shadowMapSize = new THREE.Vector2(),\n\n\t_lookTarget = new THREE.Vector3(),\n\t_lightPositionWorld = new THREE.Vector3(),\n\n\t_renderList = [],\n\n\t_MorphingFlag = 1,\n\t_SkinningFlag = 2,\n\n\t_NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\n\n\t_depthMaterials = new Array( _NumberOfMaterialVariants ),\n\t_distanceMaterials = new Array( _NumberOfMaterialVariants ),\n\n\t_materialCache = {};\n\n\tvar cubeDirections = [\n\t\tnew THREE.Vector3( 1, 0, 0 ), new THREE.Vector3( - 1, 0, 0 ), new THREE.Vector3( 0, 0, 1 ),\n\t\tnew THREE.Vector3( 0, 0, - 1 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, - 1, 0 )\n\t];\n\n\tvar cubeUps = [\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 1, 0 ),\n\t\tnew THREE.Vector3( 0, 1, 0 ), new THREE.Vector3( 0, 0, 1 ),\tnew THREE.Vector3( 0, 0, - 1 )\n\t];\n\n\tvar cube2DViewPorts = [\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4(),\n\t\tnew THREE.Vector4(), new THREE.Vector4(), new THREE.Vector4()\n\t];\n\n\t// init\n\n\tvar depthMaterialTemplate = new THREE.MeshDepthMaterial();\n\tdepthMaterialTemplate.depthPacking = THREE.RGBADepthPacking;\n\tdepthMaterialTemplate.clipping = true;\n\n\tvar distanceShader = THREE.ShaderLib[ \"distanceRGBA\" ];\n\tvar distanceUniforms = THREE.UniformsUtils.clone( distanceShader.uniforms );\n\n\tfor ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\n\n\t\tvar useMorphing = ( i & _MorphingFlag ) !== 0;\n\t\tvar useSkinning = ( i & _SkinningFlag ) !== 0;\n\n\t\tvar depthMaterial = depthMaterialTemplate.clone();\n\t\tdepthMaterial.morphTargets = useMorphing;\n\t\tdepthMaterial.skinning = useSkinning;\n\n\t\t_depthMaterials[ i ] = depthMaterial;\n\n\t\tvar distanceMaterial = new THREE.ShaderMaterial( {\n\t\t\tdefines: {\n\t\t\t\t'USE_SHADOWMAP': ''\n\t\t\t},\n\t\t\tuniforms: distanceUniforms,\n\t\t\tvertexShader: distanceShader.vertexShader,\n\t\t\tfragmentShader: distanceShader.fragmentShader,\n\t\t\tmorphTargets: useMorphing,\n\t\t\tskinning: useSkinning,\n\t\t\tclipping: true\n\t\t} );\n\n\t\t_distanceMaterials[ i ] = distanceMaterial;\n\n\t}\n\n\t//\n\n\tvar scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = THREE.PCFShadowMap;\n\n\tthis.renderReverseSided = true;\n\tthis.renderSingleSided = true;\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( _lightShadows.length === 0 ) return;\n\n\t\t// Set GL state for depth map.\n\t\t_state.clearColor( 1, 1, 1, 1 );\n\t\t_state.disable( _gl.BLEND );\n\t\t_state.setDepthTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tvar faceCount, isPointLight;\n\n\t\tfor ( var i = 0, il = _lightShadows.length; i < il; i ++ ) {\n\n\t\t\tvar light = _lightShadows[ i ];\n\t\t\tvar shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar shadowCamera = shadow.camera;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tif ( light instanceof THREE.PointLight ) {\n\n\t\t\t\tfaceCount = 6;\n\t\t\t\tisPointLight = true;\n\n\t\t\t\tvar vpWidth = _shadowMapSize.x;\n\t\t\t\tvar vpHeight = _shadowMapSize.y;\n\n\t\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t\t// following orientation:\n\t\t\t\t//\n\t\t\t\t//  xzXZ\n\t\t\t\t//   y Y\n\t\t\t\t//\n\t\t\t\t// X - Positive x direction\n\t\t\t\t// x - Negative x direction\n\t\t\t\t// Y - Positive y direction\n\t\t\t\t// y - Negative y direction\n\t\t\t\t// Z - Positive z direction\n\t\t\t\t// z - Negative z direction\n\n\t\t\t\t// positive X\n\t\t\t\tcube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative X\n\t\t\t\tcube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Z\n\t\t\t\tcube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// negative Z\n\t\t\t\tcube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\n\t\t\t\t// positive Y\n\t\t\t\tcube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\n\t\t\t\t// negative Y\n\t\t\t\tcube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\n\n\t\t\t\t_shadowMapSize.x *= 4.0;\n\t\t\t\t_shadowMapSize.y *= 2.0;\n\n\t\t\t} else {\n\n\t\t\t\tfaceCount = 1;\n\t\t\t\tisPointLight = false;\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tvar pars = { minFilter: THREE.NearestFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\n\n\t\t\t\tshadow.map = new THREE.WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadowCamera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow instanceof THREE.SpotLightShadow ) {\n\n\t\t\t\tshadow.update( light );\n\n\t\t\t}\n\n\t\t\tvar shadowMap = shadow.map;\n\t\t\tvar shadowMatrix = shadow.matrix;\n\n\t\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\t\tshadowCamera.position.copy( _lightPositionWorld );\n\n\t\t\t_renderer.setRenderTarget( shadowMap );\n\t\t\t_renderer.clear();\n\n\t\t\t// render shadow map for each cube face (if omni-directional) or\n\t\t\t// run a single pass if not\n\n\t\t\tfor ( var face = 0; face < faceCount; face ++ ) {\n\n\t\t\t\tif ( isPointLight ) {\n\n\t\t\t\t\t_lookTarget.copy( shadowCamera.position );\n\t\t\t\t\t_lookTarget.add( cubeDirections[ face ] );\n\t\t\t\t\tshadowCamera.up.copy( cubeUps[ face ] );\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\n\t\t\t\t\tvar vpDimensions = cube2DViewPorts[ face ];\n\t\t\t\t\t_state.viewport( vpDimensions );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_lookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\t\tshadowCamera.lookAt( _lookTarget );\n\n\t\t\t\t}\n\n\t\t\t\tshadowCamera.updateMatrixWorld();\n\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\n\n\t\t\t\t// compute shadow matrix\n\n\t\t\t\tshadowMatrix.set(\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t\t);\n\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t\t\t\t// update camera matrices and frustum\n\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t\t\t// set object matrices & frustum culling\n\n\t\t\t\t_renderList.length = 0;\n\n\t\t\t\tprojectObject( scene, camera, shadowCamera );\n\n\t\t\t\t// render shadow map\n\t\t\t\t// render regular objects\n\n\t\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar object = _renderList[ j ];\n\t\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( material instanceof THREE.MultiMaterial ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\t\t\t\t\t\tvar materials = material.materials;\n\n\t\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\n\n\t\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld );\n\t\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld );\n\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Restore GL state.\n\t\tvar clearColor = _renderer.getClearColor(),\n\t\tclearAlpha = _renderer.getClearAlpha();\n\t\t_renderer.setClearColor( clearColor, clearAlpha );\n\n\t\tscope.needsUpdate = false;\n\n\t};\n\n\tfunction getDepthMaterial( object, material, isPointLight, lightPositionWorld ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tvar result = null;\n\n\t\tvar materialVariants = _depthMaterials;\n\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\tif ( isPointLight ) {\n\n\t\t\tmaterialVariants = _distanceMaterials;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( ! customMaterial ) {\n\n\t\t\tvar useMorphing = geometry.morphTargets !== undefined &&\n\t\t\t\t\tgeometry.morphTargets.length > 0 && material.morphTargets;\n\n\t\t\tvar useSkinning = object instanceof THREE.SkinnedMesh && material.skinning;\n\n\t\t\tvar variantIndex = 0;\n\n\t\t\tif ( useMorphing ) variantIndex |= _MorphingFlag;\n\t\t\tif ( useSkinning ) variantIndex |= _SkinningFlag;\n\n\t\t\tresult = materialVariants[ variantIndex ];\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t material.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tvar side = material.side;\n\n\t\tif ( scope.renderSingleSided && side == THREE.DoubleSide ) {\n\n\t\t\tside = THREE.FrontSide;\n\n\t\t}\n\n\t\tif ( scope.renderReverseSided ) {\n\n\t\t\tif ( side === THREE.FrontSide ) side = THREE.BackSide;\n\t\t\telse if ( side === THREE.BackSide ) side = THREE.FrontSide;\n\n\t\t}\n\n\t\tresult.side = side;\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( isPointLight && result.uniforms.lightPos !== undefined ) {\n\n\t\t\tresult.uniforms.lightPos.value.copy( lightPositionWorld );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction projectObject( object, camera, shadowCamera ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tif ( object.layers.test( camera.layers ) && ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) ) {\n\n\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\n\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( material.visible === true ) {\n\n\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\t\t\t\t\t_renderList.push( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, shadowCamera );\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/renderers/webgl/WebGLState.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLState = function ( gl, extensions, paramThreeToGL ) {\n\n\tvar _this = this;\n\n\tthis.buffers = {\n\t\tcolor: new THREE.WebGLColorBuffer( gl, this ),\n\t\tdepth: new THREE.WebGLDepthBuffer( gl, this ),\n\t\tstencil: new THREE.WebGLStencilBuffer( gl, this )\n\t};\n\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar capabilities = {};\n\n\tvar compressedTextureFormats = null;\n\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar currentScissorTest = null;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new THREE.Vector4();\n\tvar currentViewport = new THREE.Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t//\n\n\tthis.init = function () {\n\n\t\tthis.clearColor( 0, 0, 0, 1 );\n\t\tthis.clearDepth( 1 );\n\t\tthis.clearStencil( 0 );\n\n\t\tthis.enable( gl.DEPTH_TEST );\n\t\tthis.setDepthFunc( THREE.LessEqualDepth );\n\n\t\tthis.setFlipSided( false );\n\t\tthis.setCullFace( THREE.CullFaceBack );\n\t\tthis.enable( gl.CULL_FACE );\n\n\t\tthis.enable( gl.BLEND );\n\t\tthis.setBlending( THREE.NormalBlending );\n\n\t};\n\n\tthis.initAttributes = function () {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t};\n\n\tthis.enableAttribute = function ( attribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== 0 ) {\n\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, 0 );\n\t\t\tattributeDivisors[ attribute ] = 0;\n\n\t\t}\n\n\t};\n\n\tthis.enableAttributeAndDivisor = function ( attribute, meshPerAttribute, extension ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\textension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t};\n\n\tthis.disableUnusedAttributes = function () {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.enable = function ( id ) {\n\n\t\tif ( capabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tcapabilities[ id ] = true;\n\n\t\t}\n\n\t};\n\n\tthis.disable = function ( id ) {\n\n\t\tif ( capabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tcapabilities[ id ] = false;\n\n\t\t}\n\n\t};\n\n\tthis.getCompressedTextureFormats = function () {\n\n\t\tif ( compressedTextureFormats === null ) {\n\n\t\t\tcompressedTextureFormats = [];\n\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_etc1' ) ) {\n\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\n\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\n\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn compressedTextureFormats;\n\n\t};\n\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending !== THREE.NoBlending ) {\n\n\t\t\tthis.enable( gl.BLEND );\n\n\t\t} else {\n\n\t\t\tthis.disable( gl.BLEND );\n\t\t\tcurrentBlending = blending; // no blending, that is\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\tif ( blending === THREE.AdditiveBlending ) {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\n\t\t\t\t}\n\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\n\t\t\t\t}\n\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\n\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcurrentBlending = blending;\n\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t}\n\n\t\tif ( blending === THREE.CustomBlending ) {\n\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\n\n\t\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\t\t\t\tconsole.log(\"setting custom blend state\", blendEquation, blendEquationAlpha );\n\t\t\t}\n\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\n\t\t\t\tconsole.log(\"setting custom blend state\", blendSrc, blendDst, blendSrcAlpha, blendDstAlpha );\n\n\t\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\t\tcurrentBlendDst = blendDst;\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tcurrentBlendEquation = null;\n\t\t\tcurrentBlendSrc = null;\n\t\t\tcurrentBlendDst = null;\n\t\t\tcurrentBlendEquationAlpha = null;\n\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t}\n\n\t};\n\n\t// TODO Deprecate\n\n\tthis.setColorWrite = function ( colorWrite ) {\n\n\t\tthis.buffers.color.setMask( colorWrite );\n\n\t};\n\n\tthis.setDepthTest = function ( depthTest ) {\n\n\t\tthis.buffers.depth.setTest( depthTest );\n\n\t};\n\n\tthis.setDepthWrite = function ( depthWrite ) {\n\n\t\tthis.buffers.depth.setMask( depthWrite );\n\n\t};\n\n\tthis.setDepthFunc = function ( depthFunc ) {\n\n\t\tthis.buffers.depth.setFunc( depthFunc );\n\n\t};\n\n\tthis.setStencilTest = function ( stencilTest ) {\n\n\t\tthis.buffers.stencil.setTest( stencilTest );\n\n\t};\n\n\tthis.setStencilWrite = function ( stencilWrite ) {\n\n\t\tthis.buffers.stencil.setMask( stencilWrite );\n\n\t};\n\n\tthis.setStencilFunc = function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\tthis.buffers.stencil.setFunc( stencilFunc, stencilRef, stencilMask );\n\n\t};\n\n\tthis.setStencilOp = function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\tthis.buffers.stencil.setOp( stencilFail, stencilZFail, stencilZPass );\n\n\t};\n\n\t//\n\n\tthis.setFlipSided = function ( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t};\n\n\tthis.setCullFace = function ( cullFace ) {\n\n\t\tif ( cullFace !== THREE.CullFaceNone ) {\n\n\t\t\tthis.enable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === THREE.CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.disable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t};\n\n\tthis.setLineWidth = function ( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tgl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t};\n\n\tthis.setPolygonOffset = function ( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tthis.enable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.disable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn currentScissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( scissorTest ) {\n\n\t\tcurrentScissorTest = scissorTest;\n\n\t\tif ( scissorTest ) {\n\n\t\t\tthis.enable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tthis.disable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t};\n\n\t// texture\n\n\tthis.activeTexture = function ( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t};\n\n\tthis.bindTexture = function ( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\t_this.activeTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t};\n\n\tthis.compressedTexImage2D = function () {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( error );\n\n\t\t}\n\n\t};\n\n\tthis.texImage2D = function () {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( error );\n\n\t\t}\n\n\t};\n\n\t// TODO Deprecate\n\n\tthis.clearColor = function ( r, g, b, a ) {\n\n\t\tthis.buffers.color.setClear( r, g, b, a );\n\n\t};\n\n\tthis.clearDepth = function ( depth ) {\n\n\t\tthis.buffers.depth.setClear( depth );\n\n\t};\n\n\tthis.clearStencil = function ( stencil ) {\n\n\t\tthis.buffers.stencil.setClear( stencil );\n\n\t};\n\n\t//\n\n\tthis.scissor = function ( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t};\n\n\tthis.viewport = function ( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t};\n\n\t//\n\n\tthis.reset = function () {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcapabilities = {};\n\n\t\tcompressedTextureFormats = null;\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tthis.buffers.color.reset();\n\t\tthis.buffers.depth.reset();\n\t\tthis.buffers.stencil.reset();\n\n\t};\n\n};\n\nTHREE.WebGLColorBuffer = function ( gl, state ) {\n\n\tvar locked = false;\n\n\tvar color = new THREE.Vector4();\n\tvar currentColorMask = null;\n\tvar currentColorClear = new THREE.Vector4();\n\n\tthis.setMask = function ( colorMask ) {\n\n\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\tcurrentColorMask = colorMask;\n\n\t\t}\n\n\t};\n\n\tthis.setLocked = function ( lock ) {\n\n\t\tlocked = lock;\n\n\t};\n\n\tthis.setClear = function ( r, g, b, a ) {\n\n\t\tcolor.set( r, g, b, a );\n\n\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\tgl.clearColor( r, g, b, a );\n\t\t\tcurrentColorClear.copy( color );\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tlocked = false;\n\n\t\tcurrentColorMask = null;\n\t\tcurrentColorClear = new THREE.Vector4();\n\n\t};\n\n};\n\nTHREE.WebGLDepthBuffer = function( gl, state ) {\n\n\tvar locked = false;\n\n\tvar currentDepthMask = null;\n\tvar currentDepthFunc = null;\n\tvar currentDepthClear = null;\n\n\tthis.setTest = function ( depthTest ) {\n\n\t\tif ( depthTest ) {\n\n\t\t\tstate.enable( gl.DEPTH_TEST );\n\n\t\t} else {\n\n\t\t\tstate.disable( gl.DEPTH_TEST );\n\n\t\t}\n\n\t};\n\n\tthis.setMask = function( depthMask ){\n\n\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\tgl.depthMask( depthMask );\n\t\t\tcurrentDepthMask = depthMask;\n\n\t\t}\n\n\t};\n\n\tthis.setFunc = function ( depthFunc ) {\n\n\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\tif ( depthFunc ) {\n\n\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\tcase THREE.NeverDepth:\n\n\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.AlwaysDepth:\n\n\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.LessDepth:\n\n\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.LessEqualDepth:\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.EqualDepth:\n\n\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.GreaterEqualDepth:\n\n\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.GreaterDepth:\n\n\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.NotEqualDepth:\n\n\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t}\n\n\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t}\n\n\t};\n\n\tthis.setLocked = function ( lock ) {\n\n\t\tlocked = lock;\n\n\t};\n\n\tthis.setClear = function ( depth ) {\n\n\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\tgl.clearDepth( depth );\n\t\t\tcurrentDepthClear = depth;\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tlocked = false;\n\n\t\tcurrentDepthMask = null;\n\t\tcurrentDepthFunc = null;\n\t\tcurrentDepthClear = null;\n\n\t};\n\n};\n\nTHREE.WebGLStencilBuffer = function ( gl, state ) {\n\n\tvar locked = false;\n\n\tvar currentStencilMask = null;\n\tvar currentStencilFunc = null;\n\tvar currentStencilRef = null;\n\tvar currentStencilFuncMask = null;\n\tvar currentStencilFail  = null;\n\tvar currentStencilZFail = null;\n\tvar currentStencilZPass = null;\n\tvar currentStencilClear = null;\n\n\tthis.setTest = function ( stencilTest ) {\n\n\t\tif ( stencilTest ) {\n\n\t\t\tstate.enable( gl.STENCIL_TEST );\n\n\t\t} else {\n\n\t\t\tstate.disable( gl.STENCIL_TEST );\n\n\t\t}\n\n\t};\n\n\tthis.setMask = function ( stencilMask ) {\n\n\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\tgl.stencilMask( stencilMask );\n\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t}\n\n\t};\n\n\tthis.setFunc = function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\tgl.stencilFunc( stencilFunc,  stencilRef, stencilMask );\n\n\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\tcurrentStencilRef  = stencilRef;\n\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t}\n\n\t};\n\n\tthis.setOp\t = function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t     currentStencilZFail !== stencilZFail ||\n\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\tgl.stencilOp( stencilFail,  stencilZFail, stencilZPass );\n\n\t\t\tcurrentStencilFail  = stencilFail;\n\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t}\n\n\t};\n\n\tthis.setLocked = function ( lock ) {\n\n\t\tlocked = lock;\n\n\t};\n\n\tthis.setClear = function ( stencil ) {\n\n\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\tgl.clearStencil( stencil );\n\t\t\tcurrentStencilClear = stencil;\n\n\t\t}\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tlocked = false;\n\n\t\tcurrentStencilMask = null;\n\t\tcurrentStencilFunc = null;\n\t\tcurrentStencilRef = null;\n\t\tcurrentStencilFuncMask = null;\n\t\tcurrentStencilFail = null;\n\t\tcurrentStencilZFail = null;\n\t\tcurrentStencilZPass = null;\n\t\tcurrentStencilClear = null;\n\n\t};\n\n};\n\n// File:src/renderers/webgl/WebGLTextures.js\n\n/**\n* @author mrdoob / http://mrdoob.com/\n*/\n\nTHREE.WebGLTextures = function ( _gl, extensions, state, properties, capabilities, paramThreeToGL, info ) {\n\n\tvar _infoMemory = info.memory;\n\tvar _isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext );\n\n\t//\n\n\tfunction clampToMaxSize ( image, maxSize ) {\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\n\t\t\t// premultiplied alpha.\n\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = Math.floor( image.width * scale );\n\t\t\tcanvas.height = Math.floor( image.height * scale );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction makePowerOfTwo( image ) {\n\n\t\tif ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement ) {\n\n\t\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\t\tcanvas.width = THREE.Math.nearestPowerOfTwo( image.width );\n\t\t\tcanvas.height = THREE.Math.nearestPowerOfTwo( image.height );\n\n\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\n\n\t\t\treturn canvas;\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) return true;\n\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) return true;\n\n\t\treturn false;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback ( f ) {\n\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\t_infoMemory.textures --;\n\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\t_infoMemory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\n\n\t\t\t// cube texture\n\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\n\n\t\t} else {\n\n\t\t\t// 2D texture\n\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\t// remove all webgl properties\n\t\tproperties.delete( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t}\n\n\t\tproperties.delete( renderTarget.texture );\n\t\tproperties.delete( renderTarget );\n\n\t}\n\n\t//\n\n\n\t var textureUpdateUndefinedWarning = false;\n\t var textureUpdateIncompleteWarning = false;\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tif( ! textureUpdateUndefinedWarning ) {\n\t\t\t\t\tconsole.trace( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\n\t\t\t\t\ttextureUpdateUndefinedWarning = true;\n\t\t\t\t}\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tif( ! textureUpdateIncompleteWarning ) {\n\t\t\t\t\tconsole.trace( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\n\t\t\t\t\ttextureUpdateIncompleteWarning = true;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube ( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.image.length === 6 ) {\n\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\n\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\n\n\t\t\t\t\t_infoMemory.textures ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\n\n\t\t\t\tvar cubeImage = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\tisPowerOfTwoImage = isPowerOfTwo( image ),\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\n\t\t\t\tglType = paramThreeToGL( texture.type );\n\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( ! isCompressed ) {\n\n\t\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\n\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()\" );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) {\n\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t\t} else {\n\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic ( texture, slot ) {\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tfunction setTextureParameters ( textureType, texture, isPowerOfTwoImage ) {\n\n\t\tvar extension;\n\n\t\tif ( isPowerOfTwoImage ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === THREE.FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === THREE.HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t_infoMemory.textures ++;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tvar image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\n\n\t\tif ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\n\n\t\t\timage = makePowerOfTwo( image );\n\n\t\t}\n\n\t\tvar isPowerOfTwoImage = isPowerOfTwo( image ),\n\t\tglFormat = paramThreeToGL( texture.format ),\n\t\tglType = paramThreeToGL( texture.type );\n\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture instanceof THREE.DepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tvar internalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( texture.type === THREE.FloatType ) {\n\n\t\t\t\tif ( !_isWebGL2 ) throw new Error('Float Depth Texture only supported in WebGL2.0');\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t} else if ( _isWebGL2 ) {\n\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\tinternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\t}\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture instanceof THREE.DataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t}\n\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\n\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && isPowerOfTwoImage ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( texture.generateMipmaps && isPowerOfTwoImage ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture ( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = paramThreeToGL( renderTarget.texture.format );\n\t\tvar glType = paramThreeToGL( renderTarget.texture.type );\n\t\tstate.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage ( renderbuffer, renderTarget ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\t// FIXME: We don't support !depth !stencil\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture ( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\n\t\tif ( isCube ) throw new Error('Depth Texture with cube render targets is not supported!');\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( !( renderTarget.depthTexture instanceof THREE.DepthTexture ) ) {\n\n\t\t\tthrow new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( !properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error('target.depthTexture not supported in Cube render targets');\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t_infoMemory.textures ++;\n\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\n\t\tvar isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( renderTarget.texture.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\n\t\tif ( texture.generateMipmaps && isPowerOfTwo( renderTarget ) &&\n\t\t\t\ttexture.minFilter !== THREE.NearestFilter &&\n\t\t\t\ttexture.minFilter !== THREE.LinearFilter ) {\n\n\t\t\tvar target = renderTarget instanceof THREE.WebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t_gl.generateMipmap( target );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\n};\n\n// File:src/renderers/webgl/WebGLUniforms.js\n\n/**\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [renderer] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'renderer' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (renderer factorizations):\n *\n * .upload( gl, seq, values, renderer )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n * .splitDynamic( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with dynamic entry and removes them from 'seq'\n *\n *\n * Methods of the top-level container (renderer factorizations):\n *\n * .setValue( gl, name, value )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .set( gl, obj, prop )\n *\n * \t\tsets uniform from object and property with same name than uniform\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n *\n * @author tschw\n *\n */\n\nTHREE.WebGLUniforms = ( function() { // scope\n\n\tvar emptyTexture = new THREE.Texture();\n\tvar emptyCubeTexture = new THREE.CubeTexture();\n\n\t// --- Base for inner nodes (including the root) ---\n\n\tvar UniformContainer = function() {\n\n\t\t\tthis.seq = [];\n\t\t\tthis.map = {};\n\n\t\t},\n\n\t// --- Utilities ---\n\n\t// Array Caches (provide typed arrays for temporary by size)\n\n\t\tarrayCacheF32 = [],\n\t\tarrayCacheI32 = [],\n\n\t\tuncacheTemporaryArrays = function() {\n\n\t\t\tarrayCacheF32.length = 0;\n\t\t\tarrayCacheI32.length = 0;\n\n\t\t},\n\n\t// Flattening for arrays of vectors and matrices\n\n\t\tflatten = function( array, nBlocks, blockSize ) {\n\n\t\t\tvar firstElem = array[ 0 ];\n\n\t\t\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t\t\t// unoptimized: ! isNaN( firstElem )\n\t\t\t// see http://jacksondunstan.com/articles/983\n\n\t\t\tvar n = nBlocks * blockSize,\n\t\t\t\tr = arrayCacheF32[ n ];\n\n\t\t\tif ( r === undefined ) {\n\n\t\t\t\tr = new Float32Array( n );\n\t\t\t\tarrayCacheF32[ n ] = r;\n\n\t\t\t}\n\n\t\t\tif ( nBlocks !== 0 ) {\n\n\t\t\t\tfirstElem.toArray( r, 0 );\n\n\t\t\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\t\t\toffset += blockSize;\n\t\t\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn r;\n\n\t\t},\n\n\t// Texture unit allocation\n\n\t\tallocTexUnits = function( renderer, n ) {\n\n\t\t\tvar r = arrayCacheI32[ n ];\n\n\t\t\tif ( r === undefined ) {\n\n\t\t\t\tr = new Int32Array( n );\n\t\t\t\tarrayCacheI32[ n ] = r;\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tr[ i ] = renderer.allocTextureUnit();\n\n\t\t\treturn r;\n\n\t\t},\n\n\t// --- Setters ---\n\n\t// Note: Defining these methods externally, because they come in a bunch\n\t// and this way their names minify.\n\n\t\t// Single scalar\n\n\t\tsetValue1f = function( gl, v ) { gl.uniform1f( this.addr, v ); },\n\t\tsetValue1i = function( gl, v ) { gl.uniform1i( this.addr, v ); },\n\n\t\t// Single float vector (from flat array or THREE.VectorN)\n\n\t\tsetValue2fv = function( gl, v ) {\n\n\t\t\tif ( v.x === undefined ) gl.uniform2fv( this.addr, v );\n\t\t\telse gl.uniform2f( this.addr, v.x, v.y );\n\n\t\t},\n\n\t\tsetValue3fv = function( gl, v ) {\n\n\t\t\tif ( v.x !== undefined )\n\t\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\t\t\telse if ( v.r !== undefined )\n\t\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\t\t\telse\n\t\t\t\tgl.uniform3fv( this.addr, v );\n\n\t\t},\n\n\t\tsetValue4fv = function( gl, v ) {\n\n\t\t\tif ( v.x === undefined ) gl.uniform4fv( this.addr, v );\n\t\t\telse gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t},\n\n\t\t// Single matrix (from flat array or MatrixN)\n\n\t\tsetValue2fm = function( gl, v ) {\n\n\t\t\tgl.uniformMatrix2fv( this.addr, false, v.elements || v );\n\n\t\t},\n\n\t\tsetValue3fm = function( gl, v ) {\n\n\t\t\tgl.uniformMatrix3fv( this.addr, false, v.elements || v );\n\n\t\t},\n\n\t\tsetValue4fm = function( gl, v ) {\n\n\t\t\tgl.uniformMatrix4fv( this.addr, false, v.elements || v );\n\n\t\t},\n\n\t\t// Single texture (2D / Cube)\n\n\t\tsetValueT1 = function( gl, v, renderer ) {\n\n\t\t\tvar unit = renderer.allocTextureUnit();\n\t\t\tgl.uniform1i( this.addr, unit );\n\t\t\trenderer.setTexture2D( v || emptyTexture, unit );\n\n\t\t},\n\n\t\tsetValueT6 = function( gl, v, renderer ) {\n\n\t\t\tvar unit = renderer.allocTextureUnit();\n\t\t\tgl.uniform1i( this.addr, unit );\n\t\t\trenderer.setTextureCube( v || emptyCubeTexture, unit );\n\n\t\t},\n\n\t\t// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\n\t\tsetValue2iv = function( gl, v ) { gl.uniform2iv( this.addr, v ); },\n\t\tsetValue3iv = function( gl, v ) { gl.uniform3iv( this.addr, v ); },\n\t\tsetValue4iv = function( gl, v ) { gl.uniform4iv( this.addr, v ); },\n\n\t\t// Helper to pick the right setter for the singular case\n\n\t\tgetSingularSetter = function( type ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0x1406: return setValue1f; // FLOAT\n\t\t\t\tcase 0x8b50: return setValue2fv; // _VEC2\n\t\t\t\tcase 0x8b51: return setValue3fv; // _VEC3\n\t\t\t\tcase 0x8b52: return setValue4fv; // _VEC4\n\n\t\t\t\tcase 0x8b5a: return setValue2fm; // _MAT2\n\t\t\t\tcase 0x8b5b: return setValue3fm; // _MAT3\n\t\t\t\tcase 0x8b5c: return setValue4fm; // _MAT4\n\n\t\t\t\tcase 0x8b5e: return setValueT1; // SAMPLER_2D\n\t\t\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\n\n\t\t\t\tcase 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\n\t\t\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\t\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\t\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t\t\t}\n\n\t\t},\n\n\t\t// Array of scalars\n\n\t\tsetValue1fv = function( gl, v ) { gl.uniform1fv( this.addr, v ); },\n\t\tsetValue1iv = function( gl, v ) { gl.uniform1iv( this.addr, v ); },\n\n\t\t// Array of vectors (flat or from THREE classes)\n\n\t\tsetValueV2a = function( gl, v ) {\n\n\t\t\tgl.uniform2fv( this.addr, flatten( v, this.size, 2 ) );\n\n\t\t},\n\n\t\tsetValueV3a = function( gl, v ) {\n\n\t\t\tgl.uniform3fv( this.addr, flatten( v, this.size, 3 ) );\n\n\t\t},\n\n\t\tsetValueV4a = function( gl, v ) {\n\n\t\t\tgl.uniform4fv( this.addr, flatten( v, this.size, 4 ) );\n\n\t\t},\n\n\t\t// Array of matrices (flat or from THREE clases)\n\n\t\tsetValueM2a = function( gl, v ) {\n\n\t\t\tgl.uniformMatrix2fv( this.addr, false, flatten( v, this.size, 4 ) );\n\n\t\t},\n\n\t\tsetValueM3a = function( gl, v ) {\n\n\t\t\tgl.uniformMatrix3fv( this.addr, false, flatten( v, this.size, 9 ) );\n\n\t\t},\n\n\t\tsetValueM4a = function( gl, v ) {\n\n\t\t\tgl.uniformMatrix4fv( this.addr, false, flatten( v, this.size, 16 ) );\n\n\t\t},\n\n\t\t// Array of textures (2D / Cube)\n\n\t\tsetValueT1a = function( gl, v, renderer ) {\n\n\t\t\tvar n = v.length,\n\t\t\t\tunits = allocTexUnits( renderer, n );\n\n\t\t\tgl.uniform1iv( this.addr, units );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\t\t\trenderer.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t\t\t}\n\n\t\t},\n\n\t\tsetValueT6a = function( gl, v, renderer ) {\n\n\t\t\tvar n = v.length,\n\t\t\t\tunits = allocTexUnits( renderer, n );\n\n\t\t\tgl.uniform1iv( this.addr, units );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\t\t\trenderer.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t\t\t}\n\n\t\t},\n\n\n\t\t// Helper to pick the right setter for a pure (bottom-level) array\n\n\t\tgetPureArraySetter = function( type ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0x1406: return setValue1fv; // FLOAT\n\t\t\t\tcase 0x8b50: return setValueV2a; // _VEC2\n\t\t\t\tcase 0x8b51: return setValueV3a; // _VEC3\n\t\t\t\tcase 0x8b52: return setValueV4a; // _VEC4\n\n\t\t\t\tcase 0x8b5a: return setValueM2a; // _MAT2\n\t\t\t\tcase 0x8b5b: return setValueM3a; // _MAT3\n\t\t\t\tcase 0x8b5c: return setValueM4a; // _MAT4\n\n\t\t\t\tcase 0x8b5e: return setValueT1a; // SAMPLER_2D\n\t\t\t\tcase 0x8b60: return setValueT6a; // SAMPLER_CUBE\n\n\t\t\t\tcase 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\n\t\t\t\tcase 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\n\t\t\t\tcase 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\n\t\t\t\tcase 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\n\n\t\t\t}\n\n\t\t},\n\n\t// --- Uniform Classes ---\n\n\t\tSingleUniform = function SingleUniform( id, activeInfo, addr ) {\n\n\t\t\tthis.id = id;\n\t\t\tthis.addr = addr;\n\t\t\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t\t\t// this.path = activeInfo.name; // DEBUG\n\n\t\t},\n\n\t\tPureArrayUniform = function( id, activeInfo, addr ) {\n\n\t\t\tthis.id = id;\n\t\t\tthis.addr = addr;\n\t\t\tthis.size = activeInfo.size;\n\t\t\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t\t\t// this.path = activeInfo.name; // DEBUG\n\n\t\t},\n\n\t\tStructuredUniform = function( id ) {\n\n\t\t\tthis.id = id;\n\n\t\t\tUniformContainer.call( this ); // mix-in\n\n\t\t};\n\n\tStructuredUniform.prototype.setValue = function( gl, value ) {\n\n\t\t// Note: Don't need an extra 'renderer' parameter, since samplers\n\t\t// are not allowed in structured uniforms.\n\n\t\tvar seq = this.seq;\n\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tvar u = seq[ i ];\n\t\t\tu.setValue( gl, value[ u.id ] );\n\n\t\t}\n\n\t};\n\n\t// --- Top-level ---\n\n\t// Parser - builds up the property tree from the path strings\n\n\tvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g,\n\t\t// extracts\n\t\t// \t- the identifier (member name or array index)\n\t\t//  - followed by an optional right bracket (found when array index)\n\t\t//  - followed by an optional left bracket or dot (type of subscript)\n\t\t//\n\t\t// Note: These portions can be read in a non-overlapping fashion and\n\t\t// allow straightforward parsing of the hierarchy that WebGL encodes\n\t\t// in the uniform names.\n\n\t\taddUniform = function( container, uniformObject ) {\n\n\t\t\tcontainer.seq.push( uniformObject );\n\t\t\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n\t\t},\n\n\t\tparseUniform = function( activeInfo, addr, container ) {\n\n\t\t\tvar path = activeInfo.name,\n\t\t\t\tpathLength = path.length;\n\n\t\t\t// reset RegExp object, because of the early exit of a previous run\n\t\t\tRePathPart.lastIndex = 0;\n\n\t\t\tfor (; ;) {\n\n\t\t\t\tvar match = RePathPart.exec( path ),\n\t\t\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\t\t\tid = match[ 1 ],\n\t\t\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\t\t\tsubscript = match[ 3 ];\n\n\t\t\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\t\t\tif ( subscript === undefined ||\n\t\t\t\t\t\tsubscript === '[' && matchEnd + 2 === pathLength ) {\n\t\t\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t} else {\n\t\t\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\t\t\tvar map = container.map,\n\t\t\t\t\t\tnext = map[ id ];\n\n\t\t\t\t\tif ( next === undefined ) {\n\n\t\t\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\t\t\taddUniform( container, next );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontainer = next;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t// Root Container\n\n\t\tWebGLUniforms = function WebGLUniforms( gl, program, renderer ) {\n\n\t\t\tUniformContainer.call( this );\n\n\t\t\tthis.renderer = renderer;\n\n\t\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\t\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\t\t\tpath = info.name,\n\t\t\t\t\taddr = gl.getUniformLocation( program, path );\n\n\t\t\t\tparseUniform( info, addr, this );\n\n\t\t\t}\n\n\t\t};\n\n\n\tWebGLUniforms.prototype.setValue = function( gl, name, value ) {\n\n\t\tvar u = this.map[ name ];\n\n\t\tif ( u !== undefined ) u.setValue( gl, value, this.renderer );\n\n\t};\n\n\tWebGLUniforms.prototype.set = function( gl, object, name ) {\n\n\t\tvar u = this.map[ name ];\n\n\t\tif ( u !== undefined ) u.setValue( gl, object[ name ], this.renderer );\n\n\t};\n\n\tWebGLUniforms.prototype.setOptional = function( gl, object, name ) {\n\n\t\tvar v = object[ name ];\n\n\t\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n\t};\n\n\n\t// Static interface\n\n\tWebGLUniforms.upload = function( gl, seq, values, renderer ) {\n\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tvar u = seq[ i ],\n\t\t\t\tv = values[ u.id ];\n\n\t\t\tif ( v.needsUpdate !== false ) {\n\t\t\t\t// note: always updating when .needsUpdate is undefined\n\n\t\t\t\tu.setValue( gl, v.value, renderer );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tWebGLUniforms.seqWithValue = function( seq, values ) {\n\n\t\tvar r = [];\n\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tvar u = seq[ i ];\n\t\t\tif ( u.id in values ) r.push( u );\n\n\t\t}\n\n\t\treturn r;\n\n\t};\n\n\tWebGLUniforms.splitDynamic = function( seq, values ) {\n\n\t\tvar r = null,\n\t\t\tn = seq.length,\n\t\t\tw = 0;\n\n\t\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\t\tvar u = seq[ i ],\n\t\t\t\tv = values[ u.id ];\n\n\t\t\tif ( v && v.dynamic === true ) {\n\n\t\t\t\tif ( r === null ) r = [];\n\t\t\t\tr.push( u );\n\n\t\t\t} else {\n\n\t\t\t\t// in-place compact 'seq', removing the matches\n\t\t\t\tif ( w < i ) seq[ w ] = u;\n\t\t\t\t++ w;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( w < n ) seq.length = w;\n\n\t\treturn r;\n\n\t};\n\n\tWebGLUniforms.evalDynamic = function( seq, values, object, camera ) {\n\n\t\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tvar v = values[ seq[ i ].id ],\n\t\t\t\tf = v.onUpdateCallback;\n\n\t\t\tif ( f !== undefined ) f.call( v, object, camera );\n\n\t\t}\n\n\t};\n\n\treturn WebGLUniforms;\n\n} )();\n\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\n\n\tvar gl = renderer.context;\n\tvar state = renderer.state;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar shader, program, attributes, uniforms;\n\n\tvar tempTexture, occlusionTexture;\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 1, - 1,  0, 0,\n\t\t\t 1, - 1,  1, 0,\n\t\t\t 1,  1,  1, 1,\n\t\t\t- 1,  1,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\t// buffers\n\n\t\tvertexBuffer     = gl.createBuffer();\n\t\telementBuffer    = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\t// textures\n\n\t\ttempTexture      = gl.createTexture();\n\t\tocclusionTexture = gl.createTexture();\n\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\n\t\tshader = {\n\n\t\t\tvertexShader: [\n\n\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\"uniform vec3 screenPosition;\",\n\t\t\t\t\"uniform vec2 scale;\",\n\t\t\t\t\"uniform float rotation;\",\n\n\t\t\t\t\"uniform sampler2D occlusionMap;\",\n\n\t\t\t\t\"attribute vec2 position;\",\n\t\t\t\t\"attribute vec2 uv;\",\n\n\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t\"vUV = uv;\",\n\n\t\t\t\t\t\"vec2 pos = position;\",\n\n\t\t\t\t\t\"if ( renderType == 2 ) {\",\n\n\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\n\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\n\n\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\n\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\n\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\n\n\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\n\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" ),\n\n\t\t\tfragmentShader: [\n\n\t\t\t\t\"uniform lowp int renderType;\",\n\n\t\t\t\t\"uniform sampler2D map;\",\n\t\t\t\t\"uniform float opacity;\",\n\t\t\t\t\"uniform vec3 color;\",\n\n\t\t\t\t\"varying vec2 vUV;\",\n\t\t\t\t\"varying float vVisibility;\",\n\n\t\t\t\t\"void main() {\",\n\n\t\t\t\t\t// pink square\n\n\t\t\t\t\t\"if ( renderType == 0 ) {\",\n\n\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\n\n\t\t\t\t\t// restore\n\n\t\t\t\t\t\"} else if ( renderType == 1 ) {\",\n\n\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\n\n\t\t\t\t\t// flare\n\n\t\t\t\t\t\"} else {\",\n\n\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\n\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\n\t\t\t\t\t\t\"gl_FragColor = texture;\",\n\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\n\n\t\t\t\t\t\"}\",\n\n\t\t\t\t\"}\"\n\n\t\t\t].join( \"\\n\" )\n\n\t\t};\n\n\t\tprogram = createProgram( shader );\n\n\t\tattributes = {\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\n\t\t};\n\n\t\tuniforms = {\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\n\t\t};\n\n\t}\n\n\t/*\n\t * Render lens flares\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\n\t *         reads these back and calculates occlusion.\n\t */\n\n\tthis.render = function ( scene, camera, viewport ) {\n\n\t\tif ( flares.length === 0 ) return;\n\n\t\tvar tempPosition = new THREE.Vector3();\n\n\t\tvar invAspect = viewport.w / viewport.z,\n\t\t\thalfViewportWidth = viewport.z * 0.5,\n\t\t\thalfViewportHeight = viewport.w * 0.5;\n\n\t\tvar size = 16 / viewport.w,\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\n\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\n\n\t\tvar validArea = new THREE.Box2();\n\n\t\tvalidArea.min.set( 0, 0 );\n\t\tvalidArea.max.set( viewport.z - 16, viewport.w - 16 );\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.vertex );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\t// loop through all lens flares to update their occlusion and positions\n\t\t// setup gl and common used attribs/uniforms\n\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\n\t\tgl.uniform1i( uniforms.map, 1 );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.setDepthWrite( false );\n\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\n\n\t\t\tsize = 16 / viewport.w;\n\t\t\tscale.set( size * invAspect, size );\n\n\t\t\t// calc object screen position\n\n\t\t\tvar flare = flares[ i ];\n\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\n\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\n\n\t\t\t// setup arrays for gl programs\n\n\t\t\tscreenPosition.copy( tempPosition );\n\n\t\t\t// horizontal and vertical coordinate of the lower left corner of the pixels to copy\n\n\t\t\tscreenPositionPixels.x = viewport.x + ( screenPosition.x * halfViewportWidth ) + halfViewportWidth - 8;\n\t\t\tscreenPositionPixels.y = viewport.y + ( screenPosition.y * halfViewportHeight ) + halfViewportHeight - 8;\n\n\t\t\t// screen cull\n\n\t\t\tif ( validArea.containsPoint( screenPositionPixels ) === true ) {\n\n\t\t\t\t// save current RGB to temp texture\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t// render pink quad\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\n\t\t\t\tstate.disable( gl.BLEND );\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\n\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// copy result to occlusionMap\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x, screenPositionPixels.y, 16, 16, 0 );\n\n\n\t\t\t\t// restore graphics\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\n\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\n\t\t\t\t// update object positions\n\n\t\t\t\tflare.positionScreen.copy( screenPosition );\n\n\t\t\t\tif ( flare.customUpdateCallback ) {\n\n\t\t\t\t\tflare.customUpdateCallback( flare );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tflare.updateLensFlares();\n\n\t\t\t\t}\n\n\t\t\t\t// render flares\n\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\n\t\t\t\tstate.enable( gl.BLEND );\n\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\n\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\n\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\n\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewport.w;\n\n\t\t\t\t\t\tscale.x = size * invAspect;\n\t\t\t\t\t\tscale.y = size;\n\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\n\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\n\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\n\t\t\t\t\t\trenderer.setTexture2D( sprite.texture, 1 );\n\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\t\tstate.enable( gl.DEPTH_TEST );\n\t\tstate.setDepthWrite( true );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram ( shader ) {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\n\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\n\n\t\tgl.compileShader( fragmentShader );\n\t\tgl.compileShader( vertexShader );\n\n\t\tgl.attachShader( program, fragmentShader );\n\t\tgl.attachShader( program, vertexShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n};\n\n// File:src/renderers/webgl/plugins/SpritePlugin.js\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SpritePlugin = function ( renderer, sprites ) {\n\n\tvar gl = renderer.context;\n\tvar state = renderer.state;\n\n\tvar vertexBuffer, elementBuffer;\n\tvar program, attributes, uniforms;\n\n\tvar texture;\n\n\t// decompose matrixWorld\n\n\tvar spritePosition = new THREE.Vector3();\n\tvar spriteRotation = new THREE.Quaternion();\n\tvar spriteScale = new THREE.Vector3();\n\n\tfunction init() {\n\n\t\tvar vertices = new Float32Array( [\n\t\t\t- 0.5, - 0.5,  0, 0,\n\t\t\t  0.5, - 0.5,  1, 0,\n\t\t\t  0.5,   0.5,  1, 1,\n\t\t\t- 0.5,   0.5,  0, 1\n\t\t] );\n\n\t\tvar faces = new Uint16Array( [\n\t\t\t0, 1, 2,\n\t\t\t0, 2, 3\n\t\t] );\n\n\t\tvertexBuffer  = gl.createBuffer();\n\t\telementBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\n\n\t\tprogram = createProgram();\n\n\t\tattributes = {\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\n\t\t};\n\n\t\tuniforms = {\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\n\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\n\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\n\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\n\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\n\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\n\t\t};\n\n\t\tvar canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\t\tcanvas.width = 8;\n\t\tcanvas.height = 8;\n\n\t\tvar context = canvas.getContext( '2d' );\n\t\tcontext.fillStyle = 'white';\n\t\tcontext.fillRect( 0, 0, 8, 8 );\n\n\t\ttexture = new THREE.Texture( canvas );\n\t\ttexture.needsUpdate = true;\n\n\t}\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( sprites.length === 0 ) return;\n\n\t\t// setup gl\n\n\t\tif ( program === undefined ) {\n\n\t\t\tinit();\n\n\t\t}\n\n\t\tgl.useProgram( program );\n\n\t\tstate.initAttributes();\n\t\tstate.enableAttribute( attributes.position );\n\t\tstate.enableAttribute( attributes.uv );\n\t\tstate.disableUnusedAttributes();\n\n\t\tstate.disable( gl.CULL_FACE );\n\t\tstate.enable( gl.BLEND );\n\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\n\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\n\n\t\tstate.activeTexture( gl.TEXTURE0 );\n\t\tgl.uniform1i( uniforms.map, 0 );\n\n\t\tvar oldFogType = 0;\n\t\tvar sceneFogType = 0;\n\t\tvar fog = scene.fog;\n\n\t\tif ( fog ) {\n\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\n\n\t\t\tif ( fog instanceof THREE.Fog ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\n\t\t\t\toldFogType = 1;\n\t\t\t\tsceneFogType = 1;\n\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\n\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\n\t\t\t\toldFogType = 2;\n\t\t\t\tsceneFogType = 2;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\n\t\t\toldFogType = 0;\n\t\t\tsceneFogType = 0;\n\n\t\t}\n\n\n\t\t// update positions and sort\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\n\n\t\t}\n\n\t\tsprites.sort( painterSortStable );\n\n\t\t// render all sprites\n\n\t\tvar scale = [];\n\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\n\n\t\t\tvar sprite = sprites[ i ];\n\t\t\tvar material = sprite.material;\n\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\n\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\n\n\t\t\tscale[ 0 ] = spriteScale.x;\n\t\t\tscale[ 1 ] = spriteScale.y;\n\n\t\t\tvar fogType = 0;\n\n\t\t\tif ( scene.fog && material.fog ) {\n\n\t\t\t\tfogType = sceneFogType;\n\n\t\t\t}\n\n\t\t\tif ( oldFogType !== fogType ) {\n\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\n\t\t\t\toldFogType = fogType;\n\n\t\t\t}\n\n\t\t\tif ( material.map !== null ) {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\n\n\t\t\t} else {\n\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\n\n\t\t\t}\n\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\n\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\n\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\n\t\t\tstate.setDepthTest( material.depthTest );\n\t\t\tstate.setDepthWrite( material.depthWrite );\n\n\t\t\tif ( material.map ) {\n\n\t\t\t\trenderer.setTexture2D( material.map, 0 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setTexture2D( texture, 0 );\n\n\t\t\t}\n\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\n\n\t\t}\n\n\t\t// restore gl\n\n\t\tstate.enable( gl.CULL_FACE );\n\n\t\trenderer.resetGLState();\n\n\t};\n\n\tfunction createProgram () {\n\n\t\tvar program = gl.createProgram();\n\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\n\n\t\tgl.shaderSource( vertexShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform float rotation;',\n\t\t\t'uniform vec2 scale;',\n\t\t\t'uniform vec2 uvOffset;',\n\t\t\t'uniform vec2 uvScale;',\n\n\t\t\t'attribute vec2 position;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\n\n\t\t\t\t'vec2 alignedPosition = position * scale;',\n\n\t\t\t\t'vec2 rotatedPosition;',\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\n\n\t\t\t\t'vec4 finalPosition;',\n\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\n\n\t\t\t\t'gl_Position = finalPosition;',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.shaderSource( fragmentShader, [\n\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\n\n\t\t\t'uniform vec3 color;',\n\t\t\t'uniform sampler2D map;',\n\t\t\t'uniform float opacity;',\n\n\t\t\t'uniform int fogType;',\n\t\t\t'uniform vec3 fogColor;',\n\t\t\t'uniform float fogDensity;',\n\t\t\t'uniform float fogNear;',\n\t\t\t'uniform float fogFar;',\n\t\t\t'uniform float alphaTest;',\n\n\t\t\t'varying vec2 vUV;',\n\n\t\t\t'void main() {',\n\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\n\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\n\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\n\n\t\t\t\t'if ( fogType > 0 ) {',\n\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\n\t\t\t\t\t'float fogFactor = 0.0;',\n\n\t\t\t\t\t'if ( fogType == 1 ) {',\n\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\n\n\t\t\t\t\t'} else {',\n\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\n\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\n\n\t\t\t\t\t'}',\n\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\n\n\t\t\t\t'}',\n\n\t\t\t'}'\n\n\t\t].join( '\\n' ) );\n\n\t\tgl.compileShader( vertexShader );\n\t\tgl.compileShader( fragmentShader );\n\n\t\tgl.attachShader( program, vertexShader );\n\t\tgl.attachShader( program, fragmentShader );\n\n\t\tgl.linkProgram( program );\n\n\t\treturn program;\n\n\t}\n\n\tfunction painterSortStable ( a, b ) {\n\n\t\tif ( a.renderOrder !== b.renderOrder ) {\n\n\t\t\treturn a.renderOrder - b.renderOrder;\n\n\t\t} else if ( a.z !== b.z ) {\n\n\t\t\treturn b.z - a.z;\n\n\t\t} else {\n\n\t\t\treturn b.id - a.id;\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/Three.Legacy.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nObject.assign( THREE, {\n\tFace4: function ( a, b, c, d, normal, color, materialIndex ) {\n\t\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\n\t\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\n\t},\n\tLineStrip: 0,\n\tLinePieces: 1,\n\tMeshFaceMaterial: THREE.MultiMaterial,\n\tPointCloud: function ( geometry, material ) {\n\t\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\n\t\treturn new THREE.Points( geometry, material );\n\t},\n\tParticle: THREE.Sprite,\n\tParticleSystem: function ( geometry, material ) {\n\t\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\n\t\treturn new THREE.Points( geometry, material );\n\t},\n\tPointCloudMaterial: function ( parameters ) {\n\t\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\n\t\treturn new THREE.PointsMaterial( parameters );\n\t},\n\tParticleBasicMaterial: function ( parameters ) {\n\t\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\n\t\treturn new THREE.PointsMaterial( parameters );\n\t},\n\tParticleSystemMaterial: function ( parameters ) {\n\t\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\n\t\treturn new THREE.PointsMaterial( parameters );\n\t},\n\tVertex: function ( x, y, z ) {\n\t\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\n\t\treturn new THREE.Vector3( x, y, z );\n\t}\n} );\n\n//\n\nObject.assign( THREE.Box2.prototype, {\n\tempty: function () {\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\t},\n\tisIntersectionBox: function ( box ) {\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\t}\n} );\n\nObject.assign( THREE.Box3.prototype, {\n\tempty: function () {\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\t},\n\tisIntersectionBox: function ( box ) {\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\t}\n} );\n\nObject.assign( THREE.Matrix3.prototype, {\n\tmultiplyVector3: function ( vector ) {\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\t},\n\tmultiplyVector3Array: function ( a ) {\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\t}\n} );\n\nObject.assign( THREE.Matrix4.prototype, {\n\textractPosition: function ( m ) {\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\t},\n\tsetRotationFromQuaternion: function ( q ) {\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\t\treturn this.makeRotationFromQuaternion( q );\n\t},\n\tmultiplyVector3: function ( vector ) {\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\n\t\treturn vector.applyProjection( this );\n\t},\n\tmultiplyVector4: function ( vector ) {\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\t},\n\tmultiplyVector3Array: function ( a ) {\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\n\t\treturn this.applyToVector3Array( a );\n\t},\n\trotateAxis: function ( v ) {\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\t\tv.transformDirection( this );\n\t},\n\tcrossVector: function ( vector ) {\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\t},\n\ttranslate: function ( v ) {\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\n\t},\n\trotateX: function ( angle ) {\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\n\t},\n\trotateY: function ( angle ) {\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\n\t},\n\trotateZ: function ( angle ) {\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\t},\n\trotateByAxis: function ( axis, angle ) {\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\t}\n} );\n\nObject.assign( THREE.Plane.prototype, {\n\tisIntersectionLine: function ( line ) {\n\t\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\n\t\treturn this.intersectsLine( line );\n\t}\n} );\n\nObject.assign( THREE.Quaternion.prototype, {\n\tmultiplyVector3: function ( vector ) {\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\t\treturn vector.applyQuaternion( this );\n\t}\n} );\n\nObject.assign( THREE.Ray.prototype, {\n\tisIntersectionBox: function ( box ) {\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\t},\n\tisIntersectionPlane: function ( plane ) {\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\n\t\treturn this.intersectsPlane( plane );\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\t}\n} );\n\nObject.assign( THREE.Vector3.prototype, {\n\tsetEulerFromRotationMatrix: function () {\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\t},\n\tsetEulerFromQuaternion: function () {\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\t},\n\tgetPositionFromMatrix: function ( m ) {\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\t\treturn this.setFromMatrixPosition( m );\n\t},\n\tgetScaleFromMatrix: function ( m ) {\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\t\treturn this.setFromMatrixScale( m );\n\t},\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\t\treturn this.setFromMatrixColumn( matrix, index );\n\t}\n} );\n\n//\n\nObject.assign( THREE.Object3D.prototype, {\n\tgetChildByName: function ( name ) {\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name );\n\t},\n\trenderDepth: function ( value ) {\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\n\t},\n\ttranslate: function ( distance, axis ) {\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\t}\n} );\n\nObject.defineProperties( THREE.Object3D.prototype, {\n\teulerOrder: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\treturn this.rotation.order;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\tthis.rotation.order = value;\n\t\t}\n\t},\n\tuseQuaternion: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\t\t}\n\t}\n} );\n\nObject.defineProperties( THREE.LOD.prototype, {\n\tobjects: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\n\t\t\treturn this.levels;\n\t\t}\n\t}\n} );\n\n//\n\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\n\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\n\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\n\tthis.setFocalLength( focalLength );\n\n};\n\n//\n\nObject.defineProperties( THREE.Light.prototype, {\n\tonlyShadow: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\n\t\t}\n\t},\n\tshadowCameraFov: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\n\t\t\tthis.shadow.camera.fov = value;\n\t\t}\n\t},\n\tshadowCameraLeft: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\n\t\t\tthis.shadow.camera.left = value;\n\t\t}\n\t},\n\tshadowCameraRight: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\n\t\t\tthis.shadow.camera.right = value;\n\t\t}\n\t},\n\tshadowCameraTop: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\n\t\t\tthis.shadow.camera.top = value;\n\t\t}\n\t},\n\tshadowCameraBottom: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\n\t\t\tthis.shadow.camera.bottom = value;\n\t\t}\n\t},\n\tshadowCameraNear: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\n\t\t\tthis.shadow.camera.near = value;\n\t\t}\n\t},\n\tshadowCameraFar: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\n\t\t\tthis.shadow.camera.far = value;\n\t\t}\n\t},\n\tshadowCameraVisible: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\n\t\t}\n\t},\n\tshadowBias: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\n\t\t\tthis.shadow.bias = value;\n\t\t}\n\t},\n\tshadowDarkness: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\n\t\t}\n\t},\n\tshadowMapWidth: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\n\t\t\tthis.shadow.mapSize.width = value;\n\t\t}\n\t},\n\tshadowMapHeight: {\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\n\t\t\tthis.shadow.mapSize.height = value;\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( THREE.BufferAttribute.prototype, {\n\tlength: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\n\t\t\treturn this.array.length;\n\t\t}\n\t}\n} );\n\nObject.assign( THREE.BufferGeometry.prototype, {\n\taddIndex: function ( index ) {\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\n\t\tthis.setIndex( index );\n\t},\n\taddDrawCall: function ( start, count, indexOffset ) {\n\t\tif ( indexOffset !== undefined ) {\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\n\t\t}\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\n\t\tthis.addGroup( start, count );\n\t},\n\tclearDrawCalls: function () {\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\n\t\tthis.clearGroups();\n\t},\n\tcomputeTangents: function () {\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\n\t},\n\tcomputeOffsets: function () {\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\n\t}\n} );\n\nObject.defineProperties( THREE.BufferGeometry.prototype, {\n\tdrawcalls: {\n\t\tget: function () {\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\t\t}\n\t},\n\toffsets: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( THREE.Material.prototype, {\n\twrapAround: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\n\t\t}\n\t},\n\twrapRGB: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\n\t\t\treturn new THREE.Color();\n\t\t}\n\t}\n} );\n\nObject.defineProperties( THREE.MeshPhongMaterial.prototype, {\n\tmetal: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\n\t\t\treturn false;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\n\t\t}\n\t}\n} );\n\nObject.defineProperties( THREE.ShaderMaterial.prototype, {\n\tderivatives: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\treturn this.extensions.derivatives;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\tthis.extensions.derivatives = value;\n\t\t}\n\t}\n} );\n\n//\n\nTHREE.EventDispatcher.prototype = Object.assign( Object.create( {\n\n\t// Note: Extra base ensures these properties are not 'assign'ed.\n\n\tconstructor: THREE.EventDispatcher,\n\n\tapply: function ( target ) {\n\n\t\tconsole.warn( \"THREE.EventDispatcher: .apply is deprecated, \" +\n\t\t\t\t\"just inherit or Object.assign the prototype to mix-in.\" );\n\n\t\tObject.assign( target, this );\n\n\t}\n\n} ), THREE.EventDispatcher.prototype );\n\n//\n\nObject.assign( THREE.WebGLRenderer.prototype, {\n\tsupportsFloatTextures: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_float' );\n\t},\n\tsupportsHalfFloatTextures: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\n\t},\n\tsupportsStandardDerivatives: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\n\t},\n\tsupportsCompressedTextureS3TC: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\t},\n\tsupportsCompressedTexturePVRTC: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\t},\n\tsupportsBlendMinMax: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\n\t},\n\tsupportsVertexTextures: function () {\n\t\treturn this.capabilities.vertexTextures;\n\t},\n\tsupportsInstancedArrays: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\n\t},\n\tenableScissorTest: function ( boolean ) {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\n\t\tthis.setScissorTest( boolean );\n\t},\n\tinitMaterial: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\t},\n\taddPrePlugin: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\t},\n\taddPostPlugin: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\t},\n\tupdateShadowMap: function () {\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\t}\n} );\n\nObject.defineProperties( THREE.WebGLRenderer.prototype, {\n\tshadowMapEnabled: {\n\t\tget: function () {\n\t\t\treturn this.shadowMap.enabled;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\n\t\t\tthis.shadowMap.enabled = value;\n\t\t}\n\t},\n\tshadowMapType: {\n\t\tget: function () {\n\t\t\treturn this.shadowMap.type;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\n\t\t\tthis.shadowMap.type = value;\n\t\t}\n\t},\n\tshadowMapCullFace: {\n\t\tget: function () {\n\t\t\treturn this.shadowMap.cullFace;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\n\t\t\tthis.shadowMap.cullFace = value;\n\t\t}\n\t}\n} );\n\nObject.defineProperties( THREE.WebGLShadowMap.prototype, {\n\tcullFace: {\n\t\tget: function () {\n\t\t\treturn this.renderReverseSided ? THREE.CullFaceFront : THREE.CullFaceBack;\n\t\t},\n\t\tset: function ( cullFace ) {\n\t\t\tvar value = ( cullFace !== THREE.CullFaceBack );\n\t\t\tconsole.warn( \"WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to \" + value + \".\" );\n\t\t\tthis.renderReverseSided = value;\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( THREE.WebGLRenderTarget.prototype, {\n\twrapS: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\treturn this.texture.wrapS;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\tthis.texture.wrapS = value;\n\t\t}\n\t},\n\twrapT: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\treturn this.texture.wrapT;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\tthis.texture.wrapT = value;\n\t\t}\n\t},\n\tmagFilter: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\treturn this.texture.magFilter;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\tthis.texture.magFilter = value;\n\t\t}\n\t},\n\tminFilter: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\treturn this.texture.minFilter;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\tthis.texture.minFilter = value;\n\t\t}\n\t},\n\tanisotropy: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\treturn this.texture.anisotropy;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\tthis.texture.anisotropy = value;\n\t\t}\n\t},\n\toffset: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\treturn this.texture.offset;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\tthis.texture.offset = value;\n\t\t}\n\t},\n\trepeat: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\treturn this.texture.repeat;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\tthis.texture.repeat = value;\n\t\t}\n\t},\n\tformat: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\treturn this.texture.format;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\tthis.texture.format = value;\n\t\t}\n\t},\n\ttype: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\treturn this.texture.type;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\tthis.texture.type = value;\n\t\t}\n\t},\n\tgenerateMipmaps: {\n\t\tget: function () {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\treturn this.texture.generateMipmaps;\n\t\t},\n\t\tset: function ( value ) {\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\tthis.texture.generateMipmaps = value;\n\t\t}\n\t}\n} );\n\n//\n\nObject.assign( THREE.Audio.prototype, {\n\tload: function ( file ) {\n\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.' );\n\t\tvar scope = this;\n\t\tvar audioLoader = new THREE.AudioLoader();\n\t\taudioLoader.load( file, function ( buffer ) {\n\t\t\tscope.setBuffer( buffer );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\nObject.assign( THREE.AudioAnalyser.prototype, {\n\tgetData: function ( file ) {\n\t\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\n\t\treturn this.getFrequencyData();\n\t}\n} );\n\n//\n\nTHREE.GeometryUtils = {\n\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\n\n\t\tvar matrix;\n\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\n\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\n\n\t\t\tmatrix = geometry2.matrix;\n\t\t\tgeometry2 = geometry2.geometry;\n\n\t\t}\n\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\n\n\t},\n\n\tcenter: function ( geometry ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\n\t\treturn geometry.center();\n\n\t}\n\n};\n\nTHREE.ImageUtils = {\n\n\tcrossOrigin: undefined,\n\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\n\n\t\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\n\n\t\tvar loader = new THREE.TextureLoader();\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\tvar texture = loader.load( url, onLoad, undefined, onError );\n\n\t\tif ( mapping ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t},\n\n\tloadTextureCube: function ( urls, mapping, onLoad, onError ) {\n\n\t\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\n\n\t\tvar loader = new THREE.CubeTextureLoader();\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\tvar texture = loader.load( urls, onLoad, undefined, onError );\n\n\t\tif ( mapping ) texture.mapping = mapping;\n\n\t\treturn texture;\n\n\t},\n\n\tloadCompressedTexture: function () {\n\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\n\n\t},\n\n\tloadCompressedTextureCube: function () {\n\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\n\n\t}\n\n};\n\n//\n\nTHREE.Projector = function () {\n\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\n\n\tthis.projectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\n\t\tvector.project( camera );\n\n\t};\n\n\tthis.unprojectVector = function ( vector, camera ) {\n\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\n\t\tvector.unproject( camera );\n\n\t};\n\n\tthis.pickingRay = function ( vector, camera ) {\n\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\n\n\t};\n\n};\n\n//\n\nTHREE.CanvasRenderer = function () {\n\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\n\n\tthis.domElement = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\tthis.clear = function () {};\n\tthis.render = function () {};\n\tthis.setClearColor = function () {};\n\tthis.setSize = function () {};\n\n};\n\n// File:examples/js/pmrem/PMREMGenerator.js\n\n/**\n * @author Prashant Sharma / spidersharma03\n * @author Ben Houston / bhouston, https://clara.io\n *\n * To avoid cube map seams, I create an extra pixel around each face. This way when the cube map is\n * sampled by an application later(with a little care by sampling the centre of the texel), the extra 1 border\n *\tof pixels makes sure that there is no seams artifacts present. This works perfectly for cubeUV format as\n *\twell where the 6 faces can be arranged in any manner whatsoever.\n * Code in the beginning of fragment shader's main function does this job for a given resolution.\n *\tRun Scene_PMREM_Test.html in the examples directory to see the sampling from the cube lods generated\n *\tby this class.\n */\n\nTHREE.PMREMGenerator = function( sourceTexture ) {\n\n\tthis.sourceTexture = sourceTexture;\n\tthis.resolution = 256; // NODE: 256 is currently hard coded in the glsl code for performance reasons\n\n\tvar monotonicEncoding = ( sourceTexture.encoding === THREE.LinearEncoding ) ||\n\t\t( sourceTexture.encoding === THREE.GammaEncoding ) || ( sourceTexture.encoding === THREE.sRGBEncoding );\n\n\tthis.sourceTexture.minFilter = ( monotonicEncoding ) ? THREE.LinearFilter : THREE.NearestFilter;\n\tthis.sourceTexture.magFilter = ( monotonicEncoding ) ? THREE.LinearFilter : THREE.NearestFilter;\n\tthis.sourceTexture.generateMipmaps = this.sourceTexture.generateMipmaps && monotonicEncoding;\n\n\tthis.cubeLods = [];\n\n\tvar size = this.resolution;\n\tvar params = {\t\tformat: this.sourceTexture.format,\n\t\tmagFilter: this.sourceTexture.magFilter,\n\t\tminFilter: this.sourceTexture.minFilter,\n\t\ttype: this.sourceTexture.type,\n\t\tgenerateMipmaps: this.sourceTexture.generateMipmaps,\n\t\tanisotropy: this.sourceTexture.anisotropy,\n\t\tencoding: this.sourceTexture.encoding\n\t };\n\n\t// how many LODs fit in the given CubeUV Texture.\n\tthis.numLods = Math.log( size ) / Math.log( 2 ) - 2;  // IE11 doesn't support Math.log2\n\n\tfor ( var i = 0; i < this.numLods; i ++ ) {\n\n\t\tvar renderTarget = new THREE.WebGLRenderTargetCube( size, size, params );\n\t\tthis.cubeLods.push( renderTarget );\n\t\tsize = Math.max( 16, size / 2 );\n\n\t}\n\n\tthis.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0.0, 1000 );\n\n\tthis.shader = this.getShader();\n\tthis.planeMesh = new THREE.Mesh( new THREE.PlaneGeometry( 2, 2, 0 ), this.shader );\n\tthis.planeMesh.material.side = THREE.DoubleSide;\n\tthis.scene = new THREE.Scene();\n\tthis.scene.add( this.planeMesh );\n\tthis.scene.add( this.camera );\n\n\tthis.shader.uniforms[ 'envMap' ].value = this.sourceTexture;\n\tthis.shader.envMap = this.sourceTexture;\n\n};\n\nTHREE.PMREMGenerator.prototype = {\n\n\tconstructor : THREE.PMREMGenerator,\n\n\t/*\n\t * Prashant Sharma / spidersharma03: More thought and work is needed here.\n\t * Right now it's a kind of a hack to use the previously convolved map to convolve the current one.\n\t * I tried to use the original map to convolve all the lods, but for many textures(specially the high frequency)\n\t * even a high number of samples(1024) dosen't lead to satisfactory results.\n\t * By using the previous convolved maps, a lower number of samples are generally sufficient(right now 32, which\n\t * gives okay results unless we see the reflection very carefully, or zoom in too much), however the math\n\t * goes wrong as the distribution function tries to sample a larger area than what it should be. So I simply scaled\n\t * the roughness by 0.9(totally empirical) to try to visually match the original result.\n\t * The condition \"if(i <5)\" is also an attemt to make the result match the original result.\n\t * This method requires the most amount of thinking I guess. Here is a paper which we could try to implement in future::\n\t * http://http.developer.nvidia.com/GPUGems3/gpugems3_ch20.html\n\t */\n\tupdate: function( renderer ) {\n\n\t\tthis.shader.uniforms[ 'envMap' ].value = this.sourceTexture;\n\t\tthis.shader.envMap = this.sourceTexture;\n\n\t\tvar gammaInput = renderer.gammaInput;\n\t\tvar gammaOutput = renderer.gammaOutput;\n\t\tvar toneMapping = renderer.toneMapping;\n\t\tvar toneMappingExposure = renderer.toneMappingExposure;\n\n\t\trenderer.toneMapping = THREE.LinearToneMapping;\n\t\trenderer.toneMappingExposure = 1.0;\n\t\trenderer.gammaInput = false;\n\t\trenderer.gammaOutput = false;\n\n\t\tfor ( var i = 0; i < this.numLods; i ++ ) {\n\n\t\t\tvar r = i / ( this.numLods - 1 );\n\t\t\tthis.shader.uniforms[ 'roughness' ].value = r * 0.9; // see comment above, pragmatic choice\n\t\t\tvar size = this.cubeLods[ i ].width;\n\t\t\tthis.shader.uniforms[ 'mapSize' ].value = size;\n\t\t\tthis.renderToCubeMapTarget( renderer, this.cubeLods[ i ] );\n\n\t\t\tif ( i < 5 ) this.shader.uniforms[ 'envMap' ].value = this.cubeLods[ i ].texture;\n\n\t\t}\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.toneMappingExposure = toneMappingExposure;\n\t\trenderer.gammaInput = gammaInput;\n\t\trenderer.gammaOutput = gammaOutput;\n\n\t},\n\n\trenderToCubeMapTarget: function( renderer, renderTarget ) {\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tthis.renderToCubeMapTargetFace( renderer, renderTarget, i )\n\n\t\t}\n\n\t},\n\n\trenderToCubeMapTargetFace: function( renderer, renderTarget, faceIndex ) {\n\n\t\trenderTarget.activeCubeFace = faceIndex;\n\t\tthis.shader.uniforms[ 'faceIndex' ].value = faceIndex;\n\t\trenderer.render( this.scene, this.camera, renderTarget, true );\n\n\t},\n\n\tgetShader: function() {\n\n\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\t\"faceIndex\": { value: 0 },\n\t\t\t\t\"roughness\": { value: 0.5 },\n\t\t\t\t\"mapSize\": { value: 0.5 },\n\t\t\t\t\"envMap\": { value: null },\n\t\t\t\t\"testColor\": { value: new THREE.Vector3( 1, 1, 1 ) }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"#include <common>\\n\\\n\t\t\t\tvarying vec2 vUv;\\n\\\n\t\t\t\tuniform int faceIndex;\\n\\\n\t\t\t\tuniform float roughness;\\n\\\n\t\t\t\tuniform samplerCube envMap;\\n\\\n\t\t\t\tuniform float mapSize;\\n\\\n\t\t\t\tuniform vec3 testColor;\\n\\\n\t\t\t\t\\n\\\n\t\t\t\tfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\\n\t\t\t\t\tfloat a = ggxRoughness + 0.0001;\\n\\\n\t\t\t\t\ta *= a;\\n\\\n\t\t\t\t\treturn ( 2.0 / a - 2.0 );\\n\\\n\t\t\t\t}\\n\\\n\t\t\t\tvec3 ImportanceSamplePhong(vec2 uv, mat3 vecSpace, float specPow) {\\n\\\n\t\t\t\t\tfloat phi = uv.y * 2.0 * PI;\\n\\\n\t\t\t\t\tfloat cosTheta = pow(1.0 - uv.x, 1.0 / (specPow + 1.0));\\n\\\n\t\t\t\t\tfloat sinTheta = sqrt(1.0 - cosTheta * cosTheta);\\n\\\n\t\t\t\t\tvec3 sampleDir = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);\\n\\\n\t\t\t\t\treturn vecSpace * sampleDir;\\n\\\n\t\t\t\t}\\n\\\n\t\t\t\tvec3 ImportanceSampleGGX( vec2 uv, mat3 vecSpace, float Roughness )\\n\\\n\t\t\t\t{\\n\\\n\t\t\t\t\tfloat a = Roughness * Roughness;\\n\\\n\t\t\t\t\tfloat Phi = 2.0 * PI * uv.x;\\n\\\n\t\t\t\t\tfloat CosTheta = sqrt( (1.0 - uv.y) / ( 1.0 + (a*a - 1.0) * uv.y ) );\\n\\\n\t\t\t\t\tfloat SinTheta = sqrt( 1.0 - CosTheta * CosTheta );\\n\\\n\t\t\t\t\treturn vecSpace * vec3(SinTheta * cos( Phi ), SinTheta * sin( Phi ), CosTheta);\\n\\\n\t\t\t\t}\\n\\\n\t\t\t\tmat3 matrixFromVector(vec3 n) {\\n\\\n\t\t\t\t\tfloat a = 1.0 / (1.0 + n.z);\\n\\\n\t\t\t\t\tfloat b = -n.x * n.y * a;\\n\\\n\t\t\t\t\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\\n\\\n\t\t\t\t\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\\n\\\n\t\t\t\t\treturn mat3(b1, b2, n);\\n\\\n\t\t\t\t}\\n\\\n\t\t\t\t\\n\\\n\t\t\t\tvec4 testColorMap(float Roughness) {\\n\\\n\t\t\t\t\tvec4 color;\\n\\\n\t\t\t\t\tif(faceIndex == 0)\\n\\\n\t\t\t\t\t\tcolor = vec4(1.0,0.0,0.0,1.0);\\n\\\n\t\t\t\t\telse if(faceIndex == 1)\\n\\\n\t\t\t\t\t\tcolor = vec4(0.0,1.0,0.0,1.0);\\n\\\n\t\t\t\t\telse if(faceIndex == 2)\\n\\\n\t\t\t\t\t\tcolor = vec4(0.0,0.0,1.0,1.0);\\n\\\n\t\t\t\t\telse if(faceIndex == 3)\\n\\\n\t\t\t\t\t\tcolor = vec4(1.0,1.0,0.0,1.0);\\n\\\n\t\t\t\t\telse if(faceIndex == 4)\\n\\\n\t\t\t\t\t\tcolor = vec4(0.0,1.0,1.0,1.0);\\n\\\n\t\t\t\t\telse\\n\\\n\t\t\t\t\t\tcolor = vec4(1.0,0.0,1.0,1.0);\\n\\\n\t\t\t\t\tcolor *= ( 1.0 - Roughness );\\n\\\n\t\t\t\t\treturn color;\\n\\\n\t\t\t\t}\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvec3 sampleDirection;\\n\\\n\t\t\t\t\tvec2 uv = vUv*2.0 - 1.0;\\n\\\n\t\t\t\t\tfloat offset = -1.0/mapSize;\\n\\\n\t\t\t\t\tconst float a = -1.0;\\n\\\n\t\t\t\t\tconst float b = 1.0;\\n\\\n\t\t\t\t\tfloat c = -1.0 + offset;\\n\\\n\t\t\t\t\tfloat d = 1.0 - offset;\\n\\\n\t\t\t\t\tfloat bminusa = b - a;\\n\\\n\t\t\t\t\tuv.x = (uv.x - a)/bminusa * d - (uv.x - b)/bminusa * c;\\n\\\n\t\t\t\t\tuv.y = (uv.y - a)/bminusa * d - (uv.y - b)/bminusa * c;\\n\\\n\t\t\t\t\tif (faceIndex==0) {\\n\\\n\t\t\t\t\t\tsampleDirection = vec3(1.0, -uv.y, -uv.x);\\n\\\n\t\t\t\t\t} else if (faceIndex==1) {\\n\\\n\t\t\t\t\t\tsampleDirection = vec3(-1.0, -uv.y, uv.x);\\n\\\n\t\t\t\t\t} else if (faceIndex==2) {\\n\\\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, 1.0, uv.y);\\n\\\n\t\t\t\t\t} else if (faceIndex==3) {\\n\\\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -1.0, -uv.y);\\n\\\n\t\t\t\t\t} else if (faceIndex==4) {\\n\\\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -uv.y, 1.0);\\n\\\n\t\t\t\t\t} else {\\n\\\n\t\t\t\t\t\tsampleDirection = vec3(-uv.x, -uv.y, -1.0);\\n\\\n\t\t\t\t\t}\\n\\\n\t\t\t\t\tmat3 vecSpace = matrixFromVector(normalize(sampleDirection));\\n\\\n\t\t\t\t\tvec3 rgbColor = vec3(0.0);\\n\\\n\t\t\t\t\tconst int NumSamples = 32;\\n\\\n\t\t\t\t\tvec3 vect;\\n\\\n\t\t\t\t\tfloat weight = 0.0;\\n\\\n\t\t\t\t\tfor( int i = 0; i < NumSamples; i ++ ) {\\n\\\n\t\t\t\t\t\tfloat sini = sin(float(i));\\n\\\n\t\t\t\t\t\tfloat cosi = cos(float(i));\\n\\\n\t\t\t\t\t\tfloat r = rand(vec2(sini, cosi));\\n\\\n\t\t\t\t\t\tvect = ImportanceSampleGGX(vec2(float(i) / float(NumSamples), r), vecSpace, roughness);\\n\\\n\t\t\t\t\t\tfloat dotProd = dot(vect, normalize(sampleDirection));\\n\\\n\t\t\t\t\t\tweight += dotProd;\\n\\\n\t\t\t\t\t\tvec3 color = envMapTexelToLinear(textureCube(envMap,vect)).rgb;\\n\\\n\t\t\t\t\t\trgbColor.rgb += color;\\n\\\n\t\t\t\t\t}\\n\\\n\t\t\t\t\trgbColor /= float(NumSamples);\\n\\\n\t\t\t\t\t//rgbColor = testColorMap( roughness ).rgb;\\n\\\n\t\t\t\t\tgl_FragColor = linearToOutputTexel( vec4( rgbColor, 1.0 ) );\\n\\\n\t\t\t\t}\",\n\t\t\tblending: THREE.CustomBlending,\n\t\t\tblendSrc: THREE.OneFactor,\n\t\t\tblendDst: THREE.ZeroFactor,\n\t\t\tblendSrcAlpha: THREE.OneFactor,\n\t\t\tblendDstAlpha: THREE.ZeroFactor,\n\t\t\tblendEquation: THREE.AddEquation\n\t\t} );\n\n\t}\n\n};\n\n// File:examples/js/pmrem/PMREMCubeUVPacker.js\n\n/**\n * @author Prashant Sharma / spidersharma03\n * @author Ben Houston / bhouston, https://clara.io\n *\n * This class takes the cube lods(corresponding to different roughness values), and creates a single cubeUV\n * Texture. The format for a given roughness set of faces is simply::\n * +X+Y+Z\n * -X-Y-Z\n * For every roughness a mip map chain is also saved, which is essential to remove the texture artifacts due to\n * minification.\n * Right now for every face a PlaneMesh is drawn, which leads to a lot of geometry draw calls, but can be replaced\n * later by drawing a single buffer and by sending the appropriate faceIndex via vertex attributes.\n * The arrangement of the faces is fixed, as assuming this arrangement, the sampling function has been written.\n */\n\n\nTHREE.PMREMCubeUVPacker = function( cubeTextureLods, numLods ) {\n\n\tthis.cubeLods = cubeTextureLods;\n\tthis.numLods = numLods;\n\tvar size = cubeTextureLods[ 0 ].width * 4;\n\n\tvar sourceTexture = cubeTextureLods[ 0 ].texture;\n\tvar params = {\n\t\tformat: sourceTexture.format,\n\t\tmagFilter: sourceTexture.magFilter,\n\t\tminFilter: sourceTexture.minFilter,\n\t\ttype: sourceTexture.type,\n\t\tgenerateMipmaps: sourceTexture.generateMipmaps,\n\t\tanisotropy: sourceTexture.anisotropy,\n\t\tencoding: sourceTexture.encoding\n\t};\n\n\tif( sourceTexture.encoding === THREE.RGBM16Encoding ) {\n\t\tparams.magFilter = THREE.LinearFilter;\n\t\tparams.minFilter = THREE.LinearFilter;\n\t}\n\n\tthis.CubeUVRenderTarget = new THREE.WebGLRenderTarget( size, size, params );\n\tthis.CubeUVRenderTarget.texture.mapping = THREE.CubeUVReflectionMapping;\n\tthis.camera = new THREE.OrthographicCamera( - size * 0.5, size * 0.5, - size * 0.5, size * 0.5, 0.0, 1000 );\n\n\tthis.scene = new THREE.Scene();\n\tthis.scene.add( this.camera );\n\n\tthis.objects = [];\n\tvar xOffset = 0;\n\tvar faceOffsets = [];\n\tfaceOffsets.push( new THREE.Vector2( 0, 0 ) );\n\tfaceOffsets.push( new THREE.Vector2( 1, 0 ) );\n\tfaceOffsets.push( new THREE.Vector2( 2, 0 ) );\n\tfaceOffsets.push( new THREE.Vector2( 0, 1 ) );\n\tfaceOffsets.push( new THREE.Vector2( 1, 1 ) );\n\tfaceOffsets.push( new THREE.Vector2( 2, 1 ) );\n\tvar yOffset = 0;\n\tvar textureResolution = size;\n\tsize = cubeTextureLods[ 0 ].width;\n\n\tvar offset2 = 0;\n\tvar c = 4.0;\n\tthis.numLods = Math.log( cubeTextureLods[ 0 ].width ) / Math.log( 2 ) - 2; // IE11 doesn't support Math.log2\n\tfor ( var i = 0; i < this.numLods; i ++ ) {\n\n\t\tvar offset1 = ( textureResolution - textureResolution / c ) * 0.5;\n\t\tif ( size > 16 )\n\t\tc *= 2;\n\t\tvar nMips = size > 16 ? 6 : 1;\n\t\tvar mipOffsetX = 0;\n\t\tvar mipOffsetY = 0;\n\t\tvar mipSize = size;\n\n\t\tfor ( var j = 0; j < nMips; j ++ ) {\n\n\t\t\t// Mip Maps\n\t\t\tfor ( var k = 0; k < 6; k ++ ) {\n\n\t\t\t\t// 6 Cube Faces\n\t\t\t\tvar material = this.getShader();\n\t\t\t\tmaterial.uniforms[ 'envMap' ].value = this.cubeLods[ i ].texture;\n\t\t\t\tmaterial.envMap = this.cubeLods[ i ].texture;\n\t\t\t\tmaterial.uniforms[ 'faceIndex' ].value = k;\n\t\t\t\tmaterial.uniforms[ 'mapSize' ].value = mipSize;\n\t\t\t\tvar color = material.uniforms[ 'testColor' ].value;\n\t\t\t\t//color.copy(testColor[j]);\n\t\t\t\tvar planeMesh = new THREE.Mesh(\n\t\t\t\tnew THREE.PlaneGeometry( mipSize, mipSize, 0 ),\n\t\t\t\tmaterial );\n\t\t\t\tplaneMesh.position.x = faceOffsets[ k ].x * mipSize - offset1 + mipOffsetX;\n\t\t\t\tplaneMesh.position.y = faceOffsets[ k ].y * mipSize - offset1 + offset2 + mipOffsetY;\n\t\t\t\tplaneMesh.material.side = THREE.DoubleSide;\n\t\t\t\tthis.scene.add( planeMesh );\n\t\t\t\tthis.objects.push( planeMesh );\n\n\t\t\t}\n\t\t\tmipOffsetY += 1.75 * mipSize;\n\t\t\tmipOffsetX += 1.25 * mipSize;\n\t\t\tmipSize /= 2;\n\n\t\t}\n\t\toffset2 += 2 * size;\n\t\tif ( size > 16 )\n\t\tsize /= 2;\n\n\t}\n\n};\n\nTHREE.PMREMCubeUVPacker.prototype = {\n\n\tconstructor : THREE.PMREMCubeUVPacker,\n\n\tupdate: function( renderer ) {\n\n\t\tvar gammaInput = renderer.gammaInput;\n\t\tvar gammaOutput = renderer.gammaOutput;\n\t\tvar toneMapping = renderer.toneMapping;\n\t\tvar toneMappingExposure = renderer.toneMappingExposure;\n\t\trenderer.gammaInput = false;\n\t\trenderer.gammaOutput = false;\n\t\trenderer.toneMapping = THREE.LinearToneMapping;\n\t\trenderer.toneMappingExposure = 1.0;\n\t\trenderer.render( this.scene, this.camera, this.CubeUVRenderTarget, false );\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.toneMappingExposure = toneMappingExposure;\n\t\trenderer.gammaInput = gammaInput;\n\t\trenderer.gammaOutput = gammaOutput;\n\n\t},\n\n\tgetShader: function() {\n\n\t\tvar shaderMaterial = new THREE.ShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\t\"faceIndex\": { value: 0 },\n\t\t\t\t\"mapSize\": { value: 0 },\n\t\t\t\t\"envMap\": { value: null },\n\t\t\t\t\"testColor\": { value: new THREE.Vector3( 1, 1, 1 ) }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"precision highp float;\\\n\t\t\t\tvarying vec2 vUv;\\\n\t\t\t\tvoid main() {\\\n\t\t\t\t\tvUv = uv;\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"precision highp float;\\\n\t\t\t\tvarying vec2 vUv;\\\n\t\t\t\tuniform samplerCube envMap;\\\n\t\t\t\tuniform float mapSize;\\\n\t\t\t\tuniform vec3 testColor;\\\n\t\t\t\tuniform int faceIndex;\\\n\t\t\t\t\\\n\t\t\t\tvoid main() {\\\n\t\t\t\t\tvec3 sampleDirection;\\\n\t\t\t\t\tvec2 uv = vUv;\\\n\t\t\t\t\tuv = uv * 2.0 - 1.0;\\\n\t\t\t\t\tuv.y *= -1.0;\\\n\t\t\t\t\tif(faceIndex == 0) {\\\n\t\t\t\t\t\tsampleDirection = normalize(vec3(1.0, uv.y, -uv.x));\\\n\t\t\t\t\t} else if(faceIndex == 1) {\\\n\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, 1.0, uv.y));\\\n\t\t\t\t\t} else if(faceIndex == 2) {\\\n\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, uv.y, 1.0));\\\n\t\t\t\t\t} else if(faceIndex == 3) {\\\n\t\t\t\t\t\tsampleDirection = normalize(vec3(-1.0, uv.y, uv.x));\\\n\t\t\t\t\t} else if(faceIndex == 4) {\\\n\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, -1.0, -uv.y));\\\n\t\t\t\t\t} else {\\\n\t\t\t\t\t\tsampleDirection = normalize(vec3(-uv.x, uv.y, -1.0));\\\n\t\t\t\t\t}\\\n\t\t\t\t\tvec4 color = envMapTexelToLinear( textureCube( envMap, sampleDirection ) );\\\n\t\t\t\t\tgl_FragColor = linearToOutputTexel( color );\\\n\t\t\t\t}\",\n\n\t\t\tblending: THREE.CustomBlending,\n\t\t\tpremultipliedAlpha: false,\n\t\t\tblendSrc: THREE.OneFactor,\n\t\t\tblendDst: THREE.ZeroFactor,\n\t\t\tblendSrcAlpha: THREE.OneFactor,\n\t\t\tblendDstAlpha: THREE.ZeroFactor,\n\t\t\tblendEquation: THREE.AddEquation\n\n\t\t} );\n\n\t\treturn shaderMaterial;\n\n\t}\n\n};\n\n// File:examples/js/shaders/CopyShader.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\n\nTHREE.CopyShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null },\n\t\t\"opacity\":  { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform float opacity;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\t\"gl_FragColor = opacity * texel;\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\n// File:examples/js/shaders/CompositeShader.js\n\n/**\n * @author bhouston / http://clara.io\n *\n * Various composite operations\n */\n\nTHREE.CompositeShader = {\n\n  defines: {\n\n\t\t\"BLENDING\": THREE.NoBlending\n\n  },\n\n\tuniforms: {\n\n    \"tSource\": { type: \"t\", value: null },\n    \"opacitySource\": { type: \"f\", value: 1.0 },\n\n\t\t\"tDestination\": { type: \"t\", value: null },\n    \"opacityDestination\": { type: \"f\", value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n    \"uniform sampler2D tSource;\",\n    \"uniform float opacitySource;\",\n\n\t\t\"uniform sampler2D tDestination;\",\n    \"uniform float opacityDestination;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 d = opacityDestination * texture2D( tDestination, vUv );\",\n\t\t\t\"vec4 s = opacitySource * texture2D( tSource, vUv );\",\n\n      // all blending modes are implemented assuming premultiplied values\n\n      \"#if (BLENDING == \" + THREE.NormalBlending + \")\",\n\n        \"gl_FragColor = d * ( 1.0 - s.a ) + s;\",\n\n      \"#elif (BLENDING == \" + THREE.AdditiveBlending + \")\",\n\n        \"gl_FragColor = d + s;\",\n\n      \"#elif (BLENDING == \" + THREE.SubtractiveBlending + \")\",\n\n        \"gl_FragColor = d - s;\",\n\n      \"#elif (BLENDING == \" + THREE.MultiplyBlending + \")\",\n\n        \"gl_FragColor = d * s;\",\n\n      \"#else\", // THREE.NoBlending\n\n        \"gl_FragColor = s;\",\n\n      \"#endif\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\n// File:examples/js/shaders/GlossyMirrorShader.js\n\nTHREE.GlossyMirrorShader = {\n\n\tdefines: {\n\t\t\"SPECULAR_MAP\": 0,\n\t\t\"ROUGHNESS_MAP\": 0,\n\t\t\"GLOSSY_REFLECTIONS\": 1,\n\t\t\"REFLECTION_LOD_LEVELS\": 4,\n\t\t\"PERSPECTIVE_CAMERA\": 1\n\t},\n\n\tuniforms: {\n\n\t \t\"metalness\": { type: \"f\", value: 0.0 },\n\n\t \t\"specularColor\": { type: \"c\", value: new THREE.Color( 0xffffff ) },\n\t\t\"tSpecular\": { type: \"t\", value: null },\n\n\t\t\"tReflection\": { type: \"t\", value: null },\n\t\t\"tReflection1\": { type: \"t\", value: null },\n\t\t\"tReflection2\": { type: \"t\", value: null },\n\t\t\"tReflection3\": { type: \"t\", value: null },\n\t\t\"tReflection4\": { type: \"t\", value: null },\n\t\t\"tReflectionDepth\": { type: \"t\", value: null },\n\n\t\t\"roughness\": { type: \"f\", value: 0.0 },\n\t \t\"distanceFade\": { type: \"f\", value: 0.01 },\n\t \t\"fresnelStrength\": { type: \"f\", value: 1.0 },\n\n\t\t\"reflectionTextureMatrix\" : { type: \"m4\", value: new THREE.Matrix4() },\n\t\t\"mirrorCameraWorldMatrix\": { type: \"m4\", value: new THREE.Matrix4() },\n\t\t\"mirrorCameraProjectionMatrix\": { type: \"m4\", value: new THREE.Matrix4() },\n\t\t\"mirrorCameraInverseProjectionMatrix\": { type: \"m4\", value: new THREE.Matrix4() },\n\t\t\"mirrorCameraNear\": { type: \"f\", value: 0 },\n\t\t\"mirrorCameraFar\": { type: \"f\", value: 0 },\n\t\t\"screenSize\": { type: \"v2\", value: new THREE.Vector2() },\n\t\t\"mirrorNormal\": { type: \"v3\", value: new THREE.Vector3() },\n\t\t\"mirrorWorldPosition\": { type: \"v3\", value: new THREE.Vector3() }\n\t},\n\n\tvertexShader: [\n\n\t\t\"uniform mat4 reflectionTextureMatrix;\",\n\n\t\t\"varying vec4 mirrorCoord;\",\n\t\t\"varying vec3 vecPosition;\",\n\t\t\"varying vec3 worldNormal;\",\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\t\t\t\"vUv = uv;\",\n\t\t\t\"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\n\t\t\t\"vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\",\n\t\t\t\"vecPosition = cameraPosition - worldPosition.xyz;\",\n\t\t\t\"worldNormal = (modelMatrix * vec4(normal,0.0)).xyz;\",\n\t\t\t\"mirrorCoord = reflectionTextureMatrix * worldPosition;\",\n\n\t\t\t\"gl_Position = projectionMatrix * mvPosition;\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tblending: THREE.NormalBlending,\n\ttransparent: true,\n\n\tfragmentShader: [\n\n\t\t\"#include <common>\",\n\t\t\"#include <packing>\",\n\t\t\"#include <bsdfs>\",\n\n\t\t\"uniform float roughness;\",\n\t\t\"#if ROUGHNESS_MAP == 1\",\n\t\t\t\"uniform sampler2D tRoughness;\",\n\t\t\"#endif\",\n\n\t\t\"uniform float metalness;\",\n\t\t\"uniform float distanceFade;\",\n\t\t\"uniform float fresnelStrength;\",\n\n\t\t\"uniform vec3 specularColor;\",\n\t\t\"#if SPECULAR_MAP == 1\",\n\t\t\t\"uniform sampler2D tSpecular;\",\n\t\t\"#endif\",\n\n\t\t\"uniform sampler2D tReflection;\",\n\t\t\"#if GLOSSY_REFLECTIONS == 1\",\n\t\t\t\"uniform sampler2D tReflection1;\",\n\t\t\t\"uniform sampler2D tReflection2;\",\n\t\t\t\"uniform sampler2D tReflection3;\",\n\t\t\t\"uniform sampler2D tReflection4;\",\n\t\t\t\"uniform sampler2D tReflectionDepth;\",\n\t\t\"#endif\",\n\n\t\t\"varying vec3 vecPosition;\",\n\t\t\"varying vec3 worldNormal;\",\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"varying vec4 mirrorCoord;\",\n\t\t\"uniform mat4 mirrorCameraProjectionMatrix;\",\n \t\t\"uniform mat4 mirrorCameraInverseProjectionMatrix;\",\n\t\t\"uniform mat4 mirrorCameraWorldMatrix;\",\n\t\t\"uniform float mirrorCameraNear;\",\n\t\t\"uniform float mirrorCameraFar;\",\n\t\t\"uniform vec2 screenSize;\",\n\t\t\"uniform vec3 mirrorNormal;\",\n\t\t\"uniform vec3 mirrorWorldPosition;\",\n\n\t\t\"#if GLOSSY_REFLECTIONS == 1\",\n\n\t\t\t\"float getReflectionDepth() {\",\n\n\t\t\t\t\"return unpackRGBAToDepth( texture2DProj( tReflectionDepth, mirrorCoord ) );\",\n\n\t \t\t\"}\",\n\n\t\t\t\"float getReflectionViewZ( const in float reflectionDepth ) {\",\n\t\t\t\t\"#if PERSPECTIVE_CAMERA == 1\",\n\t \t\t\t\t\"return perspectiveDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );\",\n\t\t\t\t\"#else\",\n\t\t\t\t\t\"return orthographicDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );\",\n\t\t\t\t\"#endif\",\n\t \t\t\"}\",\n\n\t \t\t\"vec3 getReflectionViewPosition( const in vec2 screenPosition, const in float reflectionDepth, const in float reflectionViewZ ) {\",\n\n\t \t\t\t\"float clipW = mirrorCameraProjectionMatrix[2][3] * reflectionViewZ + mirrorCameraProjectionMatrix[3][3];\",\n\t \t\t\t\"vec4 clipPosition = vec4( ( vec3( screenPosition, reflectionDepth ) - 0.5 ) * 2.0, 1.0 );\",\n\t \t\t\t\"clipPosition *= clipW;\", // unprojection.\n\t\t\t\t\"return ( mirrorCameraInverseProjectionMatrix * clipPosition ).xyz;\",\n\n\t \t\t\"}\",\n\n\t\t\"#endif\",\n\n\t\t\"vec4 getReflection( const in vec4 mirrorCoord, const in float lodLevel ) {\",\n\n\t\t\t\"#if GLOSSY_REFLECTIONS == 0\",\n\n\t\t\t\t\"return texture2DProj( tReflection, mirrorCoord );\",\n\n\t\t\t\"#else\",\n\n\t\t\t\t\"vec4 color0, color1;\",\n\t\t\t\t\"float alpha;\",\n\n\t\t\t\t\"if( lodLevel < 1.0 ) {\",\n\t\t\t\t\t\"color0 = texture2DProj( tReflection, mirrorCoord );\",\n\t\t\t\t\t\"color1 = texture2DProj( tReflection1, mirrorCoord );\",\n\t\t\t\t\t\"alpha = lodLevel;\",\n\t\t\t\t\"}\",\n\t\t\t\t\"else if( lodLevel < 2.0) {\",\n\t\t\t\t\t\"color0 = texture2DProj( tReflection1, mirrorCoord );\",\n\t\t\t\t\t\"color1 = texture2DProj( tReflection2, mirrorCoord );\",\n\t\t\t\t\t\"alpha = lodLevel - 1.0;\",\n\t\t\t\t\"}\",\n\t\t\t\t\"else if( lodLevel < 3.0 ) {\",\n\t\t\t\t\t\"color0 = texture2DProj( tReflection2, mirrorCoord );\",\n\t\t\t\t\t\"color1 = texture2DProj( tReflection3, mirrorCoord );\",\n\t\t\t\t\t\"alpha = lodLevel - 2.0;\",\n\t\t\t\t\"}\",\n\t\t\t\t\"else {\",\n\t\t\t\t\t\"color0 = texture2DProj( tReflection3, mirrorCoord );\",\n\t\t\t\t\t\"color1 = color0;\",\n\t\t\t\t\t\"alpha = 0.0;\",\n\t\t\t\t\"}\",\n\n\t\t\t\t\"return mix( color0, color1, alpha );\",\n\n\t\t\t\"#endif\",\n\n\t\t\"}\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec3 specular = specularColor;\",\n\t\t\t\"#if SPECULAR_MAP == 1\",\n\t\t\t\t\"specular *= texture2D( tSpecular, vUv );\",\n\t\t\t\"#endif\",\n\n\t\t\t\"float fade = 1.0;\",\n\n\t\t\t\"#if GLOSSY_REFLECTIONS == 1\",\n\n\t\t\t\t\"float localRoughness = roughness;\",\n\t\t\t\t\"#if ROUGHNESS_MAP == 1\",\n\t\t\t\t\t\"localRoughness *= texture2D( tRoughness, vUv ).r;\",\n\t\t\t\t\"#endif\",\n\n\t\t\t\t\"vec2 screenPosition = gl_FragCoord.xy / screenSize;\",\n\t\t\t\t\"float reflectionDepth = getReflectionDepth();\",\n\t\t\t\t\"float reflectionViewZ = getReflectionViewZ( reflectionDepth );\",\n\n\t\t\t\t\"vec3 reflectionViewPosition = getReflectionViewPosition( screenPosition, reflectionDepth, reflectionViewZ );\",\n\t\t\t\t\"vec3 reflectionWorldPosition = ( mirrorCameraWorldMatrix * vec4( reflectionViewPosition, 1.0 ) ).xyz;\",\n\n\t\t\t\t\"vec3 closestPointOnMirror = projectOnPlane( reflectionWorldPosition, mirrorWorldPosition, mirrorNormal );\",\n\n\n\t\t\t\t\"vec3 pointOnMirror = linePlaneIntersect( cameraPosition, normalize( reflectionWorldPosition - cameraPosition ), mirrorWorldPosition, mirrorNormal );\",\n\t\t\t\t\"float distance = length( closestPointOnMirror - reflectionWorldPosition );\",\n\n\n\t\t\t\t\"localRoughness = localRoughness * distance * 0.2;\",\n\t\t\t\t\"float lodLevel = localRoughness;\",\n\n\t\t\t\t\"fade = 1.0 - ( distanceFade * distance );\",\n\t\t\t\"#else\",\n\n\t\t\t\t\"float lodLevel = 0.0;\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"vec4 reflection = getReflection( mirrorCoord, lodLevel );\",\n\n\t\t\t// apply dieletric-conductor model parameterized by metalness parameter.\n\t\t\t\"float dotNV = clamp( dot( normalize( worldNormal ), normalize( vecPosition ) ), EPSILON, 1.0 );\",\n\t\t\t\"specular = mix( vec3( 0.05 ), specular, metalness );\",\n\t\t\t// TODO: Invert fresnel.\n\t\t\t\"vec3 fresnel;\",\n\t\t\t\"if( fresnelStrength < 0.0 ) {\",\n\t\t\t\t\"fresnel = mix( specular, specular * pow( dotNV, 2.0 ), -fresnelStrength ) * pow( 1.0 - roughness, 2.0 );\",\n\t\t\t\"} else {\",\n\t\t\t\t\"fresnel = mix( specular, F_Schlick( specular, dotNV ), fresnelStrength ) * pow( 1.0 - roughness, 2.0 );\",\n\t\t\t\"}\",\n\t\t\t\"gl_FragColor = vec4( reflection.rgb, fresnel * fade * reflection.a );\", // fresnel controls alpha\n\n\n\t\t\"}\"\n\n\t\t].join( \"\\n\" )\n\n};\n// File:examples/js/shaders/SAOShader.js\n\n/**\n * @author bhouston / http://clara.io/\n *\n * Scalable Ambient Occlusion\n *\n */\n\nTHREE.ShaderChunk['sao'] = [\n\n\"#include <packing>\",\n\n\"float getDepth( const in vec2 screenPosition ) {\",\n\n\t\"#if DEPTH_PACKING == 1\",\n\t\t\"return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\",\n\t\"#else\",\n\t\t\"return texture2D( tDepth, screenPosition ).x;\",\n\t\"#endif\",\n\n\"}\",\n\n\"vec4 setDepth( const in float depth ) {\",\n\n\t\"#if DEPTH_PACKING == 1\",\n\t\t\"return packDepthToRGBA( depth );\",\n\t\"#else\",\n\t\t\"return vec4( depth, 0, 0, 0 );\",\n\t\"#endif\",\n\n\"}\",\n\n\"float getViewZ( const in float depth ) {\",\n\n\t\"#if PERSPECTIVE_CAMERA == 1\",\n\t\t\"return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\"#else\",\n\t\t\"return orthographicDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\"#endif\",\n\n\"}\"\n\n].join( \"\\n\" );\n\nTHREE.SAOShader = {\n\n\tblending: THREE.NoBlending,\n\n\tdefines: {\n\t\t'NUM_SAMPLES': 13,\n\t\t'NUM_RINGS': 7,\n\t\t\"NORMAL_TEXTURE\": 0,\n\t\t\"DIFFUSE_TEXTURE\": 1,\n\t\t\"DEPTH_PACKING\": 1,\n\t\t\"DEPTH_MIPS\": 0,\n\t\t\"PERSPECTIVE_CAMERA\": 1\n\t},\n\n\textensions: {\n\t\t'derivatives': true\n\t},\n\n\tuniforms: {\n\n\t\t\"tDepth\":       { type: \"t\", value: null },\n\t\t\"tDepth1\":       { type: \"t\", value: null },\n\t\t\"tDepth2\":       { type: \"t\", value: null },\n\t\t\"tDepth3\":       { type: \"t\", value: null },\n\n\t\t\"tDiffuse\":     { type: \"t\", value: null },\n\t\t\"tNormal\":      { type: \"t\", value: null },\n\t\t\"size\":         { type: \"v2\", value: new THREE.Vector2( 512, 512 ) },\n\n\t\t\"cameraNear\":   { type: \"f\", value: 1 },\n\t\t\"cameraFar\":    { type: \"f\", value: 100 },\n\t\t\"cameraProjectionMatrix\": { type: \"m4\", value: new THREE.Matrix4() },\n\t\t\"cameraInverseProjectionMatrix\": { type: \"m4\", value: new THREE.Matrix4() },\n\n\t\t\"intensity\":    { type: \"f\", value: 0.1 },\n\n\t\t\"occlusionSphereWorldRadius\": { type: \"f\", value: 100.0 },\n\t\t\"worldToScreenRatio\": { type: \"v2\", value: new THREE.Vector2( 1, 1 ) },\n\t\t\"randomSeed\":   { type: \"f\", value: 0.0 }\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\n\t\t\"#include <common>\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"#if DIFFUSE_TEXTURE == 1\",\n\t\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"#endif\",\n\n\t\t\"#define MAX_MIP_LEVEL 3\",\n\n\t\t\"uniform sampler2D tDepth;\",\n\n\t\t\"#if DEPTH_MIPS == 1\",\n\t\t\t\"uniform sampler2D tDepth1;\",\n\t\t\t\"uniform sampler2D tDepth2;\",\n\t\t\t\"uniform sampler2D tDepth3;\",\n\t\t\"#endif\",\n\n\t\t\"#if NORMAL_TEXTURE == 1\",\n\t\t\t\"uniform sampler2D tNormal;\",\n\t\t\"#endif\",\n\n\t\t\"uniform float cameraNear;\",\n\t\t\"uniform float cameraFar;\",\n\t\t\"uniform mat4 cameraProjectionMatrix;\",\n\t\t\"uniform mat4 cameraInverseProjectionMatrix;\",\n\n\t\t\"uniform float intensity;\",\n\t\t\"uniform float occlusionSphereWorldRadius;\",\n\t\t\"uniform vec2 size;\",\n\t\t\"uniform vec2 worldToScreenRatio;\",\n\t\t\"uniform float randomSeed;\",\n\n\n\t\t\"#include <sao>\",\n\n\t\t\"vec4 getDefaultColor( const in vec2 screenPosition ) {\",\n\n\t\t\t\"#if DIFFUSE_TEXTURE == 1\",\n\t\t\t\t\"return texture2D( tDiffuse, vUv );\",\n\t\t\t\"#else\",\n\t\t\t\t\"return vec4( 1.0 );\",\n\t\t\t\"#endif\",\n\n\t\t\"}\",\n\n\t\t\"vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\",\n\n\t\t\t\"float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\",\n\t\t\t\"vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\",\n\t\t\t\"clipPosition *= clipW;\", // unprojection.\n\t\t\t\"return ( cameraInverseProjectionMatrix * clipPosition ).xyz;\",\n\n\t\t\"}\",\n\n\t\t\"vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\",\n\n\t\t\t\"#if NORMAL_TEXTURE == 1\",\n\t\t\t\t\"return -unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\",\n\t\t\t\"#else\",\n\t\t\t\t\"return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\",\n\t\t\t\"#endif\",\n\n\t\t\"}\",\n\n\t\t\"float getDepthMIP( const in vec2 screenPosition, const int mipLevel ) {\",\n\n\t\t\t\"vec4 rawDepth;\",\n\t\t\t\"#if DEPTH_MIPS == 0\",\n\t\t\t\t\"rawDepth = texture2D( tDepth, screenPosition );\",\n\t\t\t\"#else\",\n\t\t\t\t\"if( mipLevel == 0 ) {\",\n\t\t\t\t\t\"rawDepth = texture2D( tDepth, screenPosition );\",\n\t\t\t\t\"}\",\n\t\t\t\t\"else if( mipLevel == 1 ) {\",\n\t\t\t\t\t\"rawDepth = texture2D( tDepth1, screenPosition );\",\n\t\t\t\t\"}\",\n\t\t\t\t\"else if( mipLevel == 2 ) {\",\n\t\t\t\t\t\"rawDepth = texture2D( tDepth2, screenPosition );\",\n\t\t\t\t\"}\",\n\t\t\t\t\"else {\",\n\t\t\t\t\t\"rawDepth = texture2D( tDepth3, screenPosition );\",\n\t\t\t\t\"}\",\n\t\t\t\"#endif\",\n\n\t\t\t\"#if DEPTH_PACKING == 1\",\n\t\t\t\t\"return unpackRGBAToDepth( rawDepth );\",\n\t\t\t\"#else\",\n\t\t\t\t\"return rawDepth.x;\",\n\t\t\t\"#endif\",\n\n\t\t\"}\",\n\n\t\t\"float scaleDividedByCameraFar;\",\n\t\t\"float minResolutionMultipliedByCameraFar;\",\n\t\t\"float errorCorrectionFactor;\",\n\n\t\t\"float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\",\n\n\t\t\t\"vec3 viewDelta = sampleViewPosition - centerViewPosition;\",\n\t\t\t\"float viewDistance2 = dot( viewDelta, viewDelta );\",\n\n\t\t\t\"return max( ( dot( centerViewNormal, viewDelta ) + centerViewPosition.z * 0.001 ) / ( viewDistance2 + 0.0001 ), 0.0 );// * smoothstep( pow2( occlusionSphereWorldRadius ), 0.0, viewDistance2 );\",\n\n\t\t\"}\",\n\n\t\t/*\n\t\t\"float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\",\n\n\t\t\t\"vec3 viewDelta = sampleViewPosition - centerViewPosition;\",\n\t\t\t\"float viewDistance2 = dot( viewDelta, viewDelta );\",\n\n\t\t\t\"return max( pow3( pow2( occlusionSphereWorldRadius ) - viewDistance2 ), 0.0 ) *\",\n\t\t\t\t\"max( ( dot( centerViewNormal, viewDelta ) - 0.01 * occlusionSphereWorldRadius ) / ( viewDistance2 + 0.0001 ), 0.0 );\",\n\n\t\t\"}\",*/\n\n\t\t//\"const float maximumScreenRadius = 10.0;\",\n\n\t\t\"int getMipLevel( const in vec2 occlusionSphereScreenRadius ) {\",\n    \t\t\"return int( clamp( floor( log2( length( occlusionSphereScreenRadius * size ) ) - 4.0 ), 0.0, 3.0 ) );\",\n\t\t\"}\",\n\n\t\t// moving costly divides into consts\n\t\t\"const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\",\n\t\t\"const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\",\n\n\t\t\"float getAmbientOcclusion( const in vec3 centerViewPosition ) {\",\n\n\t\t\t// precompute some variables require in getOcclusion.\n\t\t\t\"vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\",\n\n\t\t\t\"vec2 invSize = 1.0 / size;\",\n\n\t\t\t\"vec2 occlusionSphereScreenRadius = occlusionSphereWorldRadius * worldToScreenRatio / centerViewPosition.z;\",\n\n\t\t\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n\t\t\t\"float random = rand( vUv + randomSeed );\",\n\t\t\t\"float angle = random * PI2;\",\n\t\t\t\"float radiusStep = INV_NUM_SAMPLES;\",\n\t\t\t\"float radius = radiusStep * ( 0.5 + random );\",\n\n\t\t\t\"float occlusionSum = 0.0;\",\n\n\t\t\t\"for( int i = 0; i < NUM_SAMPLES; i ++ ) {\",\n\t\t\t\t\"radius = (float(i) + 0.5) * radiusStep;\",\n\t\t\t\t\"vec2 sampleUvOffset = vec2( cos( angle ), sin( angle ) ) * radius * occlusionSphereScreenRadius * 1.0;\",\n\n\t\t\t\t// round to nearest true sample to avoid misalignments between viewZ and normals, etc.\n\t\t\t\t\"sampleUvOffset = floor( sampleUvOffset * size + vec2( 0.5 ) ) * invSize;\",\n\t\t\t\t\"if( sampleUvOffset.x == 0.0 && sampleUvOffset.y == 0.0 ) continue;\",\n\n\t\t\t\t\"angle += ANGLE_STEP;\",\n\n\t\t\t\t\"vec2 sampleUv = vUv + sampleUvOffset;\",\n\n\t\t\t\t\"if( sampleUv.x <= 0.0 || sampleUv.y <= 0.0 || sampleUv.x >= 1.0 || sampleUv.y >= 1.0 ) continue;\", // skip points outside of texture.\n\n\t\t\t\t//\"int depthMipLevel = getMipLevel( radius * occlusionSphereScreenRadius );\",\n\t\t\t\t\"float sampleDepth = getDepthMIP( sampleUv, int( 4.0 * radius ) );\",\n\t\t\t\t\"if( sampleDepth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\t\t\t\"continue;\",\n\t\t\t\t\"}\",\n\n\t\t\t\t\"float sampleViewZ = getViewZ( sampleDepth );\",\n\t\t\t\t\"vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\",\n\t\t\t\t\"occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\",\n\n\t\t\t\"}\",\n\n\t\t\t\"return occlusionSum * intensity * 2.0 * occlusionSphereWorldRadius / ( float( NUM_SAMPLES ) );\",\n\t\t\t//\"return occlusionSum * intensity * 5.0 / ( float( NUM_SAMPLES ) * pow( occlusionSphereWorldRadius, 6.0 ) );\",\n\n\t\t\"}\",\n\n\n\t\t\"void main() {\",\n\n\t\t\t\"float centerDepth = getDepth( vUv );\",\n\t\t\t\"if( centerDepth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\t\t\"discard;\",\n\t\t\t\"}\",\n\n\t\t/*\t\"float mipDepth = unpackRGBAToDepth( texture2D( tDepth3, vUv ) );\",\n\t\t\t\"gl_FragColor.xyz = vec3( (centerDepth - mipDepth) * 50.0 + 0.5 );\",\n\t\t\t\"gl_FragColor.a = 1.0;\",\n\t\t\t\"return;\",*/\n\n\t\t\t\"float centerViewZ = getViewZ( centerDepth );\",\n\t\t\t\"vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\",\n\n\t\t\t\"float ambientOcclusion = getAmbientOcclusion( viewPosition );\",\n\n\t\t\t//\"gl_FragColor = getDefaultColor( vUv );\",\n\n\t\t\t\"gl_FragColor = packDepthToRGBA( centerDepth );\",\n\t\t\t\"gl_FragColor.x = max( 1.0 - ambientOcclusion, 0.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\n// source: http://g3d.cs.williams.edu/websvn/filedetails.php?repname=g3d&path=%2FG3D10%2Fdata-files%2Fshader%2FAmbientOcclusion%2FAmbientOcclusion_minify.pix\nTHREE.SAODepthMinifyShader = {\n\n\tblending: THREE.NoBlending,\n\n\tdefines: {\n\t\t\"DEPTH_PACKING\": 1,\n\t//\t\"JITTERED_SAMPLING\": 1\n\t},\n\n\tuniforms: {\n\n\t\t\"tDepth\":\t{ type: \"t\", value: null },\n\t\t\"cameraNear\":   { type: \"f\", value: 1 },\n\t\t\"cameraFar\":    { type: \"f\", value: 100 },\n\t\t\"size\": { type: \"v2\", value: new THREE.Vector2( 256, 256 ) },\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\n\t\t\"#include <common>\",\n\t\t\"#include <packing>\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"uniform sampler2D tDepth;\",\n\t\t\"uniform vec2 size;\",\n\t\t\"uniform float cameraNear;\",\n\t\t\"uniform float cameraFar;\",\n\n\t\t\"void main() {\",\n\n/*\t\tg3d_FragColor.mask = texelFetch(\n\t\t\tCSZ_buffer,\n\t\t\tclamp(\n\t\t\t\tssP * 2 + ivec2(ssP.y & 1, ssP.x & 1),\n\t\t\t\tivec2(0),\n\t\t\t\ttextureSize(CSZ_buffer, previousMIPNumber) - ivec2(1)),\n\t\t\tpreviousMIPNumber).mask;\n\n\t }*/\n\n\t \t\t\"vec2 uv = vUv;\",\n\n\t\t//\t\"uv += ( round( vec2( rand( vUv * size ), rand( vUv * size + vec2( 0.333, 2.0 ) ) ) ) - 0.5 ) / size;\",\n\t\t\t\"vec2 invSize = 0.5 / size;\",\n\n\t\t\t// NOTE: no need for depth decoding if nearest interpolation is used.\n\t\t/*\t\"float viewZ = 1.0 / perspectiveDepthToViewZ( unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, -1.0 ) ) ), cameraNear, cameraFar );\",\n\t\t\t\"viewZ += 1.0 / perspectiveDepthToViewZ( unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, 1.0 ) ) ), cameraNear, cameraFar );\",\n\t\t\t\"viewZ += 1.0 / perspectiveDepthToViewZ( unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, 1.0 ) ) ), cameraNear, cameraFar );\",\n\t\t\t\"viewZ += 1.0 / perspectiveDepthToViewZ( unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, -1.0 ) ) ), cameraNear, cameraFar );\",\n\t\t\t\"viewZ *= 0.25;\",\n\t\t\t\"gl_FragColor = packDepthToRGBA( viewZToPerspectiveDepth( 1.0 / viewZ, cameraNear, cameraFar ) );\",*/\n\t\t\t\"float depth = unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, -1.0 ) ) );\",\n\t\t\t\"depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, 1.0 ) ) );\",\n\t\t\t\"depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, 1.0 ) ) );\",\n\t\t\t\"depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, -1.0 ) ) );\",\n\t\t\t\"depth *= 0.25;\",\n\t\t\t\"gl_FragColor = packDepthToRGBA( depth );\",\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\nTHREE.SAOBilaterialFilterShader = {\n\n\tblending: THREE.NoBlending,\n\n\tdefines: {\n\t\t\"PERSPECTIVE_CAMERA\": 1,\n\t\t\"KERNEL_SAMPLE_RADIUS\": 4,\n\t},\n\n\tuniforms: {\n\n\t\t\"tAODepth\":\t{ type: \"t\", value: null },\n\t\t\"tAONormal\":\t{ type: \"t\", value: null },\n\t\t\"size\": { type: \"v2\", value: new THREE.Vector2( 256, 256 ) },\n\n\t\t\"kernelDirection\": { type: \"v2\", value: new THREE.Vector2( 1, 0 ) },\n\n\t\t\"cameraNear\":   { type: \"f\", value: 1 },\n\t\t\"cameraFar\":    { type: \"f\", value: 100 },\n\t\t\"edgeSharpness\":    { type: \"f\", value: 3 },\n\t\t\"packOutput\":    { type: \"f\", value: 1 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"#include <common>\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"uniform sampler2D tAODepth;\",\n\t\t\"uniform sampler2D tAONormal;\",\n\t\t\"uniform vec2 size;\",\n\n\t\t\"uniform float cameraNear;\",\n\t\t\"uniform float cameraFar;\",\n\t\t\"uniform float edgeSharpness;\",\n\t\t\"uniform int packOutput;\",\n\n\t\t\"uniform vec2 kernelDirection;\",\n\n\t\t\"#include <packing>\",\n\n\t\t\"float getViewZ( const in float depth ) {\",\n\n\t\t\t\"#if PERSPECTIVE_CAMERA == 1\",\n\t\t\t\t\"return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\t\t\"#else\",\n\t\t\t\t\"return orthographicDepthToViewZ( depth, cameraNear, cameraFar );\",\n\t\t\t\"#endif\",\n\n\t\t\"}\",\n\n\t\t\"void addTapInfluence( const in vec2 tapUv, const in vec3 centerNormal, const in float centerViewZ, const in float kernelWeight, inout float aoSum, inout float weightSum ) {\",\n\n\t\t\t\"vec4 depthTexel = texture2D( tAODepth, tapUv );\",\n\t\t\t\"float ao = depthTexel.r;\",\n\t\t\t\"depthTexel.r = 1.0;\",\n\t\t\t\"float depth = unpackRGBAToDepth( depthTexel );\",\n\n\t\t\t\"if( depth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\t\t\"return;\",\n\t\t\t\"}\",\n\n\t\t\t\"float tapViewZ = -getViewZ( depth );\",\n\t\t\t\"float depthWeight = max(0.0, 1.0 - (edgeSharpness * 20.0) * abs(tapViewZ - centerViewZ));\",\n\n\t\t\t\"vec3 normal = unpackRGBToNormal(texture2D(tAONormal, tapUv).rgb);\",\n\t\t\t\"float normalCloseness = dot(normal, centerNormal);\",\n\t\t\t\"float k_normal = 4.0;\",\n\t\t\t\"float normalError = (1.0 - pow4( normalCloseness )) * k_normal;\",\n\t\t\t\"float normalWeight = max((1.0 - edgeSharpness * normalError), 0.00);\",\n\n\t\t\t\"float tapWeight = kernelWeight * ( depthWeight + normalWeight );\",\n\n\t\t\t\"aoSum += ao * tapWeight;\",\n\t\t\t\"weightSum += tapWeight;\",\n\t\t\"}\",\n\n\t\t\"float normpdf(in float x, in float sigma) {\",\n\t\t\t\"return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\",\n\t\t\"}\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec4 depthTexel = texture2D( tAODepth, vUv );\",\n\t\t\t\"float ao = depthTexel.r;\",\n\t\t\t\"depthTexel.r = 1.0;\",\n\t\t\t\"float depth = unpackRGBAToDepth( depthTexel );\",\n\t\t\t\"if( depth >= ( 1.0 - EPSILON ) ) {\",\n\t\t\t\t\"discard;\",\n\t\t\t\"}\",\n\n\t\t\t\"float centerViewZ = -getViewZ( depth );\",\n\n\t\t\t\"float weightSum = normpdf(0.0, 5.0) + 0.1;\",\n\t\t\t\"float aoSum = ao * weightSum;\",\n\n\t\t\t\"vec2 uvIncrement = ( kernelDirection / size );\",\n\n\t\t\t\"vec2 rTapUv = vUv, lTapUv = vUv;\",\n\t\t\t\"vec3 normalCenter = unpackRGBToNormal(texture2D(tAONormal, vUv).rgb);\",\n\n\t\t\t\"for( int i = 1; i <= KERNEL_SAMPLE_RADIUS; i ++ ) {\",\n\n\t\t\t\t\"float kernelWeight = normpdf(float(i), 5.0) + 0.1;\",\n\n\t\t\t\t\"rTapUv += uvIncrement;\",\n\t\t\t\t\"addTapInfluence( rTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );\",\n\n\t\t\t\t\"lTapUv -= uvIncrement;\",\n\t\t\t\t\"addTapInfluence( lTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );\",\n\n\t\t\t\"}\",\n\n\t\t\t\"ao = aoSum / weightSum;\",\n\t\t\t\"if( packOutput == 1 ) {\",\n\t\t\t\t\"gl_FragColor = depthTexel;\",\n\t\t\t\t\"gl_FragColor.r = ao;\",\n\t\t\t\"}\",\n\t\t\t\"else {\",\n\t\t\t\t\"gl_FragColor = vec4( vec3( ao ), 1.0 );\",\n\t\t\t\"}\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\n// File:examples/js/shaders/BlurShader.js\n\n/**\n * @author bhouston / http://clara.io\n *\n * For a horizontal blur, use X_STEP 1, Y_STEP 0\n * For a vertical blur, use X_STEP 0, Y_STEP 1\n *\n */\n\nTHREE.BlurShader = {\n\n\tdefines: {\n\n\t\t\"KERNEL_RADIUS\": 4\n\n\t},\n\n\tuniforms: {\n\n\t\t\"tDiffuse\":         { type: \"t\", value: null },\n\t\t\"size\":             { type: \"v2\", value: new THREE.Vector2( 512, 512 ) },\n\t\t\"sampleUvOffsets\":  { type: \"v2v\", value: [ new THREE.Vector2( 0, 0 ) ] },\n\t\t\"sampleWeights\":    { type: \"1fv\", value: [ 1.0 ] },\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"#include <common>\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vUv = uv;\",\n\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform vec2 size;\",\n\n\t\t\"uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];\",\n\t\t\"uniform float sampleWeights[ KERNEL_RADIUS + 1 ];\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec2 invSize = 1.0 / size;\",\n\n\t\t\t\"float weightSum = sampleWeights[0];\",\n\t\t\t\"vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;\",\n\n\t\t\t\"for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\",\n\n\t\t\t\t\"float weight = sampleWeights[i];\",\n\t\t\t\t\"vec2 sampleUvOffset = sampleUvOffsets[i] * invSize;\",\n\t\t\t\t\"diffuseSum += ( texture2D( tDiffuse, vUv + sampleUvOffset ) + texture2D( tDiffuse, vUv - sampleUvOffset ) ) * weight;\",\n\t\t\t\t\"weightSum += 2.0 * weight;\",\n\n\t\t\t\"}\",\n\n\t\t\t\"gl_FragColor =diffuseSum / weightSum;\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\n\nTHREE.BlurShaderUtils = {\n\n\tcreateSampleWeights: function( kernelRadius, stdDev ) {\n\n\t\tvar gaussian = function( x, stdDev ) {\n\t\t\treturn Math.exp( - ( x*x ) / ( 2.0 * ( stdDev * stdDev ) ) ) / ( Math.sqrt( 2.0 * Math.PI ) * stdDev );\n\t\t};\n\n\t\tvar weights = [];\n\n\t\tfor( var i = 0; i <= kernelRadius; i ++ ) {\n\t\t\tweights.push( gaussian( i, stdDev ) );\n\t\t}\n\n\t\treturn weights;\n\t},\n\n\tcreateSampleOffsets: function( kernelRadius, uvIncrement ) {\n\n\t\tvar offsets = [];\n\n\t\tfor( var i = 0; i <= kernelRadius; i ++ ) {\n\t\t\toffsets.push( uvIncrement.clone().multiplyScalar( i ) );\n\t\t}\n\n\t\treturn offsets;\n\n\t},\n\n\tconfigure: function( material, kernelRadius, stdDev, uvIncrement ) {\n\n\t\tkernelRadius = kernelRadius | 0;\n\n\t\tif( ( material.defines[ 'KERNEL_RADIUS' ] !== kernelRadius ) || ( material.stdDev != stdDev ) ) {\n\n\t\t\tmaterial.defines[ 'KERNEL_RADIUS' ] = kernelRadius;\n\t\t\tmaterial.uniforms[ 'sampleUvOffsets' ].value = THREE.BlurShaderUtils.createSampleOffsets( kernelRadius, uvIncrement );\n\t\t\tmaterial.uniforms[ 'sampleWeights' ].value = THREE.BlurShaderUtils.createSampleWeights( kernelRadius, stdDev );\n\n\t\t\tmaterial.uvIncrement = uvIncrement;\n\t\t\tmaterial.stdDev = stdDev;\n\n\t\t\tmaterial.needsUpdate = true;\n\t\t}\n\n\t}\n\n};\n\n// File:examples/js/postprocessing/EffectComposer.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.EffectComposer = function ( renderer, renderTarget ) {\n\n\tthis.renderer = renderer;\n\n\tif ( renderTarget === undefined ) {\n\n\t\tvar parameters = {\n\t\t\tminFilter: THREE.LinearFilter,\n\t\t\tmagFilter: THREE.LinearFilter,\n\t\t\tformat: THREE.RGBAFormat,\n\t\t\tstencilBuffer: false\n\t\t};\n\t\tvar size = renderer.getSize();\n\t\trenderTarget = new THREE.WebGLRenderTarget( size.width, size.height, parameters );\n\n\t}\n\n\tthis.renderTarget1 = renderTarget;\n\tthis.renderTarget2 = renderTarget.clone();\n\n\tthis.writeBuffer = this.renderTarget1;\n\tthis.readBuffer = this.renderTarget2;\n\n\tthis.passes = [];\n\n\tif ( THREE.CopyShader === undefined )\n\t\tconsole.error( \"THREE.EffectComposer relies on THREE.CopyShader\" );\n\n\tthis.copyPass = new THREE.ShaderPass( THREE.CopyShader );\n\n};\n\nObject.assign( THREE.EffectComposer.prototype, {\n\n\tswapBuffers: function() {\n\n\t\tvar tmp = this.readBuffer;\n\t\tthis.readBuffer = this.writeBuffer;\n\t\tthis.writeBuffer = tmp;\n\n\t},\n\n\taddPass: function ( pass ) {\n\n\t\tthis.passes.push( pass );\n\n\t\tvar size = this.renderer.getSize();\n\t\tpass.setSize( size.width, size.height );\n\n\t},\n\n\tinsertPass: function ( pass, index ) {\n\n\t\tthis.passes.splice( index, 0, pass );\n\n\t},\n\n\trender: function ( delta ) {\n\n\t\tvar maskActive = false;\n\n\t\tvar pass, i, il = this.passes.length;\n\n\t\tfor ( i = 0; i < il; i ++ ) {\n\n\t\t\tpass = this.passes[ i ];\n\n\t\t\tif ( pass.enabled === false ) continue;\n\n\t\t\tpass.render( this.renderer, this.writeBuffer, this.readBuffer, delta, maskActive );\n\n\t\t\tif ( pass.needsSwap ) {\n\n\t\t\t\tif ( maskActive ) {\n\n\t\t\t\t\tvar context = this.renderer.context;\n\n\t\t\t\t\tcontext.stencilFunc( context.NOTEQUAL, 1, 0xffffffff );\n\n\t\t\t\t\tthis.copyPass.render( this.renderer, this.writeBuffer, this.readBuffer, delta );\n\n\t\t\t\t\tcontext.stencilFunc( context.EQUAL, 1, 0xffffffff );\n\n\t\t\t\t}\n\n\t\t\t\tthis.swapBuffers();\n\n\t\t\t}\n\n\t\t\tif ( THREE.MaskPass !== undefined ) {\n\n\t\t\t\tif ( pass instanceof THREE.MaskPass ) {\n\n\t\t\t\t\tmaskActive = true;\n\n\t\t\t\t} else if ( pass instanceof THREE.ClearMaskPass ) {\n\n\t\t\t\t\tmaskActive = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\treset: function ( renderTarget ) {\n\n\t\tif ( renderTarget === undefined ) {\n\n\t\t\tvar size = this.renderer.getSize();\n\n\t\t\trenderTarget = this.renderTarget1.clone();\n\t\t\trenderTarget.setSize( size.width, size.height );\n\n\t\t}\n\n\t\tthis.renderTarget1.dispose();\n\t\tthis.renderTarget2.dispose();\n\t\tthis.renderTarget1 = renderTarget;\n\t\tthis.renderTarget2 = renderTarget.clone();\n\n\t\tthis.writeBuffer = this.renderTarget1;\n\t\tthis.readBuffer = this.renderTarget2;\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis.renderTarget1.setSize( width, height );\n\t\tthis.renderTarget2.setSize( width, height );\n\n\t\tfor ( var i = 0; i < this.passes.length; i ++ ) {\n\n\t\t\tthis.passes[i].setSize( width, height );\n\n\t\t}\n\n\t}\n\n} );\n\n\nTHREE.Pass = function () {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen\n\tthis.renderToScreen = false;\n\n};\n\nObject.assign( THREE.Pass.prototype, {\n\n\tsetSize: function( width, height ) {},\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tconsole.error( \"THREE.Pass: .render() must be implemented in derived pass.\" );\n\n\t}\n\n} );\n\n// File:examples/js/postprocessing/RenderPass.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.RenderPass = function ( scene, camera, overrideMaterial, clearColor, clearAlpha ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.overrideMaterial = overrideMaterial;\n\n\tthis.clearColor = clearColor;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\tthis.clear = true;\n\tthis.needsSwap = false;\n\n};\n\nTHREE.RenderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.RenderPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tthis.scene.overrideMaterial = this.overrideMaterial;\n\n\t\tvar oldClearColor, oldClearAlpha;\n\n\t\tif ( this.clearColor !== undefined ) {\n\n\t\t\toldClearColor = renderer.getClearColor();\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\trenderer.renderOverride( this.overrideMaterial, this.scene, this.camera, this.renderToScreen ? null : readBuffer, this.clear );\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tthis.scene.overrideMaterial = null;\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n} );\n\n// File:examples/js/postprocessing/MaskPass.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.MaskPass = function ( scene, camera ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.clear = true;\n\tthis.needsSwap = false;\n\n\tthis.inverse = false;\n\n};\n\nTHREE.MaskPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.MaskPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar context = renderer.context;\n\t\tvar state = renderer.state;\n\n\t\t// don't update color or depth\n\n\t\tstate.buffers.color.setMask( false );\n\t\tstate.buffers.depth.setMask( false );\n\n\t\t// lock buffers\n\n\t\tstate.buffers.color.setLocked( true );\n\t\tstate.buffers.depth.setLocked( true );\n\n\t\t// set up stencil\n\n\t\tvar writeValue, clearValue;\n\n\t\tif ( this.inverse ) {\n\n\t\t\twriteValue = 0;\n\t\t\tclearValue = 1;\n\n\t\t} else {\n\n\t\t\twriteValue = 1;\n\t\t\tclearValue = 0;\n\n\t\t}\n\n\t\tstate.buffers.stencil.setTest( true );\n\t\tstate.buffers.stencil.setOp( context.REPLACE, context.REPLACE, context.REPLACE );\n\t\tstate.buffers.stencil.setFunc( context.ALWAYS, writeValue, 0xffffffff );\n\t\tstate.buffers.stencil.setClear( clearValue );\n\n\t\t// draw into the stencil buffer\n\n\t\trenderer.render( this.scene, this.camera, readBuffer, this.clear );\n\t\trenderer.render( this.scene, this.camera, writeBuffer, this.clear );\n\n\t\t// unlock color and depth buffer for subsequent rendering\n\n\t\tstate.buffers.color.setLocked( false );\n\t\tstate.buffers.depth.setLocked( false );\n\n\t\t// only render where stencil is set to 1\n\n\t\tstate.buffers.stencil.setFunc( context.EQUAL, 1, 0xffffffff );  // draw if == 1\n\t\tstate.buffers.stencil.setOp( context.KEEP, context.KEEP, context.KEEP );\n\n\t}\n\n} );\n\n\nTHREE.ClearMaskPass = function () {\n\n\tTHREE.Pass.call( this );\n\n\tthis.needsSwap = false;\n\n};\n\nTHREE.ClearMaskPass.prototype = Object.create( THREE.Pass.prototype );\n\nObject.assign( THREE.ClearMaskPass.prototype, {\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\trenderer.state.buffers.stencil.setTest( false );\n\n\t}\n\n} );\n\n// File:examples/js/postprocessing/ShaderPass.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ShaderPass = function ( shader, textureID ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.textureID = ( textureID !== undefined ) ? textureID : \"tDiffuse\";\n\n\tif ( shader instanceof THREE.ShaderMaterial ) {\n\n\t\tthis.uniforms = shader.uniforms;\n\n\t\tthis.material = shader;\n\n\t} else if ( shader ) {\n\n\t\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\t\tthis.material = new THREE.ShaderMaterial( {\n\n\t\t\tdefines: shader.defines || {},\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader\n\n\t\t} );\n\n\t}\n\n};\n\nTHREE.ShaderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.ShaderPass,\n\n\trender: function( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tif ( this.uniforms[ this.textureID ] ) {\n\n\t\t\tthis.uniforms[ this.textureID ].value = readBuffer.texture;\n\n\t\t}\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.renderPass( this.material );\n\n\t\t} else {\n\n\t\t\trenderer.renderPass( this.material, writeBuffer, this.clear );\n\n\t\t}\n\n\t}\n\n} );\n\n// File:examples/js/postprocessing/SAOPass.js\n\n/**\n*\n* Scalable Ambient Occlusion\n*\n* @author bhouston / http://clara.io/\n*\n*\n*/\n\nTHREE.SAOPass = function ( scene, camera ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.intensity = 0.5;\n\tthis.implicitNormals = false; // explicit normals requires or there are artifacts on mobile.\n\tthis.occlusionSphereWorldRadius = 20;\n\tthis.blurEnabled = true;\n\tthis.outputOverride = null; // 'beauty', 'depth', 'sao'\n\tthis.depthMIPs = false;\n\tthis.downSamplingRatio = 2;\n\tthis.blurKernelSize = (this.downSamplingRatio === 1) ? 8 : 6;\n\tthis.edgeSharpness = 1;\n\n\t/*\n\tif ( false && renderer.extensions.get('WEBGL_depth_texture') ) {\n\n\t\tconsole.log( \"using depth extension\");\n\n\t\tthis.depthTexture = optionalBuffers.depthTexture || new THREE.DepthTexture();\n\t\tthis.depthTexture.type = isWebGL2 ? THREE.FloatType : THREE.UnsignedShortType;\n\t\tthis.depthTexture.minFilter = THREE.NearestFilter;\n\t\tthis.depthTexture.maxFilter = THREE.NearestFilter;\n\n\t\tthis.beautyRenderTarget.depthBuffer = true;\n\t\tthis.beautyRenderTarget.depthTexture = this.depthTexture;\n\n\t}*/\n\n\tthis.depthMaterial = new THREE.MeshDepthMaterial();\n\tthis.depthMaterial.depthPacking = THREE.RGBADepthPacking;\n\tthis.depthMaterial.blending = THREE.NoBlending;\n\tthis.depthMaterial.side = THREE.DoubleSide;\n\n\tthis.normalMaterial = new THREE.MeshNormalMaterial();\n\n\tif ( THREE.SAOShader === undefined )\tconsole.error( \"THREE.SAOPass relies on THREE.SAOShader\" );\n\tif ( THREE.CopyShader === undefined )\tconsole.error( \"THREE.SAOPass relies on THREE.CopyShader\" );\n\n\tthis.depthMinifyMaterial = new THREE.ShaderMaterial( THREE.SAODepthMinifyShader );\n\tthis.depthMinifyMaterial.uniforms = THREE.UniformsUtils.clone( this.depthMinifyMaterial.uniforms );\n\tthis.depthMinifyMaterial.defines = THREE.UniformsUtils.cloneDefines( this.depthMinifyMaterial.defines );\n\tthis.depthMinifyMaterial.blending = THREE.NoBlending;\n\n\tthis.saoMaterial = new THREE.ShaderMaterial( THREE.SAOShader );\n\tthis.saoMaterial.uniforms = THREE.UniformsUtils.clone( this.saoMaterial.uniforms );\n\tthis.saoMaterial.defines = THREE.UniformsUtils.cloneDefines( this.saoMaterial.defines );\n\tthis.saoMaterial.defines[ 'DIFFUSE_TEXTURE' ] = 0;\n\tthis.saoMaterial.defines[ 'NORMAL_TEXTURE' ] = this.implicitNormals ? 0 : 1;\n\tthis.saoMaterial.defines[ 'MODE' ] = 2;\n\n\tthis.bilateralFilterMaterial = new THREE.ShaderMaterial( THREE.SAOBilaterialFilterShader );\n\tthis.bilateralFilterMaterial.uniforms = THREE.UniformsUtils.clone( this.bilateralFilterMaterial.uniforms );\n\tthis.bilateralFilterMaterial.defines = THREE.UniformsUtils.cloneDefines( this.bilateralFilterMaterial.defines );\n\tthis.bilateralFilterMaterial.blending = THREE.NoBlending;\n\tthis.bilateralFilterMaterial.premultipliedAlpha = true;\n\n\tthis.bilateralUpsamplerMaterial = this.getBilateralUpsamplerMaterial();\n\n\tthis.copyMaterial = new THREE.ShaderMaterial( THREE.CopyShader );\n\tthis.copyMaterial.uniforms = THREE.UniformsUtils.clone( this.copyMaterial.uniforms );\n\tthis.copyMaterial.uniforms['opacity'].value = 1.0;\n\tthis.copyMaterial.blending = THREE.NoBlending;\n\tthis.copyMaterial.premultipliedAlpha = true;\n\tthis.copyMaterial.transparent = true;\n\tthis.copyMaterial.depthTest = false;\n\tthis.copyMaterial.depthWrite = false;\n\n};\n\nTHREE.SAOPass.prototype = {\n\n\tdispose: function() {\n\n\t\tif( this.saoRenderTarget ) {\n\t\t\tthis.saoRenderTarget.dispose();\n\t\t\tthis.saoRenderTarget = null;\n\t\t}\n\t\tif( this.blurIntermediateRenderTarget ) {\n\t\t\tthis.blurIntermediateRenderTarget.dispose();\n\t\t\tthis.blurIntermediateRenderTarget = null;\n\t\t}\n\t\tif( this.depthRenderTarget ) {\n\t\t\tthis.depthRenderTarget.dispose();\n\t\t\tthis.depthRenderTarget = null;\n\t\t}\n\t\tif( this.depth1RenderTarget ) {\n\t\t\tthis.depth1RenderTarget.dispose();\n\t\t\tthis.depth1RenderTarget = null;\n\t\t}\n\t\tif( this.depth2RenderTarget ) {\n\t\t\tthis.depth2RenderTarget.dispose();\n\t\t\tthis.depth2RenderTarget = null;\n\t\t}\n\t\tif( this.depth3RenderTarget ) {\n\t\t\tthis.depth3RenderTarget.dispose();\n\t\t\tthis.depth3RenderTarget = null;\n\t\t}\n\t\tif( this.normalRenderTarget ) {\n\t\t\tthis.normalRenderTarget.dispose();\n\t\t\tthis.normalRenderTarget = null;\n\t\t}\n\t\tif( this.normalRenderTargetFullRes ) {\n\t\t\tthis.normalRenderTargetFullRes.dispose();\n\t\t\tthis.normalRenderTargetFullRes = null;\n\t\t}\n\t\tif( this.depthRenderTargetFullRes ) {\n\t\t\tthis.depthRenderTargetFullRes.dispose();\n\t\t\tthis.depthRenderTargetFullRes = null;\n\t\t}\n\t\tif( this.saoRenderTargetFullRes ) {\n\t\t\tthis.saoRenderTargetFullRes.dispose();\n\t\t\tthis.saoRenderTargetFullRes = null;\n\t\t}\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tif( this.saoRenderTargetFullRes ) this.saoRenderTargetFullRes.setSize( width, height );\n\t\tif( this.depthRenderTargetFullRes ) this.depthRenderTargetFullRes.setSize( width, height );\n\t\tif( this.normalRenderTargetFullRes ) this.normalRenderTargetFullRes.setSize( width, height );\n\t\twidth = Math.ceil( width / this.downSamplingRatio );\n\t\theight = Math.ceil( height / this.downSamplingRatio );\n\t\tif( this.saoRenderTarget ) this.saoRenderTarget.setSize( width, height );\n\t\tif( this.blurIntermediateRenderTarget ) this.blurIntermediateRenderTarget.setSize( width, height );\n\t\tif( this.depthRenderTarget ) this.depthRenderTarget.setSize( width, height );\n\t\tif( this.depth1RenderTarget ) this.depth1RenderTarget.setSize( Math.ceil( width / 2 ), Math.ceil( height / 2 ) );\n\t\tif( this.depth2RenderTarget ) this.depth2RenderTarget.setSize( Math.ceil( width / 4 ), Math.ceil( height / 4 ) );\n\t\tif( this.depth3RenderTarget ) this.depth3RenderTarget.setSize( Math.ceil( width / 8 ), Math.ceil( height / 8 ) );\n\t\tif( this.normalRenderTarget ) this.normalRenderTarget.setSize( width, height );\n\n\t\tthis.saoMaterial.uniforms[ 'size' ].value.set( width, height );\n\t\tthis.bilateralFilterMaterial.uniforms[ 'size' ].value.set( width, height );\n\t\t//console.log( 'downsampledsize: ', width, height );\n\t},\n\n\tupdateParameters: function( camera ) {\n\n\t\tvar vSizeAt1M = 1 / ( Math.tan( THREE.Math.DEG2RAD * camera.fov * 0.5 ) * 2 );\n\t\tvar sizeAt1M = new THREE.Vector2( vSizeAt1M / camera.aspect, vSizeAt1M );\n\n\t\tthis.saoMaterial.uniforms['worldToScreenRatio'].value = sizeAt1M;\n\t\tthis.saoMaterial.uniforms['intensity'].value = this.intensity;\n\t\tthis.saoMaterial.uniforms['occlusionSphereWorldRadius'].value = this.occlusionSphereWorldRadius;\n\n\t\tthis.depthMinifyMaterial.uniforms[ 'cameraNear' ].value = camera.near;\n\t\tthis.depthMinifyMaterial.uniforms[ 'cameraFar' ].value = camera.far;\n\n\t\tthis.saoMaterial.uniforms[ 'cameraNear' ].value = camera.near;\n\t\tthis.saoMaterial.uniforms[ 'cameraFar' ].value = camera.far;\n\t\tthis.saoMaterial.uniforms[ 'cameraProjectionMatrix' ].value = camera.projectionMatrix;\n\t\tthis.saoMaterial.uniforms[ 'cameraInverseProjectionMatrix' ].value.getInverse( camera.projectionMatrix );\n\n\t\tthis.bilateralFilterMaterial.uniforms[ \"cameraNear\" ].value = camera.near;\n\t\tthis.bilateralFilterMaterial.uniforms[ \"cameraFar\" ].value = camera.far;\n\t},\n\n\trender: function( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar width = readBuffer.width, height = readBuffer.height;\n\n\t\twidth = Math.ceil( width / this.downSamplingRatio );\n\t\theight = Math.ceil( height / this.downSamplingRatio );\n\n\t\tvar depthTexture = ( readBuffer.depthBuffer && readBuffer.depthTexture ) ? readBuffer.depthTexture : null;\n\n\t\tif ( ! this.saoRenderTarget ) {\n\n\t\t\tthis.saoRenderTarget = new THREE.WebGLRenderTarget( width, height,\n\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\t\t\tthis.saoRenderTargetFullRes = new THREE.WebGLRenderTarget( readBuffer.width, readBuffer.height,\n\t\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\t\t\tthis.blurIntermediateRenderTarget = new THREE.WebGLRenderTarget( width, height,\n\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\t\t\tthis.depth1RenderTarget = new THREE.WebGLRenderTarget( Math.ceil( width / 2 ), Math.ceil( height / 2 ),\n\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\t\t\tthis.depth2RenderTarget = new THREE.WebGLRenderTarget( Math.ceil( width / 4 ), Math.ceil( height / 4 ),\n\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\t\t\tthis.depth3RenderTarget = new THREE.WebGLRenderTarget( Math.ceil( width / 8 ), Math.ceil( height / 8 ),\n\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\t\t\tthis.normalRenderTarget = new THREE.WebGLRenderTarget( width, height,\n\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\t\t\tthis.normalRenderTargetFullRes = new THREE.WebGLRenderTarget( readBuffer.width, readBuffer.height,\n\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\t\t}\n\n\t\tif( ! depthTexture && ! this.depthRenderTarget ) {\n\n\t\t\tthis.depthRenderTarget = new THREE.WebGLRenderTarget( width, height,\n\t\t\t\t{ minFilter: THREE.NearestFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat } );\n\t\t\tthis.depthRenderTargetFullRes = new THREE.WebGLRenderTarget( readBuffer.width, readBuffer.height,\n\t\t\t\t{ minFilter: THREE.NearestFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat } );\n\n\t\t}\n\n\t\tthis.updateParameters( this.camera );\n\n\t\tvar clearColor = renderer.getClearColor(), clearAlpha = renderer.getClearAlpha(), autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tif( ! this.renderToScreen ) {\n\n\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = readBuffer.texture;\n\t\t\tthis.copyMaterial.blending = THREE.NoBlending;\n\n\t\t\trenderer.renderPass( this.copyMaterial, writeBuffer, true );\n\n\t\t}\n\n\t\tvar depthPackingMode = 0;\n\n\t\tif( ! depthTexture ) {\n\n\t\t\tvar oldClearColor = renderer.getClearColor(), oldClearAlpha = renderer.getClearAlpha();\n\t\t\trenderer.setClearColor( 0xffffff, 1.0 );\n\n\t\t\trenderer.renderOverride( this.depthMaterial, this.scene, this.camera, this.depthRenderTarget, true );\n\n\t\t\trenderer.setClearColor( 0xffffff, 1.0 );\n\n\t\t\tif( this.downSamplingRatio !== 1.0 ) {\n\n\t\t\t\trenderer.renderOverride( this.depthMaterial, this.scene, this.camera, this.depthRenderTargetFullRes, true );\n\n\t\t\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t\t\t}\n\t\t\tdepthTexture = this.depthRenderTarget.texture;\n\t\t\tdepthPackingMode = 1;\n\n\t\t}\n\n\t\tif( this.depthMIPs ) {\n\n\t\t\tthis.depthMinifyMaterial.uniforms['tDepth'].value = depthTexture;\n\t\t\tthis.depthMinifyMaterial.uniforms['size'].value.set( width, height );\n\t\t\trenderer.renderPass( this.depthMinifyMaterial, this.depth1RenderTarget, true );\n\n\t\t\tthis.depthMinifyMaterial.uniforms['tDepth'].value = this.depth1RenderTarget.texture;\n\t\t\tthis.depthMinifyMaterial.uniforms['size'].value.set( Math.ceil( width / 2 ), Math.ceil( height / 2 ) );\n\t\t\trenderer.renderPass( this.depthMinifyMaterial, this.depth2RenderTarget, true );\n\n\t\t\tthis.depthMinifyMaterial.uniforms['tDepth'].value = this.depth2RenderTarget.texture;\n\t\t\tthis.depthMinifyMaterial.uniforms['size'].value.set( Math.ceil( width / 4 ), Math.ceil( height / 4 ) );\n\t\t\trenderer.renderPass( this.depthMinifyMaterial, this.depth3RenderTarget, true );\n\n\t\t}\n\n\t\tif( this.outputOverride === \"depth\" ) {\n\n\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = depthTexture;\n\t\t\tthis.copyMaterial.blending = THREE.NoBlending;\n\n\t\t\trenderer.renderPass( this.copyMaterial, this.renderToScreen ? null : writeBuffer, true );\n\t\t\treturn;\n\n\t\t}\n\t\tif( this.outputOverride === \"depth1\" ) {\n\n\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.depth1RenderTarget.texture;\n\t\t\tthis.copyMaterial.blending = THREE.NoBlending;\n\n\t\t\trenderer.renderPass( this.copyMaterial, this.renderToScreen ? null : writeBuffer, true );\n\t\t\treturn;\n\n\t\t}\n\t\tif( this.outputOverride === \"depth2\" ) {\n\n\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.depth2RenderTarget.texture;\n\t\t\tthis.copyMaterial.blending = THREE.NoBlending;\n\n\t\t\trenderer.renderPass( this.copyMaterial, this.renderToScreen ? null : writeBuffer, true );\n\t\t\treturn;\n\n\t\t}\n\t\tif( this.outputOverride === \"depth3\" ) {\n\n\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.depth3RenderTarget.texture;\n\t\t\tthis.copyMaterial.blending = THREE.NoBlending;\n\n\t\t\trenderer.renderPass( this.copyMaterial, this.renderToScreen ? null : writeBuffer, true );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif( ! this.implicitNormals ) {\n\n\t\t\tvar oldClearColor = renderer.getClearColor(), oldClearAlpha = renderer.getClearAlpha();\n\t\t\trenderer.setClearColor( new THREE.Color( 0.5, 0.5, 1.0 ), 1.0 );\n\n\t\t\trenderer.renderOverride( this.normalMaterial, this.scene, this.camera, this.normalRenderTarget, true );\n\n\t\t\tif( this.downSamplingRatio !== 1.0 ) {\n\n\t\t\t\t\trenderer.setClearColor( new THREE.Color( 0.5, 0.5, 1.0 ), 1.0 );\n\n\t\t\t\t\trenderer.renderOverride( this.normalMaterial, this.scene, this.camera, this.normalRenderTargetFullRes, true );\n\n\t\t\t}\n\n\t\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t\tif( this.outputOverride === \"normal\" ) {\n\n\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.normalRenderTarget.texture;\n\t\t\tthis.copyMaterial.blending = THREE.NoBlending;\n\n\t\t\trenderer.renderPass( this.copyMaterial, this.renderToScreen ? null : this.renderToScreen ? null : writeBuffer, true );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.saoMaterial.defines[ 'DEPTH_PACKING' ] = depthPackingMode;\n\t\tthis.saoMaterial.defines[ 'DEPTH_MIPS' ] = this.depthMIPs ? 1 : 0;\n\t\tthis.saoMaterial.uniforms[ \"tNormal\" ].value = this.normalRenderTarget.texture;\n\t\tthis.saoMaterial.uniforms[ \"tDepth\" ].value = depthTexture;\n\t\tif( this.depthMIPs ) {\n\n\t\t\tthis.saoMaterial.uniforms[ \"tDepth1\" ].value = this.depth1RenderTarget.texture;\n\t\t\tthis.saoMaterial.uniforms[ \"tDepth2\" ].value = this.depth2RenderTarget.texture;\n\t\t\tthis.saoMaterial.uniforms[ \"tDepth3\" ].value = this.depth3RenderTarget.texture;\n\t\t}\n\n\t\tvar oldClearColor = renderer.getClearColor(), oldClearAlpha = renderer.getClearAlpha();\n\t\trenderer.setClearColor( 0xffffff, 1.0 );\n\n\t\trenderer.renderPass( this.saoMaterial, this.saoRenderTarget, true ); // , 0xffffff, 0.0, \"sao\"\n\n\t\tif( this.blurEnabled ) {\n\n\t\t\tthis.bilateralFilterMaterial.defines[ 'KERNEL_SAMPLE_RADIUS' ] = this.blurKernelSize;\n\t\t\tthis.bilateralFilterMaterial.uniforms[ \"tAODepth\" ].value = this.saoRenderTarget.texture;\n\t\t\tthis.bilateralFilterMaterial.uniforms[ \"tAONormal\" ].value = this.normalRenderTarget.texture;\n\t\t\tthis.bilateralFilterMaterial.uniforms[ \"kernelDirection\" ].value = new THREE.Vector2( 1, 0 );\n\t\t\tthis.bilateralFilterMaterial.uniforms[ \"packOutput\" ].value = 1;\n\t\t\tthis.bilateralFilterMaterial.uniforms[ 'edgeSharpness' ].value = this.edgeSharpness;\n\n\t\t\trenderer.renderPass( this.bilateralFilterMaterial, this.blurIntermediateRenderTarget, true ); // , 0xffffff, 0.0, \"sao vBlur\"\n\n\t\t\tthis.bilateralFilterMaterial.uniforms[ \"tAODepth\" ].value = this.blurIntermediateRenderTarget.texture;\n\t\t\tthis.bilateralFilterMaterial.uniforms[ \"kernelDirection\" ].value = new THREE.Vector2( 0, 1 );\n\t\t\tthis.bilateralFilterMaterial.uniforms[ \"packOutput\" ].value = 0;\n\n\t\t\trenderer.renderPass( this.bilateralFilterMaterial, this.saoRenderTarget, true ); // 0xffffff, 0.0, \"sao hBlur\"\n\n\t\t}\n\t\tif(this.downSamplingRatio > 1.0)\n\t\t{\n\t\t\t//Bilateral Up sampler\n\t\t\tthis.bilateralUpsamplerMaterial.uniforms[\"inputTexture\"].value = this.saoRenderTarget.texture;\n\t\t\tthis.bilateralUpsamplerMaterial.uniforms[\"NormalTextureFullRes\"].value = this.normalRenderTargetFullRes.texture;\n\t\t\tthis.bilateralUpsamplerMaterial.uniforms[\"DepthTextureFullRes\"].value = this.depthRenderTargetFullRes.texture;\n\t\t\tthis.bilateralUpsamplerMaterial.uniforms[\"NormalTextureHalfRes\"].value = this.normalRenderTarget.texture;\n\t\t\tthis.bilateralUpsamplerMaterial.uniforms[\"DepthTextureHalfRes\"].value = this.depthRenderTarget.texture;\n\t\t\tthis.bilateralUpsamplerMaterial.uniforms[\"texSize\"].value = new THREE.Vector2(this.saoRenderTarget.width, this.saoRenderTarget.height);\n\t\t\tthis.bilateralUpsamplerMaterial.uniforms[\"cameraNearFar\"].value = new THREE.Vector2(this.camera.near, this.camera.far);\n\t\t\trenderer.renderPass( this.bilateralUpsamplerMaterial, this.saoRenderTargetFullRes, true ); // 0xffffff, 0.0, \"sao hBlur\"\n\n\t\t}\n\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t\tif( this.outputOverride === \"sao\" ) {\n\n\t\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.downSamplingRatio > 1.0 ? this.saoRenderTargetFullRes.texture\n\t\t\t: this.saoRenderTarget.texture;\n\t\t\tthis.copyMaterial.blending = THREE.NoBlending;\n\n\t\t\trenderer.renderPass( this.copyMaterial, this.renderToScreen ? null : writeBuffer, true );\n\t\t\treturn;\n\n\t\t}\n\n\t\trenderer.autoClear = false;\n\n\t\tthis.copyMaterial.uniforms[ 'tDiffuse' ].value = this.downSamplingRatio > 1.0 ? this.saoRenderTargetFullRes.texture\n\t\t: this.saoRenderTarget.texture;\n\t\tthis.copyMaterial.blending = THREE.MultiplyBlending;\n\t\tthis.copyMaterial.premultipliedAlpha = true;\n\n\t\trenderer.renderPass( this.copyMaterial, this.renderToScreen ? null : writeBuffer, false );\n\n\t\trenderer.autoClear = autoClear;\n\t\trenderer.setClearColor( clearColor );\n\t\trenderer.setClearAlpha( clearAlpha );\n\n\t},\n\n\tgetBilateralUpsamplerMaterial: function(kernelRadius) {\n\n\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\t\"inputTexture\": { value: null },\n\t\t\t\t\"NormalTextureFullRes\": { value: null },\n\t\t\t\t\"DepthTextureFullRes\": { value: null },\n\t\t\t\t\"NormalTextureHalfRes\": { value: null },\n\t\t\t\t\"DepthTextureHalfRes\": { value: null },\n\t\t\t\t\"texSize\": \t\t\t\t{ value: new THREE.Vector2( 0.5, 0.5 ) },\n\t\t\t\t\"cameraNearFar\": \t{ value: new THREE.Vector2( 0.5, 0.5 ) },\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"#include <common>\\n\\\n\t\t\t\t#include <packing>\\n\\\n\t\t\t\tvarying vec2 vUv;\\n\\\n\t\t\t\tuniform sampler2D inputTexture;\\n\\\n\t\t\t\tuniform sampler2D NormalTextureFullRes;\\n\\\n\t\t\t\tuniform sampler2D DepthTextureFullRes;\\n\\\n\t\t\t\tuniform sampler2D NormalTextureHalfRes;\\n\\\n\t\t\t\tuniform sampler2D DepthTextureHalfRes;\\n\\\n\t\t\t\tuniform vec2 texSize;\\\n\t\t\t\tuniform vec2 cameraNearFar;\\\n\t\t\t\t\\\n\t\t\t\tvoid main()\\\n\t\t\t\t{\\\n\t\t\t\t\tvec2 uvOffsets[4];\\\n\t\t\t\t\tuvOffsets[0] = vUv + vec2(0.0, 1.0)/texSize;\\\n\t\t\t\t\tuvOffsets[1] = vUv + vec2(1.0, 0.0)/texSize;\\\n\t\t\t\t\tuvOffsets[2] = vUv + vec2(-1.0, 0.0)/texSize;\\\n\t\t\t\t\tuvOffsets[3] = vUv + vec2(0.0, -1.0)/texSize;\\\n\t\t\t\t\t\\\n\t\t\t\t\tfloat depth_weights[4];\\\n\t\t\t\t\tfloat depth_hires = unpackRGBAToDepth(texture2D(DepthTextureFullRes, vUv));\\\n\t\t\t\t\tdepth_hires = -perspectiveDepthToViewZ(depth_hires, cameraNearFar.x, cameraNearFar.y);\\\n\t\t\t\t\tif(depth_hires == 1.0)\\\n\t\t\t\t\t\tdiscard;\\\n\t\t\t\t\tfloat depth_coarse1 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[0]));\\\n\t\t\t\t\tdepth_coarse1 = -perspectiveDepthToViewZ(depth_coarse1, cameraNearFar.x, cameraNearFar.y);\\\n\t\t\t\t\tdepth_weights[0] = 1.0 / (0.001 + abs(depth_hires-depth_coarse1));\\\n\t\t\t\t\tfloat depth_coarse2 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[1]));\\\n\t\t\t\t\tdepth_coarse2 = -perspectiveDepthToViewZ(depth_coarse2, cameraNearFar.x, cameraNearFar.y);\\\n\t\t\t\t\tdepth_weights[1] = 1.0 / (0.001 + abs(depth_hires-depth_coarse2));\\\n\t\t\t\t\tfloat depth_coarse3 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[2]));\\\n\t\t\t\t\tdepth_coarse3 = -perspectiveDepthToViewZ(depth_coarse3, cameraNearFar.x, cameraNearFar.y);\\\n\t\t\t\t\tdepth_weights[2] = 1.0 / (0.001 + abs(depth_hires-depth_coarse3));\\\n\t\t\t\t\tfloat depth_coarse4 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[3]));\\\n\t\t\t\t\tdepth_coarse4 = -perspectiveDepthToViewZ(depth_coarse4, cameraNearFar.x, cameraNearFar.y);\\\n\t\t\t\t\tdepth_weights[3] = 1.0 / (0.001 + abs(depth_hires-depth_coarse4));\\\n\t\t\t\t\t\\\n\t\t\t\t\tfloat norm_weights[4];\\\n\t\t\t\t\tvec3 norm_fullRes = unpackRGBToNormal(texture2D(NormalTextureFullRes, vUv).rgb);\\\n\t\t\t\t\tvec3 norm_coarse1 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[0]).rgb);\\\n\t\t\t\t\tnorm_weights[0] = pow(abs(dot(norm_coarse1, norm_fullRes)), 32.0);\\\n\t\t\t\t\tvec3 norm_coarse2 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[1]).rgb);\\\n\t\t\t\t\tnorm_weights[1] = pow(abs(dot(norm_coarse2, norm_fullRes)), 32.0);\\\n\t\t\t\t\tvec3 norm_coarse3 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[2]).rgb);\\\n\t\t\t\t\tnorm_weights[2] = pow(abs(dot(norm_coarse3, norm_fullRes)), 32.0);\\\n\t\t\t\t\tvec3 norm_coarse4 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[3]).rgb);\\\n\t\t\t\t\tnorm_weights[3] = pow(abs(dot(norm_coarse4, norm_fullRes)), 32.0);\\\n\t\t\t\t\t\\\n\t\t\t\t\tvec3 colorOut = vec3(0.0);\\\n\t\t\t\t\tfloat weight_sum = 0.0;\\\n\t\t\t\t\tfloat weight = norm_weights[0] * depth_weights[0];\\\n\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[0]).rgb*weight;\\\n\t\t\t\t\tweight_sum += weight;\\\n\t\t\t\t  weight = norm_weights[1] * depth_weights[1];\\\n\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[1]).rgb*weight;\\\n\t\t\t\t\tweight_sum += weight;\\\n\t\t\t\t  weight = norm_weights[2] * depth_weights[2];\\\n\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[2]).rgb*weight;\\\n\t\t\t\t\tweight_sum += weight;\\\n\t\t\t\t  weight = norm_weights[3] * depth_weights[3];\\\n\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[3]).rgb*weight;\\\n\t\t\t\t\tweight_sum += weight;\\\n\t\t\t\t\tcolorOut /= weight_sum;\\\n\t\t\t\t\tgl_FragColor = vec4(colorOut, 1.0);\\\n\t\t\t\t}\"\n\t\t} );\n\t}\n\n};\n\n// File:examples/js/postprocessing/ManualMSAARenderPass.js\n\n/**\n*\n* Manual Multi-Sample Anti-Aliasing Render Pass\n*\n* @author bhouston / http://clara.io/\n*\n* This manual approach to MSAA re-renders the scene ones for each sample with camera jitter and accumulates the results.\n*\n* References: https://en.wikipedia.org/wiki/Multisample_anti-aliasing\n*\n*/\n\nTHREE.ManualMSAARenderPass = function ( scene, camera, clearColor, clearAlpha ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.scene = scene;\n\tthis.camera = camera;\n\n\tthis.sampleLevel = 4; // specified as n, where the number of samples is 2^n, so sampleLevel = 4, is 2^4 samples, 16.\n\tthis.unbiased = true;\n\n\t// as we need to clear the buffer in this pass, clearColor must be set to something, defaults to black.\n\tthis.clearColor = ( clearColor !== undefined ) ? clearColor : 0x000000;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n\tif ( THREE.CopyShader === undefined ) console.error( \"THREE.ManualMSAARenderPass relies on THREE.CopyShader\" );\n\n\tthis.copyMaterial = new THREE.ShaderMaterial( THREE.CopyShader );\n\tthis.copyMaterial.uniforms = THREE.UniformsUtils.clone( this.copyMaterial.uniforms );\n\tthis.copyMaterial.blending = THREE.AdditiveBlending;\n\tthis.copyMaterial.premultipliedAlpha = true;\n\tthis.copyMaterial.transparent = true;\n\tthis.copyMaterial.depthTest = false;\n\tthis.copyMaterial.depthWrite = false;\n\n};\n\nTHREE.ManualMSAARenderPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tdispose: function() {\n\n\t\tif ( this.sampleRenderTarget ) {\n\t\t\tthis.sampleRenderTarget.dispose();\n\t\t\tthis.sampleRenderTarget = null;\n\t\t}\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.sampleRenderTarget ) this.sampleRenderTarget.setSize( width, height );\n\n\t},\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tif ( ! this.sampleRenderTarget ) {\n\n\t\t\tthis.sampleRenderTarget = new THREE.WebGLRenderTarget( readBuffer.width, readBuffer.height,\n\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat } );\n\n\t\t}\n\n\t\tvar jitterOffsets = THREE.ManualMSAARenderPass.JitterVectors[ Math.max( 0, Math.min( this.sampleLevel, 5 ) ) ];\n\n\t\tvar autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tvar oldClearColor = renderer.getClearColor().getHex();\n\t\tvar oldClearAlpha = renderer.getClearAlpha();\n\n\t\tvar baseSampleWeight = 1.0 / jitterOffsets.length;\n\t\tvar roundingRange = 1 / 32;\n\n\t\tthis.copyMaterial.blending = THREE.NormalBlending;\n\t\tthis.copyMaterial.uniforms[ \"tDiffuse\" ].value = this.sampleRenderTarget.texture;\n\n\t\tvar width = readBuffer.width, height = readBuffer.height;\n\n\t\t// render the scene multiple times, each slightly jitter offset from the last and accumulate the results.\n\t\tfor ( var i = 0; i < jitterOffsets.length; i ++ ) {\n\n\t\t\tvar jitterOffset = jitterOffsets[i];\n\t\t\tif ( this.camera.setViewOffset ) {\n\t\t\t\tthis.camera.setViewOffset( width, height,\n\t\t\t\t\tjitterOffset[ 0 ] * 0.0625, jitterOffset[ 1 ] * 0.0625,   // 0.0625 = 1 / 16\n\t\t\t\t\twidth, height );\n\t\t\t}\n\n\t\t\tvar sampleWeight = baseSampleWeight;\n\t\t\tif( this.unbiased ) {\n\t\t\t\t// the theory is that equal weights for each sample lead to an accumulation of rounding errors.\n\t\t\t\t// The following equation varies the sampleWeight per sample so that it is uniformly distributed\n\t\t\t\t// across a range of values whose rounding errors cancel each other out.\n\t\t\t\tvar uniformCenteredDistribution = ( -0.5 + ( i + 0.5 ) / jitterOffsets.length );\n\t\t\t\tsampleWeight += roundingRange * uniformCenteredDistribution;\n\t\t\t}\n\n\t\t\tthis.copyMaterial.uniforms[ \"opacity\" ].value = sampleWeight;\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\t\t\trenderer.render( this.scene, this.camera, this.sampleRenderTarget, true );\n\t\t\tif (i === 0) {\n\t\t\t\trenderer.setClearColor( 0x000000, 0.0 );\n\t\t\t}\n\n\t\t\tif(i===0){\n\t\t\t\trenderer.renderOverride( this.overrideMaterial, this.scene, this.camera, this.sampleRenderTarget ? null : readBuffer, false );\n\t\t\t} else {\n\t\t\t\trenderer.renderPass( this.copyMaterial, this.renderToScreen ? null : writeBuffer, false );\n\t\t\t}\n\t\t}\n\n\t\tif ( this.camera.clearViewOffset ) this.camera.clearViewOffset();\n\n\t\trenderer.autoClear = autoClear;\n\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\t}\n\n} );\n\n\n// These jitter vectors are specified in integers because it is easier.\n// I am assuming a [-8,8) integer grid, but it needs to be mapped onto [-0.5,0.5)\n// before being used, thus these integers need to be scaled by 1/16.\n//\n// Sample patterns reference: https://msdn.microsoft.com/en-us/library/windows/desktop/ff476218%28v=vs.85%29.aspx?f=255&MSPPError=-2147217396\nTHREE.ManualMSAARenderPass.JitterVectors = [\n\t[\n\t\t[ 0, 0 ]\n\t],\n\t[\n\t\t[ 4, 4 ], [ - 4, - 4 ]\n\t],\n\t[\n\t\t[ - 2, - 6 ], [ 6, - 2 ], [ - 6, 2 ], [ 2, 6 ]\n\t],\n\t[\n\t\t[ 1, - 3 ], [ - 1, 3 ], [ 5, 1 ], [ - 3, - 5 ],\n\t\t[ - 5, 5 ], [ - 7, - 1 ], [ 3, 7 ], [ 7, - 7 ]\n\t],\n\t[\n\t\t[ 1, 1 ], [ - 1, - 3 ], [ - 3, 2 ], [ 4, - 1 ],\n\t\t[ - 5, - 2 ], [ 2, 5 ], [ 5, 3 ], [ 3, - 5 ],\n\t\t[ - 2, 6 ], [ 0, - 7 ], [ - 4, - 6 ], [ - 6, 4 ],\n\t\t[ - 8, 0 ], [ 7, - 4 ], [ 6, 7 ], [ - 7, - 8 ]\n\t],\n\t[\n\t\t[ - 4, - 7 ], [ - 7, - 5 ], [ - 3, - 5 ], [ - 5, - 4 ],\n\t\t[ - 1, - 4 ], [ - 2, - 2 ], [ - 6, - 1 ], [ - 4, 0 ],\n\t\t[ - 7, 1 ], [ - 1, 2 ], [ - 6, 3 ], [ - 3, 3 ],\n\t\t[ - 7, 6 ], [ - 3, 6 ], [ - 5, 7 ], [ - 1, 7 ],\n\t\t[ 5, - 7 ], [ 1, - 6 ], [ 6, - 5 ], [ 4, - 4 ],\n\t\t[ 2, - 3 ], [ 7, - 2 ], [ 1, - 1 ], [ 4, - 1 ],\n\t\t[ 2, 1 ], [ 6, 2 ], [ 0, 4 ], [ 4, 4 ],\n\t\t[ 2, 5 ], [ 7, 5 ], [ 5, 6 ], [ 3, 7 ]\n\t]\n];\n\n// File:examples/js/postprocessing/ClearPass.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.ClearPass = function ( clearColor, clearAlpha ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.needsSwap = false;\n\n\tthis.clearColor = ( clearColor !== undefined ) ? clearColor : 0x000000;\n\tthis.clearAlpha = ( clearAlpha !== undefined ) ? clearAlpha : 0;\n\n};\n\nTHREE.ClearPass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.ClearPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar oldClearColor, oldClearAlpha;\n\n\t\tif ( this.clearColor ) {\n\n\t\t\toldClearColor = renderer.getClearColor().getHex();\n\t\t\toldClearAlpha = renderer.getClearAlpha();\n\n\t\t\trenderer.setClearColor( this.clearColor, this.clearAlpha );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( this.renderToScreen ? null : readBuffer );\n\t\trenderer.clear();\n\n\t\tif ( this.clearColor ) {\n\n\t\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\t\t}\n\n\t}\n\n} );\n\n// File:examples/js/postprocessing/TexturePass.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.TexturePass = function ( map, opacity ) {\n\n\tTHREE.Pass.call( this );\n\n\tif ( THREE.CopyShader === undefined )\n\t\tconsole.error( \"THREE.TexturePass relies on THREE.CopyShader\" );\n\n\tvar shader = THREE.CopyShader;\n\n\tthis.map = map;\n\tthis.opacity = ( opacity !== undefined ) ? opacity : 1.0;\n\n\tthis.uniforms = THREE.UniformsUtils.clone( shader.uniforms );\n\n\tthis.material = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tthis.needsSwap = false;\n\n\tthis.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tthis.scene  = new THREE.Scene();\n\n\tthis.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );\n\tthis.scene.add( this.quad );\n\n};\n\nTHREE.TexturePass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.TexturePass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tthis.quad.material = this.material;\n\n\t\tthis.uniforms[ \"opacity\" ].value = this.opacity;\n\t\tthis.uniforms[ \"tDiffuse\" ].value = this.map;\n\t\tthis.material.transparent = ( this.opacity < 1.0 );\n\n\t\trenderer.render( this.scene, this.camera, this.renderToScreen ? null : readBuffer, this.clear );\n\n\t\trenderer.autoClear = oldAutoClear;\n\t}\n\n} );\n\n// File:examples/js/postprocessing/CubeTexturePass.js\n\n/**\n * @author bhouston / http://clara.io/\n */\n\nTHREE.CubeTexturePass = function ( camera, envMap, opacity ) {\n\n\tTHREE.Pass.call( this );\n\n\tthis.camera = camera;\n\n\tthis.needsSwap = false;\n\n\tthis.cubeMaterial = new THREE.MeshCubeMaterial();\n\n\tthis.cubeMesh = new THREE.Mesh(\n\t\tnew THREE.BoxBufferGeometry( 10, 10, 10 ),\n\t\tthis.cubeMaterial\n\t);\n\n\tthis.envMap = envMap;\n\tthis.envMapIntensity = 1.0;\n\tthis.opacity = ( opacity !== undefined ) ? opacity : 1.0;\n\tthis.roughness = 0.0;\n\n\n\tthis.cubeScene = new THREE.Scene();\n\tthis.cubeCamera = new THREE.PerspectiveCamera();\n\tthis.cubeScene.add( this.cubeMesh );\n\n};\n\nTHREE.CubeTexturePass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.CubeTexturePass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tthis.cubeCamera.projectionMatrix.copy( this.camera.projectionMatrix );\n\t\tthis.cubeCamera.quaternion.setFromRotationMatrix( this.camera.matrixWorld );\n\n\t\tif( this.cubeMaterial.envMap != this.envMap ) {\n\t\t\tthis.cubeMaterial.envMap = this.envMap;\n\t\t\tthis.cubeMaterial.needsUpdate = true;\n\t\t}\n\t\tthis.cubeMaterial.envMapIntensity = this.envMapIntensity;\n\t\tthis.cubeMaterial.roughness = this.roughness;\n\t\tthis.cubeMaterial.opacity = this.opacity;\n\t\tthis.cubeMaterial.transparent = ( this.opacity < 1.0 );\n\n\t\trenderer.render( this.cubeScene, this.cubeCamera, this.renderToScreen ? null : readBuffer, this.clear );\n\n\t\trenderer.autoClear = oldAutoClear;\n\n\t}\n\n} );\n\n// File:examples/js/GlossyMirror.js\n\n/**\n * @author spidersharma03\n * @author bhouston / Ben Houston / ben@clara.io\n */\n\nTHREE.MirrorHelper = function(mirror) {\n  this.scene = new THREE.Scene();\n  this.cameraOrtho = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);\n  this.quad = new THREE.Mesh(new THREE.PlaneGeometry(2, 2), null);\n  this.scene.add(this.quad);\n  this.mirror = mirror;\n  this.numMipMaps = 4;\n\n\n  this.mirrorTextureMipMaps = [];\n  this.tempRenderTargets = [];\n  var parameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, stencilBuffer: false };\n  var mirrorTexture = mirror.mirrorRenderTarget;\n  var width = mirrorTexture.width/2, height = mirrorTexture.height/2;\n  for( var i=0; i<this.numMipMaps; i++) {\n    var renderTarget = new THREE.WebGLRenderTarget( width, height, parameters );\n    renderTarget.texture.generateMipmaps = false;\n    this.mirrorTextureMipMaps.push(renderTarget);\n    width /= 2; height /= 2;\n  }\n\n  width = mirrorTexture.width/2; height = mirrorTexture.height/2;\n  for( var i=0; i<this.numMipMaps; i++) {\n    var renderTarget = new THREE.WebGLRenderTarget( width, height, parameters );\n    renderTarget.texture.generateMipmaps = false;\n    this.tempRenderTargets.push(renderTarget);\n    width /= 2; height /= 2;\n  }\n\n  this.vBlurMaterial = new THREE.ShaderMaterial( THREE.BlurShader );\n  this.vBlurMaterial.side = THREE.DoubleSide;\n  this.vBlurMaterial.uniforms[ 'size' ].value.set( mirrorTexture.width/2, mirrorTexture.height/2 );\n  this.vBlurMaterial.blending = THREE.NoBlending;\n  THREE.BlurShaderUtils.configure( this.vBlurMaterial, 5, 3.0, new THREE.Vector2( 0, 1 ) );\n\n  this.hBlurMaterial = this.vBlurMaterial.clone();\n  this.hBlurMaterial.side = THREE.DoubleSide;\n  this.hBlurMaterial.uniforms[ 'size' ].value.set( mirrorTexture.width/2, mirrorTexture.height/2 );\n  this.hBlurMaterial.blending = THREE.NoBlending;\n  THREE.BlurShaderUtils.configure( this.hBlurMaterial, 5, 3.0, new THREE.Vector2( 1, 0 ) );\n}\n\n\nTHREE.MirrorHelper.prototype = {\n\n  constructor: THREE.MirrorHelper,\n\n  update: function(renderer) {\n\n    var textureIn = this.mirror.mirrorRenderTarget;\n    for( var i=0; i<this.numMipMaps; i++) {\n      var renderTarget = this.mirrorTextureMipMaps[i];\n      var tempRenderTarget = this.tempRenderTargets[i];\n\n      this.hBlurMaterial.uniforms[ 'size' ].value.set( textureIn.width, textureIn.height );\n      this.hBlurMaterial.uniforms[ \"tDiffuse\" ].value = textureIn.texture;\n      this.quad.material = this.hBlurMaterial;\n      renderer.render(this.scene, this.cameraOrtho, tempRenderTarget, true);\n\n      this.vBlurMaterial.uniforms[ 'size' ].value.set( tempRenderTarget.width, tempRenderTarget.height );\n      this.vBlurMaterial.uniforms[ \"tDiffuse\" ].value = tempRenderTarget.texture;\n      this.quad.material = this.vBlurMaterial;\n      renderer.render(this.scene, this.cameraOrtho, renderTarget, true);\n\n      textureIn = renderTarget;\n    }\n  }\n}\n\n\n\nTHREE.GlossyMirror = function ( options ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.name = 'mirror_' + this.id;\n\n\toptions = options || {};\n\n\tthis.matrixNeedsUpdate = true;\n\n\tvar width = options.textureWidth !== undefined ? options.textureWidth : 512;\n\tvar height = options.textureHeight !== undefined ? options.textureHeight : 512;\n\n\tthis.localMirrorNormal = options.localMirrorNormal !== undefined ? options.localMirrorNormal : new THREE.Vector3( 0, 0, 1 );\n\n\tthis.distanceFade = 0.1;\n\tthis.metalness = 0.0;\n\tthis.specularColor = new THREE.Color( 0xffffff );\n\tthis.roughness = 0.0;\n\tthis.fresnelStrength = 1.0;\n\n\tthis.mirrorPlane = new THREE.Plane();\n\tthis.mirrorWorldPosition = new THREE.Vector3();\n\tthis.cameraWorldPosition = new THREE.Vector3();\n\tthis.rotationMatrix = new THREE.Matrix4();\n\tthis.lookAtPosition = new THREE.Vector3( 0, 0, - 1 );\n\n\t// For debug only, show the normal and plane of the mirror\n\tvar debugMode = options.debugMode !== undefined ? options.debugMode : false;\n\n\tif ( debugMode ) {\n\n\t\tvar arrow = new THREE.ArrowHelper( new THREE.Vector3( 0, 0, 1 ), new THREE.Vector3( 0, 0, 0 ), 10, 0xffff80 );\n\t\tvar planeGeometry = new THREE.Geometry();\n\t\tplaneGeometry.vertices.push( new THREE.Vector3( - 10, - 10, 0 ) );\n\t\tplaneGeometry.vertices.push( new THREE.Vector3( 10, - 10, 0 ) );\n\t\tplaneGeometry.vertices.push( new THREE.Vector3( 10, 10, 0 ) );\n\t\tplaneGeometry.vertices.push( new THREE.Vector3( - 10, 10, 0 ) );\n\t\tplaneGeometry.vertices.push( planeGeometry.vertices[ 0 ] );\n\t\tvar plane = new THREE.Line( planeGeometry, new THREE.LineBasicMaterial( { color: 0xffff80 } ) );\n\n\t\tthis.add( arrow );\n\t\tthis.add( plane );\n\n\t}\n\n\tthis.reflectionTextureMatrix = new THREE.Matrix4();\n\n\tthis.mirrorNormal = new THREE.Vector3();\n\tvar parameters = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat, stencilBuffer: false };\n\n\tthis.mirrorRenderTarget = new THREE.WebGLRenderTarget( width, height, parameters );\n\n\tthis.material = new THREE.ShaderMaterial( THREE.GlossyMirrorShader );\n\tthis.material.defines = THREE.UniformsUtils.cloneDefines( this.material.defines );\n\tthis.material.uniforms = THREE.UniformsUtils.clone( this.material.uniforms );\n\tthis.material.uniforms.tReflection.value = this.mirrorRenderTarget;\n\tthis.material.uniforms.reflectionTextureMatrix.value = this.reflectionTextureMatrix;\n\n\tif ( ! THREE.Math.isPowerOfTwo( width ) || ! THREE.Math.isPowerOfTwo( height ) ) {\n\n\t\tthis.mirrorRenderTarget.texture.generateMipmaps = false;\n\n\t}\n\n\tthis.clipPlane = new THREE.Plane( this.localMirrorNormal, 0 );\n\tthis.originalClipPlane = this.clipPlane.clone();\n\tthis.falseClipPlane = this.clipPlane.clone();\n\tthis.falseClipPlane.constant = 10000;\n\n\tthis.depthMaterial = new THREE.MeshDepthMaterial();\n \tthis.depthMaterial.depthPacking = THREE.RGBADepthPacking;\n \tthis.depthMaterial.blending = THREE.NoBlending;\n\tthis.depthMaterial.side = THREE.DoubleSide;\n\n\tthis.depthRenderTarget = new THREE.WebGLRenderTarget( width, height,\n \t\t\t\t\t{ minFilter: THREE.LinearFilter, magFilter: THREE.NearesFilter, format: THREE.RGBAFormat } );\n\tthis.material.uniforms.tReflectionDepth.value = this.depthRenderTarget.texture;\n\n\n  \tthis.material.uniforms[ 'screenSize' ].value = new THREE.Vector2(width, height);\n\n\tthis.mirrorHelper = new THREE.MirrorHelper(this);\n\n\tthis.material.uniforms.tReflection.value = this.mirrorRenderTarget;\n\tthis.material.uniforms.tReflection1.value = this.mirrorHelper.mirrorTextureMipMaps[0].texture;\n\tthis.material.uniforms.tReflection2.value = this.mirrorHelper.mirrorTextureMipMaps[1].texture;\n\tthis.material.uniforms.tReflection3.value = this.mirrorHelper.mirrorTextureMipMaps[2].texture;\n\tthis.material.uniforms.tReflection4.value = this.mirrorHelper.mirrorTextureMipMaps[3].texture;\n\n};\n\nTHREE.GlossyMirror.prototype = Object.assign( Object.create( THREE.Object3D.prototype ), {\n\n\tconstructor: THREE.GlossyMirror,\n\n\tupdateReflectionTextureMatrix: function ( camera ) {\n\n\t\tthis.updateMatrixWorld();\n\t\tcamera.updateMatrixWorld();\n\n\t\tthis.mirrorWorldPosition.setFromMatrixPosition( this.matrixWorld );\n\t\tthis.cameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\tthis.rotationMatrix.extractRotation( this.matrixWorld );\n\n\t\tthis.mirrorNormal.copy( this.localMirrorNormal );\n\t\tthis.mirrorNormal.applyMatrix4( this.rotationMatrix );\n\n\t\tvar view = this.mirrorWorldPosition.clone().sub( this.cameraWorldPosition );\n\t\tview.reflect( this.mirrorNormal ).negate();\n\t\tview.add( this.mirrorWorldPosition );\n\n\t\tthis.rotationMatrix.extractRotation( camera.matrixWorld );\n\n\t\tthis.lookAtPosition.set( 0, 0, - 1 );\n\t\tthis.lookAtPosition.applyMatrix4( this.rotationMatrix );\n\t\tthis.lookAtPosition.add( this.cameraWorldPosition );\n\n\t\tvar target = this.mirrorWorldPosition.clone().sub( this.lookAtPosition );\n\t\ttarget.reflect( this.mirrorNormal ).negate();\n\t\ttarget.add( this.mirrorWorldPosition );\n\n\t\tthis.up.set( 0, - 1, 0 );\n\t\tthis.up.applyMatrix4( this.rotationMatrix );\n\t\tthis.up.reflect( this.mirrorNormal ).negate();\n\n\t\tthis.mirrorCamera.position.copy( view );\n\t\tthis.mirrorCamera.up = this.up;\n\t\tthis.mirrorCamera.lookAt( target );\n\n\t\tthis.mirrorCamera.updateProjectionMatrix();\n\t\tthis.mirrorCamera.updateMatrixWorld();\n\t\tthis.mirrorCamera.matrixWorldInverse.getInverse( this.mirrorCamera.matrixWorld );\n\n\t\t// Update the texture matrix\n\t\tthis.reflectionTextureMatrix.set( 0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t\t\t\t0.0, 0.0, 0.0, 1.0 );\n\t\tthis.reflectionTextureMatrix.multiply( this.mirrorCamera.projectionMatrix );\n\t\tthis.reflectionTextureMatrix.multiply( this.mirrorCamera.matrixWorldInverse );\n\n\t\tthis.mirrorPlane.setFromNormalAndCoplanarPoint( this.mirrorNormal, this.mirrorWorldPosition );\n\t\tthis.mirrorPlane.applyMatrix4( this.mirrorCamera.matrixWorldInverse );\n\n\n\t\tthis.material.uniforms[ 'mirrorCameraProjectionMatrix' ].value.copy( this.mirrorCamera.projectionMatrix );\n\t\tthis.material.uniforms[ 'mirrorCameraInverseProjectionMatrix' ].value.getInverse( this.mirrorCamera.projectionMatrix );\n\n\t\tthis.material.uniforms[ 'mirrorCameraWorldMatrix' ].value.copy( camera.matrixWorld );\n\t\tthis.material.uniforms[ 'mirrorCameraNear' ].value = this.mirrorCamera.near;\n\t\tthis.material.uniforms[ 'mirrorCameraFar' ].value = this.mirrorCamera.far;\n\n\t\tthis.material.uniforms[ 'mirrorNormal' ].value = this.mirrorNormal;\n\t\tthis.material.uniforms[ 'mirrorWorldPosition' ].value = this.mirrorWorldPosition;\n\t\tthis.material.transparent = true;\n\t},\n\n\trender: function ( renderer, scene, camera ) {\n\n\t\tif ( ! camera instanceof THREE.PerspectiveCamera ) console.error( \"THREE.GlossyMirror: camera is not a Perspective Camera!\" );\n\n\t\tif( ! this.mirrorCamera ) {\n\t\t\tthis.mirrorCamera = camera.clone();\n\t\t\tthis.mirrorCamera.matrixAutoUpdate = true;\n\n\t\t}\n\n\n\t\tif ( this.matrixNeedsUpdate ) this.updateReflectionTextureMatrix( camera );\n\n\t\tthis.matrixNeedsUpdate = true;\n\n\t\t// Render the mirrored view of the current scene into the target texture\n\n\n\t\tif(this.clipPlane !== undefined) {\n\n\t\t\tthis.clipPlane.copy(this.originalClipPlane);\n\n\t\t\tthis.clipPlane.applyMatrix4(this.matrixWorld);\n\t\t\tthis.clippingPlanes = [this.clipPlane];\n\t\t}\n\n\t\trenderer.clippingPlanes = this.clippingPlanes;\n\n\t\tif ( scene !== undefined && scene instanceof THREE.Scene ) {\n\n\t\t\t// We can't render ourself to ourself\n\t\t\tvar visible = this.material.visible;\n\t\t\tthis.material.visible = false;\n\n\t\t\trenderer.render( scene, this.mirrorCamera, this.mirrorRenderTarget, true );\n\n\t\t\tthis.material.visible = visible;\n\n\t\t}\n\t\tscene.overrideMaterial = this.depthMaterial;\n\n\t\tvar visible = this.material.visible;\n\n\t\tvar oldClearColor = renderer.getClearColor(), oldClearAlpha = renderer.getClearAlpha();\n\n\t\trenderer.setClearColor(0xffffff, 1);\n\t\tthis.material.visible = false;\n\n\t\trenderer.render( scene, this.mirrorCamera, this.depthRenderTarget, true );\n\n\t\tscene.overrideMaterial = null;\n\t\trenderer.setClearColor( oldClearColor, oldClearAlpha );\n\n\n\t\tthis.material.visible = visible;\n\t\tthis.material.uniforms.distanceFade.value = this.distanceFade;\n\t\tthis.material.uniforms.metalness.value = this.metalness;\n\t\tthis.material.uniforms.fresnelStrength.value = this.fresnelStrength;\n\t\tthis.material.uniforms.specularColor.value.copy( this.specularColor );\n\t\tthis.material.uniforms.roughness.value = this.roughness;\n\n\t\tif(this.clipPlane !== undefined) {\n\n\t\t\tthis.clipPlane.copy(this.falseClipPlane);\n\n\t\t}\n\t\tif(this.mirrorHelper !== undefined) {\n\n\t\t\tthis.mirrorHelper.update(renderer);\n\n\t\t}\n\t}\n\n} );\n// File:src/extras/CurveUtils.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nTHREE.CurveUtils = {\n\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\n\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\n\n\t},\n\n\t// Puay Bing, thanks for helping with this derivative!\n\n\ttangentCubicBezier: function ( t, p0, p1, p2, p3 ) {\n\n\t\treturn - 3 * p0 * ( 1 - t ) * ( 1 - t )  +\n\t\t\t3 * p1 * ( 1 - t ) * ( 1 - t ) - 6 * t * p1 * ( 1 - t ) +\n\t\t\t6 * t *  p2 * ( 1 - t ) - 3 * t * t * p2 +\n\t\t\t3 * t * t * p3;\n\n\t},\n\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\n\n\t\t// To check if my formulas are correct\n\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3 − 3t^2 + 1\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3 − 2t^2 + t\n\t\tvar h01 = - 6 * t * t + 6 * t; \t// − 2t3 + 3t2\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3 − t2\n\n\t\treturn h00 + h10 + h01 + h11;\n\n\t},\n\n\t// Catmull-Rom\n\n\tinterpolate: function( p0, p1, p2, p3, t ) {\n\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\n\t\tvar t2 = t * t;\n\t\tvar t3 = t * t2;\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t}\n\n};\n\n// File:src/extras/SceneUtils.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.SceneUtils = {\n\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\n\n\t\tvar group = new THREE.Group();\n\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\n\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\n\n\t\t}\n\n\t\treturn group;\n\n\t},\n\n\tdetach: function ( child, parent, scene ) {\n\n\t\tchild.applyMatrix( parent.matrixWorld );\n\t\tparent.remove( child );\n\t\tscene.add( child );\n\n\t},\n\n\tattach: function ( child, scene, parent ) {\n\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\n\t\tchild.applyMatrix( matrixWorldInverse );\n\n\t\tscene.remove( child );\n\t\tparent.add( child );\n\n\t}\n\n};\n\n// File:src/extras/ShapeUtils.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nTHREE.ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\ttriangulate: ( function () {\n\n\t\t/**\n\t\t * This code is a quick port of code written in C++ which was submitted to\n\t\t * flipcode.com by John W. Ratcliff  // July 22, 2000\n\t\t * See original code and more information here:\n\t\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\n\t\t *\n\t\t * ported to actionscript by Zevan Rosser\n\t\t * www.actionsnippet.com\n\t\t *\n\t\t * ported to javascript by Joshua Koo\n\t\t * http://www.lab4games.net/zz85/blog\n\t\t *\n\t\t */\n\n\t\tfunction snip( contour, u, v, w, n, verts ) {\n\n\t\t\tvar p;\n\t\t\tvar ax, ay, bx, by;\n\t\t\tvar cx, cy, px, py;\n\n\t\t\tax = contour[ verts[ u ] ].x;\n\t\t\tay = contour[ verts[ u ] ].y;\n\n\t\t\tbx = contour[ verts[ v ] ].x;\n\t\t\tby = contour[ verts[ v ] ].y;\n\n\t\t\tcx = contour[ verts[ w ] ].x;\n\t\t\tcy = contour[ verts[ w ] ].y;\n\n\t\t\tif ( Number.EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\n\n\t\t\tvar aX, aY, bX, bY, cX, cY;\n\t\t\tvar apx, apy, bpx, bpy, cpx, cpy;\n\t\t\tvar cCROSSap, bCROSScp, aCROSSbp;\n\n\t\t\taX = cx - bx;  aY = cy - by;\n\t\t\tbX = ax - cx;  bY = ay - cy;\n\t\t\tcX = bx - ax;  cY = by - ay;\n\n\t\t\tfor ( p = 0; p < n; p ++ ) {\n\n\t\t\t\tpx = contour[ verts[ p ] ].x;\n\t\t\t\tpy = contour[ verts[ p ] ].y;\n\n\t\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\n\t\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\n\t\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\n\n\t\t\t\tapx = px - ax;  apy = py - ay;\n\t\t\t\tbpx = px - bx;  bpy = py - by;\n\t\t\t\tcpx = px - cx;  cpy = py - cy;\n\n\t\t\t\t// see if p is inside triangle abc\n\n\t\t\t\taCROSSbp = aX * bpy - aY * bpx;\n\t\t\t\tcCROSSap = cX * apy - cY * apx;\n\t\t\t\tbCROSScp = bX * cpy - bY * cpx;\n\n\t\t\t\tif ( ( aCROSSbp >= - Number.EPSILON ) && ( bCROSScp >= - Number.EPSILON ) && ( cCROSSap >= - Number.EPSILON ) ) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// takes in an contour array and returns\n\n\t\treturn function triangulate( contour, indices ) {\n\n\t\t\tvar n = contour.length;\n\n\t\t\tif ( n < 3 ) return null;\n\n\t\t\tvar result = [],\n\t\t\t\tverts = [],\n\t\t\t\tvertIndices = [];\n\n\t\t\t/* we want a counter-clockwise polygon in verts */\n\n\t\t\tvar u, v, w;\n\n\t\t\tif ( THREE.ShapeUtils.area( contour ) > 0.0 ) {\n\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\n\n\t\t\t} else {\n\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\n\n\t\t\t}\n\n\t\t\tvar nv = n;\n\n\t\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\n\n\t\t\tvar count = 2 * nv;   /* error detection */\n\n\t\t\tfor ( v = nv - 1; nv > 2; ) {\n\n\t\t\t\t/* if we loop, it is probably a non-simple polygon */\n\n\t\t\t\tif ( ( count -- ) <= 0 ) {\n\n\t\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\n\n\t\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\n\t\t\t\t\t//return null;\n\t\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\n\t\t\t\t\tconsole.warn( 'THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()' );\n\n\t\t\t\t\tif ( indices ) return vertIndices;\n\t\t\t\t\treturn result;\n\n\t\t\t\t}\n\n\t\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\n\n\t\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\n\t\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\n\t\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\n\n\t\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\n\n\t\t\t\t\tvar a, b, c, s, t;\n\n\t\t\t\t\t/* true names of the vertices */\n\n\t\t\t\t\ta = verts[ u ];\n\t\t\t\t\tb = verts[ v ];\n\t\t\t\t\tc = verts[ w ];\n\n\t\t\t\t\t/* output Triangle */\n\n\t\t\t\t\tresult.push( [ contour[ a ],\n\t\t\t\t\t\tcontour[ b ],\n\t\t\t\t\t\tcontour[ c ] ] );\n\n\n\t\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\n\n\t\t\t\t\t/* remove v from the remaining polygon */\n\n\t\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\n\n\t\t\t\t\t\tverts[ s ] = verts[ t ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnv --;\n\n\t\t\t\t\t/* reset error detection counter */\n\n\t\t\t\t\tcount = 2 * nv;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( indices ) return vertIndices;\n\t\t\treturn result;\n\n\t\t}\n\n\t} )(),\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\n\n\t\t\t// inOtherPt needs to be collinear to the inSegment\n\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\n\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\n\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\n\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\n\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\n\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\n\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\n\n\t\t\tif ( Math.abs( limit ) > Number.EPSILON ) {\n\n\t\t\t\t// not parallel\n\n\t\t\t\tvar perpSeg2;\n\t\t\t\tif ( limit > 0 ) {\n\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\n\n\t\t\t\t}\n\n\t\t\t\t// i.e. to reduce rounding errors\n\t\t\t\t// intersection at endpoint of segment#1?\n\t\t\t\tif ( perpSeg2 === 0 ) {\n\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\n\t\t\t\t\treturn [ inSeg1Pt1 ];\n\n\t\t\t\t}\n\t\t\t\tif ( perpSeg2 === limit ) {\n\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\n\t\t\t\t\treturn [ inSeg1Pt2 ];\n\n\t\t\t\t}\n\t\t\t\t// intersection at endpoint of segment#2?\n\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\n\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\n\n\t\t\t\t// return real intersection point\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\n\n\t\t\t} else {\n\n\t\t\t\t// parallel or collinear\n\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\n\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\n\n\t\t\t\t// they are collinear or degenerate\n\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\n\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\n\t\t\t\t// both segments are points\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\n\n\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\n\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\n\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\n\n\t\t\t\t}\n\t\t\t\t// segment#1  is a single point\n\t\t\t\tif ( seg1Pt ) {\n\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\n\t\t\t\t\treturn [ inSeg1Pt1 ];\n\n\t\t\t\t}\n\t\t\t\t// segment#2  is a single point\n\t\t\t\tif ( seg2Pt ) {\n\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\n\t\t\t\t\treturn [ inSeg2Pt1 ];\n\n\t\t\t\t}\n\n\t\t\t\t// they are collinear segments, which might overlap\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\n\t\t\t\tif ( seg1dx !== 0 ) {\n\n\t\t\t\t\t// the segments are NOT on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\n\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\n\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// the segments are on a vertical line\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\n\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\n\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\n\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\n\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\n\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg2min ];\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\n\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\n\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\n\t\t\t\t\t\treturn [ seg1min ];\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\n\n\t\t\t// The order of legs is important\n\n\t\t\t// translation of all points, so that Vertex is at (0,0)\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\n\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\n\n\t\t\tif ( Math.abs( from2toAngle ) > Number.EPSILON ) {\n\n\t\t\t\t// angle != 180 deg.\n\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\n\n\t\t\t\tif ( from2toAngle > 0 ) {\n\n\t\t\t\t\t// main angle < 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// main angle > 180 deg.\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// angle == 180 deg.\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\n\t\t\t\treturn\t( from2otherAngle > 0 );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tfunction removeHoles( contour, holes ) {\n\n\t\t\tvar shape = contour.concat(); // work on this shape\n\t\t\tvar hole;\n\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\n\n\t\t\t\t// Check if hole point lies within angle around shape point\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\n\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\n\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\n\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\n\t\t\t\tif ( ! insideAngle ) {\n\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\n\t\t\t\t\treturn\tfalse;\n\n\t\t\t\t}\n\n\t\t\t\t// Check if shape point lies within angle around hole point\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\n\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\n\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\n\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\n\t\t\t\tif ( ! insideAngle ) {\n\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\n\t\t\t\t\treturn\tfalse;\n\n\t\t\t\t}\n\n\t\t\t\treturn\ttrue;\n\n\t\t\t}\n\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\n\n\t\t\t\t// checks for intersections with shape edges\n\t\t\t\tvar sIdx, nextIdx, intersection;\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\n\n\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\n\t\t\t\t}\n\n\t\t\t\treturn\tfalse;\n\n\t\t\t}\n\n\t\t\tvar indepHoles = [];\n\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\n\n\t\t\t\t// checks for intersections with hole edges\n\t\t\t\tvar ihIdx, chkHole,\n\t\t\t\t\thIdx, nextIdx, intersection;\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\n\n\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\n\n\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn\tfalse;\n\n\t\t\t}\n\n\t\t\tvar holeIndex, shapeIndex,\n\t\t\t\tshapePt, holePt,\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\n\t\t\t\ttmpShape1, tmpShape2,\n\t\t\t\ttmpHole1, tmpHole2;\n\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tindepHoles.push( h );\n\n\t\t\t}\n\n\t\t\tvar minShapeIndex = 0;\n\t\t\tvar counter = indepHoles.length * 2;\n\t\t\twhile ( indepHoles.length > 0 ) {\n\n\t\t\t\tcounter --;\n\t\t\t\tif ( counter < 0 ) {\n\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// search for shape-vertex and hole-vertex,\n\t\t\t\t// which can be connected without intersections\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\n\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\n\t\t\t\t\tholeIndex\t= - 1;\n\n\t\t\t\t\t// search for hole which can be reached without intersections\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\n\n\t\t\t\t\t\tholeIdx = indepHoles[ h ];\n\n\t\t\t\t\t\t// prevent multiple checks\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\n\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\n\n\t\t\t\t\t\thole = holes[ holeIdx ];\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\n\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\n\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\n\n\t\t\t\t\t\t\tholeIndex = h2;\n\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\n\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\n\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\n\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\n\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\n\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn shape; \t\t\t/* shape with no holes */\n\n\t\t}\n\n\n\t\tvar i, il, f, face,\n\t\t\tkey, index,\n\t\t\tallPointsMap = {};\n\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\n\n\t\tvar allpoints = contour.concat();\n\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\n\n\t\t}\n\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\n\n\t\t// prepare all points map\n\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\n\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\n\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.ShapeUtils: Duplicate point\", key, i );\n\n\t\t\t}\n\n\t\t\tallPointsMap[ key ] = i;\n\n\t\t}\n\n\t\t// remove holes by cutting paths to holes and adding them to the shape\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\n\n\t\tvar triangles = THREE.ShapeUtils.triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\n\t\t//console.log( \"triangles\",triangles, triangles.length );\n\n\t\t// check all face vertices against all points map\n\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\n\n\t\t\tface = triangles[ i ];\n\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\n\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\n\n\t\t\t\tindex = allPointsMap[ key ];\n\n\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\tface[ f ] = index;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn triangles.concat();\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn THREE.ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\t// Bezier Curves formulas obtained from\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\n\n\t// Quad Bezier Functions\n\n\tb2: ( function () {\n\n\t\tfunction b2p0( t, p ) {\n\n\t\t\tvar k = 1 - t;\n\t\t\treturn k * k * p;\n\n\t\t}\n\n\t\tfunction b2p1( t, p ) {\n\n\t\t\treturn 2 * ( 1 - t ) * t * p;\n\n\t\t}\n\n\t\tfunction b2p2( t, p ) {\n\n\t\t\treturn t * t * p;\n\n\t\t}\n\n\t\treturn function b2( t, p0, p1, p2 ) {\n\n\t\t\treturn b2p0( t, p0 ) + b2p1( t, p1 ) + b2p2( t, p2 );\n\n\t\t};\n\n\t} )(),\n\n\t// Cubic Bezier Functions\n\n\tb3: ( function () {\n\n\t\tfunction b3p0( t, p ) {\n\n\t\t\tvar k = 1 - t;\n\t\t\treturn k * k * k * p;\n\n\t\t}\n\n\t\tfunction b3p1( t, p ) {\n\n\t\t\tvar k = 1 - t;\n\t\t\treturn 3 * k * k * t * p;\n\n\t\t}\n\n\t\tfunction b3p2( t, p ) {\n\n\t\t\tvar k = 1 - t;\n\t\t\treturn 3 * k * t * t * p;\n\n\t\t}\n\n\t\tfunction b3p3( t, p ) {\n\n\t\t\treturn t * t * t * p;\n\n\t\t}\n\n\t\treturn function b3( t, p0, p1, p2, p3 ) {\n\n\t\t\treturn b3p0( t, p0 ) + b3p1( t, p1 ) + b3p2( t, p2 ) + b3p3( t, p3 );\n\n\t\t};\n\n\t} )()\n\n};\n\n// File:src/extras/core/Curve.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of Curve methods\n * .getPoint(t), getTangent(t)\n * .getPointAt(u), getTagentAt(u)\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following classes subclasses THREE.Curve:\n *\n * -- 2d classes --\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.CubicBezierCurve\n * THREE.SplineCurve\n * THREE.ArcCurve\n * THREE.EllipseCurve\n *\n * -- 3d classes --\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n * THREE.CubicBezierCurve3\n * THREE.SplineCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nTHREE.Curve = function () {\n\n};\n\nTHREE.Curve.prototype = {\n\n\tconstructor: THREE.Curve,\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( t ) {\n\n\t\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( ! divisions ) divisions = 5;\n\n\t\tvar d, pts = [];\n\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpts.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn pts;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( ! divisions ) divisions = 5;\n\n\t\tvar d, pts = [];\n\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpts.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn pts;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tvar lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( ! divisions ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\n\n\t\tif ( this.cacheArcLengths\n\t\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\n\t\t\t&& ! this.needsUpdate ) {\n\n\t\t\t//console.log( \"cached\", this.cacheArcLengths );\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tvar cache = [];\n\t\tvar current, last = this.getPoint( 0 );\n\t\tvar p, sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint ( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tvar arcLengths = this.getLengths();\n\n\t\tvar i = 0, il = arcLengths.length;\n\n\t\tvar targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t//var time = Date.now();\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tvar low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\t//console.log('b' , i, low, high, Date.now()- time);\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\tvar t = i / ( il - 1 );\n\t\t\treturn t;\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tvar lengthBefore = arcLengths[ i ];\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\n\n\t\tvar segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function( t ) {\n\n\t\tvar delta = 0.0001;\n\t\tvar t1 = t - delta;\n\t\tvar t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tvar pt1 = this.getPoint( t1 );\n\t\tvar pt2 = this.getPoint( t2 );\n\n\t\tvar vec = pt2.clone().sub( pt1 );\n\t\treturn vec.normalize();\n\n\t},\n\n\tgetTangentAt: function ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t );\n\n\t}\n\n};\n\n// TODO: Transformation for Curves?\n\n/**************************************************************\n *\t3D Curves\n **************************************************************/\n\n// A Factory method for creating new curve subclasses\n\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\n\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\n\tconstructor.prototype.constructor = constructor;\n\tconstructor.prototype.getPoint = getPointFunc;\n\n\treturn constructor;\n\n};\n\n// File:src/extras/core/CurvePath.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nTHREE.CurvePath = function () {\n\n\tthis.curves = [];\n\n\tthis.autoClose = false; // Automatically closes the path\n\n};\n\nTHREE.CurvePath.prototype = Object.assign( Object.create( THREE.Curve.prototype ), {\n\n\tconstructor: THREE.CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new THREE.LineCurve( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tvar d = t * this.getLength();\n\t\tvar curveLengths = this.getCurveLengths();\n\t\tvar i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tvar diff = curveLengths[ i ] - d;\n\t\t\t\tvar curve = this.curves[ i ];\n\n\t\t\t\tvar segmentLength = curve.getLength();\n\t\t\t\tvar u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tvar lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tvar lengths = [], sums = 0;\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( ! divisions ) divisions = 40;\n\n\t\tvar points = [];\n\n\t\tfor ( var i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tvar points = [], tmp, last, curve;\n\n\t\tfor ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tcurve = curves[i];\n\t\t\tvar pts = curve.getPoints( curve instanceof THREE.LineCurve ? 1 : divisions );\n\n\t\t\tfor ( var j = 0; j < pts.length; j++ ) {\n\n\t\t\t\tvar tmp = pts[ j ];\n\t\t\t\tif ( last && last.equals( tmp ) ) continue; // ensures no consecutive points are duplicates\n\t\t\t\tpoints.push( tmp );\n\t\t\t\tlast = tmp;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.pop();\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t/**************************************************************\n\t *\tCreate Geometries Helpers\n\t **************************************************************/\n\n\t/// Generate geometry from path points (for Line or Points objects)\n\n\tcreatePointsGeometry: function ( divisions ) {\n\n\t\tvar pts = this.getPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\t// Generate geometry from equidistant sampling along the path\n\n\tcreateSpacedPointsGeometry: function ( divisions ) {\n\n\t\tvar pts = this.getSpacedPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateGeometry: function ( points ) {\n\n\t\tvar geometry = new THREE.Geometry();\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tgeometry.vertices.push( new THREE.Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\n// File:src/extras/core/Font.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.Font = function ( data ) {\n\n\tthis.data = data;\n\n};\n\nObject.assign( THREE.Font.prototype, {\n\n\tgenerateShapes: function ( text, size, divisions ) {\n\n\t\tfunction createPaths( text ) {\n\n\t\t\tvar chars = String( text ).split( '' );\n\t\t\tvar scale = size / data.resolution;\n\t\t\tvar offset = 0;\n\n\t\t\tvar paths = [];\n\n\t\t\tfor ( var i = 0; i < chars.length; i ++ ) {\n\n\t\t\t\tvar ret = createPath( chars[ i ], scale, offset );\n\t\t\t\toffset += ret.offset;\n\n\t\t\t\tpaths.push( ret.path );\n\n\t\t\t}\n\n\t\t\treturn paths;\n\n\t\t}\n\n\t\tfunction createPath( c, scale, offset ) {\n\n\t\t\tvar glyph = data.glyphs[ c ] || data.glyphs[ '?' ];\n\n\t\t\tif ( ! glyph ) return;\n\n\t\t\tvar path = new THREE.ShapePath();\n\n\t\t\tvar pts = [], b2 = THREE.ShapeUtils.b2, b3 = THREE.ShapeUtils.b3;\n\t\t\tvar x, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2, laste;\n\n\t\t\tif ( glyph.o ) {\n\n\t\t\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\t\t\tfor ( var i = 0, l = outline.length; i < l; ) {\n\n\t\t\t\t\tvar action = outline[ i ++ ];\n\n\t\t\t\t\tswitch ( action ) {\n\n\t\t\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\n\n\t\t\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\t\t\tx = outline[ i ++ ] * scale + offset;\n\t\t\t\t\t\t\ty = outline[ i ++ ] * scale;\n\n\t\t\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\t\t\tb2( t, cpx0, cpx1, cpx );\n\t\t\t\t\t\t\t\t\tb2( t, cpy0, cpy1, cpy );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\t\t\tcpx  = outline[ i ++ ] * scale + offset;\n\t\t\t\t\t\t\tcpy  = outline[ i ++ ] * scale;\n\t\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offset;\n\t\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scale;\n\t\t\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offset;\n\t\t\t\t\t\t\tcpy2 = outline[ i ++ ] * scale;\n\n\t\t\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\n\n\t\t\t\t\t\t\tif ( laste ) {\n\n\t\t\t\t\t\t\t\tcpx0 = laste.x;\n\t\t\t\t\t\t\t\tcpy0 = laste.y;\n\n\t\t\t\t\t\t\t\tfor ( var i2 = 1; i2 <= divisions; i2 ++ ) {\n\n\t\t\t\t\t\t\t\t\tvar t = i2 / divisions;\n\t\t\t\t\t\t\t\t\tb3( t, cpx0, cpx1, cpx2, cpx );\n\t\t\t\t\t\t\t\t\tb3( t, cpy0, cpy1, cpy2, cpy );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn { offset: glyph.ha * scale, path: path };\n\n\t\t}\n\n\t\t//\n\n\t\tif ( size === undefined ) size = 100;\n\t\tif ( divisions === undefined ) divisions = 4;\n\n\t\tvar data = this.data;\n\n\t\tvar paths = createPaths( text );\n\t\tvar shapes = [];\n\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\n// File:src/extras/core/Path.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n *\n **/\n\nTHREE.Path = function ( points ) {\n\n\tTHREE.CurvePath.call( this );\n\tthis.currentPoint = new THREE.Vector2();\n\n\tif ( points ) {\n\n\t\tthis.fromPoints( points );\n\n\t}\n\n};\n\nTHREE.Path.prototype = Object.assign( Object.create( THREE.CurvePath.prototype ), {\n\n\tconstructor: THREE.Path,\n\n\t// Create path using straight lines to connect all points\n\t// - vectors: array of Vector2\n\tfromPoints: function ( vectors ) {\n\n\t\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\n\n\t\tfor ( var i = 1, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( vectors[ i ].x, vectors[ i ].y );\n\n\t\t}\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tvar curve = new THREE.LineCurve( this.currentPoint.clone(), new THREE.Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tvar curve = new THREE.QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew THREE.Vector2( aCPx, aCPy ),\n\t\t\tnew THREE.Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tvar curve = new THREE.CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\n\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\n\t\t\tnew THREE.Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tvar npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tvar curve = new THREE.SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tvar firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tvar lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t}\n\n} );\n\n\n// minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\nTHREE.ShapePath = function() {\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n}\n\nTHREE.ShapePath.prototype = {\n\tmoveTo: function ( x, y ) {\n\t\tthis.currentPath = new THREE.Path();\n\t\tthis.subPaths.push(this.currentPath);\n\t\tthis.currentPath.moveTo( x, y );\n\t},\n\tlineTo: function ( x, y ) {\n\t\tthis.currentPath.lineTo( x, y );\n\t},\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\t},\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\t},\n\tsplineThru: function ( pts ) {\n\t\tthis.currentPath.splineThru( pts );\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tvar shapes = [];\n\n\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\t\tvar tmpShape = new THREE.Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tvar polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tvar inside = false;\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tvar edgeLowPt  = inPolygon[ p ];\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tvar isClockWise = THREE.ShapeUtils.isClockWise;\n\n\t\tvar subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new THREE.Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tvar betterShapeHoles = [];\n\t\tvar newShapes = [];\n\t\tvar newShapeHoles = [];\n\t\tvar mainIdx = 0;\n\t\tvar tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new THREE.Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tvar ambiguous = false;\n\t\t\tvar toChange = [];\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tvar ho = sho[ hIdx ];\n\t\t\t\t\tvar hole_unassigned = true;\n\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmpHoles;\n\n\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n}\n\n// File:src/extras/core/Shape.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nTHREE.Shape = function () {\n\n\tTHREE.Path.apply( this, arguments );\n\n\tthis.holes = [];\n\n};\n\nTHREE.Shape.prototype = Object.assign( Object.create( THREE.Path.prototype ), {\n\n\tconstructor: THREE.Shape,\n\n\t// Convenience method to return ExtrudeGeometry\n\n\textrude: function ( options ) {\n\n\t\treturn new THREE.ExtrudeGeometry( this, options );\n\n\t},\n\n\t// Convenience method to return ShapeGeometry\n\n\tmakeGeometry: function ( options ) {\n\n\t\treturn new THREE.ShapeGeometry( this, options );\n\n\t},\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tvar holesPts = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// Get points of shape and holes (keypoints based on segments parameter)\n\n\textractAllPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn this.extractAllPoints( divisions );\n\n\t}\n\n} );\n\n// File:src/extras/curves/LineCurve.js\n\n/**************************************************************\n *\tLine\n **************************************************************/\n\nTHREE.LineCurve = function ( v1, v2 ) {\n\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n};\n\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\n\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\n\n\tif ( t === 1 ) {\n\n\t\treturn this.v2.clone();\n\n\t}\n\n\tvar point = this.v2.clone().sub( this.v1 );\n\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\n\n\treturn this.getPoint( u );\n\n};\n\nTHREE.LineCurve.prototype.getTangent = function( t ) {\n\n\tvar tangent = this.v2.clone().sub( this.v1 );\n\n\treturn tangent.normalize();\n\n};\n\n// File:src/extras/curves/QuadraticBezierCurve.js\n\n/**************************************************************\n *\tQuadratic Bezier curve\n **************************************************************/\n\n\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\n};\n\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\n\n\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar b2 = THREE.ShapeUtils.b2;\n\n\treturn new THREE.Vector2(\n\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\n\t\tb2( t, this.v0.y, this.v1.y, this.v2.y )\n\t);\n\n};\n\n\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\n\n\tvar tangentQuadraticBezier = THREE.CurveUtils.tangentQuadraticBezier;\n\n\treturn new THREE.Vector2(\n\t\ttangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x ),\n\t\ttangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y )\n\t).normalize();\n\n};\n\n// File:src/extras/curves/CubicBezierCurve.js\n\n/**************************************************************\n *\tCubic Bezier curve\n **************************************************************/\n\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\n\n\tthis.v0 = v0;\n\tthis.v1 = v1;\n\tthis.v2 = v2;\n\tthis.v3 = v3;\n\n};\n\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\n\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\n\n\tvar b3 = THREE.ShapeUtils.b3;\n\n\treturn new THREE.Vector2(\n\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\n\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\n\t);\n\n};\n\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\n\n\tvar tangentCubicBezier = THREE.CurveUtils.tangentCubicBezier;\n\n\treturn new THREE.Vector2(\n\t\ttangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\n\t\ttangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y )\n\t).normalize();\n\n};\n\n// File:src/extras/curves/SplineCurve.js\n\n/**************************************************************\n *\tSpline curve\n **************************************************************/\n\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\n\n\tthis.points = ( points == undefined ) ? [] : points;\n\n};\n\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\n\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\n\n\tvar points = this.points;\n\tvar point = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( point );\n\tvar weight = point - intPoint;\n\n\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tvar point1 = points[ intPoint ];\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tvar interpolate = THREE.CurveUtils.interpolate;\n\n\treturn new THREE.Vector2(\n\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\n\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight )\n\t);\n\n};\n\n// File:src/extras/curves/EllipseCurve.js\n\n/**************************************************************\n *\tEllipse curve\n **************************************************************/\n\nTHREE.EllipseCurve = function( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tthis.aX = aX;\n\tthis.aY = aY;\n\n\tthis.xRadius = xRadius;\n\tthis.yRadius = yRadius;\n\n\tthis.aStartAngle = aStartAngle;\n\tthis.aEndAngle = aEndAngle;\n\n\tthis.aClockwise = aClockwise;\n\n\tthis.aRotation = aRotation || 0;\n\n};\n\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\n\nTHREE.EllipseCurve.prototype.getPoint = function( t ) {\n\n\tvar twoPi = Math.PI * 2;\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\tvar samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && deltaAngle != twoPi && ! samePoints ) {\n\n\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t}\n\n\tvar angle = this.aStartAngle + t * deltaAngle;\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tvar cos = Math.cos( this.aRotation );\n\t\tvar sin = Math.sin( this.aRotation );\n\n\t\tvar tx = x - this.aX;\n\t\tvar ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn new THREE.Vector2( x, y );\n\n};\n\n// File:src/extras/curves/ArcCurve.js\n\n/**************************************************************\n *\tArc curve\n **************************************************************/\n\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n};\n\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\n\n// File:src/extras/curves/LineCurve3.js\n\n/**************************************************************\n *\tLine3D\n **************************************************************/\n\nTHREE.LineCurve3 = THREE.Curve.create(\n\n\tfunction ( v1, v2 ) {\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tif ( t === 1 ) {\n\n\t\t\treturn this.v2.clone();\n\n\t\t}\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\n\t\tvector.multiplyScalar( t );\n\t\tvector.add( this.v1 );\n\n\t\treturn vector;\n\n\t}\n\n);\n\n// File:src/extras/curves/QuadraticBezierCurve3.js\n\n/**************************************************************\n *\tQuadratic Bezier 3D curve\n **************************************************************/\n\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\n\n\tfunction ( v0, v1, v2 ) {\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar b2 = THREE.ShapeUtils.b2;\n\n\t\treturn new THREE.Vector3(\n\t\t\tb2( t, this.v0.x, this.v1.x, this.v2.x ),\n\t\t\tb2( t, this.v0.y, this.v1.y, this.v2.y ),\n\t\t\tb2( t, this.v0.z, this.v1.z, this.v2.z )\n\t\t);\n\n\t}\n\n);\n\n// File:src/extras/curves/CubicBezierCurve3.js\n\n/**************************************************************\n *\tCubic Bezier 3D curve\n **************************************************************/\n\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\n\n\tfunction ( v0, v1, v2, v3 ) {\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar b3 = THREE.ShapeUtils.b3;\n\n\t\treturn new THREE.Vector3(\n\t\t\tb3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x ),\n\t\t\tb3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y ),\n\t\t\tb3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z )\n\t\t);\n\n\t}\n\n);\n\n// File:src/extras/curves/SplineCurve3.js\n\n/**************************************************************\n *\tSpline 3D curve\n **************************************************************/\n\n\nTHREE.SplineCurve3 = THREE.Curve.create(\n\n\tfunction ( points /* array of Vector3 */ ) {\n\n\t\tconsole.warn( 'THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3' );\n\t\tthis.points = ( points == undefined ) ? [] : points;\n\n\t},\n\n\tfunction ( t ) {\n\n\t\tvar points = this.points;\n\t\tvar point = ( points.length - 1 ) * t;\n\n\t\tvar intPoint = Math.floor( point );\n\t\tvar weight = point - intPoint;\n\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\n\t\tvar point1 = points[ intPoint ];\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\tvar interpolate = THREE.CurveUtils.interpolate;\n\n\t\treturn new THREE.Vector3(\n\t\t\tinterpolate( point0.x, point1.x, point2.x, point3.x, weight ),\n\t\t\tinterpolate( point0.y, point1.y, point2.y, point3.y, weight ),\n\t\t\tinterpolate( point0.z, point1.z, point2.z, point3.z, weight )\n\t\t);\n\n\t}\n\n);\n\n// File:src/extras/curves/CatmullRomCurve3.js\n\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\nTHREE.CatmullRomCurve3 = ( function() {\n\n\tvar\n\t\ttmp = new THREE.Vector3(),\n\t\tpx = new CubicPoly(),\n\t\tpy = new CubicPoly(),\n\t\tpz = new CubicPoly();\n\n\t/*\n\tBased on an optimized c++ solution in\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n\t - http://ideone.com/NoEbVM\n\n\tThis CubicPoly class could be used for reusing some variables and calculations,\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\n\twhich can be placed in CurveUtils.\n\t*/\n\n\tfunction CubicPoly() {\n\n\t}\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tCubicPoly.prototype.init = function( x0, x1, t0, t1 ) {\n\n\t\tthis.c0 = x0;\n\t\tthis.c1 = t0;\n\t\tthis.c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tthis.c3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t};\n\n\tCubicPoly.prototype.initNonuniformCatmullRom = function( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t// compute tangents when parameterized in [t1,t2]\n\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t// rescale tangents for parametrization in [0,1]\n\t\tt1 *= dt1;\n\t\tt2 *= dt1;\n\n\t\t// initCubicPoly\n\t\tthis.init( x1, x2, t1, t2 );\n\n\t};\n\n\t// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\n\tCubicPoly.prototype.initCatmullRom = function( x0, x1, x2, x3, tension ) {\n\n\t\tthis.init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t};\n\n\tCubicPoly.prototype.calc = function( t ) {\n\n\t\tvar t2 = t * t;\n\t\tvar t3 = t2 * t;\n\t\treturn this.c0 + this.c1 * t + this.c2 * t2 + this.c3 * t3;\n\n\t};\n\n\t// Subclass Three.js curve\n\treturn THREE.Curve.create(\n\n\t\tfunction ( p /* array of Vector3 */ ) {\n\n\t\t\tthis.points = p || [];\n\t\t\tthis.closed = false;\n\n\t\t},\n\n\t\tfunction ( t ) {\n\n\t\t\tvar points = this.points,\n\t\t\t\tpoint, intPoint, weight, l;\n\n\t\t\tl = points.length;\n\n\t\t\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\n\n\t\t\tpoint = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\t\t\tintPoint = Math.floor( point );\n\t\t\tweight = point - intPoint;\n\n\t\t\tif ( this.closed ) {\n\n\t\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\n\n\t\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\t\t\tintPoint = l - 2;\n\t\t\t\tweight = 1;\n\n\t\t\t}\n\n\t\t\tvar p0, p1, p2, p3; // 4 points\n\n\t\t\tif ( this.closed || intPoint > 0 ) {\n\n\t\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t\t\t} else {\n\n\t\t\t\t// extrapolate first point\n\t\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\t\t\tp0 = tmp;\n\n\t\t\t}\n\n\t\t\tp1 = points[ intPoint % l ];\n\t\t\tp2 = points[ ( intPoint + 1 ) % l ];\n\n\t\t\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t\t\t} else {\n\n\t\t\t\t// extrapolate last point\n\t\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\t\t\tp3 = tmp;\n\n\t\t\t}\n\n\t\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\n\n\t\t\t\t// init Centripetal / Chordal Catmull-Rom\n\t\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\n\t\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t\t\t// safety check for repeated points\n\t\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t\t\t} else if ( this.type === 'catmullrom' ) {\n\n\t\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\n\t\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\n\t\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\n\t\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\n\n\t\t\t}\n\n\t\t\tvar v = new THREE.Vector3(\n\t\t\t\tpx.calc( weight ),\n\t\t\t\tpy.calc( weight ),\n\t\t\t\tpz.calc( weight )\n\t\t\t);\n\n\t\t\treturn v;\n\n\t\t}\n\n\t);\n\n} )();\n\n// File:src/extras/curves/ClosedSplineCurve3.js\n\n/**************************************************************\n *\tClosed Spline 3D curve\n **************************************************************/\n\n\nTHREE.ClosedSplineCurve3 = function ( points ) {\n\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3.' );\n\n\tTHREE.CatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\tthis.closed = true;\n\n};\n\nTHREE.ClosedSplineCurve3.prototype = Object.create( THREE.CatmullRomCurve3.prototype );\n\n// File:src/extras/geometries/BoxGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\n */\n\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'BoxGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tthis.fromBufferGeometry( new THREE.BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\tthis.mergeVertices();\n\n};\n\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\n\nTHREE.CubeGeometry = THREE.BoxGeometry;\n\n// File:src/extras/geometries/BoxBufferGeometry.js\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nTHREE.BoxBufferGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'BoxBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\tdepth: depth,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tdepthSegments: depthSegments\n\t};\n\n\tvar scope = this;\n\n\t// segments\n\twidthSegments = Math.floor( widthSegments ) || 1;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t// these are used to calculate buffer length\n\tvar vertexCount = calculateVertexCount( widthSegments, heightSegments, depthSegments );\n\tvar indexCount = calculateIndexCount( widthSegments, heightSegments, depthSegments );\n\n\t// buffers\n\tvar indices = new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount );\n\tvar vertices = new Float32Array( vertexCount * 3 );\n\tvar normals = new Float32Array( vertexCount * 3 );\n\tvar uvs = new Float32Array( vertexCount * 2 );\n\n\t// offset variables\n\tvar vertexBufferOffset = 0;\n\tvar uvBufferOffset = 0;\n\tvar indexBufferOffset = 0;\n\tvar numberOfVertices = 0;\n\n\t// group variables\n\tvar groupStart = 0;\n\n\t// build each side of the box geometry\n\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height,   width,  depthSegments, heightSegments, 0 ); // px\n\tbuildPlane( 'z', 'y', 'x',   1, - 1, depth, height, - width,  depthSegments, heightSegments, 1 ); // nx\n\tbuildPlane( 'x', 'z', 'y',   1,   1, width, depth,    height, widthSegments, depthSegments,  2 ); // py\n\tbuildPlane( 'x', 'z', 'y',   1, - 1, width, depth,  - height, widthSegments, depthSegments,  3 ); // ny\n\tbuildPlane( 'x', 'y', 'z',   1, - 1, width, height,   depth,  widthSegments, heightSegments, 4 ); // pz\n\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth,  widthSegments, heightSegments, 5 ); // nz\n\n\t// build geometry\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\t// helper functions\n\n\tfunction calculateVertexCount ( w, h, d ) {\n\n\t\tvar vertices = 0;\n\n\t\t// calculate the amount of vertices for each side (plane)\n\t\tvertices += (w + 1) * (h + 1) * 2; // xy\n\t\tvertices += (w + 1) * (d + 1) * 2; // xz\n\t\tvertices += (d + 1) * (h + 1) * 2; // zy\n\n\t\treturn vertices;\n\n\t}\n\n\tfunction calculateIndexCount ( w, h, d ) {\n\n\t\tvar index = 0;\n\n\t\t// calculate the amount of squares for each side\n\t\tindex += w * h * 2; // xy\n\t\tindex += w * d * 2; // xz\n\t\tindex += d * h * 2; // zy\n\n\t\treturn index * 6; // two triangles per square => six vertices per square\n\n\t}\n\n\tfunction buildPlane ( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\tvar segmentWidth\t= width / gridX;\n\t\tvar segmentHeight = height / gridY;\n\n\t\tvar widthHalf = width / 2;\n\t\tvar heightHalf = height / 2;\n\t\tvar depthHalf = depth / 2;\n\n\t\tvar gridX1 = gridX + 1;\n\t\tvar gridY1 = gridY + 1;\n\n\t\tvar vertexCounter = 0;\n\t\tvar groupCount = 0;\n\n\t\tvar vector = new THREE.Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t// set values to correct vector component\n\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t// now apply vector to vertex buffer\n\t\t\t\tvertices[ vertexBufferOffset ] = vector.x;\n\t\t\t\tvertices[ vertexBufferOffset + 1 ] = vector.y;\n\t\t\t\tvertices[ vertexBufferOffset + 2 ] = vector.z;\n\n\t\t\t\t// set values to correct vector component\n\t\t\t\tvector[ u ] = 0;\n\t\t\t\tvector[ v ] = 0;\n\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t// now apply vector to normal buffer\n\t\t\t\tnormals[ vertexBufferOffset ] = vector.x;\n\t\t\t\tnormals[ vertexBufferOffset + 1 ] = vector.y;\n\t\t\t\tnormals[ vertexBufferOffset + 2 ] = vector.z;\n\n\t\t\t\t// uvs\n\t\t\t\tuvs[ uvBufferOffset ] = ix / gridX;\n\t\t\t\tuvs[ uvBufferOffset + 1 ] = 1 - ( iy / gridY );\n\n\t\t\t\t// update offsets and counters\n\t\t\t\tvertexBufferOffset += 3;\n\t\t\t\tuvBufferOffset += 2;\n\t\t\t\tvertexCounter += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// 1. you need three indices to draw a single face\n\t\t// 2. a single segment consists of two faces\n\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t// indices\n\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t// face one\n\t\t\t\tindices[ indexBufferOffset ] = a;\n\t\t\t\tindices[ indexBufferOffset + 1 ] = b;\n\t\t\t\tindices[ indexBufferOffset + 2 ] = d;\n\n\t\t\t\t// face two\n\t\t\t\tindices[ indexBufferOffset + 3 ] = b;\n\t\t\t\tindices[ indexBufferOffset + 4 ] = c;\n\t\t\t\tindices[ indexBufferOffset + 5 ] = d;\n\n\t\t\t\t// update offsets and counters\n\t\t\t\tindexBufferOffset += 6;\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t// calculate new start value for groups\n\t\tgroupStart += groupCount;\n\n\t\t// update total number of vertices\n\t\tnumberOfVertices += vertexCounter;\n\n\t}\n\n};\n\nTHREE.BoxBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.BoxBufferGeometry.prototype.constructor = THREE.BoxBufferGeometry;\n\n// File:src/extras/geometries/CircleGeometry.js\n\n/**\n * @author hughes\n */\n\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'CircleGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new THREE.CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\n\n};\n\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\n\n// File:src/extras/geometries/CircleBufferGeometry.js\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nTHREE.CircleBufferGeometry = function ( radius, segments, thetaStart, thetaLength ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'CircleBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 50;\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tvar vertices = segments + 2;\n\n\tvar positions = new Float32Array( vertices * 3 );\n\tvar normals = new Float32Array( vertices * 3 );\n\tvar uvs = new Float32Array( vertices * 2 );\n\n\t// center data is already zero, but need to set a few extras\n\tnormals[ 2 ] = 1.0;\n\tuvs[ 0 ] = 0.5;\n\tuvs[ 1 ] = 0.5;\n\n\tfor ( var s = 0, i = 3, ii = 2 ; s <= segments; s ++, i += 3, ii += 2 ) {\n\n\t\tvar segment = thetaStart + s / segments * thetaLength;\n\n\t\tpositions[ i ] = radius * Math.cos( segment );\n\t\tpositions[ i + 1 ] = radius * Math.sin( segment );\n\n\t\tnormals[ i + 2 ] = 1; // normal z\n\n\t\tuvs[ ii ] = ( positions[ i ] / radius + 1 ) / 2;\n\t\tuvs[ ii + 1 ] = ( positions[ i + 1 ] / radius + 1 ) / 2;\n\n\t}\n\n\tvar indices = [];\n\n\tfor ( var i = 1; i <= segments; i ++ ) {\n\n\t\tindices.push( i, i + 1, 0 );\n\n\t}\n\n\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.CircleBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry;\n\n// File:src/extras/geometries/CylinderBufferGeometry.js\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nTHREE.CylinderBufferGeometry = function( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'CylinderBufferGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tvar scope = this;\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\n\theight = height !== undefined ? height : 100;\n\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2.0 * Math.PI;\n\n\t// used to calculate buffer length\n\n\tvar nbCap = 0;\n\n\tif ( openEnded === false ) {\n\n\t\tif ( radiusTop > 0 ) nbCap ++;\n\t\tif ( radiusBottom > 0 ) nbCap ++;\n\n\t}\n\n\tvar vertexCount = calculateVertexCount();\n\tvar indexCount = calculateIndexCount();\n\n\t// buffers\n\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ), 1 );\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\n\n\t// helper variables\n\n\tvar index = 0,\n\t    indexOffset = 0,\n\t    indexArray = [],\n\t    halfHeight = height / 2;\n\n\t// group variables\n\tvar groupStart = 0;\n\n\t// generate geometry\n\n\tgenerateTorso();\n\n\tif ( openEnded === false ) {\n\n\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', vertices );\n\tthis.addAttribute( 'normal', normals );\n\tthis.addAttribute( 'uv', uvs );\n\n\t// helper functions\n\n\tfunction calculateVertexCount() {\n\n\t\tvar count = ( radialSegments + 1 ) * ( heightSegments + 1 );\n\n\t\tif ( openEnded === false ) {\n\n\t\t\tcount += ( ( radialSegments + 1 ) * nbCap ) + ( radialSegments * nbCap );\n\n\t\t}\n\n\t\treturn count;\n\n\t}\n\n\tfunction calculateIndexCount() {\n\n\t\tvar count = radialSegments * heightSegments * 2 * 3;\n\n\t\tif ( openEnded === false ) {\n\n\t\t\tcount += radialSegments * nbCap * 3;\n\n\t\t}\n\n\t\treturn count;\n\n\t}\n\n\tfunction generateTorso() {\n\n\t\tvar x, y;\n\t\tvar normal = new THREE.Vector3();\n\t\tvar vertex = new THREE.Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\t// this will be used to calculate the normal\n\t\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\tvar indexRow = [];\n\n\t\t\tvar v = y / heightSegments;\n\n\t\t\t// calculate the radius of the current row\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tvar u = x / radialSegments;\n\n\t\t\t\t// vertex\n\t\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\n\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\n\t\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\t\t\t\tnormal.copy( vertex );\n\n\t\t\t\t// handle special case if radiusTop/radiusBottom is zero\n\n\t\t\t\tif ( ( radiusTop === 0 && y === 0 ) || ( radiusBottom === 0 && y === heightSegments ) ) {\n\n\t\t\t\t\tnormal.x = Math.sin( u * thetaLength + thetaStart );\n\t\t\t\t\tnormal.z = Math.cos( u * thetaLength + thetaStart );\n\n\t\t\t\t}\n\n\t\t\t\tnormal.setY( Math.sqrt( normal.x * normal.x + normal.z * normal.z ) * tanTheta ).normalize();\n\t\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\t\t\t\tuvs.setXY( index, u, 1 - v );\n\n\t\t\t\t// save index of vertex in respective row\n\t\t\t\tindexRow.push( index );\n\n\t\t\t\t// increase index\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// now save vertices of the row in our index array\n\t\t\tindexArray.push( indexRow );\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t// we use the index array to access the correct indices\n\t\t\t\tvar i1 = indexArray[ y ][ x ];\n\t\t\t\tvar i2 = indexArray[ y + 1 ][ x ];\n\t\t\t\tvar i3 = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\tvar i4 = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t// face one\n\t\t\t\tindices.setX( indexOffset, i1 ); indexOffset ++;\n\t\t\t\tindices.setX( indexOffset, i2 ); indexOffset ++;\n\t\t\t\tindices.setX( indexOffset, i4 ); indexOffset ++;\n\n\t\t\t\t// face two\n\t\t\t\tindices.setX( indexOffset, i2 ); indexOffset ++;\n\t\t\t\tindices.setX( indexOffset, i3 ); indexOffset ++;\n\t\t\t\tindices.setX( indexOffset, i4 ); indexOffset ++;\n\n\t\t\t\t// update counters\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t// calculate new start value for groups\n\t\tgroupStart += groupCount;\n\n\t}\n\n\tfunction generateCap( top ) {\n\n\t\tvar x, centerIndexStart, centerIndexEnd;\n\n\t\tvar uv = new THREE.Vector2();\n\t\tvar vertex = new THREE.Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\tvar sign = ( top === true ) ? 1 : - 1;\n\n\t\t// save the index of the first center vertex\n\t\tcenterIndexStart = index;\n\n\t\t// first we generate the center vertex data of the cap.\n\t\t// because the geometry needs one set of uvs per face,\n\t\t// we must generate a center vertex per face/segment\n\n\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t// vertex\n\t\t\tvertices.setXYZ( index, 0, halfHeight * sign, 0 );\n\n\t\t\t// normal\n\t\t\tnormals.setXYZ( index, 0, sign, 0 );\n\n\t\t\t// uv\n\t\t\tuv.x = 0.5;\n\t\t\tuv.y = 0.5;\n\n\t\t\tuvs.setXY( index, uv.x, uv.y );\n\n\t\t\t// increase index\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// save the index of the last center vertex\n\t\tcenterIndexEnd = index;\n\n\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tvar u = x / radialSegments;\n\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\tvar cosTheta = Math.cos( theta );\n\t\t\tvar sinTheta = Math.sin( theta );\n\n\t\t\t// vertex\n\t\t\tvertex.x = radius * sinTheta;\n\t\t\tvertex.y = halfHeight * sign;\n\t\t\tvertex.z = radius * cosTheta;\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\t\t\tnormals.setXYZ( index, 0, sign, 0 );\n\n\t\t\t// uv\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\tuvs.setXY( index, uv.x, uv.y );\n\n\t\t\t// increase index\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar c = centerIndexStart + x;\n\t\t\tvar i = centerIndexEnd + x;\n\n\t\t\tif ( top === true ) {\n\n\t\t\t\t// face top\n\t\t\t\tindices.setX( indexOffset, i ); indexOffset ++;\n\t\t\t\tindices.setX( indexOffset, i + 1 ); indexOffset ++;\n\t\t\t\tindices.setX( indexOffset, c ); indexOffset ++;\n\n\t\t\t} else {\n\n\t\t\t\t// face bottom\n\t\t\t\tindices.setX( indexOffset, i + 1 ); indexOffset ++;\n\t\t\t\tindices.setX( indexOffset, i ); indexOffset ++;\n\t\t\t\tindices.setX( indexOffset, c ); indexOffset ++;\n\n\t\t\t}\n\n\t\t\t// update counters\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t// calculate new start value for groups\n\t\tgroupStart += groupCount;\n\n\t}\n\n};\n\nTHREE.CylinderBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.CylinderBufferGeometry.prototype.constructor = THREE.CylinderBufferGeometry;\n\n// File:src/extras/geometries/CylinderGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new THREE.CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n};\n\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\n\n// File:src/extras/geometries/ConeBufferGeometry.js\n\n/*\n * @author: abelnation / http://github.com/abelnation\n */\n\nTHREE.ConeBufferGeometry = function (\n\tradius, height,\n\tradialSegments, heightSegments,\n\topenEnded, thetaStart, thetaLength ) {\n\n\tTHREE.CylinderBufferGeometry.call( this,\n\t\t0, radius, height,\n\t\tradialSegments, heightSegments,\n\t\topenEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n};\n\nTHREE.ConeBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.ConeBufferGeometry.prototype.constructor = THREE.ConeBufferGeometry;\n\n// File:src/extras/geometries/ConeGeometry.js\n\n/**\n * @author abelnation / http://github.com/abelnation\n */\n\nTHREE.ConeGeometry = function (\n\tradius, height,\n\tradialSegments, heightSegments,\n\topenEnded, thetaStart, thetaLength ) {\n\n\tTHREE.CylinderGeometry.call( this,\n\t\t0, radius, height,\n\t\tradialSegments, heightSegments,\n\t\topenEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n};\n\nTHREE.ConeGeometry.prototype = Object.create( THREE.CylinderGeometry.prototype );\nTHREE.ConeGeometry.prototype.constructor = THREE.ConeGeometry;\n\n// File:src/extras/geometries/EdgesGeometry.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.EdgesGeometry = function ( geometry, thresholdAngle ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\n\n\tvar thresholdDot = Math.cos( THREE.Math.DEG2RAD * thresholdAngle );\n\n\tvar edge = [ 0, 0 ], hash = {};\n\n\tfunction sortFunction( a, b ) {\n\n\t\treturn a - b;\n\n\t}\n\n\tvar keys = [ 'a', 'b', 'c' ];\n\n\tvar geometry2;\n\n\tif ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\tgeometry2 = new THREE.Geometry();\n\t\tgeometry2.fromBufferGeometry( geometry );\n\n\t} else {\n\n\t\tgeometry2 = geometry.clone();\n\n\t}\n\n\tgeometry2.mergeVertices();\n\tgeometry2.computeFaceNormals();\n\n\tvar vertices = geometry2.vertices;\n\tvar faces = geometry2.faces;\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\tedge.sort( sortFunction );\n\n\t\t\tvar key = edge.toString();\n\n\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\n\n\t\t\t} else {\n\n\t\t\t\thash[ key ].face2 = i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tvar coords = [];\n\n\tfor ( var key in hash ) {\n\n\t\tvar h = hash[ key ];\n\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot ) {\n\n\t\t\tvar vertex = vertices[ h.vert1 ];\n\t\t\tcoords.push( vertex.x );\n\t\t\tcoords.push( vertex.y );\n\t\t\tcoords.push( vertex.z );\n\n\t\t\tvertex = vertices[ h.vert2 ];\n\t\t\tcoords.push( vertex.x );\n\t\t\tcoords.push( vertex.y );\n\t\t\tcoords.push( vertex.z );\n\n\t\t}\n\n\t}\n\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( coords ), 3 ) );\n\n};\n\nTHREE.EdgesGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry;\n\n// File:src/extras/geometries/ExtrudeGeometry.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  amount: <int>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline is bevel\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\n *\n *  uvGenerator: <Object> // object that provides UV generator functions\n *\n * }\n **/\n\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\n\n\tif ( typeof( shapes ) === \"undefined\" ) {\n\n\t\tshapes = [];\n\t\treturn;\n\n\t}\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\tthis.addShapeList( shapes, options );\n\n\tthis.computeFaceNormals();\n\n\t// can't really use automatic vertex normals\n\t// as then front and back sides get smoothed too\n\t// should do separate smoothing just for sides\n\n\t//this.computeVertexNormals();\n\n\t//console.log( \"took\", ( Date.now() - startTime ) );\n\n};\n\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\n\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\n\n\tvar sl = shapes.length;\n\n\tfor ( var s = 0; s < sl; s ++ ) {\n\n\t\tvar shape = shapes[ s ];\n\t\tthis.addShape( shape, options );\n\n\t}\n\n};\n\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\n\n\tvar amount = options.amount !== undefined ? options.amount : 100;\n\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\n\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\tvar steps = options.steps !== undefined ? options.steps : 1;\n\n\tvar extrudePath = options.extrudePath;\n\tvar extrudePts, extrudeByPath = false;\n\n\t// Use default WorldUVGenerator if no UV generators are specified.\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\n\n\tvar splineTube, binormal, normal, position2;\n\tif ( extrudePath ) {\n\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\textrudeByPath = true;\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t// SETUP TNB variables\n\n\t\t// Reuse TNB from TubeGeomtry for now.\n\t\t// TODO1 - have a .isClosed in spline?\n\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames( extrudePath, steps, false );\n\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\tbinormal = new THREE.Vector3();\n\t\tnormal = new THREE.Vector3();\n\t\tposition2 = new THREE.Vector3();\n\n\t}\n\n\t// Safeguards if bevels are not enabled\n\n\tif ( ! bevelEnabled ) {\n\n\t\tbevelSegments = 0;\n\t\tbevelThickness = 0;\n\t\tbevelSize = 0;\n\n\t}\n\n\t// Variables initialization\n\n\tvar ahole, h, hl; // looping of holes\n\tvar scope = this;\n\n\tvar shapesOffset = this.vertices.length;\n\n\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\tvar vertices = shapePoints.shape;\n\tvar holes = shapePoints.holes;\n\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\n\n\tif ( reverse ) {\n\n\t\tvertices = vertices.reverse();\n\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tif ( THREE.ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\n\n\t}\n\n\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\n\n\t/* Vertices */\n\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\tvertices = vertices.concat( ahole );\n\n\t}\n\n\n\tfunction scalePt2 ( pt, vec, size ) {\n\n\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t}\n\n\tvar b, bs, t, z,\n\t\tvert, vlen = vertices.length,\n\t\tface, flen = faces.length;\n\n\n\t// Find directions for point movement\n\n\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t//\n\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\n\n\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\n\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t// check for collinear edges\n\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t// not collinear\n\n\t\t\t// length of vectors for normalizing\n\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t// vector from inPt to intersection point\n\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t//  but prevent crazy spikes\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\n\n\t\t\t} else {\n\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// handle special case of collinear edges\n\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\n\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( direction_eq ) {\n\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\tv_trans_y =  v_prev_x;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t} else {\n\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t}\n\n\n\tvar contourMovements = [];\n\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\tif ( j === il ) j = 0;\n\t\tif ( k === il ) k = 0;\n\n\t\t//  (j)---(i)---(k)\n\t\t// console.log('i,j,k', i, j , k)\n\n\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t}\n\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\tahole = holes[ h ];\n\n\t\toneHoleMovements = [];\n\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t}\n\n\t\tholesMovements.push( oneHoleMovements );\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t}\n\n\n\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\n\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * ( 1 - t );\n\n\t\t//z = bevelThickness * t;\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI / 2 ) ); // curved\n\t\t//bs = bevelSize * t; // linear\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y,  - z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tbs = bevelSize;\n\n\t// Back facing vertices\n\n\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\tif ( ! extrudeByPath ) {\n\n\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t} else {\n\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t}\n\n\t}\n\n\t// Add stepped vertices...\n\t// Including front facing vertices\n\n\tvar s;\n\n\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t// Add bevel segments planes\n\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\tt = b / bevelSegments;\n\t\tz = bevelThickness * ( 1 - t );\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\n\t\tbs = bevelSize * Math.sin ( t * Math.PI / 2 );\n\n\t\t// contract shape\n\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t}\n\n\t\t// expand holes\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/* Faces */\n\n\t// Top and bottom faces\n\n\tbuildLidFaces();\n\n\t// Sides faces\n\n\tbuildSideFaces();\n\n\n\t/////  Internal functions\n\n\tfunction buildLidFaces() {\n\n\t\tif ( bevelEnabled ) {\n\n\t\t\tvar layer = 0; // steps + 1\n\t\t\tvar offset = vlen * layer;\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t}\n\n\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\toffset = vlen * layer;\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Bottom faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t}\n\n\t\t\t// Top faces\n\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\tface = faces[ i ];\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Create faces for the z-sides of the shape\n\n\tfunction buildSideFaces() {\n\n\t\tvar layeroffset = 0;\n\t\tsidewalls( contour, layeroffset );\n\t\tlayeroffset += contour.length;\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t//, true\n\t\t\tlayeroffset += ahole.length;\n\n\t\t}\n\n\t}\n\n\tfunction sidewalls( contour, layeroffset ) {\n\n\t\tvar j, k;\n\t\ti = contour.length;\n\n\t\twhile ( -- i >= 0 ) {\n\n\t\t\tj = i;\n\t\t\tk = i - 1;\n\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\n\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\tfunction v( x, y, z ) {\n\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\n\n\t}\n\n\tfunction f3( a, b, c ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\n\t\tscope.faces.push( new THREE.Face3( a, b, c, null, null, 0 ) );\n\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\n\n\t\tscope.faceVertexUvs[ 0 ].push( uvs );\n\n\t}\n\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\n\n\t\ta += shapesOffset;\n\t\tb += shapesOffset;\n\t\tc += shapesOffset;\n\t\td += shapesOffset;\n\n\t\tscope.faces.push( new THREE.Face3( a, b, d, null, null, 1 ) );\n\t\tscope.faces.push( new THREE.Face3( b, c, d, null, null, 1 ) );\n\n\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\n\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\n\n\t}\n\n};\n\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\n\t\treturn [\n\t\t\tnew THREE.Vector2( a.x, a.y ),\n\t\t\tnew THREE.Vector2( b.x, b.y ),\n\t\t\tnew THREE.Vector2( c.x, c.y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\n\n\t\tvar vertices = geometry.vertices;\n\n\t\tvar a = vertices[ indexA ];\n\t\tvar b = vertices[ indexB ];\n\t\tvar c = vertices[ indexC ];\n\t\tvar d = vertices[ indexD ];\n\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\n\t\t\t];\n\n\t\t}\n\n\t}\n};\n\n// File:src/extras/geometries/ShapeGeometry.js\n\n/**\n * @author jonobr1 / http://jonobr1.com\n *\n * Creates a one-sided polygonal geometry from a path shape. Similar to\n * ExtrudeGeometry.\n *\n * parameters = {\n *\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\n *\n *\tmaterial: <int> // material index for front and back faces\n *\tuvGenerator: <Object> // object that provides UV generator functions\n *\n * }\n **/\n\nTHREE.ShapeGeometry = function ( shapes, options ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ShapeGeometry';\n\n\tif ( Array.isArray( shapes ) === false ) shapes = [ shapes ];\n\n\tthis.addShapeList( shapes, options );\n\n\tthis.computeFaceNormals();\n\n};\n\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\n\n/**\n * Add an array of shapes to THREE.ShapeGeometry.\n */\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\n\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\tthis.addShape( shapes[ i ], options );\n\n\t}\n\n\treturn this;\n\n};\n\n/**\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\n */\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\n\n\tif ( options === undefined ) options = {};\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\n\tvar material = options.material;\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\n\n\t//\n\n\tvar i, l, hole;\n\n\tvar shapesOffset = this.vertices.length;\n\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\tvar vertices = shapePoints.shape;\n\tvar holes = shapePoints.holes;\n\n\tvar reverse = ! THREE.ShapeUtils.isClockWise( vertices );\n\n\tif ( reverse ) {\n\n\t\tvertices = vertices.reverse();\n\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\n\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\n\n\t\t\thole = holes[ i ];\n\n\t\t\tif ( THREE.ShapeUtils.isClockWise( hole ) ) {\n\n\t\t\t\tholes[ i ] = hole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\treverse = false;\n\n\t}\n\n\tvar faces = THREE.ShapeUtils.triangulateShape( vertices, holes );\n\n\t// Vertices\n\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\n\n\t\thole = holes[ i ];\n\t\tvertices = vertices.concat( hole );\n\n\t}\n\n\t//\n\n\tvar vert, vlen = vertices.length;\n\tvar face, flen = faces.length;\n\n\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\tvert = vertices[ i ];\n\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\n\n\t}\n\n\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\tface = faces[ i ];\n\n\t\tvar a = face[ 0 ] + shapesOffset;\n\t\tvar b = face[ 1 ] + shapesOffset;\n\t\tvar c = face[ 2 ] + shapesOffset;\n\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\n\n\t}\n\n};\n\n// File:src/extras/geometries/LatheBufferGeometry.js\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n // points - to create a closed torus, one must use a set of points\n //    like so: [ a, b, c, d, a ], see first is the same as last.\n // segments - the number of circumference segments to create\n // phiStart - the starting radian\n // phiLength - the radian (0 to 2PI) range of the lathed section\n //    2PI is a closed lathe, less than 2PI is a portion.\n\nTHREE.LatheBufferGeometry = function ( points, segments, phiStart, phiLength ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'LatheBufferGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tsegments = Math.floor( segments ) || 12;\n\tphiStart = phiStart || 0;\n\tphiLength = phiLength || Math.PI * 2;\n\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\tphiLength = THREE.Math.clamp( phiLength, 0, Math.PI * 2 );\n\n\t// these are used to calculate buffer length\n\tvar vertexCount = ( segments + 1 ) * points.length;\n\tvar indexCount = segments * points.length * 2 * 3;\n\n\t// buffers\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\n\n\t// helper variables\n\tvar index = 0, indexOffset = 0, base;\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\n\tvar inverseSegments = 1.0 / segments;\n\tvar vertex = new THREE.Vector3();\n\tvar uv = new THREE.Vector2();\n\tvar i, j;\n\n\t// generate vertices and uvs\n\n\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\n\n\t\tvar sin = Math.sin( phi );\n\t\tvar cos = Math.cos( phi );\n\n\t\tfor ( j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t// vertex\n\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\tvertex.y = points[ j ].y;\n\t\t\tvertex.z = points[ j ].x * cos;\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\n\n\t\t\t// uv\n\t\t\tuv.x = i / segments;\n\t\t\tuv.y = j / ( points.length - 1 );\n\t\t\tuvs.setXY( index, uv.x, uv.y );\n\n\t\t\t// increase index\n\t\t\tindex ++;\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( i = 0; i < segments; i ++ ) {\n\n\t\tfor ( j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\tbase = j + i * points.length;\n\n\t\t\t// indices\n\t\t\tvar a = base;\n\t\t\tvar b = base + points.length;\n\t\t\tvar c = base + points.length + 1;\n\t\t\tvar d = base + 1;\n\n\t\t\t// face one\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\n\n\t\t\t// face two\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', vertices );\n\tthis.addAttribute( 'uv', uvs );\n\n\t// generate normals\n\n\tthis.computeVertexNormals();\n\n\t// if the geometry is closed, we need to average the normals along the seam.\n\t// because the corresponding vertices are identical (but still have different UVs).\n\n\tif( phiLength === Math.PI * 2 ) {\n\n\t\tvar normals = this.attributes.normal.array;\n\t\tvar n1 = new THREE.Vector3();\n\t\tvar n2 = new THREE.Vector3();\n\t\tvar n = new THREE.Vector3();\n\n\t\t// this is the buffer offset for the last line of vertices\n\t\tbase = segments * points.length * 3;\n\n\t\tfor( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\n\n\t\t\t// select the normal of the vertex in the first line\n\t\t\tn1.x = normals[ j + 0 ];\n\t\t\tn1.y = normals[ j + 1 ];\n\t\t\tn1.z = normals[ j + 2 ];\n\n\t\t\t// select the normal of the vertex in the last line\n\t\t\tn2.x = normals[ base + j + 0 ];\n\t\t\tn2.y = normals[ base + j + 1 ];\n\t\t\tn2.z = normals[ base + j + 2 ];\n\n\t\t\t// average normals\n\t\t\tn.addVectors( n1, n2 ).normalize();\n\n\t\t\t// assign the new values to both normals\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\n\n\t\t} // next row\n\n\t}\n\n};\n\nTHREE.LatheBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.LatheBufferGeometry.prototype.constructor = THREE.LatheBufferGeometry;\n\n// File:src/extras/geometries/LatheGeometry.js\n\n/**\n * @author astrodud / http://astrodud.isgreat.org/\n * @author zz85 / https://github.com/zz85\n * @author bhouston / http://clara.io\n */\n\n// points - to create a closed torus, one must use a set of points\n//    like so: [ a, b, c, d, a ], see first is the same as last.\n// segments - the number of circumference segments to create\n// phiStart - the starting radian\n// phiLength - the radian (0 to 2PI) range of the lathed section\n//    2PI is a closed lathe, less than 2PI is a portion.\n\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'LatheGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tthis.fromBufferGeometry( new THREE.LatheBufferGeometry( points, segments, phiStart, phiLength ) );\n\tthis.mergeVertices();\n\n};\n\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\n\n// File:src/extras/geometries/PlaneGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\n};\n\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\n\n// File:src/extras/geometries/PlaneBufferGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\n */\n\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\n\n\tvar offset = 0;\n\tvar offset2 = 0;\n\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices[ offset ] = x;\n\t\t\tvertices[ offset + 1 ] = - y;\n\n\t\t\tnormals[ offset + 2 ] = 1;\n\n\t\t\tuvs[ offset2 ] = ix / gridX;\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\n\n\t\t\toffset += 3;\n\t\t\toffset2 += 2;\n\n\t\t}\n\n\t}\n\n\toffset = 0;\n\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\n\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\tindices[ offset ] = a;\n\t\t\tindices[ offset + 1 ] = b;\n\t\t\tindices[ offset + 2 ] = d;\n\n\t\t\tindices[ offset + 3 ] = b;\n\t\t\tindices[ offset + 4 ] = c;\n\t\t\tindices[ offset + 5 ] = d;\n\n\t\t\toffset += 6;\n\n\t\t}\n\n\t}\n\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n};\n\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\n\n// File:src/extras/geometries/RingBufferGeometry.js\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nTHREE.RingBufferGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'RingBufferGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tinnerRadius = innerRadius || 20;\n\touterRadius = outerRadius || 50;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\n\n\t// these are used to calculate buffer length\n\tvar vertexCount = ( thetaSegments + 1 ) * ( phiSegments + 1 );\n\tvar indexCount = thetaSegments * phiSegments * 2 * 3;\n\n\t// buffers\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\n\n\t// some helper variables\n\tvar index = 0, indexOffset = 0, segment;\n\tvar radius = innerRadius;\n\tvar radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\tvar vertex = new THREE.Vector3();\n\tvar uv = new THREE.Vector2();\n\tvar j, i;\n\n\t// generate vertices, normals and uvs\n\n\t// values are generate from the inside of the ring to the outside\n\n\tfor ( j = 0; j <= phiSegments; j ++ ) {\n\n\t\tfor ( i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\tsegment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t// vertex\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\t\t\tnormals.setXYZ( index, 0, 0, 1 );\n\n\t\t\t// uv\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\t\t\tuvs.setXY( index, uv.x, uv.y );\n\n\t\t\t// increase index\n\t\t\tindex++;\n\n\t\t}\n\n\t\t// increase the radius for next row of vertices\n\t\tradius += radiusStep;\n\n\t}\n\n\t// generate indices\n\n\tfor ( j = 0; j < phiSegments; j ++ ) {\n\n\t\tvar thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\tfor ( i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\tsegment = i + thetaSegmentLevel;\n\n\t\t\t// indices\n\t\t\tvar a = segment;\n\t\t\tvar b = segment + thetaSegments + 1;\n\t\t\tvar c = segment + thetaSegments + 2;\n\t\t\tvar d = segment + 1;\n\n\t\t\t// face one\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\n\n\t\t\t// face two\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', vertices );\n\tthis.addAttribute( 'normal', normals );\n\tthis.addAttribute( 'uv', uvs );\n\n};\n\nTHREE.RingBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.RingBufferGeometry.prototype.constructor = THREE.RingBufferGeometry;\n\n// File:src/extras/geometries/RingGeometry.js\n\n/**\n * @author Kaleb Murphy\n */\n\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'RingGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new THREE.RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\n\n};\n\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\n\n// File:src/extras/geometries/SphereGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new THREE.SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\n\n};\n\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\n\n// File:src/extras/geometries/SphereBufferGeometry.js\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n * based on THREE.SphereGeometry\n */\n\nTHREE.SphereBufferGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'SphereBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 50;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar thetaEnd = thetaStart + thetaLength;\n\n\tvar vertexCount = ( ( widthSegments + 1 ) * ( heightSegments + 1 ) );\n\n\tvar positions = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\n\n\tvar index = 0, vertices = [], normal = new THREE.Vector3();\n\n\tfor ( var y = 0; y <= heightSegments; y ++ ) {\n\n\t\tvar verticesRow = [];\n\n\t\tvar v = y / heightSegments;\n\n\t\tfor ( var x = 0; x <= widthSegments; x ++ ) {\n\n\t\t\tvar u = x / widthSegments;\n\n\t\t\tvar px = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvar py = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvar pz = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tnormal.set( px, py, pz ).normalize();\n\n\t\t\tpositions.setXYZ( index, px, py, pz );\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\n\t\t\tuvs.setXY( index, u, 1 - v );\n\n\t\t\tverticesRow.push( index );\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\tvertices.push( verticesRow );\n\n\t}\n\n\tvar indices = [];\n\n\tfor ( var y = 0; y < heightSegments; y ++ ) {\n\n\t\tfor ( var x = 0; x < widthSegments; x ++ ) {\n\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\n\t\t\tvar v2 = vertices[ y ][ x ];\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\n\n\t\t\tif ( y !== 0 || thetaStart > 0 ) indices.push( v1, v2, v4 );\n\t\t\tif ( y !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( v2, v3, v4 );\n\n\t\t}\n\n\t}\n\n\tthis.setIndex( new ( positions.count > 65535 ? THREE.Uint32Attribute : THREE.Uint16Attribute )( indices, 1 ) );\n\tthis.addAttribute( 'position', positions );\n\tthis.addAttribute( 'normal', normals );\n\tthis.addAttribute( 'uv', uvs );\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n};\n\nTHREE.SphereBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry;\n\n// File:src/extras/geometries/TextGeometry.js\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * Text = 3D Text\n *\n * parameters = {\n *  font: <THREE.Font>, // font\n *\n *  size: <float>, // size of the text\n *  height: <float>, // thickness to extrude text\n *  curveSegments: <int>, // number of points on the curves\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into text bevel goes\n *  bevelSize: <float> // how far from text outline is bevel\n * }\n */\n\nTHREE.TextGeometry = function ( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar font = parameters.font;\n\n\tif ( font instanceof THREE.Font === false ) {\n\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\n\t\treturn new THREE.Geometry();\n\n\t}\n\n\tvar shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tTHREE.ExtrudeGeometry.call( this, shapes, parameters );\n\n\tthis.type = 'TextGeometry';\n\n};\n\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\n\n// File:src/extras/geometries/TorusBufferGeometry.js\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nTHREE.TorusBufferGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'TorusBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\n\tarc = arc || Math.PI * 2;\n\n\t// used to calculate buffer length\n\tvar vertexCount = ( ( radialSegments + 1 ) * ( tubularSegments + 1 ) );\n\tvar indexCount = radialSegments * tubularSegments * 2 * 3;\n\n\t// buffers\n\tvar indices = new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount );\n\tvar vertices = new Float32Array( vertexCount * 3 );\n\tvar normals = new Float32Array( vertexCount * 3 );\n\tvar uvs = new Float32Array( vertexCount * 2 );\n\n\t// offset variables\n\tvar vertexBufferOffset = 0;\n\tvar uvBufferOffset = 0;\n\tvar indexBufferOffset = 0;\n\n\t// helper variables\n\tvar center = new THREE.Vector3();\n\tvar vertex = new THREE.Vector3();\n\tvar normal = new THREE.Vector3();\n\n\tvar j, i;\n\n\t// generate vertices, normals and uvs\n\n\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar u = i / tubularSegments * arc;\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\t// vertex\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\tvertices[ vertexBufferOffset ] = vertex.x;\n\t\t\tvertices[ vertexBufferOffset + 1 ] = vertex.y;\n\t\t\tvertices[ vertexBufferOffset + 2 ] = vertex.z;\n\n\t\t\t// this vector is used to calculate the normal\n\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\tcenter.y = radius * Math.sin( u );\n\n\t\t\t// normal\n\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\tnormals[ vertexBufferOffset ] = normal.x;\n\t\t\tnormals[ vertexBufferOffset + 1 ] = normal.y;\n\t\t\tnormals[ vertexBufferOffset + 2 ] = normal.z;\n\n\t\t\t// uv\n\t\t\tuvs[ uvBufferOffset ] = i / tubularSegments;\n\t\t\tuvs[ uvBufferOffset + 1 ] = j / radialSegments;\n\n\t\t\t// update offsets\n\t\t\tvertexBufferOffset += 3;\n\t\t\tuvBufferOffset += 2;\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( j = 1; j <= radialSegments; j ++ ) {\n\n\t\tfor ( i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t// indices\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t// face one\n\t\t\tindices[ indexBufferOffset ] = a;\n\t\t\tindices[ indexBufferOffset + 1 ] = b;\n\t\t\tindices[ indexBufferOffset + 2 ] = d;\n\n\t\t\t// face two\n\t\t\tindices[ indexBufferOffset + 3 ] = b;\n\t\t\tindices[ indexBufferOffset + 4 ] = c;\n\t\t\tindices[ indexBufferOffset + 5 ] = d;\n\n\t\t\t// update offset\n\t\t\tindexBufferOffset += 6;\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\n\n};\n\nTHREE.TorusBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.TorusBufferGeometry.prototype.constructor = THREE.TorusBufferGeometry;\n\n// File:src/extras/geometries/TorusGeometry.js\n\n/**\n * @author oosmoxiecode\n * @author mrdoob / http://mrdoob.com/\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\n */\n\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TorusGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tthis.fromBufferGeometry( new THREE.TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\n\n};\n\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\n\n// File:src/extras/geometries/TorusKnotBufferGeometry.js\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n *\n * see: http://www.blackpawn.com/texts/pqtorus/\n */\nTHREE.TorusKnotBufferGeometry = function ( radius, tube, tubularSegments, radialSegments, p, q ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tthis.type = 'TorusKnotBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tradius = radius || 100;\n\ttube = tube || 40;\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\tp = p || 2;\n\tq = q || 3;\n\n\t// used to calculate buffer length\n\tvar vertexCount = ( ( radialSegments + 1 ) * ( tubularSegments + 1 ) );\n\tvar indexCount = radialSegments * tubularSegments * 2 * 3;\n\n\t// buffers\n\tvar indices = new THREE.BufferAttribute( new ( indexCount > 65535 ? Uint32Array : Uint16Array )( indexCount ) , 1 );\n\tvar vertices = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\n\n\t// helper variables\n\tvar i, j, index = 0, indexOffset = 0;\n\n\tvar vertex = new THREE.Vector3();\n\tvar normal = new THREE.Vector3();\n\tvar uv = new THREE.Vector2();\n\n\tvar P1 = new THREE.Vector3();\n\tvar P2 = new THREE.Vector3();\n\n\tvar B = new THREE.Vector3();\n\tvar T = new THREE.Vector3();\n\tvar N = new THREE.Vector3();\n\n\t// generate vertices, normals and uvs\n\n\tfor ( i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\n\n\t\tvar u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t// calculate orthonormal basis\n\n\t\tT.subVectors( P2, P1 );\n\t\tN.addVectors( P2, P1 );\n\t\tB.crossVectors( T, N );\n\t\tN.crossVectors( B, T );\n\n\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\tB.normalize();\n\t\tN.normalize();\n\n\t\tfor ( j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\t\t\tvar cx = - tube * Math.cos( v );\n\t\t\tvar cy = tube * Math.sin( v );\n\n\t\t\t// now calculate the final vertex position.\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\n\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\t// vertex\n\t\t\tvertices.setXYZ( index, vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\t\t\tuv.x = i / tubularSegments;\n\t\t\tuv.y = j / radialSegments;\n\t\t\tuvs.setXY( index, uv.x, uv.y );\n\n\t\t\t// increase index\n\t\t\tindex ++;\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( j = 1; j <= tubularSegments; j ++ ) {\n\n\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t// indices\n\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\tvar c = ( radialSegments + 1 ) * j + i;\n\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t// face one\n\t\t\tindices.setX( indexOffset, a ); indexOffset++;\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\n\n\t\t\t// face two\n\t\t\tindices.setX( indexOffset, b ); indexOffset++;\n\t\t\tindices.setX( indexOffset, c ); indexOffset++;\n\t\t\tindices.setX( indexOffset, d ); indexOffset++;\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.addAttribute( 'position', vertices );\n\tthis.addAttribute( 'normal', normals );\n\tthis.addAttribute( 'uv', uvs );\n\n\t// this function calculates the current position on the torus curve\n\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\tvar cu = Math.cos( u );\n\t\tvar su = Math.sin( u );\n\t\tvar quOverP = q / p * u;\n\t\tvar cs = Math.cos( quOverP );\n\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t}\n\n};\n\nTHREE.TorusKnotBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.TorusKnotBufferGeometry.prototype.constructor = THREE.TorusKnotBufferGeometry;\n\n// File:src/extras/geometries/TorusKnotGeometry.js\n\n/**\n * @author oosmoxiecode\n */\n\nTHREE.TorusKnotGeometry = function ( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TorusKnotGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tif( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\n\n\tthis.fromBufferGeometry( new THREE.TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\n\tthis.mergeVertices();\n\n};\n\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\n\n// File:src/extras/geometries/TubeGeometry.js\n\n/**\n * @author WestLangley / https://github.com/WestLangley\n * @author zz85 / https://github.com/zz85\n * @author miningold / https://github.com/miningold\n * @author jonobr1 / https://github.com/jonobr1\n *\n * Modified from the TorusKnotGeometry by @oosmoxiecode\n *\n * Creates a tube which extrudes along a 3d spline\n *\n * Uses parallel transport frames as described in\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n */\n\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'TubeGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\tsegments: segments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed,\n\t\ttaper: taper\n\t};\n\n\tsegments = segments || 64;\n\tradius = radius || 1;\n\tradialSegments = radialSegments || 8;\n\tclosed = closed || false;\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\n\n\tvar grid = [];\n\n\tvar scope = this,\n\n\t\ttangent,\n\t\tnormal,\n\t\tbinormal,\n\n\t\tnumpoints = segments + 1,\n\n\t\tu, v, r,\n\n\t\tcx, cy,\n\t\tpos, pos2 = new THREE.Vector3(),\n\t\ti, j,\n\t\tip, jp,\n\t\ta, b, c, d,\n\t\tuva, uvb, uvc, uvd;\n\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\n\t\ttangents = frames.tangents,\n\t\tnormals = frames.normals,\n\t\tbinormals = frames.binormals;\n\n\t// proxy internals\n\tthis.tangents = tangents;\n\tthis.normals = normals;\n\tthis.binormals = binormals;\n\n\tfunction vert( x, y, z ) {\n\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\n\n\t}\n\n\t// construct the grid\n\n\tfor ( i = 0; i < numpoints; i ++ ) {\n\n\t\tgrid[ i ] = [];\n\n\t\tu = i / ( numpoints - 1 );\n\n\t\tpos = path.getPointAt( u );\n\n\t\ttangent = tangents[ i ];\n\t\tnormal = normals[ i ];\n\t\tbinormal = binormals[ i ];\n\n\t\tr = radius * taper( u );\n\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\n\n\t\t\tv = j / radialSegments * 2 * Math.PI;\n\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\n\t\t\tcy = r * Math.sin( v );\n\n\t\t\tpos2.copy( pos );\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\n\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\n\n\t\t}\n\n\t}\n\n\n\t// construct the mesh\n\n\tfor ( i = 0; i < segments; i ++ ) {\n\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\n\n\t\t\tip = ( closed ) ? ( i + 1 ) % segments : i + 1;\n\t\t\tjp = ( j + 1 ) % radialSegments;\n\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\n\t\t\tb = grid[ ip ][ j ];\n\t\t\tc = grid[ ip ][ jp ];\n\t\t\td = grid[ i ][ jp ];\n\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\n\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\n\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\n\t}\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\n\nTHREE.TubeGeometry.NoTaper = function ( u ) {\n\n\treturn 1;\n\n};\n\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\n\n\treturn Math.sin( Math.PI * u );\n\n};\n\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\n\n\tvar\tnormal = new THREE.Vector3(),\n\n\t\ttangents = [],\n\t\tnormals = [],\n\t\tbinormals = [],\n\n\t\tvec = new THREE.Vector3(),\n\t\tmat = new THREE.Matrix4(),\n\n\t\tnumpoints = segments + 1,\n\t\ttheta,\n\t\tsmallest,\n\n\t\ttx, ty, tz,\n\t\ti, u;\n\n\n\t// expose internals\n\tthis.tangents = tangents;\n\tthis.normals = normals;\n\tthis.binormals = binormals;\n\n\t// compute the tangent vectors for each segment on the path\n\n\tfor ( i = 0; i < numpoints; i ++ ) {\n\n\t\tu = i / ( numpoints - 1 );\n\n\t\ttangents[ i ] = path.getTangentAt( u );\n\t\ttangents[ i ].normalize();\n\n\t}\n\n\tinitialNormal3();\n\n\t/*\n\tfunction initialNormal1(lastBinormal) {\n\t\t// fixed start binormal. Has dangers of 0 vectors\n\t\tnormals[ 0 ] = new THREE.Vector3();\n\t\tbinormals[ 0 ] = new THREE.Vector3();\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\n\t}\n\n\tfunction initialNormal2() {\n\n\t\t// This uses the Frenet-Serret formula for deriving binormal\n\t\tvar t2 = path.getTangentAt( epsilon );\n\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\n\n\t}\n\t*/\n\n\tfunction initialNormal3() {\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the smallest tangent xyz component\n\n\t\tnormals[ 0 ] = new THREE.Vector3();\n\t\tbinormals[ 0 ] = new THREE.Vector3();\n\t\tsmallest = Number.MAX_VALUE;\n\t\ttx = Math.abs( tangents[ 0 ].x );\n\t\tty = Math.abs( tangents[ 0 ].y );\n\t\ttz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= smallest ) {\n\n\t\t\tsmallest = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= smallest ) {\n\n\t\t\tsmallest = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= smallest ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\t}\n\n\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\n\n\tfor ( i = 1; i < numpoints; i ++ ) {\n\n\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\tvec.normalize();\n\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t}\n\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t}\n\n\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\tif ( closed ) {\n\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints - 1 ] ), - 1, 1 ) );\n\t\ttheta /= ( numpoints - 1 );\n\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints - 1 ] ) ) > 0 ) {\n\n\t\t\ttheta = - theta;\n\n\t\t}\n\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\n\n\t\t\t// twist a little...\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t}\n\n};\n\n// File:src/extras/geometries/PolyhedronGeometry.js\n\n/**\n * @author clockworkgeek / https://github.com/clockworkgeek\n * @author timothypratley / https://github.com/timothypratley\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'PolyhedronGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tradius = radius || 1;\n\tdetail = detail || 0;\n\n\tvar that = this;\n\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\n\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\n\n\t}\n\n\tvar p = this.vertices;\n\n\tvar faces = [];\n\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\n\n\t\tvar v1 = p[ indices[ i ] ];\n\t\tvar v2 = p[ indices[ i + 1 ] ];\n\t\tvar v3 = p[ indices[ i + 2 ] ];\n\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n\n\t}\n\n\tvar centroid = new THREE.Vector3();\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tsubdivide( faces[ i ], detail );\n\n\t}\n\n\n\t// Handle case when face straddles the seam\n\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\n\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\tvar x0 = uvs[ 0 ].x;\n\t\tvar x1 = uvs[ 1 ].x;\n\t\tvar x2 = uvs[ 2 ].x;\n\n\t\tvar max = Math.max( x0, x1, x2 );\n\t\tvar min = Math.min( x0, x1, x2 );\n\n\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\n\n\t\t}\n\n\t}\n\n\n\t// Apply radius\n\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\tthis.vertices[ i ].multiplyScalar( radius );\n\n\t}\n\n\n\t// Merge vertices\n\n\tthis.mergeVertices();\n\n\tthis.computeFaceNormals();\n\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\n\n\n\t// Project vector onto sphere's surface\n\n\tfunction prepare( vector ) {\n\n\t\tvar vertex = vector.normalize().clone();\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\n\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\n\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\n\n\t\treturn vertex;\n\n\t}\n\n\n\t// Approximate a curved face with recursively sub-divided triangles.\n\n\tfunction make( v1, v2, v3 ) {\n\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ] );\n\t\tthat.faces.push( face );\n\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\n\n\t\tvar azi = azimuth( centroid );\n\n\t\tthat.faceVertexUvs[ 0 ].push( [\n\t\t\tcorrectUV( v1.uv, v1, azi ),\n\t\t\tcorrectUV( v2.uv, v2, azi ),\n\t\t\tcorrectUV( v3.uv, v3, azi )\n\t\t] );\n\n\t}\n\n\n\t// Analytically subdivide a face to the required detail level.\n\n\tfunction subdivide( face, detail ) {\n\n\t\tvar cols = Math.pow( 2, detail );\n\t\tvar a = prepare( that.vertices[ face.a ] );\n\t\tvar b = prepare( that.vertices[ face.b ] );\n\t\tvar c = prepare( that.vertices[ face.c ] );\n\t\tvar v = [];\n\n\t\t// Construct all of the vertices for this subdivision.\n\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\n\n\t\t\tv[ i ] = [];\n\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\n\t\t\tvar rows = cols - i;\n\n\t\t\tfor ( var j = 0; j <= rows; j ++ ) {\n\n\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Construct all of the faces.\n\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\n\n\t\t\tfor ( var j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\tvar k = Math.floor( j / 2 );\n\n\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\tmake(\n\t\t\t\t\t\tv[ i ][ k + 1 ],\n\t\t\t\t\t\tv[ i + 1 ][ k ],\n\t\t\t\t\t\tv[ i ][ k ]\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tmake(\n\t\t\t\t\t\tv[ i ][ k + 1 ],\n\t\t\t\t\t\tv[ i + 1 ][ k + 1 ],\n\t\t\t\t\t\tv[ i + 1 ][ k ]\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\tfunction azimuth( vector ) {\n\n\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t}\n\n\n\t// Angle above the XZ plane.\n\n\tfunction inclination( vector ) {\n\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t}\n\n\n\t// Texture fixing helper. Spheres have some odd behaviours.\n\n\tfunction correctUV( uv, vector, azimuth ) {\n\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\n\t\treturn uv.clone();\n\n\t}\n\n\n};\n\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\n\n// File:src/extras/geometries/DodecahedronGeometry.js\n\n/**\n * @author Abe Pazos / https://hamoid.com\n */\n\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\tvar r = 1 / t;\n\n\tvar vertices = [\n\n\t\t// (±1, ±1, ±1)\n\t\t- 1, - 1, - 1,    - 1, - 1,  1,\n\t\t- 1,  1, - 1,    - 1,  1,  1,\n\t\t 1, - 1, - 1,     1, - 1,  1,\n\t\t 1,  1, - 1,     1,  1,  1,\n\n\t\t// (0, ±1/φ, ±φ)\n\t\t 0, - r, - t,     0, - r,  t,\n\t\t 0,  r, - t,     0,  r,  t,\n\n\t\t// (±1/φ, ±φ, 0)\n\t\t- r, - t,  0,    - r,  t,  0,\n\t\t r, - t,  0,     r,  t,  0,\n\n\t\t// (±φ, 0, ±1/φ)\n\t\t- t,  0, - r,     t,  0, - r,\n\t\t- t,  0,  r,     t,  0,  r\n\t];\n\n\tvar indices = [\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'DodecahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n};\n\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\n\n// File:src/extras/geometries/IcosahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\tvar vertices = [\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\n\t];\n\n\tvar indices = [\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'IcosahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n};\n\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\n\n// File:src/extras/geometries/OctahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.OctahedronGeometry = function ( radius, detail ) {\n\n\tvar vertices = [\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\n\t];\n\n\tvar indices = [\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'OctahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n};\n\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\n\n// File:src/extras/geometries/TetrahedronGeometry.js\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n */\n\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\n\n\tvar vertices = [\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\n\t];\n\n\tvar indices = [\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\n\t];\n\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'TetrahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n};\n\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\n\n// File:src/extras/geometries/ParametricGeometry.js\n\n/**\n * @author zz85 / https://github.com/zz85\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\n *\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\n *\n */\n\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\n\n\tTHREE.Geometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tvar verts = this.vertices;\n\tvar faces = this.faces;\n\tvar uvs = this.faceVertexUvs[ 0 ];\n\n\tvar i, j, p;\n\tvar u, v;\n\n\tvar sliceCount = slices + 1;\n\n\tfor ( i = 0; i <= stacks; i ++ ) {\n\n\t\tv = i / stacks;\n\n\t\tfor ( j = 0; j <= slices; j ++ ) {\n\n\t\t\tu = j / slices;\n\n\t\t\tp = func( u, v );\n\t\t\tverts.push( p );\n\n\t\t}\n\n\t}\n\n\tvar a, b, c, d;\n\tvar uva, uvb, uvc, uvd;\n\n\tfor ( i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( j = 0; j < slices; j ++ ) {\n\n\t\t\ta = i * sliceCount + j;\n\t\t\tb = i * sliceCount + j + 1;\n\t\t\tc = ( i + 1 ) * sliceCount + j + 1;\n\t\t\td = ( i + 1 ) * sliceCount + j;\n\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\n\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\n\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\n\n\t\t}\n\n\t}\n\n\t// console.log(this);\n\n\t// magic bullet\n\t// var diff = this.mergeVertices();\n\t// console.log('removed ', diff, ' vertices by merging');\n\n\tthis.computeFaceNormals();\n\tthis.computeVertexNormals();\n\n};\n\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\n\n// File:src/extras/geometries/WireframeGeometry.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.WireframeGeometry = function ( geometry ) {\n\n\tTHREE.BufferGeometry.call( this );\n\n\tvar edge = [ 0, 0 ], hash = {};\n\n\tfunction sortFunction( a, b ) {\n\n\t\treturn a - b;\n\n\t}\n\n\tvar keys = [ 'a', 'b', 'c' ];\n\n\tif ( geometry instanceof THREE.Geometry ) {\n\n\t\tvar vertices = geometry.vertices;\n\t\tvar faces = geometry.faces;\n\t\tvar numEdges = 0;\n\n\t\t// allocate maximal size\n\t\tvar edges = new Uint32Array( 6 * faces.length );\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge.sort( sortFunction );\n\n\t\t\t\tvar key = edge.toString();\n\n\t\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\n\t\t\t\t\thash[ key ] = true;\n\t\t\t\t\tnumEdges ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\n\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\n\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j ] ];\n\n\t\t\t\tvar index = 6 * i + 3 * j;\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t} else if ( geometry instanceof THREE.BufferGeometry ) {\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\t// Indexed BufferGeometry\n\n\t\t\tvar indices = geometry.index.array;\n\t\t\tvar vertices = geometry.attributes.position;\n\t\t\tvar groups = geometry.groups;\n\t\t\tvar numEdges = 0;\n\n\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\tgeometry.addGroup( 0, indices.length );\n\n\t\t\t}\n\n\t\t\t// allocate maximal size\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\n\n\t\t\tfor ( var o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\tvar group = groups[ o ];\n\n\t\t\t\tvar start = group.start;\n\t\t\t\tvar count = group.count;\n\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\n\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\tedge[ 0 ] = indices[ i + j ];\n\t\t\t\t\t\tedge[ 1 ] = indices[ i + ( j + 1 ) % 3 ];\n\t\t\t\t\t\tedge.sort( sortFunction );\n\n\t\t\t\t\t\tvar key = edge.toString();\n\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\n\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\n\t\t\t\t\t\t\thash[ key ] = true;\n\t\t\t\t\t\t\tnumEdges ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\n\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\n\n\t\t\t\t\tvar index = 6 * i + 3 * j;\n\t\t\t\t\tvar index2 = edges[ 2 * i + j ];\n\n\t\t\t\t\tcoords[ index + 0 ] = vertices.getX( index2 );\n\t\t\t\t\tcoords[ index + 1 ] = vertices.getY( index2 );\n\t\t\t\t\tcoords[ index + 2 ] = vertices.getZ( index2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t\t} else {\n\n\t\t\t// non-indexed BufferGeometry\n\n\t\t\tvar vertices = geometry.attributes.position.array;\n\t\t\tvar numEdges = vertices.length / 3;\n\t\t\tvar numTris = numEdges / 3;\n\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\n\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\n\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\tvar index = 18 * i + 6 * j;\n\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\n\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.WireframeGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\nTHREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry;\n\n// File:src/extras/helpers/AxisHelper.js\n\n/**\n * @author sroucheray / http://sroucheray.org/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.AxisHelper = function ( size ) {\n\n\tsize = size || 1;\n\n\tvar vertices = new Float32Array( [\n\t\t0, 0, 0,  size, 0, 0,\n\t\t0, 0, 0,  0, size, 0,\n\t\t0, 0, 0,  0, 0, size\n\t] );\n\n\tvar colors = new Float32Array( [\n\t\t1, 0, 0,  1, 0.6, 0,\n\t\t0, 1, 0,  0.6, 1, 0,\n\t\t0, 0, 1,  0, 0.6, 1\n\t] );\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\n\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\n\n\tTHREE.LineSegments.call( this, geometry, material );\n\n};\n\nTHREE.AxisHelper.prototype = Object.create( THREE.LineSegments.prototype );\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\n\n// File:src/extras/helpers/ArrowHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @author zz85 / http://github.com/zz85\n * @author bhouston / http://clara.io\n *\n * Creates an arrow for visualizing directions\n *\n * Parameters:\n *  dir - Vector3\n *  origin - Vector3\n *  length - Number\n *  color - color in hex value\n *  headLength - Number\n *  headWidth - Number\n */\n\nTHREE.ArrowHelper = ( function () {\n\n\tvar lineGeometry = new THREE.BufferGeometry();\n\tlineGeometry.addAttribute( 'position', new THREE.Float32Attribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\tvar coneGeometry = new THREE.CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\n\tconeGeometry.translate( 0, - 0.5, 0 );\n\n\treturn function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tTHREE.Object3D.call( this );\n\n\t\tif ( color === undefined ) color = 0xffff00;\n\t\tif ( length === undefined ) length = 1;\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t};\n\n}() );\n\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\n\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\n\n\tvar axis = new THREE.Vector3();\n\tvar radians;\n\n\treturn function setDirection( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tradians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\n\n\t\t}\n\n\t};\n\n}() );\n\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\n\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tthis.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\n\tthis.line.updateMatrix();\n\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\tthis.cone.position.y = length;\n\tthis.cone.updateMatrix();\n\n};\n\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\n\n\tthis.line.material.color.copy( color );\n\tthis.cone.material.color.copy( color );\n\n};\n\n// File:src/extras/helpers/BoxHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.BoxHelper = function ( object, color ) {\n\n\tif ( color === undefined ) color = 0xffff00;\n\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\tvar positions = new Float32Array( 8 * 3 );\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color } ) );\n\n\tif ( object !== undefined ) {\n\n\t\tthis.update( object );\n\n\t}\n\n};\n\nTHREE.BoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\n\nTHREE.BoxHelper.prototype.update = ( function () {\n\n\tvar box = new THREE.Box3();\n\n\treturn function update( object ) {\n\n\t\tif ( object instanceof THREE.Box3 ) {\n\n\t\t\tbox.copy( object );\n\n\t\t} else {\n\n\t\t\tbox.setFromObject( object );\n\n\t\t}\n\n\t\tif ( box.isEmpty() ) return;\n\n\t\tvar min = box.min;\n\t\tvar max = box.max;\n\n\t\t/*\n\t\t  5____4\n\t\t1/___0/|\n\t\t| 6__|_7\n\t\t2/___3/\n\n\t\t0: max.x, max.y, max.z\n\t\t1: min.x, max.y, max.z\n\t\t2: min.x, min.y, max.z\n\t\t3: max.x, min.y, max.z\n\t\t4: max.x, max.y, min.z\n\t\t5: min.x, max.y, min.z\n\t\t6: min.x, min.y, min.z\n\t\t7: max.x, min.y, min.z\n\t\t*/\n\n\t\tvar position = this.geometry.attributes.position;\n\t\tvar array = position.array;\n\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\tposition.needsUpdate = true;\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t};\n\n} )();\n\n// File:src/extras/helpers/BoundingBoxHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\n// a helper to show the world-axis-aligned bounding box for an object\n\nTHREE.BoundingBoxHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\n\n\tthis.object = object;\n\n\tthis.box = new THREE.Box3();\n\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\n\n};\n\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\n\nTHREE.BoundingBoxHelper.prototype.update = function () {\n\n\tthis.box.setFromObject( this.object );\n\n\tthis.box.size( this.scale );\n\n\tthis.box.center( this.position );\n\n};\n\n// File:src/extras/helpers/CameraHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\n */\n\nTHREE.CameraHelper = function ( camera ) {\n\n\tvar geometry = new THREE.Geometry();\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\n\n\tvar pointMap = {};\n\n\t// colors\n\n\tvar hexFrustum = 0xffaa00;\n\tvar hexCone = 0xff0000;\n\tvar hexUp = 0x00aaff;\n\tvar hexTarget = 0xffffff;\n\tvar hexCross = 0x333333;\n\n\t// near\n\n\taddLine( \"n1\", \"n2\", hexFrustum );\n\taddLine( \"n2\", \"n4\", hexFrustum );\n\taddLine( \"n4\", \"n3\", hexFrustum );\n\taddLine( \"n3\", \"n1\", hexFrustum );\n\n\t// far\n\n\taddLine( \"f1\", \"f2\", hexFrustum );\n\taddLine( \"f2\", \"f4\", hexFrustum );\n\taddLine( \"f4\", \"f3\", hexFrustum );\n\taddLine( \"f3\", \"f1\", hexFrustum );\n\n\t// sides\n\n\taddLine( \"n1\", \"f1\", hexFrustum );\n\taddLine( \"n2\", \"f2\", hexFrustum );\n\taddLine( \"n3\", \"f3\", hexFrustum );\n\taddLine( \"n4\", \"f4\", hexFrustum );\n\n\t// cone\n\n\taddLine( \"p\", \"n1\", hexCone );\n\taddLine( \"p\", \"n2\", hexCone );\n\taddLine( \"p\", \"n3\", hexCone );\n\taddLine( \"p\", \"n4\", hexCone );\n\n\t// up\n\n\taddLine( \"u1\", \"u2\", hexUp );\n\taddLine( \"u2\", \"u3\", hexUp );\n\taddLine( \"u3\", \"u1\", hexUp );\n\n\t// target\n\n\taddLine( \"c\", \"t\", hexTarget );\n\taddLine( \"p\", \"c\", hexCross );\n\n\t// cross\n\n\taddLine( \"cn1\", \"cn2\", hexCross );\n\taddLine( \"cn3\", \"cn4\", hexCross );\n\n\taddLine( \"cf1\", \"cf2\", hexCross );\n\taddLine( \"cf3\", \"cf4\", hexCross );\n\n\tfunction addLine( a, b, hex ) {\n\n\t\taddPoint( a, hex );\n\t\taddPoint( b, hex );\n\n\t}\n\n\tfunction addPoint( id, hex ) {\n\n\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\n\n\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\tpointMap[ id ] = [];\n\n\t\t}\n\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\n\n\t}\n\n\tTHREE.LineSegments.call( this, geometry, material );\n\n\tthis.camera = camera;\n\tif( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\tthis.matrix = camera.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.pointMap = pointMap;\n\n\tthis.update();\n\n};\n\nTHREE.CameraHelper.prototype = Object.create( THREE.LineSegments.prototype );\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\n\nTHREE.CameraHelper.prototype.update = function () {\n\n\tvar geometry, pointMap;\n\n\tvar vector = new THREE.Vector3();\n\tvar camera = new THREE.Camera();\n\n\tfunction setPoint( point, x, y, z ) {\n\n\t\tvector.set( x, y, z ).unproject( camera );\n\n\t\tvar points = pointMap[ point ];\n\n\t\tif ( points !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn function update() {\n\n\t\tgeometry = this.geometry;\n\t\tpointMap = this.pointMap;\n\n\t\tvar w = 1, h = 1;\n\n\t\t// we need just camera projection matrix\n\t\t// world matrix must be identity\n\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\n\n\t\t// center / target\n\n\t\tsetPoint( \"c\", 0, 0, - 1 );\n\t\tsetPoint( \"t\", 0, 0,  1 );\n\n\t\t// near\n\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( \"f1\", - w, - h, 1 );\n\t\tsetPoint( \"f2\",   w, - h, 1 );\n\t\tsetPoint( \"f3\", - w,   h, 1 );\n\t\tsetPoint( \"f4\",   w,   h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\n\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\n\n\t\tgeometry.verticesNeedUpdate = true;\n\n\t};\n\n}();\n\n// File:src/extras/helpers/DirectionalLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nTHREE.DirectionalLightHelper = function ( light, size ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tif ( size === undefined ) size = 1;\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( [\n\t\t- size,   size, 0,\n\t\t  size,   size, 0,\n\t\t  size, - size, 0,\n\t\t- size, - size, 0,\n\t\t- size,   size, 0\n\t], 3 ) );\n\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\n\n\tthis.add( new THREE.Line( geometry, material ) );\n\n\tgeometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\n\n\tthis.add( new THREE.Line( geometry, material ));\n\n\tthis.update();\n\n};\n\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\n\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\n\n\tvar lightPlane = this.children[ 0 ];\n\tvar targetLine = this.children[ 1 ];\n\n\tlightPlane.geometry.dispose();\n\tlightPlane.material.dispose();\n\ttargetLine.geometry.dispose();\n\ttargetLine.material.dispose();\n\n};\n\nTHREE.DirectionalLightHelper.prototype.update = function () {\n\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\tvar v3 = new THREE.Vector3();\n\n\treturn function update() {\n\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\tv3.subVectors( v2, v1 );\n\n\t\tvar lightPlane = this.children[ 0 ];\n\t\tvar targetLine = this.children[ 1 ];\n\n\t\tlightPlane.lookAt( v3 );\n\t\tlightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t\ttargetLine.lookAt( v3 );\n\t\ttargetLine.scale.z = v3.length();\n\n\t};\n\n}();\n\n// File:src/extras/helpers/EdgesHelper.js\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @param object THREE.Mesh whose geometry will be used\n * @param hex line color\n * @param thresholdAngle the minimum angle (in degrees),\n * between the face normals of adjacent faces,\n * that is required to render an edge. A value of 10 means\n * an edge is only rendered if the angle is at least 10 degrees.\n */\n\nTHREE.EdgesHelper = function ( object, hex, thresholdAngle ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\n\n\tTHREE.LineSegments.call( this, new THREE.EdgesGeometry( object.geometry, thresholdAngle ), new THREE.LineBasicMaterial( { color: color } ) );\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\nTHREE.EdgesHelper.prototype = Object.create( THREE.LineSegments.prototype );\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\n\n// File:src/extras/helpers/FaceNormalsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\n\n\t// FaceNormalsHelper only supports THREE.Geometry\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\t//\n\n\tvar nNormals = 0;\n\n\tvar objGeometry = this.object.geometry;\n\n\tif ( objGeometry instanceof THREE.Geometry ) {\n\n\t\tnNormals = objGeometry.faces.length;\n\n\t} else {\n\n\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\n\n\t}\n\n\t//\n\n\tvar geometry = new THREE.BufferGeometry();\n\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\n\n\tgeometry.addAttribute( 'position', positions );\n\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\n\n\t//\n\n\tthis.matrixAutoUpdate = false;\n\tthis.update();\n\n};\n\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\n\nTHREE.FaceNormalsHelper.prototype.update = ( function () {\n\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\tvar normalMatrix = new THREE.Matrix3();\n\n\treturn function update() {\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\n\n\t\tvar matrixWorld = this.object.matrixWorld;\n\n\t\tvar position = this.geometry.attributes.position;\n\n\t\t//\n\n\t\tvar objGeometry = this.object.geometry;\n\n\t\tvar vertices = objGeometry.vertices;\n\n\t\tvar faces = objGeometry.faces;\n\n\t\tvar idx = 0;\n\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tvar normal = face.normal;\n\n\t\t\tv1.copy( vertices[ face.a ] )\n\t\t\t\t.add( vertices[ face.b ] )\n\t\t\t\t.add( vertices[ face.c ] )\n\t\t\t\t.divideScalar( 3 )\n\t\t\t\t.applyMatrix4( matrixWorld );\n\n\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\n\n\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\n\n\t\t\tidx = idx + 1;\n\n\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\n\n\t\t\tidx = idx + 1;\n\n\t\t}\n\n\t\tposition.needsUpdate = true;\n\n\t\treturn this;\n\n\t};\n\n}() );\n\n// File:src/extras/helpers/GridHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.GridHelper = function ( size, step, color1, color2 ) {\n\n\tcolor1 = new THREE.Color( color1 !== undefined ? color1 : 0x444444 );\n\tcolor2 = new THREE.Color( color2 !== undefined ? color2 : 0x888888 );\n\n\tvar vertices = [];\n\tvar colors = [];\n\n\tfor ( var i = - size, j = 0; i <= size; i += step ) {\n\n\t\tvertices.push( - size, 0, i, size, 0, i );\n\t\tvertices.push( i, 0, - size, i, 0, size );\n\n\t\tvar color = i === 0 ? color1 : color2;\n\n\t\tcolor.toArray( colors, j ); j += 3;\n\t\tcolor.toArray( colors, j ); j += 3;\n\t\tcolor.toArray( colors, j ); j += 3;\n\t\tcolor.toArray( colors, j ); j += 3;\n\n\t}\n\n\tvar geometry = new THREE.BufferGeometry();\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( vertices, 3 ) );\n\tgeometry.addAttribute( 'color', new THREE.Float32Attribute( colors, 3 ) );\n\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\n\n\tTHREE.LineSegments.call( this, geometry, material );\n\n};\n\nTHREE.GridHelper.prototype = Object.create( THREE.LineSegments.prototype );\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\n\nTHREE.GridHelper.prototype.setColors = function () {\n\n\tconsole.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\n\n};\n\n// File:src/extras/helpers/HemisphereLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.HemisphereLightHelper = function ( light, sphereSize ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\n\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\n\tgeometry.rotateX( - Math.PI / 2 );\n\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\n\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\n\n\t}\n\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\n\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\n\tthis.add( this.lightSphere );\n\n\tthis.update();\n\n};\n\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\n\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\n\n\tthis.lightSphere.geometry.dispose();\n\tthis.lightSphere.material.dispose();\n\n};\n\nTHREE.HemisphereLightHelper.prototype.update = function () {\n\n\tvar vector = new THREE.Vector3();\n\n\treturn function update() {\n\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\n\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\n\n\t};\n\n}();\n\n// File:src/extras/helpers/PointLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.PointLightHelper = function ( light, sphereSize ) {\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tvar geometry = new THREE.SphereBufferGeometry( sphereSize, 4, 2 );\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.matrix = this.light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\t/*\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tvar d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n};\n\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\n\nTHREE.PointLightHelper.prototype.dispose = function () {\n\n\tthis.geometry.dispose();\n\tthis.material.dispose();\n\n};\n\nTHREE.PointLightHelper.prototype.update = function () {\n\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t/*\n\tvar d = this.light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.visible = true;\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\t*/\n\n};\n\n// File:src/extras/helpers/SkeletonHelper.js\n\n/**\n * @author Sean Griffin / http://twitter.com/sgrif\n * @author Michael Guerrero / http://realitymeltdown.com\n * @author mrdoob / http://mrdoob.com/\n * @author ikerr / http://verold.com\n */\n\nTHREE.SkeletonHelper = function ( object ) {\n\n\tthis.bones = this.getBoneList( object );\n\n\tvar geometry = new THREE.Geometry();\n\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\n\n\t\tvar bone = this.bones[ i ];\n\n\t\tif ( bone.parent instanceof THREE.Bone ) {\n\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\n\n\t\t}\n\n\t}\n\n\tgeometry.dynamic = true;\n\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\n\n\tTHREE.LineSegments.call( this, geometry, material );\n\n\tthis.root = object;\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n};\n\n\nTHREE.SkeletonHelper.prototype = Object.create( THREE.LineSegments.prototype );\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\n\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\n\n\tvar boneList = [];\n\n\tif ( object instanceof THREE.Bone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n};\n\nTHREE.SkeletonHelper.prototype.update = function () {\n\n\tvar geometry = this.geometry;\n\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\n\n\tvar boneMatrix = new THREE.Matrix4();\n\n\tvar j = 0;\n\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\n\n\t\tvar bone = this.bones[ i ];\n\n\t\tif ( bone.parent instanceof THREE.Bone ) {\n\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\n\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\n\n\t\t\tj += 2;\n\n\t\t}\n\n\t}\n\n\tgeometry.verticesNeedUpdate = true;\n\n\tgeometry.computeBoundingSphere();\n\n};\n\n// File:src/extras/helpers/SpotLightHelper.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.SpotLightHelper = function ( light ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tvar geometry = new THREE.BufferGeometry();\n\n\tvar positions = [\n\t\t0, 0, 0,   0,   0,   1,\n\t\t0, 0, 0,   1,   0,   1,\n\t\t0, 0, 0, - 1,   0,   1,\n\t\t0, 0, 0,   0,   1,   1,\n\t\t0, 0, 0,   0, - 1,   1\n\t];\n\n\tfor ( var i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\n\n\t\tvar p1 = ( i / l ) * Math.PI * 2;\n\t\tvar p2 = ( j / l ) * Math.PI * 2;\n\n\t\tpositions.push(\n\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\n\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\n\t\t);\n\n\t}\n\n\tgeometry.addAttribute( 'position', new THREE.Float32Attribute( positions, 3 ) );\n\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\n\n\tthis.cone = new THREE.LineSegments( geometry, material );\n\tthis.add( this.cone );\n\n\tthis.update();\n\n};\n\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\n\nTHREE.SpotLightHelper.prototype.dispose = function () {\n\n\tthis.cone.geometry.dispose();\n\tthis.cone.material.dispose();\n\n};\n\nTHREE.SpotLightHelper.prototype.update = function () {\n\n\tvar vector = new THREE.Vector3();\n\tvar vector2 = new THREE.Vector3();\n\n\treturn function update() {\n\n\t\tvar coneLength = this.light.distance ? this.light.distance : 1000;\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\n\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\n\n\t};\n\n}();\n\n// File:src/extras/helpers/VertexNormalsHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\n\n\tthis.object = object;\n\n\tthis.size = ( size !== undefined ) ? size : 1;\n\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\n\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\n\n\t//\n\n\tvar nNormals = 0;\n\n\tvar objGeometry = this.object.geometry;\n\n\tif ( objGeometry instanceof THREE.Geometry ) {\n\n\t\tnNormals = objGeometry.faces.length * 3;\n\n\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\n\n\t\tnNormals = objGeometry.attributes.normal.count;\n\n\t}\n\n\t//\n\n\tvar geometry = new THREE.BufferGeometry();\n\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\n\n\tgeometry.addAttribute( 'position', positions );\n\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\n\n\t//\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n};\n\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\n\nTHREE.VertexNormalsHelper.prototype.update = ( function () {\n\n\tvar v1 = new THREE.Vector3();\n\tvar v2 = new THREE.Vector3();\n\tvar normalMatrix = new THREE.Matrix3();\n\n\treturn function update() {\n\n\t\tvar keys = [ 'a', 'b', 'c' ];\n\n\t\tthis.object.updateMatrixWorld( true );\n\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\n\n\t\tvar matrixWorld = this.object.matrixWorld;\n\n\t\tvar position = this.geometry.attributes.position;\n\n\t\t//\n\n\t\tvar objGeometry = this.object.geometry;\n\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\n\n\t\t\tvar vertices = objGeometry.vertices;\n\n\t\t\tvar faces = objGeometry.faces;\n\n\t\t\tvar idx = 0;\n\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tvar face = faces[ i ];\n\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\n\n\t\t\t\t\tvar normal = face.vertexNormals[ j ];\n\n\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\n\n\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\n\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\n\n\t\t\t\t\tidx = idx + 1;\n\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\n\n\t\t\t\t\tidx = idx + 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\n\n\t\t\tvar objPos = objGeometry.attributes.position;\n\n\t\t\tvar objNorm = objGeometry.attributes.normal;\n\n\t\t\tvar idx = 0;\n\n\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\n\n\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\n\n\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\n\n\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\n\n\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\n\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\n\n\t\t\t\tidx = idx + 1;\n\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\n\n\t\t\t\tidx = idx + 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tposition.needsUpdate = true;\n\n\t\treturn this;\n\n\t};\n\n}() );\n\n// File:src/extras/helpers/WireframeHelper.js\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.WireframeHelper = function ( object, hex ) {\n\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\n\n\tTHREE.LineSegments.call( this, new THREE.WireframeGeometry( object.geometry ), new THREE.LineBasicMaterial( { color: color } ) );\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n};\n\nTHREE.WireframeHelper.prototype = Object.create( THREE.LineSegments.prototype );\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\n\n// File:src/extras/objects/ImmediateRenderObject.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ImmediateRenderObject = function ( material ) {\n\n\tTHREE.Object3D.call( this );\n\n\tthis.material = material;\n\tthis.render = function ( renderCallback ) {};\n\n};\n\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\n\n// File:src/extras/objects/MorphBlendMesh.js\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.MorphBlendMesh = function( geometry, material ) {\n\n\tTHREE.Mesh.call( this, geometry, material );\n\n\tthis.animationsMap = {};\n\tthis.animationsList = [];\n\n\t// prepare default animation\n\t// (all frames played together in 1 second)\n\n\tvar numFrames = this.geometry.morphTargets.length;\n\n\tvar name = \"__default\";\n\n\tvar startFrame = 0;\n\tvar endFrame = numFrames - 1;\n\n\tvar fps = numFrames / 1;\n\n\tthis.createAnimation( name, startFrame, endFrame, fps );\n\tthis.setAnimationWeight( name, 1 );\n\n};\n\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\n\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\n\n\tvar animation = {\n\n\t\tstart: start,\n\t\tend: end,\n\n\t\tlength: end - start + 1,\n\n\t\tfps: fps,\n\t\tduration: ( end - start ) / fps,\n\n\t\tlastFrame: 0,\n\t\tcurrentFrame: 0,\n\n\t\tactive: false,\n\n\t\ttime: 0,\n\t\tdirection: 1,\n\t\tweight: 1,\n\n\t\tdirectionBackwards: false,\n\t\tmirroredLoop: false\n\n\t};\n\n\tthis.animationsMap[ name ] = animation;\n\tthis.animationsList.push( animation );\n\n};\n\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\n\n\tvar pattern = /([a-z]+)_?(\\d+)/i;\n\n\tvar firstAnimation, frameRanges = {};\n\n\tvar geometry = this.geometry;\n\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\n\n\t\tvar morph = geometry.morphTargets[ i ];\n\t\tvar chunks = morph.name.match( pattern );\n\n\t\tif ( chunks && chunks.length > 1 ) {\n\n\t\t\tvar name = chunks[ 1 ];\n\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\n\n\t\t\tvar range = frameRanges[ name ];\n\n\t\t\tif ( i < range.start ) range.start = i;\n\t\t\tif ( i > range.end ) range.end = i;\n\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\n\n\t\t}\n\n\t}\n\n\tfor ( var name in frameRanges ) {\n\n\t\tvar range = frameRanges[ name ];\n\t\tthis.createAnimation( name, range.start, range.end, fps );\n\n\t}\n\n\tthis.firstAnimation = firstAnimation;\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.direction = 1;\n\t\tanimation.directionBackwards = false;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.direction = - 1;\n\t\tanimation.directionBackwards = true;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.fps = fps;\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.duration = duration;\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.weight = weight;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.time = time;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\n\n\tvar time = 0;\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\ttime = animation.time;\n\n\t}\n\n\treturn time;\n\n};\n\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\n\n\tvar duration = - 1;\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tduration = animation.duration;\n\n\t}\n\n\treturn duration;\n\n};\n\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.time = 0;\n\t\tanimation.active = true;\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\n\n\tvar animation = this.animationsMap[ name ];\n\n\tif ( animation ) {\n\n\t\tanimation.active = false;\n\n\t}\n\n};\n\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\n\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\n\n\t\tvar animation = this.animationsList[ i ];\n\n\t\tif ( ! animation.active ) continue;\n\n\t\tvar frameTime = animation.duration / animation.length;\n\n\t\tanimation.time += animation.direction * delta;\n\n\t\tif ( animation.mirroredLoop ) {\n\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\n\n\t\t\t\tanimation.direction *= - 1;\n\n\t\t\t\tif ( animation.time > animation.duration ) {\n\n\t\t\t\t\tanimation.time = animation.duration;\n\t\t\t\t\tanimation.directionBackwards = true;\n\n\t\t\t\t}\n\n\t\t\t\tif ( animation.time < 0 ) {\n\n\t\t\t\t\tanimation.time = 0;\n\t\t\t\t\tanimation.directionBackwards = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tanimation.time = animation.time % animation.duration;\n\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\n\n\t\t}\n\n\t\tvar keyframe = animation.start + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\n\t\tvar weight = animation.weight;\n\n\t\tif ( keyframe !== animation.currentFrame ) {\n\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\n\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\n\n\t\t\tanimation.lastFrame = animation.currentFrame;\n\t\t\tanimation.currentFrame = keyframe;\n\n\t\t}\n\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\n\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\n\n\t\tif ( animation.currentFrame !== animation.lastFrame ) {\n\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\n\n\t\t} else {\n\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\n\n\t\t}\n\n\t}\n\n};\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./vendor/three.js\n ** module id = 62\n ** module chunks = 0 1\n **/","!function(e,r){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=r();else if(\"function\"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)(\"object\"==typeof exports?exports:e)[n]=t[n]}}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p=\"\",r(0)}([function(e,r,t){e.exports=t(1)},function(e,r,t){\"use strict\";function n(){var e=\"undefined\"==typeof JSON?{}:JSON;o.setupJSON(e)}var o=t(2),i=t(3);n();var a=window._rollbarConfig,s=a&&a.globalAlias||\"Rollbar\",u=window[s]&&\"undefined\"!=typeof window[s].shimId;!u&&a?o.wrapper.init(a):(window.Rollbar=o.wrapper,window.RollbarNotifier=i.Notifier),e.exports=o.wrapper},function(e,r,t){\"use strict\";function n(e,r,t){!t[4]&&window._rollbarWrappedError&&(t[4]=window._rollbarWrappedError,window._rollbarWrappedError=null),e.uncaughtError.apply(e,t),r&&r.apply(window,t)}function o(e,r){if(r.hasOwnProperty&&r.hasOwnProperty(\"addEventListener\")){var t=r.addEventListener;r.addEventListener=function(r,n,o){t.call(this,r,e.wrap(n),o)};var n=r.removeEventListener;r.removeEventListener=function(e,r,t){n.call(this,e,r&&r._wrapped||r,t)}}}var i=t(3),a=t(8),s=i.Notifier;window._rollbarWrappedError=null;var u={};u.init=function(e,r){var t=new s(r);if(t.configure(e),e.captureUncaught){var i;r&&a.isType(r._rollbarOldOnError,\"function\")?i=r._rollbarOldOnError:window.onerror&&!window.onerror.belongsToShim&&(i=window.onerror),window.onerror=function(){var e=Array.prototype.slice.call(arguments,0);n(t,i,e)};var u,c,l=[\"EventTarget\",\"Window\",\"Node\",\"ApplicationCache\",\"AudioTrackList\",\"ChannelMergerNode\",\"CryptoOperation\",\"EventSource\",\"FileReader\",\"HTMLUnknownElement\",\"IDBDatabase\",\"IDBRequest\",\"IDBTransaction\",\"KeyOperation\",\"MediaController\",\"MessagePort\",\"ModalWindow\",\"Notification\",\"SVGElementInstance\",\"Screen\",\"TextTrack\",\"TextTrackCue\",\"TextTrackList\",\"WebSocket\",\"WebSocketWorker\",\"Worker\",\"XMLHttpRequest\",\"XMLHttpRequestEventTarget\",\"XMLHttpRequestUpload\"];for(u=0;u<l.length;++u)c=l[u],window[c]&&window[c].prototype&&o(t,window[c].prototype)}return window.Rollbar=t,s.processPayloads(),t},e.exports={wrapper:u,setupJSON:i.setupJSON}},function(e,r,t){\"use strict\";function n(e){b=e,v.setupJSON(e)}function o(e,r){return function(){var t=r||this;try{return e.apply(t,arguments)}catch(n){console.error(\"[Rollbar]:\",n)}}}function i(){d||(d=setTimeout(p,1e3))}function a(){return y}function s(e){y=y||this;var r=\"https://\"+s.DEFAULT_ENDPOINT;this.options={enabled:!0,endpoint:r,environment:\"production\",scrubFields:h([],s.DEFAULT_SCRUB_FIELDS),checkIgnore:null,logLevel:s.DEFAULT_LOG_LEVEL,reportLevel:s.DEFAULT_REPORT_LEVEL,uncaughtErrorLevel:s.DEFAULT_UNCAUGHT_ERROR_LEVEL,payload:{}},this.lastError=null,this.plugins={},this.parentNotifier=e,e&&(e.hasOwnProperty(\"shimId\")?e.notifier=this:this.configure(e.options))}function u(e){return o(function(){var r=this._getLogArgs(arguments);return this._log(e||r.level||this.options.logLevel||s.DEFAULT_LOG_LEVEL,r.message,r.err,r.custom,r.callback)})}function c(e,r){e||(e=r?b.stringify(r):\"\");var t={body:e};return r&&(t.extra=h(!0,{},r)),{message:t}}function l(e,r,t){var n=g.guessErrorClass(r.message),o=r.name||n[0],i=n[1],a={exception:{\"class\":o,message:i}};if(e&&(a.exception.description=e||\"uncaught exception\"),r.stack){var s,u,l,p,f,d,v,w;for(a.frames=[],v=0;v<r.stack.length;++v)s=r.stack[v],u={filename:s.url?m.sanitizeUrl(s.url):\"(unknown)\",lineno:s.line||null,method:s.func&&\"?\"!==s.func?s.func:\"[anonymous]\",colno:s.column},l=p=f=null,d=s.context?s.context.length:0,d&&(w=Math.floor(d/2),p=s.context.slice(0,w),l=s.context[w],f=s.context.slice(w)),l&&(u.code=l),(p||f)&&(u.context={},p&&p.length&&(u.context.pre=p),f&&f.length&&(u.context.post=f)),s.args&&(u.args=s.args),a.frames.push(u);return a.frames.reverse(),t&&(a.extra=h(!0,{},t)),{trace:a}}return c(o+\": \"+i,t)}function p(){var e;try{for(;e=window._rollbarPayloadQueue.shift();)f(e.endpointUrl,e.accessToken,e.payload,e.callback)}finally{d=void 0}}function f(e,r,t,n){n=n||function(){};var o=(new Date).getTime();o-x>=6e4&&(x=o,L=0);var i=window._globalRollbarOptions.maxItems,a=window._globalRollbarOptions.itemsPerMinute,s=function(){return!t.ignoreRateLimit&&i>=1&&_>=i},u=function(){return!t.ignoreRateLimit&&a>=1&&L>=a};return s()?void n(new Error(i+\" max items reached\")):u()?void n(new Error(a+\" items per minute reached\")):(_++,L++,s()&&y._log(y.options.uncaughtErrorLevel,\"maxItems has been hit. Ignoring errors for the remainder of the current page load.\",null,{maxItems:i},null,!1,!0),t.ignoreRateLimit&&delete t.ignoreRateLimit,void w.post(e,r,t,function(e,r){return e?n(e):n(null,r)}))}var d,h=t(4),g=t(5),m=t(8),v=t(10),w=v.XHR,b=null;s.NOTIFIER_VERSION=\"1.8.4\",s.DEFAULT_ENDPOINT=\"api.rollbar.com/api/1/\",s.DEFAULT_SCRUB_FIELDS=[\"pw\",\"pass\",\"passwd\",\"password\",\"secret\",\"confirm_password\",\"confirmPassword\",\"password_confirmation\",\"passwordConfirmation\",\"access_token\",\"accessToken\",\"secret_key\",\"secretKey\",\"secretToken\"],s.DEFAULT_LOG_LEVEL=\"debug\",s.DEFAULT_REPORT_LEVEL=\"debug\",s.DEFAULT_UNCAUGHT_ERROR_LEVEL=\"error\",s.DEFAULT_ITEMS_PER_MIN=60,s.DEFAULT_MAX_ITEMS=0,s.LEVELS={debug:0,info:1,warning:2,error:3,critical:4},window._rollbarPayloadQueue=window._rollbarPayloadQueue||[],window._globalRollbarOptions={startTime:(new Date).getTime(),maxItems:s.DEFAULT_MAX_ITEMS,itemsPerMinute:s.DEFAULT_ITEMS_PER_MIN};var y,E=s.prototype;E._getLogArgs=function(e){for(var r,t,n,i,a,u,c=this.options.logLevel||s.DEFAULT_LOG_LEVEL,l=[],p=0;p<e.length;++p)u=e[p],a=m.typeName(u),\"string\"===a?r?l.push(u):r=u:\"function\"===a?i=o(u,this):\"date\"===a?l.push(u):\"error\"===a||u instanceof Error||\"undefined\"!=typeof DOMException&&u instanceof DOMException?t?l.push(u):t=u:\"object\"===a&&(n?l.push(u):n=u);return l.length&&(n=n||{},n.extraArgs=l),{level:c,message:r,err:t,custom:n,callback:i}},E._route=function(e){var r=this.options.endpoint,t=/\\/$/.test(r),n=/^\\//.test(e);return t&&n?e=e.substring(1):t||n||(e=\"/\"+e),r+e},E._processShimQueue=function(e){for(var r,t,n,o,i,a,u,c={};t=e.shift();)r=t.shim,n=t.method,o=t.args,i=r.parentShim,u=c[r.shimId],u||(i?(a=c[i.shimId],u=new s(a)):u=this,c[r.shimId]=u),u[n]&&m.isType(u[n],\"function\")&&u[n].apply(u,o)},E._buildPayload=function(e,r,t,n,o){var i=this.options.accessToken,a=this.options.environment,u=h(!0,{},this.options.payload),c=m.uuid4();if(void 0===s.LEVELS[r])throw new Error(\"Invalid level\");if(!t&&!n&&!o)throw new Error(\"No message, stack info or custom data\");var l={environment:a,endpoint:this.options.endpoint,uuid:c,level:r,platform:\"browser\",framework:\"browser-js\",language:\"javascript\",body:this._buildBody(t,n,o),request:{url:window.location.href,query_string:window.location.search,user_ip:\"$remote_ip\"},client:{runtime_ms:e.getTime()-window._globalRollbarOptions.startTime,timestamp:Math.round(e.getTime()/1e3),javascript:{browser:window.navigator.userAgent,language:window.navigator.language,cookie_enabled:window.navigator.cookieEnabled,screen:{width:window.screen.width,height:window.screen.height},plugins:this._getBrowserPlugins()}},server:{},notifier:{name:\"rollbar-browser-js\",version:s.NOTIFIER_VERSION}};u.body&&delete u.body;var p={access_token:i,data:h(!0,l,u)};return this._scrub(p.data),p},E._buildBody=function(e,r,t){var n;return n=r?l(e,r,t):c(e,t)},E._getBrowserPlugins=function(){if(!this._browserPlugins){var e,r,t=window.navigator.plugins||[],n=t.length,o=[];for(r=0;n>r;++r)e=t[r],o.push({name:e.name,description:e.description});this._browserPlugins=o}return this._browserPlugins},E._scrub=function(e){function r(e,r,t,n,o,i){return r+m.redact(i)}function t(e){var t;if(m.isType(e,\"string\"))for(t=0;t<s.length;++t)e=e.replace(s[t],r);return e}function n(e,r){var t;for(t=0;t<a.length;++t)if(a[t].test(e)){r=m.redact(r);break}return r}function o(e,r){var o=n(e,r);return o===r?t(o):o}var i=this.options.scrubFields,a=this._getScrubFieldRegexs(i),s=this._getScrubQueryParamRegexs(i);return m.traverse(e,o),e},E._getScrubFieldRegexs=function(e){for(var r,t=[],n=0;n<e.length;++n)r=\"\\\\[?(%5[bB])?\"+e[n]+\"\\\\[?(%5[bB])?\\\\]?(%5[dD])?\",t.push(new RegExp(r,\"i\"));return t},E._getScrubQueryParamRegexs=function(e){for(var r,t=[],n=0;n<e.length;++n)r=\"\\\\[?(%5[bB])?\"+e[n]+\"\\\\[?(%5[bB])?\\\\]?(%5[dD])?\",t.push(new RegExp(\"(\"+r+\"=)([^&\\\\n]+)\",\"igm\"));return t},E._urlIsWhitelisted=function(e){var r,t,n,o,i,a,s,u,c,l;try{if(r=this.options.hostWhiteList,t=e&&e.data&&e.data.body&&e.data.body.trace,!r||0===r.length)return!0;if(!t)return!0;for(s=r.length,i=t.frames.length,c=0;i>c;c++){if(n=t.frames[c],o=n.filename,!m.isType(o,\"string\"))return!0;for(l=0;s>l;l++)if(a=r[l],u=new RegExp(a),u.test(o))return!0}}catch(p){return this.configure({hostWhiteList:null}),console.error(\"[Rollbar]: Error while reading your configuration's hostWhiteList option. Removing custom hostWhiteList.\",p),!0}return!1},E._messageIsIgnored=function(e){var r,t,n,o,i,a,s,u,c;try{if(i=!1,n=this.options.ignoredMessages,!n||0===n.length)return!1;if(s=e&&e.data&&e.data.body,u=s&&s.trace&&s.trace.exception&&s.trace.exception.message,c=s&&s.message&&s.message.body,r=u||c,!r)return!1;for(o=n.length,t=0;o>t&&(a=new RegExp(n[t],\"gi\"),!(i=a.test(r)));t++);}catch(l){this.configure({ignoredMessages:null}),console.error(\"[Rollbar]: Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.\")}return i},E._enqueuePayload=function(e,r,t,n){var o={callback:n,accessToken:this.options.accessToken,endpointUrl:this._route(\"item/\"),payload:e},a=function(){if(n){var e=\"This item was not sent to Rollbar because it was ignored. This can happen if a custom checkIgnore() function was used or if the item's level was less than the notifier' reportLevel. See https://rollbar.com/docs/notifier/rollbar.js/configuration for more details.\";n(null,{err:0,result:{id:null,uuid:null,message:e}})}};if(this._internalCheckIgnore(r,t,e))return void a();try{if(m.isType(this.options.checkIgnore,\"function\")&&this.options.checkIgnore(r,t,e))return void a()}catch(s){this.configure({checkIgnore:null}),console.error(\"[Rollbar]: Error while calling custom checkIgnore() function. Removing custom checkIgnore().\",s)}if(this._urlIsWhitelisted(e)&&!this._messageIsIgnored(e)){if(this.options.verbose){if(e.data&&e.data.body&&e.data.body.trace){var u=e.data.body.trace,c=u.exception.message;console.error(\"[Rollbar]: \",c)}console.info(\"[Rollbar]: \",o)}m.isType(this.options.logFunction,\"function\")&&this.options.logFunction(o);try{m.isType(this.options.transform,\"function\")&&this.options.transform(e)}catch(s){this.configure({transform:null}),console.error(\"[Rollbar]: Error while calling custom transform() function. Removing custom transform().\",s)}this.options.enabled&&(window._rollbarPayloadQueue.push(o),i())}},E._internalCheckIgnore=function(e,r,t){var n=r[0],o=s.LEVELS[n]||0,i=s.LEVELS[this.options.reportLevel]||0;if(i>o)return!0;var a=this.options?this.options.plugins:{};if(a&&a.jquery&&a.jquery.ignoreAjaxErrors)try{return!!t.data.body.message.extra.isAjax}catch(u){return!1}return!1},E._log=function(e,r,t,n,o,i,a){var s=null;if(t)try{if(s=t._savedStackTrace?t._savedStackTrace:g.parse(t),t===this.lastError)return;this.lastError=t}catch(u){console.error(\"[Rollbar]: Error while parsing the error object.\",u),r=t.message||t.description||r||String(t),t=null}var c=this._buildPayload(new Date,e,r,s,n);a&&(c.ignoreRateLimit=!0),this._enqueuePayload(c,!!i,[e,r,t,n],o)},E.log=u(),E.debug=u(\"debug\"),E.info=u(\"info\"),E.warn=u(\"warning\"),E.warning=u(\"warning\"),E.error=u(\"error\"),E.critical=u(\"critical\"),E.uncaughtError=o(function(e,r,t,n,o,i){if(i=i||null,o&&m.isType(o,\"error\"))return void this._log(this.options.uncaughtErrorLevel,e,o,i,null,!0);if(r&&m.isType(r,\"error\"))return void this._log(this.options.uncaughtErrorLevel,e,r,i,null,!0);var a={url:r||\"\",line:t};a.func=g.guessFunctionName(a.url,a.line),a.context=g.gatherContext(a.url,a.line);var s={mode:\"onerror\",message:o?String(o):e||\"uncaught exception\",url:document.location.href,stack:[a],useragent:navigator.userAgent},u=this._buildPayload(new Date,this.options.uncaughtErrorLevel,e,s,i);this._enqueuePayload(u,!0,[this.options.uncaughtErrorLevel,e,r,t,n,o])}),E.global=o(function(e){e=e||{};var r={startTime:e.startTime,maxItems:e.maxItems,itemsPerMinute:e.itemsPerMinute};h(!0,window._globalRollbarOptions,r),void 0!==e.maxItems&&(_=0),void 0!==e.itemsPerMinute&&(L=0)}),E.configure=o(function(e,r){var t=h(!0,{},e);h(!r,this.options,t),this.global(t)}),E.scope=o(function(e){var r=new s(this);return h(!0,r.options.payload,e),r}),E.wrap=function(e,r){try{var t;if(t=m.isType(r,\"function\")?r:function(){return r||{}},!m.isType(e,\"function\"))return e;if(e._isWrap)return e;if(!e._wrapped){e._wrapped=function(){try{return e.apply(this,arguments)}catch(r){throw r.stack||(r._savedStackTrace=g.parse(r)),r._rollbarContext=t()||{},r._rollbarContext._wrappedSource=e.toString(),window._rollbarWrappedError=r,r}},e._wrapped._isWrap=!0;for(var n in e)e.hasOwnProperty(n)&&(e._wrapped[n]=e[n])}return e._wrapped}catch(o){return e}},E.loadFull=function(){console.error(\"[Rollbar]: Unexpected Rollbar.loadFull() called on a Notifier instance\")},s.processPayloads=function(e){return e?void p():void i()};var x=(new Date).getTime(),_=0,L=0;e.exports={Notifier:s,setupJSON:n,topLevelNotifier:a}},function(e,r){\"use strict\";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,o=function(e){return\"function\"==typeof Array.isArray?Array.isArray(e):\"[object Array]\"===n.call(e)},i=function(e){if(!e||\"[object Object]\"!==n.call(e))return!1;var r=t.call(e,\"constructor\"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,\"isPrototypeOf\");if(e.constructor&&!r&&!o)return!1;var i;for(i in e);return\"undefined\"==typeof i||t.call(e,i)};e.exports=function a(){var e,r,t,n,s,u,c=arguments[0],l=1,p=arguments.length,f=!1;for(\"boolean\"==typeof c?(f=c,c=arguments[1]||{},l=2):(\"object\"!=typeof c&&\"function\"!=typeof c||null==c)&&(c={});p>l;++l)if(e=arguments[l],null!=e)for(r in e)t=c[r],n=e[r],c!==n&&(f&&n&&(i(n)||(s=o(n)))?(s?(s=!1,u=t&&o(t)?t:[]):u=t&&i(t)?t:{},c[r]=a(f,u,n)):\"undefined\"!=typeof n&&(c[r]=n));return c}},function(e,r,t){\"use strict\";function n(){return l}function o(){return null}function i(e){var r={};return r._stackFrame=e,r.url=e.fileName,r.line=e.lineNumber,r.func=e.functionName,r.column=e.columnNumber,r.args=e.args,r.context=o(r.url,r.line),r}function a(e){function r(){var r=[];try{r=c.parse(e)}catch(t){r=[]}for(var n=[],o=0;o<r.length;o++)n.push(new i(r[o]));return n}return{stack:r(),message:e.message,name:e.name}}function s(e){return new a(e)}function u(e){if(!e)return[\"Unknown error. There was no error message to display.\",\"\"];var r=e.match(p),t=\"(unknown)\";return r&&(t=r[r.length-1],e=e.replace((r[r.length-2]||\"\")+t+\":\",\"\"),e=e.replace(/(^[\\s]+|[\\s]+$)/g,\"\")),[t,e]}var c=t(6),l=\"?\",p=new RegExp(\"^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): \");e.exports={guessFunctionName:n,guessErrorClass:u,gatherContext:o,parse:s,Stack:a,Frame:i}},function(e,r,t){var n,o,i;!function(a,s){\"use strict\";o=[t(7)],n=s,i=\"function\"==typeof n?n.apply(r,o):n,!(void 0!==i&&(e.exports=i))}(this,function(e){\"use strict\";function r(e,r,t){if(\"function\"==typeof Array.prototype.map)return e.map(r,t);for(var n=new Array(e.length),o=0;o<e.length;o++)n[o]=r.call(t,e[o]);return n}function t(e,r,t){if(\"function\"==typeof Array.prototype.filter)return e.filter(r,t);for(var n=[],o=0;o<e.length;o++)r.call(t,e[o])&&n.push(e[o]);return n}var n=/(^|@)\\S+\\:\\d+/,o=/^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m,i=/^(eval@)?(\\[native code\\])?$/;return{parse:function(e){if(\"undefined\"!=typeof e.stacktrace||\"undefined\"!=typeof e[\"opera#sourceloc\"])return this.parseOpera(e);if(e.stack&&e.stack.match(o))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error(\"Cannot parse given Error object\")},extractLocation:function(e){if(-1===e.indexOf(\":\"))return[e];var r=e.replace(/[\\(\\)\\s]/g,\"\").split(\":\"),t=r.pop(),n=r[r.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var o=r.pop();return[r.join(\":\"),o,t]}return[r.join(\":\"),t,void 0]},parseV8OrIE:function(n){var i=t(n.stack.split(\"\\n\"),function(e){return!!e.match(o)},this);return r(i,function(r){r.indexOf(\"(eval \")>-1&&(r=r.replace(/eval code/g,\"eval\").replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g,\"\"));var t=r.replace(/^\\s+/,\"\").replace(/\\(eval code/g,\"(\").split(/\\s+/).slice(1),n=this.extractLocation(t.pop()),o=t.join(\" \")||void 0,i=\"eval\"===n[0]?void 0:n[0];return new e(o,void 0,i,n[1],n[2],r)},this)},parseFFOrSafari:function(n){var o=t(n.stack.split(\"\\n\"),function(e){return!e.match(i)},this);return r(o,function(r){if(r.indexOf(\" > eval\")>-1&&(r=r.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g,\":$1\")),-1===r.indexOf(\"@\")&&-1===r.indexOf(\":\"))return new e(r);var t=r.split(\"@\"),n=this.extractLocation(t.pop()),o=t.shift()||void 0;return new e(o,void 0,n[0],n[1],n[2],r)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf(\"\\n\")>-1&&e.message.split(\"\\n\").length>e.stacktrace.split(\"\\n\").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(r){for(var t=/Line (\\d+).*script (?:in )?(\\S+)/i,n=r.message.split(\"\\n\"),o=[],i=2,a=n.length;a>i;i+=2){var s=t.exec(n[i]);s&&o.push(new e(void 0,void 0,s[2],s[1],void 0,n[i]))}return o},parseOpera10:function(r){for(var t=/Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i,n=r.stacktrace.split(\"\\n\"),o=[],i=0,a=n.length;a>i;i+=2){var s=t.exec(n[i]);s&&o.push(new e(s[3]||void 0,void 0,s[2],s[1],void 0,n[i]))}return o},parseOpera11:function(o){var i=t(o.stack.split(\"\\n\"),function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this);return r(i,function(r){var t,n=r.split(\"@\"),o=this.extractLocation(n.pop()),i=n.shift()||\"\",a=i.replace(/<anonymous function(: (\\w+))?>/,\"$2\").replace(/\\([^\\)]*\\)/g,\"\")||void 0;i.match(/\\(([^\\)]*)\\)/)&&(t=i.replace(/^[^\\(]+\\(([^\\)]*)\\)$/,\"$1\"));var s=void 0===t||\"[arguments not available]\"===t?void 0:t.split(\",\");return new e(a,s,o[0],o[1],o[2],r)},this)}}})},function(e,r,t){var n,o,i;!function(t,a){\"use strict\";o=[],n=a,i=\"function\"==typeof n?n.apply(r,o):n,!(void 0!==i&&(e.exports=i))}(this,function(){\"use strict\";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e,r,t,n,o,i){void 0!==e&&this.setFunctionName(e),void 0!==r&&this.setArgs(r),void 0!==t&&this.setFileName(t),void 0!==n&&this.setLineNumber(n),void 0!==o&&this.setColumnNumber(o),void 0!==i&&this.setSource(i)}return r.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if(\"[object Array]\"!==Object.prototype.toString.call(e))throw new TypeError(\"Args must be an Array\");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(r){if(!e(r))throw new TypeError(\"Line Number must be a Number\");this.lineNumber=Number(r)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(r){if(!e(r))throw new TypeError(\"Column Number must be a Number\");this.columnNumber=Number(r)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){var r=this.getFunctionName()||\"{anonymous}\",t=\"(\"+(this.getArgs()||[]).join(\",\")+\")\",n=this.getFileName()?\"@\"+this.getFileName():\"\",o=e(this.getLineNumber())?\":\"+this.getLineNumber():\"\",i=e(this.getColumnNumber())?\":\"+this.getColumnNumber():\"\";return r+t+n+o+i}},r})},function(e,r,t){\"use strict\";function n(e){return{}.toString.call(e).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()}function o(e,r){return n(e)===r}function i(e){if(!o(e,\"string\"))throw new Error(\"received invalid input\");for(var r=l,t=r.parser[r.strictMode?\"strict\":\"loose\"].exec(e),n={},i=14;i--;)n[r.key[i]]=t[i]||\"\";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(e,t,o){t&&(n[r.q.name][t]=o)}),n}function a(e){var r=i(e);return\"\"===r.anchor&&(r.source=r.source.replace(\"#\",\"\")),e=r.source.replace(\"?\"+r.query,\"\")}function s(e,r){var t,n,i,a=o(e,\"object\"),u=o(e,\"array\"),c=[];if(a)for(t in e)e.hasOwnProperty(t)&&c.push(t);else if(u)for(i=0;i<e.length;++i)c.push(i);for(i=0;i<c.length;++i)t=c[i],n=e[t],a=o(n,\"object\"),u=o(n,\"array\"),a||u?e[t]=s(n,r):e[t]=r(t,n);return e}function u(e){return e=String(e),new Array(e.length+1).join(\"*\")}function c(){var e=(new Date).getTime(),r=\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(r){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(\"x\"===r?t:7&t|8).toString(16)});return r}t(9);var l={strictMode:!1,key:[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],q:{name:\"queryKey\",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/}},p={isType:o,parseUri:i,parseUriOptions:l,redact:u,sanitizeUrl:a,traverse:s,typeName:n,uuid4:c};e.exports=p},function(e,r){!function(e){\"use strict\";e.console=e.console||{};for(var r,t,n=e.console,o={},i=function(){},a=\"memory\".split(\",\"),s=\"assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn\".split(\",\");r=a.pop();)n[r]||(n[r]=o);for(;t=s.pop();)n[t]||(n[t]=i)}(\"undefined\"==typeof window?this:window)},function(e,r,t){\"use strict\";function n(e){i=e}var o=t(8),i=null,a={XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject(\"Msxml2.XMLHTTP\")},function(){return new ActiveXObject(\"Msxml3.XMLHTTP\")},function(){return new ActiveXObject(\"Microsoft.XMLHTTP\")}],createXMLHTTPObject:function(){var e,r=!1,t=a.XMLHttpFactories,n=t.length;for(e=0;n>e;e++)try{r=t[e]();break}catch(o){}return r},post:function(e,r,t,n){if(!o.isType(t,\"object\"))throw new Error(\"Expected an object to POST\");t=i.stringify(t),n=n||function(){};var s=a.createXMLHTTPObject();if(s)try{try{var u=function(){try{u&&4===s.readyState&&(u=void 0,200===s.status?n(null,i.parse(s.responseText)):n(o.isType(s.status,\"number\")&&s.status>=400&&s.status<600?new Error(String(s.status)):new Error))}catch(e){var r;r=e&&e.stack?e:new Error(e),n(r)}};s.open(\"POST\",e,!0),s.setRequestHeader&&(s.setRequestHeader(\"Content-Type\",\"application/json\"),s.setRequestHeader(\"X-Rollbar-Access-Token\",r)),s.onreadystatechange=u,s.send(t)}catch(c){if(\"undefined\"!=typeof XDomainRequest){\"http:\"===window.location.href.substring(0,5)&&\"https\"===e.substring(0,5)&&(e=\"http\"+e.substring(5));var l=function(){n(new Error(\"Request timed out\"))},p=function(){n(new Error(\"Error during request\"))},f=function(){n(null,i.parse(s.responseText))};s=new XDomainRequest,s.onprogress=function(){},s.ontimeout=l,s.onerror=p,s.onload=f,s.open(\"POST\",e,!0),s.send(t)}}}catch(d){n(d)}}};e.exports={XHR:a,setupJSON:n}}])});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/rollbar-browser/dist/rollbar.umd.nojson.min.js\n ** module id = 63\n ** module chunks = 0 1\n **/","/**\n *  Copyright (c) 2014-2015, Facebook, Inc.\n *  All rights reserved.\n *\n *  This source code is licensed under the BSD-style license found in the\n *  LICENSE file in the root directory of this source tree. An additional grant\n *  of patent rights can be found in the PATENTS file in the same directory.\n */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  global.Immutable = factory()\n}(this, function () { 'use strict';var SLICE$0 = Array.prototype.slice;\n\n  function createClass(ctor, superClass) {\n    if (superClass) {\n      ctor.prototype = Object.create(superClass.prototype);\n    }\n    ctor.prototype.constructor = ctor;\n  }\n\n  // Used for setting prototype methods that IE8 chokes on.\n  var DELETE = 'delete';\n\n  // Constants describing the size of trie nodes.\n  var SHIFT = 5; // Resulted in best performance after ______?\n  var SIZE = 1 << SHIFT;\n  var MASK = SIZE - 1;\n\n  // A consistent shared value representing \"not set\" which equals nothing other\n  // than itself, and nothing that could be provided externally.\n  var NOT_SET = {};\n\n  // Boolean references, Rough equivalent of `bool &`.\n  var CHANGE_LENGTH = { value: false };\n  var DID_ALTER = { value: false };\n\n  function MakeRef(ref) {\n    ref.value = false;\n    return ref;\n  }\n\n  function SetRef(ref) {\n    ref && (ref.value = true);\n  }\n\n  // A function which returns a value representing an \"owner\" for transient writes\n  // to tries. The return value will only ever equal itself, and will not equal\n  // the return of any subsequent call of this function.\n  function OwnerID() {}\n\n  // http://jsperf.com/copy-array-inline\n  function arrCopy(arr, offset) {\n    offset = offset || 0;\n    var len = Math.max(0, arr.length - offset);\n    var newArr = new Array(len);\n    for (var ii = 0; ii < len; ii++) {\n      newArr[ii] = arr[ii + offset];\n    }\n    return newArr;\n  }\n\n  function ensureSize(iter) {\n    if (iter.size === undefined) {\n      iter.size = iter.__iterate(returnTrue);\n    }\n    return iter.size;\n  }\n\n  function wrapIndex(iter, index) {\n    // This implements \"is array index\" which the ECMAString spec defines as:\n    //     A String property name P is an array index if and only if\n    //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n    //     to 2^32−1.\n    // However note that we're currently calling ToNumber() instead of ToUint32()\n    // which should be improved in the future, as floating point numbers should\n    // not be accepted as an array index.\n    if (typeof index !== 'number') {\n      var numIndex = +index;\n      if ('' + numIndex !== index) {\n        return NaN;\n      }\n      index = numIndex;\n    }\n    return index < 0 ? ensureSize(iter) + index : index;\n  }\n\n  function returnTrue() {\n    return true;\n  }\n\n  function wholeSlice(begin, end, size) {\n    return (begin === 0 || (size !== undefined && begin <= -size)) &&\n      (end === undefined || (size !== undefined && end >= size));\n  }\n\n  function resolveBegin(begin, size) {\n    return resolveIndex(begin, size, 0);\n  }\n\n  function resolveEnd(end, size) {\n    return resolveIndex(end, size, size);\n  }\n\n  function resolveIndex(index, size, defaultIndex) {\n    return index === undefined ?\n      defaultIndex :\n      index < 0 ?\n        Math.max(0, size + index) :\n        size === undefined ?\n          index :\n          Math.min(size, index);\n  }\n\n  function Iterable(value) {\n      return isIterable(value) ? value : Seq(value);\n    }\n\n\n  createClass(KeyedIterable, Iterable);\n    function KeyedIterable(value) {\n      return isKeyed(value) ? value : KeyedSeq(value);\n    }\n\n\n  createClass(IndexedIterable, Iterable);\n    function IndexedIterable(value) {\n      return isIndexed(value) ? value : IndexedSeq(value);\n    }\n\n\n  createClass(SetIterable, Iterable);\n    function SetIterable(value) {\n      return isIterable(value) && !isAssociative(value) ? value : SetSeq(value);\n    }\n\n\n\n  function isIterable(maybeIterable) {\n    return !!(maybeIterable && maybeIterable[IS_ITERABLE_SENTINEL]);\n  }\n\n  function isKeyed(maybeKeyed) {\n    return !!(maybeKeyed && maybeKeyed[IS_KEYED_SENTINEL]);\n  }\n\n  function isIndexed(maybeIndexed) {\n    return !!(maybeIndexed && maybeIndexed[IS_INDEXED_SENTINEL]);\n  }\n\n  function isAssociative(maybeAssociative) {\n    return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n  }\n\n  function isOrdered(maybeOrdered) {\n    return !!(maybeOrdered && maybeOrdered[IS_ORDERED_SENTINEL]);\n  }\n\n  Iterable.isIterable = isIterable;\n  Iterable.isKeyed = isKeyed;\n  Iterable.isIndexed = isIndexed;\n  Iterable.isAssociative = isAssociative;\n  Iterable.isOrdered = isOrdered;\n\n  Iterable.Keyed = KeyedIterable;\n  Iterable.Indexed = IndexedIterable;\n  Iterable.Set = SetIterable;\n\n\n  var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  /* global Symbol */\n\n  var ITERATE_KEYS = 0;\n  var ITERATE_VALUES = 1;\n  var ITERATE_ENTRIES = 2;\n\n  var REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n  var FAUX_ITERATOR_SYMBOL = '@@iterator';\n\n  var ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\n\n  function src_Iterator__Iterator(next) {\n      this.next = next;\n    }\n\n    src_Iterator__Iterator.prototype.toString = function() {\n      return '[Iterator]';\n    };\n\n\n  src_Iterator__Iterator.KEYS = ITERATE_KEYS;\n  src_Iterator__Iterator.VALUES = ITERATE_VALUES;\n  src_Iterator__Iterator.ENTRIES = ITERATE_ENTRIES;\n\n  src_Iterator__Iterator.prototype.inspect =\n  src_Iterator__Iterator.prototype.toSource = function () { return this.toString(); }\n  src_Iterator__Iterator.prototype[ITERATOR_SYMBOL] = function () {\n    return this;\n  };\n\n\n  function iteratorValue(type, k, v, iteratorResult) {\n    var value = type === 0 ? k : type === 1 ? v : [k, v];\n    iteratorResult ? (iteratorResult.value = value) : (iteratorResult = {\n      value: value, done: false\n    });\n    return iteratorResult;\n  }\n\n  function iteratorDone() {\n    return { value: undefined, done: true };\n  }\n\n  function hasIterator(maybeIterable) {\n    return !!getIteratorFn(maybeIterable);\n  }\n\n  function isIterator(maybeIterator) {\n    return maybeIterator && typeof maybeIterator.next === 'function';\n  }\n\n  function getIterator(iterable) {\n    var iteratorFn = getIteratorFn(iterable);\n    return iteratorFn && iteratorFn.call(iterable);\n  }\n\n  function getIteratorFn(iterable) {\n    var iteratorFn = iterable && (\n      (REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]\n    );\n    if (typeof iteratorFn === 'function') {\n      return iteratorFn;\n    }\n  }\n\n  function isArrayLike(value) {\n    return value && typeof value.length === 'number';\n  }\n\n  createClass(Seq, Iterable);\n    function Seq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        isIterable(value) ? value.toSeq() : seqFromValue(value);\n    }\n\n    Seq.of = function(/*...values*/) {\n      return Seq(arguments);\n    };\n\n    Seq.prototype.toSeq = function() {\n      return this;\n    };\n\n    Seq.prototype.toString = function() {\n      return this.__toString('Seq {', '}');\n    };\n\n    Seq.prototype.cacheResult = function() {\n      if (!this._cache && this.__iterateUncached) {\n        this._cache = this.entrySeq().toArray();\n        this.size = this._cache.length;\n      }\n      return this;\n    };\n\n    // abstract __iterateUncached(fn, reverse)\n\n    Seq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, true);\n    };\n\n    // abstract __iteratorUncached(type, reverse)\n\n    Seq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, true);\n    };\n\n\n\n  createClass(KeyedSeq, Seq);\n    function KeyedSeq(value) {\n      return value === null || value === undefined ?\n        emptySequence().toKeyedSeq() :\n        isIterable(value) ?\n          (isKeyed(value) ? value.toSeq() : value.fromEntrySeq()) :\n          keyedSeqFromValue(value);\n    }\n\n    KeyedSeq.prototype.toKeyedSeq = function() {\n      return this;\n    };\n\n\n\n  createClass(IndexedSeq, Seq);\n    function IndexedSeq(value) {\n      return value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value.toIndexedSeq();\n    }\n\n    IndexedSeq.of = function(/*...values*/) {\n      return IndexedSeq(arguments);\n    };\n\n    IndexedSeq.prototype.toIndexedSeq = function() {\n      return this;\n    };\n\n    IndexedSeq.prototype.toString = function() {\n      return this.__toString('Seq [', ']');\n    };\n\n    IndexedSeq.prototype.__iterate = function(fn, reverse) {\n      return seqIterate(this, fn, reverse, false);\n    };\n\n    IndexedSeq.prototype.__iterator = function(type, reverse) {\n      return seqIterator(this, type, reverse, false);\n    };\n\n\n\n  createClass(SetSeq, Seq);\n    function SetSeq(value) {\n      return (\n        value === null || value === undefined ? emptySequence() :\n        !isIterable(value) ? indexedSeqFromValue(value) :\n        isKeyed(value) ? value.entrySeq() : value\n      ).toSetSeq();\n    }\n\n    SetSeq.of = function(/*...values*/) {\n      return SetSeq(arguments);\n    };\n\n    SetSeq.prototype.toSetSeq = function() {\n      return this;\n    };\n\n\n\n  Seq.isSeq = isSeq;\n  Seq.Keyed = KeyedSeq;\n  Seq.Set = SetSeq;\n  Seq.Indexed = IndexedSeq;\n\n  var IS_SEQ_SENTINEL = '@@__IMMUTABLE_SEQ__@@';\n\n  Seq.prototype[IS_SEQ_SENTINEL] = true;\n\n\n\n  // #pragma Root Sequences\n\n  createClass(ArraySeq, IndexedSeq);\n    function ArraySeq(array) {\n      this._array = array;\n      this.size = array.length;\n    }\n\n    ArraySeq.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n    };\n\n    ArraySeq.prototype.__iterate = function(fn, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(array[reverse ? maxIndex - ii : ii], ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ArraySeq.prototype.__iterator = function(type, reverse) {\n      var array = this._array;\n      var maxIndex = array.length - 1;\n      var ii = 0;\n      return new src_Iterator__Iterator(function() \n        {return ii > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, ii, array[reverse ? maxIndex - ii++ : ii++])}\n      );\n    };\n\n\n\n  createClass(ObjectSeq, KeyedSeq);\n    function ObjectSeq(object) {\n      var keys = Object.keys(object);\n      this._object = object;\n      this._keys = keys;\n      this.size = keys.length;\n    }\n\n    ObjectSeq.prototype.get = function(key, notSetValue) {\n      if (notSetValue !== undefined && !this.has(key)) {\n        return notSetValue;\n      }\n      return this._object[key];\n    };\n\n    ObjectSeq.prototype.has = function(key) {\n      return this._object.hasOwnProperty(key);\n    };\n\n    ObjectSeq.prototype.__iterate = function(fn, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        if (fn(object[key], key, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    ObjectSeq.prototype.__iterator = function(type, reverse) {\n      var object = this._object;\n      var keys = this._keys;\n      var maxIndex = keys.length - 1;\n      var ii = 0;\n      return new src_Iterator__Iterator(function()  {\n        var key = keys[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, key, object[key]);\n      });\n    };\n\n  ObjectSeq.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(IterableSeq, IndexedSeq);\n    function IterableSeq(iterable) {\n      this._iterable = iterable;\n      this.size = iterable.length || iterable.size;\n    }\n\n    IterableSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      var iterations = 0;\n      if (isIterator(iterator)) {\n        var step;\n        while (!(step = iterator.next()).done) {\n          if (fn(step.value, iterations++, this) === false) {\n            break;\n          }\n        }\n      }\n      return iterations;\n    };\n\n    IterableSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterable = this._iterable;\n      var iterator = getIterator(iterable);\n      if (!isIterator(iterator)) {\n        return new src_Iterator__Iterator(iteratorDone);\n      }\n      var iterations = 0;\n      return new src_Iterator__Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step : iteratorValue(type, iterations++, step.value);\n      });\n    };\n\n\n\n  createClass(IteratorSeq, IndexedSeq);\n    function IteratorSeq(iterator) {\n      this._iterator = iterator;\n      this._iteratorCache = [];\n    }\n\n    IteratorSeq.prototype.__iterateUncached = function(fn, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      while (iterations < cache.length) {\n        if (fn(cache[iterations], iterations++, this) === false) {\n          return iterations;\n        }\n      }\n      var step;\n      while (!(step = iterator.next()).done) {\n        var val = step.value;\n        cache[iterations] = val;\n        if (fn(val, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n\n    IteratorSeq.prototype.__iteratorUncached = function(type, reverse) {\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = this._iterator;\n      var cache = this._iteratorCache;\n      var iterations = 0;\n      return new src_Iterator__Iterator(function()  {\n        if (iterations >= cache.length) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          cache[iterations] = step.value;\n        }\n        return iteratorValue(type, iterations, cache[iterations++]);\n      });\n    };\n\n\n\n\n  // # pragma Helper functions\n\n  function isSeq(maybeSeq) {\n    return !!(maybeSeq && maybeSeq[IS_SEQ_SENTINEL]);\n  }\n\n  var EMPTY_SEQ;\n\n  function emptySequence() {\n    return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n  }\n\n  function keyedSeqFromValue(value) {\n    var seq =\n      Array.isArray(value) ? new ArraySeq(value).fromEntrySeq() :\n      isIterator(value) ? new IteratorSeq(value).fromEntrySeq() :\n      hasIterator(value) ? new IterableSeq(value).fromEntrySeq() :\n      typeof value === 'object' ? new ObjectSeq(value) :\n      undefined;\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of [k, v] entries, '+\n        'or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function indexedSeqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value);\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function seqFromValue(value) {\n    var seq = maybeIndexedSeqFromValue(value) ||\n      (typeof value === 'object' && new ObjectSeq(value));\n    if (!seq) {\n      throw new TypeError(\n        'Expected Array or iterable object of values, or keyed object: ' + value\n      );\n    }\n    return seq;\n  }\n\n  function maybeIndexedSeqFromValue(value) {\n    return (\n      isArrayLike(value) ? new ArraySeq(value) :\n      isIterator(value) ? new IteratorSeq(value) :\n      hasIterator(value) ? new IterableSeq(value) :\n      undefined\n    );\n  }\n\n  function seqIterate(seq, fn, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        if (fn(entry[1], useKeys ? entry[0] : ii, seq) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    }\n    return seq.__iterateUncached(fn, reverse);\n  }\n\n  function seqIterator(seq, type, reverse, useKeys) {\n    var cache = seq._cache;\n    if (cache) {\n      var maxIndex = cache.length - 1;\n      var ii = 0;\n      return new src_Iterator__Iterator(function()  {\n        var entry = cache[reverse ? maxIndex - ii : ii];\n        return ii++ > maxIndex ?\n          iteratorDone() :\n          iteratorValue(type, useKeys ? entry[0] : ii - 1, entry[1]);\n      });\n    }\n    return seq.__iteratorUncached(type, reverse);\n  }\n\n  createClass(Collection, Iterable);\n    function Collection() {\n      throw TypeError('Abstract');\n    }\n\n\n  createClass(KeyedCollection, Collection);function KeyedCollection() {}\n\n  createClass(IndexedCollection, Collection);function IndexedCollection() {}\n\n  createClass(SetCollection, Collection);function SetCollection() {}\n\n\n  Collection.Keyed = KeyedCollection;\n  Collection.Indexed = IndexedCollection;\n  Collection.Set = SetCollection;\n\n  /**\n   * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n   * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n   *\n   * NaN is considered the same as NaN, however -0 and 0 are considered the same\n   * value, which is different from the algorithm described by\n   * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n   *\n   * This is extended further to allow Objects to describe the values they\n   * represent, by way of `valueOf` or `equals` (and `hashCode`).\n   *\n   * Note: because of this extension, the key equality of Immutable.Map and the\n   * value equality of Immutable.Set will differ from ES6 Map and Set.\n   *\n   * ### Defining custom values\n   *\n   * The easiest way to describe the value an object represents is by implementing\n   * `valueOf`. For example, `Date` represents a value by returning a unix\n   * timestamp for `valueOf`:\n   *\n   *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n   *     var date2 = new Date(1234567890000);\n   *     date1.valueOf(); // 1234567890000\n   *     assert( date1 !== date2 );\n   *     assert( Immutable.is( date1, date2 ) );\n   *\n   * Note: overriding `valueOf` may have other implications if you use this object\n   * where JavaScript expects a primitive, such as implicit string coercion.\n   *\n   * For more complex types, especially collections, implementing `valueOf` may\n   * not be performant. An alternative is to implement `equals` and `hashCode`.\n   *\n   * `equals` takes another object, presumably of similar type, and returns true\n   * if the it is equal. Equality is symmetrical, so the same result should be\n   * returned if this and the argument are flipped.\n   *\n   *     assert( a.equals(b) === b.equals(a) );\n   *\n   * `hashCode` returns a 32bit integer number representing the object which will\n   * be used to determine how to store the value object in a Map or Set. You must\n   * provide both or neither methods, one must not exist without the other.\n   *\n   * Also, an important relationship between these methods must be upheld: if two\n   * values are equal, they *must* return the same hashCode. If the values are not\n   * equal, they might have the same hashCode; this is called a hash collision,\n   * and while undesirable for performance reasons, it is acceptable.\n   *\n   *     if (a.equals(b)) {\n   *       assert( a.hashCode() === b.hashCode() );\n   *     }\n   *\n   * All Immutable collections implement `equals` and `hashCode`.\n   *\n   */\n  function is(valueA, valueB) {\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n    if (typeof valueA.valueOf === 'function' &&\n        typeof valueB.valueOf === 'function') {\n      valueA = valueA.valueOf();\n      valueB = valueB.valueOf();\n      if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n        return true;\n      }\n      if (!valueA || !valueB) {\n        return false;\n      }\n    }\n    if (typeof valueA.equals === 'function' &&\n        typeof valueB.equals === 'function' &&\n        valueA.equals(valueB)) {\n      return true;\n    }\n    return false;\n  }\n\n  function fromJS(json, converter) {\n    return converter ?\n      fromJSWith(converter, json, '', {'': json}) :\n      fromJSDefault(json);\n  }\n\n  function fromJSWith(converter, json, key, parentJSON) {\n    if (Array.isArray(json)) {\n      return converter.call(parentJSON, key, IndexedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    if (isPlainObj(json)) {\n      return converter.call(parentJSON, key, KeyedSeq(json).map(function(v, k)  {return fromJSWith(converter, v, k, json)}));\n    }\n    return json;\n  }\n\n  function fromJSDefault(json) {\n    if (Array.isArray(json)) {\n      return IndexedSeq(json).map(fromJSDefault).toList();\n    }\n    if (isPlainObj(json)) {\n      return KeyedSeq(json).map(fromJSDefault).toMap();\n    }\n    return json;\n  }\n\n  function isPlainObj(value) {\n    return value && (value.constructor === Object || value.constructor === undefined);\n  }\n\n  var src_Math__imul =\n    typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2 ?\n    Math.imul :\n    function imul(a, b) {\n      a = a | 0; // int\n      b = b | 0; // int\n      var c = a & 0xffff;\n      var d = b & 0xffff;\n      // Shift by 0 fixes the sign on the high part.\n      return (c * d) + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0) | 0; // int\n    };\n\n  // v8 has an optimization for storing 31-bit signed numbers.\n  // Values which have either 00 or 11 as the high order bits qualify.\n  // This function drops the highest order bit in a signed number, maintaining\n  // the sign bit.\n  function smi(i32) {\n    return ((i32 >>> 1) & 0x40000000) | (i32 & 0xBFFFFFFF);\n  }\n\n  function hash(o) {\n    if (o === false || o === null || o === undefined) {\n      return 0;\n    }\n    if (typeof o.valueOf === 'function') {\n      o = o.valueOf();\n      if (o === false || o === null || o === undefined) {\n        return 0;\n      }\n    }\n    if (o === true) {\n      return 1;\n    }\n    var type = typeof o;\n    if (type === 'number') {\n      var h = o | 0;\n      if (h !== o) {\n        h ^= o * 0xFFFFFFFF;\n      }\n      while (o > 0xFFFFFFFF) {\n        o /= 0xFFFFFFFF;\n        h ^= o;\n      }\n      return smi(h);\n    }\n    if (type === 'string') {\n      return o.length > STRING_HASH_CACHE_MIN_STRLEN ? cachedHashString(o) : hashString(o);\n    }\n    if (typeof o.hashCode === 'function') {\n      return o.hashCode();\n    }\n    return hashJSObj(o);\n  }\n\n  function cachedHashString(string) {\n    var hash = stringHashCache[string];\n    if (hash === undefined) {\n      hash = hashString(string);\n      if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n        STRING_HASH_CACHE_SIZE = 0;\n        stringHashCache = {};\n      }\n      STRING_HASH_CACHE_SIZE++;\n      stringHashCache[string] = hash;\n    }\n    return hash;\n  }\n\n  // http://jsperf.com/hashing-strings\n  function hashString(string) {\n    // This is the hash from JVM\n    // The hash code for a string is computed as\n    // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n    // where s[i] is the ith character of the string and n is the length of\n    // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n    // (exclusive) by dropping high bits.\n    var hash = 0;\n    for (var ii = 0; ii < string.length; ii++) {\n      hash = 31 * hash + string.charCodeAt(ii) | 0;\n    }\n    return smi(hash);\n  }\n\n  function hashJSObj(obj) {\n    var hash;\n    if (usingWeakMap) {\n      hash = weakMap.get(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = obj[UID_HASH_KEY];\n    if (hash !== undefined) {\n      return hash;\n    }\n\n    if (!canDefineProperty) {\n      hash = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n      if (hash !== undefined) {\n        return hash;\n      }\n\n      hash = getIENodeHash(obj);\n      if (hash !== undefined) {\n        return hash;\n      }\n    }\n\n    hash = ++objHashUID;\n    if (objHashUID & 0x40000000) {\n      objHashUID = 0;\n    }\n\n    if (usingWeakMap) {\n      weakMap.set(obj, hash);\n    } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n      throw new Error('Non-extensible objects are not allowed as keys.');\n    } else if (canDefineProperty) {\n      Object.defineProperty(obj, UID_HASH_KEY, {\n        'enumerable': false,\n        'configurable': false,\n        'writable': false,\n        'value': hash\n      });\n    } else if (obj.propertyIsEnumerable !== undefined &&\n               obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable) {\n      // Since we can't define a non-enumerable property on the object\n      // we'll hijack one of the less-used non-enumerable properties to\n      // save our hash on it. Since this is a function it will not show up in\n      // `JSON.stringify` which is what we want.\n      obj.propertyIsEnumerable = function() {\n        return this.constructor.prototype.propertyIsEnumerable.apply(this, arguments);\n      };\n      obj.propertyIsEnumerable[UID_HASH_KEY] = hash;\n    } else if (obj.nodeType !== undefined) {\n      // At this point we couldn't get the IE `uniqueID` to use as a hash\n      // and we couldn't use a non-enumerable property to exploit the\n      // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n      // itself.\n      obj[UID_HASH_KEY] = hash;\n    } else {\n      throw new Error('Unable to set a non-enumerable property on object.');\n    }\n\n    return hash;\n  }\n\n  // Get references to ES5 object methods.\n  var isExtensible = Object.isExtensible;\n\n  // True if Object.defineProperty works as expected. IE8 fails this test.\n  var canDefineProperty = (function() {\n    try {\n      Object.defineProperty({}, '@', {});\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }());\n\n  // IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n  // and avoid memory leaks from the IE cloneNode bug.\n  function getIENodeHash(node) {\n    if (node && node.nodeType > 0) {\n      switch (node.nodeType) {\n        case 1: // Element\n          return node.uniqueID;\n        case 9: // Document\n          return node.documentElement && node.documentElement.uniqueID;\n      }\n    }\n  }\n\n  // If possible, use a WeakMap.\n  var usingWeakMap = typeof WeakMap === 'function';\n  var weakMap;\n  if (usingWeakMap) {\n    weakMap = new WeakMap();\n  }\n\n  var objHashUID = 0;\n\n  var UID_HASH_KEY = '__immutablehash__';\n  if (typeof Symbol === 'function') {\n    UID_HASH_KEY = Symbol(UID_HASH_KEY);\n  }\n\n  var STRING_HASH_CACHE_MIN_STRLEN = 16;\n  var STRING_HASH_CACHE_MAX_SIZE = 255;\n  var STRING_HASH_CACHE_SIZE = 0;\n  var stringHashCache = {};\n\n  function invariant(condition, error) {\n    if (!condition) throw new Error(error);\n  }\n\n  function assertNotInfinite(size) {\n    invariant(\n      size !== Infinity,\n      'Cannot perform this action with an infinite size.'\n    );\n  }\n\n  createClass(ToKeyedSequence, KeyedSeq);\n    function ToKeyedSequence(indexed, useKeys) {\n      this._iter = indexed;\n      this._useKeys = useKeys;\n      this.size = indexed.size;\n    }\n\n    ToKeyedSequence.prototype.get = function(key, notSetValue) {\n      return this._iter.get(key, notSetValue);\n    };\n\n    ToKeyedSequence.prototype.has = function(key) {\n      return this._iter.has(key);\n    };\n\n    ToKeyedSequence.prototype.valueSeq = function() {\n      return this._iter.valueSeq();\n    };\n\n    ToKeyedSequence.prototype.reverse = function() {var this$0 = this;\n      var reversedSequence = reverseFactory(this, true);\n      if (!this._useKeys) {\n        reversedSequence.valueSeq = function()  {return this$0._iter.toSeq().reverse()};\n      }\n      return reversedSequence;\n    };\n\n    ToKeyedSequence.prototype.map = function(mapper, context) {var this$0 = this;\n      var mappedSequence = mapFactory(this, mapper, context);\n      if (!this._useKeys) {\n        mappedSequence.valueSeq = function()  {return this$0._iter.toSeq().map(mapper, context)};\n      }\n      return mappedSequence;\n    };\n\n    ToKeyedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var ii;\n      return this._iter.__iterate(\n        this._useKeys ?\n          function(v, k)  {return fn(v, k, this$0)} :\n          ((ii = reverse ? resolveSize(this) : 0),\n            function(v ) {return fn(v, reverse ? --ii : ii++, this$0)}),\n        reverse\n      );\n    };\n\n    ToKeyedSequence.prototype.__iterator = function(type, reverse) {\n      if (this._useKeys) {\n        return this._iter.__iterator(type, reverse);\n      }\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var ii = reverse ? resolveSize(this) : 0;\n      return new src_Iterator__Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, reverse ? --ii : ii++, step.value, step);\n      });\n    };\n\n  ToKeyedSequence.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n  createClass(ToIndexedSequence, IndexedSeq);\n    function ToIndexedSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToIndexedSequence.prototype.includes = function(value) {\n      return this._iter.includes(value);\n    };\n\n    ToIndexedSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      return this._iter.__iterate(function(v ) {return fn(v, iterations++, this$0)}, reverse);\n    };\n\n    ToIndexedSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      return new src_Iterator__Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, iterations++, step.value, step)\n      });\n    };\n\n\n\n  createClass(ToSetSequence, SetSeq);\n    function ToSetSequence(iter) {\n      this._iter = iter;\n      this.size = iter.size;\n    }\n\n    ToSetSequence.prototype.has = function(key) {\n      return this._iter.includes(key);\n    };\n\n    ToSetSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(v ) {return fn(v, v, this$0)}, reverse);\n    };\n\n    ToSetSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new src_Iterator__Iterator(function()  {\n        var step = iterator.next();\n        return step.done ? step :\n          iteratorValue(type, step.value, step.value, step);\n      });\n    };\n\n\n\n  createClass(FromEntriesSequence, KeyedSeq);\n    function FromEntriesSequence(entries) {\n      this._iter = entries;\n      this.size = entries.size;\n    }\n\n    FromEntriesSequence.prototype.entrySeq = function() {\n      return this._iter.toSeq();\n    };\n\n    FromEntriesSequence.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._iter.__iterate(function(entry ) {\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedIterable = isIterable(entry);\n          return fn(\n            indexedIterable ? entry.get(1) : entry[1],\n            indexedIterable ? entry.get(0) : entry[0],\n            this$0\n          );\n        }\n      }, reverse);\n    };\n\n    FromEntriesSequence.prototype.__iterator = function(type, reverse) {\n      var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n      return new src_Iterator__Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          // Check if entry exists first so array access doesn't throw for holes\n          // in the parent iteration.\n          if (entry) {\n            validateEntry(entry);\n            var indexedIterable = isIterable(entry);\n            return iteratorValue(\n              type,\n              indexedIterable ? entry.get(0) : entry[0],\n              indexedIterable ? entry.get(1) : entry[1],\n              step\n            );\n          }\n        }\n      });\n    };\n\n\n  ToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\n\n  function flipFactory(iterable) {\n    var flipSequence = makeSequence(iterable);\n    flipSequence._iter = iterable;\n    flipSequence.size = iterable.size;\n    flipSequence.flip = function()  {return iterable};\n    flipSequence.reverse = function () {\n      var reversedSequence = iterable.reverse.apply(this); // super.reverse()\n      reversedSequence.flip = function()  {return iterable.reverse()};\n      return reversedSequence;\n    };\n    flipSequence.has = function(key ) {return iterable.includes(key)};\n    flipSequence.includes = function(key ) {return iterable.has(key)};\n    flipSequence.cacheResult = cacheResultThrough;\n    flipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(k, v, this$0) !== false}, reverse);\n    }\n    flipSequence.__iteratorUncached = function(type, reverse) {\n      if (type === ITERATE_ENTRIES) {\n        var iterator = iterable.__iterator(type, reverse);\n        return new src_Iterator__Iterator(function()  {\n          var step = iterator.next();\n          if (!step.done) {\n            var k = step.value[0];\n            step.value[0] = step.value[1];\n            step.value[1] = k;\n          }\n          return step;\n        });\n      }\n      return iterable.__iterator(\n        type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n        reverse\n      );\n    }\n    return flipSequence;\n  }\n\n\n  function mapFactory(iterable, mapper, context) {\n    var mappedSequence = makeSequence(iterable);\n    mappedSequence.size = iterable.size;\n    mappedSequence.has = function(key ) {return iterable.has(key)};\n    mappedSequence.get = function(key, notSetValue)  {\n      var v = iterable.get(key, NOT_SET);\n      return v === NOT_SET ?\n        notSetValue :\n        mapper.call(context, v, key, iterable);\n    };\n    mappedSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(\n        function(v, k, c)  {return fn(mapper.call(context, v, k, c), k, this$0) !== false},\n        reverse\n      );\n    }\n    mappedSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      return new src_Iterator__Iterator(function()  {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        return iteratorValue(\n          type,\n          key,\n          mapper.call(context, entry[1], key, iterable),\n          step\n        );\n      });\n    }\n    return mappedSequence;\n  }\n\n\n  function reverseFactory(iterable, useKeys) {\n    var reversedSequence = makeSequence(iterable);\n    reversedSequence._iter = iterable;\n    reversedSequence.size = iterable.size;\n    reversedSequence.reverse = function()  {return iterable};\n    if (iterable.flip) {\n      reversedSequence.flip = function () {\n        var flipSequence = flipFactory(iterable);\n        flipSequence.reverse = function()  {return iterable.flip()};\n        return flipSequence;\n      };\n    }\n    reversedSequence.get = function(key, notSetValue) \n      {return iterable.get(useKeys ? key : -1 - key, notSetValue)};\n    reversedSequence.has = function(key )\n      {return iterable.has(useKeys ? key : -1 - key)};\n    reversedSequence.includes = function(value ) {return iterable.includes(value)};\n    reversedSequence.cacheResult = cacheResultThrough;\n    reversedSequence.__iterate = function (fn, reverse) {var this$0 = this;\n      return iterable.__iterate(function(v, k)  {return fn(v, k, this$0)}, !reverse);\n    };\n    reversedSequence.__iterator =\n      function(type, reverse)  {return iterable.__iterator(type, !reverse)};\n    return reversedSequence;\n  }\n\n\n  function filterFactory(iterable, predicate, context, useKeys) {\n    var filterSequence = makeSequence(iterable);\n    if (useKeys) {\n      filterSequence.has = function(key ) {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && !!predicate.call(context, v, key, iterable);\n      };\n      filterSequence.get = function(key, notSetValue)  {\n        var v = iterable.get(key, NOT_SET);\n        return v !== NOT_SET && predicate.call(context, v, key, iterable) ?\n          v : notSetValue;\n      };\n    }\n    filterSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      }, reverse);\n      return iterations;\n    };\n    filterSequence.__iteratorUncached = function (type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterations = 0;\n      return new src_Iterator__Iterator(function()  {\n        while (true) {\n          var step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n          var entry = step.value;\n          var key = entry[0];\n          var value = entry[1];\n          if (predicate.call(context, value, key, iterable)) {\n            return iteratorValue(type, useKeys ? key : iterations++, value, step);\n          }\n        }\n      });\n    }\n    return filterSequence;\n  }\n\n\n  function countByFactory(iterable, grouper, context) {\n    var groups = src_Map__Map().asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        0,\n        function(a ) {return a + 1}\n      );\n    });\n    return groups.asImmutable();\n  }\n\n\n  function groupByFactory(iterable, grouper, context) {\n    var isKeyedIter = isKeyed(iterable);\n    var groups = (isOrdered(iterable) ? OrderedMap() : src_Map__Map()).asMutable();\n    iterable.__iterate(function(v, k)  {\n      groups.update(\n        grouper.call(context, v, k, iterable),\n        function(a ) {return (a = a || [], a.push(isKeyedIter ? [k, v] : v), a)}\n      );\n    });\n    var coerce = iterableClass(iterable);\n    return groups.map(function(arr ) {return reify(iterable, coerce(arr))});\n  }\n\n\n  function sliceFactory(iterable, begin, end, useKeys) {\n    var originalSize = iterable.size;\n\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      end = end | 0;\n    }\n\n    if (wholeSlice(begin, end, originalSize)) {\n      return iterable;\n    }\n\n    var resolvedBegin = resolveBegin(begin, originalSize);\n    var resolvedEnd = resolveEnd(end, originalSize);\n\n    // begin or end will be NaN if they were provided as negative numbers and\n    // this iterable's size is unknown. In that case, cache first so there is\n    // a known size and these do not resolve to NaN.\n    if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n      return sliceFactory(iterable.toSeq().cacheResult(), begin, end, useKeys);\n    }\n\n    // Note: resolvedEnd is undefined when the original sequence's length is\n    // unknown and this slice did not supply an end and should contain all\n    // elements after resolvedBegin.\n    // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n    var resolvedSize = resolvedEnd - resolvedBegin;\n    var sliceSize;\n    if (resolvedSize === resolvedSize) {\n      sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n    }\n\n    var sliceSeq = makeSequence(iterable);\n\n    // If iterable.size is undefined, the size of the realized sliceSeq is\n    // unknown at this point unless the number of items to slice is 0\n    sliceSeq.size = sliceSize === 0 ? sliceSize : iterable.size && sliceSize || undefined;\n\n    if (!useKeys && isSeq(iterable) && sliceSize >= 0) {\n      sliceSeq.get = function (index, notSetValue) {\n        index = wrapIndex(this, index);\n        return index >= 0 && index < sliceSize ?\n          iterable.get(index + resolvedBegin, notSetValue) :\n          notSetValue;\n      }\n    }\n\n    sliceSeq.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (sliceSize === 0) {\n        return 0;\n      }\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var skipped = 0;\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k)  {\n        if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0) !== false &&\n                 iterations !== sliceSize;\n        }\n      });\n      return iterations;\n    };\n\n    sliceSeq.__iteratorUncached = function(type, reverse) {\n      if (sliceSize !== 0 && reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      // Don't bother instantiating parent iterator if taking 0.\n      var iterator = sliceSize !== 0 && iterable.__iterator(type, reverse);\n      var skipped = 0;\n      var iterations = 0;\n      return new src_Iterator__Iterator(function()  {\n        while (skipped++ < resolvedBegin) {\n          iterator.next();\n        }\n        if (++iterations > sliceSize) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (useKeys || type === ITERATE_VALUES) {\n          return step;\n        } else if (type === ITERATE_KEYS) {\n          return iteratorValue(type, iterations - 1, undefined, step);\n        } else {\n          return iteratorValue(type, iterations - 1, step.value[1], step);\n        }\n      });\n    }\n\n    return sliceSeq;\n  }\n\n\n  function takeWhileFactory(iterable, predicate, context) {\n    var takeSequence = makeSequence(iterable);\n    takeSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c) \n        {return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$0)}\n      );\n      return iterations;\n    };\n    takeSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var iterating = true;\n      return new src_Iterator__Iterator(function()  {\n        if (!iterating) {\n          return iteratorDone();\n        }\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var k = entry[0];\n        var v = entry[1];\n        if (!predicate.call(context, v, k, this$0)) {\n          iterating = false;\n          return iteratorDone();\n        }\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return takeSequence;\n  }\n\n\n  function skipWhileFactory(iterable, predicate, context, useKeys) {\n    var skipSequence = makeSequence(iterable);\n    skipSequence.__iterateUncached = function (fn, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterate(fn, reverse);\n      }\n      var isSkipping = true;\n      var iterations = 0;\n      iterable.__iterate(function(v, k, c)  {\n        if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n          iterations++;\n          return fn(v, useKeys ? k : iterations - 1, this$0);\n        }\n      });\n      return iterations;\n    };\n    skipSequence.__iteratorUncached = function(type, reverse) {var this$0 = this;\n      if (reverse) {\n        return this.cacheResult().__iterator(type, reverse);\n      }\n      var iterator = iterable.__iterator(ITERATE_ENTRIES, reverse);\n      var skipping = true;\n      var iterations = 0;\n      return new src_Iterator__Iterator(function()  {\n        var step, k, v;\n        do {\n          step = iterator.next();\n          if (step.done) {\n            if (useKeys || type === ITERATE_VALUES) {\n              return step;\n            } else if (type === ITERATE_KEYS) {\n              return iteratorValue(type, iterations++, undefined, step);\n            } else {\n              return iteratorValue(type, iterations++, step.value[1], step);\n            }\n          }\n          var entry = step.value;\n          k = entry[0];\n          v = entry[1];\n          skipping && (skipping = predicate.call(context, v, k, this$0));\n        } while (skipping);\n        return type === ITERATE_ENTRIES ? step :\n          iteratorValue(type, k, v, step);\n      });\n    };\n    return skipSequence;\n  }\n\n\n  function concatFactory(iterable, values) {\n    var isKeyedIterable = isKeyed(iterable);\n    var iters = [iterable].concat(values).map(function(v ) {\n      if (!isIterable(v)) {\n        v = isKeyedIterable ?\n          keyedSeqFromValue(v) :\n          indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedIterable) {\n        v = KeyedIterable(v);\n      }\n      return v;\n    }).filter(function(v ) {return v.size !== 0});\n\n    if (iters.length === 0) {\n      return iterable;\n    }\n\n    if (iters.length === 1) {\n      var singleton = iters[0];\n      if (singleton === iterable ||\n          isKeyedIterable && isKeyed(singleton) ||\n          isIndexed(iterable) && isIndexed(singleton)) {\n        return singleton;\n      }\n    }\n\n    var concatSeq = new ArraySeq(iters);\n    if (isKeyedIterable) {\n      concatSeq = concatSeq.toKeyedSeq();\n    } else if (!isIndexed(iterable)) {\n      concatSeq = concatSeq.toSetSeq();\n    }\n    concatSeq = concatSeq.flatten(true);\n    concatSeq.size = iters.reduce(\n      function(sum, seq)  {\n        if (sum !== undefined) {\n          var size = seq.size;\n          if (size !== undefined) {\n            return sum + size;\n          }\n        }\n      },\n      0\n    );\n    return concatSeq;\n  }\n\n\n  function flattenFactory(iterable, depth, useKeys) {\n    var flatSequence = makeSequence(iterable);\n    flatSequence.__iterateUncached = function(fn, reverse) {\n      var iterations = 0;\n      var stopped = false;\n      function flatDeep(iter, currentDepth) {var this$0 = this;\n        iter.__iterate(function(v, k)  {\n          if ((!depth || currentDepth < depth) && isIterable(v)) {\n            flatDeep(v, currentDepth + 1);\n          } else if (fn(v, useKeys ? k : iterations++, this$0) === false) {\n            stopped = true;\n          }\n          return !stopped;\n        }, reverse);\n      }\n      flatDeep(iterable, 0);\n      return iterations;\n    }\n    flatSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(type, reverse);\n      var stack = [];\n      var iterations = 0;\n      return new src_Iterator__Iterator(function()  {\n        while (iterator) {\n          var step = iterator.next();\n          if (step.done !== false) {\n            iterator = stack.pop();\n            continue;\n          }\n          var v = step.value;\n          if (type === ITERATE_ENTRIES) {\n            v = v[1];\n          }\n          if ((!depth || stack.length < depth) && isIterable(v)) {\n            stack.push(iterator);\n            iterator = v.__iterator(type, reverse);\n          } else {\n            return useKeys ? step : iteratorValue(type, iterations++, v, step);\n          }\n        }\n        return iteratorDone();\n      });\n    }\n    return flatSequence;\n  }\n\n\n  function flatMapFactory(iterable, mapper, context) {\n    var coerce = iterableClass(iterable);\n    return iterable.toSeq().map(\n      function(v, k)  {return coerce(mapper.call(context, v, k, iterable))}\n    ).flatten(true);\n  }\n\n\n  function interposeFactory(iterable, separator) {\n    var interposedSequence = makeSequence(iterable);\n    interposedSequence.size = iterable.size && iterable.size * 2 -1;\n    interposedSequence.__iterateUncached = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      iterable.__iterate(function(v, k) \n        {return (!iterations || fn(separator, iterations++, this$0) !== false) &&\n        fn(v, iterations++, this$0) !== false},\n        reverse\n      );\n      return iterations;\n    };\n    interposedSequence.__iteratorUncached = function(type, reverse) {\n      var iterator = iterable.__iterator(ITERATE_VALUES, reverse);\n      var iterations = 0;\n      var step;\n      return new src_Iterator__Iterator(function()  {\n        if (!step || iterations % 2) {\n          step = iterator.next();\n          if (step.done) {\n            return step;\n          }\n        }\n        return iterations % 2 ?\n          iteratorValue(type, iterations++, separator) :\n          iteratorValue(type, iterations++, step.value, step);\n      });\n    };\n    return interposedSequence;\n  }\n\n\n  function sortFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    var isKeyedIterable = isKeyed(iterable);\n    var index = 0;\n    var entries = iterable.toSeq().map(\n      function(v, k)  {return [k, v, index++, mapper ? mapper(v, k, iterable) : v]}\n    ).toArray();\n    entries.sort(function(a, b)  {return comparator(a[3], b[3]) || a[2] - b[2]}).forEach(\n      isKeyedIterable ?\n      function(v, i)  { entries[i].length = 2; } :\n      function(v, i)  { entries[i] = v[1]; }\n    );\n    return isKeyedIterable ? KeyedSeq(entries) :\n      isIndexed(iterable) ? IndexedSeq(entries) :\n      SetSeq(entries);\n  }\n\n\n  function maxFactory(iterable, comparator, mapper) {\n    if (!comparator) {\n      comparator = defaultComparator;\n    }\n    if (mapper) {\n      var entry = iterable.toSeq()\n        .map(function(v, k)  {return [v, mapper(v, k, iterable)]})\n        .reduce(function(a, b)  {return maxCompare(comparator, a[1], b[1]) ? b : a});\n      return entry && entry[0];\n    } else {\n      return iterable.reduce(function(a, b)  {return maxCompare(comparator, a, b) ? b : a});\n    }\n  }\n\n  function maxCompare(comparator, a, b) {\n    var comp = comparator(b, a);\n    // b is considered the new max if the comparator declares them equal, but\n    // they are not equal and b is in fact a nullish value.\n    return (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) || comp > 0;\n  }\n\n\n  function zipWithFactory(keyIter, zipper, iters) {\n    var zipSequence = makeSequence(keyIter);\n    zipSequence.size = new ArraySeq(iters).map(function(i ) {return i.size}).min();\n    // Note: this a generic base implementation of __iterate in terms of\n    // __iterator which may be more generically useful in the future.\n    zipSequence.__iterate = function(fn, reverse) {\n      /* generic:\n      var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        iterations++;\n        if (fn(step.value[1], step.value[0], this) === false) {\n          break;\n        }\n      }\n      return iterations;\n      */\n      // indexed:\n      var iterator = this.__iterator(ITERATE_VALUES, reverse);\n      var step;\n      var iterations = 0;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n      return iterations;\n    };\n    zipSequence.__iteratorUncached = function(type, reverse) {\n      var iterators = iters.map(function(i )\n        {return (i = Iterable(i), getIterator(reverse ? i.reverse() : i))}\n      );\n      var iterations = 0;\n      var isDone = false;\n      return new src_Iterator__Iterator(function()  {\n        var steps;\n        if (!isDone) {\n          steps = iterators.map(function(i ) {return i.next()});\n          isDone = steps.some(function(s ) {return s.done});\n        }\n        if (isDone) {\n          return iteratorDone();\n        }\n        return iteratorValue(\n          type,\n          iterations++,\n          zipper.apply(null, steps.map(function(s ) {return s.value}))\n        );\n      });\n    };\n    return zipSequence\n  }\n\n\n  // #pragma Helper Functions\n\n  function reify(iter, seq) {\n    return isSeq(iter) ? seq : iter.constructor(seq);\n  }\n\n  function validateEntry(entry) {\n    if (entry !== Object(entry)) {\n      throw new TypeError('Expected [K, V] tuple: ' + entry);\n    }\n  }\n\n  function resolveSize(iter) {\n    assertNotInfinite(iter.size);\n    return ensureSize(iter);\n  }\n\n  function iterableClass(iterable) {\n    return isKeyed(iterable) ? KeyedIterable :\n      isIndexed(iterable) ? IndexedIterable :\n      SetIterable;\n  }\n\n  function makeSequence(iterable) {\n    return Object.create(\n      (\n        isKeyed(iterable) ? KeyedSeq :\n        isIndexed(iterable) ? IndexedSeq :\n        SetSeq\n      ).prototype\n    );\n  }\n\n  function cacheResultThrough() {\n    if (this._iter.cacheResult) {\n      this._iter.cacheResult();\n      this.size = this._iter.size;\n      return this;\n    } else {\n      return Seq.prototype.cacheResult.call(this);\n    }\n  }\n\n  function defaultComparator(a, b) {\n    return a > b ? 1 : a < b ? -1 : 0;\n  }\n\n  function forceIterator(keyPath) {\n    var iter = getIterator(keyPath);\n    if (!iter) {\n      // Array might not be iterable in this environment, so we need a fallback\n      // to our wrapped type.\n      if (!isArrayLike(keyPath)) {\n        throw new TypeError('Expected iterable or array-like: ' + keyPath);\n      }\n      iter = getIterator(Iterable(keyPath));\n    }\n    return iter;\n  }\n\n  createClass(src_Map__Map, KeyedCollection);\n\n    // @pragma Construction\n\n    function src_Map__Map(value) {\n      return value === null || value === undefined ? emptyMap() :\n        isMap(value) && !isOrdered(value) ? value :\n        emptyMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    src_Map__Map.prototype.toString = function() {\n      return this.__toString('Map {', '}');\n    };\n\n    // @pragma Access\n\n    src_Map__Map.prototype.get = function(k, notSetValue) {\n      return this._root ?\n        this._root.get(0, undefined, k, notSetValue) :\n        notSetValue;\n    };\n\n    // @pragma Modification\n\n    src_Map__Map.prototype.set = function(k, v) {\n      return updateMap(this, k, v);\n    };\n\n    src_Map__Map.prototype.setIn = function(keyPath, v) {\n      return this.updateIn(keyPath, NOT_SET, function()  {return v});\n    };\n\n    src_Map__Map.prototype.remove = function(k) {\n      return updateMap(this, k, NOT_SET);\n    };\n\n    src_Map__Map.prototype.deleteIn = function(keyPath) {\n      return this.updateIn(keyPath, function()  {return NOT_SET});\n    };\n\n    src_Map__Map.prototype.update = function(k, notSetValue, updater) {\n      return arguments.length === 1 ?\n        k(this) :\n        this.updateIn([k], notSetValue, updater);\n    };\n\n    src_Map__Map.prototype.updateIn = function(keyPath, notSetValue, updater) {\n      if (!updater) {\n        updater = notSetValue;\n        notSetValue = undefined;\n      }\n      var updatedValue = updateInDeepMap(\n        this,\n        forceIterator(keyPath),\n        notSetValue,\n        updater\n      );\n      return updatedValue === NOT_SET ? undefined : updatedValue;\n    };\n\n    src_Map__Map.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._root = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyMap();\n    };\n\n    // @pragma Composition\n\n    src_Map__Map.prototype.merge = function(/*...iters*/) {\n      return mergeIntoMapWith(this, undefined, arguments);\n    };\n\n    src_Map__Map.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, merger, iters);\n    };\n\n    src_Map__Map.prototype.mergeIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.merge === 'function' ?\n          m.merge.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    src_Map__Map.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoMapWith(this, deepMerger(undefined), arguments);\n    };\n\n    src_Map__Map.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoMapWith(this, deepMerger(merger), iters);\n    };\n\n    src_Map__Map.prototype.mergeDeepIn = function(keyPath) {var iters = SLICE$0.call(arguments, 1);\n      return this.updateIn(\n        keyPath,\n        emptyMap(),\n        function(m ) {return typeof m.mergeDeep === 'function' ?\n          m.mergeDeep.apply(m, iters) :\n          iters[iters.length - 1]}\n      );\n    };\n\n    src_Map__Map.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator));\n    };\n\n    src_Map__Map.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedMap(sortFactory(this, comparator, mapper));\n    };\n\n    // @pragma Mutability\n\n    src_Map__Map.prototype.withMutations = function(fn) {\n      var mutable = this.asMutable();\n      fn(mutable);\n      return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n    };\n\n    src_Map__Map.prototype.asMutable = function() {\n      return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n    };\n\n    src_Map__Map.prototype.asImmutable = function() {\n      return this.__ensureOwner();\n    };\n\n    src_Map__Map.prototype.wasAltered = function() {\n      return this.__altered;\n    };\n\n    src_Map__Map.prototype.__iterator = function(type, reverse) {\n      return new MapIterator(this, type, reverse);\n    };\n\n    src_Map__Map.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      var iterations = 0;\n      this._root && this._root.iterate(function(entry ) {\n        iterations++;\n        return fn(entry[1], entry[0], this$0);\n      }, reverse);\n      return iterations;\n    };\n\n    src_Map__Map.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeMap(this.size, this._root, ownerID, this.__hash);\n    };\n\n\n  function isMap(maybeMap) {\n    return !!(maybeMap && maybeMap[IS_MAP_SENTINEL]);\n  }\n\n  src_Map__Map.isMap = isMap;\n\n  var IS_MAP_SENTINEL = '@@__IMMUTABLE_MAP__@@';\n\n  var MapPrototype = src_Map__Map.prototype;\n  MapPrototype[IS_MAP_SENTINEL] = true;\n  MapPrototype[DELETE] = MapPrototype.remove;\n  MapPrototype.removeIn = MapPrototype.deleteIn;\n\n\n  // #pragma Trie Nodes\n\n\n\n    function ArrayMapNode(ownerID, entries) {\n      this.ownerID = ownerID;\n      this.entries = entries;\n    }\n\n    ArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    ArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && entries.length === 1) {\n        return; // undefined\n      }\n\n      if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n        return createNodes(ownerID, entries, key, value);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new ArrayMapNode(ownerID, newEntries);\n    };\n\n\n\n\n    function BitmapIndexedNode(ownerID, bitmap, nodes) {\n      this.ownerID = ownerID;\n      this.bitmap = bitmap;\n      this.nodes = nodes;\n    }\n\n    BitmapIndexedNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var bit = (1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK));\n      var bitmap = this.bitmap;\n      return (bitmap & bit) === 0 ? notSetValue :\n        this.nodes[popCount(bitmap & (bit - 1))].get(shift + SHIFT, keyHash, key, notSetValue);\n    };\n\n    BitmapIndexedNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var bit = 1 << keyHashFrag;\n      var bitmap = this.bitmap;\n      var exists = (bitmap & bit) !== 0;\n\n      if (!exists && value === NOT_SET) {\n        return this;\n      }\n\n      var idx = popCount(bitmap & (bit - 1));\n      var nodes = this.nodes;\n      var node = exists ? nodes[idx] : undefined;\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n\n      if (newNode === node) {\n        return this;\n      }\n\n      if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n        return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n      }\n\n      if (exists && !newNode && nodes.length === 2 && isLeafNode(nodes[idx ^ 1])) {\n        return nodes[idx ^ 1];\n      }\n\n      if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n        return newNode;\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newBitmap = exists ? newNode ? bitmap : bitmap ^ bit : bitmap | bit;\n      var newNodes = exists ? newNode ?\n        setIn(nodes, idx, newNode, isEditable) :\n        spliceOut(nodes, idx, isEditable) :\n        spliceIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.bitmap = newBitmap;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n    };\n\n\n\n\n    function HashArrayMapNode(ownerID, count, nodes) {\n      this.ownerID = ownerID;\n      this.count = count;\n      this.nodes = nodes;\n    }\n\n    HashArrayMapNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var node = this.nodes[idx];\n      return node ? node.get(shift + SHIFT, keyHash, key, notSetValue) : notSetValue;\n    };\n\n    HashArrayMapNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n      var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n      var removed = value === NOT_SET;\n      var nodes = this.nodes;\n      var node = nodes[idx];\n\n      if (removed && !node) {\n        return this;\n      }\n\n      var newNode = updateNode(node, ownerID, shift + SHIFT, keyHash, key, value, didChangeSize, didAlter);\n      if (newNode === node) {\n        return this;\n      }\n\n      var newCount = this.count;\n      if (!node) {\n        newCount++;\n      } else if (!newNode) {\n        newCount--;\n        if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n          return packNodes(ownerID, nodes, newCount, idx);\n        }\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newNodes = setIn(nodes, idx, newNode, isEditable);\n\n      if (isEditable) {\n        this.count = newCount;\n        this.nodes = newNodes;\n        return this;\n      }\n\n      return new HashArrayMapNode(ownerID, newCount, newNodes);\n    };\n\n\n\n\n    function HashCollisionNode(ownerID, keyHash, entries) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entries = entries;\n    }\n\n    HashCollisionNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      var entries = this.entries;\n      for (var ii = 0, len = entries.length; ii < len; ii++) {\n        if (is(key, entries[ii][0])) {\n          return entries[ii][1];\n        }\n      }\n      return notSetValue;\n    };\n\n    HashCollisionNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      if (keyHash === undefined) {\n        keyHash = hash(key);\n      }\n\n      var removed = value === NOT_SET;\n\n      if (keyHash !== this.keyHash) {\n        if (removed) {\n          return this;\n        }\n        SetRef(didAlter);\n        SetRef(didChangeSize);\n        return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n      }\n\n      var entries = this.entries;\n      var idx = 0;\n      for (var len = entries.length; idx < len; idx++) {\n        if (is(key, entries[idx][0])) {\n          break;\n        }\n      }\n      var exists = idx < len;\n\n      if (exists ? entries[idx][1] === value : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n      (removed || !exists) && SetRef(didChangeSize);\n\n      if (removed && len === 2) {\n        return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n      }\n\n      var isEditable = ownerID && ownerID === this.ownerID;\n      var newEntries = isEditable ? entries : arrCopy(entries);\n\n      if (exists) {\n        if (removed) {\n          idx === len - 1 ? newEntries.pop() : (newEntries[idx] = newEntries.pop());\n        } else {\n          newEntries[idx] = [key, value];\n        }\n      } else {\n        newEntries.push([key, value]);\n      }\n\n      if (isEditable) {\n        this.entries = newEntries;\n        return this;\n      }\n\n      return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n    };\n\n\n\n\n    function ValueNode(ownerID, keyHash, entry) {\n      this.ownerID = ownerID;\n      this.keyHash = keyHash;\n      this.entry = entry;\n    }\n\n    ValueNode.prototype.get = function(shift, keyHash, key, notSetValue) {\n      return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n    };\n\n    ValueNode.prototype.update = function(ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n      var removed = value === NOT_SET;\n      var keyMatch = is(key, this.entry[0]);\n      if (keyMatch ? value === this.entry[1] : removed) {\n        return this;\n      }\n\n      SetRef(didAlter);\n\n      if (removed) {\n        SetRef(didChangeSize);\n        return; // undefined\n      }\n\n      if (keyMatch) {\n        if (ownerID && ownerID === this.ownerID) {\n          this.entry[1] = value;\n          return this;\n        }\n        return new ValueNode(ownerID, this.keyHash, [key, value]);\n      }\n\n      SetRef(didChangeSize);\n      return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n    };\n\n\n\n  // #pragma Iterators\n\n  ArrayMapNode.prototype.iterate =\n  HashCollisionNode.prototype.iterate = function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  }\n\n  BitmapIndexedNode.prototype.iterate =\n  HashArrayMapNode.prototype.iterate = function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  }\n\n  ValueNode.prototype.iterate = function (fn, reverse) {\n    return fn(this.entry);\n  }\n\n  createClass(MapIterator, src_Iterator__Iterator);\n\n    function MapIterator(map, type, reverse) {\n      this._type = type;\n      this._reverse = reverse;\n      this._stack = map._root && mapIteratorFrame(map._root);\n    }\n\n    MapIterator.prototype.next = function() {\n      var type = this._type;\n      var stack = this._stack;\n      while (stack) {\n        var node = stack.node;\n        var index = stack.index++;\n        var maxIndex;\n        if (node.entry) {\n          if (index === 0) {\n            return mapIteratorValue(type, node.entry);\n          }\n        } else if (node.entries) {\n          maxIndex = node.entries.length - 1;\n          if (index <= maxIndex) {\n            return mapIteratorValue(type, node.entries[this._reverse ? maxIndex - index : index]);\n          }\n        } else {\n          maxIndex = node.nodes.length - 1;\n          if (index <= maxIndex) {\n            var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n            if (subNode) {\n              if (subNode.entry) {\n                return mapIteratorValue(type, subNode.entry);\n              }\n              stack = this._stack = mapIteratorFrame(subNode, stack);\n            }\n            continue;\n          }\n        }\n        stack = this._stack = this._stack.__prev;\n      }\n      return iteratorDone();\n    };\n\n\n  function mapIteratorValue(type, entry) {\n    return iteratorValue(type, entry[0], entry[1]);\n  }\n\n  function mapIteratorFrame(node, prev) {\n    return {\n      node: node,\n      index: 0,\n      __prev: prev\n    };\n  }\n\n  function makeMap(size, root, ownerID, hash) {\n    var map = Object.create(MapPrototype);\n    map.size = size;\n    map._root = root;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_MAP;\n  function emptyMap() {\n    return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n  }\n\n  function updateMap(map, k, v) {\n    var newRoot;\n    var newSize;\n    if (!map._root) {\n      if (v === NOT_SET) {\n        return map;\n      }\n      newSize = 1;\n      newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n    } else {\n      var didChangeSize = MakeRef(CHANGE_LENGTH);\n      var didAlter = MakeRef(DID_ALTER);\n      newRoot = updateNode(map._root, map.__ownerID, 0, undefined, k, v, didChangeSize, didAlter);\n      if (!didAlter.value) {\n        return map;\n      }\n      newSize = map.size + (didChangeSize.value ? v === NOT_SET ? -1 : 1 : 0);\n    }\n    if (map.__ownerID) {\n      map.size = newSize;\n      map._root = newRoot;\n      map.__hash = undefined;\n      map.__altered = true;\n      return map;\n    }\n    return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n  }\n\n  function updateNode(node, ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n    if (!node) {\n      if (value === NOT_SET) {\n        return node;\n      }\n      SetRef(didAlter);\n      SetRef(didChangeSize);\n      return new ValueNode(ownerID, keyHash, [key, value]);\n    }\n    return node.update(ownerID, shift, keyHash, key, value, didChangeSize, didAlter);\n  }\n\n  function isLeafNode(node) {\n    return node.constructor === ValueNode || node.constructor === HashCollisionNode;\n  }\n\n  function mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n    if (node.keyHash === keyHash) {\n      return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n    }\n\n    var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n    var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n    var newNode;\n    var nodes = idx1 === idx2 ?\n      [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)] :\n      ((newNode = new ValueNode(ownerID, keyHash, entry)), idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n    return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n  }\n\n  function createNodes(ownerID, entries, key, value) {\n    if (!ownerID) {\n      ownerID = new OwnerID();\n    }\n    var node = new ValueNode(ownerID, hash(key), [key, value]);\n    for (var ii = 0; ii < entries.length; ii++) {\n      var entry = entries[ii];\n      node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n    }\n    return node;\n  }\n\n  function packNodes(ownerID, nodes, count, excluding) {\n    var bitmap = 0;\n    var packedII = 0;\n    var packedNodes = new Array(count);\n    for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n      var node = nodes[ii];\n      if (node !== undefined && ii !== excluding) {\n        bitmap |= bit;\n        packedNodes[packedII++] = node;\n      }\n    }\n    return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n  }\n\n  function expandNodes(ownerID, nodes, bitmap, including, node) {\n    var count = 0;\n    var expandedNodes = new Array(SIZE);\n    for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n      expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n    }\n    expandedNodes[including] = node;\n    return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n  }\n\n  function mergeIntoMapWith(map, merger, iterables) {\n    var iters = [];\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = KeyedIterable(value);\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    return mergeIntoCollectionWith(map, merger, iters);\n  }\n\n  function deepMerger(merger) {\n    return function(existing, value, key) \n      {return existing && existing.mergeDeepWith && isIterable(value) ?\n        existing.mergeDeepWith(merger, value) :\n        merger ? merger(existing, value, key) : value};\n  }\n\n  function mergeIntoCollectionWith(collection, merger, iters) {\n    iters = iters.filter(function(x ) {return x.size !== 0});\n    if (iters.length === 0) {\n      return collection;\n    }\n    if (collection.size === 0 && !collection.__ownerID && iters.length === 1) {\n      return collection.constructor(iters[0]);\n    }\n    return collection.withMutations(function(collection ) {\n      var mergeIntoMap = merger ?\n        function(value, key)  {\n          collection.update(key, NOT_SET, function(existing )\n            {return existing === NOT_SET ? value : merger(existing, value, key)}\n          );\n        } :\n        function(value, key)  {\n          collection.set(key, value);\n        }\n      for (var ii = 0; ii < iters.length; ii++) {\n        iters[ii].forEach(mergeIntoMap);\n      }\n    });\n  }\n\n  function updateInDeepMap(existing, keyPathIter, notSetValue, updater) {\n    var isNotSet = existing === NOT_SET;\n    var step = keyPathIter.next();\n    if (step.done) {\n      var existingValue = isNotSet ? notSetValue : existing;\n      var newValue = updater(existingValue);\n      return newValue === existingValue ? existing : newValue;\n    }\n    invariant(\n      isNotSet || (existing && existing.set),\n      'invalid keyPath'\n    );\n    var key = step.value;\n    var nextExisting = isNotSet ? NOT_SET : existing.get(key, NOT_SET);\n    var nextUpdated = updateInDeepMap(\n      nextExisting,\n      keyPathIter,\n      notSetValue,\n      updater\n    );\n    return nextUpdated === nextExisting ? existing :\n      nextUpdated === NOT_SET ? existing.remove(key) :\n      (isNotSet ? emptyMap() : existing).set(key, nextUpdated);\n  }\n\n  function popCount(x) {\n    x = x - ((x >> 1) & 0x55555555);\n    x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n    x = (x + (x >> 4)) & 0x0f0f0f0f;\n    x = x + (x >> 8);\n    x = x + (x >> 16);\n    return x & 0x7f;\n  }\n\n  function setIn(array, idx, val, canEdit) {\n    var newArray = canEdit ? array : arrCopy(array);\n    newArray[idx] = val;\n    return newArray;\n  }\n\n  function spliceIn(array, idx, val, canEdit) {\n    var newLen = array.length + 1;\n    if (canEdit && idx + 1 === newLen) {\n      array[idx] = val;\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        newArray[ii] = val;\n        after = -1;\n      } else {\n        newArray[ii] = array[ii + after];\n      }\n    }\n    return newArray;\n  }\n\n  function spliceOut(array, idx, canEdit) {\n    var newLen = array.length - 1;\n    if (canEdit && idx === newLen) {\n      array.pop();\n      return array;\n    }\n    var newArray = new Array(newLen);\n    var after = 0;\n    for (var ii = 0; ii < newLen; ii++) {\n      if (ii === idx) {\n        after = 1;\n      }\n      newArray[ii] = array[ii + after];\n    }\n    return newArray;\n  }\n\n  var MAX_ARRAY_MAP_SIZE = SIZE / 4;\n  var MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\n  var MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\n  createClass(List, IndexedCollection);\n\n    // @pragma Construction\n\n    function List(value) {\n      var empty = emptyList();\n      if (value === null || value === undefined) {\n        return empty;\n      }\n      if (isList(value)) {\n        return value;\n      }\n      var iter = IndexedIterable(value);\n      var size = iter.size;\n      if (size === 0) {\n        return empty;\n      }\n      assertNotInfinite(size);\n      if (size > 0 && size < SIZE) {\n        return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n      }\n      return empty.withMutations(function(list ) {\n        list.setSize(size);\n        iter.forEach(function(v, i)  {return list.set(i, v)});\n      });\n    }\n\n    List.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    List.prototype.toString = function() {\n      return this.__toString('List [', ']');\n    };\n\n    // @pragma Access\n\n    List.prototype.get = function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      if (index >= 0 && index < this.size) {\n        index += this._origin;\n        var node = listNodeFor(this, index);\n        return node && node.array[index & MASK];\n      }\n      return notSetValue;\n    };\n\n    // @pragma Modification\n\n    List.prototype.set = function(index, value) {\n      return updateList(this, index, value);\n    };\n\n    List.prototype.remove = function(index) {\n      return !this.has(index) ? this :\n        index === 0 ? this.shift() :\n        index === this.size - 1 ? this.pop() :\n        this.splice(index, 1);\n    };\n\n    List.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = this._origin = this._capacity = 0;\n        this._level = SHIFT;\n        this._root = this._tail = null;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyList();\n    };\n\n    List.prototype.push = function(/*...values*/) {\n      var values = arguments;\n      var oldSize = this.size;\n      return this.withMutations(function(list ) {\n        setListBounds(list, 0, oldSize + values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(oldSize + ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.pop = function() {\n      return setListBounds(this, 0, -1);\n    };\n\n    List.prototype.unshift = function(/*...values*/) {\n      var values = arguments;\n      return this.withMutations(function(list ) {\n        setListBounds(list, -values.length);\n        for (var ii = 0; ii < values.length; ii++) {\n          list.set(ii, values[ii]);\n        }\n      });\n    };\n\n    List.prototype.shift = function() {\n      return setListBounds(this, 1);\n    };\n\n    // @pragma Composition\n\n    List.prototype.merge = function(/*...iters*/) {\n      return mergeIntoListWith(this, undefined, arguments);\n    };\n\n    List.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, merger, iters);\n    };\n\n    List.prototype.mergeDeep = function(/*...iters*/) {\n      return mergeIntoListWith(this, deepMerger(undefined), arguments);\n    };\n\n    List.prototype.mergeDeepWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return mergeIntoListWith(this, deepMerger(merger), iters);\n    };\n\n    List.prototype.setSize = function(size) {\n      return setListBounds(this, 0, size);\n    };\n\n    // @pragma Iteration\n\n    List.prototype.slice = function(begin, end) {\n      var size = this.size;\n      if (wholeSlice(begin, end, size)) {\n        return this;\n      }\n      return setListBounds(\n        this,\n        resolveBegin(begin, size),\n        resolveEnd(end, size)\n      );\n    };\n\n    List.prototype.__iterator = function(type, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      return new src_Iterator__Iterator(function()  {\n        var value = values();\n        return value === DONE ?\n          iteratorDone() :\n          iteratorValue(type, index++, value);\n      });\n    };\n\n    List.prototype.__iterate = function(fn, reverse) {\n      var index = 0;\n      var values = iterateList(this, reverse);\n      var value;\n      while ((value = values()) !== DONE) {\n        if (fn(value, index++, this) === false) {\n          break;\n        }\n      }\n      return index;\n    };\n\n    List.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        return this;\n      }\n      return makeList(this._origin, this._capacity, this._level, this._root, this._tail, ownerID, this.__hash);\n    };\n\n\n  function isList(maybeList) {\n    return !!(maybeList && maybeList[IS_LIST_SENTINEL]);\n  }\n\n  List.isList = isList;\n\n  var IS_LIST_SENTINEL = '@@__IMMUTABLE_LIST__@@';\n\n  var ListPrototype = List.prototype;\n  ListPrototype[IS_LIST_SENTINEL] = true;\n  ListPrototype[DELETE] = ListPrototype.remove;\n  ListPrototype.setIn = MapPrototype.setIn;\n  ListPrototype.deleteIn =\n  ListPrototype.removeIn = MapPrototype.removeIn;\n  ListPrototype.update = MapPrototype.update;\n  ListPrototype.updateIn = MapPrototype.updateIn;\n  ListPrototype.mergeIn = MapPrototype.mergeIn;\n  ListPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  ListPrototype.withMutations = MapPrototype.withMutations;\n  ListPrototype.asMutable = MapPrototype.asMutable;\n  ListPrototype.asImmutable = MapPrototype.asImmutable;\n  ListPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n\n    function VNode(array, ownerID) {\n      this.array = array;\n      this.ownerID = ownerID;\n    }\n\n    // TODO: seems like these methods are very similar\n\n    VNode.prototype.removeBefore = function(ownerID, level, index) {\n      if (index === level ? 1 << level : 0 || this.array.length === 0) {\n        return this;\n      }\n      var originIndex = (index >>> level) & MASK;\n      if (originIndex >= this.array.length) {\n        return new VNode([], ownerID);\n      }\n      var removingFirst = originIndex === 0;\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[originIndex];\n        newChild = oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && removingFirst) {\n          return this;\n        }\n      }\n      if (removingFirst && !newChild) {\n        return this;\n      }\n      var editable = editableVNode(this, ownerID);\n      if (!removingFirst) {\n        for (var ii = 0; ii < originIndex; ii++) {\n          editable.array[ii] = undefined;\n        }\n      }\n      if (newChild) {\n        editable.array[originIndex] = newChild;\n      }\n      return editable;\n    };\n\n    VNode.prototype.removeAfter = function(ownerID, level, index) {\n      if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n        return this;\n      }\n      var sizeIndex = ((index - 1) >>> level) & MASK;\n      if (sizeIndex >= this.array.length) {\n        return this;\n      }\n\n      var newChild;\n      if (level > 0) {\n        var oldChild = this.array[sizeIndex];\n        newChild = oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n        if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n          return this;\n        }\n      }\n\n      var editable = editableVNode(this, ownerID);\n      editable.array.splice(sizeIndex + 1);\n      if (newChild) {\n        editable.array[sizeIndex] = newChild;\n      }\n      return editable;\n    };\n\n\n\n  var DONE = {};\n\n  function iterateList(list, reverse) {\n    var left = list._origin;\n    var right = list._capacity;\n    var tailPos = getTailOffset(right);\n    var tail = list._tail;\n\n    return iterateNodeOrLeaf(list._root, list._level, 0);\n\n    function iterateNodeOrLeaf(node, level, offset) {\n      return level === 0 ?\n        iterateLeaf(node, offset) :\n        iterateNode(node, level, offset);\n    }\n\n    function iterateLeaf(node, offset) {\n      var array = offset === tailPos ? tail && tail.array : node && node.array;\n      var from = offset > left ? 0 : left - offset;\n      var to = right - offset;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        return array && array[idx];\n      };\n    }\n\n    function iterateNode(node, level, offset) {\n      var values;\n      var array = node && node.array;\n      var from = offset > left ? 0 : (left - offset) >> level;\n      var to = ((right - offset) >> level) + 1;\n      if (to > SIZE) {\n        to = SIZE;\n      }\n      return function()  {\n        do {\n          if (values) {\n            var value = values();\n            if (value !== DONE) {\n              return value;\n            }\n            values = null;\n          }\n          if (from === to) {\n            return DONE;\n          }\n          var idx = reverse ? --to : from++;\n          values = iterateNodeOrLeaf(\n            array && array[idx], level - SHIFT, offset + (idx << level)\n          );\n        } while (true);\n      };\n    }\n  }\n\n  function makeList(origin, capacity, level, root, tail, ownerID, hash) {\n    var list = Object.create(ListPrototype);\n    list.size = capacity - origin;\n    list._origin = origin;\n    list._capacity = capacity;\n    list._level = level;\n    list._root = root;\n    list._tail = tail;\n    list.__ownerID = ownerID;\n    list.__hash = hash;\n    list.__altered = false;\n    return list;\n  }\n\n  var EMPTY_LIST;\n  function emptyList() {\n    return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n  }\n\n  function updateList(list, index, value) {\n    index = wrapIndex(list, index);\n\n    if (index !== index) {\n      return list;\n    }\n\n    if (index >= list.size || index < 0) {\n      return list.withMutations(function(list ) {\n        index < 0 ?\n          setListBounds(list, index).set(0, value) :\n          setListBounds(list, 0, index + 1).set(index, value)\n      });\n    }\n\n    index += list._origin;\n\n    var newTail = list._tail;\n    var newRoot = list._root;\n    var didAlter = MakeRef(DID_ALTER);\n    if (index >= getTailOffset(list._capacity)) {\n      newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n    } else {\n      newRoot = updateVNode(newRoot, list.__ownerID, list._level, index, value, didAlter);\n    }\n\n    if (!didAlter.value) {\n      return list;\n    }\n\n    if (list.__ownerID) {\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n  }\n\n  function updateVNode(node, ownerID, level, index, value, didAlter) {\n    var idx = (index >>> level) & MASK;\n    var nodeHas = node && idx < node.array.length;\n    if (!nodeHas && value === undefined) {\n      return node;\n    }\n\n    var newNode;\n\n    if (level > 0) {\n      var lowerNode = node && node.array[idx];\n      var newLowerNode = updateVNode(lowerNode, ownerID, level - SHIFT, index, value, didAlter);\n      if (newLowerNode === lowerNode) {\n        return node;\n      }\n      newNode = editableVNode(node, ownerID);\n      newNode.array[idx] = newLowerNode;\n      return newNode;\n    }\n\n    if (nodeHas && node.array[idx] === value) {\n      return node;\n    }\n\n    SetRef(didAlter);\n\n    newNode = editableVNode(node, ownerID);\n    if (value === undefined && idx === newNode.array.length - 1) {\n      newNode.array.pop();\n    } else {\n      newNode.array[idx] = value;\n    }\n    return newNode;\n  }\n\n  function editableVNode(node, ownerID) {\n    if (ownerID && node && ownerID === node.ownerID) {\n      return node;\n    }\n    return new VNode(node ? node.array.slice() : [], ownerID);\n  }\n\n  function listNodeFor(list, rawIndex) {\n    if (rawIndex >= getTailOffset(list._capacity)) {\n      return list._tail;\n    }\n    if (rawIndex < 1 << (list._level + SHIFT)) {\n      var node = list._root;\n      var level = list._level;\n      while (node && level > 0) {\n        node = node.array[(rawIndex >>> level) & MASK];\n        level -= SHIFT;\n      }\n      return node;\n    }\n  }\n\n  function setListBounds(list, begin, end) {\n    // Sanitize begin & end using this shorthand for ToInt32(argument)\n    // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n    if (begin !== undefined) {\n      begin = begin | 0;\n    }\n    if (end !== undefined) {\n      end = end | 0;\n    }\n    var owner = list.__ownerID || new OwnerID();\n    var oldOrigin = list._origin;\n    var oldCapacity = list._capacity;\n    var newOrigin = oldOrigin + begin;\n    var newCapacity = end === undefined ? oldCapacity : end < 0 ? oldCapacity + end : oldOrigin + end;\n    if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n      return list;\n    }\n\n    // If it's going to end after it starts, it's empty.\n    if (newOrigin >= newCapacity) {\n      return list.clear();\n    }\n\n    var newLevel = list._level;\n    var newRoot = list._root;\n\n    // New origin might need creating a higher root.\n    var offsetShift = 0;\n    while (newOrigin + offsetShift < 0) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [undefined, newRoot] : [], owner);\n      newLevel += SHIFT;\n      offsetShift += 1 << newLevel;\n    }\n    if (offsetShift) {\n      newOrigin += offsetShift;\n      oldOrigin += offsetShift;\n      newCapacity += offsetShift;\n      oldCapacity += offsetShift;\n    }\n\n    var oldTailOffset = getTailOffset(oldCapacity);\n    var newTailOffset = getTailOffset(newCapacity);\n\n    // New size might need creating a higher root.\n    while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n      newRoot = new VNode(newRoot && newRoot.array.length ? [newRoot] : [], owner);\n      newLevel += SHIFT;\n    }\n\n    // Locate or create the new tail.\n    var oldTail = list._tail;\n    var newTail = newTailOffset < oldTailOffset ?\n      listNodeFor(list, newCapacity - 1) :\n      newTailOffset > oldTailOffset ? new VNode([], owner) : oldTail;\n\n    // Merge Tail into tree.\n    if (oldTail && newTailOffset > oldTailOffset && newOrigin < oldCapacity && oldTail.array.length) {\n      newRoot = editableVNode(newRoot, owner);\n      var node = newRoot;\n      for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n        var idx = (oldTailOffset >>> level) & MASK;\n        node = node.array[idx] = editableVNode(node.array[idx], owner);\n      }\n      node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n    }\n\n    // If the size has been reduced, there's a chance the tail needs to be trimmed.\n    if (newCapacity < oldCapacity) {\n      newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n    }\n\n    // If the new origin is within the tail, then we do not need a root.\n    if (newOrigin >= newTailOffset) {\n      newOrigin -= newTailOffset;\n      newCapacity -= newTailOffset;\n      newLevel = SHIFT;\n      newRoot = null;\n      newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n    } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n      offsetShift = 0;\n\n      // Identify the new top root node of the subtree of the old root.\n      while (newRoot) {\n        var beginIndex = (newOrigin >>> newLevel) & MASK;\n        if (beginIndex !== (newTailOffset >>> newLevel) & MASK) {\n          break;\n        }\n        if (beginIndex) {\n          offsetShift += (1 << newLevel) * beginIndex;\n        }\n        newLevel -= SHIFT;\n        newRoot = newRoot.array[beginIndex];\n      }\n\n      // Trim the new sides of the new root.\n      if (newRoot && newOrigin > oldOrigin) {\n        newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n      }\n      if (newRoot && newTailOffset < oldTailOffset) {\n        newRoot = newRoot.removeAfter(owner, newLevel, newTailOffset - offsetShift);\n      }\n      if (offsetShift) {\n        newOrigin -= offsetShift;\n        newCapacity -= offsetShift;\n      }\n    }\n\n    if (list.__ownerID) {\n      list.size = newCapacity - newOrigin;\n      list._origin = newOrigin;\n      list._capacity = newCapacity;\n      list._level = newLevel;\n      list._root = newRoot;\n      list._tail = newTail;\n      list.__hash = undefined;\n      list.__altered = true;\n      return list;\n    }\n    return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n  }\n\n  function mergeIntoListWith(list, merger, iterables) {\n    var iters = [];\n    var maxSize = 0;\n    for (var ii = 0; ii < iterables.length; ii++) {\n      var value = iterables[ii];\n      var iter = IndexedIterable(value);\n      if (iter.size > maxSize) {\n        maxSize = iter.size;\n      }\n      if (!isIterable(value)) {\n        iter = iter.map(function(v ) {return fromJS(v)});\n      }\n      iters.push(iter);\n    }\n    if (maxSize > list.size) {\n      list = list.setSize(maxSize);\n    }\n    return mergeIntoCollectionWith(list, merger, iters);\n  }\n\n  function getTailOffset(size) {\n    return size < SIZE ? 0 : (((size - 1) >>> SHIFT) << SHIFT);\n  }\n\n  createClass(OrderedMap, src_Map__Map);\n\n    // @pragma Construction\n\n    function OrderedMap(value) {\n      return value === null || value === undefined ? emptyOrderedMap() :\n        isOrderedMap(value) ? value :\n        emptyOrderedMap().withMutations(function(map ) {\n          var iter = KeyedIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v, k)  {return map.set(k, v)});\n        });\n    }\n\n    OrderedMap.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedMap.prototype.toString = function() {\n      return this.__toString('OrderedMap {', '}');\n    };\n\n    // @pragma Access\n\n    OrderedMap.prototype.get = function(k, notSetValue) {\n      var index = this._map.get(k);\n      return index !== undefined ? this._list.get(index)[1] : notSetValue;\n    };\n\n    // @pragma Modification\n\n    OrderedMap.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._map.clear();\n        this._list.clear();\n        return this;\n      }\n      return emptyOrderedMap();\n    };\n\n    OrderedMap.prototype.set = function(k, v) {\n      return updateOrderedMap(this, k, v);\n    };\n\n    OrderedMap.prototype.remove = function(k) {\n      return updateOrderedMap(this, k, NOT_SET);\n    };\n\n    OrderedMap.prototype.wasAltered = function() {\n      return this._map.wasAltered() || this._list.wasAltered();\n    };\n\n    OrderedMap.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._list.__iterate(\n        function(entry ) {return entry && fn(entry[1], entry[0], this$0)},\n        reverse\n      );\n    };\n\n    OrderedMap.prototype.__iterator = function(type, reverse) {\n      return this._list.fromEntrySeq().__iterator(type, reverse);\n    };\n\n    OrderedMap.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      var newList = this._list.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        this._list = newList;\n        return this;\n      }\n      return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n    };\n\n\n  function isOrderedMap(maybeOrderedMap) {\n    return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n  }\n\n  OrderedMap.isOrderedMap = isOrderedMap;\n\n  OrderedMap.prototype[IS_ORDERED_SENTINEL] = true;\n  OrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\n\n\n  function makeOrderedMap(map, list, ownerID, hash) {\n    var omap = Object.create(OrderedMap.prototype);\n    omap.size = map ? map.size : 0;\n    omap._map = map;\n    omap._list = list;\n    omap.__ownerID = ownerID;\n    omap.__hash = hash;\n    return omap;\n  }\n\n  var EMPTY_ORDERED_MAP;\n  function emptyOrderedMap() {\n    return EMPTY_ORDERED_MAP || (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()));\n  }\n\n  function updateOrderedMap(omap, k, v) {\n    var map = omap._map;\n    var list = omap._list;\n    var i = map.get(k);\n    var has = i !== undefined;\n    var newMap;\n    var newList;\n    if (v === NOT_SET) { // removed\n      if (!has) {\n        return omap;\n      }\n      if (list.size >= SIZE && list.size >= map.size * 2) {\n        newList = list.filter(function(entry, idx)  {return entry !== undefined && i !== idx});\n        newMap = newList.toKeyedSeq().map(function(entry ) {return entry[0]}).flip().toMap();\n        if (omap.__ownerID) {\n          newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n        }\n      } else {\n        newMap = map.remove(k);\n        newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n      }\n    } else {\n      if (has) {\n        if (v === list.get(i)[1]) {\n          return omap;\n        }\n        newMap = map;\n        newList = list.set(i, [k, v]);\n      } else {\n        newMap = map.set(k, list.size);\n        newList = list.set(list.size, [k, v]);\n      }\n    }\n    if (omap.__ownerID) {\n      omap.size = newMap.size;\n      omap._map = newMap;\n      omap._list = newList;\n      omap.__hash = undefined;\n      return omap;\n    }\n    return makeOrderedMap(newMap, newList);\n  }\n\n  createClass(Stack, IndexedCollection);\n\n    // @pragma Construction\n\n    function Stack(value) {\n      return value === null || value === undefined ? emptyStack() :\n        isStack(value) ? value :\n        emptyStack().unshiftAll(value);\n    }\n\n    Stack.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    Stack.prototype.toString = function() {\n      return this.__toString('Stack [', ']');\n    };\n\n    // @pragma Access\n\n    Stack.prototype.get = function(index, notSetValue) {\n      var head = this._head;\n      index = wrapIndex(this, index);\n      while (head && index--) {\n        head = head.next;\n      }\n      return head ? head.value : notSetValue;\n    };\n\n    Stack.prototype.peek = function() {\n      return this._head && this._head.value;\n    };\n\n    // @pragma Modification\n\n    Stack.prototype.push = function(/*...values*/) {\n      if (arguments.length === 0) {\n        return this;\n      }\n      var newSize = this.size + arguments.length;\n      var head = this._head;\n      for (var ii = arguments.length - 1; ii >= 0; ii--) {\n        head = {\n          value: arguments[ii],\n          next: head\n        };\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pushAll = function(iter) {\n      iter = IndexedIterable(iter);\n      if (iter.size === 0) {\n        return this;\n      }\n      assertNotInfinite(iter.size);\n      var newSize = this.size;\n      var head = this._head;\n      iter.reverse().forEach(function(value ) {\n        newSize++;\n        head = {\n          value: value,\n          next: head\n        };\n      });\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    Stack.prototype.pop = function() {\n      return this.slice(1);\n    };\n\n    Stack.prototype.unshift = function(/*...values*/) {\n      return this.push.apply(this, arguments);\n    };\n\n    Stack.prototype.unshiftAll = function(iter) {\n      return this.pushAll(iter);\n    };\n\n    Stack.prototype.shift = function() {\n      return this.pop.apply(this, arguments);\n    };\n\n    Stack.prototype.clear = function() {\n      if (this.size === 0) {\n        return this;\n      }\n      if (this.__ownerID) {\n        this.size = 0;\n        this._head = undefined;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return emptyStack();\n    };\n\n    Stack.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      var resolvedBegin = resolveBegin(begin, this.size);\n      var resolvedEnd = resolveEnd(end, this.size);\n      if (resolvedEnd !== this.size) {\n        // super.slice(begin, end);\n        return IndexedCollection.prototype.slice.call(this, begin, end);\n      }\n      var newSize = this.size - resolvedBegin;\n      var head = this._head;\n      while (resolvedBegin--) {\n        head = head.next;\n      }\n      if (this.__ownerID) {\n        this.size = newSize;\n        this._head = head;\n        this.__hash = undefined;\n        this.__altered = true;\n        return this;\n      }\n      return makeStack(newSize, head);\n    };\n\n    // @pragma Mutability\n\n    Stack.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this.__altered = false;\n        return this;\n      }\n      return makeStack(this.size, this._head, ownerID, this.__hash);\n    };\n\n    // @pragma Iteration\n\n    Stack.prototype.__iterate = function(fn, reverse) {\n      if (reverse) {\n        return this.reverse().__iterate(fn);\n      }\n      var iterations = 0;\n      var node = this._head;\n      while (node) {\n        if (fn(node.value, iterations++, this) === false) {\n          break;\n        }\n        node = node.next;\n      }\n      return iterations;\n    };\n\n    Stack.prototype.__iterator = function(type, reverse) {\n      if (reverse) {\n        return this.reverse().__iterator(type);\n      }\n      var iterations = 0;\n      var node = this._head;\n      return new src_Iterator__Iterator(function()  {\n        if (node) {\n          var value = node.value;\n          node = node.next;\n          return iteratorValue(type, iterations++, value);\n        }\n        return iteratorDone();\n      });\n    };\n\n\n  function isStack(maybeStack) {\n    return !!(maybeStack && maybeStack[IS_STACK_SENTINEL]);\n  }\n\n  Stack.isStack = isStack;\n\n  var IS_STACK_SENTINEL = '@@__IMMUTABLE_STACK__@@';\n\n  var StackPrototype = Stack.prototype;\n  StackPrototype[IS_STACK_SENTINEL] = true;\n  StackPrototype.withMutations = MapPrototype.withMutations;\n  StackPrototype.asMutable = MapPrototype.asMutable;\n  StackPrototype.asImmutable = MapPrototype.asImmutable;\n  StackPrototype.wasAltered = MapPrototype.wasAltered;\n\n\n  function makeStack(size, head, ownerID, hash) {\n    var map = Object.create(StackPrototype);\n    map.size = size;\n    map._head = head;\n    map.__ownerID = ownerID;\n    map.__hash = hash;\n    map.__altered = false;\n    return map;\n  }\n\n  var EMPTY_STACK;\n  function emptyStack() {\n    return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n  }\n\n  createClass(src_Set__Set, SetCollection);\n\n    // @pragma Construction\n\n    function src_Set__Set(value) {\n      return value === null || value === undefined ? emptySet() :\n        isSet(value) && !isOrdered(value) ? value :\n        emptySet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    src_Set__Set.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    src_Set__Set.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    src_Set__Set.prototype.toString = function() {\n      return this.__toString('Set {', '}');\n    };\n\n    // @pragma Access\n\n    src_Set__Set.prototype.has = function(value) {\n      return this._map.has(value);\n    };\n\n    // @pragma Modification\n\n    src_Set__Set.prototype.add = function(value) {\n      return updateSet(this, this._map.set(value, true));\n    };\n\n    src_Set__Set.prototype.remove = function(value) {\n      return updateSet(this, this._map.remove(value));\n    };\n\n    src_Set__Set.prototype.clear = function() {\n      return updateSet(this, this._map.clear());\n    };\n\n    // @pragma Composition\n\n    src_Set__Set.prototype.union = function() {var iters = SLICE$0.call(arguments, 0);\n      iters = iters.filter(function(x ) {return x.size !== 0});\n      if (iters.length === 0) {\n        return this;\n      }\n      if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n        return this.constructor(iters[0]);\n      }\n      return this.withMutations(function(set ) {\n        for (var ii = 0; ii < iters.length; ii++) {\n          SetIterable(iters[ii]).forEach(function(value ) {return set.add(value)});\n        }\n      });\n    };\n\n    src_Set__Set.prototype.intersect = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (!iters.every(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    src_Set__Set.prototype.subtract = function() {var iters = SLICE$0.call(arguments, 0);\n      if (iters.length === 0) {\n        return this;\n      }\n      iters = iters.map(function(iter ) {return SetIterable(iter)});\n      var originalSet = this;\n      return this.withMutations(function(set ) {\n        originalSet.forEach(function(value ) {\n          if (iters.some(function(iter ) {return iter.includes(value)})) {\n            set.remove(value);\n          }\n        });\n      });\n    };\n\n    src_Set__Set.prototype.merge = function() {\n      return this.union.apply(this, arguments);\n    };\n\n    src_Set__Set.prototype.mergeWith = function(merger) {var iters = SLICE$0.call(arguments, 1);\n      return this.union.apply(this, iters);\n    };\n\n    src_Set__Set.prototype.sort = function(comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator));\n    };\n\n    src_Set__Set.prototype.sortBy = function(mapper, comparator) {\n      // Late binding\n      return OrderedSet(sortFactory(this, comparator, mapper));\n    };\n\n    src_Set__Set.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    src_Set__Set.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return this._map.__iterate(function(_, k)  {return fn(k, k, this$0)}, reverse);\n    };\n\n    src_Set__Set.prototype.__iterator = function(type, reverse) {\n      return this._map.map(function(_, k)  {return k}).__iterator(type, reverse);\n    };\n\n    src_Set__Set.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return this.__make(newMap, ownerID);\n    };\n\n\n  function isSet(maybeSet) {\n    return !!(maybeSet && maybeSet[IS_SET_SENTINEL]);\n  }\n\n  src_Set__Set.isSet = isSet;\n\n  var IS_SET_SENTINEL = '@@__IMMUTABLE_SET__@@';\n\n  var SetPrototype = src_Set__Set.prototype;\n  SetPrototype[IS_SET_SENTINEL] = true;\n  SetPrototype[DELETE] = SetPrototype.remove;\n  SetPrototype.mergeDeep = SetPrototype.merge;\n  SetPrototype.mergeDeepWith = SetPrototype.mergeWith;\n  SetPrototype.withMutations = MapPrototype.withMutations;\n  SetPrototype.asMutable = MapPrototype.asMutable;\n  SetPrototype.asImmutable = MapPrototype.asImmutable;\n\n  SetPrototype.__empty = emptySet;\n  SetPrototype.__make = makeSet;\n\n  function updateSet(set, newMap) {\n    if (set.__ownerID) {\n      set.size = newMap.size;\n      set._map = newMap;\n      return set;\n    }\n    return newMap === set._map ? set :\n      newMap.size === 0 ? set.__empty() :\n      set.__make(newMap);\n  }\n\n  function makeSet(map, ownerID) {\n    var set = Object.create(SetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_SET;\n  function emptySet() {\n    return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n  }\n\n  createClass(OrderedSet, src_Set__Set);\n\n    // @pragma Construction\n\n    function OrderedSet(value) {\n      return value === null || value === undefined ? emptyOrderedSet() :\n        isOrderedSet(value) ? value :\n        emptyOrderedSet().withMutations(function(set ) {\n          var iter = SetIterable(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function(v ) {return set.add(v)});\n        });\n    }\n\n    OrderedSet.of = function(/*...values*/) {\n      return this(arguments);\n    };\n\n    OrderedSet.fromKeys = function(value) {\n      return this(KeyedIterable(value).keySeq());\n    };\n\n    OrderedSet.prototype.toString = function() {\n      return this.__toString('OrderedSet {', '}');\n    };\n\n\n  function isOrderedSet(maybeOrderedSet) {\n    return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n  }\n\n  OrderedSet.isOrderedSet = isOrderedSet;\n\n  var OrderedSetPrototype = OrderedSet.prototype;\n  OrderedSetPrototype[IS_ORDERED_SENTINEL] = true;\n\n  OrderedSetPrototype.__empty = emptyOrderedSet;\n  OrderedSetPrototype.__make = makeOrderedSet;\n\n  function makeOrderedSet(map, ownerID) {\n    var set = Object.create(OrderedSetPrototype);\n    set.size = map ? map.size : 0;\n    set._map = map;\n    set.__ownerID = ownerID;\n    return set;\n  }\n\n  var EMPTY_ORDERED_SET;\n  function emptyOrderedSet() {\n    return EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()));\n  }\n\n  createClass(Record, KeyedCollection);\n\n    function Record(defaultValues, name) {\n      var hasInitialized;\n\n      var RecordType = function Record(values) {\n        if (values instanceof RecordType) {\n          return values;\n        }\n        if (!(this instanceof RecordType)) {\n          return new RecordType(values);\n        }\n        if (!hasInitialized) {\n          hasInitialized = true;\n          var keys = Object.keys(defaultValues);\n          setProps(RecordTypePrototype, keys);\n          RecordTypePrototype.size = keys.length;\n          RecordTypePrototype._name = name;\n          RecordTypePrototype._keys = keys;\n          RecordTypePrototype._defaultValues = defaultValues;\n        }\n        this._map = src_Map__Map(values);\n      };\n\n      var RecordTypePrototype = RecordType.prototype = Object.create(RecordPrototype);\n      RecordTypePrototype.constructor = RecordType;\n\n      return RecordType;\n    }\n\n    Record.prototype.toString = function() {\n      return this.__toString(recordName(this) + ' {', '}');\n    };\n\n    // @pragma Access\n\n    Record.prototype.has = function(k) {\n      return this._defaultValues.hasOwnProperty(k);\n    };\n\n    Record.prototype.get = function(k, notSetValue) {\n      if (!this.has(k)) {\n        return notSetValue;\n      }\n      var defaultVal = this._defaultValues[k];\n      return this._map ? this._map.get(k, defaultVal) : defaultVal;\n    };\n\n    // @pragma Modification\n\n    Record.prototype.clear = function() {\n      if (this.__ownerID) {\n        this._map && this._map.clear();\n        return this;\n      }\n      var RecordType = this.constructor;\n      return RecordType._empty || (RecordType._empty = makeRecord(this, emptyMap()));\n    };\n\n    Record.prototype.set = function(k, v) {\n      if (!this.has(k)) {\n        throw new Error('Cannot set unknown key \"' + k + '\" on ' + recordName(this));\n      }\n      var newMap = this._map && this._map.set(k, v);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.remove = function(k) {\n      if (!this.has(k)) {\n        return this;\n      }\n      var newMap = this._map && this._map.remove(k);\n      if (this.__ownerID || newMap === this._map) {\n        return this;\n      }\n      return makeRecord(this, newMap);\n    };\n\n    Record.prototype.wasAltered = function() {\n      return this._map.wasAltered();\n    };\n\n    Record.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterator(type, reverse);\n    };\n\n    Record.prototype.__iterate = function(fn, reverse) {var this$0 = this;\n      return KeyedIterable(this._defaultValues).map(function(_, k)  {return this$0.get(k)}).__iterate(fn, reverse);\n    };\n\n    Record.prototype.__ensureOwner = function(ownerID) {\n      if (ownerID === this.__ownerID) {\n        return this;\n      }\n      var newMap = this._map && this._map.__ensureOwner(ownerID);\n      if (!ownerID) {\n        this.__ownerID = ownerID;\n        this._map = newMap;\n        return this;\n      }\n      return makeRecord(this, newMap, ownerID);\n    };\n\n\n  var RecordPrototype = Record.prototype;\n  RecordPrototype[DELETE] = RecordPrototype.remove;\n  RecordPrototype.deleteIn =\n  RecordPrototype.removeIn = MapPrototype.removeIn;\n  RecordPrototype.merge = MapPrototype.merge;\n  RecordPrototype.mergeWith = MapPrototype.mergeWith;\n  RecordPrototype.mergeIn = MapPrototype.mergeIn;\n  RecordPrototype.mergeDeep = MapPrototype.mergeDeep;\n  RecordPrototype.mergeDeepWith = MapPrototype.mergeDeepWith;\n  RecordPrototype.mergeDeepIn = MapPrototype.mergeDeepIn;\n  RecordPrototype.setIn = MapPrototype.setIn;\n  RecordPrototype.update = MapPrototype.update;\n  RecordPrototype.updateIn = MapPrototype.updateIn;\n  RecordPrototype.withMutations = MapPrototype.withMutations;\n  RecordPrototype.asMutable = MapPrototype.asMutable;\n  RecordPrototype.asImmutable = MapPrototype.asImmutable;\n\n\n  function makeRecord(likeRecord, map, ownerID) {\n    var record = Object.create(Object.getPrototypeOf(likeRecord));\n    record._map = map;\n    record.__ownerID = ownerID;\n    return record;\n  }\n\n  function recordName(record) {\n    return record._name || record.constructor.name || 'Record';\n  }\n\n  function setProps(prototype, names) {\n    try {\n      names.forEach(setProp.bind(undefined, prototype));\n    } catch (error) {\n      // Object.defineProperty failed. Probably IE8.\n    }\n  }\n\n  function setProp(prototype, name) {\n    Object.defineProperty(prototype, name, {\n      get: function() {\n        return this.get(name);\n      },\n      set: function(value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      }\n    });\n  }\n\n  function deepEqual(a, b) {\n    if (a === b) {\n      return true;\n    }\n\n    if (\n      !isIterable(b) ||\n      a.size !== undefined && b.size !== undefined && a.size !== b.size ||\n      a.__hash !== undefined && b.__hash !== undefined && a.__hash !== b.__hash ||\n      isKeyed(a) !== isKeyed(b) ||\n      isIndexed(a) !== isIndexed(b) ||\n      isOrdered(a) !== isOrdered(b)\n    ) {\n      return false;\n    }\n\n    if (a.size === 0 && b.size === 0) {\n      return true;\n    }\n\n    var notAssociative = !isAssociative(a);\n\n    if (isOrdered(a)) {\n      var entries = a.entries();\n      return b.every(function(v, k)  {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done;\n    }\n\n    var flipped = false;\n\n    if (a.size === undefined) {\n      if (b.size === undefined) {\n        if (typeof a.cacheResult === 'function') {\n          a.cacheResult();\n        }\n      } else {\n        flipped = true;\n        var _ = a;\n        a = b;\n        b = _;\n      }\n    }\n\n    var allEqual = true;\n    var bSize = b.__iterate(function(v, k)  {\n      if (notAssociative ? !a.has(v) :\n          flipped ? !is(v, a.get(k, NOT_SET)) : !is(a.get(k, NOT_SET), v)) {\n        allEqual = false;\n        return false;\n      }\n    });\n\n    return allEqual && a.size === bSize;\n  }\n\n  createClass(Range, IndexedSeq);\n\n    function Range(start, end, step) {\n      if (!(this instanceof Range)) {\n        return new Range(start, end, step);\n      }\n      invariant(step !== 0, 'Cannot step a Range by 0');\n      start = start || 0;\n      if (end === undefined) {\n        end = Infinity;\n      }\n      step = step === undefined ? 1 : Math.abs(step);\n      if (end < start) {\n        step = -step;\n      }\n      this._start = start;\n      this._end = end;\n      this._step = step;\n      this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n      if (this.size === 0) {\n        if (EMPTY_RANGE) {\n          return EMPTY_RANGE;\n        }\n        EMPTY_RANGE = this;\n      }\n    }\n\n    Range.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Range []';\n      }\n      return 'Range [ ' +\n        this._start + '...' + this._end +\n        (this._step > 1 ? ' by ' + this._step : '') +\n      ' ]';\n    };\n\n    Range.prototype.get = function(index, notSetValue) {\n      return this.has(index) ?\n        this._start + wrapIndex(this, index) * this._step :\n        notSetValue;\n    };\n\n    Range.prototype.includes = function(searchValue) {\n      var possibleIndex = (searchValue - this._start) / this._step;\n      return possibleIndex >= 0 &&\n        possibleIndex < this.size &&\n        possibleIndex === Math.floor(possibleIndex);\n    };\n\n    Range.prototype.slice = function(begin, end) {\n      if (wholeSlice(begin, end, this.size)) {\n        return this;\n      }\n      begin = resolveBegin(begin, this.size);\n      end = resolveEnd(end, this.size);\n      if (end <= begin) {\n        return new Range(0, 0);\n      }\n      return new Range(this.get(begin, this._end), this.get(end, this._end), this._step);\n    };\n\n    Range.prototype.indexOf = function(searchValue) {\n      var offsetValue = searchValue - this._start;\n      if (offsetValue % this._step === 0) {\n        var index = offsetValue / this._step;\n        if (index >= 0 && index < this.size) {\n          return index\n        }\n      }\n      return -1;\n    };\n\n    Range.prototype.lastIndexOf = function(searchValue) {\n      return this.indexOf(searchValue);\n    };\n\n    Range.prototype.__iterate = function(fn, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      for (var ii = 0; ii <= maxIndex; ii++) {\n        if (fn(value, ii, this) === false) {\n          return ii + 1;\n        }\n        value += reverse ? -step : step;\n      }\n      return ii;\n    };\n\n    Range.prototype.__iterator = function(type, reverse) {\n      var maxIndex = this.size - 1;\n      var step = this._step;\n      var value = reverse ? this._start + maxIndex * step : this._start;\n      var ii = 0;\n      return new src_Iterator__Iterator(function()  {\n        var v = value;\n        value += reverse ? -step : step;\n        return ii > maxIndex ? iteratorDone() : iteratorValue(type, ii++, v);\n      });\n    };\n\n    Range.prototype.equals = function(other) {\n      return other instanceof Range ?\n        this._start === other._start &&\n        this._end === other._end &&\n        this._step === other._step :\n        deepEqual(this, other);\n    };\n\n\n  var EMPTY_RANGE;\n\n  createClass(Repeat, IndexedSeq);\n\n    function Repeat(value, times) {\n      if (!(this instanceof Repeat)) {\n        return new Repeat(value, times);\n      }\n      this._value = value;\n      this.size = times === undefined ? Infinity : Math.max(0, times);\n      if (this.size === 0) {\n        if (EMPTY_REPEAT) {\n          return EMPTY_REPEAT;\n        }\n        EMPTY_REPEAT = this;\n      }\n    }\n\n    Repeat.prototype.toString = function() {\n      if (this.size === 0) {\n        return 'Repeat []';\n      }\n      return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n    };\n\n    Repeat.prototype.get = function(index, notSetValue) {\n      return this.has(index) ? this._value : notSetValue;\n    };\n\n    Repeat.prototype.includes = function(searchValue) {\n      return is(this._value, searchValue);\n    };\n\n    Repeat.prototype.slice = function(begin, end) {\n      var size = this.size;\n      return wholeSlice(begin, end, size) ? this :\n        new Repeat(this._value, resolveEnd(end, size) - resolveBegin(begin, size));\n    };\n\n    Repeat.prototype.reverse = function() {\n      return this;\n    };\n\n    Repeat.prototype.indexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return 0;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.lastIndexOf = function(searchValue) {\n      if (is(this._value, searchValue)) {\n        return this.size;\n      }\n      return -1;\n    };\n\n    Repeat.prototype.__iterate = function(fn, reverse) {\n      for (var ii = 0; ii < this.size; ii++) {\n        if (fn(this._value, ii, this) === false) {\n          return ii + 1;\n        }\n      }\n      return ii;\n    };\n\n    Repeat.prototype.__iterator = function(type, reverse) {var this$0 = this;\n      var ii = 0;\n      return new src_Iterator__Iterator(function() \n        {return ii < this$0.size ? iteratorValue(type, ii++, this$0._value) : iteratorDone()}\n      );\n    };\n\n    Repeat.prototype.equals = function(other) {\n      return other instanceof Repeat ?\n        is(this._value, other._value) :\n        deepEqual(other);\n    };\n\n\n  var EMPTY_REPEAT;\n\n  /**\n   * Contributes additional methods to a constructor\n   */\n  function mixin(ctor, methods) {\n    var keyCopier = function(key ) { ctor.prototype[key] = methods[key]; };\n    Object.keys(methods).forEach(keyCopier);\n    Object.getOwnPropertySymbols &&\n      Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n    return ctor;\n  }\n\n  Iterable.Iterator = src_Iterator__Iterator;\n\n  mixin(Iterable, {\n\n    // ### Conversion to other types\n\n    toArray: function() {\n      assertNotInfinite(this.size);\n      var array = new Array(this.size || 0);\n      this.valueSeq().__iterate(function(v, i)  { array[i] = v; });\n      return array;\n    },\n\n    toIndexedSeq: function() {\n      return new ToIndexedSequence(this);\n    },\n\n    toJS: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJS === 'function' ? value.toJS() : value}\n      ).__toJS();\n    },\n\n    toJSON: function() {\n      return this.toSeq().map(\n        function(value ) {return value && typeof value.toJSON === 'function' ? value.toJSON() : value}\n      ).__toJS();\n    },\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, true);\n    },\n\n    toMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return src_Map__Map(this.toKeyedSeq());\n    },\n\n    toObject: function() {\n      assertNotInfinite(this.size);\n      var object = {};\n      this.__iterate(function(v, k)  { object[k] = v; });\n      return object;\n    },\n\n    toOrderedMap: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedMap(this.toKeyedSeq());\n    },\n\n    toOrderedSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSet: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return src_Set__Set(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toSetSeq: function() {\n      return new ToSetSequence(this);\n    },\n\n    toSeq: function() {\n      return isIndexed(this) ? this.toIndexedSeq() :\n        isKeyed(this) ? this.toKeyedSeq() :\n        this.toSetSeq();\n    },\n\n    toStack: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return Stack(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n    toList: function() {\n      // Use Late Binding here to solve the circular dependency.\n      return List(isKeyed(this) ? this.valueSeq() : this);\n    },\n\n\n    // ### Common JavaScript methods and properties\n\n    toString: function() {\n      return '[Iterable]';\n    },\n\n    __toString: function(head, tail) {\n      if (this.size === 0) {\n        return head + tail;\n      }\n      return head + ' ' + this.toSeq().map(this.__toStringMapper).join(', ') + ' ' + tail;\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    concat: function() {var values = SLICE$0.call(arguments, 0);\n      return reify(this, concatFactory(this, values));\n    },\n\n    includes: function(searchValue) {\n      return this.some(function(value ) {return is(value, searchValue)});\n    },\n\n    entries: function() {\n      return this.__iterator(ITERATE_ENTRIES);\n    },\n\n    every: function(predicate, context) {\n      assertNotInfinite(this.size);\n      var returnValue = true;\n      this.__iterate(function(v, k, c)  {\n        if (!predicate.call(context, v, k, c)) {\n          returnValue = false;\n          return false;\n        }\n      });\n      return returnValue;\n    },\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, true));\n    },\n\n    find: function(predicate, context, notSetValue) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[1] : notSetValue;\n    },\n\n    findEntry: function(predicate, context) {\n      var found;\n      this.__iterate(function(v, k, c)  {\n        if (predicate.call(context, v, k, c)) {\n          found = [k, v];\n          return false;\n        }\n      });\n      return found;\n    },\n\n    findLastEntry: function(predicate, context) {\n      return this.toSeq().reverse().findEntry(predicate, context);\n    },\n\n    forEach: function(sideEffect, context) {\n      assertNotInfinite(this.size);\n      return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n    },\n\n    join: function(separator) {\n      assertNotInfinite(this.size);\n      separator = separator !== undefined ? '' + separator : ',';\n      var joined = '';\n      var isFirst = true;\n      this.__iterate(function(v ) {\n        isFirst ? (isFirst = false) : (joined += separator);\n        joined += v !== null && v !== undefined ? v.toString() : '';\n      });\n      return joined;\n    },\n\n    keys: function() {\n      return this.__iterator(ITERATE_KEYS);\n    },\n\n    map: function(mapper, context) {\n      return reify(this, mapFactory(this, mapper, context));\n    },\n\n    reduce: function(reducer, initialReduction, context) {\n      assertNotInfinite(this.size);\n      var reduction;\n      var useFirst;\n      if (arguments.length < 2) {\n        useFirst = true;\n      } else {\n        reduction = initialReduction;\n      }\n      this.__iterate(function(v, k, c)  {\n        if (useFirst) {\n          useFirst = false;\n          reduction = v;\n        } else {\n          reduction = reducer.call(context, reduction, v, k, c);\n        }\n      });\n      return reduction;\n    },\n\n    reduceRight: function(reducer, initialReduction, context) {\n      var reversed = this.toKeyedSeq().reverse();\n      return reversed.reduce.apply(reversed, arguments);\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, true));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, true));\n    },\n\n    some: function(predicate, context) {\n      return !this.every(not(predicate), context);\n    },\n\n    sort: function(comparator) {\n      return reify(this, sortFactory(this, comparator));\n    },\n\n    values: function() {\n      return this.__iterator(ITERATE_VALUES);\n    },\n\n\n    // ### More sequential methods\n\n    butLast: function() {\n      return this.slice(0, -1);\n    },\n\n    isEmpty: function() {\n      return this.size !== undefined ? this.size === 0 : !this.some(function()  {return true});\n    },\n\n    count: function(predicate, context) {\n      return ensureSize(\n        predicate ? this.toSeq().filter(predicate, context) : this\n      );\n    },\n\n    countBy: function(grouper, context) {\n      return countByFactory(this, grouper, context);\n    },\n\n    equals: function(other) {\n      return deepEqual(this, other);\n    },\n\n    entrySeq: function() {\n      var iterable = this;\n      if (iterable._cache) {\n        // We cache as an entries array, so we can just return the cache!\n        return new ArraySeq(iterable._cache);\n      }\n      var entriesSequence = iterable.toSeq().map(entryMapper).toIndexedSeq();\n      entriesSequence.fromEntrySeq = function()  {return iterable.toSeq()};\n      return entriesSequence;\n    },\n\n    filterNot: function(predicate, context) {\n      return this.filter(not(predicate), context);\n    },\n\n    findLast: function(predicate, context, notSetValue) {\n      return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n    },\n\n    first: function() {\n      return this.find(returnTrue);\n    },\n\n    flatMap: function(mapper, context) {\n      return reify(this, flatMapFactory(this, mapper, context));\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, true));\n    },\n\n    fromEntrySeq: function() {\n      return new FromEntriesSequence(this);\n    },\n\n    get: function(searchKey, notSetValue) {\n      return this.find(function(_, key)  {return is(key, searchKey)}, undefined, notSetValue);\n    },\n\n    getIn: function(searchKeyPath, notSetValue) {\n      var nested = this;\n      // Note: in an ES6 environment, we would prefer:\n      // for (var key of searchKeyPath) {\n      var iter = forceIterator(searchKeyPath);\n      var step;\n      while (!(step = iter.next()).done) {\n        var key = step.value;\n        nested = nested && nested.get ? nested.get(key, NOT_SET) : NOT_SET;\n        if (nested === NOT_SET) {\n          return notSetValue;\n        }\n      }\n      return nested;\n    },\n\n    groupBy: function(grouper, context) {\n      return groupByFactory(this, grouper, context);\n    },\n\n    has: function(searchKey) {\n      return this.get(searchKey, NOT_SET) !== NOT_SET;\n    },\n\n    hasIn: function(searchKeyPath) {\n      return this.getIn(searchKeyPath, NOT_SET) !== NOT_SET;\n    },\n\n    isSubset: function(iter) {\n      iter = typeof iter.includes === 'function' ? iter : Iterable(iter);\n      return this.every(function(value ) {return iter.includes(value)});\n    },\n\n    isSuperset: function(iter) {\n      iter = typeof iter.isSubset === 'function' ? iter : Iterable(iter);\n      return iter.isSubset(this);\n    },\n\n    keySeq: function() {\n      return this.toSeq().map(keyMapper).toIndexedSeq();\n    },\n\n    last: function() {\n      return this.toSeq().reverse().first();\n    },\n\n    max: function(comparator) {\n      return maxFactory(this, comparator);\n    },\n\n    maxBy: function(mapper, comparator) {\n      return maxFactory(this, comparator, mapper);\n    },\n\n    min: function(comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator);\n    },\n\n    minBy: function(mapper, comparator) {\n      return maxFactory(this, comparator ? neg(comparator) : defaultNegComparator, mapper);\n    },\n\n    rest: function() {\n      return this.slice(1);\n    },\n\n    skip: function(amount) {\n      return this.slice(Math.max(0, amount));\n    },\n\n    skipLast: function(amount) {\n      return reify(this, this.toSeq().reverse().skip(amount).reverse());\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, true));\n    },\n\n    skipUntil: function(predicate, context) {\n      return this.skipWhile(not(predicate), context);\n    },\n\n    sortBy: function(mapper, comparator) {\n      return reify(this, sortFactory(this, comparator, mapper));\n    },\n\n    take: function(amount) {\n      return this.slice(0, Math.max(0, amount));\n    },\n\n    takeLast: function(amount) {\n      return reify(this, this.toSeq().reverse().take(amount).reverse());\n    },\n\n    takeWhile: function(predicate, context) {\n      return reify(this, takeWhileFactory(this, predicate, context));\n    },\n\n    takeUntil: function(predicate, context) {\n      return this.takeWhile(not(predicate), context);\n    },\n\n    valueSeq: function() {\n      return this.toIndexedSeq();\n    },\n\n\n    // ### Hashable Object\n\n    hashCode: function() {\n      return this.__hash || (this.__hash = hashIterable(this));\n    }\n\n\n    // ### Internal\n\n    // abstract __iterate(fn, reverse)\n\n    // abstract __iterator(type, reverse)\n  });\n\n  // var IS_ITERABLE_SENTINEL = '@@__IMMUTABLE_ITERABLE__@@';\n  // var IS_KEYED_SENTINEL = '@@__IMMUTABLE_KEYED__@@';\n  // var IS_INDEXED_SENTINEL = '@@__IMMUTABLE_INDEXED__@@';\n  // var IS_ORDERED_SENTINEL = '@@__IMMUTABLE_ORDERED__@@';\n\n  var IterablePrototype = Iterable.prototype;\n  IterablePrototype[IS_ITERABLE_SENTINEL] = true;\n  IterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.values;\n  IterablePrototype.__toJS = IterablePrototype.toArray;\n  IterablePrototype.__toStringMapper = quoteString;\n  IterablePrototype.inspect =\n  IterablePrototype.toSource = function() { return this.toString(); };\n  IterablePrototype.chain = IterablePrototype.flatMap;\n  IterablePrototype.contains = IterablePrototype.includes;\n\n  // Temporary warning about using length\n  (function () {\n    try {\n      Object.defineProperty(IterablePrototype, 'length', {\n        get: function () {\n          if (!Iterable.noLengthWarning) {\n            var stack;\n            try {\n              throw new Error();\n            } catch (error) {\n              stack = error.stack;\n            }\n            if (stack.indexOf('_wrapObject') === -1) {\n              console && console.warn && console.warn(\n                'iterable.length has been deprecated, '+\n                'use iterable.size or iterable.count(). '+\n                'This warning will become a silent error in a future version. ' +\n                stack\n              );\n              return this.size;\n            }\n          }\n        }\n      });\n    } catch (e) {}\n  })();\n\n\n\n  mixin(KeyedIterable, {\n\n    // ### More sequential methods\n\n    flip: function() {\n      return reify(this, flipFactory(this));\n    },\n\n    findKey: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry && entry[0];\n    },\n\n    findLastKey: function(predicate, context) {\n      return this.toSeq().reverse().findKey(predicate, context);\n    },\n\n    keyOf: function(searchValue) {\n      return this.findKey(function(value ) {return is(value, searchValue)});\n    },\n\n    lastKeyOf: function(searchValue) {\n      return this.findLastKey(function(value ) {return is(value, searchValue)});\n    },\n\n    mapEntries: function(mapper, context) {var this$0 = this;\n      var iterations = 0;\n      return reify(this,\n        this.toSeq().map(\n          function(v, k)  {return mapper.call(context, [k, v], iterations++, this$0)}\n        ).fromEntrySeq()\n      );\n    },\n\n    mapKeys: function(mapper, context) {var this$0 = this;\n      return reify(this,\n        this.toSeq().flip().map(\n          function(k, v)  {return mapper.call(context, k, v, this$0)}\n        ).flip()\n      );\n    }\n\n  });\n\n  var KeyedIterablePrototype = KeyedIterable.prototype;\n  KeyedIterablePrototype[IS_KEYED_SENTINEL] = true;\n  KeyedIterablePrototype[ITERATOR_SYMBOL] = IterablePrototype.entries;\n  KeyedIterablePrototype.__toJS = IterablePrototype.toObject;\n  KeyedIterablePrototype.__toStringMapper = function(v, k)  {return JSON.stringify(k) + ': ' + quoteString(v)};\n\n\n\n  mixin(IndexedIterable, {\n\n    // ### Conversion to other types\n\n    toKeyedSeq: function() {\n      return new ToKeyedSequence(this, false);\n    },\n\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    filter: function(predicate, context) {\n      return reify(this, filterFactory(this, predicate, context, false));\n    },\n\n    findIndex: function(predicate, context) {\n      var entry = this.findEntry(predicate, context);\n      return entry ? entry[0] : -1;\n    },\n\n    indexOf: function(searchValue) {\n      var key = this.toKeyedSeq().keyOf(searchValue);\n      return key === undefined ? -1 : key;\n    },\n\n    lastIndexOf: function(searchValue) {\n      return this.toSeq().reverse().indexOf(searchValue);\n    },\n\n    reverse: function() {\n      return reify(this, reverseFactory(this, false));\n    },\n\n    slice: function(begin, end) {\n      return reify(this, sliceFactory(this, begin, end, false));\n    },\n\n    splice: function(index, removeNum /*, ...values*/) {\n      var numArgs = arguments.length;\n      removeNum = Math.max(removeNum | 0, 0);\n      if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n        return this;\n      }\n      // If index is negative, it should resolve relative to the size of the\n      // collection. However size may be expensive to compute if not cached, so\n      // only call count() if the number is in fact negative.\n      index = resolveBegin(index, index < 0 ? this.count() : this.size);\n      var spliced = this.slice(0, index);\n      return reify(\n        this,\n        numArgs === 1 ?\n          spliced :\n          spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n      );\n    },\n\n\n    // ### More collection methods\n\n    findLastIndex: function(predicate, context) {\n      var key = this.toKeyedSeq().findLastKey(predicate, context);\n      return key === undefined ? -1 : key;\n    },\n\n    first: function() {\n      return this.get(0);\n    },\n\n    flatten: function(depth) {\n      return reify(this, flattenFactory(this, depth, false));\n    },\n\n    get: function(index, notSetValue) {\n      index = wrapIndex(this, index);\n      return (index < 0 || (this.size === Infinity ||\n          (this.size !== undefined && index > this.size))) ?\n        notSetValue :\n        this.find(function(_, key)  {return key === index}, undefined, notSetValue);\n    },\n\n    has: function(index) {\n      index = wrapIndex(this, index);\n      return index >= 0 && (this.size !== undefined ?\n        this.size === Infinity || index < this.size :\n        this.indexOf(index) !== -1\n      );\n    },\n\n    interpose: function(separator) {\n      return reify(this, interposeFactory(this, separator));\n    },\n\n    interleave: function(/*...iterables*/) {\n      var iterables = [this].concat(arrCopy(arguments));\n      var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, iterables);\n      var interleaved = zipped.flatten(true);\n      if (zipped.size) {\n        interleaved.size = zipped.size * iterables.length;\n      }\n      return reify(this, interleaved);\n    },\n\n    last: function() {\n      return this.get(-1);\n    },\n\n    skipWhile: function(predicate, context) {\n      return reify(this, skipWhileFactory(this, predicate, context, false));\n    },\n\n    zip: function(/*, ...iterables */) {\n      var iterables = [this].concat(arrCopy(arguments));\n      return reify(this, zipWithFactory(this, defaultZipper, iterables));\n    },\n\n    zipWith: function(zipper/*, ...iterables */) {\n      var iterables = arrCopy(arguments);\n      iterables[0] = this;\n      return reify(this, zipWithFactory(this, zipper, iterables));\n    }\n\n  });\n\n  IndexedIterable.prototype[IS_INDEXED_SENTINEL] = true;\n  IndexedIterable.prototype[IS_ORDERED_SENTINEL] = true;\n\n\n\n  mixin(SetIterable, {\n\n    // ### ES6 Collection methods (ES6 Array and Map)\n\n    get: function(value, notSetValue) {\n      return this.has(value) ? value : notSetValue;\n    },\n\n    includes: function(value) {\n      return this.has(value);\n    },\n\n\n    // ### More sequential methods\n\n    keySeq: function() {\n      return this.valueSeq();\n    }\n\n  });\n\n  SetIterable.prototype.has = IterablePrototype.includes;\n\n\n  // Mixin subclasses\n\n  mixin(KeyedSeq, KeyedIterable.prototype);\n  mixin(IndexedSeq, IndexedIterable.prototype);\n  mixin(SetSeq, SetIterable.prototype);\n\n  mixin(KeyedCollection, KeyedIterable.prototype);\n  mixin(IndexedCollection, IndexedIterable.prototype);\n  mixin(SetCollection, SetIterable.prototype);\n\n\n  // #pragma Helper functions\n\n  function keyMapper(v, k) {\n    return k;\n  }\n\n  function entryMapper(v, k) {\n    return [k, v];\n  }\n\n  function not(predicate) {\n    return function() {\n      return !predicate.apply(this, arguments);\n    }\n  }\n\n  function neg(predicate) {\n    return function() {\n      return -predicate.apply(this, arguments);\n    }\n  }\n\n  function quoteString(value) {\n    return typeof value === 'string' ? JSON.stringify(value) : value;\n  }\n\n  function defaultZipper() {\n    return arrCopy(arguments);\n  }\n\n  function defaultNegComparator(a, b) {\n    return a < b ? 1 : a > b ? -1 : 0;\n  }\n\n  function hashIterable(iterable) {\n    if (iterable.size === Infinity) {\n      return 0;\n    }\n    var ordered = isOrdered(iterable);\n    var keyed = isKeyed(iterable);\n    var h = ordered ? 1 : 0;\n    var size = iterable.__iterate(\n      keyed ?\n        ordered ?\n          function(v, k)  { h = 31 * h + hashMerge(hash(v), hash(k)) | 0; } :\n          function(v, k)  { h = h + hashMerge(hash(v), hash(k)) | 0; } :\n        ordered ?\n          function(v ) { h = 31 * h + hash(v) | 0; } :\n          function(v ) { h = h + hash(v) | 0; }\n    );\n    return murmurHashOfSize(size, h);\n  }\n\n  function murmurHashOfSize(size, h) {\n    h = src_Math__imul(h, 0xCC9E2D51);\n    h = src_Math__imul(h << 15 | h >>> -15, 0x1B873593);\n    h = src_Math__imul(h << 13 | h >>> -13, 5);\n    h = (h + 0xE6546B64 | 0) ^ size;\n    h = src_Math__imul(h ^ h >>> 16, 0x85EBCA6B);\n    h = src_Math__imul(h ^ h >>> 13, 0xC2B2AE35);\n    h = smi(h ^ h >>> 16);\n    return h;\n  }\n\n  function hashMerge(a, b) {\n    return a ^ b + 0x9E3779B9 + (a << 6) + (a >> 2) | 0; // int\n  }\n\n  var Immutable = {\n\n    Iterable: Iterable,\n\n    Seq: Seq,\n    Collection: Collection,\n    Map: src_Map__Map,\n    OrderedMap: OrderedMap,\n    List: List,\n    Stack: Stack,\n    Set: src_Set__Set,\n    OrderedSet: OrderedSet,\n\n    Record: Record,\n    Range: Range,\n    Repeat: Repeat,\n\n    is: is,\n    fromJS: fromJS\n\n  };\n\n  return Immutable;\n\n}));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immutable/dist/immutable.js\n ** module id = 64\n ** module chunks = 0 1\n **/","// jshint newcap: false\n/* global require, module, document, Element */\n'use strict';\n\nvar VNode = require('./vnode');\nvar is = require('./is');\n\nfunction isUndef(s) { return s === undefined; }\nfunction isDef(s) { return s !== undefined; }\n\nfunction emptyNodeAt(elm) {\n  return VNode(elm.tagName, {}, [], undefined, elm);\n}\n\nvar emptyNode = VNode('', {}, [], undefined, undefined);\n\nfunction sameVnode(vnode1, vnode2) {\n  return vnode1.key === vnode2.key && vnode1.sel === vnode2.sel;\n}\n\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n  var i, map = {}, key;\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) map[key] = i;\n  }\n  return map;\n}\n\nfunction createRmCb(childElm, listeners) {\n  return function() {\n    if (--listeners === 0) childElm.parentElement.removeChild(childElm);\n  };\n}\n\nvar hooks = ['create', 'update', 'remove', 'destroy', 'pre', 'post'];\n\nfunction init(modules) {\n  var i, j, cbs = {};\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (modules[j][hooks[i]] !== undefined) cbs[hooks[i]].push(modules[j][hooks[i]]);\n    }\n  }\n\n  function createElm(vnode, insertedVnodeQueue) {\n    var i, data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) i(vnode);\n      if (isDef(i = data.vnode)) vnode = i;\n    }\n    var elm, children = vnode.children, sel = vnode.sel;\n    if (isDef(sel)) {\n      // Parse selector\n      var hashIdx = sel.indexOf('#');\n      var dotIdx = sel.indexOf('.', hashIdx);\n      var hash = hashIdx > 0 ? hashIdx : sel.length;\n      var dot = dotIdx > 0 ? dotIdx : sel.length;\n      var tag = hashIdx !== -1 || dotIdx !== -1 ? sel.slice(0, Math.min(hash, dot)) : sel;\n      elm = vnode.elm = isDef(data) && isDef(i = data.ns) ? document.createElementNS(i, tag)\n                                                          : document.createElement(tag);\n      if (hash < dot) elm.id = sel.slice(hash + 1, dot);\n      if (dotIdx > 0) elm.className = sel.slice(dot+1).replace(/\\./g, ' ');\n      if (is.array(children)) {\n        for (i = 0; i < children.length; ++i) {\n          elm.appendChild(createElm(children[i], insertedVnodeQueue));\n        }\n      } else if (is.primitive(vnode.text)) {\n        elm.appendChild(document.createTextNode(vnode.text));\n      }\n      for (i = 0; i < cbs.create.length; ++i) cbs.create[i](emptyNode, vnode);\n      i = vnode.data.hook; // Reuse variable\n      if (isDef(i)) {\n        if (i.create) i.create(emptyNode, vnode);\n        if (i.insert) insertedVnodeQueue.push(vnode);\n      }\n    } else {\n      elm = vnode.elm = document.createTextNode(vnode.text);\n    }\n    return vnode.elm;\n  }\n\n  function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      parentElm.insertBefore(createElm(vnodes[startIdx], insertedVnodeQueue), before);\n    }\n  }\n\n  function invokeDestroyHook(vnode) {\n    var i = vnode.data, j;\n    if (isDef(i)) {\n      if (isDef(i = i.hook) && isDef(i = i.destroy)) i(vnode);\n      for (i = 0; i < cbs.destroy.length; ++i) cbs.destroy[i](vnode);\n      if (isDef(i = vnode.children)) {\n        for (j = 0; j < vnode.children.length; ++j) {\n          invokeDestroyHook(vnode.children[j]);\n        }\n      }\n    }\n  }\n\n  function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var i, listeners, rm, ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.sel)) {\n          invokeDestroyHook(ch);\n          listeners = cbs.remove.length + 1;\n          rm = createRmCb(ch.elm, listeners);\n          for (i = 0; i < cbs.remove.length; ++i) cbs.remove[i](ch, rm);\n          if (isDef(i = ch.data) && isDef(i = i.hook) && isDef(i = i.remove)) {\n            i(ch, rm);\n          } else {\n            rm();\n          }\n        } else { // Text node\n          parentElm.removeChild(ch.elm);\n        }\n      }\n    }\n  }\n\n  function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n    var oldStartIdx = 0, newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, elmToMove, before;\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n        parentElm.insertBefore(oldStartVnode.elm, oldEndVnode.elm.nextSibling);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n        parentElm.insertBefore(oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n        idxInOld = oldKeyToIdx[newStartVnode.key];\n        if (isUndef(idxInOld)) { // New element\n          parentElm.insertBefore(createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n          newStartVnode = newCh[++newStartIdx];\n        } else {\n          elmToMove = oldCh[idxInOld];\n          patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n          oldCh[idxInOld] = undefined;\n          parentElm.insertBefore(elmToMove.elm, oldStartVnode.elm);\n          newStartVnode = newCh[++newStartIdx];\n        }\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      before = isUndef(newCh[newEndIdx+1]) ? null : newCh[newEndIdx+1].elm;\n      addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n    var i, hook;\n    if (isDef(i = vnode.data) && isDef(hook = i.hook) && isDef(i = hook.prepatch)) {\n      i(oldVnode, vnode);\n    }\n    if (isDef(i = oldVnode.data) && isDef(i = i.vnode)) oldVnode = i;\n    if (isDef(i = vnode.data) && isDef(i = i.vnode)) vnode = i;\n    var elm = vnode.elm = oldVnode.elm, oldCh = oldVnode.children, ch = vnode.children;\n    if (oldVnode === vnode) return;\n    if (isDef(vnode.data)) {\n      for (i = 0; i < cbs.update.length; ++i) cbs.update[i](oldVnode, vnode);\n      i = vnode.data.hook;\n      if (isDef(i) && isDef(i = i.update)) i(oldVnode, vnode);\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n      } else if (isDef(ch)) {\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      elm.textContent = vnode.text;\n    }\n    if (isDef(hook) && isDef(i = hook.postpatch)) {\n      i(oldVnode, vnode);\n    }\n  }\n\n  return function(oldVnode, vnode) {\n    var i;\n    var insertedVnodeQueue = [];\n    for (i = 0; i < cbs.pre.length; ++i) cbs.pre[i]();\n    if (oldVnode instanceof Element) {\n      if (oldVnode.parentElement !== null) {\n        createElm(vnode, insertedVnodeQueue);\n        oldVnode.parentElement.replaceChild(vnode.elm, oldVnode);\n      } else {\n        oldVnode = emptyNodeAt(oldVnode);\n        patchVnode(oldVnode, vnode, insertedVnodeQueue);\n      }\n    } else {\n      patchVnode(oldVnode, vnode, insertedVnodeQueue);\n    }\n    for (i = 0; i < insertedVnodeQueue.length; ++i) {\n      insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n    }\n    for (i = 0; i < cbs.post.length; ++i) cbs.post[i]();\n    return vnode;\n  };\n}\n\nmodule.exports = {init: init};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/snabbdom/snabbdom.js\n ** module id = 65\n ** module chunks = 0 1\n **/","module.exports = function(sel, data, children, text, elm) {\n  var key = data === undefined ? undefined : data.key;\n  return {sel: sel, data: data, children: children,\n          text: text, elm: elm, key: key};\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/snabbdom/vnode.js\n ** module id = 66\n ** module chunks = 0 1\n **/","module.exports = {\n  array: Array.isArray,\n  primitive: function(s) { return typeof s === 'string' || typeof s === 'number'; },\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/snabbdom/is.js\n ** module id = 67\n ** module chunks = 0 1\n **/","var VNode = require('./vnode');\nvar is = require('./is');\n\nfunction addNS(data, children) {\n  data.ns = 'http://www.w3.org/2000/svg';\n  if (children !== undefined) {\n    for (var i = 0; i < children.length; ++i) {\n      addNS(children[i].data, children[i].children);\n    }\n  }\n}\n\nmodule.exports = function h(sel, b, c) {\n  var data = {}, children, text, i;\n  if (arguments.length === 3) {\n    data = b;\n    if (is.array(c)) { children = c; }\n    else if (is.primitive(c)) { text = c; }\n  } else if (arguments.length === 2) {\n    if (is.array(b)) { children = b; }\n    else if (is.primitive(b)) { text = b; }\n    else { data = b; }\n  }\n  if (is.array(children)) {\n    for (i = 0; i < children.length; ++i) {\n      if (is.primitive(children[i])) children[i] = VNode(undefined, undefined, undefined, children[i]);\n    }\n  }\n  if (sel[0] === 's' && sel[1] === 'v' && sel[2] === 'g') {\n    addNS(data, children);\n  }\n  return VNode(sel, data, children, text, undefined);\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/snabbdom/h.js\n ** module id = 68\n ** module chunks = 0 1\n **/","function updateClass(oldVnode, vnode) {\n  var cur, name, elm = vnode.elm,\n      oldClass = oldVnode.data.class || {},\n      klass = vnode.data.class || {};\n  for (name in klass) {\n    cur = klass[name];\n    if (cur !== oldClass[name]) {\n      elm.classList[cur ? 'add' : 'remove'](name);\n    }\n  }\n}\n\nmodule.exports = {create: updateClass, update: updateClass};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/snabbdom/modules/class.js\n ** module id = 69\n ** module chunks = 0 1\n **/","function updateProps(oldVnode, vnode) {\n  var key, cur, old, elm = vnode.elm,\n      oldProps = oldVnode.data.props || {}, props = vnode.data.props || {};\n  for (key in props) {\n    cur = props[key];\n    old = oldProps[key];\n    if (old !== cur) {\n      elm[key] = cur;\n    }\n  }\n}\n\nmodule.exports = {create: updateProps, update: updateProps};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/snabbdom/modules/props.js\n ** module id = 70\n ** module chunks = 0 1\n **/","var booleanAttrs = [\"allowfullscreen\", \"async\", \"autofocus\", \"autoplay\", \"checked\", \"compact\", \"controls\", \"declare\", \n                \"default\", \"defaultchecked\", \"defaultmuted\", \"defaultselected\", \"defer\", \"disabled\", \"draggable\", \n                \"enabled\", \"formnovalidate\", \"hidden\", \"indeterminate\", \"inert\", \"ismap\", \"itemscope\", \"loop\", \"multiple\", \n                \"muted\", \"nohref\", \"noresize\", \"noshade\", \"novalidate\", \"nowrap\", \"open\", \"pauseonexit\", \"readonly\", \n                \"required\", \"reversed\", \"scoped\", \"seamless\", \"selected\", \"sortable\", \"spellcheck\", \"translate\", \n                \"truespeed\", \"typemustmatch\", \"visible\"];\n    \nvar booleanAttrsDict = {};\nfor(var i=0, len = booleanAttrs.length; i < len; i++) {\n  booleanAttrsDict[booleanAttrs[i]] = true;\n}\n    \nfunction updateAttrs(oldVnode, vnode) {\n  var key, cur, old, elm = vnode.elm,\n      oldAttrs = oldVnode.data.attrs || {}, attrs = vnode.data.attrs || {};\n  \n  // update modified attributes, add new attributes\n  for (key in attrs) {\n    cur = attrs[key];\n    old = oldAttrs[key];\n    if (old !== cur) {\n      // TODO: add support to namespaced attributes (setAttributeNS)\n      if(!cur && booleanAttrsDict[key])\n        elm.removeAttribute(key);\n      else\n        elm.setAttribute(key, cur);\n    }\n  }\n  //remove removed attributes\n  // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n  // the other option is to remove all attributes with value == undefined\n  for (key in oldAttrs) {\n    if (!(key in attrs)) {\n      elm.removeAttribute(key);\n    }\n  }\n}\n\nmodule.exports = {create: updateAttrs, update: updateAttrs};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/snabbdom/modules/attributes.js\n ** module id = 71\n ** module chunks = 0 1\n **/","var raf = requestAnimationFrame || setTimeout;\nvar nextFrame = function(fn) { raf(function() { raf(fn); }); };\n\nfunction setNextFrame(obj, prop, val) {\n  nextFrame(function() { obj[prop] = val; });\n}\n\nfunction updateStyle(oldVnode, vnode) {\n  var cur, name, elm = vnode.elm,\n      oldStyle = oldVnode.data.style || {},\n      style = vnode.data.style || {},\n      oldHasDel = 'delayed' in oldStyle;\n  for (name in style) {\n    cur = style[name];\n    if (name === 'delayed') {\n      for (name in style.delayed) {\n        cur = style.delayed[name];\n        if (!oldHasDel || cur !== oldStyle.delayed[name]) {\n          setNextFrame(elm.style, name, cur);\n        }\n      }\n    } else if (name !== 'remove' && cur !== oldStyle[name]) {\n      elm.style[name] = cur;\n    }\n  }\n}\n\nfunction applyDestroyStyle(vnode) {\n  var style, name, elm = vnode.elm, s = vnode.data.style;\n  if (!s || !(style = s.destroy)) return;\n  for (name in style) {\n    elm.style[name] = style[name];\n  }\n}\n\nfunction applyRemoveStyle(vnode, rm) {\n  var s = vnode.data.style;\n  if (!s || !s.remove) {\n    rm();\n    return;\n  }\n  var name, elm = vnode.elm, idx, i = 0, maxDur = 0,\n      compStyle, style = s.remove, amount = 0, applied = [];\n  for (name in style) {\n    applied.push(name);\n    elm.style[name] = style[name];\n  }\n  compStyle = getComputedStyle(elm);\n  var props = compStyle['transition-property'].split(', ');\n  for (; i < props.length; ++i) {\n    if(applied.indexOf(props[i]) !== -1) amount++;\n  }\n  elm.addEventListener('transitionend', function(ev) {\n    if (ev.target === elm) --amount;\n    if (amount === 0) rm();\n  });\n}\n\nmodule.exports = {create: updateStyle, update: updateStyle, destroy: applyDestroyStyle, remove: applyRemoveStyle};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/snabbdom/modules/style.js\n ** module id = 72\n ** module chunks = 0 1\n **/","var is = require('../is');\n\nfunction arrInvoker(arr) {\n  return function() {\n    // Special case when length is two, for performance\n    arr.length === 2 ? arr[0](arr[1]) : arr[0].apply(undefined, arr.slice(1));\n  };\n}\n\nfunction fnInvoker(o) {\n  return function(ev) { o.fn(ev); };\n}\n\nfunction updateEventListeners(oldVnode, vnode) {\n  var name, cur, old, elm = vnode.elm,\n      oldOn = oldVnode.data.on || {}, on = vnode.data.on;\n  if (!on) return;\n  for (name in on) {\n    cur = on[name];\n    old = oldOn[name];\n    if (old === undefined) {\n      if (is.array(cur)) {\n        elm.addEventListener(name, arrInvoker(cur));\n      } else {\n        cur = {fn: cur};\n        on[name] = cur;\n        elm.addEventListener(name, fnInvoker(cur));\n      }\n    } else if (is.array(old)) {\n      // Deliberately modify old array since it's captured in closure created with `arrInvoker`\n      old.length = cur.length;\n      for (var i = 0; i < old.length; ++i) old[i] = cur[i];\n      on[name]  = old;\n    } else {\n      old.fn = cur;\n      on[name] = old;\n    }\n  }\n}\n\nmodule.exports = {create: updateEventListeners, update: updateEventListeners};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/snabbdom/modules/eventlisteners.js\n ** module id = 73\n ** module chunks = 0 1\n **/","// Fork of: https://github.com/scottcorgan/tiny-emitter\n\n/**\n * Event Emitter\n * @mixin\n * @public\n */\nfunction eventEmitter() {\n  const e = {};\n\n  /**\n   *\n   * Subscribe to an event.\n   *\n   * @param {string} name\n   * @param {function} callback\n   * @param {any} [context]\n   * @public\n   * @instance\n   * @memberof eventEmitter\n   */\n  function on(name, callback, context) {\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: context\n    });\n    return this;\n  }\n\n  /**\n   *\n   * Subscribe to an event only once.\n   *\n   * @param {string} name\n   * @param {function} callback\n   * @param {any} [context]\n   * @memberof eventEmitter\n   * @instance\n   * @public\n   */\n  function once(name, callback, context) {\n    function listener() {\n      off(name, listener);\n      callback.apply(context, arguments);\n    }\n\n    listener._ = callback\n\n    return on(name, listener, context);\n  }\n\n  /**\n   *\n   * Emit an event\n   *\n   * @param {string} name\n   * @param {any} ...rest arguments for the event\n   * @memberof eventEmitter\n   * @instance\n   * @public\n   */\n  function emit(name) {\n    const data = [].slice.call(arguments, 1);\n    const evtArr = (e[name] || []).slice();\n    let i = 0;\n    const len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  }\n\n  /**\n   * Unsubscribe from an event or all events.\n   * If no callback is provided, it unsubscribes all callback from this event.\n   *\n   * @param {string} name\n   * @param {function} callback\n   * @memberof eventEmitter\n   * @instance\n   * @public\n   */\n  function off(name, callback) {\n    const evts = e[name];\n    const liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n\n  return { on, once, emit, off };\n}\n\nmodule.exports = eventEmitter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/eventEmitter.js\n **/",";(function() {\n\n  'use strict';\n\n  // jshint unused:vars\n    var _arity = function _arity(n, fn) {\n        // jshint unused:vars\n        switch (n) {\n        case 0:\n            return function () {\n                return fn.apply(this, arguments);\n            };\n        case 1:\n            return function (a0) {\n                return fn.apply(this, arguments);\n            };\n        case 2:\n            return function (a0, a1) {\n                return fn.apply(this, arguments);\n            };\n        case 3:\n            return function (a0, a1, a2) {\n                return fn.apply(this, arguments);\n            };\n        case 4:\n            return function (a0, a1, a2, a3) {\n                return fn.apply(this, arguments);\n            };\n        case 5:\n            return function (a0, a1, a2, a3, a4) {\n                return fn.apply(this, arguments);\n            };\n        case 6:\n            return function (a0, a1, a2, a3, a4, a5) {\n                return fn.apply(this, arguments);\n            };\n        case 7:\n            return function (a0, a1, a2, a3, a4, a5, a6) {\n                return fn.apply(this, arguments);\n            };\n        case 8:\n            return function (a0, a1, a2, a3, a4, a5, a6, a7) {\n                return fn.apply(this, arguments);\n            };\n        case 9:\n            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n                return fn.apply(this, arguments);\n            };\n        case 10:\n            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {\n                return fn.apply(this, arguments);\n            };\n        default:\n            throw new Error('First argument to _arity must be a non-negative integer no greater than ten');\n        }\n    };\n\n    var _arrayFromIterator = function _arrayFromIterator(iter) {\n        var list = [];\n        var next;\n        while (!(next = iter.next()).done) {\n            list.push(next.value);\n        }\n        return list;\n    };\n\n    /**\n     * Private `concat` function to merge two array-like objects.\n     *\n     * @private\n     * @param {Array|Arguments} [set1=[]] An array-like object.\n     * @param {Array|Arguments} [set2=[]] An array-like object.\n     * @return {Array} A new, merged array.\n     * @example\n     *\n     *      _concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]\n     */\n    var _concat = function _concat(set1, set2) {\n        set1 = set1 || [];\n        set2 = set2 || [];\n        var idx;\n        var len1 = set1.length;\n        var len2 = set2.length;\n        var result = [];\n        idx = 0;\n        while (idx < len1) {\n            result[result.length] = set1[idx];\n            idx += 1;\n        }\n        idx = 0;\n        while (idx < len2) {\n            result[result.length] = set2[idx];\n            idx += 1;\n        }\n        return result;\n    };\n\n    var _filter = function _filter(fn, list) {\n        var idx = 0, len = list.length, result = [];\n        while (idx < len) {\n            if (fn(list[idx])) {\n                result[result.length] = list[idx];\n            }\n            idx += 1;\n        }\n        return result;\n    };\n\n    var _forceReduced = function _forceReduced(x) {\n        return {\n            '@@transducer/value': x,\n            '@@transducer/reduced': true\n        };\n    };\n\n    var _has = function _has(prop, obj) {\n        return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n\n    /**\n     * Tests whether or not an object is an array.\n     *\n     * @private\n     * @param {*} val The object to test.\n     * @return {Boolean} `true` if `val` is an array, `false` otherwise.\n     * @example\n     *\n     *      _isArray([]); //=> true\n     *      _isArray(null); //=> false\n     *      _isArray({}); //=> false\n     */\n    var _isArray = Array.isArray || function _isArray(val) {\n        return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';\n    };\n\n    var _isPlaceholder = function _isPlaceholder(a) {\n        return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;\n    };\n\n    var _isString = function _isString(x) {\n        return Object.prototype.toString.call(x) === '[object String]';\n    };\n\n    var _isTransformer = function _isTransformer(obj) {\n        return typeof obj['@@transducer/step'] === 'function';\n    };\n\n    var _map = function _map(fn, functor) {\n        var idx = 0;\n        var len = functor.length;\n        var result = Array(len);\n        while (idx < len) {\n            result[idx] = fn(functor[idx]);\n            idx += 1;\n        }\n        return result;\n    };\n\n    var _pipe = function _pipe(f, g) {\n        return function () {\n            return g.call(this, f.apply(this, arguments));\n        };\n    };\n\n    var _reduced = function _reduced(x) {\n        return x && x['@@transducer/reduced'] ? x : {\n            '@@transducer/value': x,\n            '@@transducer/reduced': true\n        };\n    };\n\n    /**\n     * An optimized, private array `slice` implementation.\n     *\n     * @private\n     * @param {Arguments|Array} args The array or arguments object to consider.\n     * @param {Number} [from=0] The array index to slice from, inclusive.\n     * @param {Number} [to=args.length] The array index to slice to, exclusive.\n     * @return {Array} A new, sliced array.\n     * @example\n     *\n     *      _slice([1, 2, 3, 4, 5], 1, 3); //=> [2, 3]\n     *\n     *      var firstThreeArgs = function(a, b, c, d) {\n     *        return _slice(arguments, 0, 3);\n     *      };\n     *      firstThreeArgs(1, 2, 3, 4); //=> [1, 2, 3]\n     */\n    var _slice = function _slice(args, from, to) {\n        switch (arguments.length) {\n        case 1:\n            return _slice(args, 0, args.length);\n        case 2:\n            return _slice(args, from, args.length);\n        default:\n            var list = [];\n            var idx = 0;\n            var len = Math.max(0, Math.min(args.length, to) - from);\n            while (idx < len) {\n                list[idx] = args[from + idx];\n                idx += 1;\n            }\n            return list;\n        }\n    };\n\n    var _xfBase = {\n        init: function () {\n            return this.xf['@@transducer/init']();\n        },\n        result: function (result) {\n            return this.xf['@@transducer/result'](result);\n        }\n    };\n\n    var _xwrap = function () {\n        function XWrap(fn) {\n            this.f = fn;\n        }\n        XWrap.prototype['@@transducer/init'] = function () {\n            throw new Error('init not implemented on XWrap');\n        };\n        XWrap.prototype['@@transducer/result'] = function (acc) {\n            return acc;\n        };\n        XWrap.prototype['@@transducer/step'] = function (acc, x) {\n            return this.f(acc, x);\n        };\n        return function _xwrap(fn) {\n            return new XWrap(fn);\n        };\n    }();\n\n    /**\n     * Similar to hasMethod, this checks whether a function has a [methodname]\n     * function. If it isn't an array it will execute that function otherwise it\n     * will default to the ramda implementation.\n     *\n     * @private\n     * @param {Function} fn ramda implemtation\n     * @param {String} methodname property to check for a custom implementation\n     * @return {Object} Whatever the return value of the method is.\n     */\n    var _checkForMethod = function _checkForMethod(methodname, fn) {\n        return function () {\n            var length = arguments.length;\n            if (length === 0) {\n                return fn();\n            }\n            var obj = arguments[length - 1];\n            return _isArray(obj) || typeof obj[methodname] !== 'function' ? fn.apply(this, arguments) : obj[methodname].apply(obj, _slice(arguments, 0, length - 1));\n        };\n    };\n\n    /**\n     * Optimized internal one-arity curry function.\n     *\n     * @private\n     * @category Function\n     * @param {Function} fn The function to curry.\n     * @return {Function} The curried function.\n     */\n    var _curry1 = function _curry1(fn) {\n        return function f1(a) {\n            if (arguments.length === 0 || _isPlaceholder(a)) {\n                return f1;\n            } else {\n                return fn.apply(this, arguments);\n            }\n        };\n    };\n\n    /**\n     * Optimized internal two-arity curry function.\n     *\n     * @private\n     * @category Function\n     * @param {Function} fn The function to curry.\n     * @return {Function} The curried function.\n     */\n    var _curry2 = function _curry2(fn) {\n        return function f2(a, b) {\n            switch (arguments.length) {\n            case 0:\n                return f2;\n            case 1:\n                return _isPlaceholder(a) ? f2 : _curry1(function (_b) {\n                    return fn(a, _b);\n                });\n            default:\n                return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {\n                    return fn(_a, b);\n                }) : _isPlaceholder(b) ? _curry1(function (_b) {\n                    return fn(a, _b);\n                }) : fn(a, b);\n            }\n        };\n    };\n\n    /**\n     * Optimized internal three-arity curry function.\n     *\n     * @private\n     * @category Function\n     * @param {Function} fn The function to curry.\n     * @return {Function} The curried function.\n     */\n    var _curry3 = function _curry3(fn) {\n        return function f3(a, b, c) {\n            switch (arguments.length) {\n            case 0:\n                return f3;\n            case 1:\n                return _isPlaceholder(a) ? f3 : _curry2(function (_b, _c) {\n                    return fn(a, _b, _c);\n                });\n            case 2:\n                return _isPlaceholder(a) && _isPlaceholder(b) ? f3 : _isPlaceholder(a) ? _curry2(function (_a, _c) {\n                    return fn(_a, b, _c);\n                }) : _isPlaceholder(b) ? _curry2(function (_b, _c) {\n                    return fn(a, _b, _c);\n                }) : _curry1(function (_c) {\n                    return fn(a, b, _c);\n                });\n            default:\n                return _isPlaceholder(a) && _isPlaceholder(b) && _isPlaceholder(c) ? f3 : _isPlaceholder(a) && _isPlaceholder(b) ? _curry2(function (_a, _b) {\n                    return fn(_a, _b, c);\n                }) : _isPlaceholder(a) && _isPlaceholder(c) ? _curry2(function (_a, _c) {\n                    return fn(_a, b, _c);\n                }) : _isPlaceholder(b) && _isPlaceholder(c) ? _curry2(function (_b, _c) {\n                    return fn(a, _b, _c);\n                }) : _isPlaceholder(a) ? _curry1(function (_a) {\n                    return fn(_a, b, c);\n                }) : _isPlaceholder(b) ? _curry1(function (_b) {\n                    return fn(a, _b, c);\n                }) : _isPlaceholder(c) ? _curry1(function (_c) {\n                    return fn(a, b, _c);\n                }) : fn(a, b, c);\n            }\n        };\n    };\n\n    /**\n     * Internal curryN function.\n     *\n     * @private\n     * @category Function\n     * @param {Number} length The arity of the curried function.\n     * @param {Array} received An array of arguments received thus far.\n     * @param {Function} fn The function to curry.\n     * @return {Function} The curried function.\n     */\n    var _curryN = function _curryN(length, received, fn) {\n        return function () {\n            var combined = [];\n            var argsIdx = 0;\n            var left = length;\n            var combinedIdx = 0;\n            while (combinedIdx < received.length || argsIdx < arguments.length) {\n                var result;\n                if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {\n                    result = received[combinedIdx];\n                } else {\n                    result = arguments[argsIdx];\n                    argsIdx += 1;\n                }\n                combined[combinedIdx] = result;\n                if (!_isPlaceholder(result)) {\n                    left -= 1;\n                }\n                combinedIdx += 1;\n            }\n            return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));\n        };\n    };\n\n    /**\n     * Returns a function that dispatches with different strategies based on the\n     * object in list position (last argument). If it is an array, executes [fn].\n     * Otherwise, if it has a function with [methodname], it will execute that\n     * function (functor case). Otherwise, if it is a transformer, uses transducer\n     * [xf] to return a new transformer (transducer case). Otherwise, it will\n     * default to executing [fn].\n     *\n     * @private\n     * @param {String} methodname property to check for a custom implementation\n     * @param {Function} xf transducer to initialize if object is transformer\n     * @param {Function} fn default ramda implementation\n     * @return {Function} A function that dispatches on object in list position\n     */\n    var _dispatchable = function _dispatchable(methodname, xf, fn) {\n        return function () {\n            var length = arguments.length;\n            if (length === 0) {\n                return fn();\n            }\n            var obj = arguments[length - 1];\n            if (!_isArray(obj)) {\n                var args = _slice(arguments, 0, length - 1);\n                if (typeof obj[methodname] === 'function') {\n                    return obj[methodname].apply(obj, args);\n                }\n                if (_isTransformer(obj)) {\n                    var transducer = xf.apply(null, args);\n                    return transducer(obj);\n                }\n            }\n            return fn.apply(this, arguments);\n        };\n    };\n\n    var _xall = function () {\n        function XAll(f, xf) {\n            this.xf = xf;\n            this.f = f;\n            this.all = true;\n        }\n        XAll.prototype['@@transducer/init'] = _xfBase.init;\n        XAll.prototype['@@transducer/result'] = function (result) {\n            if (this.all) {\n                result = this.xf['@@transducer/step'](result, true);\n            }\n            return this.xf['@@transducer/result'](result);\n        };\n        XAll.prototype['@@transducer/step'] = function (result, input) {\n            if (!this.f(input)) {\n                this.all = false;\n                result = _reduced(this.xf['@@transducer/step'](result, false));\n            }\n            return result;\n        };\n        return _curry2(function _xall(f, xf) {\n            return new XAll(f, xf);\n        });\n    }();\n\n    var _xfilter = function () {\n        function XFilter(f, xf) {\n            this.xf = xf;\n            this.f = f;\n        }\n        XFilter.prototype['@@transducer/init'] = _xfBase.init;\n        XFilter.prototype['@@transducer/result'] = _xfBase.result;\n        XFilter.prototype['@@transducer/step'] = function (result, input) {\n            return this.f(input) ? this.xf['@@transducer/step'](result, input) : result;\n        };\n        return _curry2(function _xfilter(f, xf) {\n            return new XFilter(f, xf);\n        });\n    }();\n\n    var _xfind = function () {\n        function XFind(f, xf) {\n            this.xf = xf;\n            this.f = f;\n            this.found = false;\n        }\n        XFind.prototype['@@transducer/init'] = _xfBase.init;\n        XFind.prototype['@@transducer/result'] = function (result) {\n            if (!this.found) {\n                result = this.xf['@@transducer/step'](result, void 0);\n            }\n            return this.xf['@@transducer/result'](result);\n        };\n        XFind.prototype['@@transducer/step'] = function (result, input) {\n            if (this.f(input)) {\n                this.found = true;\n                result = _reduced(this.xf['@@transducer/step'](result, input));\n            }\n            return result;\n        };\n        return _curry2(function _xfind(f, xf) {\n            return new XFind(f, xf);\n        });\n    }();\n\n    var _xfindIndex = function () {\n        function XFindIndex(f, xf) {\n            this.xf = xf;\n            this.f = f;\n            this.idx = -1;\n            this.found = false;\n        }\n        XFindIndex.prototype['@@transducer/init'] = _xfBase.init;\n        XFindIndex.prototype['@@transducer/result'] = function (result) {\n            if (!this.found) {\n                result = this.xf['@@transducer/step'](result, -1);\n            }\n            return this.xf['@@transducer/result'](result);\n        };\n        XFindIndex.prototype['@@transducer/step'] = function (result, input) {\n            this.idx += 1;\n            if (this.f(input)) {\n                this.found = true;\n                result = _reduced(this.xf['@@transducer/step'](result, this.idx));\n            }\n            return result;\n        };\n        return _curry2(function _xfindIndex(f, xf) {\n            return new XFindIndex(f, xf);\n        });\n    }();\n\n    var _xmap = function () {\n        function XMap(f, xf) {\n            this.xf = xf;\n            this.f = f;\n        }\n        XMap.prototype['@@transducer/init'] = _xfBase.init;\n        XMap.prototype['@@transducer/result'] = _xfBase.result;\n        XMap.prototype['@@transducer/step'] = function (result, input) {\n            return this.xf['@@transducer/step'](result, this.f(input));\n        };\n        return _curry2(function _xmap(f, xf) {\n            return new XMap(f, xf);\n        });\n    }();\n\n    /**\n     * Returns `true` if all elements of the list match the predicate, `false` if\n     * there are any that don't.\n     *\n     * Dispatches to the `all` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> Boolean\n     * @param {Function} fn The predicate function.\n     * @param {Array} list The array to consider.\n     * @return {Boolean} `true` if the predicate is satisfied by every element, `false`\n     *         otherwise.\n     * @see R.any, R.none, R.transduce\n     * @example\n     *\n     *      var lessThan2 = R.flip(R.lt)(2);\n     *      var lessThan3 = R.flip(R.lt)(3);\n     *      R.all(lessThan2)([1, 2]); //=> false\n     *      R.all(lessThan3)([1, 2]); //=> true\n     */\n    var all = _curry2(_dispatchable('all', _xall, function all(fn, list) {\n        var idx = 0;\n        while (idx < list.length) {\n            if (!fn(list[idx])) {\n                return false;\n            }\n            idx += 1;\n        }\n        return true;\n    }));\n\n    /**\n     * Creates a function that is bound to a context.\n     * Note: `R.bind` does not provide the additional argument-binding capabilities of\n     * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n     *\n     * @func\n     * @memberOf R\n     * @since v0.6.0\n     * @category Function\n     * @category Object\n     * @sig (* -> *) -> {*} -> (* -> *)\n     * @param {Function} fn The function to bind to context\n     * @param {Object} thisObj The context to bind `fn` to\n     * @return {Function} A function that will execute in the context of `thisObj`.\n     * @see R.partial\n     */\n    var bind = _curry2(function bind(fn, thisObj) {\n        return _arity(fn.length, function () {\n            return fn.apply(thisObj, arguments);\n        });\n    });\n\n    /**\n     * Returns a curried equivalent of the provided function, with the specified\n     * arity. The curried function has two unusual capabilities. First, its\n     * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the\n     * following are equivalent:\n     *\n     *   - `g(1)(2)(3)`\n     *   - `g(1)(2, 3)`\n     *   - `g(1, 2)(3)`\n     *   - `g(1, 2, 3)`\n     *\n     * Secondly, the special placeholder value `R.__` may be used to specify\n     * \"gaps\", allowing partial application of any combination of arguments,\n     * regardless of their positions. If `g` is as above and `_` is `R.__`, the\n     * following are equivalent:\n     *\n     *   - `g(1, 2, 3)`\n     *   - `g(_, 2, 3)(1)`\n     *   - `g(_, _, 3)(1)(2)`\n     *   - `g(_, _, 3)(1, 2)`\n     *   - `g(_, 2)(1)(3)`\n     *   - `g(_, 2)(1, 3)`\n     *   - `g(_, 2)(_, 3)(1)`\n     *\n     * @func\n     * @memberOf R\n     * @since v0.5.0\n     * @category Function\n     * @sig Number -> (* -> a) -> (* -> a)\n     * @param {Number} length The arity for the returned function.\n     * @param {Function} fn The function to curry.\n     * @return {Function} A new, curried function.\n     * @see R.curry\n     * @example\n     *\n     *      var sumArgs = (...args) => R.sum(args);\n     *\n     *      var curriedAddFourNumbers = R.curryN(4, sumArgs);\n     *      var f = curriedAddFourNumbers(1, 2);\n     *      var g = f(3);\n     *      g(4); //=> 10\n     */\n    var curryN = _curry2(function curryN(length, fn) {\n        if (length === 1) {\n            return _curry1(fn);\n        }\n        return _arity(length, _curryN(length, [], fn));\n    });\n\n    /**\n     * Returns a new list containing only those items that match a given predicate\n     * function. The predicate function is passed one argument: *(value)*.\n     *\n     * Note that `R.filter` does not skip deleted or unassigned indices, unlike the\n     * native `Array.prototype.filter` method. For more details on this behavior,\n     * see:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter#Description\n     *\n     * Dispatches to the `filter` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> [a]\n     * @param {Function} fn The function called per iteration.\n     * @param {Array} list The collection to iterate over.\n     * @return {Array} The new filtered array.\n     * @see R.reject, R.transduce, R.addIndex\n     * @example\n     *\n     *      var isEven = n => n % 2 === 0;\n     *\n     *      R.filter(isEven, [1, 2, 3, 4]); //=> [2, 4]\n     */\n    var filter = _curry2(_dispatchable('filter', _xfilter, _filter));\n\n    /**\n     * Returns the first element of the list which matches the predicate, or\n     * `undefined` if no element matches.\n     *\n     * Dispatches to the `find` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> a | undefined\n     * @param {Function} fn The predicate function used to determine if the element is the\n     *        desired one.\n     * @param {Array} list The array to consider.\n     * @return {Object} The element found, or `undefined`.\n     * @see R.transduce\n     * @example\n     *\n     *      var xs = [{a: 1}, {a: 2}, {a: 3}];\n     *      R.find(R.propEq('a', 2))(xs); //=> {a: 2}\n     *      R.find(R.propEq('a', 4))(xs); //=> undefined\n     */\n    var find = _curry2(_dispatchable('find', _xfind, function find(fn, list) {\n        var idx = 0;\n        var len = list.length;\n        while (idx < len) {\n            if (fn(list[idx])) {\n                return list[idx];\n            }\n            idx += 1;\n        }\n    }));\n\n    /**\n     * Returns the index of the first element of the list which matches the\n     * predicate, or `-1` if no element matches.\n     *\n     * Dispatches to the `findIndex` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.1\n     * @category List\n     * @sig (a -> Boolean) -> [a] -> Number\n     * @param {Function} fn The predicate function used to determine if the element is the\n     * desired one.\n     * @param {Array} list The array to consider.\n     * @return {Number} The index of the element found, or `-1`.\n     * @see R.transduce\n     * @example\n     *\n     *      var xs = [{a: 1}, {a: 2}, {a: 3}];\n     *      R.findIndex(R.propEq('a', 2))(xs); //=> 1\n     *      R.findIndex(R.propEq('a', 4))(xs); //=> -1\n     */\n    var findIndex = _curry2(_dispatchable('findIndex', _xfindIndex, function findIndex(fn, list) {\n        var idx = 0;\n        var len = list.length;\n        while (idx < len) {\n            if (fn(list[idx])) {\n                return idx;\n            }\n            idx += 1;\n        }\n        return -1;\n    }));\n\n    /**\n     * Iterate over an input `list`, calling a provided function `fn` for each\n     * element in the list.\n     *\n     * `fn` receives one argument: *(value)*.\n     *\n     * Note: `R.forEach` does not skip deleted or unassigned indices (sparse\n     * arrays), unlike the native `Array.prototype.forEach` method. For more\n     * details on this behavior, see:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Description\n     *\n     * Also note that, unlike `Array.prototype.forEach`, Ramda's `forEach` returns\n     * the original array. In some libraries this function is named `each`.\n     *\n     * Dispatches to the `forEach` method of the second argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.1\n     * @category List\n     * @sig (a -> *) -> [a] -> [a]\n     * @param {Function} fn The function to invoke. Receives one argument, `value`.\n     * @param {Array} list The list to iterate over.\n     * @return {Array} The original list.\n     * @see R.addIndex\n     * @example\n     *\n     *      var printXPlusFive = x => console.log(x + 5);\n     *      R.forEach(printXPlusFive, [1, 2, 3]); //=> [1, 2, 3]\n     *      //-> 6\n     *      //-> 7\n     *      //-> 8\n     */\n    var forEach = _curry2(_checkForMethod('forEach', function forEach(fn, list) {\n        var len = list.length;\n        var idx = 0;\n        while (idx < len) {\n            fn(list[idx]);\n            idx += 1;\n        }\n        return list;\n    }));\n\n    /**\n     * Returns true if its arguments are identical, false otherwise. Values are\n     * identical if they reference the same memory. `NaN` is identical to `NaN`;\n     * `0` and `-0` are not identical.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.15.0\n     * @category Relation\n     * @sig a -> a -> Boolean\n     * @param {*} a\n     * @param {*} b\n     * @return {Boolean}\n     * @example\n     *\n     *      var o = {};\n     *      R.identical(o, o); //=> true\n     *      R.identical(1, 1); //=> true\n     *      R.identical(1, '1'); //=> false\n     *      R.identical([], []); //=> false\n     *      R.identical(0, -0); //=> false\n     *      R.identical(NaN, NaN); //=> true\n     */\n    // SameValue algorithm\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Step 6.a: NaN == NaN\n    var identical = _curry2(function identical(a, b) {\n        // SameValue algorithm\n        if (a === b) {\n            // Steps 1-5, 7-10\n            // Steps 6.b-6.e: +0 != -0\n            return a !== 0 || 1 / a === 1 / b;\n        } else {\n            // Step 6.a: NaN == NaN\n            return a !== a && b !== b;\n        }\n    });\n\n    /**\n     * See if an object (`val`) is an instance of the supplied constructor. This\n     * function will check up the inheritance chain, if any.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category Type\n     * @sig (* -> {*}) -> a -> Boolean\n     * @param {Object} ctor A constructor\n     * @param {*} val The value to test\n     * @return {Boolean}\n     * @example\n     *\n     *      R.is(Object, {}); //=> true\n     *      R.is(Number, 1); //=> true\n     *      R.is(Object, 1); //=> false\n     *      R.is(String, 's'); //=> true\n     *      R.is(String, new String('')); //=> true\n     *      R.is(Object, new String('')); //=> true\n     *      R.is(Object, 's'); //=> false\n     *      R.is(Number, {}); //=> false\n     */\n    var is = _curry2(function is(Ctor, val) {\n        return val != null && val.constructor === Ctor || val instanceof Ctor;\n    });\n\n    /**\n     * Tests whether or not an object is similar to an array.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.5.0\n     * @category Type\n     * @category List\n     * @sig * -> Boolean\n     * @param {*} x The object to test.\n     * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.\n     * @example\n     *\n     *      R.isArrayLike([]); //=> true\n     *      R.isArrayLike(true); //=> false\n     *      R.isArrayLike({}); //=> false\n     *      R.isArrayLike({length: 10}); //=> false\n     *      R.isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true\n     */\n    var isArrayLike = _curry1(function isArrayLike(x) {\n        if (_isArray(x)) {\n            return true;\n        }\n        if (!x) {\n            return false;\n        }\n        if (typeof x !== 'object') {\n            return false;\n        }\n        if (x instanceof String) {\n            return false;\n        }\n        if (x.nodeType === 1) {\n            return !!x.length;\n        }\n        if (x.length === 0) {\n            return true;\n        }\n        if (x.length > 0) {\n            return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);\n        }\n        return false;\n    });\n\n    /**\n     * Returns a list containing the names of all the enumerable own properties of\n     * the supplied object.\n     * Note that the order of the output array is not guaranteed to be consistent\n     * across different JS platforms.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig {k: v} -> [k]\n     * @param {Object} obj The object to extract properties from\n     * @return {Array} An array of the object's own properties.\n     * @example\n     *\n     *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']\n     */\n    // cover IE < 9 keys issues\n    var keys = function () {\n        // cover IE < 9 keys issues\n        var hasEnumBug = !{ toString: null }.propertyIsEnumerable('toString');\n        var nonEnumerableProps = [\n            'constructor',\n            'valueOf',\n            'isPrototypeOf',\n            'toString',\n            'propertyIsEnumerable',\n            'hasOwnProperty',\n            'toLocaleString'\n        ];\n        var contains = function contains(list, item) {\n            var idx = 0;\n            while (idx < list.length) {\n                if (list[idx] === item) {\n                    return true;\n                }\n                idx += 1;\n            }\n            return false;\n        };\n        return typeof Object.keys === 'function' ? _curry1(function keys(obj) {\n            return Object(obj) !== obj ? [] : Object.keys(obj);\n        }) : _curry1(function keys(obj) {\n            if (Object(obj) !== obj) {\n                return [];\n            }\n            var prop, ks = [], nIdx;\n            for (prop in obj) {\n                if (_has(prop, obj)) {\n                    ks[ks.length] = prop;\n                }\n            }\n            if (hasEnumBug) {\n                nIdx = nonEnumerableProps.length - 1;\n                while (nIdx >= 0) {\n                    prop = nonEnumerableProps[nIdx];\n                    if (_has(prop, obj) && !contains(ks, prop)) {\n                        ks[ks.length] = prop;\n                    }\n                    nIdx -= 1;\n                }\n            }\n            return ks;\n        });\n    }();\n\n    /**\n     * Returns a partial copy of an object containing only the keys specified. If\n     * the key does not exist, the property is ignored.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig [k] -> {k: v} -> {k: v}\n     * @param {Array} names an array of String property names to copy onto a new object\n     * @param {Object} obj The object to copy from\n     * @return {Object} A new object with only properties from `names` on it.\n     * @see R.omit, R.props\n     * @example\n     *\n     *      R.pick(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}\n     *      R.pick(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1}\n     */\n    var pick = _curry2(function pick(names, obj) {\n        var result = {};\n        var idx = 0;\n        while (idx < names.length) {\n            if (names[idx] in obj) {\n                result[names[idx]] = obj[names[idx]];\n            }\n            idx += 1;\n        }\n        return result;\n    });\n\n    /**\n     * Returns a partial copy of an object containing only the keys that satisfy\n     * the supplied predicate.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Object\n     * @sig (v, k -> Boolean) -> {k: v} -> {k: v}\n     * @param {Function} pred A predicate to determine whether or not a key\n     *        should be included on the output object.\n     * @param {Object} obj The object to copy from\n     * @return {Object} A new object with only properties that satisfy `pred`\n     *         on it.\n     * @see R.pick\n     * @example\n     *\n     *      var isUpperCase = (val, key) => key.toUpperCase() === key;\n     *      R.pickBy(isUpperCase, {a: 1, b: 2, A: 3, B: 4}); //=> {A: 3, B: 4}\n     */\n    var pickBy = _curry2(function pickBy(test, obj) {\n        var result = {};\n        for (var prop in obj) {\n            if (test(obj[prop], prop, obj)) {\n                result[prop] = obj[prop];\n            }\n        }\n        return result;\n    });\n\n    /**\n     * Returns a function that when supplied an object returns the indicated\n     * property of that object, if it exists.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig s -> {s: a} -> a | Undefined\n     * @param {String} p The property name\n     * @param {Object} obj The object to query\n     * @return {*} The value at `obj.p`.\n     * @example\n     *\n     *      R.prop('x', {x: 100}); //=> 100\n     *      R.prop('x', {}); //=> undefined\n     */\n    var prop = _curry2(function prop(p, obj) {\n        return obj[p];\n    });\n\n    /**\n     * Acts as multiple `prop`: array of keys in, array of values out. Preserves\n     * order.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig [k] -> {k: v} -> [v]\n     * @param {Array} ps The property names to fetch\n     * @param {Object} obj The object to query\n     * @return {Array} The corresponding values or partially applied function.\n     * @example\n     *\n     *      R.props(['x', 'y'], {x: 1, y: 2}); //=> [1, 2]\n     *      R.props(['c', 'a', 'b'], {b: 2, a: 1}); //=> [undefined, 1, 2]\n     *\n     *      var fullName = R.compose(R.join(' '), R.props(['first', 'last']));\n     *      fullName({last: 'Bullet-Tooth', age: 33, first: 'Tony'}); //=> 'Tony Bullet-Tooth'\n     */\n    var props = _curry2(function props(ps, obj) {\n        var len = ps.length;\n        var out = [];\n        var idx = 0;\n        while (idx < len) {\n            out[idx] = obj[ps[idx]];\n            idx += 1;\n        }\n        return out;\n    });\n\n    /**\n     * Returns a new list or string with the elements or characters in reverse\n     * order.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [a]\n     * @sig String -> String\n     * @param {Array|String} list\n     * @return {Array|String}\n     * @example\n     *\n     *      R.reverse([1, 2, 3]);  //=> [3, 2, 1]\n     *      R.reverse([1, 2]);     //=> [2, 1]\n     *      R.reverse([1]);        //=> [1]\n     *      R.reverse([]);         //=> []\n     *\n     *      R.reverse('abc');      //=> 'cba'\n     *      R.reverse('ab');       //=> 'ba'\n     *      R.reverse('a');        //=> 'a'\n     *      R.reverse('');         //=> ''\n     */\n    var reverse = _curry1(function reverse(list) {\n        return _isString(list) ? list.split('').reverse().join('') : _slice(list).reverse();\n    });\n\n    /**\n     * Returns the elements of the given list or string (or object with a `slice`\n     * method) from `fromIndex` (inclusive) to `toIndex` (exclusive).\n     *\n     * Dispatches to the `slice` method of the third argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.4\n     * @category List\n     * @sig Number -> Number -> [a] -> [a]\n     * @sig Number -> Number -> String -> String\n     * @param {Number} fromIndex The start index (inclusive).\n     * @param {Number} toIndex The end index (exclusive).\n     * @param {*} list\n     * @return {*}\n     * @example\n     *\n     *      R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']\n     *      R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']\n     *      R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']\n     *      R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']\n     *      R.slice(0, 3, 'ramda');                     //=> 'ram'\n     */\n    var slice = _curry3(_checkForMethod('slice', function slice(fromIndex, toIndex, list) {\n        return Array.prototype.slice.call(list, fromIndex, toIndex);\n    }));\n\n    /**\n     * Returns all but the first element of the given list or string (or object\n     * with a `tail` method).\n     *\n     * Dispatches to the `slice` method of the first argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [a]\n     * @sig String -> String\n     * @param {*} list\n     * @return {*}\n     * @see R.head, R.init, R.last\n     * @example\n     *\n     *      R.tail([1, 2, 3]);  //=> [2, 3]\n     *      R.tail([1, 2]);     //=> [2]\n     *      R.tail([1]);        //=> []\n     *      R.tail([]);         //=> []\n     *\n     *      R.tail('abc');  //=> 'bc'\n     *      R.tail('ab');   //=> 'b'\n     *      R.tail('a');    //=> ''\n     *      R.tail('');     //=> ''\n     */\n    var tail = _checkForMethod('tail', slice(1, Infinity));\n\n    /**\n     * Gives a single-word string description of the (native) type of a value,\n     * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not\n     * attempt to distinguish user Object types any further, reporting them all as\n     * 'Object'.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.8.0\n     * @category Type\n     * @sig (* -> {*}) -> String\n     * @param {*} val The value to test\n     * @return {String}\n     * @example\n     *\n     *      R.type({}); //=> \"Object\"\n     *      R.type(1); //=> \"Number\"\n     *      R.type(false); //=> \"Boolean\"\n     *      R.type('s'); //=> \"String\"\n     *      R.type(null); //=> \"Null\"\n     *      R.type([]); //=> \"Array\"\n     *      R.type(/[A-z]/); //=> \"RegExp\"\n     */\n    var type = _curry1(function type(val) {\n        return val === null ? 'Null' : val === undefined ? 'Undefined' : Object.prototype.toString.call(val).slice(8, -1);\n    });\n\n    /**\n     * Returns a list of all the enumerable own properties of the supplied object.\n     * Note that the order of the output array is not guaranteed across different\n     * JS platforms.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig {k: v} -> [v]\n     * @param {Object} obj The object to extract values from\n     * @return {Array} An array of the values of the object's own properties.\n     * @example\n     *\n     *      R.values({a: 1, b: 2, c: 3}); //=> [1, 2, 3]\n     */\n    var values = _curry1(function values(obj) {\n        var props = keys(obj);\n        var len = props.length;\n        var vals = [];\n        var idx = 0;\n        while (idx < len) {\n            vals[idx] = obj[props[idx]];\n            idx += 1;\n        }\n        return vals;\n    });\n\n    // Values of other types are only equal if identical.\n    var _equals = function _equals(a, b, stackA, stackB) {\n        if (identical(a, b)) {\n            return true;\n        }\n        if (type(a) !== type(b)) {\n            return false;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        if (typeof a.equals === 'function' || typeof b.equals === 'function') {\n            return typeof a.equals === 'function' && a.equals(b) && typeof b.equals === 'function' && b.equals(a);\n        }\n        switch (type(a)) {\n        case 'Arguments':\n        case 'Array':\n        case 'Object':\n            break;\n        case 'Boolean':\n        case 'Number':\n        case 'String':\n            if (!(typeof a === typeof b && identical(a.valueOf(), b.valueOf()))) {\n                return false;\n            }\n            break;\n        case 'Date':\n            if (!identical(a.valueOf(), b.valueOf())) {\n                return false;\n            }\n            break;\n        case 'Error':\n            if (!(a.name === b.name && a.message === b.message)) {\n                return false;\n            }\n            break;\n        case 'RegExp':\n            if (!(a.source === b.source && a.global === b.global && a.ignoreCase === b.ignoreCase && a.multiline === b.multiline && a.sticky === b.sticky && a.unicode === b.unicode)) {\n                return false;\n            }\n            break;\n        case 'Map':\n        case 'Set':\n            if (!_equals(_arrayFromIterator(a.entries()), _arrayFromIterator(b.entries()), stackA, stackB)) {\n                return false;\n            }\n            break;\n        case 'Int8Array':\n        case 'Uint8Array':\n        case 'Uint8ClampedArray':\n        case 'Int16Array':\n        case 'Uint16Array':\n        case 'Int32Array':\n        case 'Uint32Array':\n        case 'Float32Array':\n        case 'Float64Array':\n            break;\n        case 'ArrayBuffer':\n            break;\n        default:\n            // Values of other types are only equal if identical.\n            return false;\n        }\n        var keysA = keys(a);\n        if (keysA.length !== keys(b).length) {\n            return false;\n        }\n        var idx = stackA.length - 1;\n        while (idx >= 0) {\n            if (stackA[idx] === a) {\n                return stackB[idx] === b;\n            }\n            idx -= 1;\n        }\n        stackA.push(a);\n        stackB.push(b);\n        idx = keysA.length - 1;\n        while (idx >= 0) {\n            var key = keysA[idx];\n            if (!(_has(key, b) && _equals(b[key], a[key], stackA, stackB))) {\n                return false;\n            }\n            idx -= 1;\n        }\n        stackA.pop();\n        stackB.pop();\n        return true;\n    };\n\n    /**\n     * `_makeFlat` is a helper function that returns a one-level or fully recursive\n     * function based on the flag passed in.\n     *\n     * @private\n     */\n    var _makeFlat = function _makeFlat(recursive) {\n        return function flatt(list) {\n            var value, result = [], idx = 0, j, ilen = list.length, jlen;\n            while (idx < ilen) {\n                if (isArrayLike(list[idx])) {\n                    value = recursive ? flatt(list[idx]) : list[idx];\n                    j = 0;\n                    jlen = value.length;\n                    while (j < jlen) {\n                        result[result.length] = value[j];\n                        j += 1;\n                    }\n                } else {\n                    result[result.length] = list[idx];\n                }\n                idx += 1;\n            }\n            return result;\n        };\n    };\n\n    var _reduce = function () {\n        function _arrayReduce(xf, acc, list) {\n            var idx = 0, len = list.length;\n            while (idx < len) {\n                acc = xf['@@transducer/step'](acc, list[idx]);\n                if (acc && acc['@@transducer/reduced']) {\n                    acc = acc['@@transducer/value'];\n                    break;\n                }\n                idx += 1;\n            }\n            return xf['@@transducer/result'](acc);\n        }\n        function _iterableReduce(xf, acc, iter) {\n            var step = iter.next();\n            while (!step.done) {\n                acc = xf['@@transducer/step'](acc, step.value);\n                if (acc && acc['@@transducer/reduced']) {\n                    acc = acc['@@transducer/value'];\n                    break;\n                }\n                step = iter.next();\n            }\n            return xf['@@transducer/result'](acc);\n        }\n        function _methodReduce(xf, acc, obj) {\n            return xf['@@transducer/result'](obj.reduce(bind(xf['@@transducer/step'], xf), acc));\n        }\n        var symIterator = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';\n        return function _reduce(fn, acc, list) {\n            if (typeof fn === 'function') {\n                fn = _xwrap(fn);\n            }\n            if (isArrayLike(list)) {\n                return _arrayReduce(fn, acc, list);\n            }\n            if (typeof list.reduce === 'function') {\n                return _methodReduce(fn, acc, list);\n            }\n            if (list[symIterator] != null) {\n                return _iterableReduce(fn, acc, list[symIterator]());\n            }\n            if (typeof list.next === 'function') {\n                return _iterableReduce(fn, acc, list);\n            }\n            throw new TypeError('reduce: list must be array or iterable');\n        };\n    }();\n\n    /**\n     * Creates a new list iteration function from an existing one by adding two new\n     * parameters to its callback function: the current index, and the entire list.\n     *\n     * This would turn, for instance, Ramda's simple `map` function into one that\n     * more closely resembles `Array.prototype.map`. Note that this will only work\n     * for functions in which the iteration callback function is the first\n     * parameter, and where the list is the last parameter. (This latter might be\n     * unimportant if the list parameter is not used.)\n     *\n     * @func\n     * @memberOf R\n     * @since v0.15.0\n     * @category Function\n     * @category List\n     * @sig ((a ... -> b) ... -> [a] -> *) -> (a ..., Int, [a] -> b) ... -> [a] -> *)\n     * @param {Function} fn A list iteration function that does not pass index or list to its callback\n     * @return {Function} An altered list iteration function that passes (item, index, list) to its callback\n     * @example\n     *\n     *      var mapIndexed = R.addIndex(R.map);\n     *      mapIndexed((val, idx) => idx + '-' + val, ['f', 'o', 'o', 'b', 'a', 'r']);\n     *      //=> ['0-f', '1-o', '2-o', '3-b', '4-a', '5-r']\n     */\n    var addIndex = _curry1(function addIndex(fn) {\n        return curryN(fn.length, function () {\n            var idx = 0;\n            var origFn = arguments[0];\n            var list = arguments[arguments.length - 1];\n            var args = _slice(arguments);\n            args[0] = function () {\n                var result = origFn.apply(this, _concat(arguments, [\n                    idx,\n                    list\n                ]));\n                idx += 1;\n                return result;\n            };\n            return fn.apply(this, args);\n        });\n    });\n\n    /**\n     * Returns a curried equivalent of the provided function. The curried function\n     * has two unusual capabilities. First, its arguments needn't be provided one\n     * at a time. If `f` is a ternary function and `g` is `R.curry(f)`, the\n     * following are equivalent:\n     *\n     *   - `g(1)(2)(3)`\n     *   - `g(1)(2, 3)`\n     *   - `g(1, 2)(3)`\n     *   - `g(1, 2, 3)`\n     *\n     * Secondly, the special placeholder value `R.__` may be used to specify\n     * \"gaps\", allowing partial application of any combination of arguments,\n     * regardless of their positions. If `g` is as above and `_` is `R.__`, the\n     * following are equivalent:\n     *\n     *   - `g(1, 2, 3)`\n     *   - `g(_, 2, 3)(1)`\n     *   - `g(_, _, 3)(1)(2)`\n     *   - `g(_, _, 3)(1, 2)`\n     *   - `g(_, 2)(1)(3)`\n     *   - `g(_, 2)(1, 3)`\n     *   - `g(_, 2)(_, 3)(1)`\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (* -> a) -> (* -> a)\n     * @param {Function} fn The function to curry.\n     * @return {Function} A new, curried function.\n     * @see R.curryN\n     * @example\n     *\n     *      var addFourNumbers = (a, b, c, d) => a + b + c + d;\n     *\n     *      var curriedAddFourNumbers = R.curry(addFourNumbers);\n     *      var f = curriedAddFourNumbers(1, 2);\n     *      var g = f(3);\n     *      g(4); //=> 10\n     */\n    var curry = _curry1(function curry(fn) {\n        return curryN(fn.length, fn);\n    });\n\n    /**\n     * Returns `true` if its arguments are equivalent, `false` otherwise. Handles\n     * cyclical data structures.\n     *\n     * Dispatches symmetrically to the `equals` methods of both arguments, if\n     * present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.15.0\n     * @category Relation\n     * @sig a -> b -> Boolean\n     * @param {*} a\n     * @param {*} b\n     * @return {Boolean}\n     * @example\n     *\n     *      R.equals(1, 1); //=> true\n     *      R.equals(1, '1'); //=> false\n     *      R.equals([1, 2, 3], [1, 2, 3]); //=> true\n     *\n     *      var a = {}; a.v = a;\n     *      var b = {}; b.v = b;\n     *      R.equals(a, b); //=> true\n     */\n    var equals = _curry2(function equals(a, b) {\n        return _equals(a, b, [], []);\n    });\n\n    /**\n     * Returns a new list by pulling every item out of it (and all its sub-arrays)\n     * and putting them in a new array, depth-first.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig [a] -> [b]\n     * @param {Array} list The array to consider.\n     * @return {Array} The flattened list.\n     * @see R.unnest\n     * @example\n     *\n     *      R.flatten([1, 2, [3, 4], 5, [6, [7, 8, [9, [10, 11], 12]]]]);\n     *      //=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]\n     */\n    var flatten = _curry1(_makeFlat(true));\n\n    /**\n     * Returns a new list, constructed by applying the supplied function to every\n     * element of the supplied list.\n     *\n     * Note: `R.map` does not skip deleted or unassigned indices (sparse arrays),\n     * unlike the native `Array.prototype.map` method. For more details on this\n     * behavior, see:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map#Description\n     *\n     * Dispatches to the `map` method of the second argument, if present.\n     *\n     * Acts as a transducer if a transformer is given in list position.\n     *\n     * Also treats functions as functors and will compose them together.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig Functor f => (a -> b) -> f a -> f b\n     * @param {Function} fn The function to be called on every element of the input `list`.\n     * @param {Array} list The list to be iterated over.\n     * @return {Array} The new list.\n     * @see R.transduce, R.addIndex\n     * @example\n     *\n     *      var double = x => x * 2;\n     *\n     *      R.map(double, [1, 2, 3]); //=> [2, 4, 6]\n     *\n     *      R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}\n     */\n    var map = _curry2(_dispatchable('map', _xmap, function map(fn, functor) {\n        switch (Object.prototype.toString.call(functor)) {\n        case '[object Function]':\n            return curryN(functor.length, function () {\n                return fn.call(this, functor.apply(this, arguments));\n            });\n        case '[object Object]':\n            return _reduce(function (acc, key) {\n                acc[key] = fn(functor[key]);\n                return acc;\n            }, {}, keys(functor));\n        default:\n            return _map(fn, functor);\n        }\n    }));\n\n    /**\n     * Like `mapObj`, but passes additional arguments to the predicate function.\n     * The predicate function is passed three arguments: *(value, key, obj)*.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.9.0\n     * @category Object\n     * @sig (v, k, {k: v} -> v) -> {k: v} -> {k: v}\n     * @param {Function} fn A function called for each property in `obj`. Its return value will\n     *        become a new property on the return object.\n     * @param {Object} obj The object to iterate over.\n     * @return {Object} A new object with the same keys as `obj` and values that are the result\n     *         of running each property through `fn`.\n     * @example\n     *\n     *      var values = { x: 1, y: 2, z: 3 };\n     *      var prependKeyAndDouble = (num, key, obj) => key + (num * 2);\n     *\n     *      R.mapObjIndexed(prependKeyAndDouble, values); //=> { x: 'x2', y: 'y4', z: 'z6' }\n     */\n    var mapObjIndexed = _curry2(function mapObjIndexed(fn, obj) {\n        return _reduce(function (acc, key) {\n            acc[key] = fn(obj[key], key, obj);\n            return acc;\n        }, {}, keys(obj));\n    });\n\n    /**\n     * Returns a single item by iterating through the list, successively calling\n     * the iterator function and passing it an accumulator value and the current\n     * value from the array, and then passing the result to the next call.\n     *\n     * The iterator function receives two values: *(acc, value)*. It may use\n     * `R.reduced` to shortcut the iteration.\n     *\n     * Note: `R.reduce` does not skip deleted or unassigned indices (sparse\n     * arrays), unlike the native `Array.prototype.reduce` method. For more details\n     * on this behavior, see:\n     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description\n     *\n     * Dispatches to the `reduce` method of the third argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig ((a, b) -> a) -> a -> [b] -> a\n     * @param {Function} fn The iterator function. Receives two values, the accumulator and the\n     *        current element from the array.\n     * @param {*} acc The accumulator value.\n     * @param {Array} list The list to iterate over.\n     * @return {*} The final, accumulated value.\n     * @see R.reduced, R.addIndex\n     * @example\n     *\n     *      var numbers = [1, 2, 3];\n     *      var add = (a, b) => a + b;\n     *\n     *      R.reduce(add, 10, numbers); //=> 16\n     */\n    var reduce = _curry3(_reduce);\n\n    var _flatCat = function () {\n        var preservingReduced = function (xf) {\n            return {\n                '@@transducer/init': _xfBase.init,\n                '@@transducer/result': function (result) {\n                    return xf['@@transducer/result'](result);\n                },\n                '@@transducer/step': function (result, input) {\n                    var ret = xf['@@transducer/step'](result, input);\n                    return ret['@@transducer/reduced'] ? _forceReduced(ret) : ret;\n                }\n            };\n        };\n        return function _xcat(xf) {\n            var rxf = preservingReduced(xf);\n            return {\n                '@@transducer/init': _xfBase.init,\n                '@@transducer/result': function (result) {\n                    return rxf['@@transducer/result'](result);\n                },\n                '@@transducer/step': function (result, input) {\n                    return !isArrayLike(input) ? _reduce(rxf, result, [input]) : _reduce(rxf, result, input);\n                }\n            };\n        };\n    }();\n\n    var _indexOf = function _indexOf(list, item, from) {\n        var idx = from;\n        while (idx < list.length) {\n            if (equals(list[idx], item)) {\n                return idx;\n            }\n            idx += 1;\n        }\n        return -1;\n    };\n\n    var _xchain = _curry2(function _xchain(f, xf) {\n        return map(f, _flatCat(xf));\n    });\n\n    /**\n     * `chain` maps a function over a list and concatenates the results. `chain`\n     * is also known as `flatMap` in some libraries\n     *\n     * Dispatches to the `chain` method of the second argument, if present.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.3.0\n     * @category List\n     * @sig (a -> [b]) -> [a] -> [b]\n     * @param {Function} fn\n     * @param {Array} list\n     * @return {Array}\n     * @example\n     *\n     *      var duplicate = n => [n, n];\n     *      R.chain(duplicate, [1, 2, 3]); //=> [1, 1, 2, 2, 3, 3]\n     */\n    var chain = _curry2(_dispatchable('chain', _xchain, function chain(fn, monad) {\n        if (typeof monad === 'function') {\n            return function () {\n                return monad.call(this, fn.apply(this, arguments)).apply(this, arguments);\n            };\n        }\n        return _makeFlat(false)(map(fn, monad));\n    }));\n\n    /**\n     * Performs left-to-right function composition. The leftmost function may have\n     * any arity; the remaining functions must be unary.\n     *\n     * In some libraries this function is named `sequence`.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig (((a, b, ..., n) -> o), (o -> p), ..., (x -> y), (y -> z)) -> ((a, b, ..., n) -> z)\n     * @param {...Function} functions\n     * @return {Function}\n     * @see R.compose\n     * @example\n     *\n     *      var f = R.pipe(Math.pow, R.negate, R.inc);\n     *\n     *      f(3, 4); // -(3^4) + 1\n     */\n    var pipe = function pipe() {\n        if (arguments.length === 0) {\n            throw new Error('pipe requires at least one argument');\n        }\n        return _arity(arguments[0].length, reduce(_pipe, arguments[0], tail(arguments)));\n    };\n\n    /* globals Set */\n    // manually crawl the list to distinguish between +0 and -0\n    // non-zero numbers can utilise Set\n    // all these types can utilise Set\n    // null can utilise Set\n    // other objects need R.equals for equality\n    // anything else not covered above, defer to R.equals\n    var _contains = typeof Set === 'undefined' ? function _contains(a, list) {\n        return _indexOf(list, a, 0) >= 0;\n    } : function _containsSet(a, list) {\n        var idx, inf, item;\n        switch (typeof a) {\n        case 'number':\n            if (a === 0) {\n                // manually crawl the list to distinguish between +0 and -0\n                idx = 0;\n                inf = 1 / a;\n                while (idx < list.length) {\n                    item = list[idx];\n                    if (item === 0 && 1 / item === inf) {\n                        return true;\n                    }\n                    idx += 1;\n                }\n                return false;\n            }\n            // non-zero numbers can utilise Set\n            return new Set(list).has(a);\n        // all these types can utilise Set\n        case 'string':\n        case 'boolean':\n        case 'function':\n        case 'undefined':\n            return new Set(list).has(a);\n        case 'object':\n            if (a === null) {\n                // null can utilise Set\n                return new Set(list).has(a);\n            }\n            // other objects need R.equals for equality\n            return _indexOf(list, a, 0) >= 0;\n        default:\n            // anything else not covered above, defer to R.equals\n            return _indexOf(list, a, 0) >= 0;\n        }\n    };\n\n    /**\n     * Performs right-to-left function composition. The rightmost function may have\n     * any arity; the remaining functions must be unary.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Function\n     * @sig ((y -> z), (x -> y), ..., (o -> p), ((a, b, ..., n) -> o)) -> ((a, b, ..., n) -> z)\n     * @param {...Function} functions\n     * @return {Function}\n     * @see R.pipe\n     * @example\n     *\n     *      var f = R.compose(R.inc, R.negate, Math.pow);\n     *\n     *      f(3, 4); // -(3^4) + 1\n     */\n    var compose = function compose() {\n        if (arguments.length === 0) {\n            throw new Error('compose requires at least one argument');\n        }\n        return pipe.apply(this, reverse(arguments));\n    };\n\n    /**\n     * Returns `true` if the specified value is equal, in `R.equals` terms, to at\n     * least one element of the given list; `false` otherwise.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category List\n     * @sig a -> [a] -> Boolean\n     * @param {Object} a The item to compare against.\n     * @param {Array} list The array to consider.\n     * @return {Boolean} `true` if the item is in the list, `false` otherwise.\n     * @see R.any\n     * @example\n     *\n     *      R.contains(3, [1, 2, 3]); //=> true\n     *      R.contains(4, [1, 2, 3]); //=> false\n     *      R.contains([42], [[42]]); //=> true\n     */\n    var contains = _curry2(_contains);\n\n    /**\n     * Returns a partial copy of an object omitting the keys specified.\n     *\n     * @func\n     * @memberOf R\n     * @since v0.1.0\n     * @category Object\n     * @sig [String] -> {String: *} -> {String: *}\n     * @param {Array} names an array of String property names to omit from the new object\n     * @param {Object} obj The object to copy from\n     * @return {Object} A new object with properties from `names` not on it.\n     * @see R.pick\n     * @example\n     *\n     *      R.omit(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, c: 3}\n     */\n    var omit = _curry2(function omit(names, obj) {\n        var result = {};\n        for (var prop in obj) {\n            if (!_contains(prop, names)) {\n                result[prop] = obj[prop];\n            }\n        }\n        return result;\n    });\n\n    var R = {\n        addIndex: addIndex,\n        all: all,\n        chain: chain,\n        compose: compose,\n        contains: contains,\n        curry: curry,\n        curryN: curryN,\n        filter: filter,\n        find: find,\n        findIndex: findIndex,\n        flatten: flatten,\n        forEach: forEach,\n        is: is,\n        map: map,\n        mapObjIndexed: mapObjIndexed,\n        omit: omit,\n        pick: pick,\n        pickBy: pickBy,\n        prop: prop,\n        props: props,\n        reduce: reduce,\n        values: values\n    };\n\n  /* TEST_ENTRY_POINT */\n\n  if (typeof exports === 'object') {\n    module.exports = R;\n  } else if (typeof define === 'function' && define.amd) {\n    define(function() { return R; });\n  } else {\n    this.R = R;\n  }\n\n}.call(this));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./vendor/ramda.js\n ** module id = 75\n ** module chunks = 0 1\n **/","import apiBase from './apiBase';\n\nfunction fetchNext(url, urls, success, failure, { contentType, method, body }) {\n  function tryNext(err) {\n    if (urls.length) {\n      return fetchNext(urls[0], urls.slice(1), success, failure);\n    } else {\n      failure(err);\n    }\n  }\n\n  if (contentType === 'img') {\n    let img = new Image();\n    img.crossOrigin = 'anonymous'; // don't send cookies, but do send Origin: header\n    img.addEventListener('load', (e) => {\n      success(img);\n    });\n    img.addEventListener('error', tryNext);\n    img.src = url; //s.shift();\n  } else {\n    let request = new XMLHttpRequest();\n    request.open(method || 'GET', url, true);\n    if (body) request.setRequestHeader('Content-Type', 'application/json');\n\n    if (contentType === 'binary') request.responseType = \"arraybuffer\";\n    request.onload = (xhr) => {\n      let response = request.response;\n\n      if (request.status >= 200 && request.status < 400) {\n        if (contentType === 'json') response = JSON.parse(response);\n        success(response);\n      } else {\n        tryNext(request);\n      }\n    }\n    request.onerror = tryNext;\n    request.send(body);\n  }\n}\n\nconst callApi = apiBase(fetchNext);\n\nexport default callApi;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/api.js\n **/","\nimport { forEach } from 'ramda';\nimport rsvp from 'rsvp';\n\n// Simple, persistent api cache for now.\nconst apiCache = {};\nconst fetchingCache = {};\n\nexport default function apiBase(fetchNext) {\n  return (store, {types, url, fireAndForget, payload, queryKey, requestPayload, cache, method, contentType, body, files, success, failure}) => {\n    let urls = Array.isArray(url) ? url : [url];\n    if (!contentType) contentType = 'json';\n    const [requestType, successType, failureType] = types || ['IGN','IGN','IGN'];\n\n    // If we provide a 'queryKey', there can be only one query at once\n    if (queryKey) {\n      if (apiCache[queryKey]) return fireAndForget ? apiCache[queryKey] : Promise.resolve(apiCache[queryKey]);\n      if (fetchingCache[queryKey]) {\n        fetchingCache[queryKey].push({ payload, store });\n        store.dispatch({type: requestType, payload});\n        return;\n      }\n      fetchingCache[queryKey] = [{ payload, store }];\n    }\n\n    store.dispatch({type: requestType, payload});\n\n    var promise = new rsvp.Promise((resolve, reject) => {\n      function onFailure(error) {\n        if (queryKey) {\n          forEach(({ payload, store }) => {\n            store.dispatch({type: failureType, payload, error});\n          }, fetchingCache[queryKey]);\n          delete fetchingCache[queryKey];\n        } else {\n          store.dispatch({type: failureType, payload, error});\n        }\n        if (failure) failure(error);\n        reject(error);\n      };\n\n      function onSuccess(response) {\n        if (queryKey) {\n          apiCache[queryKey] = response;\n          forEach(({ payload, store }) => {\n            store.dispatch({type: successType, payload, response});\n          }, fetchingCache[queryKey]);\n          delete fetchingCache[queryKey];\n        } else {\n          store.dispatch({type: successType, payload, response});\n        }\n        if (success) success(response);\n        resolve(response);\n      };\n\n\n      fetchNext(urls[0], urls.slice(1), onSuccess, onFailure, { contentType, method, body, files });\n    });\n\n    return fireAndForget ? null : promise;\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/apiBase.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/promise.js\n ** module id = 78\n ** module chunks = 0 1\n **/","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/_core').Promise;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/promise.js\n ** module id = 79\n ** module chunks = 0 1\n **/","require('./es6.array.iterator');\nvar global        = require('./_global')\n  , hide          = require('./_hide')\n  , Iterators     = require('./_iterators')\n  , TO_STRING_TAG = require('./_wks')('toStringTag');\n\nfor(var collections = ['NodeList', 'DOMTokenList', 'MediaList', 'StyleSheetList', 'CSSRuleList'], i = 0; i < 5; i++){\n  var NAME       = collections[i]\n    , Collection = global[NAME]\n    , proto      = Collection && Collection.prototype;\n  if(proto && !proto[TO_STRING_TAG])hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/web.dom.iterable.js\n ** module id = 81\n ** module chunks = 0 1\n **/","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables')\n  , step             = require('./_iter-step')\n  , Iterators        = require('./_iterators')\n  , toIObject        = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.array.iterator.js\n ** module id = 82\n ** module chunks = 0 1\n **/","module.exports = function(){ /* empty */ };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_add-to-unscopables.js\n ** module id = 83\n ** module chunks = 0 1\n **/","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_iter-step.js\n ** module id = 84\n ** module chunks = 0 1\n **/","'use strict';\nvar LIBRARY            = require('./_library')\n  , global             = require('./_global')\n  , ctx                = require('./_ctx')\n  , classof            = require('./_classof')\n  , $export            = require('./_export')\n  , isObject           = require('./_is-object')\n  , anObject           = require('./_an-object')\n  , aFunction          = require('./_a-function')\n  , anInstance         = require('./_an-instance')\n  , forOf              = require('./_for-of')\n  , setProto           = require('./_set-proto').set\n  , speciesConstructor = require('./_species-constructor')\n  , task               = require('./_task').set\n  , microtask          = require('./_microtask')\n  , PROMISE            = 'Promise'\n  , TypeError          = global.TypeError\n  , process            = global.process\n  , $Promise           = global[PROMISE]\n  , process            = global.process\n  , isNode             = classof(process) == 'process'\n  , empty              = function(){ /* empty */ }\n  , Internal, GenericPromiseCapability, Wrapper;\n\nvar USE_NATIVE = !!function(){\n  try {\n    // correct subclassing with @@species support\n    var promise     = $Promise.resolve(1)\n      , FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function(exec){ exec(empty, empty); };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function') && promise.then(empty) instanceof FakePromise;\n  } catch(e){ /* empty */ }\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // with library wrapper special case\n  return a === b || a === $Promise && b === Wrapper;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar newPromiseCapability = function(C){\n  return sameConstructor($Promise, C)\n    ? new PromiseCapability(C)\n    : new GenericPromiseCapability(C);\n};\nvar PromiseCapability = GenericPromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject  = aFunction(reject);\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(promise, isReject){\n  if(promise._n)return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function(){\n    var value = promise._v\n      , ok    = promise._s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , domain  = reaction.domain\n        , result, then;\n      try {\n        if(handler){\n          if(!ok){\n            if(promise._h == 2)onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if(handler === true)result = value;\n          else {\n            if(domain)domain.enter();\n            result = handler(value);\n            if(domain)domain.exit();\n          }\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if(isReject && !promise._h)onUnhandled(promise);\n  });\n};\nvar onUnhandled = function(promise){\n  task.call(global, function(){\n    var value = promise._v\n      , abrupt, handler, console;\n    if(isUnhandled(promise)){\n      abrupt = perform(function(){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if(abrupt)throw abrupt.error;\n  });\n};\nvar isUnhandled = function(promise){\n  if(promise._h == 1)return false;\n  var chain = promise._a || promise._c\n    , i     = 0\n    , reaction;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar onHandleUnhandled = function(promise){\n  task.call(global, function(){\n    var handler;\n    if(isNode){\n      process.emit('rejectionHandled', promise);\n    } else if(handler = global.onrejectionhandled){\n      handler({promise: promise, reason: promise._v});\n    }\n  });\n};\nvar $reject = function(value){\n  var promise = this;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if(!promise._a)promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function(value){\n  var promise = this\n    , then;\n  if(promise._d)return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if(promise === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      microtask(function(){\n        var wrapper = {_w: promise, _d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch(e){\n    $reject.call({_w: promise, _d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor){\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch(err){\n      $reject.call(this, err);\n    }\n  };\n  Internal = function Promise(executor){\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction    = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok     = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail   = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if(this._a)this._a.push(reaction);\n      if(this._s)notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n  PromiseCapability = function(){\n    var promise  = new Internal;\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject  = ctx($reject, promise, 1);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: $Promise});\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = newPromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof $Promise && sameConstructor(x.constructor, this))return x;\n    var capability = newPromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function(iter){\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      var values    = []\n        , index     = 0\n        , remaining = 1;\n      forOf(iterable, false, function(promise){\n        var $index        = index++\n          , alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled  = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = this\n      , capability = newPromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.promise.js\n ** module id = 85\n ** module chunks = 0 1\n **/","module.exports = function(it, Constructor, name, forbiddenField){\n  if(!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)){\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_an-instance.js\n ** module id = 86\n ** module chunks = 0 1\n **/","var ctx         = require('./_ctx')\n  , call        = require('./_iter-call')\n  , isArrayIter = require('./_is-array-iter')\n  , anObject    = require('./_an-object')\n  , toLength    = require('./_to-length')\n  , getIterFn   = require('./core.get-iterator-method');\nmodule.exports = function(iterable, entries, fn, that, ITERATOR){\n  var iterFn = ITERATOR ? function(){ return iterable; } : getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    call(iterator, f, step.value, entries);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_for-of.js\n ** module id = 87\n ** module chunks = 0 1\n **/","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object')\n  , anObject = require('./_an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_set-proto.js\n ** module id = 88\n ** module chunks = 0 1\n **/","var pIE            = require('./_object-pie')\r\n  , createDesc     = require('./_property-desc')\r\n  , toIObject      = require('./_to-iobject')\r\n  , toPrimitive    = require('./_to-primitive')\r\n  , has            = require('./_has')\r\n  , IE8_DOM_DEFINE = require('./_ie8-dom-define')\r\n  , gOPD           = Object.getOwnPropertyDescriptor;\r\n\r\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P){\r\n  O = toIObject(O);\r\n  P = toPrimitive(P, true);\r\n  if(IE8_DOM_DEFINE)try {\r\n    return gOPD(O, P);\r\n  } catch(e){ /* empty */ }\r\n  if(has(O, P))return createDesc(!pIE.f.call(O, P), O[P]);\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gopd.js\n ** module id = 89\n ** module chunks = 0 1\n **/","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./_an-object')\n  , aFunction = require('./_a-function')\n  , SPECIES   = require('./_wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_species-constructor.js\n ** module id = 90\n ** module chunks = 0 1\n **/","var ctx                = require('./_ctx')\n  , invoke             = require('./_invoke')\n  , html               = require('./_html')\n  , cel                = require('./_dom-create')\n  , global             = require('./_global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./_cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_task.js\n ** module id = 91\n ** module chunks = 0 1\n **/","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_invoke.js\n ** module id = 92\n ** module chunks = 0 1\n **/","var global    = require('./_global')\n  , macrotask = require('./_task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./_cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, fn;\n  if(isNode && (parent = process.domain))parent.exit();\n  while(head){\n    fn = head.fn;\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = true\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = !toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function(fn){\n  var task = {fn: fn, next: undefined};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_microtask.js\n ** module id = 93\n ** module chunks = 0 1\n **/","var hide = require('./_hide');\nmodule.exports = function(target, src, safe){\n  for(var key in src){\n    if(safe && target[key])target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_redefine-all.js\n ** module id = 94\n ** module chunks = 0 1\n **/","'use strict';\nvar global      = require('./_global')\n  , core        = require('./_core')\n  , dP          = require('./_object-dp')\n  , DESCRIPTORS = require('./_descriptors')\n  , SPECIES     = require('./_wks')('species');\n\nmodule.exports = function(KEY){\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])dP.f(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_set-species.js\n ** module id = 95\n ** module chunks = 0 1\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"babel-runtime/core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/slicedToArray.js\n ** module id = 96\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/is-iterable.js\n ** module id = 97\n ** module chunks = 0 1\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/is-iterable.js\n ** module id = 98\n ** module chunks = 0 1\n **/","var classof   = require('./_classof')\n  , ITERATOR  = require('./_wks')('iterator')\n  , Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function(it){\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/core.is-iterable.js\n ** module id = 99\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/get-iterator.js\n ** module id = 100\n ** module chunks = 0 1\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/get-iterator.js\n ** module id = 101\n ** module chunks = 0 1\n **/","var anObject = require('./_an-object')\n  , get      = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/core.get-iterator.js\n ** module id = 102\n ** module chunks = 0 1\n **/","/*!\n * @overview RSVP - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE\n * @version   3.2.1\n */\n\n(function() {\n    \"use strict\";\n    function lib$rsvp$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$rsvp$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$rsvp$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$rsvp$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$rsvp$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$rsvp$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$rsvp$utils$$isArray = lib$rsvp$utils$$_isArray;\n\n    var lib$rsvp$utils$$now = Date.now || function() { return new Date().getTime(); };\n\n    function lib$rsvp$utils$$F() { }\n\n    var lib$rsvp$utils$$o_create = (Object.create || function (o) {\n      if (arguments.length > 1) {\n        throw new Error('Second argument not supported');\n      }\n      if (typeof o !== 'object') {\n        throw new TypeError('Argument must be an object');\n      }\n      lib$rsvp$utils$$F.prototype = o;\n      return new lib$rsvp$utils$$F();\n    });\n    function lib$rsvp$events$$indexOf(callbacks, callback) {\n      for (var i=0, l=callbacks.length; i<l; i++) {\n        if (callbacks[i] === callback) { return i; }\n      }\n\n      return -1;\n    }\n\n    function lib$rsvp$events$$callbacksFor(object) {\n      var callbacks = object._promiseCallbacks;\n\n      if (!callbacks) {\n        callbacks = object._promiseCallbacks = {};\n      }\n\n      return callbacks;\n    }\n\n    var lib$rsvp$events$$default = {\n\n      /**\n        `RSVP.EventTarget.mixin` extends an object with EventTarget methods. For\n        Example:\n\n        ```javascript\n        var object = {};\n\n        RSVP.EventTarget.mixin(object);\n\n        object.on('finished', function(event) {\n          // handle event\n        });\n\n        object.trigger('finished', { detail: value });\n        ```\n\n        `EventTarget.mixin` also works with prototypes:\n\n        ```javascript\n        var Person = function() {};\n        RSVP.EventTarget.mixin(Person.prototype);\n\n        var yehuda = new Person();\n        var tom = new Person();\n\n        yehuda.on('poke', function(event) {\n          console.log('Yehuda says OW');\n        });\n\n        tom.on('poke', function(event) {\n          console.log('Tom says OW');\n        });\n\n        yehuda.trigger('poke');\n        tom.trigger('poke');\n        ```\n\n        @method mixin\n        @for RSVP.EventTarget\n        @private\n        @param {Object} object object to extend with EventTarget methods\n      */\n      'mixin': function(object) {\n        object['on']      = this['on'];\n        object['off']     = this['off'];\n        object['trigger'] = this['trigger'];\n        object._promiseCallbacks = undefined;\n        return object;\n      },\n\n      /**\n        Registers a callback to be executed when `eventName` is triggered\n\n        ```javascript\n        object.on('event', function(eventInfo){\n          // handle the event\n        });\n\n        object.trigger('event');\n        ```\n\n        @method on\n        @for RSVP.EventTarget\n        @private\n        @param {String} eventName name of the event to listen for\n        @param {Function} callback function to be called when the event is triggered.\n      */\n      'on': function(eventName, callback) {\n        if (typeof callback !== 'function') {\n          throw new TypeError('Callback must be a function');\n        }\n\n        var allCallbacks = lib$rsvp$events$$callbacksFor(this), callbacks;\n\n        callbacks = allCallbacks[eventName];\n\n        if (!callbacks) {\n          callbacks = allCallbacks[eventName] = [];\n        }\n\n        if (lib$rsvp$events$$indexOf(callbacks, callback) === -1) {\n          callbacks.push(callback);\n        }\n      },\n\n      /**\n        You can use `off` to stop firing a particular callback for an event:\n\n        ```javascript\n        function doStuff() { // do stuff! }\n        object.on('stuff', doStuff);\n\n        object.trigger('stuff'); // doStuff will be called\n\n        // Unregister ONLY the doStuff callback\n        object.off('stuff', doStuff);\n        object.trigger('stuff'); // doStuff will NOT be called\n        ```\n\n        If you don't pass a `callback` argument to `off`, ALL callbacks for the\n        event will not be executed when the event fires. For example:\n\n        ```javascript\n        var callback1 = function(){};\n        var callback2 = function(){};\n\n        object.on('stuff', callback1);\n        object.on('stuff', callback2);\n\n        object.trigger('stuff'); // callback1 and callback2 will be executed.\n\n        object.off('stuff');\n        object.trigger('stuff'); // callback1 and callback2 will not be executed!\n        ```\n\n        @method off\n        @for RSVP.EventTarget\n        @private\n        @param {String} eventName event to stop listening to\n        @param {Function} callback optional argument. If given, only the function\n        given will be removed from the event's callback queue. If no `callback`\n        argument is given, all callbacks will be removed from the event's callback\n        queue.\n      */\n      'off': function(eventName, callback) {\n        var allCallbacks = lib$rsvp$events$$callbacksFor(this), callbacks, index;\n\n        if (!callback) {\n          allCallbacks[eventName] = [];\n          return;\n        }\n\n        callbacks = allCallbacks[eventName];\n\n        index = lib$rsvp$events$$indexOf(callbacks, callback);\n\n        if (index !== -1) { callbacks.splice(index, 1); }\n      },\n\n      /**\n        Use `trigger` to fire custom events. For example:\n\n        ```javascript\n        object.on('foo', function(){\n          console.log('foo event happened!');\n        });\n        object.trigger('foo');\n        // 'foo event happened!' logged to the console\n        ```\n\n        You can also pass a value as a second argument to `trigger` that will be\n        passed as an argument to all event listeners for the event:\n\n        ```javascript\n        object.on('foo', function(value){\n          console.log(value.name);\n        });\n\n        object.trigger('foo', { name: 'bar' });\n        // 'bar' logged to the console\n        ```\n\n        @method trigger\n        @for RSVP.EventTarget\n        @private\n        @param {String} eventName name of the event to be triggered\n        @param {*} options optional value to be passed to any event handlers for\n        the given `eventName`\n      */\n      'trigger': function(eventName, options, label) {\n        var allCallbacks = lib$rsvp$events$$callbacksFor(this), callbacks, callback;\n\n        if (callbacks = allCallbacks[eventName]) {\n          // Don't cache the callbacks.length since it may grow\n          for (var i=0; i<callbacks.length; i++) {\n            callback = callbacks[i];\n\n            callback(options, label);\n          }\n        }\n      }\n    };\n\n    var lib$rsvp$config$$config = {\n      instrument: false\n    };\n\n    lib$rsvp$events$$default['mixin'](lib$rsvp$config$$config);\n\n    function lib$rsvp$config$$configure(name, value) {\n      if (name === 'onerror') {\n        // handle for legacy users that expect the actual\n        // error to be passed to their function added via\n        // `RSVP.configure('onerror', someFunctionHere);`\n        lib$rsvp$config$$config['on']('error', value);\n        return;\n      }\n\n      if (arguments.length === 2) {\n        lib$rsvp$config$$config[name] = value;\n      } else {\n        return lib$rsvp$config$$config[name];\n      }\n    }\n\n    var lib$rsvp$instrument$$queue = [];\n\n    function lib$rsvp$instrument$$scheduleFlush() {\n      setTimeout(function() {\n        var entry;\n        for (var i = 0; i < lib$rsvp$instrument$$queue.length; i++) {\n          entry = lib$rsvp$instrument$$queue[i];\n\n          var payload = entry.payload;\n\n          payload.guid = payload.key + payload.id;\n          payload.childGuid = payload.key + payload.childId;\n          if (payload.error) {\n            payload.stack = payload.error.stack;\n          }\n\n          lib$rsvp$config$$config['trigger'](entry.name, entry.payload);\n        }\n        lib$rsvp$instrument$$queue.length = 0;\n      }, 50);\n    }\n\n    function lib$rsvp$instrument$$instrument(eventName, promise, child) {\n      if (1 === lib$rsvp$instrument$$queue.push({\n        name: eventName,\n        payload: {\n          key: promise._guidKey,\n          id:  promise._id,\n          eventName: eventName,\n          detail: promise._result,\n          childId: child && child._id,\n          label: promise._label,\n          timeStamp: lib$rsvp$utils$$now(),\n          error: lib$rsvp$config$$config[\"instrument-with-stack\"] ? new Error(promise._label) : null\n        }})) {\n          lib$rsvp$instrument$$scheduleFlush();\n        }\n      }\n    var lib$rsvp$instrument$$default = lib$rsvp$instrument$$instrument;\n    function lib$rsvp$then$$then(onFulfillment, onRejection, label) {\n      var parent = this;\n      var state = parent._state;\n\n      if (state === lib$rsvp$$internal$$FULFILLED && !onFulfillment || state === lib$rsvp$$internal$$REJECTED && !onRejection) {\n        lib$rsvp$config$$config.instrument && lib$rsvp$instrument$$default('chained', parent, parent);\n        return parent;\n      }\n\n      parent._onError = null;\n\n      var child = new parent.constructor(lib$rsvp$$internal$$noop, label);\n      var result = parent._result;\n\n      lib$rsvp$config$$config.instrument && lib$rsvp$instrument$$default('chained', parent, child);\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$rsvp$config$$config.async(function(){\n          lib$rsvp$$internal$$invokeCallback(state, child, callback, result);\n        });\n      } else {\n        lib$rsvp$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    }\n    var lib$rsvp$then$$default = lib$rsvp$then$$then;\n    function lib$rsvp$promise$resolve$$resolve(object, label) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$rsvp$$internal$$noop, label);\n      lib$rsvp$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$rsvp$promise$resolve$$default = lib$rsvp$promise$resolve$$resolve;\n    function lib$rsvp$enumerator$$makeSettledResult(state, position, value) {\n      if (state === lib$rsvp$$internal$$FULFILLED) {\n        return {\n          state: 'fulfilled',\n          value: value\n        };\n      } else {\n         return {\n          state: 'rejected',\n          reason: value\n        };\n      }\n    }\n\n    function lib$rsvp$enumerator$$Enumerator(Constructor, input, abortOnReject, label) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$rsvp$$internal$$noop, label);\n      this._abortOnReject = abortOnReject;\n\n      if (this._validateInput(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._init();\n\n        if (this.length === 0) {\n          lib$rsvp$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$rsvp$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$rsvp$$internal$$reject(this.promise, this._validationError());\n      }\n    }\n\n    var lib$rsvp$enumerator$$default = lib$rsvp$enumerator$$Enumerator;\n\n    lib$rsvp$enumerator$$Enumerator.prototype._validateInput = function(input) {\n      return lib$rsvp$utils$$isArray(input);\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._init = function() {\n      this._result = new Array(this.length);\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length     = this.length;\n      var promise    = this.promise;\n      var input      = this._input;\n\n      for (var i = 0; promise._state === lib$rsvp$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._settleMaybeThenable = function(entry, i) {\n      var c = this._instanceConstructor;\n      var resolve = c.resolve;\n\n      if (resolve === lib$rsvp$promise$resolve$$default) {\n        var then = lib$rsvp$$internal$$getThen(entry);\n\n        if (then === lib$rsvp$then$$default &&\n            entry._state !== lib$rsvp$$internal$$PENDING) {\n          entry._onError = null;\n          this._settledAt(entry._state, i, entry._result);\n        } else if (typeof then !== 'function') {\n          this._remaining--;\n          this._result[i] = this._makeResult(lib$rsvp$$internal$$FULFILLED, i, entry);\n        } else if (c === lib$rsvp$promise$$default) {\n          var promise = new c(lib$rsvp$$internal$$noop);\n          lib$rsvp$$internal$$handleMaybeThenable(promise, entry, then);\n          this._willSettleAt(promise, i);\n        } else {\n          this._willSettleAt(new c(function(resolve) { resolve(entry); }), i);\n        }\n      } else {\n        this._willSettleAt(resolve(entry), i);\n      }\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      if (lib$rsvp$utils$$isMaybeThenable(entry)) {\n        this._settleMaybeThenable(entry, i);\n      } else {\n        this._remaining--;\n        this._result[i] = this._makeResult(lib$rsvp$$internal$$FULFILLED, i, entry);\n      }\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$rsvp$$internal$$PENDING) {\n        this._remaining--;\n\n        if (this._abortOnReject && state === lib$rsvp$$internal$$REJECTED) {\n          lib$rsvp$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = this._makeResult(state, i, value);\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$rsvp$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._makeResult = function(state, i, value) {\n      return value;\n    };\n\n    lib$rsvp$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$rsvp$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$rsvp$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$rsvp$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$rsvp$promise$all$$all(entries, label) {\n      return new lib$rsvp$enumerator$$default(this, entries, true /* abort on reject */, label).promise;\n    }\n    var lib$rsvp$promise$all$$default = lib$rsvp$promise$all$$all;\n    function lib$rsvp$promise$race$$race(entries, label) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$rsvp$$internal$$noop, label);\n\n      if (!lib$rsvp$utils$$isArray(entries)) {\n        lib$rsvp$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$rsvp$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$rsvp$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$rsvp$$internal$$PENDING && i < length; i++) {\n        lib$rsvp$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$rsvp$promise$race$$default = lib$rsvp$promise$race$$race;\n    function lib$rsvp$promise$reject$$reject(reason, label) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$rsvp$$internal$$noop, label);\n      lib$rsvp$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$rsvp$promise$reject$$default = lib$rsvp$promise$reject$$reject;\n\n    var lib$rsvp$promise$$guidKey = 'rsvp_' + lib$rsvp$utils$$now() + '-';\n    var lib$rsvp$promise$$counter = 0;\n\n    function lib$rsvp$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$rsvp$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    function lib$rsvp$promise$$Promise(resolver, label) {\n      this._id = lib$rsvp$promise$$counter++;\n      this._label = label;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      lib$rsvp$config$$config.instrument && lib$rsvp$instrument$$default('created', this);\n\n      if (lib$rsvp$$internal$$noop !== resolver) {\n        typeof resolver !== 'function' && lib$rsvp$promise$$needsResolver();\n        this instanceof lib$rsvp$promise$$Promise ? lib$rsvp$$internal$$initializePromise(this, resolver) : lib$rsvp$promise$$needsNew();\n      }\n    }\n\n    var lib$rsvp$promise$$default = lib$rsvp$promise$$Promise;\n\n    // deprecated\n    lib$rsvp$promise$$Promise.cast = lib$rsvp$promise$resolve$$default;\n    lib$rsvp$promise$$Promise.all = lib$rsvp$promise$all$$default;\n    lib$rsvp$promise$$Promise.race = lib$rsvp$promise$race$$default;\n    lib$rsvp$promise$$Promise.resolve = lib$rsvp$promise$resolve$$default;\n    lib$rsvp$promise$$Promise.reject = lib$rsvp$promise$reject$$default;\n\n    lib$rsvp$promise$$Promise.prototype = {\n      constructor: lib$rsvp$promise$$Promise,\n\n      _guidKey: lib$rsvp$promise$$guidKey,\n\n      _onError: function (reason) {\n        var promise = this;\n        lib$rsvp$config$$config.after(function() {\n          if (promise._onError) {\n            lib$rsvp$config$$config['trigger']('error', reason, promise._label);\n          }\n        });\n      },\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfillment\n      @param {Function} onRejection\n      @param {String} label optional string for labeling the promise.\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: lib$rsvp$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      @param {String} label optional string for labeling the promise.\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection, label) {\n        return this.then(undefined, onRejection, label);\n      },\n\n    /**\n      `finally` will be invoked regardless of the promise's fate just as native\n      try/catch/finally behaves\n\n      Synchronous example:\n\n      ```js\n      findAuthor() {\n        if (Math.random() > 0.5) {\n          throw new Error();\n        }\n        return new Author();\n      }\n\n      try {\n        return findAuthor(); // succeed or fail\n      } catch(error) {\n        return findOtherAuther();\n      } finally {\n        // always runs\n        // doesn't affect the return value\n      }\n      ```\n\n      Asynchronous example:\n\n      ```js\n      findAuthor().catch(function(reason){\n        return findOtherAuther();\n      }).finally(function(){\n        // author was either found, or not\n      });\n      ```\n\n      @method finally\n      @param {Function} callback\n      @param {String} label optional string for labeling the promise.\n      Useful for tooling.\n      @return {Promise}\n    */\n      'finally': function(callback, label) {\n        var promise = this;\n        var constructor = promise.constructor;\n\n        return promise.then(function(value) {\n          return constructor.resolve(callback()).then(function() {\n            return value;\n          });\n        }, function(reason) {\n          return constructor.resolve(callback()).then(function() {\n            return constructor.reject(reason);\n          });\n        }, label);\n      }\n    };\n    function  lib$rsvp$$internal$$withOwnPromise() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$rsvp$$internal$$noop() {}\n\n    var lib$rsvp$$internal$$PENDING   = void 0;\n    var lib$rsvp$$internal$$FULFILLED = 1;\n    var lib$rsvp$$internal$$REJECTED  = 2;\n\n    var lib$rsvp$$internal$$GET_THEN_ERROR = new lib$rsvp$$internal$$ErrorObject();\n\n    function lib$rsvp$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$rsvp$$internal$$GET_THEN_ERROR.error = error;\n        return lib$rsvp$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$rsvp$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$rsvp$$internal$$handleForeignThenable(promise, thenable, then) {\n      lib$rsvp$config$$config.async(function(promise) {\n        var sealed = false;\n        var error = lib$rsvp$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$rsvp$$internal$$resolve(promise, value, undefined);\n          } else {\n            lib$rsvp$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$rsvp$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$rsvp$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$rsvp$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$rsvp$$internal$$FULFILLED) {\n        lib$rsvp$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$rsvp$$internal$$REJECTED) {\n        thenable._onError = null;\n        lib$rsvp$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$rsvp$$internal$$subscribe(thenable, undefined, function(value) {\n          if (thenable !== value) {\n            lib$rsvp$$internal$$resolve(promise, value, undefined);\n          } else {\n            lib$rsvp$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          lib$rsvp$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$rsvp$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n      if (maybeThenable.constructor === promise.constructor &&\n          then === lib$rsvp$then$$default &&\n          constructor.resolve === lib$rsvp$promise$resolve$$default) {\n        lib$rsvp$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        if (then === lib$rsvp$$internal$$GET_THEN_ERROR) {\n          lib$rsvp$$internal$$reject(promise, lib$rsvp$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$rsvp$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$rsvp$utils$$isFunction(then)) {\n          lib$rsvp$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$rsvp$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$rsvp$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$rsvp$$internal$$fulfill(promise, value);\n      } else if (lib$rsvp$utils$$objectOrFunction(value)) {\n        lib$rsvp$$internal$$handleMaybeThenable(promise, value, lib$rsvp$$internal$$getThen(value));\n      } else {\n        lib$rsvp$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$rsvp$$internal$$publishRejection(promise) {\n      if (promise._onError) {\n        promise._onError(promise._result);\n      }\n\n      lib$rsvp$$internal$$publish(promise);\n    }\n\n    function lib$rsvp$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$rsvp$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$rsvp$$internal$$FULFILLED;\n\n      if (promise._subscribers.length === 0) {\n        if (lib$rsvp$config$$config.instrument) {\n          lib$rsvp$instrument$$default('fulfilled', promise);\n        }\n      } else {\n        lib$rsvp$config$$config.async(lib$rsvp$$internal$$publish, promise);\n      }\n    }\n\n    function lib$rsvp$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$rsvp$$internal$$PENDING) { return; }\n      promise._state = lib$rsvp$$internal$$REJECTED;\n      promise._result = reason;\n      lib$rsvp$config$$config.async(lib$rsvp$$internal$$publishRejection, promise);\n    }\n\n    function lib$rsvp$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onError = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$rsvp$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$rsvp$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$rsvp$config$$config.async(lib$rsvp$$internal$$publish, parent);\n      }\n    }\n\n    function lib$rsvp$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (lib$rsvp$config$$config.instrument) {\n        lib$rsvp$instrument$$default(settled === lib$rsvp$$internal$$FULFILLED ? 'fulfilled' : 'rejected', promise);\n      }\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$rsvp$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$rsvp$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$rsvp$$internal$$TRY_CATCH_ERROR = new lib$rsvp$$internal$$ErrorObject();\n\n    function lib$rsvp$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$rsvp$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$rsvp$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$rsvp$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$rsvp$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$rsvp$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$rsvp$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$rsvp$$internal$$reject(promise, lib$rsvp$$internal$$withOwnPromise());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$rsvp$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$rsvp$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$rsvp$$internal$$reject(promise, error);\n      } else if (settled === lib$rsvp$$internal$$FULFILLED) {\n        lib$rsvp$$internal$$fulfill(promise, value);\n      } else if (settled === lib$rsvp$$internal$$REJECTED) {\n        lib$rsvp$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$rsvp$$internal$$initializePromise(promise, resolver) {\n      var resolved = false;\n      try {\n        resolver(function resolvePromise(value){\n          if (resolved) { return; }\n          resolved = true;\n          lib$rsvp$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          if (resolved) { return; }\n          resolved = true;\n          lib$rsvp$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$rsvp$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$rsvp$all$settled$$AllSettled(Constructor, entries, label) {\n      this._superConstructor(Constructor, entries, false /* don't abort on reject */, label);\n    }\n\n    lib$rsvp$all$settled$$AllSettled.prototype = lib$rsvp$utils$$o_create(lib$rsvp$enumerator$$default.prototype);\n    lib$rsvp$all$settled$$AllSettled.prototype._superConstructor = lib$rsvp$enumerator$$default;\n    lib$rsvp$all$settled$$AllSettled.prototype._makeResult = lib$rsvp$enumerator$$makeSettledResult;\n    lib$rsvp$all$settled$$AllSettled.prototype._validationError = function() {\n      return new Error('allSettled must be called with an array');\n    };\n\n    function lib$rsvp$all$settled$$allSettled(entries, label) {\n      return new lib$rsvp$all$settled$$AllSettled(lib$rsvp$promise$$default, entries, label).promise;\n    }\n    var lib$rsvp$all$settled$$default = lib$rsvp$all$settled$$allSettled;\n    function lib$rsvp$all$$all(array, label) {\n      return lib$rsvp$promise$$default.all(array, label);\n    }\n    var lib$rsvp$all$$default = lib$rsvp$all$$all;\n    var lib$rsvp$asap$$len = 0;\n    var lib$rsvp$asap$$toString = {}.toString;\n    var lib$rsvp$asap$$vertxNext;\n    function lib$rsvp$asap$$asap(callback, arg) {\n      lib$rsvp$asap$$queue[lib$rsvp$asap$$len] = callback;\n      lib$rsvp$asap$$queue[lib$rsvp$asap$$len + 1] = arg;\n      lib$rsvp$asap$$len += 2;\n      if (lib$rsvp$asap$$len === 2) {\n        // If len is 1, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        lib$rsvp$asap$$scheduleFlush();\n      }\n    }\n\n    var lib$rsvp$asap$$default = lib$rsvp$asap$$asap;\n\n    var lib$rsvp$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$rsvp$asap$$browserGlobal = lib$rsvp$asap$$browserWindow || {};\n    var lib$rsvp$asap$$BrowserMutationObserver = lib$rsvp$asap$$browserGlobal.MutationObserver || lib$rsvp$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$rsvp$asap$$isNode = typeof self === 'undefined' &&\n      typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$rsvp$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$rsvp$asap$$useNextTick() {\n      var nextTick = process.nextTick;\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // setImmediate should be used instead instead\n      var version = process.versions.node.match(/^(?:(\\d+)\\.)?(?:(\\d+)\\.)?(\\*|\\d+)$/);\n      if (Array.isArray(version) && version[1] === '0' && version[2] === '10') {\n        nextTick = setImmediate;\n      }\n      return function() {\n        nextTick(lib$rsvp$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$rsvp$asap$$useVertxTimer() {\n      return function() {\n        lib$rsvp$asap$$vertxNext(lib$rsvp$asap$$flush);\n      };\n    }\n\n    function lib$rsvp$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$rsvp$asap$$BrowserMutationObserver(lib$rsvp$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$rsvp$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$rsvp$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$rsvp$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$rsvp$asap$$flush, 1);\n      };\n    }\n\n    var lib$rsvp$asap$$queue = new Array(1000);\n    function lib$rsvp$asap$$flush() {\n      for (var i = 0; i < lib$rsvp$asap$$len; i+=2) {\n        var callback = lib$rsvp$asap$$queue[i];\n        var arg = lib$rsvp$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$rsvp$asap$$queue[i] = undefined;\n        lib$rsvp$asap$$queue[i+1] = undefined;\n      }\n\n      lib$rsvp$asap$$len = 0;\n    }\n\n    function lib$rsvp$asap$$attemptVertex() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$rsvp$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$rsvp$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$rsvp$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$rsvp$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$rsvp$asap$$isNode) {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$useNextTick();\n    } else if (lib$rsvp$asap$$BrowserMutationObserver) {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$useMutationObserver();\n    } else if (lib$rsvp$asap$$isWorker) {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$useMessageChannel();\n    } else if (lib$rsvp$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$attemptVertex();\n    } else {\n      lib$rsvp$asap$$scheduleFlush = lib$rsvp$asap$$useSetTimeout();\n    }\n    function lib$rsvp$defer$$defer(label) {\n      var deferred = {};\n\n      deferred['promise'] = new lib$rsvp$promise$$default(function(resolve, reject) {\n        deferred['resolve'] = resolve;\n        deferred['reject'] = reject;\n      }, label);\n\n      return deferred;\n    }\n    var lib$rsvp$defer$$default = lib$rsvp$defer$$defer;\n    function lib$rsvp$filter$$filter(promises, filterFn, label) {\n      return lib$rsvp$promise$$default.all(promises, label).then(function(values) {\n        if (!lib$rsvp$utils$$isFunction(filterFn)) {\n          throw new TypeError(\"You must pass a function as filter's second argument.\");\n        }\n\n        var length = values.length;\n        var filtered = new Array(length);\n\n        for (var i = 0; i < length; i++) {\n          filtered[i] = filterFn(values[i]);\n        }\n\n        return lib$rsvp$promise$$default.all(filtered, label).then(function(filtered) {\n          var results = new Array(length);\n          var newLength = 0;\n\n          for (var i = 0; i < length; i++) {\n            if (filtered[i]) {\n              results[newLength] = values[i];\n              newLength++;\n            }\n          }\n\n          results.length = newLength;\n\n          return results;\n        });\n      });\n    }\n    var lib$rsvp$filter$$default = lib$rsvp$filter$$filter;\n\n    function lib$rsvp$promise$hash$$PromiseHash(Constructor, object, label) {\n      this._superConstructor(Constructor, object, true, label);\n    }\n\n    var lib$rsvp$promise$hash$$default = lib$rsvp$promise$hash$$PromiseHash;\n\n    lib$rsvp$promise$hash$$PromiseHash.prototype = lib$rsvp$utils$$o_create(lib$rsvp$enumerator$$default.prototype);\n    lib$rsvp$promise$hash$$PromiseHash.prototype._superConstructor = lib$rsvp$enumerator$$default;\n    lib$rsvp$promise$hash$$PromiseHash.prototype._init = function() {\n      this._result = {};\n    };\n\n    lib$rsvp$promise$hash$$PromiseHash.prototype._validateInput = function(input) {\n      return input && typeof input === 'object';\n    };\n\n    lib$rsvp$promise$hash$$PromiseHash.prototype._validationError = function() {\n      return new Error('Promise.hash must be called with an object');\n    };\n\n    lib$rsvp$promise$hash$$PromiseHash.prototype._enumerate = function() {\n      var enumerator = this;\n      var promise    = enumerator.promise;\n      var input      = enumerator._input;\n      var results    = [];\n\n      for (var key in input) {\n        if (promise._state === lib$rsvp$$internal$$PENDING && Object.prototype.hasOwnProperty.call(input, key)) {\n          results.push({\n            position: key,\n            entry: input[key]\n          });\n        }\n      }\n\n      var length = results.length;\n      enumerator._remaining = length;\n      var result;\n\n      for (var i = 0; promise._state === lib$rsvp$$internal$$PENDING && i < length; i++) {\n        result = results[i];\n        enumerator._eachEntry(result.entry, result.position);\n      }\n    };\n\n    function lib$rsvp$hash$settled$$HashSettled(Constructor, object, label) {\n      this._superConstructor(Constructor, object, false, label);\n    }\n\n    lib$rsvp$hash$settled$$HashSettled.prototype = lib$rsvp$utils$$o_create(lib$rsvp$promise$hash$$default.prototype);\n    lib$rsvp$hash$settled$$HashSettled.prototype._superConstructor = lib$rsvp$enumerator$$default;\n    lib$rsvp$hash$settled$$HashSettled.prototype._makeResult = lib$rsvp$enumerator$$makeSettledResult;\n\n    lib$rsvp$hash$settled$$HashSettled.prototype._validationError = function() {\n      return new Error('hashSettled must be called with an object');\n    };\n\n    function lib$rsvp$hash$settled$$hashSettled(object, label) {\n      return new lib$rsvp$hash$settled$$HashSettled(lib$rsvp$promise$$default, object, label).promise;\n    }\n    var lib$rsvp$hash$settled$$default = lib$rsvp$hash$settled$$hashSettled;\n    function lib$rsvp$hash$$hash(object, label) {\n      return new lib$rsvp$promise$hash$$default(lib$rsvp$promise$$default, object, label).promise;\n    }\n    var lib$rsvp$hash$$default = lib$rsvp$hash$$hash;\n    function lib$rsvp$map$$map(promises, mapFn, label) {\n      return lib$rsvp$promise$$default.all(promises, label).then(function(values) {\n        if (!lib$rsvp$utils$$isFunction(mapFn)) {\n          throw new TypeError(\"You must pass a function as map's second argument.\");\n        }\n\n        var length = values.length;\n        var results = new Array(length);\n\n        for (var i = 0; i < length; i++) {\n          results[i] = mapFn(values[i]);\n        }\n\n        return lib$rsvp$promise$$default.all(results, label);\n      });\n    }\n    var lib$rsvp$map$$default = lib$rsvp$map$$map;\n\n    function lib$rsvp$node$$Result() {\n      this.value = undefined;\n    }\n\n    var lib$rsvp$node$$ERROR = new lib$rsvp$node$$Result();\n    var lib$rsvp$node$$GET_THEN_ERROR = new lib$rsvp$node$$Result();\n\n    function lib$rsvp$node$$getThen(obj) {\n      try {\n       return obj.then;\n      } catch(error) {\n        lib$rsvp$node$$ERROR.value= error;\n        return lib$rsvp$node$$ERROR;\n      }\n    }\n\n\n    function lib$rsvp$node$$tryApply(f, s, a) {\n      try {\n        f.apply(s, a);\n      } catch(error) {\n        lib$rsvp$node$$ERROR.value = error;\n        return lib$rsvp$node$$ERROR;\n      }\n    }\n\n    function lib$rsvp$node$$makeObject(_, argumentNames) {\n      var obj = {};\n      var name;\n      var i;\n      var length = _.length;\n      var args = new Array(length);\n\n      for (var x = 0; x < length; x++) {\n        args[x] = _[x];\n      }\n\n      for (i = 0; i < argumentNames.length; i++) {\n        name = argumentNames[i];\n        obj[name] = args[i + 1];\n      }\n\n      return obj;\n    }\n\n    function lib$rsvp$node$$arrayResult(_) {\n      var length = _.length;\n      var args = new Array(length - 1);\n\n      for (var i = 1; i < length; i++) {\n        args[i - 1] = _[i];\n      }\n\n      return args;\n    }\n\n    function lib$rsvp$node$$wrapThenable(then, promise) {\n      return {\n        then: function(onFulFillment, onRejection) {\n          return then.call(promise, onFulFillment, onRejection);\n        }\n      };\n    }\n\n    function lib$rsvp$node$$denodeify(nodeFunc, options) {\n      var fn = function() {\n        var self = this;\n        var l = arguments.length;\n        var args = new Array(l + 1);\n        var arg;\n        var promiseInput = false;\n\n        for (var i = 0; i < l; ++i) {\n          arg = arguments[i];\n\n          if (!promiseInput) {\n            // TODO: clean this up\n            promiseInput = lib$rsvp$node$$needsPromiseInput(arg);\n            if (promiseInput === lib$rsvp$node$$GET_THEN_ERROR) {\n              var p = new lib$rsvp$promise$$default(lib$rsvp$$internal$$noop);\n              lib$rsvp$$internal$$reject(p, lib$rsvp$node$$GET_THEN_ERROR.value);\n              return p;\n            } else if (promiseInput && promiseInput !== true) {\n              arg = lib$rsvp$node$$wrapThenable(promiseInput, arg);\n            }\n          }\n          args[i] = arg;\n        }\n\n        var promise = new lib$rsvp$promise$$default(lib$rsvp$$internal$$noop);\n\n        args[l] = function(err, val) {\n          if (err)\n            lib$rsvp$$internal$$reject(promise, err);\n          else if (options === undefined)\n            lib$rsvp$$internal$$resolve(promise, val);\n          else if (options === true)\n            lib$rsvp$$internal$$resolve(promise, lib$rsvp$node$$arrayResult(arguments));\n          else if (lib$rsvp$utils$$isArray(options))\n            lib$rsvp$$internal$$resolve(promise, lib$rsvp$node$$makeObject(arguments, options));\n          else\n            lib$rsvp$$internal$$resolve(promise, val);\n        };\n\n        if (promiseInput) {\n          return lib$rsvp$node$$handlePromiseInput(promise, args, nodeFunc, self);\n        } else {\n          return lib$rsvp$node$$handleValueInput(promise, args, nodeFunc, self);\n        }\n      };\n\n      fn.__proto__ = nodeFunc;\n\n      return fn;\n    }\n\n    var lib$rsvp$node$$default = lib$rsvp$node$$denodeify;\n\n    function lib$rsvp$node$$handleValueInput(promise, args, nodeFunc, self) {\n      var result = lib$rsvp$node$$tryApply(nodeFunc, self, args);\n      if (result === lib$rsvp$node$$ERROR) {\n        lib$rsvp$$internal$$reject(promise, result.value);\n      }\n      return promise;\n    }\n\n    function lib$rsvp$node$$handlePromiseInput(promise, args, nodeFunc, self){\n      return lib$rsvp$promise$$default.all(args).then(function(args){\n        var result = lib$rsvp$node$$tryApply(nodeFunc, self, args);\n        if (result === lib$rsvp$node$$ERROR) {\n          lib$rsvp$$internal$$reject(promise, result.value);\n        }\n        return promise;\n      });\n    }\n\n    function lib$rsvp$node$$needsPromiseInput(arg) {\n      if (arg && typeof arg === 'object') {\n        if (arg.constructor === lib$rsvp$promise$$default) {\n          return true;\n        } else {\n          return lib$rsvp$node$$getThen(arg);\n        }\n      } else {\n        return false;\n      }\n    }\n    var lib$rsvp$platform$$platform;\n\n    /* global self */\n    if (typeof self === 'object') {\n      lib$rsvp$platform$$platform = self;\n\n    /* global global */\n    } else if (typeof global === 'object') {\n      lib$rsvp$platform$$platform = global;\n    } else {\n      throw new Error('no global: `self` or `global` found');\n    }\n\n    var lib$rsvp$platform$$default = lib$rsvp$platform$$platform;\n    function lib$rsvp$race$$race(array, label) {\n      return lib$rsvp$promise$$default.race(array, label);\n    }\n    var lib$rsvp$race$$default = lib$rsvp$race$$race;\n    function lib$rsvp$reject$$reject(reason, label) {\n      return lib$rsvp$promise$$default.reject(reason, label);\n    }\n    var lib$rsvp$reject$$default = lib$rsvp$reject$$reject;\n    function lib$rsvp$resolve$$resolve(value, label) {\n      return lib$rsvp$promise$$default.resolve(value, label);\n    }\n    var lib$rsvp$resolve$$default = lib$rsvp$resolve$$resolve;\n    function lib$rsvp$rethrow$$rethrow(reason) {\n      setTimeout(function() {\n        throw reason;\n      });\n      throw reason;\n    }\n    var lib$rsvp$rethrow$$default = lib$rsvp$rethrow$$rethrow;\n\n    // defaults\n    lib$rsvp$config$$config.async = lib$rsvp$asap$$default;\n    lib$rsvp$config$$config.after = function(cb) {\n      setTimeout(cb, 0);\n    };\n    var lib$rsvp$$cast = lib$rsvp$resolve$$default;\n    function lib$rsvp$$async(callback, arg) {\n      lib$rsvp$config$$config.async(callback, arg);\n    }\n\n    function lib$rsvp$$on() {\n      lib$rsvp$config$$config['on'].apply(lib$rsvp$config$$config, arguments);\n    }\n\n    function lib$rsvp$$off() {\n      lib$rsvp$config$$config['off'].apply(lib$rsvp$config$$config, arguments);\n    }\n\n    // Set up instrumentation through `window.__PROMISE_INTRUMENTATION__`\n    if (typeof window !== 'undefined' && typeof window['__PROMISE_INSTRUMENTATION__'] === 'object') {\n      var lib$rsvp$$callbacks = window['__PROMISE_INSTRUMENTATION__'];\n      lib$rsvp$config$$configure('instrument', true);\n      for (var lib$rsvp$$eventName in lib$rsvp$$callbacks) {\n        if (lib$rsvp$$callbacks.hasOwnProperty(lib$rsvp$$eventName)) {\n          lib$rsvp$$on(lib$rsvp$$eventName, lib$rsvp$$callbacks[lib$rsvp$$eventName]);\n        }\n      }\n    }\n\n    var lib$rsvp$umd$$RSVP = {\n      'race': lib$rsvp$race$$default,\n      'Promise': lib$rsvp$promise$$default,\n      'allSettled': lib$rsvp$all$settled$$default,\n      'hash': lib$rsvp$hash$$default,\n      'hashSettled': lib$rsvp$hash$settled$$default,\n      'denodeify': lib$rsvp$node$$default,\n      'on': lib$rsvp$$on,\n      'off': lib$rsvp$$off,\n      'map': lib$rsvp$map$$default,\n      'filter': lib$rsvp$filter$$default,\n      'resolve': lib$rsvp$resolve$$default,\n      'reject': lib$rsvp$reject$$default,\n      'all': lib$rsvp$all$$default,\n      'rethrow': lib$rsvp$rethrow$$default,\n      'defer': lib$rsvp$defer$$default,\n      'EventTarget': lib$rsvp$events$$default,\n      'configure': lib$rsvp$config$$configure,\n      'async': lib$rsvp$$async\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$rsvp$umd$$RSVP; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$rsvp$umd$$RSVP;\n    } else if (typeof lib$rsvp$platform$$default !== 'undefined') {\n      lib$rsvp$platform$$default['RSVP'] = lib$rsvp$umd$$RSVP;\n    }\n}).call(this);\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/rsvp/dist/rsvp.js\n ** module id = 103\n ** module chunks = 0 1\n **/","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/process/browser.js\n ** module id = 104\n ** module chunks = 0 1\n **/","var nextTick = require('process/browser.js').nextTick;\nvar apply = Function.prototype.apply;\nvar slice = Array.prototype.slice;\nvar immediateIds = {};\nvar nextImmediateId = 0;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) { timeout.close(); };\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// That's not how node.js implements it but the exposed api is the same.\nexports.setImmediate = typeof setImmediate === \"function\" ? setImmediate : function(fn) {\n  var id = nextImmediateId++;\n  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n\n  immediateIds[id] = true;\n\n  nextTick(function onNextTick() {\n    if (immediateIds[id]) {\n      // fn.call() is faster so we optimize for the common use-case\n      // @see http://jsperf.com/call-apply-segu\n      if (args) {\n        fn.apply(null, args);\n      } else {\n        fn.call(null);\n      }\n      // Prevent ids from leaking\n      exports.clearImmediate(id);\n    }\n  });\n\n  return id;\n};\n\nexports.clearImmediate = typeof clearImmediate === \"function\" ? clearImmediate : function(id) {\n  delete immediateIds[id];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/timers-browserify/main.js\n ** module id = 105\n ** module chunks = 0 1\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 106\n ** module chunks = 0 1\n **/","/* (ignored) */\n\n\n/*****************\n ** WEBPACK FOOTER\n ** vertx (ignored)\n ** module id = 107\n ** module chunks = 0 1\n **/","module.exports = function() { throw new Error(\"define cannot be used indirect\"); };\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-define.js\n ** module id = 108\n ** module chunks = 0 1\n **/","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar repeat = function repeat(str, times) {\n  return new Array(times + 1).join(str);\n};\nvar pad = function pad(num, maxLength) {\n  return repeat(\"0\", maxLength - num.toString().length) + num;\n};\n\n// Use the new performance api to get better precision if available\nvar timer = typeof performance !== \"undefined\" && typeof performance.now === \"function\" ? performance : Date;\n\n/**\n * Creates logger with followed options\n *\n * @namespace\n * @property {object} options - options for logger\n * @property {string} options.level - console[level]\n * @property {object} options.logger - implementation of the `console` API.\n * @property {boolean} options.collapsed - is group collapsed?\n * @property {boolean} options.predicate - condition which resolves logger behavior\n * @property {bool} options.duration - print duration of each action?\n * @property {bool} options.timestamp - print timestamp with each action?\n * @property {function} options.transformer - transform state before print\n * @property {function} options.actionTransformer - transform action before print\n */\n\nfunction createLogger() {\n  var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  return function (_ref) {\n    var getState = _ref.getState;\n    return function (next) {\n      return function (action) {\n        var level = options.level;\n        var logger = options.logger;\n        var collapsed = options.collapsed;\n        var predicate = options.predicate;\n        var _options$duration = options.duration;\n        var duration = _options$duration === undefined ? false : _options$duration;\n        var _options$timestamp = options.timestamp;\n        var timestamp = _options$timestamp === undefined ? true : _options$timestamp;\n        var _options$transformer = options.transformer;\n        var transformer = _options$transformer === undefined ? function (state) {\n          return state;\n        } : _options$transformer;\n        var _options$actionTransformer = options.actionTransformer;\n        var actionTransformer = _options$actionTransformer === undefined ? function (actn) {\n          return actn;\n        } : _options$actionTransformer;\n\n        var console = logger || window.console;\n\n        // exit if console undefined\n        if (typeof console === \"undefined\") {\n          return next(action);\n        }\n\n        // exit early if predicate function returns false\n        if (typeof predicate === \"function\" && !predicate(getState, action)) {\n          return next(action);\n        }\n\n        var started = timer.now();\n        var prevState = transformer(getState());\n\n        var returnValue = next(action);\n        var took = timer.now() - started;\n\n        var nextState = transformer(getState());\n\n        // formatters\n        var time = new Date();\n        var isCollapsed = typeof collapsed === \"function\" ? collapsed(getState, action) : collapsed;\n\n        var formattedTime = timestamp ? \" @ \" + pad(time.getHours(), 2) + \":\" + pad(time.getMinutes(), 2) + \":\" + pad(time.getSeconds(), 2) + \".\" + pad(time.getMilliseconds(), 3) : \"\";\n        var formattedDuration = duration ? \" in \" + took.toFixed(2) + \" ms\" : \"\";\n        var formattedAction = actionTransformer(action);\n        var message = \"action \" + formattedAction.type + formattedTime + formattedDuration;\n        var startMessage = isCollapsed ? console.groupCollapsed : console.group;\n\n        // render\n        try {\n          startMessage.call(console, message);\n        } catch (e) {\n          console.log(message);\n        }\n\n        if (level) {\n          console[level](\"%c prev state\", \"color: #9E9E9E; font-weight: bold\", prevState);\n          console[level](\"%c action\", \"color: #03A9F4; font-weight: bold\", formattedAction);\n          console[level](\"%c next state\", \"color: #4CAF50; font-weight: bold\", nextState);\n        } else {\n          console.log(\"%c prev state\", \"color: #9E9E9E; font-weight: bold\", prevState);\n          console.log(\"%c action\", \"color: #03A9F4; font-weight: bold\", formattedAction);\n          console.log(\"%c next state\", \"color: #4CAF50; font-weight: bold\", nextState);\n        }\n\n        try {\n          console.groupEnd();\n        } catch (e) {\n          console.log(\"—— log end ——\");\n        }\n\n        return returnValue;\n      };\n    };\n  };\n}\n\nexports[\"default\"] = createLogger;\nmodule.exports = exports[\"default\"];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/redux-logger/lib/index.js\n ** module id = 109\n ** module chunks = 0 1\n **/","import isPromise from './isPromise';\nimport isPlainObject from './isPlainObject';\n\nconst PENDING = 'PENDING';\nconst FULFILLED = 'FULFILLED';\nconst REJECTED = 'REJECTED';\n\nfunction isAction(action) {\n  return isPlainObject(action) && typeof action.type !== 'undefined';\n}\n\nexport default function promiseMiddleware(store) {\n  const { dispatch } = store;\n\n  return next => action => {\n    if (typeof action === 'function') return action(store);\n\n    if (!isAction(action) || !isPromise(action.payload) || action.error) {\n      return next(action);\n    }\n\n    const { type, payload, meta } = action;\n\n    dispatch({\n      type: `${type}_${PENDING}`,\n      ...meta && { meta }\n    });\n\n    return payload.then(\n      result => dispatch({ type: `${type}_${FULFILLED}`, payload: result, ...meta && { meta } }),\n      error => dispatch({type: `${type}_${REJECTED}`, payload, error, ...meta && { meta }})\n    );\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/clientMiddleware.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"babel-runtime/core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/extends.js\n ** module id = 111\n ** module chunks = 0 1\n **/","export default function isPromise(value) {\n  if (value !== null && typeof value === 'object') {\n    return typeof value.then === 'function';\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/isPromise.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"babel-runtime/core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"babel-runtime/core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/typeof.js\n ** module id = 113\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/symbol/iterator.js\n ** module id = 114\n ** module chunks = 0 1\n **/","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks')('iterator');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/symbol/iterator.js\n ** module id = 115\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/symbol.js\n ** module id = 116\n ** module chunks = 0 1\n **/","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nmodule.exports = require('../../modules/_core').Symbol;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/symbol/index.js\n ** module id = 117\n ** module chunks = 0 1\n **/","'use strict';\n// ECMAScript 6 symbols shim\nvar global         = require('./_global')\n  , core           = require('./_core')\n  , has            = require('./_has')\n  , DESCRIPTORS    = require('./_descriptors')\n  , $export        = require('./_export')\n  , redefine       = require('./_redefine')\n  , META           = require('./_meta').KEY\n  , $fails         = require('./_fails')\n  , shared         = require('./_shared')\n  , setToStringTag = require('./_set-to-string-tag')\n  , uid            = require('./_uid')\n  , wks            = require('./_wks')\n  , keyOf          = require('./_keyof')\n  , enumKeys       = require('./_enum-keys')\n  , isArray        = require('./_is-array')\n  , anObject       = require('./_an-object')\n  , toIObject      = require('./_to-iobject')\n  , toPrimitive    = require('./_to-primitive')\n  , createDesc     = require('./_property-desc')\n  , _create        = require('./_object-create')\n  , gOPNExt        = require('./_object-gopn-ext')\n  , $GOPD          = require('./_object-gopd')\n  , $DP            = require('./_object-dp')\n  , gOPD           = $GOPD.f\n  , dP             = $DP.f\n  , gOPN           = gOPNExt.f\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , setter         = false\n  , PROTOTYPE      = 'prototype'\n  , HIDDEN         = wks('_hidden')\n  , TO_PRIMITIVE   = wks('toPrimitive')\n  , isEnum         = {}.propertyIsEnumerable\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , ObjectProto    = Object[PROTOTYPE]\n  , USE_NATIVE     = typeof $Symbol == 'function'\n  , QObject        = global.QObject;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(dP({}, 'a', {\n    get: function(){ return dP(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = gOPD(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  dP(it, key, D);\n  if(protoDesc && it !== ObjectProto)dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {\n    configurable: true,\n    set: function(value){\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    }\n  });\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function(it){\n  return typeof it == 'symbol';\n} : function(it){\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if(has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  var D = gOPD(it = toIObject(it), key = toPrimitive(key, true));\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META)result.push(key);\n  return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var names  = gOPN(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(has(AllSymbols, key = names[i++]))result.push(AllSymbols[key]);\n  return result;\n};\nvar $stringify = function stringify(it){\n  if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n  var args = [it]\n    , i    = 1\n    , replacer, $replacer;\n  while(arguments.length > i)args.push(arguments[i++]);\n  replacer = args[1];\n  if(typeof replacer == 'function')$replacer = replacer;\n  if($replacer || !isArray(replacer))replacer = function(key, value){\n    if($replacer)value = $replacer.call(this, key, value);\n    if(!isSymbol(value))return value;\n  };\n  args[1] = replacer;\n  return _stringify.apply($JSON, args);\n};\nvar BUGGY_JSON = $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n});\n\n// 19.4.1.1 Symbol([description])\nif(!USE_NATIVE){\n  $Symbol = function Symbol(){\n    if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor!');\n    return wrap(uid(arguments.length > 0 ? arguments[0] : undefined));\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString(){\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f   = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f  = $propertyIsEnumerable\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./_library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Symbol: $Symbol});\n\n// 19.4.2.2 Symbol.hasInstance\n// 19.4.2.3 Symbol.isConcatSpreadable\n// 19.4.2.4 Symbol.iterator\n// 19.4.2.6 Symbol.match\n// 19.4.2.8 Symbol.replace\n// 19.4.2.9 Symbol.search\n// 19.4.2.10 Symbol.species\n// 19.4.2.11 Symbol.split\n// 19.4.2.12 Symbol.toPrimitive\n// 19.4.2.13 Symbol.toStringTag\n// 19.4.2.14 Symbol.unscopables\nfor(var symbols = (\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), i = 0; symbols.length > i; ){\n  var key     = symbols[i++]\n    , Wrapper = core.Symbol\n    , sym     = wks(key);\n  if(!(key in Wrapper))dP(Wrapper, key, {value: USE_NATIVE ? sym : wrap(sym)});\n};\n\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nif(!QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild)setter = true;\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    if(isSymbol(key))return keyOf(SymbolRegistry, key);\n    throw TypeError(key + ' is not a symbol!');\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || BUGGY_JSON), 'JSON', {stringify: $stringify});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.symbol.js\n ** module id = 118\n ** module chunks = 0 1\n **/","var META     = require('./_uid')('meta')\n  , isObject = require('./_is-object')\n  , has      = require('./_has')\n  , setDesc  = require('./_object-dp').f\n  , id       = 0;\nvar isExtensible = Object.isExtensible || function(){\n  return true;\n};\nvar FREEZE = !require('./_fails')(function(){\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function(it){\n  setDesc(it, META, {value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  }});\n};\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add metadata\n    if(!create)return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function(it, create){\n  if(!has(it, META)){\n    // can't set metadata to uncaught frozen object\n    if(!isExtensible(it))return true;\n    // not necessary to add metadata\n    if(!create)return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function(it){\n  if(FREEZE && meta.NEED && isExtensible(it) && !has(it, META))setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY:      META,\n  NEED:     false,\n  fastKey:  fastKey,\n  getWeak:  getWeak,\n  onFreeze: onFreeze\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_meta.js\n ** module id = 119\n ** module chunks = 0 1\n **/","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_keyof.js\n ** module id = 120\n ** module chunks = 0 1\n **/","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys')\n  , gOPS    = require('./_object-gops')\n  , pIE     = require('./_object-pie');\nmodule.exports = function(it){\n  var result     = getKeys(it)\n    , getSymbols = gOPS.f;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = pIE.f\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))result.push(key);\n  } return result;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_enum-keys.js\n ** module id = 121\n ** module chunks = 0 1\n **/","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg){\n  return cof(arg) == 'Array';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_is-array.js\n ** module id = 122\n ** module chunks = 0 1\n **/","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject')\n  , gOPN      = require('./_object-gopn').f\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return gOPN(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it){\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gopn-ext.js\n ** module id = 123\n ** module chunks = 0 1\n **/","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\r\nvar $keys      = require('./_object-keys-internal')\r\n  , hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\r\n\r\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O){\r\n  return $keys(O, hiddenKeys);\r\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-gopn.js\n ** module id = 124\n ** module chunks = 0 1\n **/","var fnToString = (fn) => Function.prototype.toString.call(fn)\nvar objStringValue = fnToString(Object)\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nexport default function isPlainObject(obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false\n  }\n\n  var proto = typeof obj.constructor === 'function' ? Object.getPrototypeOf(obj) : Object.prototype\n\n  if (proto === null) {\n    return true\n  }\n\n  var constructor = proto.constructor\n\n  return typeof constructor === 'function'\n    && constructor instanceof constructor\n    && fnToString(constructor) === objStringValue\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/isPlainObject.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/get-prototype-of.js\n ** module id = 126\n ** module chunks = 0 1\n **/","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/get-prototype-of.js\n ** module id = 127\n ** module chunks = 0 1\n **/","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject        = require('./_to-object')\n  , $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function(){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.get-prototype-of.js\n ** module id = 128\n ** module chunks = 0 1\n **/","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export')\n  , core    = require('./_core')\n  , fails   = require('./_fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-sap.js\n ** module id = 129\n ** module chunks = 0 1\n **/","import cuid from 'cuid';\nimport { Map, List } from 'immutable';\nimport { curry, filter, findIndex, forEach, map, reduce, values } from 'ramda';\nimport createReducer from './utils/createReducer';\nimport { get, multi, set } from './sceneGraph';\nimport tweenFunctions from './utils/tweenFunctions';\nimport { LOAD_SCENE } from './actionTypes';\nimport { find as sceneFind } from './scene';\n\nconst SET_TIME='SET_TIME';\nconst SET_FRAME_TIME='SET_FRAME_TIME';\nconst START_PLAYING='START_PLAYING';\nconst STOP_PLAYING='STOP_PLAYING';\nconst UPDATE_TRACK='UPDATE_TRACK';\nconst UPDATE_ANIMATION='UPDATE_ANIMATION';\nconst REMOVE_ANIMATION='REMOVE_ANIMATION';\nconst QUEUE_ANIMATION='QUEUE_ANIMATION';\nconst QUEUE_TIMELINE_ANIMATION='QUEUE_TIMELINE_ANIMATION';\nconst ADD_CLIP='ADD_CLIP';\n\n\n/**\n * Animation module.\n *\n * This module controls the animation happening. The properties of an\n * animation are [defined here in the Animation type](global.html#Animation).\n *\n * Animations can be queued dynamically with [`queueAnimation`](module-animation.html#.queueAnimation)\n * Or, to play existing clips, queue a clip for playing with [`queueClip`](module-animation.html#.queueClip).\n *\n * @module animation\n * @public\n *\n */\n\nconst initialState = Map({\n  time: 0,\n  startTime: null,\n  playing: false,\n  autoplay: false,\n  frameTime: 0,\n  animations: List(),\n  clips: Map(),\n  timelineAnimationIndex: -1,\n});\n\n\nconst reducer = createReducer(initialState, {\n  [SET_TIME](state, { time, startTime }) {\n    return state.set('time', time).set('startTime', startTime);\n  },\n  [SET_FRAME_TIME](state, frameTime) {\n    const currentFrameTime = state.get('frameTime');\n    // Apply a smoothing moving average to frameTime\n    return state.set('frameTime', currentFrameTime + (frameTime - currentFrameTime) * 0.1);\n  },\n  [START_PLAYING](state, autoplay) {\n    return state.merge({playing: true, autoplay: !!autoplay});\n  },\n  [STOP_PLAYING](state) {\n    return state.set('playing', false);\n  },\n  [UPDATE_TRACK](state, {path, attrs}) {\n    return state.mergeIn(['animations',path[0],'tracks',path[1]], attrs);\n  },\n  [UPDATE_ANIMATION](state, {index, attrs}) {\n    return state.mergeIn(['animations',index], attrs);\n  },\n  [REMOVE_ANIMATION](state, idx) {\n    let newState = state;\n    if(idx === state.get('timelineAnimationIndex')) newState = newState.set('timelineAnimationIndex', -1);\n    return newState.deleteIn(['animations',idx]);\n  },\n  [QUEUE_ANIMATION](state, animation) {\n    return state.updateIn(['animations'], List(), list => list.push(animation));\n  },\n  [QUEUE_TIMELINE_ANIMATION](state, animation) {\n    return state.set('timelineAnimationIndex', state.get('animations').size-1)\n  },\n  [ADD_CLIP](state, { clip, id }) {\n    return state.setIn(['clips', id], Map(clip).set('id', id));\n  },\n  [LOAD_SCENE](state, { clips }) {\n    return clips ? state.mergeIn(['clips'], clips) : state;\n  },\n});\nexport function setFrameTime(frameTime) {\n  return { type: SET_FRAME_TIME, payload: frameTime };\n};\n\n/**\n * Return the current animation time.\n * @returns {Number}\n * @public\n *\n */\nexport function getTime(store) {\n  return store.getIn(['animation','time']);\n};\n\n/**\n * Set the current animation time.\n * @public\n * @param {Number} time in seconds\n */\nexport function setTime(time) {\n  return (store) => {\n    const startTime = new Date();\n    const delta = time - store.getIn(['animation','time']);\n\n    if (delta !== 0) {\n      if (store.getIn(['animation','animations']).size) {\n        store.getIn(['animation','animations']).forEach((anim, animIdx) => {\n          updateAnimation(store, delta, time, anim, animIdx);\n        });\n      } else {\n        if (store.getIn(['animation','autoplay'])) {\n          store.dispatch(stopPlaying());\n        }\n      }\n    }\n    store.dispatch({ type: SET_TIME, payload: { time, startTime } });\n\n    const nav = store.getTranslator().getNavigator();\n    if (nav) nav.updatePivot();\n  };\n};\n\nfunction getKeyframeValueFor(t, keyframes, tween, currentValue) {\n  const { vs , ts } = keyframes;\n\n  if (!ts.length) return currentValue;\n\n  const idx = findIndex((kt) => t <= kt, ts);\n  if (idx === -1) return vs[vs.length - 1];\n\n  // FIXME: Handle keyframe that hasn't started yet\n  if (idx === 0) return vs[0];\n\n  //console.log('tween?', frame1.v, frame2.v, frame2.t - frame1.t);\n  const v = tween(t - ts[idx-1], vs[idx-1], vs[idx], ts[idx] - ts[idx-1]);\n  //console.log('getkeyframe value?', t, idx, v);\n  return v;\n}\n\nfunction getKeyframeValue(t, keyframes, tween, currentValue) {\n  //console.log('get keyframe value: ', t, keyframes, tween);\n  if (keyframes.ts) return getKeyframeValueFor(t, keyframes, tween, currentValue);\n  const result = {};\n  const keys = Object.keys(keyframes);\n  for (var i=0; i<keys.length; i++) {\n    result[keys[i]] = getKeyframeValueFor(t, keyframes[keys[i]], tween, currentValue[keys[i]]);\n  }\n  return result;\n};\n\nfunction updateAnimation(store, delta, time, animation, animationIdx) {\n  //console.log('updateAnimation', delta, time, animation.get('name'), animationIdx);\n\n  const iterations = animation.get('iterations');\n  const animationStart = animation.get('start');\n  const easingDuration = animation.get('easingDuration');\n  const trackSet = animation.get('set');\n  let easingTime = animation.get('easingTime');\n  const playSpeed = animation.get('playSpeed');\n  let animationTime = time;\n\n  const isEasing = animation.get('first') && time < (animationStart + easingDuration);\n  if (isEasing) {\n    easingTime += delta * animation.get('easingFn')(time - animationStart, 0, 1, easingDuration);\n    animationTime = animationStart + easingTime;\n  } else if (easingTime) {\n    animationTime = time - easingDuration + easingTime;\n  }\n\n  const reverse = playSpeed < 0;\n\n  if (playSpeed !== 1) {\n    animationTime = (animationTime - animationStart) * playSpeed + animationStart;\n    if (reverse) animationTime = animationTime + animation.get('duration');\n  }\n\n  let inProgress = false;\n  let ops = [];\n\n  if (animation.get('tracks')){\n    animation.get('tracks').forEach((track, trackIdx) => {\n      const start = track.get('start') + animationStart;\n      const end = track.get('end') + animationStart;\n\n      if (reverse ? animationTime > end : animationTime < start) {\n        inProgress = true;\n        return;\n      }\n\n      const endValue = track.get('value');\n      const tween = track.get('tween');\n      const path = track.get('path');\n      const keyframes = track.get('keyframes');\n      let startValue = track.get('startValue');\n\n      // TODO: this should be more efficient\n      let currentValue = get(store, path);\n\n      if (startValue == null && !keyframes) {\n        startValue = get(store, path);\n        store.dispatch({type: UPDATE_TRACK, payload: {path: [animationIdx, trackIdx], attrs: {startValue}}});\n      }\n\n      let v = keyframes ?\n        getKeyframeValue(animationTime - start, keyframes, tween, currentValue) :\n        (animationTime > end ? endValue : tween(animationTime - start, startValue, endValue, track.get('duration')));\n\n      const op = trackSet(path, v);\n      if (op) ops.push(op);\n\n      if (reverse ? animationTime >= start : animationTime <= end) inProgress = true;\n    });\n  }\n\n  if (ops.length) store.dispatch(multi(ops));\n\n  if (inProgress) {\n    if (isEasing) {\n      store.dispatch({type: UPDATE_ANIMATION, payload: {index: animationIdx, attrs: {\n        easingTime\n      }}});\n    }\n  } else {\n    if (iterations > 1) {\n      store.dispatch({type: UPDATE_ANIMATION, payload: {index: animationIdx, attrs: {\n        first: false, easingTime: 0, start: time, iterations: iterations - 1\n      }}});\n    } else {\n      if (animation.get('onEnd')) animation.get('onEnd')();\n\n      if(animationIdx !== store.getIn(['animation', 'timelineAnimationIndex'])){\n        store.dispatch({type: REMOVE_ANIMATION, payload: animationIdx});\n      } else {\n        store.dispatch({type: UPDATE_ANIMATION, payload: {\n          index: animationIdx, attrs: { start: time }\n        }});\n        store.dispatch(stopPlaying());\n      }\n    }\n  }\n};\n\n/**\n * Are we currently playing\n * @returns {Boolean}\n */\nexport function isPlaying(store) {\n  return store.getIn(['animation', 'playing']);\n};\n\n/**\n * Start time\n * @public\n */\nexport function startPlaying(options={}) {\n  return (store) => {\n    store.dispatch({ type: START_PLAYING, payload: options.autoplay });\n    store.dispatch(setTime(store.getIn(['animation','time'])));\n  }\n};\n\n/*\n * If we are currently playing, increment time\n */\nexport function incrementTime() {\n  return (store) => {\n    if (store.getIn(['animation', 'playing'])) {\n      const startTime = store.getIn(['animation', 'startTime']);\n      const time = store.getIn(['animation', 'time']);\n      const delta = startTime ? (new Date() - startTime) : 0;\n      store.dispatch(setTime(time + delta));\n    }\n  }\n};\n\nfunction getLastKeyframeTime(keyframes) {\n  if (keyframes.ts) return keyframes.ts.length ? keyframes.ts[keyframes.ts.length - 1] : 0;\n  let lastTime = 0;\n  let times;\n  const keys = Object.keys(keyframes);\n  for (var i=0; i<keys.length; i++) {\n    times = keyframes[keys[i]].ts;\n    lastTime = times.length ? Math.max(times[times.length - 1], lastTime) : lastTime;\n  }\n  return lastTime;\n};\n\n/**\n * Stop time\n * @public\n */\nexport function stopPlaying() {\n  return { type: STOP_PLAYING };\n};\n\nfunction formatTrack(store, sceneTime, attrs) {\n  const id = cuid();\n  const path = Array.isArray(attrs.path) ? attrs.path : sceneFind(store, attrs.path);\n  if (!path) {\n    console.log('path is not defined for track', attrs);\n    return null;\n  }\n  const start = attrs.start || 0;\n  const value = attrs.value;\n  const tween = attrs.tween || getTweenFunction(value, attrs.easing || 'linear');\n  const keyframes = attrs.keyframes;\n  const duration = keyframes ? getLastKeyframeTime(keyframes) : (attrs.duration || 0);\n  const end = duration + start;\n  const startValue = duration===0 ? value : attrs.startValue;\n  return Map({ path, start, end, value, duration, tween, startValue, keyframes });\n};\n\n/**\n * Queue a clip to be played\n *\n * @public\n * @param {String} clipId the id of the clip to be queued.\n * @param {Object} attrs Attrs to override the clip settings.\n * @param {Object} options\n * @param {Boolean} options.useTimeline Display the clip in the timeline\n * @returns {Promise}\n *\n * @example\n * var clips = animation.getClips();\n * animation.queueClip(clips[0].id, {autoplay: true});\n *\n */\nexport function queueClip(clipId, attrs, options={}) {\n  return (store) => {\n    var clip = store.getIn(['animation','clips',clipId]);\n    if (clip) {\n      store.dispatch(queueAnimation(Object.assign({}, clip.toJS(), attrs)));\n      if (options.useTimeline) store.dispatch({type: QUEUE_TIMELINE_ANIMATION});\n    }\n  };\n};\n\n\n/**\n * Queue an animation\n *\n * @public\n * @param {Animation} attrs the animation object\n * @returns {Promise}\n */\nexport function queueAnimation(attrs) {\n  return (store) => {\n    const sceneTime = store.getIn(['animation','time']);\n\n    const name = attrs.name || 'Animation';\n    const iterations = attrs.iterations || 1;\n    const start = attrs.start || sceneTime;\n    const easing = attrs.easing || 'linear';\n    const easingFn = getTweenFunction(1, easing);\n    const easingDuration = attrs.easingDuration || 0;\n    const playSpeed = typeof attrs.playSpeed !== 'undefined' ? attrs.playSpeed : 1;\n    const trackList = filter((t) => !!t, map((attrs) => formatTrack(store, sceneTime, attrs), attrs.tracks));\n    const trackSet = attrs.set || set;\n    const duration = reduce((lastEnd, track) => Math.max(lastEnd, track.get('end')), 0, trackList);\n    const onEnd = attrs.onEnd || null;\n\n    //let end = 0;\n    //forEach((t) => { if (t.get('end') > end) end = t.get('end'); }, trackList);\n\n    store.dispatch({\n      type: QUEUE_ANIMATION,\n      payload: Map({\n        name,\n        start,\n        easingTime: 0,\n        first: true,\n        easing,\n        easingFn,\n        easingDuration,\n        iterations,\n        tracks: List(trackList),\n        set: trackSet,\n        onEnd,\n        playSpeed,\n        duration,\n      }),\n    });\n\n    if (attrs.autoplay && !isPlaying(store)) {\n      store.dispatch(startPlaying({autoplay: true}));\n    }\n\n    return Promise.resolve(true);\n  }\n};\n\nexport function findAnimationIndex(name, store) {\n  return store.getIn(['animation','animations']).findIndex((anim) => anim.get('name') === name);\n};\n\n/**\n * Remove an animation\n *\n * @public\n * @param {String} name the name of the animation\n * @returns {Promise}\n */\nexport function removeAnimation(name) {\n  return (store) => {\n    let animationIdx = findAnimationIndex(name, store);\n    if (animationIdx !== -1) {\n      return store.dispatch({type: REMOVE_ANIMATION, payload: animationIdx});\n    }\n  }\n\n};\n\n/**\n * Add a clip to the store.\n * @param {Object} clip\n * @param {String} id\n * @returns {Promise}\n */\nexport function addClip(clip, id) {\n  return { type: ADD_CLIP, payload: { clip, id } };\n};\n\n/**\n * Return a list of clips available.\n *\n * @public\n * @returns {Clip[]}\n */\nexport function getClips(store) {\n  return values(store.getIn(['animation','clips']).toJS());\n};\n\nfunction getTweenFunction(value, easing) {\n  const tweenFn = tweenFunctions[easing];\n  if (!tweenFn) throw new Error('Unknown easing function: '+easing);\n\n  if (typeof value !== 'object') return tweenFn;\n\n  const keys = Object.keys(value);\n\n  return (t, b, c, d) => {\n    const result = {};\n    for (var i=0; i<keys.length; i++) {\n      const key = keys[i];\n      result[key] = tweenFn(t, b[key], c[key], d);\n    }\n    return result;\n  };\n};\n\nexport function getTimelineAnimation(store){\n  const index = store.getIn(['animation', 'timelineAnimationIndex']);\n  if(index<0) return null;\n  return store.getIn(['animation', 'animations', index]);\n}\n\n\nconst publicApi = {\n  reducer,\n  actions: { setTime, startPlaying, stopPlaying, removeAnimation, queueAnimation,\n    addClip, queueClip\n  },\n  selectors: { getTime, getClips, getTimelineAnimation, isPlaying }\n};\n\nexport default publicApi;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/animation.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/keys.js\n ** module id = 131\n ** module chunks = 0 1\n **/","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/_core').Object.keys;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/keys.js\n ** module id = 132\n ** module chunks = 0 1\n **/","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./_to-object')\n  , $keys    = require('./_object-keys');\n\nrequire('./_object-sap')('keys', function(){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.keys.js\n ** module id = 133\n ** module chunks = 0 1\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"babel-runtime/core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/defineProperty.js\n ** module id = 134\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-property.js\n ** module id = 135\n ** module chunks = 0 1\n **/","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc){\n  return $Object.defineProperty(it, key, desc);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/define-property.js\n ** module id = 136\n ** module chunks = 0 1\n **/","var $export = require('./_export');\r\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\r\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', {defineProperty: require('./_object-dp').f});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.define-property.js\n ** module id = 137\n ** module chunks = 0 1\n **/","/**\n * cuid.js\n * Collision-resistant UID generator for browsers and node.\n * Sequential for fast db lookups and recency sorting.\n * Safe for element IDs and server-side lookups.\n *\n * Extracted from CLCTR\n *\n * Copyright (c) Eric Elliott 2012\n * MIT License\n */\n\n/*global window, navigator, document, require, process, module */\n(function (app) {\n  'use strict';\n  var namespace = 'cuid',\n    c = 0,\n    blockSize = 4,\n    base = 36,\n    discreteValues = Math.pow(base, blockSize),\n\n    pad = function pad(num, size) {\n      var s = \"000000000\" + num;\n      return s.substr(s.length-size);\n    },\n\n    randomBlock = function randomBlock() {\n      return pad((Math.random() *\n            discreteValues << 0)\n            .toString(base), blockSize);\n    },\n\n    safeCounter = function () {\n      c = (c < discreteValues) ? c : 0;\n      c++; // this is not subliminal\n      return c - 1;\n    },\n\n    api = function cuid() {\n      // Starting with a lowercase letter makes\n      // it HTML element ID friendly.\n      var letter = 'c', // hard-coded allows for sequential access\n\n        // timestamp\n        // warning: this exposes the exact date and time\n        // that the uid was created.\n        timestamp = (new Date().getTime()).toString(base),\n\n        // Prevent same-machine collisions.\n        counter,\n\n        // A few chars to generate distinct ids for different\n        // clients (so different computers are far less\n        // likely to generate the same id)\n        fingerprint = api.fingerprint(),\n\n        // Grab some more chars from Math.random()\n        random = randomBlock() + randomBlock();\n\n        counter = pad(safeCounter().toString(base), blockSize);\n\n      return  (letter + timestamp + counter + fingerprint + random);\n    };\n\n  api.slug = function slug() {\n    var date = new Date().getTime().toString(36),\n      counter,\n      print = api.fingerprint().slice(0,1) +\n        api.fingerprint().slice(-1),\n      random = randomBlock().slice(-2);\n\n      counter = safeCounter().toString(36).slice(-4);\n\n    return date.slice(-2) +\n      counter + print + random;\n  };\n\n  api.globalCount = function globalCount() {\n    // We want to cache the results of this\n    var cache = (function calc() {\n        var i,\n          count = 0;\n\n        for (i in window) {\n          count++;\n        }\n\n        return count;\n      }());\n\n    api.globalCount = function () { return cache; };\n    return cache;\n  };\n\n  api.fingerprint = function browserPrint() {\n    return pad((navigator.mimeTypes.length +\n      navigator.userAgent.length).toString(36) +\n      api.globalCount().toString(36), 4);\n  };\n\n  // don't change anything from here down.\n  if (app.register) {\n    app.register(namespace, api);\n  } else if (typeof module !== 'undefined') {\n    module.exports = api;\n  } else {\n    app[namespace] = api;\n  }\n\n}(this.applitude || this));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/cuid/dist/browser-cuid.js\n ** module id = 138\n ** module chunks = 0 1\n **/","export default function createReducer(initialState, handlers) {\n  return function reducer(state, action, allState, createEvent) {\n    if (action && handlers.hasOwnProperty(action.type)) {\n      return handlers[action.type](state, action.payload, {action, createEvent, state: allState});\n    } else {\n      return state || initialState;\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/utils/createReducer.js\n **/","import THREE from 'three';\nimport cuid from 'cuid';\nimport uuid from 'node-uuid';\nimport { Map, List, fromJS } from 'immutable';\nimport { forEach, map, mapObjIndexed, curry, pick, reduce } from 'ramda';\nimport createReducer from './utils/createReducer';\nimport { addFile } from './assets';\n//import { fetchmaterial } from './files';\nimport { LOAD_SCENE, ADD_NODE, ADD_VR_CAMERA, SET_VR_CAMERA, DELETE_NODE } from './actionTypes';\n\nimport { getWorldTransform } from './scene';\n\nconst SET='SET';\nconst MERGE='MERGE';\nconst MULTI='MULTI';\nconst REPARENT='REPARENT';\nconst ADD_OPERATOR='ADD_OPERATOR';\nconst virtualCameraId='cccccccc-cccc-1ccc-accc-cccccccccccc'\nconst vrCameraId='bbbbbbbb-bbbb-0bbb-zbbb-bbbbbbbbbbbb'\n\n/**\n * This module contains actions to manipulate the scene graph.\n *\n * @module sceneGraph\n * @public\n *\n */\n\n/*\n * Reducer\n */\nfunction reducer(records) {\n\n  function createOperator(OperatorRecord, type, props, name) {\n    if (!name) name = type;\n\n    let Op = new OperatorRecord({type, name});\n    // Calling merge directly so that the immutable shim has its `set` method called\n    // Filtering the operator to only known keys.\n    return Op.merge(pick(OperatorRecord.keys(), props));\n  };\n\n  function buildNode({id,name,type,children,parent,plugs}) {\n    children = children ? List(children) : List();\n    let warnings = List();\n\n    const initPlugs = Map(mapObjIndexed((ops, plug) => {\n      if (!records[plug]) {\n        warnings = warnings.push(`No Plug: ${plug}`);\n        return List();\n      }\n      return List(ops.map((op) => {\n        if (!Array.isArray(op)) throw new Error('Expect op to be an array of 2 or 3');\n\n        let [type,props,name] = op;\n        let OperatorRecord = records[plug][type];\n\n        if (!OperatorRecord) {\n          warnings = warnings.push(`No Operator: ${plug} - ${type}`);\n          //console.log('WARNING:', warnings.toJS());\n          OperatorRecord = records.None.NoOp;\n        }\n        return createOperator(OperatorRecord, type, props, name);\n      }));\n    }, plugs));\n\n    return Map({id, name, type, children, parent, plugs: initPlugs, warnings});\n  };\n\n  function errorNode({id, name, children, parent}) {\n    children = children ? List(children) : List();\n    return Map({id, name, type: 'ErrorNode', children, parent, plugs: Map()});\n  };\n\n\n  function addOperator(state, path, operator) {\n    let [id,plug] = path;\n    let ops = state.getIn([id,'plugs',plug]);\n    if (!ops) throw new Error(`Invalid path to 'addOperator': ${id}:${plug}`);\n    state.setIn([id,'plugs',plug], ops.push(buildOperator(plug)(operator)));\n  };\n\n  let initialState = Map();\n\n  const sceneReducer = createReducer(initialState, {\n    [SET](state, {path,value}) {\n      if (path.length && path.length ===2 && path[1] === 'name') {\n        return state.setIn(path, value);\n      }\n      if (!path.length || path.length !== 4) {\n        throw new Error('SET requires a path with length 4');\n      }\n      const [node,plug,idx,key] = path;\n      const Op = state.getIn([node,'plugs',plug,idx]);\n      if (!Op) throw new Error('Setting data on unknown operator: '+path);\n      return state.setIn([node,'plugs',plug,idx,key], value);\n    },\n\n    [MERGE](state, {path,attrs}) {\n      if (!path.length || path.length !== 3) {\n        throw new Error('MERGE requires a path with length 3');\n      }\n      if (typeof attrs !== 'object') {\n        throw new Error('MERGE requires an object to merge in');\n      }\n      const [node,plug,idx] = path;\n      return state.mergeIn([node,'plugs',plug,idx], attrs);\n    },\n\n    [ADD_NODE](state, attrs) {\n      const {id, parent} = attrs;\n      const parentNode = parent && state.get(parent);\n      if (parent && !parentNode) throw new Error(`Unknown parent: '${parent}'`);\n\n      const prevNode = state.get(id);\n      if (prevNode && prevNode.get('plugs')) throw new Error(`Adding a node that already exists: ${id}`)\n      const node = attrs.node || buildNode(attrs);\n      state = state[prevNode ? 'merge' : 'set'](id, node);\n\n      if (parent && !state.getIn([parent, 'children']).includes(id)) {\n        state = state.setIn([parent,'children'], parentNode.get('children').push(id));\n      }\n      return state;\n    },\n\n    [DELETE_NODE](state, id) {\n      let node = state.get(id);\n      if (!node) return state;\n      let parent = node.get('parent');\n      if (parent) {\n        let idx = state.getIn([parent,'children']).indexOf(id);\n        if (idx !== -1) state = state.setIn([parent, 'children'], state.getIn([parent,'children']).remove(idx))\n      }\n      return state.delete(id);\n    },\n\n    [ADD_OPERATOR](state, attrs) {\n      const { id, plug, op } = attrs;\n      const node = state.get(id);\n      if (!node) throw new Error(`Unknown node: ${id}`);\n\n      const ops = node.getIn([ 'plugs', plug ]);\n      if (!ops) throw new Error(`Unknown plug: ${plug}`);\n\n      if (!Array.isArray(op)) throw new Error('Expect op to be an array of 2 or 3');\n\n      const [type,props,name] = op;\n      const OperatorRecord = records[plug][type];\n\n      if (!OperatorRecord) throw new Error(`No Operator: ${plug} - ${type}`);\n\n      return state.setIn([id,'plugs',plug], ops.push(createOperator(OperatorRecord, type, props, name)));\n    },\n\n    [MULTI](state, ops) {\n      let newState = state;\n      forEach((op) => {\n        if (![SET,MERGE,ADD_NODE,DELETE_NODE,REPARENT].includes(op.type)) {\n          throw new Error(\"Only sceneGraph operations allowed in MULTI: \"+op.type);\n        }\n        newState = sceneReducer(newState, op);\n      }, ops);\n      return newState;\n    },\n\n    [REPARENT](prevState, { parent, childIds }) {\n      let state = prevState;\n\n      forEach((childId) => {\n        const childParentId = state.getIn([childId,'parent']);\n        let idx = state.getIn([childParentId, 'children']).indexOf(childId);\n        if (idx !== -1) state = state.setIn([childParentId, 'children'], state.getIn([childParentId,'children']).remove(idx));\n\n        state = state.setIn([parent, 'children'], state.getIn([parent, 'children']).push(childId));\n        state = state.setIn([childId, 'parent'], parent);\n      }, childIds);\n      return state;\n    },\n\n    [LOAD_SCENE](state, { scene }) {\n      let newState = state.merge(scene);\n      newState = newState.get(virtualCameraId) ? newState : newState.set(virtualCameraId, buildNode({\n        id: virtualCameraId,\n        name: 'CAMERA',\n        type: 'Camera',\n        plugs: {\n          Camera: [['Camera', {}]],\n          Transform: [['Transform', {}]],\n          Properties: [['Default', {}]],\n        },\n      }));\n      newState = newState.get(vrCameraId) ? newState : newState.set(vrCameraId, buildNode({\n        id: vrCameraId,\n        name: 'VR CAMERA',\n        type: 'Camera',\n        plugs: {\n          Camera: [['Camera', {fieldOfView:45}]],\n          Transform: [['Transform', {translation:{x:0, y:1.6, z:1}}]],\n          Properties: [['Default', {}]],\n        },\n      }));\n      return newState;\n    },\n\n    [SET_VR_CAMERA](state, cameraId){\n      const camNode = state.get(cameraId)\n      if(camNode.type === 'Camera') return state.set(vrCameraId, camNode);\n      else return state;\n    },\n\n  });\n\n  return sceneReducer;\n}\n\n/**\n * Add a node to the scene.\n *\n * @public\n * @param {Node} node\n * @returns {Promise}\n */\nexport function addNode(node)  {\n  let {id,name,type,plugs,parent} = node;\n  if (!id) id = uuid.v4(); //cuid();\n  name = name || id;\n\n  return {\n    type: ADD_NODE,\n    payload: {id,name,type,plugs,parent},\n    resolve: id,\n  };\n};\n\nexport function setVRCamera(camId){\n  return { type: SET_VR_CAMERA, payload: camId };\n}\n\n/**\n * Deletes a node\n *\n * @public\n * @param {String} id The node id\n * @returns {Promise}\n */\nexport function deleteNode(id) {\n  return {\n    type: DELETE_NODE,\n    payload: id\n  }\n};\n\n/**\n *\n * Add an operator to a plug of a node.\n */\nexport function addOperator(id, plug, op) {\n  return {\n    type: ADD_OPERATOR,\n    payload: { id, plug, op },\n  };\n};\n\n/**\n * get a property\n *\n * @param {Path} path to the operator property.\n * @returns {any} value\n *\n * @example\n * // scene.get([uuid\n */\nexport function get(store, path) {\n  let p = ['sceneGraph',path[0]];\n  if (path.length === 2 && (path[1] === 'name' || path[1] === 'type')) {\n    return store.getIn(['sceneGraph',path[0],path[1]]);\n  }\n  if (path.length >= 2) p = p.concat(['plugs',path[1]]);\n  if (path.length >= 3) p = p.concat(path.slice(2));\n  return store.getIn(p);\n};\n\nexport function getVRCamera(store){\n  return store.getIn(['sceneGraph', vrCameraId]);\n}\n\n/**\n * set a property on an operator. This takes a Path array,\n * and a value\n *\n * @param {Path} path includes the operator property.\n * @param {any} value\n * @returns {Promise}\n *\n */\nexport function set(path, value) {\n  return {type: SET, payload: {path, value}, meta: {remote: true}};\n};\n\n/**\n * Merges an object into an operator.\n *\n * @param {Path} path to the operator.\n * @param {Object} attrs\n * @returns {Promise}\n *\n */\nexport function merge(path, attrs) {\n  return {type: MERGE, payload: {path, attrs}};\n};\n\n/**\n * An array of scene actions.\n *\n * @param {Action[]} ops\n * @returns {Promise}\n */\nexport function multi(ops) {\n  return {type: MULTI, payload: ops};\n};\n\n/**\n * Reparent nodes to the new parent.\n *\n * @public\n * @param {String} parent id of the new parent node\n * @param {Array} childIds list of ids to reparent\n *\n * @example\n * // reparent children of 'MyModel' to 'NewParentNull'\n * const parentId = scene.find({ name: 'NewParentNull' });\n * const nodesToReparent = scene.filter({ from: { name: 'MyModel' } });\n * sceneGraph.reparent(parentId, nodesToReparent);\n */\nexport function reparent(parent, childIds) {\n  return { type: REPARENT, payload: { parent, childIds } };\n};\n\n/**\n * Return the parent id of the node.\n */\nexport function findParent(store, id) {\n  return store.getIn(['sceneGraph',id,'parent']);\n};\n\n/**\n * Return the root parent id of the node.\n */\nexport function findRoot(store, id) {\n  const parent = store.getIn(['sceneGraph',id,'parent']);\n  return parent ? findRoot(store, parent) : id;\n};\n\n/**\n * Clone nodes. Given a list of ids, this will copy the node with a new id,\n * and update the parent and child of each node. By passing in a map of *old\n * parent id* to *new parent id*, the nodes can be cloned to a different location\n * in the sceneGraph (or from one to another).\n *\n * @public\n * @param {Array} ids list of ids to clone\n * @param {Object} nodeMap of {oldNodeId: newNodeId} Can be used for passing\n *                         new parents, or new depencies.\n * @param {Object?} options\n * @param {Boolean?} options.cloneDependencies Clone dependencies as well.\n *\n * @example\n * // clone children of 'MyModel' to 'NewParentNull'\n * const parentId = scene.find({ name: 'NewParentNull' });\n * const myModelId = scene.find({ name: 'MyModel' });\n * const nodesToClone = scene.filter({ from: { id: myModelId } });\n * sceneGraph.clone(nodesToClone, { [myModelId]: parentId });\n * // clone dependencies\n * sceneGraph.clone(nodesToClone, { [myModelId]: parentId }, {cloneDependencies: true});\n */\nexport function clone(ids, nodeMap={}, options={}) {\n  const { cloneDependencies } = options;\n  const nodes = reduce((acc, id) => { acc[id] = true; return acc; }, {}, ids);\n  const deps = {};\n  const assets = {};\n\n  return (store) => {\n    // Find dependencies\n    function checkDependency(id) {\n      const name = store.getIn(['sceneGraph', id, 'name']);\n      store.getIn(['sceneGraph', id, 'plugs']).forEach((ops, plug) => {\n        ops.forEach((op, opIdx) => {\n          op.getReferences().forEach((ref, key) => {\n            const refId = ref.get('id');\n            if (!nodes[refId] && !nodeMap[refId]) {\n              nodes[refId] = true;\n              checkDependency(refId);\n            }\n          });\n\n          op.getFileReferences().forEach((ref, key) => {\n            const refId = ref.get('id');\n            // We may not have loaded the asset, so can't clone what we don't have\n            if (store.getIn(['assets', refId])) {\n              assets[refId] = true;\n            }\n          });\n        });\n      });\n    }\n\n    if (cloneDependencies) forEach(checkDependency, ids);\n\n    // Generate new ids\n    forEach((id) => nodes[id] = uuid.v4(), Object.keys(nodes));\n    forEach((assetId) => assets[assetId] = uuid.v4(), Object.keys(assets));\n\n    function updateDependencies(node) {\n      var resultNode = node;\n      node.get('plugs').forEach((ops, plug) => {\n        ops.forEach((op, opIdx) => {\n          op.getReferences().forEach((ref, key) => {\n            const refId = ref.get('id');\n            const newRef = nodes[refId] || nodeMap[refId];\n            if (newRef) resultNode = resultNode.setIn(['plugs', plug, opIdx, key], newRef);\n          });\n\n          op.getFileReferences().forEach((ref, key) => {\n            const refId = ref.get('id');\n            if (assets[refId]) {\n              resultNode = resultNode.setIn(['plugs', plug, opIdx, key], assets[refId]);\n            }\n          });\n        });\n      });\n      return resultNode;\n    }\n\n\n    // Remap parents, children and dependencies\n    forEach((id) => {\n      const node = store.getIn(['sceneGraph', id]);\n      const nodeParent = node.get('parent');\n      const parent = nodeParent && (nodes[nodeParent] || nodeMap[nodeParent] || nodeParent);\n      const children = (node.get('children') || List())\n          .map((childId) => (nodes[childId] || nodeMap[childId]))\n          .filter((childId) => !!childId);\n\n      store.dispatch({\n        type: ADD_NODE,\n        payload: {\n          id: nodes[id],\n          parent,\n          node: updateDependencies(node.merge({ parent, children, id: nodes[id] })),\n        }\n      });\n    }, Object.keys(nodes));\n\n    var firstNodeRootId = findRoot(store, nodes[Object.keys(nodes)[0]]);\n\n    forEach((assetId) => {\n      const asset = store.getIn(['assets', assetId]);\n      if (asset) {\n        store.dispatch(addFile(asset.set('id', assets[assetId]).set('sceneId', firstNodeRootId).toJS()));\n      }\n    }, Object.keys(assets));\n\n    return Promise.resolve(nodes);\n  }\n};\n\n\nexport function oldNodeJSON(node) {\n  const jsnode = node.toJS();\n\n  return {\n    _id: jsnode.id,\n    name: jsnode.name,\n    type: jsnode.type,\n    plugs: node.get('plugs').map((plug, type) => {\n      return { type, operators: plug.map((op) => {\n        return op.export();\n      }).toJS() }\n    }).toArray(),\n    nodes: []\n  };\n};\n\n/**\n * Given a list of nodes, build and return the old scene graph format.\n */\nexport function exportJSON(store, nodes) {\n  let rootNode;\n  const nodeMap = {};\n\n  forEach((nodeId) => {\n    const node = store.getIn(['sceneGraph', nodeId]);\n    const parent = node.get('parent');\n\n    const newNode = oldNodeJSON(node);\n    nodeMap[newNode._id] = newNode;\n    if (!rootNode) rootNode = newNode;\n\n    if (parent && nodeMap[parent]) {\n      nodeMap[parent].nodes.push(newNode);\n    }\n  }, nodes);\n\n  return rootNode;\n};\n\n//export function importMaterial(id) {\n//  return ({dispatch, getState}) => {\n//    // let sceneId = getState().getIn(['scene','id']);\n//    return dispatch(fetchMaterial(id)).then((mat) => {\n//      return dispatch(addNode({...mat, plugs: {\n//        Material: [['Material', {color: {r: 1, g: 0, b: 0, a: 1}}]]\n//      }, parent: 'materiallibrary'}));\n//    }).catch((err) => {\n//      // console.log('handle rejected promise?', err);\n//      return false;\n//      // throw err;\n//    });\n//  }\n//}\n\nexport function updateNodeTransform( store, nodeId, newTransform ) {\n  var parentNodeId = findParent(store, nodeId);\n\n  //const parent = store.getIn(['sceneGraph',parentNode.get('id'),'parent']);\n  var parentWorldTransform = getWorldTransform(store, parentNodeId);\n  //console.log( 'parentWorldTransform', parentWorldTransform );\n\n    var position = new THREE.Vector3(), quaternion = new THREE.Quaternion(), scale = new THREE.Vector3();\n\n    var tempTransform = new THREE.Matrix4();\n    tempTransform.copy( newTransform );\n\n    if( parentWorldTransform ) {\n      var invParentWorldTransform = new THREE.Matrix4();\n      invParentWorldTransform.getInverse( parentWorldTransform, true );\n      tempTransform.multiplyMatrices( invParentWorldTransform, tempTransform );\n    }\n    tempTransform.decompose( position, quaternion, scale );\n    //console.log( 'position', JSON.stringify( position ) );\n    //console.log( 'scale', JSON.stringify( scale ) );\n    var euler = new THREE.Euler().setFromQuaternion( quaternion, 'ZYX' );\n    //console.log( 'euler', JSON.stringify( euler ) );\n\n\n    //let translation = node.getIn(['plugs','Transform',0,'translation']);\n    //let rotation = node.getIn(['plugs','Transform',0,'rotation']);\n    store.dispatch(\n      set([nodeId,'Transform',0,'translation'],\n        {x: position.x, y: position.y, z: position.z })\n      );\n    store.dispatch(\n      set([nodeId,'Transform',0,'rotation'],\n        {x: THREE.Math.radToDeg( euler.x ), y: THREE.Math.radToDeg( euler.y ), z: THREE.Math.radToDeg( euler.z ) })\n      );\n}\n\nconst publicApi = {\n  reducer,\n  actions: { set, merge, multi, addNode, deleteNode, reparent, clone, setVRCamera, addOperator },\n  selectors: { get, exportJSON, getVRCamera}\n};\nexport default publicApi;\n\nexport { virtualCameraId as virtualCameraId };\nexport { vrCameraId as vrCameraId };\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/sceneGraph.js\n **/","//     uuid.js\n//\n//     Copyright (c) 2010-2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n(function() {\n  var _global = this;\n\n  // Unique ID creation requires a high quality random # generator.  We feature\n  // detect to determine the best RNG source, normalizing to a function that\n  // returns 128-bits of randomness, since that's what's usually required\n  var _rng;\n\n  // Node.js crypto-based RNG - http://nodejs.org/docs/v0.6.2/api/crypto.html\n  //\n  // Moderately fast, high quality\n  if (typeof(_global.require) == 'function') {\n    try {\n      var _rb = _global.require('crypto').randomBytes;\n      _rng = _rb && function() {return _rb(16);};\n    } catch(e) {}\n  }\n\n  if (!_rng && _global.crypto && crypto.getRandomValues) {\n    // WHATWG crypto-based RNG - http://wiki.whatwg.org/wiki/Crypto\n    //\n    // Moderately fast, high quality\n    var _rnds8 = new Uint8Array(16);\n    _rng = function whatwgRNG() {\n      crypto.getRandomValues(_rnds8);\n      return _rnds8;\n    };\n  }\n\n  if (!_rng) {\n    // Math.random()-based (RNG)\n    //\n    // If all else fails, use Math.random().  It's fast, but is of unspecified\n    // quality.\n    var  _rnds = new Array(16);\n    _rng = function() {\n      for (var i = 0, r; i < 16; i++) {\n        if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n        _rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n      }\n\n      return _rnds;\n    };\n  }\n\n  // Buffer class to use\n  var BufferClass = typeof(_global.Buffer) == 'function' ? _global.Buffer : Array;\n\n  // Maps for number <-> hex string conversion\n  var _byteToHex = [];\n  var _hexToByte = {};\n  for (var i = 0; i < 256; i++) {\n    _byteToHex[i] = (i + 0x100).toString(16).substr(1);\n    _hexToByte[_byteToHex[i]] = i;\n  }\n\n  // **`parse()` - Parse a UUID into it's component bytes**\n  function parse(s, buf, offset) {\n    var i = (buf && offset) || 0, ii = 0;\n\n    buf = buf || [];\n    s.toLowerCase().replace(/[0-9a-f]{2}/g, function(oct) {\n      if (ii < 16) { // Don't overflow!\n        buf[i + ii++] = _hexToByte[oct];\n      }\n    });\n\n    // Zero out remaining bytes if string was short\n    while (ii < 16) {\n      buf[i + ii++] = 0;\n    }\n\n    return buf;\n  }\n\n  // **`unparse()` - Convert UUID byte array (ala parse()) into a string**\n  function unparse(buf, offset) {\n    var i = offset || 0, bth = _byteToHex;\n    return  bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] + '-' +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]] +\n            bth[buf[i++]] + bth[buf[i++]];\n  }\n\n  // **`v1()` - Generate time-based UUID**\n  //\n  // Inspired by https://github.com/LiosK/UUID.js\n  // and http://docs.python.org/library/uuid.html\n\n  // random #'s we need to init node and clockseq\n  var _seedBytes = _rng();\n\n  // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n  var _nodeId = [\n    _seedBytes[0] | 0x01,\n    _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n  ];\n\n  // Per 4.2.2, randomize (14 bit) clockseq\n  var _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n  // Previous uuid creation time\n  var _lastMSecs = 0, _lastNSecs = 0;\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v1(options, buf, offset) {\n    var i = buf && offset || 0;\n    var b = buf || [];\n\n    options = options || {};\n\n    var clockseq = options.clockseq != null ? options.clockseq : _clockseq;\n\n    // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n    // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n    // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n    // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n    var msecs = options.msecs != null ? options.msecs : new Date().getTime();\n\n    // Per 4.2.1.2, use count of uuid's generated during the current clock\n    // cycle to simulate higher resolution clock\n    var nsecs = options.nsecs != null ? options.nsecs : _lastNSecs + 1;\n\n    // Time since last uuid creation (in msecs)\n    var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n    // Per 4.2.1.2, Bump clockseq on clock regression\n    if (dt < 0 && options.clockseq == null) {\n      clockseq = clockseq + 1 & 0x3fff;\n    }\n\n    // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n    // time interval\n    if ((dt < 0 || msecs > _lastMSecs) && options.nsecs == null) {\n      nsecs = 0;\n    }\n\n    // Per 4.2.1.2 Throw error if too many uuids are requested\n    if (nsecs >= 10000) {\n      throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n    }\n\n    _lastMSecs = msecs;\n    _lastNSecs = nsecs;\n    _clockseq = clockseq;\n\n    // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n    msecs += 12219292800000;\n\n    // `time_low`\n    var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n    b[i++] = tl >>> 24 & 0xff;\n    b[i++] = tl >>> 16 & 0xff;\n    b[i++] = tl >>> 8 & 0xff;\n    b[i++] = tl & 0xff;\n\n    // `time_mid`\n    var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n    b[i++] = tmh >>> 8 & 0xff;\n    b[i++] = tmh & 0xff;\n\n    // `time_high_and_version`\n    b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n    b[i++] = tmh >>> 16 & 0xff;\n\n    // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n    b[i++] = clockseq >>> 8 | 0x80;\n\n    // `clock_seq_low`\n    b[i++] = clockseq & 0xff;\n\n    // `node`\n    var node = options.node || _nodeId;\n    for (var n = 0; n < 6; n++) {\n      b[i + n] = node[n];\n    }\n\n    return buf ? buf : unparse(b);\n  }\n\n  // **`v4()` - Generate random UUID**\n\n  // See https://github.com/broofa/node-uuid for API details\n  function v4(options, buf, offset) {\n    // Deprecated - 'format' argument, as supported in v1.2\n    var i = buf && offset || 0;\n\n    if (typeof(options) == 'string') {\n      buf = options == 'binary' ? new BufferClass(16) : null;\n      options = null;\n    }\n    options = options || {};\n\n    var rnds = options.random || (options.rng || _rng)();\n\n    // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n    // Copy bytes to buffer, if provided\n    if (buf) {\n      for (var ii = 0; ii < 16; ii++) {\n        buf[i + ii] = rnds[ii];\n      }\n    }\n\n    return buf || unparse(rnds);\n  }\n\n  // Export public API\n  var uuid = v4;\n  uuid.v1 = v1;\n  uuid.v4 = v4;\n  uuid.parse = parse;\n  uuid.unparse = unparse;\n  uuid.BufferClass = BufferClass;\n\n  if (typeof(module) != 'undefined' && module.exports) {\n    // Publish as node.js module\n    module.exports = uuid;\n  } else  if (typeof define === 'function' && define.amd) {\n    // Publish as AMD module\n    define(function() {return uuid;});\n \n\n  } else {\n    // Publish as global (in browsers)\n    var _previousRoot = _global.uuid;\n\n    // **`noConflict()` - (browser only) to reset global 'uuid' var**\n    uuid.noConflict = function() {\n      _global.uuid = _previousRoot;\n      return uuid;\n    };\n\n    _global.uuid = uuid;\n  }\n}).call(this);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/node-uuid/uuid.js\n ** module id = 141\n ** module chunks = 0 1\n **/","import {Map,List} from 'immutable';\nimport { map } from 'ramda';\nimport createReducer from './utils/createReducer';\nimport { addNode } from './sceneGraph';\nimport { find as sceneFind } from './scene';\nimport { LOAD_SCENE, LOADING_FILE, LOADED_FILE, LOADING_FILE_ERROR } from './actionTypes';\nimport { getEvalSceneGraph } from './utils/evalSceneGraph';\nimport { isUuid } from './utils/selectors';\n\n/**\n * Managing assets\n *\n * @module assets\n * @public\n */\n\nconst ADD_FILE='ADD_FILE';\nconst REMOVE_FILE='REMOVE_FILE';\n\nconst IMPORTING_FILE='IMPORTING_FILE';\nconst IMPORTED_FILE='IMPORTED_FILE';\nconst IMPORT_FILE_ERROR='IMPORT_FILE_ERROR';\n\nconst initialState = Map({\n});\n\nconst reducer = createReducer(initialState, {\n  [ADD_FILE](state, attrs, { action, createEvent }) {\n    let {id} = attrs;\n    if (action.meta && action.meta.saveFile) createEvent('saveFile', attrs);\n    return state.set(id, Map(attrs));\n  },\n  [REMOVE_FILE](state, id) {\n    return state.delete(id);\n  },\n  [LOAD_SCENE](state, { assets }) {\n    return state.merge(assets);\n  }\n});\n\nexport function addFile(attrs, saveFile) {\n  return {type: ADD_FILE, payload: attrs, meta: { saveFile }};\n};\n\nexport function removeFile(id) {\n  return {type: REMOVE_FILE, payload: id};\n};\n\n\nfunction urlsFor(file) {\n  return map((host) => `${host}/${file.get('hash')}${file.get('suffix')}?filename=${file.get('name')}`, __FILEROOTS__);\n}\n\nexport function isLoading(id) {\n  return ({getIn}) => getIn(['sceneIO','loadingFiles',id]);\n};\n\nexport function getImage(id) {\n  return images[id];\n};\n\nexport function getOrFetchImage(id, attrs={}) {\n  return (store) => {\n    let file = store.getIn(['assets', id]);\n    if (!file) return;\n\n    return store.callApi(Object.assign({\n      types: [LOADING_FILE, LOADED_FILE, LOADING_FILE_ERROR],\n      url: urlsFor(file),\n      contentType: 'img',\n      payload: id,\n      queryKey: 'IMAGE'+file.get('hash'),\n      fireAndForget: true\n    }, attrs));\n  }\n}\n\nexport function getOrFetchBinary(id) {\n  return (store) => {\n    const file = store.getIn(['assets',id]);\n\n    return store.callApi({\n      types: [LOADING_FILE, LOADED_FILE, LOADING_FILE_ERROR],\n      url: urlsFor(file),\n      contentType: 'binary',\n      payload: id,\n      queryKey: 'FILE'+file.get('hash'),\n      fireAndForget: true\n    });\n  }\n}\n\nexport function getHash(store, id) {\n  return store.getIn(['assets',id,'hash']);\n};\n\n/**\n * get the url for the asset.\n *\n * @public\n * @param {String} id\n * @returns {String} the url pointing to the asset.\n *\n */\nexport function getUrl(store, id) {\n  const asset = store.getIn(['assets', id]);\n  return asset && urlsFor(asset)[0];\n};\n\nexport function fetchText(hash) {\n  return (store) => {\n    return store.callApi({\n      contentType: 'text',\n      url: map((host) => `${host}/${hash}`, __FILEROOTS__)\n    });\n  }\n};\n\nexport function fetchTransit(uuid) {\n  return (store) => {\n    return store.callApi({\n      contentType: 'text',\n      url: `/api/scenes/${uuid}`\n    });\n  }\n};\n\n\nexport function find(store, fn) {\n  return store.get('assets').find(fn);\n};\n\nexport function filter(store, fn) {\n  return store.getIn(['assets']).filter(fn || (() =>  true));\n};\n\nexport function exportJSON(store) {\n  return store.getIn(['assets']).map(function(asset) {\n    var json = asset.toJS();\n    json._id = json.id;\n    delete json.id;\n    return json;\n  }).toArray();\n};\n\nexport function getActiveAssets(store) {\n  const evalSceneGraph = getEvalSceneGraph(store);\n  return filter(store, (v, k) => {\n    return !!evalSceneGraph.getIn(['fileReferences',k]);\n  });\n};\n\n\nfunction resizeImage(file, maxWidth, maxHeight) {\n  return new Promise(function(resolve, reject) {\n    const img = document.createElement(\"img\");\n    const reader = new FileReader();\n    reader.onload = function(e) {\n      img.src = e.target.result;\n\n      img.onload = function () {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        ctx.drawImage(img, 0, 0);\n\n        let width = img.width;\n        let height = img.height;\n\n        if (width > height) {\n          if (width > maxWidth) {\n            height *= maxWidth / width;\n            width = maxWidth;\n          }\n        } else {\n          if (height > maxHeight) {\n            width *= maxHeight / height;\n            height = maxHeight;\n          }\n        }\n        canvas.width = width;\n        canvas.height = height;\n\n        var ctx2 = canvas.getContext(\"2d\");\n        ctx2.drawImage(img, 0, 0, width, height);\n\n        resolve(canvas.toDataURL(file.type));\n      }\n    }\n    reader.readAsDataURL(file);\n  });\n}\n\nconst MAX_IMG_SIZE = 4096;\nexport const NULL_SCENE_ID = '00000000-0000-0000-0000-000000000000';\n\n/**\n *\n * This will upload an image, add an image node to the scene graph, and return\n * an object with the id of the new node, and the id of the uploaded asset.\n *\n * If you save the assetId, that assetId can be passed into this function\n * to get a new image node for the scene. That means you can restore the state of\n * a scene without having to reimport the previous image.\n *\n * See [The demo example](tutorial-demo-ImportImage.html) for an example of usage.\n *\n * @public\n * @param {(File|String)} image A [File](https://developer.mozilla.org/en/docs/Web/API/File) to import, or an assetId from a previous import.\n * @param {Object} options\n * @param {Number} options.resizeTo A max width/height to resize the\n *   image to (preserves aspect ratio of image)\n * @returns Promise resolve to an object with `assetId` and `imageNodeId` keys\n *\n */\nexport function importImage(file, options = {}) {\n  return (store) => {\n    function fetchAsset(uuid) {\n      return store.callApi({\n        types: [IMPORTING_FILE, IMPORTED_FILE, IMPORT_FILE_ERROR],\n        url: `${__APIROOT__}/files/${uuid}/asset`,\n      });\n    }\n\n    // Post to the server to create the image asset\n    function importImage(image) {\n      const body = JSON.stringify({\n        content: image,\n        name: file.name,\n        sceneId: NULL_SCENE_ID,\n        type: file.type,\n      });\n\n      return importFile(store, { body });\n    }\n\n    // Add the asset to the store.\n    function addImageAsset(image) {\n      return store.dispatch(addFile(Object.assign({id: image._id}, image)));\n    }\n\n    // Create the image node from given asset\n    function createImageNode(imageAsset) {\n      return store.dispatch(addNode({\n        name: file.name,\n        type: 'Image',\n        parent: sceneFind(store, {name: 'Material Library'}),\n        plugs: {\n          Image: [['Image', { glBitmapFile: imageAsset.id, glOption: 1 }]],\n        },\n      })).then(function(imageNodeId) {\n        return {\n          imageNodeId,\n          assetId: imageAsset.id,\n        }\n      });\n    }\n\n    if (typeof file === 'string' && isUuid(file)) {\n      return fetchAsset(file).then(addImageAsset).then(createImageNode);\n    }\n\n    if (!file.type) return Promise.reject('Expect a File');\n    if (file.type !== 'image/jpeg' && file.type !== 'image/png') return Promise.reject('File must be a jpg or png');\n\n    const max = options.resizeTo || MAX_IMG_SIZE;\n\n    return resizeImage(file, max, max).then(importImage).then(addImageAsset).then(createImageNode);\n  }\n}\n\nexport function importFile(store, attrs={}) {\n  return store.callApi(Object.assign({\n    types: [IMPORTING_FILE, IMPORTED_FILE, IMPORT_FILE_ERROR],\n    method: 'POST',\n    url: `${__APIROOT__}/files`,\n  }, attrs));\n}\n\n\nconst publicApi = {\n  reducer,\n  actions: { addFile, removeFile, importImage },\n  selectors: { _getHash: getHash, getUrl, filter, find, getActiveAssets, exportJSON  },\n};\nexport default publicApi;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/assets.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/json/stringify.js\n ** module id = 143\n ** module chunks = 0 1\n **/","var core  = require('../../modules/_core')\n  , $JSON = core.JSON || (core.JSON = {stringify: JSON.stringify});\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return $JSON.stringify.apply($JSON, arguments);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/json/stringify.js\n ** module id = 144\n ** module chunks = 0 1\n **/","import THREE from 'three';\nimport { chain, forEach, map, reduce } from 'ramda';\nimport { merge, addNode, set as sceneSet, get as sceneGet, clone as sceneClone, exportJSON as exportSceneJSON, setVRCamera as setSceneVRCamera } from './sceneGraph';\nimport { filter as filterAssets, removeFile, exportJSON as exportAssetsJSON } from './assets';\nimport { getEvalSceneGraph } from './utils/evalSceneGraph';\nimport { findParent, findRoot } from './sceneGraph'\nimport { buildQueryObject, getMatch, findChild, matchChildren } from './utils/selectors';\n\n/**\n * This module is a high level scene graph manipulation and query library.\n *\n * * Either id, name, or regex's can be used for node names.\n * * All `get` functions return the value, or undefined if no match is found\n * * All `find` functions return an `id` or a Path\n * * All `filter` functions return an array of `id` or Path\n * *\n * @module scene\n * @public\n *\n */\n\n/**\n * Finds first matching node.\n * If propertyName is specified, will look for the first matching operator,\n * and if found, return a path to the operator property.\n * (See {@tutorial sdk-SceneGraph})\n *\n * @public\n * @param {(String|QueryObject)} query The query object to filter on (or a string that gets converted to a query object).\n *\n * @example\n *\n * // Return the node uuid\n * scene.find('Box'); -> 'uuid'\n * // Return the path to the transform operator\n * scene.find('Box','Transform','translation'); -> ['uuid','Transform',0]\n * // Match the first node that starts with Box\n * scene.find('Box*');\n *\n */\nexport function find(store, query, onlyNode) {\n  const queryObj = buildQueryObject(query);\n\n  // Don't need to do a search if we have an id\n  if (queryObj.id) {\n    let foundNode = store.getIn(['sceneGraph', queryObj.id]);\n    if (foundNode && queryObj.parent) {\n      return foundNode.get('parent') || null;\n    }\n    if (foundNode && queryObj.child) {\n      return findChild(store, foundNode, {type: queryObj.child, shallow: true}, false, true) || null;\n    }\n    return foundNode ? getMatch(foundNode, queryObj, onlyNode) : null;\n  }\n\n  // If we ask to search `all`, then we do a linear search. This lets us\n  // find nodes from scenes not in the active scene graph.\n  if (queryObj.from && queryObj.from.all) {\n    let result;\n    const match = store.get('sceneGraph').find((node) => {\n      return result = getMatch(node, queryObj);\n    });\n    return match && result;\n  }\n\n  const rootId = queryObj.from ? find(store, queryObj.from, true) :\n    store.getIn(['sceneIO', 'id']);\n  const rootNode = rootId && store.getIn(['sceneGraph', rootId]);\n\n  return rootNode ? findChild(store, rootNode, queryObj, queryObj.includeParent && rootNode, onlyNode) : null;\n};\n\n\nfunction matchSceneNode(store, queryObj, onlyNode) {\n  var node = store.getIn(['sceneGraph',store.getIn(['sceneIO','id'])]);\n  return node && getMatch(node, queryObj, onlyNode) || null;\n};\n\n/**\n * This function will iterate through the scene graph, returning an array\n * of all elements that match the parameters provided.\n *\n * The return value of this function will either be an array of ids (if nodequery and\n * plug are provied), or an array of paths (if property is provided).\n *\n * (See {@tutorial sdk-SceneGraph})\n *\n * @public\n * @param {(String|QueryObject)} query The query object to filter on (or a string that gets converted to a query object).\n * @returns {Array}\n */\nexport function filter(store, query) {\n  const queryObj = buildQueryObject(query);\n  const fromId = queryObj.from ? find(store, queryObj.from) : store.getIn(['sceneIO','id']);\n\n  // No matching from query, return empty search\n  if (queryObj.from && !fromId) return [];\n\n  const fromNode = store.getIn(['sceneGraph', fromId]);\n\n  if (!fromNode) {\n    throw new Error('Unknown node to filter from');\n  }\n\n  return matchChildren(store, fromNode, queryObj, queryObj.includeParent && fromNode);\n};\n\n/**\n * Returns the value at the matching property.\n *\n * (See {@tutorial sdk-SceneGraph})\n *\n * @param {(String|QueryObject|Path)} query The query object to filter on (or a string that gets converted to a query object).\n * @returns {any}\n * @public\n */\nexport function get(store, query) {\n  var path = Array.isArray(query) ? query : find(store, query);\n  if (!path) return undefined;\n  if (path.length >= 2 && path[1] === 'eval') {\n    const evalPlug = getEvalSceneGraph(store).getIn(['nodes', path[0], path[2]]);\n    return evalPlug && path[3] ? evalPlug.get(path[3]) : evalPlug;\n  }\n  return sceneGet(store, path);\n};\n\n/**\n * Returns an array of values for the matching properties\n *\n * (See {@tutorial sdk-SceneGraph})\n *\n * @param {(String|QueryObject|Path)} query The query object to filter on (or a found path)\n * @returns {any[]}\n * @public\n */\nexport function getAll(store, query) {\n  var paths = Array.isArray(query) ? query : filter(store, query);\n  return paths ? reduce((obj, path) => {\n    obj[path[0]] = sceneGet(store, path);\n    return obj;\n  }, {}, paths) : undefined;\n};\n\n/**\n * Returns the evaluated plug (and/or property).\n * @param {String} nodeId id of the node\n * @param {String} plug\n * @param {?String} key\n *\n * @example\n *\n * // Return the calculated transform\n * ctx.getEval('Box','Transfrom','translation');\n * // Return the orbitTarget for the scene camera\n * ctx.getEval(true, 'Player', 'orbitTarget');\n */\nexport function getEval(store, nodeId, plug, key) {\n  return get(store, key ? [nodeId, plug, key] : [nodeId, plug]);\n};\n\n/**\n * Get the world transform for a node.\n *\n * @param {String} id\n * @public\n * @returns {?THREE.Matrix4}\n */\nexport function getWorldTransform(store, id) {\n  const transform = get(store, { id, evalPlug: 'Transform' });\n  if (!transform) return null;\n\n  const localTransform = transform.get('transform');\n  const parent = store.getIn(['sceneGraph',id,'parent'])\n  const parentTransform = parent && getWorldTransform(store, parent);\n  return parentTransform ? new THREE.Matrix4().copy(parentTransform).multiply(localTransform) : new THREE.Matrix4().copy(localTransform);\n}\n\n/**\n * Get the local transform for a node.\n *\n * @returns {?THREE.Matrix4}\n */\nexport function getLocalTransform(transform) {\n  const zero = new THREE.Vector3(0,0,0);\n\n  const translation = transform.get('translation');\n\n  const rotation = transform.get('rotation');\n  const rotateOrder = transform.get('rotateOrder');\n  const preRotation = transform.get('preRotation');\n  const rotatePivotOffset = transform.get('rotatePivotOffset');\n  const localRotatePivot = transform.get('localRotatePivot');\n\n  const scale = transform.get('scale');\n  const scalePivotOffset = transform.get('scalePivotOffset');\n  const localScalePivot = transform.get('localScalePivot');\n\n  const shear = transform.get('shear');\n\n  let matrixStack = [];\n\n  const translationM = new THREE.Matrix4()\n      .makeTranslation(translation.x, translation.y, translation.z);\n  matrixStack.push(translationM);\n\n  const rotatePivotOffestM = new THREE.Matrix4();\n  if(!rotatePivotOffset.equals(zero)){\n    rotatePivotOffestM.makeTranslation(rotatePivotOffset.x, rotatePivotOffset.y, rotatePivotOffset.z);\n    matrixStack.push(rotatePivotOffestM);\n  }\n\n  const localRotatePivotM = new THREE.Matrix4();\n  const invLocalRotatePivotM = new THREE.Matrix4();\n  let localRotatePivotFlag = false;\n  if(!localRotatePivot.equals(zero)){\n    localRotatePivotM.makeTranslation(localRotatePivot.x, localRotatePivot.y, localRotatePivot.z);\n    matrixStack.push(localRotatePivotM);\n    invLocalRotatePivotM.getInverse(localRotatePivotM, true);\n    localRotatePivotFlag =true;\n  }\n\n  const preRotationM = new THREE.Matrix4();\n  if(!preRotation.equals(zero)){\n    const localRotationRadians = new THREE.Vector3().copy(preRotation).multiplyScalar(Math.PI / 180);\n    preRotationM.makeRotationFromEuler(new THREE.Euler(\n      localRotationRadians.x, localRotationRadians.y, localRotationRadians.z, rotateOrder\n    ));\n    matrixStack.push(preRotationM);\n  }\n\n  const rotationRadians = new THREE.Vector3().copy(rotation).multiplyScalar(Math.PI / 180);\n  const rotationM = new THREE.Matrix4()\n    .makeRotationFromEuler(new THREE.Euler(rotationRadians.x, rotationRadians.y, rotationRadians.z, rotateOrder));\n  matrixStack.push(rotationM);\n\n  if(localRotatePivotFlag) matrixStack.push(invLocalRotatePivotM);\n\n  const scalePivotOffsetM = new THREE.Matrix4();\n  if(!scalePivotOffset.equals(zero)){\n    scalePivotOffsetM.makeTranslation(scalePivotOffset.x, scalePivotOffset.y, scalePivotOffset.z);\n    matrixStack.push(scalePivotOffsetM);\n  }\n\n  const localScalePivotM = new THREE.Matrix4();\n  const invLocalScalePivotM = new THREE.Matrix4();\n  let localScalePivotFlag = false;\n  if(!localScalePivot.equals(zero)){\n    localScalePivotM.makeTranslation(localScalePivot.x, localScalePivot.y, localScalePivot.z);\n    matrixStack.push(localScalePivotM);\n    invLocalScalePivotM.getInverse(localScalePivotM, true);\n    localScalePivotFlag =true;\n  }\n\n  const sX = shear.x, sY = shear.y, sZ = shear.z;\n  const shearM = new THREE.Matrix4().set(\n    1 , sX, sY, 0 ,\n    0 , 1 , sZ, 0 ,\n    0 , 0 , 1 , 0 ,\n    0 , 0 , 0 , 1\n  ); //.makeShear(new THREE.Vector3(0, 0, 0));\n  matrixStack.push(shearM);\n\n  const scaleM = new THREE.Matrix4().makeScale(scale.x, scale.y, scale.z);\n  matrixStack.push(scaleM);\n\n  if(localScalePivotFlag) matrixStack.push(invLocalScalePivotM);\n\n  const localTransform = new THREE.Matrix4().multiplyMatricesList(matrixStack);\n  return localTransform;\n}\n\n/**\n * Sets the property at path to value.\n *\n * (See {@tutorial sdk-SceneGraph})\n *\n * @param {(Path|QueryObject|String)} query The query object to filter on (or a string that gets converted to a query object).\n * @param {any} value The value to set, the type must match the property being set.\n * @public\n */\nexport function set(query, value) {\n  return (store) => {\n    const path = Array.isArray(query) ? query : find(store, query);\n    if (!path) return console.warn('No matching query', query);\n    if (path.length === 3) {\n      if (typeof value !== 'object') throw new Error('If no property is set, expect an object to merge into the operator');\n      return store.dispatch(merge(path, value));\n    } else if (path.length === 4) {\n      return store.dispatch(sceneSet(path, value));\n    } else if (path.length === 2) {\n      if (path[1] !== 'name') throw new Error('Can only set node name');\n      return store.dispatch(sceneSet(path, value));\n    }\n  };\n};\n\n/**\n * Given an array of paths, will set the `value` on each path.\n * This can be combined with `find` to set a number of properties at once.\n *\n * (See {@tutorial sdk-SceneGraph})\n *\n * @public\n * @param {(Path[]|QueryObject|String)} query An array of path arrays, or a QueryObject\n * @param {any} value The value to set the properties to.\n *\n * @example\n *\n * // Move all boxes to the origin\n * var paths = ctx.find('Box*', 'Transform', 'translation');\n * setAll(paths, {x: 0, y: 0, z: 0});\n *\n */\nexport function setAll(query, value) {\n  //if (!Array.isArray(paths)) return Promise.reject('paths must be an array');\n  return (store) => {\n    const paths = Array.isArray(query) ? query : filter(store, query);\n    //console.log('ctx.setAll', paths, value);\n    return Promise.all(map((path) => store.dispatch(set(path, value)), paths));\n  }\n};\n\n/*\n * Returns an array of nodes with warnings in the scene graph.\n * @private\n */\nexport function getWarnings(store) {\n  return store.get('sceneGraph').map((node) => {\n    return (node.get('warnings') && node.get('warnings').size) ? node : null\n  }).filter((obj) => !!obj);\n}\n\nexport function setVRCamera(query){\n  return (store) => {\n    query.type='Camera';\n    const newVRCamera = find(store, query);\n    store.dispatch(setSceneVRCamera(newVRCamera));\n  }\n}\n\n/**\n * Given a query, clone these nodes. Without options, these nodes will be cloned\n * in place\n *\n * @public\n * @param {(QueryObject|String|Path[])} query A list of nodes (from filter), or query that will find a list of nodes to clone\n * @param {Object} options\n * @param {String?} options.to The scene being cloned to (default is the active scene)\n * @param {String?} options.withNull Add a null to clone the nodes to\n * @param {Object?} options.includeDependencies Clone dependencies (default true)\n *\n * @example\n *\n * // Clone all nodes from Objects on import scene into active scene\n * scene.clone({from: {id: importId, child: 'Objects'}});\n *\n * // Clone children of a null to a new null\n * scene.clone({from: {id: importId, child: 'Objects'}}, {withNull: 'New Parent Null'});\n *\n * // Clone children, without also cloning dependencies.\n *\n *\n * // Return the path to the transform operator\n * scene.find('Box','Transform','translation'); -> ['uuid','Transform',0]\n * // Match the first node that starts with Box\n * scene.find('Box*');\n *\n */\nexport function clone(query, options={}) {\n  if (options.cloneDependencies === undefined) options.cloneDependencies = true;\n\n  return (store) => {\n    const paths = Array.isArray(query) ? query : filter(store, query);\n    if (!paths.length) {\n      console.warning('No match for clone: ', query);\n      return Promise.resolve(true);\n    }\n\n    const fromSceneId = findRoot(store, paths[0]);\n    const toSceneId = options.to || store.getIn(['sceneIO', 'id']);\n    const fromObjectsId = find(store, {id: fromSceneId, child: 'Objects'});\n    const toObjectsId = find(store, {id: toSceneId, child: 'Objects'});\n\n    const nodeMap = {\n      [fromObjectsId]: toObjectsId,\n      [find(store, {id: fromSceneId, child: 'MaterialLibrary'})]: find(store, {id: toSceneId, child: 'MaterialLibrary'}),\n    };\n\n    const nullNode = options.withNull ?  store.dispatch(addNode({\n      name: options.withNull,\n      parent: toObjectsId,\n      type: 'Null',\n      plugs: {\n        Transform: [['Transform', {}]],\n      },\n    })) : Promise.resolve(null);\n\n    return nullNode.then((nullNodeId) => {\n      if (nullNodeId) nodeMap[fromObjectsId] = nullNodeId;\n      return store.dispatch(sceneClone(paths, nodeMap, {cloneDependencies: options.cloneDependencies})).then((cloneMap) => {\n        if (nullNodeId) cloneMap[options.withNull] = nullNodeId;\n        return cloneMap;\n      });\n    });\n  }\n}\nexport function pruneAssets() {\n  return (store) => {\n    const usedAssets = {};\n    const nodes = filter(store, { includeParent: true });\n\n    function storeFileRefs(id) {\n      store.getIn(['sceneGraph', id, 'plugs']).forEach((ops, plug) => {\n        ops.forEach((op, opIdx) => {\n          op.getFileReferences().forEach((ref, key) => {\n            const refId = ref.get('id');\n            if (store.getIn(['assets', refId])) {\n              usedAssets[refId] = true;\n            }\n          });\n        });\n      });\n    };\n\n    nodes.forEach(storeFileRefs);\n\n    return Promise.all(filterAssets(store).map(function (asset) {\n      return !usedAssets[asset.get('id')] &&\n        store.dispatch(removeFile(asset.get('id')));\n    }));\n  }\n}\n\nexport function exportJSON(store, sceneId) {\n  var sceneId = sceneId || store.getIn(['sceneIO','id'])\n  var nodes = filter(store, { from: { id: sceneId }, includeParent: true });\n  return {\n    sceneGraph: exportSceneJSON(store, nodes),\n    assets: exportAssetsJSON(store),\n  }\n};\n\n\nconst publicApi = {\n  actions: { set, setAll, clone, pruneAssets, setVRCamera },\n  selectors: { get, getAll, getWorldTransform, find, filter, getWarnings, exportJSON }\n};\n\nexport default publicApi;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/scene.js\n **/","import { Map } from 'immutable';\nimport { forEach } from 'ramda';\nimport { mapDiff, iterDiff } from './immutablediff';\nimport { iterateDepthFirst } from './iteration';\nimport THREE from 'three';\nimport { virtualCameraId, vrCameraId } from '../sceneGraph';\nimport { isSceneLoaded } from '../sceneIO';\n\nconst initialEvalSceneGraph = Map({\n  loaded: false,\n  nodes: Map(),\n  references: Map(),\n  referencesFrom: Map(),\n  loadedFiles: Map(),\n  fileReferences: Map(),\n  scene: Map()\n});\n\nlet doLog = false;\nfunction log(...args) {\n  if (doLog) console.log(...args);\n}\n\nfunction toPlugKey(plug, opIndex, key) { return `${plug}:${opIndex}:${key}` }\n\nexport function updateGraph(store, inputEvalSceneGraph = initialEvalSceneGraph) {\n  // let start = new Date();\n  let evalSceneGraph = inputEvalSceneGraph;\n\n  const sceneId = store.getIn(['sceneIO', 'id']); // getSceneId\n  if (!sceneId) return evalSceneGraph;\n\n  const scene = store.get('sceneGraph');\n  const prevScene = evalSceneGraph.get('scene');\n  const loadedFiles = store.getIn(['sceneIO','loadedFiles']);\n  const nowLoaded = !evalSceneGraph.get('loaded') && isSceneLoaded(store);\n  const worldTransforms = {};\n\n  const toUpdate = {};\n  const toDelete = {};\n  const updating = {};\n\n  function getPlug(nodeId, sourcePlug, opIndex) {\n    return (fromKey, id, destPlug) => {\n      //console.log('getPlug: ', nodeId, sourcePlug, opIndex, fromKey, id, destPlug);\n      if (updating[id]) {\n        console.error('Circular reference, updating', scene.getIn([id, 'name']), 'from', scene.getIn([nodeId, 'name']))\n        throw new Error('Circular reference');\n      }\n      if (toUpdate[id]) updateNode(id, toUpdate[id]);\n      addReference(id, {id: nodeId, sourcePlug, destPlug}, toPlugKey(destPlug, opIndex, fromKey));\n      var plugResult = evalSceneGraph.getIn(['nodes', id, destPlug]);\n      return plugResult ? plugResult.set('id', id) : null;\n    }\n  };\n\n  function getWorldTransform(id) {\n    if (worldTransforms[id]) return worldTransforms[id];\n\n    if (toUpdate[id] && !updating[id]) updateNode(id, toUpdate[id]);\n    const localTransform = evalSceneGraph.getIn(['nodes', id, 'Transform', 'transform']);\n    if (!localTransform) return null;\n\n    const parent = scene.getIn([id, 'parent']);\n    const parentTransform = parent && getWorldTransform(parent);\n    worldTransforms[id] = parentTransform\n      ? new THREE.Matrix4().copy(parentTransform).multiply(localTransform)\n      : new THREE.Matrix4().copy(localTransform);\n    return worldTransforms[id];\n  }\n\n\n  const properties = {\n    Vec3: (val, key) => {\n      return val && new THREE.Vector3(val.x, val.y, val.z);\n    },\n\n    Color: (val) => {\n      return val && new THREE.Color(val.r, val.g, val.b);\n    },\n\n    Node: (val, key, nodeId, sourcePlug, opIndex) => {\n      if (!val) return null;\n      const id = val.get('id');\n      if (updating[id]) throw new Error('Circular reference');\n      if (toUpdate[id]) updateNode(id, toUpdate[id]);\n      addReference(id, {id: nodeId, sourcePlug}, toPlugKey(sourcePlug, opIndex, key));\n      return evalSceneGraph.getIn(['nodes', id])\n    },\n\n    Plug: (val, key, nodeId, sourcePlug, opIndex) => {\n      if (!val) return null;\n      return getPlug(nodeId, sourcePlug, opIndex)(key, val.get('id'), val.get('plug'));\n    },\n\n    Image: (val, key, nodeId, sourcePlug, opIndex) => {\n      if (val) addFileReference(val.get('id'), {id: nodeId, sourcePlug}, toPlugKey(sourcePlug, opIndex, key));\n      // console.log('image property', val && val.toJS());\n      return val;\n    },\n\n    File: (val, key, nodeId, sourcePlug, opIndex) => {\n      if (val) {\n        addFileReference(val.get('id'), {id: nodeId, sourcePlug}, toPlugKey(sourcePlug, opIndex, key));\n      }\n      // console.log('image property', val && val.toJS());\n      return val;\n    },\n\n    Binary: (val, key, nodeId, sourcePlug, opIndex) => {\n      if (val) {\n        addFileReference(val.get('id'), {id: nodeId, sourcePlug}, toPlugKey(sourcePlug, opIndex, key));\n      }\n      // console.log('image property', val && val.toJS());\n      return val;\n    },\n\n    NodeList: (list, key, nodeId, sourcePlug, opIndex) => {\n      //console.log('NodeList', val.toJS(), key, nodeId);\n      if (!list) return null;\n      const result = list.map((ref) => {\n        const id = ref.get('id');\n        if (updating[id]) throw new Error('Circular reference');\n        if (toUpdate[id]) updateNode(id, toUpdate[id]);\n        return evalSceneGraph.getIn(['nodes', id])\n      });\n      addReferences(list, {id: nodeId, sourcePlug}, toPlugKey(sourcePlug, opIndex, key));\n      return result;\n    },\n  }\n\n\n  function addFileReference(fileId, from, key) {\n    if (!evalSceneGraph.getIn(['fileReferences', fileId])) evalSceneGraph = evalSceneGraph.setIn(['fileReferences', fileId], Map());\n    evalSceneGraph = evalSceneGraph.setIn(['fileReferences', fileId, `${from.id}:${key}`], from);\n  };\n\n  function addReference(toId, from, key) {\n    const oldRef = evalSceneGraph.getIn(['references', from.id, key]);\n    if (oldRef && oldRef === toId) return;\n\n    if (!evalSceneGraph.getIn(['references', from.id])) evalSceneGraph = evalSceneGraph.setIn(['references', from.id], Map());\n    if (!evalSceneGraph.getIn(['referencesFrom', toId])) evalSceneGraph = evalSceneGraph.setIn(['referencesFrom', toId], Map());\n\n    // console.log('addReference', toId, fromId, key, oldRefId, oldRefId === toId);\n\n    if (oldRef) {\n      evalSceneGraph = evalSceneGraph.deleteIn(['referencesFrom', oldRef, `${from.id}:${key}`]);\n   }\n    evalSceneGraph = evalSceneGraph.setIn(['referencesFrom', toId, `${from.id}:${key}`], from);\n    evalSceneGraph = evalSceneGraph.setIn(['references', from.id, key], toId);\n  }\n\n  // Add a reference list\n  function addReferences(toIds, from, key) {\n    const oldRef = evalSceneGraph.getIn(['references', from.id, key]);\n    if (oldRef && oldRef === toIds) return;\n\n    if (!evalSceneGraph.getIn(['references', from.id])) evalSceneGraph = evalSceneGraph.setIn(['references', from.id], Map());\n\n    toIds.forEach((toIdRef) => {\n      const toId = toIdRef.get('id');\n      if (!evalSceneGraph.getIn(['referencesFrom', toId])) evalSceneGraph = evalSceneGraph.setIn(['referencesFrom', toId], Map());\n      evalSceneGraph = evalSceneGraph.setIn(['referencesFrom', toId, `${from.id}:${key}`], from);\n    });\n\n    evalSceneGraph = evalSceneGraph.setIn(['references', from.id, key], toIds);\n  }\n\n  function dgOp(op, nodeId, plug, opIndex) {\n    return {\n      get: function (key) {\n        let type = op.typeOf(key);\n        if (!properties[type]) {\n          return op.get(key);\n        }\n        return properties[type](op.get(key), key, nodeId, plug, opIndex);\n      },\n      // FIXME: Operator param shouldn't be required, wny?\n      mergeInto: function (operator, map) {\n        var intermediate = {};\n        for (var key of op.keys()) {\n          intermediate[key] = this.get(key);\n        }\n        return map.merge(intermediate);\n      },\n\n      toJS: function() {\n        return op.toJS();\n      },\n\n      getPlug: getPlug(nodeId, plug, opIndex),\n\n      getWorldTransform, //: getWorldTransform(nodeId, plug, opIndex),\n    }\n  };\n\n  function checkRefUpdate(id, plug) {\n    let refs = evalSceneGraph.getIn(['referencesFrom', id])\n    if (!refs) return;\n    //console.log('checkRefUpdate', scene.getIn([id,'name']), plug);\n    refs.forEach((ref, key) => {\n      //console.log('  toUpdate?', scene.getIn([ref.id, 'name']), ref.sourcePlug, ref.destPlug, !toUpdate[ref.id], (!plug || plug===ref.destPlug), key);\n      if (!plug || plug===ref.destPlug) {\n        toUpdate[ref.id] = toUpdate[ref.id] ? true : ref.sourcePlug;\n        checkRefUpdate(ref.id, ref.sourcePlug);\n      }\n    });\n    //console.log('<--');\n  }\n\n  // if the file has changed, check for nodes to update.\n  function checkFile(info) {\n    let id = info.key;\n    if (evalSceneGraph.getIn(['loadedFiles', id])) return;\n    var refs = evalSceneGraph.getIn(['fileReferences', id]);\n    if (!refs) return;\n    refs.forEach((ref, key) => {\n      if (!toUpdate[ref.id]) toUpdate[ref.id] = ref.sourcePlug;\n      else toUpdate[ref.id] = true;\n\n      checkRefUpdate(ref.id, ref.sourcePlug);\n    });\n  };\n\n  function needsUpdate({type, key}) {\n    //console.log('nedsUpdate: ', type, key, scene.getIn([key,'name']));\n    if (type === 'ADD') {\n      toUpdate[key] = true;\n    } else if (type === 'CHANGE') {\n      toUpdate[key] = true;\n    } else {\n      toDelete[key] = true;\n    }\n    checkRefUpdate(key);\n  };\n\n\n  function updateNode(id, updatePlug) {\n    const nodeName = scene.getIn([id,'name']);\n\n    //console.log('dg::updateNode', id, scene.getIn([id,'name']), updatePlug);\n    updating[id] = true;\n    const node = scene.get(id);\n    const prevNode = prevScene.get(id);\n\n    const prevResult = evalSceneGraph.getIn(['nodes', id]);\n    let result = Map({id});\n    let prevProperties = (prevResult && prevResult.get('Properties')) || Map();\n    let properties = Map();\n\n    function doUpdatePlug(ops, plug) {\n      let doUpdate = updatePlug === true || plug === updatePlug || !prevNode || ops !== prevNode.getIn(['plugs', plug]);\n      doUpdate = doUpdate || properties.get('visible') !== prevProperties.get('visible');\n      //console.log(' - ', plug, updatePlug, doUpdate);\n\n      if (doUpdate) {\n        //console.log('updatePlug: ', node.get('name'), plug);\n        result = result.set(plug, ops.reduce((result, op, idx) => {\n          return op.doUpdate(dgOp(op, id, plug, idx), result, {sceneId, node, store, properties});\n        }, Map()));\n      } else {\n        let prevPlugResult = prevResult ? prevResult.get(plug) : Map();\n        //console.log('Force update', updatePlug === plug, plug);\n        result = result.set(plug, (updatePlug === plug || updatePlug === true) ? prevPlugResult.set('__r', Math.random()) : prevPlugResult);\n      }\n\n      // Store the properties result, in order to pass to other operators.\n      if (plug === 'Properties') properties = result.get('Properties');\n    }\n\n    if (node.getIn(['plugs','Properties'])) doUpdatePlug(node.getIn(['plugs','Properties']), 'Properties');\n    if (node.getIn(['plugs','Transform'])) doUpdatePlug(node.getIn(['plugs','Transform']), 'Transform');\n\n    node.get('plugs').forEach((ops, plug) => {\n      if (plug !== 'Properties' && plug !== 'Transform') doUpdatePlug(ops, plug);\n    });\n\n    if (nodeName === 'Bone') {\n      console.log('set bone node result into evalSceneGraph');\n    }\n\n    evalSceneGraph = evalSceneGraph.setIn(['nodes',id], result);\n\n    delete updating[id];\n    delete toUpdate[id];\n  };\n\n  function deleteNode(id) {\n    evalSceneGraph = evalSceneGraph.delete(id);\n    if (evalSceneGraph.getIn(['referencesFrom', id])) {\n      evalSceneGraph = evalSceneGraph.deleteIn(['referencesFrom', id]);\n    }\n    if (evalSceneGraph.getIn(['references', id])) {\n      evalSceneGraph = evalSceneGraph.deleteIn(['references', id]);\n    }\n  }\n\n  forEach(checkFile, mapDiff(evalSceneGraph.get('loadedFiles'), loadedFiles));\n\n  if (nowLoaded) {\n    for (let node of iterateDepthFirst(scene, sceneId)) {\n      let id = node.get('id');\n      if (evalSceneGraph.getIn(['nodes', id, 'Properties', 'prefetch'])) {\n        //console.log('Update from prefetch: ', node.get('name'));\n        toUpdate[id] = node.get('type');\n      }\n    }\n  }\n\n  forEach(needsUpdate, iterDiff(evalSceneGraph.get('scene'), scene, sceneId, virtualCameraId));\n  forEach(needsUpdate, iterDiff(evalSceneGraph.get('scene'), scene, sceneId, vrCameraId));\n\n  for (let id of Object.keys(toDelete)) {\n    deleteNode(id);\n  }\n\n  // console.log('evalSceneGraph updating: ', Object.keys(toUpdate).length);\n  for (let id of Object.keys(toUpdate)) {\n    if (toUpdate[id]) updateNode(id, toUpdate[id]);\n  }\n\n  if (nowLoaded) evalSceneGraph = evalSceneGraph.set('loaded', true);\n\n  // Store the current files and sceneGraph used to calculate evalSceneGraph\n  return evalSceneGraph.merge({scene, loadedFiles});\n}\n\nexport function getEvalSceneGraph(store) {\n  return store.getDerived('evalSceneGraph', updateGraph);\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/utils/evalSceneGraph.js\n **/","import { iterateDepthFirst } from './iteration';\n\nexport function mapDiff(prev, next) {\n  var ops = [];\n  if (prev === next) return ops;\n\n  prev.forEach((prevValue, key) => {\n    if (next.has(key)) {\n      let nextValue = next.get(key);\n      if (nextValue !== prevValue) {\n        ops.push({type: 'CHANGE', key, from: prevValue, to: nextValue});\n      }\n    } else {\n      ops.push({type: 'REMOVE', key, value: prevValue});\n    }\n  });\n\n  next.forEach((value, key) => {\n    if (!prev.has(key)) {\n      ops.push({type: 'ADD', key, value})\n    }\n  });\n\n  return ops;\n}\n\nexport function mapIterable(prev, next, iteratorFn) {\n  var ops = [];\n  if (prev === next) return ops;\n\n  for (let prevNode of iteratorFn(prev)) {\n    let id = prevNode.get('id');\n\n    if (next.has(id)) {\n      let nextNode = next.get(id);\n      if (nextNode !== prevNode) {\n        ops.push({type: 'CHANGE', id, from: prevNode, to: nextNode});\n      }\n    } else {\n      ops.push({type: 'REMOVE', id, node: prevNode});\n    }\n  }\n\n  for (let node of iteratorFn(next)) {\n    let id = node.get('id');\n    if (!prev.has(id)) {\n      ops.push({type: 'ADD', id, node})\n    }\n  }\n\n  return ops;\n}\n\nexport function iterDiff(prevSceneGraph, nextSceneGraph, sceneId, cameraId) {\n  let ops = [];\n\n  for (let prevNode of iterateDepthFirst(prevSceneGraph, sceneId)) {\n    const id = prevNode.get('id');\n    const nextNode = nextSceneGraph.get(id);\n\n    if (nextNode) {\n      if (nextNode !== prevNode)ops.push({ type: 'CHANGE', key: id, from: prevNode, to: nextNode });\n    } else {\n      ops.push({ type: 'REMOVE', key: id, value: prevNode });\n    }\n  }\n\n  for (let nextNode of iterateDepthFirst(nextSceneGraph, sceneId)) {\n    const id = nextNode.get('id');\n    if (!prevSceneGraph.get(id)) {\n      ops.push({type: 'ADD', key: id, node: nextNode});\n    }\n  }\n\n  if (cameraId) {\n    const nextCameraNode = nextSceneGraph.get(cameraId);\n    const prevCameraNode = prevSceneGraph.get(cameraId);\n    if (prevCameraNode) {\n      if (nextCameraNode) {\n        ops.push({ type: 'CHANGE', key: cameraId, from: prevCameraNode, to: nextCameraNode });\n      } else {\n        ops.push({ type: 'REMOVE', key: cameraId, value: prevCameraNode });\n      }\n    } else if (nextCameraNode) {\n      ops.push({ type: 'ADD', key: cameraId, node: nextCameraNode });\n    }\n  }\n\n  return ops;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/utils/immutablediff.js\n **/","export function iterateDepthFirstWithFilter(state, id, conditionalFn) {\n  let node = id && state.get(id);\n  // console.log('iterateDepthFirst?', id, node && node.get('name'));\n  if (!node) return [];\n\n  let index = -1;\n  let children = node.get('children');\n  let childIterator;\n\n  let iterable = {\n    [Symbol.iterator]() {\n      let iterator = {\n        next() {\n          // console.log('next?', node.get('name'), index);\n          if (index === -1) {\n            index++;\n            return {value: node};\n          } else if (index < children.size) {\n            if (childIterator) {\n              let result = childIterator.next();\n              if (!result.done) return result;\n              else {\n                childIterator = null;\n                index++;\n                return this.next();\n              }\n            } else {\n              if (!conditionalFn || conditionalFn(state.get(children.get(index)))) {\n                childIterator = iterateDepthFirstWithFilter(state, children.get(index))[Symbol.iterator]();\n                return childIterator.next();\n              } else {\n                index++;\n                return this.next();\n              }\n            }\n          } else return {done: true};\n        }\n      };\n      return iterator;\n    }\n  }\n  return iterable;\n}\n\nexport function iterateDepthFirst(state, id) {\n  return iterateDepthFirstWithFilter(state, id);\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/utils/iteration.js\n **/","\nimport {Map,List} from 'immutable';\nimport createReducer from './utils/createReducer';\nimport { bindActions } from '../store/bindActionCreators';\nimport { curry, forEach, map, mapObjIndexed, omit } from 'ramda';\nimport { addNode } from './sceneGraph';\nimport { fetchText, addFile, getActiveAssets } from './assets';\nimport { addClip } from './animation';\nimport { LOAD_SCENE, LOADING_FILE, LOADED_FILE, LOADING_FILE_ERROR } from './actionTypes';\n\n/**\n * Loading, reading, exporting of the scene.\n *\n * @module sceneIO\n * @public\n */\n\nconst USE_SCENE='USE_SCENE';\nconst LOADING_SCENEGRAPH='LOADING_SCENEGRAPH';\nconst LOADED_SCENEGRAPH='LOADED_SCENEGRAPH';\nconst ERROR_LOADING_SCENEGRAPH='ERROR_LOADING_SCENEGRAPH';\nconst RENDERING_SCENE='RENDERING_SCENE';\nconst RENDERED_SCENE='RENDERED_SCENE';\nconst PRELOADED_SCENE='PRELOADED_SCENE';\nconst LOADED_SCENE='LOADED_SCENE';\nconst SCENE_ERROR='SCENE_ERROR';\nconst PRELOAD_COMMAND='PRELOAD_COMMAND';\n\nconst states = {\n  FAILED: -1,\n  UNKNOWN: 0,\n  LOADING_SCENEGRAPH: 1,\n  LOADED_SCENEGRAPH: 2,\n  RENDERING: 3,\n  PRELOADED: 4,\n  LOADED: 5,\n  RENDERED: 6,\n};\n\nconst initialState = Map({\n  id: null,       // Active scene id\n  errors: List(), // List of scene errors\n  state: states.UNKNOWN,\n  progress: 0,\n  loadingFiles: Map(),\n  loadedFiles: Map(),\n  loaded: false,\n  preloadCommands: List(),\n});\n\nfunction setProgress(state, createEvent) {\n  if (state.get('state') !== states.RENDERING) return state;\n\n  const loadingFiles = state.get('loadingFiles').size;\n  const loadedFiles = state.get('loadedFiles').size;\n  const totalFiles = loadingFiles + loadedFiles;\n  const progress = totalFiles === 0 ? 1 : (1 + loadedFiles/totalFiles) / 2;\n  //console.log('progress: ', loadingFiles, loadedFiles, progress);\n\n  if (progress < 1) {\n    createEvent('loading', progress);\n    return state.set('progress', progress);\n  }\n  createEvent('loading', 1);\n  return state.set('progress', 1);\n};\n\nconst reducer = createReducer(initialState, {\n  [USE_SCENE](state, id) {\n    return state.set('id', id);\n  },\n  [LOADING_SCENEGRAPH](state, id) {\n    return state.get('loaded') ? state : state.set('state', states.LOADING_SCENEGRAPH).set('progress', 1/4);\n  },\n  [LOADED_SCENEGRAPH](state, id) {\n    return state.get('loaded') ? state : state.set('state', states.LOADED_SCENEGRAPH).set('progress', 1/2);\n  },\n  [ERROR_LOADING_SCENEGRAPH](state, xhr, { action }) {\n    const { error } = action;\n    const msg = `Error Loading Scene: ${error.status} ${error.statusText}`; //' + (error && error.response ? ': '+error.response : '');\n    return state.updateIn(['errors'], List(), list => list.push(msg));\n  },\n  [RENDERING_SCENE](state, payload, {createEvent}) {\n    return setProgress(state.set('state', states.RENDERING), createEvent);\n  },\n  [LOADING_FILE](state, id) {\n    return state.setIn(['loadingFiles',id], true);\n  },\n  [LOADED_FILE](state, id, {createEvent}) {\n    return setProgress(state.deleteIn(['loadingFiles', id]).setIn(['loadedFiles', id], true), createEvent);\n  },\n  [PRELOADED_SCENE](state, _, {createEvent}) {\n    createEvent('preloaded');\n    return state.set('state', states.PRELOADED);\n  },\n  [PRELOAD_COMMAND](state, fn) {\n    return state.updateIn(['preloadCommands'], List(), list => list.push(fn));\n  },\n  [LOADED_SCENE](state, _, {createEvent}) {\n    createEvent('loaded');\n    return state.set('loaded', true);\n  },\n  [RENDERED_SCENE](state, _, {createEvent}) {\n    createEvent('rendered');\n    return state.set('state', states.RENDERED);\n  },\n  [SCENE_ERROR](state, msg) {\n    return state.updateIn(['errors'], List(), list => list.push(msg));\n  }\n});\n\n\n//export default function(store) {\n//  const selectors = { getOrFetchScene };\n//  const actions = { reportError, useScene, loadScene, fetchAndUse };\n//  return Object.assign({},\n//      map((sel) => sel(store), selectors),\n//      bindActions(store.dispatch, actions));\n//};\n\nconst apiRoot = __URLROOT__+'/api';\n\nexport function reportError(msg) {\n  return {type: SCENE_ERROR, payload: msg};\n}\n\n/**\n * sets the active scene.\n *\n * @param {string} id the scene uuid\n */\nexport function useScene(id) {\n  return {type: USE_SCENE, payload: id};\n}\n\n\n/**\n * Returns the active scene Id\n *\n * @public\n * @returns {uuid}\n *\n */\nexport function getSceneId(store) {\n  return store.getIn(['sceneIO', 'id']);\n};\n\n/**\n * Loads the published scene\n *\n * @public\n * @param {string} id the scene uuid.\n * @param {string} transitString the published, exported scene\n * @returns {Promise}\n *\n */\nexport function loadScene(id, transitString) {\n  return (store) => {\n    var payload = store.read(transitString);\n    return store.dispatch({type: LOAD_SCENE, payload});\n    //try {\n    //} catch (e) {\n    //  console.log('Error reading transit format', e);\n    //  return store.dispatch(errorLoadingScene(id));\n    //}\n  };\n}\n\nexport function errorLoadingScene(id) {\n  return reportError('Error Loading Scene');\n}\n\nexport function markRenderingScene() {\n  return { type: RENDERING_SCENE };\n}\n\nexport function markRenderedScene() {\n  return { type: RENDERED_SCENE }\n}\n\nexport function getOrFetchScene(id) {\n  return (store) => {\n    return store.callApi({\n      types: [LOADING_SCENEGRAPH,LOADED_SCENEGRAPH,ERROR_LOADING_SCENEGRAPH],\n      url: `${apiRoot}/scenes/${id}`,\n      payload: id\n    });\n  }\n};\n\n\n/**\n * Fetch the scene\n *\n * If `hash` is provided it will fetch directly from resources, otherwise it will fetch from\n * `/api/scenes/:uuid/published`.\n *\n *  @public\n *  @param {uuid} sceneId\n *  @param {String} hash - md5 hash of published content (Optional)\n *\n */\nexport function fetch(sceneId, hash) {\n  return (store) => {\n    if (store.getIn(['sceneGraph', sceneId])) return Promise.resolve(true);\n\n    var fetch = hash ?\n      fetchText(hash)(store) :\n      store.callApi({\n        contentType: 'text',\n        types: [LOADING_SCENEGRAPH,LOADED_SCENEGRAPH,ERROR_LOADING_SCENEGRAPH],\n        url: `${apiRoot}/scenes/${sceneId}/published`,\n        payload: sceneId\n      });\n\n    const promise = fetch.then((transit) => {\n      return store.dispatch(loadScene(sceneId, transit));\n    });\n\n    if (hash && __BROWSER__ && __GOOGLE_ANALYTICS_TOKEN__) {\n      store.callApi({\n        contentType: 'text',\n        method: 'POST',\n        url: `https://www.google-analytics.com/collect?v=1&tid=${__GOOGLE_ANALYTICS_TOKEN__}&cid=555&t=pageview&dh=${window.location.hostname}&dp=/player/v2/${sceneId}?static=${hash}`,\n      });\n    }\n\n    return promise;\n  };\n};\n\n/**\n * Fetch, Load and Use published scene\n *\n * If `hash` is provided it will fetch directly from resources, otherwise it will fetch from\n * `/api/scenes/:uuid/published`.\n *\n *  @public\n *  @param {uuid} sceneId\n *  @param {String} hash - md5 hash of published content (Optional)\n *\n */\nexport function fetchAndUse(sceneId, hash) {\n  return (store) => {\n    store.dispatch(useScene(sceneId));\n    return store.dispatch(fetch(sceneId, hash));\n  };\n};\n\nexport function loadingProgress({getIn, dispatch}) {\n  return getIn(['sceneIO','progress']);\n};\n\n/*\n * Have preloaded commands run, and are all assets loaded\n */\nexport function areAssetsLoaded(store) {\n  return store.getIn(['sceneIO', 'state']) >= states.PRELOADED && store.getIn(['sceneIO', 'loadingFiles']).size === 0;\n}\n\n\n/*\n * Are all assets loaded before preload commands are run\n */\nexport function areAssetsPreloaded(store) {\n  return store.getIn(['sceneIO', 'state']) >= states.RENDERING && store.getIn(['sceneIO', 'loadingFiles']).size === 0;\n}\n\nexport function isSceneLoaded(store) {\n  return store.getIn(['sceneIO','loaded']);\n}\nexport function isSceneRendered(store) {\n  return store.getIn(['sceneIO','state']) >= states.RENDERED;\n}\n\nexport function markPreloaded() {\n  return (store) => {\n    const preloadCommands = store.getIn(['sceneIO', 'preloadCommands']);\n\n    Promise.all(preloadCommands.map((fn) => {\n      return Promise.resolve(fn());\n    }).toArray()).then(() => {\n      store.dispatch({ type: PRELOADED_SCENE });\n    });\n  }\n}\n\nexport function preloadCommand(fn) {\n  return { type: PRELOAD_COMMAND, payload: fn };\n}\n\nexport function markLoaded() {\n  return { type: LOADED_SCENE };\n}\n\nexport function markLoadingFile(id) {\n  return { type: LOADING_FILE, payload: id };\n};\n\nexport function markLoadedFile(id) {\n  return { type: LOADED_FILE, payload: id };\n};\n\nfunction convertPlugs(plugArray) {\n  var plugs = {};\n  plugArray.forEach((plug) => {\n    plugs[plug.type] = plug.operators.map((op) => {\n      let name = op.name;\n      let type = op.type || name;\n      return [type, omit(['_id','primitive','name','type'], op), name];\n    });\n  })\n  return plugs;\n};\n\nconst convertNode = curry(function(store, sceneJSON, parent, json) {\n  const id = json._id;\n  const name = json.name;\n  const type = json.type;\n\n  const plugs = convertPlugs(json.plugs);\n\n  store.dispatch(addNode({id, name, type, plugs, parent}));\n\n  forEach(convertNode(store, sceneJSON, id), json.nodes);\n});\n\nfunction convertFiles(store, files) {\n  forEach((file) => {\n    store.dispatch(addFile({id: file._id, ...omit(['_id', '__v'], file)}));\n  }, files);\n}\n\nexport function convertFromJSON(store, json) {\n  convertNode(store, json, null, json);\n  convertFiles(store, json.files);\n\n  mapObjIndexed((clip, id) => {\n    store.dispatch(addClip(clip, id));\n  }, json.clips);\n};\n\n// Load scene from old json format, do a client side conversion, and use\n// the new converted scene.\nexport function fetchConvertAndUse(sceneId) {\n  return (store) => {\n    if (!sceneId || sceneId.length !== 36) return store.dispatch(reportError('Unknown sceneId'));\n    return getOrFetchScene(sceneId)(store).then((result) => {\n      try {\n        convertFromJSON(store, result);\n        return store.dispatch(useScene(sceneId));\n      } catch (e) {\n        return store.dispatch(reportError(e.message));\n        console.log(e.stack);\n      }\n    }).catch((err) => {\n      return store.dispatch(reportError(err.responseText));\n    });\n  }\n}\n\nexport function writeScene(store) {\n  return store.write({\n    scene: store.get('sceneGraph'),\n    assets: getActiveAssets(store),\n    clips: store.getIn(['animation','clips']),\n  });\n}\n\nexport function exportJSON(store) {\n  return {\n    scene: store.get('sceneGraph').toJS(),\n    assets: getActiveAssets(store).toJS()\n  };\n}\n\nexport function numErrors(store) {\n  return store.getIn(['sceneIO','errors']).size;\n}\n\nexport function getErrors(store) {\n  return store.getIn(['sceneIO','errors']);\n}\n\nconst publicApi = {\n  reducer,\n  actions: { fetch, fetchAndUse, loadScene, useScene, reportError, preloadCommand },\n  selectors: { isSceneLoaded, isSceneRendered, loadingProgress, getErrors, numErrors, getSceneId }\n};\nexport default publicApi;\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/sceneIO.js\n **/","import { map, curry } from 'ramda';\n\nfunction bindActionCreator(dispatch, actionCreator) {\n  return (...args) => dispatch(actionCreator(...args));\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nexport default function bindActionCreators(dispatch, actionCreators) {\n  return map(map(curry(bindActionCreator)(dispatch)), actionCreators);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/bindActionCreators.js\n **/","\n// shared:\n//\nexport const LOAD_SCENE='LOAD_SCENE';\nexport const ADD_NODE='ADDNODE';\nexport const ADD_VR_CAMERA='ADD_VR_CAMERA';\nexport const SET_VR_CAMERA='SET_VR_CAMERA';\nexport const DELETE_NODE='DELETE_NODE';\nexport const LOADING_FILE='LOADING_FILE';\nexport const LOADED_FILE='LOADED_FILE';\nexport const LOADING_FILE_ERROR='LOADING_FILE_ERROR';\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/actionTypes.js\n **/","import { all, contains, flatten } from 'ramda';\nimport { List } from 'immutable';\n\nconst uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n\n/**\n * Test whether a string is a uuid or not.\n * @param {String} id\n */\nexport function isUuid(id) {\n  return uuidRegex.test(id);\n};\n\nfunction pathToRegExp(query) {\n  if (query instanceof RegExp) return query;\n  query = query.replace(/\\*/g, '(.*)').replace(/^\\\"|\\\"$/g, \"\");\n  return new RegExp('^' + query + '$', 'i');\n};\n\nconst re = {\n  bareName: \"^([^!%\\[#:]*)*\",    // Match the name, up to % or #\n  type: \"(?:\\%([^#!:]*))*\",      // Match the type\n  filter: \"(?::([^#:]*))*\",     // Any filter?\n  evalPlug: \"(?:\\!([^#\\[]*))*\",  // Evaluated plug name\n  plugName: \"(?:\\#([^\\[]*))*\",  // Plug name\n  attrs: \"(.*)\"                 // Any attribute selectors (entire match)\n};\n\nconst queryRegex = new RegExp(\n  re.bareName + re.type + re.filter + re.evalPlug + re.plugName + re.attrs\n);\n\nconst queryRegexNoName = new RegExp(\n  \"()\" + re.type + re.filter + re.evalPlug + re.plugName + re.attrs\n);\n\nconst attrsRegex = /(?:\\[([^\\]]*)\\])/g\n\n/*\n * Parse \"[translation][name='Transform']\" and turn it into\n * operator/property/properties fields for matching.\n */\nfunction parseOperatorAttributes(attrsString) {\n// Take \"[translation][name='Transform']\" and convert it into\n// a filter function that will match the specific operator\n  var items, match;\n\n  let property;\n  let properties;\n\n  while ((match=attrsRegex.exec(attrsString)) !== null) {\n    items = match[1].split('=');\n    if (items.length === 2) {\n      if (!properties) properties = {};\n      properties[items[0]] = items[1];\n    } else {\n      property = items[0];\n    }\n  }\n\n  return { property, properties };\n};\n\n\nfunction buildQueryObjectFromString(query) {\n  // Support looking for the active scene node with '~'.\n  const scene = query[0] === '~';\n  const quotedIdx = !scene && query[0] === '\"' && query.slice(1).indexOf('\"');\n  const quotedName = quotedIdx && quotedIdx !== -1;\n\n  const matches = (quotedName || scene) ?\n      queryRegexNoName.exec(query.slice(scene ? 1 : quotedIdx+2)) :\n      queryRegex.exec(query);\n  const name = quotedName ? query.slice(1, quotedIdx+1) : (scene ? false : matches[1]);\n  const type = matches[2];\n  const filter = matches[3];\n  const evalPlug = matches[4];\n  const plug = matches[5];\n  const attrs = matches[6];\n  const id = isUuid(name) ? name : undefined;\n  return { scene, id, name: (id || !name) ? undefined : pathToRegExp(name),\n    type, filter, evalPlug, plug, ...parseOperatorAttributes(attrs), includeParent: true };\n};\n\n/**\n * Takes a query string, and returns an object with the attributes we are looking\n * for.\n */\nexport function buildQueryObject(query) {\n  if (typeof query === 'string') return buildQueryObjectFromString(query);\n  if (typeof query === 'object') {\n    //if (typeof query.name === 'string' && query.name.indexOf('*') !== -1)\n    return Object.assign({}, query, {\n      name: query.name ? pathToRegExp(query.name) : undefined,\n      // include parent by default if no from query is specified\n      includeParent: query.includeParent === undefined ? !query.from : query.includeParent,\n    });\n  }\n  return {};\n}\n\n/*\n * Given a QueryObject, will return a matching path for this node, or\n * null if the node does not match.\n */\nexport function getMatch(node, queryObj, onlyNode) {\n  var nodeMatch = getNodeMatch(node, queryObj);\n  return !nodeMatch ? null : (onlyNode ? nodeMatch.get('id') : matchInside(node, queryObj));\n}\n\n/*\n * Given a QueryObject, will return the node if the node matches the\n * node query parameters (id, name, type).\n */\nfunction getNodeMatch(node, queryObj) {\n  if (queryObj.id !== undefined && queryObj.id !== node.get('id')) return null;\n  if (queryObj.name !== undefined && !queryObj.name.test(node.get('name'))) return null;\n  if (queryObj.type !== undefined) {\n    if (typeof queryObj.type === 'string') {\n      if (queryObj.type !== node.get('type')) return null;\n    } else if (Array.isArray(queryObj.type)) {\n      if (!contains(node.get('type'), queryObj.type)) return null;\n    }\n  }\n  if (queryObj.hasPlug !== undefined && !node.getIn(['plugs', queryObj.hasPlug])) return null;\n\n  return node;\n};\n\nfunction matchInside(node, queryObj) {\n  const { properties, property, operator, operatorIndex } = queryObj;\n\n  if (queryObj.evalPlug) {\n    return property ? [node.get('id'), 'eval', queryObj.evalPlug, property] :\n      [node.get('id'), 'eval', queryObj.evalPlug];\n  }\n\n  if (!queryObj.plug) {\n    if (property === 'name' || property === 'type') {\n      return [node.get('id'),property];\n    }\n    return node.get('id');\n  }\n\n  const plug = node.getIn(['plugs', queryObj.plug]);\n  if (!plug) return null;\n\n  const propKeys = properties && Object.keys(properties);\n\n  if (!properties  && !property && !operator && operatorIndex === undefined) {\n    return node.get('id'); // No operator query provided.\n  }\n  const idx = queryObj.operatorIndex !== undefined ? queryObj.operatorIndex :\n    plug.findIndex((op) => {\n      return (property ? op.has(property) : true) &&\n        (properties ?  all((k) => op.get(k) === properties[k], propKeys) : true);\n    });\n\n  if (idx === -1) return null;\n  return property ? [node.get('id'), queryObj.plug, idx, property] :\n    [node.get('id'), queryObj.plug, idx];\n};\n\n\nexport function matchChildren(store, node, queryObj, parentNodeToMatch) {\n  let results = [];\n\n  const parentMatch = parentNodeToMatch && getMatch(parentNodeToMatch, queryObj);\n  if (parentMatch) results.push(parentMatch);\n\n  (node.get('children') || List()).forEach((childId) => {\n    const childNode = store.getIn(['sceneGraph', childId]);\n    if (!childNode) throw new Error(`Invalid child for '${node.get('name')}' - ${childId}`);\n\n    const match = getMatch(childNode, queryObj);\n    if (match) results.push(match);\n    if (!queryObj.shallow) {\n      results = results.concat(matchChildren(store, childNode, queryObj));\n    }\n  });\n\n  return results;\n};\n\nexport function findChild(store, node, queryObj, parentNodeToMatch, onlyNode) {\n  let result;\n  if (parentNodeToMatch) {\n    result = getMatch(parentNodeToMatch, queryObj, onlyNode);\n    if (result) return result;\n  }\n  const match = (node.get('children') || List()).find((childId) => {\n    const childNode = store.getIn(['sceneGraph', childId]);\n    result = getMatch(childNode, queryObj, onlyNode);\n    if (result) return true;\n    result = !queryObj.shallow && findChild(store, childNode, queryObj, null, onlyNode);\n    if (result) return true;\n  });\n  return match ? result : null;\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/utils/selectors.js\n **/","\n// From: https://github.com/chenglou/tween-functions/blob/master/index.js\n// t: current time, b: beginning value, _c: final value, d: total duration\nconst tweenFunctions = {\n  linear: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * t / d + b;\n  },\n  easeInQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t + b;\n  },\n  easeOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (t /= d) * (t - 2) + b;\n  },\n  easeInOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t + b;\n    } else {\n      return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    }\n  },\n  easeInCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t + b;\n  },\n  easeOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  },\n  easeInOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * t + 2) + b;\n    }\n  },\n  easeInQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t + b;\n  },\n  easeOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  },\n  easeInOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t + b;\n    } else {\n      return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n    }\n  },\n  easeInQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  easeOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  },\n  easeInOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n    }\n  },\n  easeInSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  },\n  easeOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  },\n  easeInOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n  },\n  easeInExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    var _ref;\n    return (_ref = t === 0) !== null ? _ref : {\n      b: c * Math.pow(2, 10 * (t / d - 1)) + b\n    };\n  },\n  easeOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    var _ref;\n    return (_ref = t === d) !== null ? _ref : b + {\n      c: c * (-Math.pow(2, -10 * t / d) + 1) + b\n    };\n  },\n  easeInOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    if (t === 0) {\n      b;\n    }\n    if (t === d) {\n      b + c;\n    }\n    if ((t /= d / 2) < 1) {\n      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n    } else {\n      return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n    }\n  },\n  easeInCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  },\n  easeOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  },\n  easeInOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n    } else {\n      return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n    }\n  },\n  easeInElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      b;\n    } else if ((t /= d) === 1) {\n      b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n  },\n  easeOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      b;\n    } else if ((t /= d) === 1) {\n      b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n  },\n  easeInOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      b;\n    } else if ((t /= d / 2) === 2) {\n      b + c;\n    }\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    if (t < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    } else {\n      return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n    }\n  },\n  easeInBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  easeOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  },\n  easeInOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    if ((t /= d / 2) < 1) {\n      return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    }\n  },\n  easeInBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    v = tweenFunctions.easeOutBounce(d - t, 0, c, d);\n    return c - v + b;\n  },\n  easeOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d) < 1 / 2.75) {\n      return c * (7.5625 * t * t) + b;\n    } else if (t < 2 / 2.75) {\n      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n    } else if (t < 2.5 / 2.75) {\n      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n    } else {\n      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n    }\n  },\n  easeInOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    if (t < d / 2) {\n      v = tweenFunctions.easeInBounce(t * 2, 0, c, d);\n      return v * 0.5 + b;\n    } else {\n      v = tweenFunctions.easeOutBounce(t * 2 - d, 0, c, d);\n      return v * 0.5 + c * 0.5 + b;\n    }\n  }\n};\n\nexport default tweenFunctions;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/utils/tweenFunctions.js\n **/","import { Map, List } from 'immutable';\nimport createReducer from './utils/createReducer';\n\nconst SET_ANNOTATION_PROPERTIES='SET_ANNOTATION_PROPERTIES';\nconst USE_CUSTOM_ANNOTATION_FUNCTION='USE_CUSTOM_ANNOTATION_FUNCTION';\n\n/**\n * Annotations\n *\n * @module annotations\n * @public\n *\n */\n\nconst initialState = Map({\n  customAnnotationFn: null,\n});\n\nconst reducer = createReducer(initialState, {\n  [SET_ANNOTATION_PROPERTIES](state, {id, attrs}) {\n    let props = state.get('id') || Map();\n    return state.set(id, props.merge(attrs));\n  },\n  [USE_CUSTOM_ANNOTATION_FUNCTION](state, annotationFn) {\n    return state.set('customAnnotationFn', annotationFn);\n  },\n});\n\nexport function setAnnotationProperties(id, attrs) {\n  return {type: SET_ANNOTATION_PROPERTIES, payload: {id, attrs}};\n};\n\n/**\n * Open annotation node in the player.\n * @param {String} id - id of the annotation node.\n * @public\n */\nexport function openAnnotation(id) {\n  return {type: SET_ANNOTATION_PROPERTIES, payload: {id, attrs: {pinned: true, open: true}}};\n};\n\n/**\n * Close annotation node.\n * @param {String} id - id of the annotation node.\n * @public\n */\nexport function closeAnnotation(id) {\n  return {type: SET_ANNOTATION_PROPERTIES, payload: {id, attrs: {pinned: false, open: false}}};\n};\n\n/**\n * Use custom annotations. Set a custom function that will be called for every\n * annotation on every scene update. The arguments passed to this function\n * will be the [annotation object](global.html#Annotation), and the div that\n * any annotations may be created under. This div has `pointer-events` set\n * to none so that the scene below it will receive all mouse/touch events.\n * If you wish to handle events in your annotations, make sure to set `pointer-events`.\n *\n * @public\n * @param {Function} fn The function to be called for every annotation update.\n */\nexport function useCustomAnnotationFunction(fn) {\n  return {type: USE_CUSTOM_ANNOTATION_FUNCTION, payload: fn};\n};\n\nexport function getCustomAnnotationFunction(store) {\n  return store.getIn(['annotations', 'customAnnotationFn']);\n};\n\nconst publicApi = {\n  reducer,\n  actions: {\n    setAnnotationProperties, openAnnotation, closeAnnotation,\n    useCustomAnnotationFunction\n  },\n  selectors: { getCustomAnnotationFunction }\n};\n\nexport default publicApi;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/annotations.js\n **/","import THREE from 'three';\nimport {Map,List} from 'immutable';\nimport createReducer from './utils/createReducer';\nimport { get, getWorldTransform, set } from './scene';\nimport { queueAnimation } from './animation';\nimport { virtualCameraId, vrCameraId } from './sceneGraph';\nimport updateCameraLookAtTarget from '../translators/utils/updateCameraLookAtTarget';\nimport WEBVR from 'webvr';\n/**\n * This module supports the UI for the player.\n *\n * @module player\n * @public\n */\n\nexport const manipulators = {\n  orbit: 'orbit',\n  pan: 'pan',\n  zoom: 'zoom',\n  nodeRotate: 'nodeRotate',\n  nodeMove:'nodeMove',\n  nodeScale:'nodeScale'\n};\n\n\nconst USE_MANIPULATOR='USE_MANIPULATOR';\nconst ADD_TOOL='ADD_TOOL';\nconst REMOVE_TOOL='REMOVE_TOOL';\nconst SHOW_TOOL='SHOW_TOOL';\nconst HIDE_TOOL='HIDE_TOOL';\nconst SET_CAMERA_ATTRS='SET_CAMERA_ATTRS';\nconst SET_CAMERA_POSITION='SET_CAMERA_POSITION';\nconst SET_RECT='SET_RECT';\nconst DISPLAY_THUMBNAIL='DISPLAY_THUMBNAIL';\nconst SET_ACTIVE_COLOR='SET_ACTIVE_COLOR';\nconst SET_HOVER_COLOR='SET_HOVER_COLOR';\nconst SET_PLAYER_ELEMENT='SET_PLAYER_ELEMENT';\nconst REQUEST_FULL_SCREEN='REQUEST_FULL_SCREEN';\nconst EXIT_FULL_SCREEN='EXIT_FULL_SCREEN';\nconst SET_FULL_SCREEN='SET_FULL_SCREEN';\nconst REQUEST_NORMAL_MODE='REQUEST_NORMAL_MODE';\nconst REQUEST_VR_MODE='REQUEST_VR_MODE';\nconst REQUEST_LENTICULAR_MODE='REQUEST_LENTICULAR_MODE';\nconst ENABLE_DEVICE_TRACKING='ENABLE_DEVICE_TRACKING';\nconst DISABLE_DEVICE_TRACKING='DISABLE_DEVICE_TRACKING';\nconst SET_BACKGROUND_COLOR='SET_BACKGROUND_COLOR';\nconst ENABLE_MOUSE_CONTROLS='ENABLE_MOUSE_CONTROLS';\nconst DISABLE_MOUSE_CONTROLS='DISABLE_MOUSE_CONTROLS';\nconst REQUEST_STEREO_MODE='REQUEST_STEREO_MODE';\nconst REQUEST_PARALLAX_MODE='REQUEST_PARALLAX_MODE';\nconst EXIT_STEREOPARALLAX_MODE='EXIT_STEREOPARALLAX_MODE';\nconst SET_CONSTRAIN_CAMERA_RADIUS='SET_CONSTRAIN_CAMERA_RADIUS';\nconst SET_MANIPULATION_NODE='SET_MANIPULATION_NODE';\n\nconst initialState = Map({\n  activeColor: '#ffc85f',\n  hoverColor: '#C08618',\n  fullscreenBackgroundColor: '#FFF',\n  activeManipulator: manipulators.orbit,\n  tools: List(),\n  displayTools: Map({\n    orbit: true, pan: true, zoom: true, home: true, fullscreen: true,\n    vrMode: false, lenticularMode: false, deviceTracking: false,\n    nodeRotate:false, nodeMove:false, nodeScale:false\n  }),\n  enableTools: Map({\n    orbit: true, pan: true, zoom: true, home: true, fullscreen: true,\n    vrMode: true, lenticularMode: true, deviceTracking: true,\n    nodeRotate: true, nodeMove: true, nodeScale: true\n  }),\n  fullScreen: false,\n  renderingMode: 'normal',\n  deviceTracking: false,\n  camera: Map({\n    polarAngle: null, azimuthAngle: null, boundingRadius: null\n  }),\n  rect: Map({width: 400, height: 300}),\n  initialCameraWorldMatrix: null,\n  initialTargetWorldMatrix: null,\n  cameraWorldMatrix: null,\n  displayThumbnail: true,\n  playerElement: null,\n  canvasElement: null,\n  prevCamera: null,\n  orientationHandler: null,\n  constrainCameraRadius: null,\n  manipulationId: null,\n});\n\nfunction doRequestVRmode(el) {\n  window.navigator.getVRDisplays().then(function(displays) {\n    if (displays.length > 0) {\n      displays[0].requestPresent([{source: el}]);\n    }\n  });\n\n}\n\nfunction doExitVRmode() {\n  window.navigator.getVRDisplays().then(function(displays) {\n    if (displays.length > 0) {\n      displays[0].exitPresent();\n    }\n  });\n}\n\nconst reducer = createReducer(initialState, {\n  [USE_MANIPULATOR](state, manipulator) {\n    return state.set('activeManipulator', manipulator);\n  },\n  [ADD_TOOL](state, {name, tool}) {\n    if (typeof state.getIn(['displayTools', name]) === 'undefined'){\n      state = state.setIn(['displayTools', name], true);\n    }\n    return state.updateIn(['tools'], List(), (list) => list.push(Map({name, tool})));\n  },\n  [REMOVE_TOOL](state, name) {\n    return state.setIn(['displayTools', name], false).updateIn(['tools'], List(), (list) => {\n      const idx = list.findIndex((m) => m.get('name') === name);\n      return idx===-1 ? list : list.delete(idx);\n    });\n  },\n  [SHOW_TOOL](state, name) {\n    return state.setIn(['displayTools', name], true);\n  },\n  [HIDE_TOOL](state, name) {\n    return state.setIn(['displayTools', name], false);\n  },\n  [SET_CAMERA_ATTRS](state, attrs) {\n    return state.mergeIn(['camera'], attrs);\n  },\n  [SET_RECT](state, attrs) {\n    return state.mergeIn(['rect'], attrs);\n  },\n  [SET_CAMERA_POSITION](state, attrs) {\n    return state.merge(attrs);\n  },\n  [SET_PLAYER_ELEMENT](state,  { playerEl, canvasEl }) {\n    return state.set('playerElement', playerEl).set('canvasElement', canvasEl);\n  },\n  [DISPLAY_THUMBNAIL](state, display) {\n    return state.set('displayThumbnail', !!display);\n  },\n  [SET_ACTIVE_COLOR](state, color) {\n    return state.set('activeColor', color);\n  },\n  [SET_HOVER_COLOR](state, color) {\n    return state.set('hoverColor', color);\n  },\n  [SET_BACKGROUND_COLOR](state, color) {\n    return state.set('fullscreenBackgroundColor', color);\n  },\n  [REQUEST_FULL_SCREEN](state) {\n    return state.set('fullScreen', true);\n  },\n  [EXIT_FULL_SCREEN](state) {\n    return state.set('fullScreen', false);\n  },\n  [SET_FULL_SCREEN](state, fullScreen) {\n    return state.set('fullScreen', fullScreen);\n  },\n  [REQUEST_LENTICULAR_MODE](state, { trackDevice, cameraId }) {\n    return state.merge({\n      renderingMode: 'lenticular',\n      deviceTracking: trackDevice,\n      prevCamera: cameraId\n    });\n  },\n  [REQUEST_VR_MODE](state, { cameraId }) {\n    return state.merge({\n      renderingMode: 'vr',\n      deviceTracking: true,\n      prevCamera: cameraId\n    });\n  },\n  [REQUEST_NORMAL_MODE](state) {\n    return state.merge({\n      renderingMode: 'normal',\n      deviceTracking: false,\n    });\n  },\n  [ENABLE_DEVICE_TRACKING](state) {\n    return state.set('deviceTracking', true);\n  },\n  [DISABLE_DEVICE_TRACKING](state) {\n    return state.set('deviceTracking', false);\n  },\n  [ENABLE_MOUSE_CONTROLS](state) {\n    return state.mergeIn(['enableTools'], {\n      orbit: true,\n      pan: true,\n      zoom: true\n    });\n  },\n  [DISABLE_MOUSE_CONTROLS](state){\n    return state.mergeIn(['enableTools'], {\n      orbit: false,\n      pan: false,\n      zoom: false\n    });\n  },\n  [SET_CONSTRAIN_CAMERA_RADIUS](state, radius){\n    return state.set('constrainCameraRadius', radius);\n  },\n  [SET_MANIPULATION_NODE](state, id){\n    return state.set('manipulationId', id);\n  },\n});\n\nexport function useManipulator(manipulator) {\n  return {type: USE_MANIPULATOR, payload: manipulator};\n}\n\n/**\n * Add a tool (See {@tutorial sdk-Tools})\n *\n * @public\n * @param {Tool} Tool\n * @param {String} name provide a name for the tool to allow removing it.\n * @returns {Promise}\n *\n */\nexport function addTool(tool, name) {\n  return { type: ADD_TOOL, payload: { name, tool } };\n}\n\n/**\n * Remove a tool (See {@tutorial sdk-Tools})\n *\n * @public\n * @param {String} name The name of the tool to remove\n * @returns {Promise}\n */\nexport function removeTool(name) {\n  return { type: REMOVE_TOOL, payload: name };\n}\n\nexport function showTool(name) {\n  return {type: SHOW_TOOL, payload: name};\n};\n\nexport function hideTool(name) {\n  return {type: HIDE_TOOL, payload: name};\n};\n\nexport function getRect(store) {\n  return store.getIn(['player', 'rect']).toJS();\n};\n\nexport function setRect(attrs) {\n  return {type: SET_RECT, payload: attrs};\n};\n\nexport function setCameraAttrs(attrs) {\n  return {type: SET_CAMERA_ATTRS, payload: attrs};\n};\n\nexport function getCameraAttrs(store) {\n  return store.getIn(['player','camera']);\n};\n\nexport function getCameraPosition(store) {\n  return store.getIn(['player','cameraWorldMatrix']);\n};\n\nexport function useCamera(id) {\n  return set({ scene: true, plug: 'Player', property: 'camera' }, id);\n};\n\nexport function getCamera(store) {\n  const camera = get(store, { plug: 'Player', property: 'camera' });\n  if (camera) return camera.get('id');\n  const vrMode = store.getIn(['Player', 'renderingMode']);\n  return (vrMode ==='stereo' || vrMode==='parallax') ? vrCameraId : virtualCameraId;\n};\n\nexport function getTools(store) {\n  return store.getIn(['player','tools']);\n};\n\nexport function setCameraPosition(attrs) {\n  return {type: SET_CAMERA_POSITION, payload: attrs};\n};\n\nexport function displayTool(store, key) {\n  let displayMode = true;\n  if(store.getIn(['player', 'renderingMode'])==='vr' && key!=='vrMode') displayMode = false;\n  return store.getIn(['player', 'displayTools', key])&&store.getIn(['player', 'enableTools', key]) && displayMode;\n};\n\nexport function getInitialCameraPosition(store) {\n  return {\n    initialCameraWorldMatrix: store.getIn(['player', 'initialCameraWorldMatrix']),\n    initialTargetWorldMatrix: store.getIn(['player', 'initialTargetWorldMatrix'])\n  };\n};\n\n/**\n *\n * Enable fullscreen mode.\n * @public\n *\n */\nexport function requestFullscreen() {\n  return (store) => {\n    const playerEl = store.getIn(['player', 'playerElement']);\n    ['requestFullscreen','webkitRequestFullscreen','mozRequestFullScreen','msRequestFullscreen'].forEach(function(fn) {\n      if (playerEl[fn]) return playerEl[fn]();\n    });\n    store.dispatch({ type: REQUEST_FULL_SCREEN });\n  }\n};\n\n/**\n * Exit fullscreen mode\n * @public\n */\nexport function exitFullscreen() {\n  return (store) => {\n    ['exitFullscreen','webkitExitFullscreen','mozCancelFullScreen','msExitFullscreen'].forEach(function(fn) {\n      if (document[fn]) return document[fn]();\n    });\n    return store.dispatch({ type: EXIT_FULL_SCREEN });\n  }\n};\n\n/**\n * Toggle fullscreen mode\n * @public\n *\n */\nexport function toggleFullscreen() {\n  return (store) => {\n    return store.dispatch(isFullscreen(store) ? exitFullscreen() : requestFullscreen());\n  }\n};\n\n/**\n * Check whether were in fullscreen mode.\n * @public\n *\n */\nexport function isFullscreen(store) {\n  return store.getIn(['player','fullScreen']);\n};\n\n/**\n * Set the value of fullscreen (set on an event handler, if the native\n * browser control is used to escape full screen mode.\n */\nexport function setFullscreen(fullScreen) {\n  return (store) => {\n    if (isFullscreen(store) !== fullScreen) {\n      store.dispatch({ type: SET_FULL_SCREEN, payload: fullScreen });\n    }\n    if (!fullScreen && isVRMode(store)) {\n      store.dispatch(exitVRMode());\n    }\n  }\n};\n\n/**\n * @public\n *\n */\nexport function isNormalRenderingMode(store) {\n  return (store.getIn(['player','renderingMode']) === 'normal');\n};\n\n/**\n * Check whether we are in VR mode.\n * @public\n *\n */\nexport function isVRMode(store) {\n  return (store.getIn(['player','renderingMode']) === 'vr');\n};\n\n/**\n * Check whether we are in Lenticular rendering mode.\n * @public\n */\nexport function isLenticularMode(store) {\n  return (store.getIn(['player','renderingMode']) === 'lenticular');\n};\n\nexport function requestVRMode() {\n  return (store) => {\n    //store.dispatch(requestFullscreen());\n\n    const cameraId = getCamera(store);\n    store.getTranslator().enterVR();\n    store.dispatch({ type: REQUEST_VR_MODE, payload: { cameraId } });\n    store.dispatch(useCamera(vrCameraId));\n  }\n}\n\nexport function requestLenticularMode({ trackDevice }) {\n  return (store) => {\n    store.dispatch(requestFullscreen());\n    const cameraId = getCamera(store);\n    store.dispatch({ type: REQUEST_LENTICULAR_MODE, payload: { trackDevice, cameraId} });\n  }\n};\n\nexport function requestNormalMode() {\n  return { type: REQUEST_NORMAL_MODE };\n};\n\nexport function exitVRMode() {\n  return (store) => {\n    store.getTranslator().exitVR();\n    store.dispatch(requestNormalMode());\n    const prevCameraId = store.getIn(['player', 'prevCamera']);\n    if (prevCameraId) store.dispatch(useCamera(prevCameraId));\n  }\n}\n\nexport function toggleVRMode() {\n  return (store) => {\n    store.dispatch(isVRMode(store) ? exitVRMode() : requestVRMode());\n  }\n}\n\nexport function toggleLenticularMode() {\n  return (store) => {\n    store.dispatch(isLenticularMode(store) ?  requestNormalMode() : requestLenticularMode({}) );\n  }\n};\n\nexport function enableDeviceTracking() {\n  return { type: ENABLE_DEVICE_TRACKING };\n};\n\nexport function disableDeviceTracking() {\n  return { type: DISABLE_DEVICE_TRACKING };\n};\n\nexport function toggleDeviceTracking() {\n  return (store) => {\n    console.log('toggle device tracking', !isDeviceTracking(store));\n    store.dispatch(isDeviceTracking(store) ?  disableDeviceTracking() : enableDeviceTracking());\n  }\n};\n\nexport function isDeviceTracking(store) {\n  return store.getIn(['player', 'deviceTracking']);\n};\n\nexport function enableMouseControls(){\n  return { type: ENABLE_MOUSE_CONTROLS };\n};\n\nexport function disableMouseControls(){\n  return { type: DISABLE_MOUSE_CONTROLS };\n}\n\nexport function toggleMouseControls(){\n  return (store) => {\n    store.dispatch(isMouseControls(store) ? disableMouseControls() : enableMouseControls());\n  }\n}\n\nexport function isMouseControls(store){\n  const tools = store.getIn(['player', 'enableTools']);\n  return tools.get('orbit') || tools.get('pan') || tools.get('zoom');\n}\n\n\n/**\n * Store the rendered player element\n */\nexport function setPlayerElement(playerEl, canvasEl) {\n  return { type: SET_PLAYER_ELEMENT, payload: { playerEl, canvasEl } };\n};\n\n/**\n * Set the active color and timeline color to be used for the player css.\n *\n * @public\n * @param {Color} color a valid css color (ex. '#ff0000'}.\n * @returns {Promise}\n *\n */\nexport function setActiveColor(color) {\n  return { type: SET_ACTIVE_COLOR, payload: color };\n};\n\n/**\n * Set the hover color to be used for the player css.\n *\n * @public\n * @param {Color} color a valid css color (ex. '#ff0000'}.\n * @returns {Promise}\n *\n */\nexport function setHoverColor(color) {\n  return { type: SET_HOVER_COLOR, payload: color };\n};\n\n/**\n * Set the fullscreen background color to be used for the player css.\n *\n * @public\n * @param {Color} color a valid css color (ex. '#ff0000'}.\n * @returns {Promise}\n *\n */\nexport function setFullscreenBGColor(color){\n  return { type: SET_BACKGROUND_COLOR, payload: color };\n};\n\n/**\n * Return the active color.\n *\n * @public\n */\nexport function getActiveColor(store) {\n  return store.getIn(['player', 'activeColor']);\n};\n\n/**\n * Return the hover color.\n *\n * @public\n */\nexport function getHoverColor(store) {\n  return store.getIn(['player', 'hoverColor']);\n};\n\n/**\n * Return the fullscreen background color.\n *\n * @public\n */\nexport function getFullscreenBGColor(store){\n  return store.getIn(['player', 'fullscreenBackgroundColor']);\n};\n\nfunction slerpTween(startMatrix, endMatrix) {\n  const startPosition = new THREE.Vector3();\n  const startQuaternion = new THREE.Quaternion();\n  const scale = new THREE.Vector3(1, 1, 1);\n  startMatrix.decompose(startPosition, startQuaternion, scale);\n\n  const endPosition = new THREE.Vector3();\n  const endQuaternion = new THREE.Quaternion();\n  endMatrix.decompose(endPosition, endQuaternion, scale);\n\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n  scale.set(1,1,1);\n  const matrix = new THREE.Matrix4();\n\n  return function(time, start, end, duration) {\n    position.lerpVectors(startPosition, endPosition, time/duration);\n    THREE.Quaternion.slerp(startQuaternion, endQuaternion, quaternion, time/duration);\n    matrix.compose(position, quaternion, scale);\n    return matrix;\n  };\n};\n\n/**\n * Animate the camera to the position of another.\n *\n * @public\n * @param {String} id - the id of the camera to move to.\n * @param {Number} duration - length of the animation (ms), default 300.\n * @returns {Promise}\n */\nexport function animateCameraTo(id, duration) {\n  return (store) => {\n    const currentCameraTransform = getCameraPosition(store);\n    const newCameraTransform = store.getTranslator().getNavigator().initCamera(id, true);\n    const actualDuration = duration || 300;\n    return new Promise((resolve, reject) => {\n      store.dispatch(queueAnimation({\n        autoplay: true,\n        name: 'Move Camera',\n        iterations: 1,\n        set: function(huh, to) {\n          store.getTranslator().getNavigator().changeCameraPosition(to);\n        },\n        tracks: [{\n          duration: actualDuration,\n          value: newCameraTransform,\n          startValue: currentCameraTransform,\n          tween: slerpTween(currentCameraTransform, newCameraTransform)\n        }],\n        onEnd: function() {\n          resolve(store.dispatch(useCamera(id)));\n        }\n      }));\n    });\n  };\n};\n\n\n/**\n * Trigger a resize event. If you manually resize the player's dom element,\n * use this to force the player to rerender with the updated size.\n *\n * @public\n */\nexport function resize() {\n  return (store) => {\n    const translator = store.getTranslator();\n    if (translator) translator.resize();\n  };\n};\n\n/**\n * Given a manipulator event, return the list of node ids at that position\n *\n * @public\n * @param {Event} event generated by the manipulator interface. (See {@tutorial sdk-Tools})\n * @returns {Array} list of node ids found.\n *\n * @example\n *\n * api.player.addTool({\n *   click: (ev) => {\n *     var nodes = api.player.filterNodesFromPosition(ev);\n *     console.log('Found: ', nodes.map((id) => api.scene.get({id: id, property: 'name'})));\n *   }\n * }, 'FindNode');\n *\n */\nexport function filterNodesFromPosition(store, event) {\n  const translator = store.getTranslator();\n  if (!translator || !translator.raycastSelect) return null;\n  const x = event.clientX / (event.rect.width / 2) - 1;\n  const y = -(event.clientY / (event.rect.height/ 2) - 1);\n  const hits = translator.raycastSelect({ x, y });\n  return hits.map((hit) => hit.id);\n};\n\n/**\n*Will constrain the target of the camera to remain inside the bounding sphere of the scene.\n*The camera will not be allowed to enter the bounding sphere of the scene nor leave  bounding sphere defined by arguments\n*\n*@public\n*@param {Number} radius distance around the center of the scene that defineds outer bounding sphere, setting radius to null disables bounding spheres\n*/\nexport function setCameraRadiusConstraint(radius){\n  return (store) => {\n    const nav = store.getTranslator().getNavigator();\n    if(nav) radius ? nav.enableObjectMode(radius) : nav.disableObjectMode();\n    store.dispatch({type: SET_CONSTRAIN_CAMERA_RADIUS, payload: radius});\n  }\n}\n\n/**\n * Turn thumbnail display on or off\n * @public\n * @param {Boolean} display - Display thumbnail (default true)\n */\nexport function displayThumbnail(display) {\n  return { type: DISPLAY_THUMBNAIL, payload: display };\n};\n\nexport function shouldDisplayThumbnail(store) {\n  return store.getIn(['player', 'displayThumbnail']);\n};\n\nexport function setManipulateionNode(id) {\n  return { type: SET_MANIPULATION_NODE, payload:id };\n}\n\nconst publicApi = {\n  reducer,\n  actions: { addTool, removeTool, showTool, hideTool, useManipulator,\n    setCameraAttrs, useCamera, setCameraPosition, animateCameraTo, resize,\n    displayThumbnail, setActiveColor, requestFullscreen, exitFullscreen, setFullscreen,\n    toggleFullscreen, setHoverColor, toggleVRMode, requestVRMode, exitVRMode, requestLenticularMode,\n    enableDeviceTracking, disableDeviceTracking, toggleDeviceTracking,\n    enableMouseControls, disableMouseControls, toggleMouseControls,\n    requestNormalMode, setFullscreenBGColor,\n    setCameraRadiusConstraint, setManipulateionNode\n  },\n  selectors: { getCamera, getCameraAttrs, getInitialCameraPosition, getCameraPosition,\n    getActiveColor, isFullscreen, isVRMode, isLenticularMode, getFullscreenBGColor,\n    isDeviceTracking, isMouseControls, shouldDisplayThumbnail, filterNodesFromPosition,\n  },\n};\nexport default publicApi;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/player.js\n **/","import THREE from 'three';\n\nconst targetPosition = new THREE.Vector3();\nconst cameraPosition = new THREE.Vector3();\nlet targetUp = new THREE.Vector3();\nconst lookAtMatrix = new THREE.Matrix4();\nconst lookAtPosition = new THREE.Vector3();\nconst lookAtScale = new THREE.Vector3();\nconst lookAtRotation = new THREE.Quaternion();\nconst cameraScale = new THREE.Vector3();\nconst cameraRotation = new THREE.Quaternion();\n\nexport default function updateCameraLookAtTarget(cameraWorldMatrix, targetWorldMatrix, upPosition) {\n  // console.trace('navigator.updateCameraLookAtTarget');\n  cameraPosition.setFromMatrixPosition(cameraWorldMatrix);\n  targetPosition.setFromMatrixPosition(targetWorldMatrix);\n  // var te = targetWorldMatrix.elements;\n  targetUp = upPosition || new THREE.Vector3().set(0,1,0);\n  //targetUp.set(0, 1, 0); // .applyMatrix4( targetWorldMatrix );\n  // console.log( \"targetUp\", JSON.stringify( targetUp ) );\n  //console.log(upPosition);\n  lookAtMatrix.makeTranslation(cameraPosition.x, cameraPosition.y, cameraPosition.z);\n  lookAtMatrix.lookAt(cameraPosition, targetPosition, upPosition);\n  lookAtMatrix.decompose(lookAtPosition, lookAtRotation, lookAtScale);\n\n  cameraWorldMatrix.decompose(cameraPosition, cameraRotation, cameraScale);\n  cameraWorldMatrix.compose(cameraPosition, lookAtRotation, cameraScale);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/updateCameraLookAtTarget.js\n **/","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n(function (process,global){\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.1.2\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = _dereq_;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof _dereq_ === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n    function lib$es6$promise$then$$then(onFulfillment, onRejection) {\n      var parent = this;\n      var state = parent._state;\n\n      if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\n        return this;\n      }\n\n      var child = new this.constructor(lib$es6$promise$$internal$$noop);\n      var result = parent._result;\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$es6$promise$asap$$asap(function(){\n          lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\n        });\n      } else {\n        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    }\n    var lib$es6$promise$then$$default = lib$es6$promise$then$$then;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n      if (maybeThenable.constructor === promise.constructor &&\n          then === lib$es6$promise$then$$default &&\n          constructor.resolve === lib$es6$promise$promise$resolve$$default) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value, lib$es6$promise$$internal$$getThen(value));\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n    var lib$es6$promise$promise$$counter = 0;\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this._id = lib$es6$promise$promise$$counter++;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        typeof resolver !== 'function' && lib$es6$promise$promise$$needsResolver();\n        this instanceof lib$es6$promise$promise$$Promise ? lib$es6$promise$$internal$$initializePromise(this, resolver) : lib$es6$promise$promise$$needsNew();\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: lib$es6$promise$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (Array.isArray(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._result = new Array(this.length);\n\n        if (this.length === 0) {\n          lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(this.promise, this._validationError());\n      }\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var input   = this._input;\n\n      for (var i = 0; this._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      var resolve = c.resolve;\n\n      if (resolve === lib$es6$promise$promise$resolve$$default) {\n        var then = lib$es6$promise$$internal$$getThen(entry);\n\n        if (then === lib$es6$promise$then$$default &&\n            entry._state !== lib$es6$promise$$internal$$PENDING) {\n          this._settledAt(entry._state, i, entry._result);\n        } else if (typeof then !== 'function') {\n          this._remaining--;\n          this._result[i] = entry;\n        } else if (c === lib$es6$promise$promise$$default) {\n          var promise = new c(lib$es6$promise$$internal$$noop);\n          lib$es6$promise$$internal$$handleMaybeThenable(promise, entry, then);\n          this._willSettleAt(promise, i);\n        } else {\n          this._willSettleAt(new c(function(resolve) { resolve(entry); }), i);\n        }\n      } else {\n        this._willSettleAt(resolve(entry), i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        this._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = value;\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n\n}).call(this,_dereq_('_process'),typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"_process\":3}],2:[function(_dereq_,module,exports){\n/* eslint-disable no-unused-vars */\n'use strict';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n  if (val === null || val === undefined) {\n    throw new TypeError('Object.assign cannot be called with null or undefined');\n  }\n\n  return Object(val);\n}\n\nmodule.exports = Object.assign || function (target, source) {\n  var from;\n  var to = toObject(target);\n  var symbols;\n\n  for (var s = 1; s < arguments.length; s++) {\n    from = Object(arguments[s]);\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      symbols = Object.getOwnPropertySymbols(from);\n      for (var i = 0; i < symbols.length; i++) {\n        if (propIsEnumerable.call(from, symbols[i])) {\n          to[symbols[i]] = from[symbols[i]];\n        }\n      }\n    }\n  }\n\n  return to;\n};\n\n},{}],3:[function(_dereq_,module,exports){\n// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n},{}],4:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = _dereq_('./util.js');\nvar WakeLock = _dereq_('./wakelock.js');\n\n// Start at a higher number to reduce chance of conflict.\nvar nextDisplayId = 1000;\nvar hasShowDeprecationWarning = false;\n\n/**\n * The base class for all VR displays.\n */\nfunction VRDisplay() {\n  this.isPolyfilled = true;\n  this.displayId = nextDisplayId++;\n  this.displayName = 'webvr-polyfill displayName';\n\n  this.isConnected = true;\n  this.isPresenting = false;\n  this.capabilities = {\n    hasPosition: false,\n    hasOrientation: false,\n    hasExternalDisplay: false,\n    canPresent: false,\n    maxLayers: 1\n  };\n  this.stageParameters = null;\n\n  // \"Private\" members.\n  this.waitingForPresent_ = false;\n  this.layer_ = null;\n\n  this.fullscreenElement_ = null;\n  this.fullscreenWrapper_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n\n  this.wakelock_ = new WakeLock();\n}\n\nVRDisplay.prototype.getPose = function() {\n  // TODO: Technically this should retain it's value for the duration of a frame\n  // but I doubt that's practical to do in javascript.\n  return this.getImmediatePose();\n};\n\nVRDisplay.prototype.requestAnimationFrame = function(callback) {\n  return window.requestAnimationFrame(callback);\n};\n\nVRDisplay.prototype.cancelAnimationFrame = function(id) {\n  return window.cancelAnimationFrame(id);\n};\n\nVRDisplay.prototype.wrapForFullscreen = function(element) {\n  // Don't wrap in iOS.\n  if (Util.isIOS()) {\n    return element;\n  }\n  if (!this.fullscreenWrapper_) {\n    this.fullscreenWrapper_ = document.createElement('div');\n    var cssProperties = [\n      'height: ' + Math.min(screen.height, screen.width) + 'px !important',\n      'top: 0 !important',\n      'left: 0 !important',\n      'right: 0 !important',\n      'border: 0',\n      'margin: 0',\n      'padding: 0',\n      'z-index: -1',\n      'position: fixed',\n    ];\n    this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');\n    this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');\n  }\n\n  if (this.fullscreenElement_ == element) {\n    return this.fullscreenWrapper_;\n  }\n\n  // Remove any previously applied wrappers\n  this.removeFullscreenWrapper();\n\n  this.fullscreenElement_ = element;\n  var parent = this.fullscreenElement_.parentElement;\n\n  parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);\n\n  parent.removeChild(this.fullscreenElement_);\n  this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);\n  this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');\n\n  var self = this;\n  function applyFullscreenElementStyle() {\n    if (!self.fullscreenElement_) {\n      return;\n    }\n\n    var cssProperties = [\n      'position: absolute',\n      'top: 0',\n      'left: 0',\n      'width: ' + Math.max(screen.width, screen.height) + 'px',\n      'height: ' + Math.min(screen.height, screen.width) + 'px',\n      'border: 0',\n      'margin: 0',\n      'padding: 0',\n    ];\n    self.fullscreenElement_.setAttribute('style', cssProperties.join('; ') + ';');\n  }\n\n  applyFullscreenElementStyle();\n  return this.fullscreenWrapper_;\n};\n\nVRDisplay.prototype.removeFullscreenWrapper = function() {\n  if (!this.fullscreenElement_) {\n    return;\n  }\n\n  var element = this.fullscreenElement_;\n  if (this.fullscreenElementCachedStyle_) {\n    element.setAttribute('style', this.fullscreenElementCachedStyle_);\n  } else {\n    element.removeAttribute('style');\n  }\n  this.fullscreenElement_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n\n  var parent = this.fullscreenWrapper_.parentElement;\n  this.fullscreenWrapper_.removeChild(element);\n  parent.insertBefore(element, this.fullscreenWrapper_);\n  parent.removeChild(this.fullscreenWrapper_);\n\n  return element;\n};\n\nVRDisplay.prototype.requestPresent = function(layers) {\n  if (this.isPresenting) {\n    console.error('Already presenting!');\n    return;\n  }\n  var self = this;\n  if (!(layers instanceof Array)) {\n    if (!hasShowDeprecationWarning) {\n      console.warn(\"Using a deprecated form of requestPresent. Should pass in an array of VRLayers.\");\n      hasShowDeprecationWarning = true;\n    }\n    layers = [layers];\n  }\n\n  return new Promise(function(resolve, reject) {\n    if (!self.capabilities.canPresent) {\n      reject(new Error('VRDisplay is not capable of presenting.'));\n      return;\n    }\n\n    if (layers.length == 0 || layers.length > self.capabilities.maxLayers) {\n      reject(new Error('Invalid number of layers.'));\n      return;\n    }\n    self.layer_ = layers[0];\n\n    self.waitingForPresent_ = false;\n    if (self.layer_ && self.layer_.source) {\n      var fullscreenElement = self.wrapForFullscreen(self.layer_.source);\n      function onFullscreenChange() {\n        var actualFullscreenElement = Util.getFullscreenElement();\n        self.isPresenting = (fullscreenElement === actualFullscreenElement);\n        if (self.isPresenting) {\n          if (screen.orientation && screen.orientation.lock) {\n            screen.orientation.lock('landscape-primary');\n          }\n          self.waitingForPresent_ = false;\n          self.beginPresent_();\n          resolve();\n        } else {\n          if (screen.orientation && screen.orientation.unlock) {\n            screen.orientation.unlock();\n          }\n          self.removeFullscreenWrapper();\n          self.wakelock_.release();\n          self.endPresent_();\n          self.removeFullscreenListeners_();\n        }\n        self.fireVRDisplayPresentChange_();\n      }\n      function onFullscreenError(error) {\n        if (!self.waitingForPresent_) {\n          return;\n        }\n\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n\n        self.wakelock_.release();\n        self.waitingForPresent_ = false;\n        self.isPresenting = false;\n\n        reject(new Error('Unable to present.'));\n      }\n\n      self.addFullscreenListeners_(fullscreenElement,\n          onFullscreenChange, onFullscreenError);\n\n      if (Util.requestFullscreen(fullscreenElement)) {\n        self.wakelock_.request();\n        self.waitingForPresent_ = true;\n      } else if (Util.isIOS()) {\n        // *sigh* Just fake it.\n        self.wakelock_.request();\n        self.isPresenting = true;\n        self.beginPresent_();\n        self.fireVRDisplayPresentChange_();\n        resolve();\n      }\n    }\n\n    if (!self.waitingForPresent_ && !Util.isIOS()) {\n      Util.exitFullscreen();\n      reject(new Error('Unable to present.'));\n    }\n  });\n};\n\nVRDisplay.prototype.exitPresent = function() {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  this.isPresenting = false;\n  this.layer_ = null;\n  this.wakelock_.release();\n\n  return new Promise(function(resolve, reject) {\n    if (wasPresenting) {\n      if (!Util.exitFullscreen() && Util.isIOS()) {\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n\n      resolve();\n    } else {\n      reject(new Error('Was not presenting to VRDisplay.'));\n    }\n  });\n};\n\nVRDisplay.prototype.getLayers = function() {\n  if (this.layer_) {\n    return [this.layer_];\n  }\n  return [];\n};\n\nVRDisplay.prototype.fireVRDisplayPresentChange_ = function() {\n  var event = new CustomEvent('vrdisplaypresentchange', {detail: {vrdisplay: this}});\n  window.dispatchEvent(event);\n};\n\nVRDisplay.prototype.addFullscreenListeners_ = function(element, changeHandler, errorHandler) {\n  this.removeFullscreenListeners_();\n  this.fullscreenEventTarget_ = element;\n  this.fullscreenChangeHandler_ = changeHandler;\n  this.fullscreenErrorHandler_ = errorHandler;\n\n  if (changeHandler) {\n\n    element.addEventListener('fullscreenchange', changeHandler, false);\n\n    element.addEventListener('webkitfullscreenchange', changeHandler, false);\n\n    document.addEventListener('mozfullscreenchange', changeHandler, false);\n\n    element.addEventListener('msfullscreenchange', changeHandler, false);\n  }\n\n  if (errorHandler) {\n    element.addEventListener('fullscreenerror', errorHandler, false);\n    element.addEventListener('webkitfullscreenerror', errorHandler, false);\n    document.addEventListener('mozfullscreenerror', errorHandler, false);\n    element.addEventListener('msfullscreenerror', errorHandler, false);\n  }\n};\n\nVRDisplay.prototype.removeFullscreenListeners_ = function() {\n  if (!this.fullscreenEventTarget_)\n    return;\n\n  var element = this.fullscreenEventTarget_;\n\n  if (this.fullscreenChangeHandler_) {\n    var changeHandler = this.fullscreenChangeHandler_;\n    element.removeEventListener('fullscreenchange', changeHandler, false);\n    element.removeEventListener('webkitfullscreenchange', changeHandler, false);\n    document.removeEventListener('mozfullscreenchange', changeHandler, false);\n    element.removeEventListener('msfullscreenchange', changeHandler, false);\n  }\n\n  if (this.fullscreenErrorHandler_) {\n    var errorHandler = this.fullscreenErrorHandler_;\n    element.removeEventListener('fullscreenerror', errorHandler, false);\n    element.removeEventListener('webkitfullscreenerror', errorHandler, false);\n    document.removeEventListener('mozfullscreenerror', errorHandler, false);\n    element.removeEventListener('msfullscreenerror', errorHandler, false);\n  }\n\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n};\n\nVRDisplay.prototype.beginPresent_ = function() {\n  // Override to add custom behavior when presentation begins.\n};\n\nVRDisplay.prototype.endPresent_ = function() {\n  // Override to add custom behavior when presentation ends.\n};\n\nVRDisplay.prototype.submitFrame = function(pose) {\n  // Override to add custom behavior for frame submission.\n};\n\nVRDisplay.prototype.getEyeParameters = function(whichEye) {\n  // Override to return accurate eye parameters if canPresent is true.\n  return null;\n};\n\n/*\n * Deprecated classes\n */\n\n/**\n * The base class for all VR devices. (Deprecated)\n */\nfunction VRDevice() {\n  this.isPolyfilled = true;\n  this.hardwareUnitId = 'webvr-polyfill hardwareUnitId';\n  this.deviceId = 'webvr-polyfill deviceId';\n  this.deviceName = 'webvr-polyfill deviceName';\n}\n\n/**\n * The base class for all VR HMD devices. (Deprecated)\n */\nfunction HMDVRDevice() {\n}\nHMDVRDevice.prototype = new VRDevice();\n\n/**\n * The base class for all VR position sensor devices. (Deprecated)\n */\nfunction PositionSensorVRDevice() {\n}\nPositionSensorVRDevice.prototype = new VRDevice();\n\nmodule.exports.VRDisplay = VRDisplay;\nmodule.exports.VRDevice = VRDevice;\nmodule.exports.HMDVRDevice = HMDVRDevice;\nmodule.exports.PositionSensorVRDevice = PositionSensorVRDevice;\n\n},{\"./util.js\":24,\"./wakelock.js\":26}],5:[function(_dereq_,module,exports){\n/*\n * Copyright 2016 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar CardboardUI = _dereq_('./cardboard-ui.js');\nvar Util = _dereq_('./util.js');\nvar WGLUPreserveGLState = _dereq_('./deps/wglu-preserve-state.js');\n\nvar distortionVS = [\n  'attribute vec2 position;',\n  'attribute vec3 texCoord;',\n\n  'varying vec2 vTexCoord;',\n\n  'uniform vec4 viewportOffsetScale[2];',\n\n  'void main() {',\n  '  vec4 viewport = viewportOffsetScale[int(texCoord.z)];',\n  '  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;',\n  '  gl_Position = vec4( position, 1.0, 1.0 );',\n  '}',\n].join('\\n');\n\nvar distortionFS = [\n  'precision mediump float;',\n  'uniform sampler2D diffuse;',\n\n  'varying vec2 vTexCoord;',\n\n  'void main() {',\n  '  gl_FragColor = texture2D(diffuse, vTexCoord);',\n  '}',\n].join('\\n');\n\n/**\n * A mesh-based distorter.\n */\nfunction CardboardDistorter(gl) {\n  this.gl = gl;\n  this.ctxAttribs = gl.getContextAttributes();\n\n  this.meshWidth = 20;\n  this.meshHeight = 20;\n\n  this.bufferScale = WebVRConfig.BUFFER_SCALE;\n\n  this.bufferWidth = gl.drawingBufferWidth;\n  this.bufferHeight = gl.drawingBufferHeight;\n\n  // Patching support\n  this.realBindFramebuffer = gl.bindFramebuffer;\n  this.realEnable = gl.enable;\n  this.realDisable = gl.disable;\n  this.realColorMask = gl.colorMask;\n  this.realClearColor = gl.clearColor;\n  this.realViewport = gl.viewport;\n\n  if (!Util.isIOS()) {\n    this.realCanvasWidth = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'width');\n    this.realCanvasHeight = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'height');\n  }\n\n  this.isPatched = false;\n\n  // State tracking\n  this.lastBoundFramebuffer = null;\n  this.cullFace = false;\n  this.depthTest = false;\n  this.blend = false;\n  this.scissorTest = false;\n  this.stencilTest = false;\n  this.viewport = [0, 0, 0, 0];\n  this.colorMask = [true, true, true, true];\n  this.clearColor = [0, 0, 0, 0];\n\n  this.attribs = {\n    position: 0,\n    texCoord: 1\n  };\n  this.program = Util.linkProgram(gl, distortionVS, distortionFS, this.attribs);\n  this.uniforms = Util.getProgramUniforms(gl, this.program);\n\n  this.viewportOffsetScale = new Float32Array(8);\n  this.setTextureBounds();\n\n  this.vertexBuffer = gl.createBuffer();\n  this.indexBuffer = gl.createBuffer();\n  this.indexCount = 0;\n\n  this.renderTarget = gl.createTexture();\n  this.framebuffer = gl.createFramebuffer();\n\n  this.depthStencilBuffer = null;\n  this.depthBuffer = null;\n  this.stencilBuffer = null;\n\n  if (this.ctxAttribs.depth && this.ctxAttribs.stencil) {\n    this.depthStencilBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.depth) {\n    this.depthBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.stencil) {\n    this.stencilBuffer = gl.createRenderbuffer();\n  }\n\n  this.patch();\n\n  this.onResize();\n\n  if (!WebVRConfig.CARDBOARD_UI_DISABLED) {\n    this.cardboardUI = new CardboardUI(gl);\n  }\n};\n\n/**\n * Tears down all the resources created by the distorter and removes any\n * patches.\n */\nCardboardDistorter.prototype.destroy = function() {\n  var gl = this.gl;\n\n  this.unpatch();\n\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n  gl.deleteBuffer(this.indexBuffer);\n  gl.deleteTexture(this.renderTarget);\n  gl.deleteFramebuffer(this.framebuffer);\n  if (this.depthStencilBuffer) {\n    gl.deleteRenderbuffer(this.depthStencilBuffer);\n  }\n  if (this.depthBuffer) {\n    gl.deleteRenderbuffer(this.depthBuffer);\n  }\n  if (this.stencilBuffer) {\n    gl.deleteRenderbuffer(this.stencilBuffer);\n  }\n\n  if (this.cardboardUI) {\n    this.cardboardUI.destroy();\n  }\n};\n\n\n/**\n * Resizes the backbuffer to match the canvas width and height.\n */\nCardboardDistorter.prototype.onResize = function() {\n  var gl = this.gl;\n  var self = this;\n\n  var glState = [\n    gl.RENDERBUFFER_BINDING,\n    gl.TEXTURE_BINDING_2D, gl.TEXTURE0\n  ];\n\n  WGLUPreserveGLState(gl, glState, function(gl) {\n    // Bind real backbuffer and clear it once. We don't need to clear it again\n    // after that because we're overwriting the same area every frame.\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n\n    // Put things in a good state\n    if (self.scissorTest) { self.realDisable.call(gl, gl.SCISSOR_TEST); }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.realClearColor.call(gl, 0, 0, 0, 1);\n\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Now bind and resize the fake backbuffer\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.framebuffer);\n\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.texImage2D(gl.TEXTURE_2D, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB,\n        self.bufferWidth, self.bufferHeight, 0,\n        self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, self.renderTarget, 0);\n\n    if (self.ctxAttribs.depth && self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthStencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL,\n          self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT,\n          gl.RENDERBUFFER, self.depthStencilBuffer);\n    } else if (self.ctxAttribs.depth) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16,\n          self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT,\n          gl.RENDERBUFFER, self.depthBuffer);\n    } else if (self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.stencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.STENCIL_INDEX8,\n          self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT,\n          gl.RENDERBUFFER, self.stencilBuffer);\n    }\n\n    if (!gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      console.error('Framebuffer incomplete!');\n    }\n\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n\n    if (self.scissorTest) { self.realEnable.call(gl, gl.SCISSOR_TEST); }\n\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    self.realClearColor.apply(gl, self.clearColor);\n  });\n\n  if (this.cardboardUI) {\n    this.cardboardUI.onResize();\n  }\n};\n\nCardboardDistorter.prototype.patch = function() {\n  if (this.isPatched) {\n    return;\n  }\n\n  var self = this;\n  var canvas = this.gl.canvas;\n  var gl = this.gl;\n\n  if (!Util.isIOS()) {\n    canvas.width = Util.getScreenWidth() * this.bufferScale;\n    canvas.height = Util.getScreenHeight() * this.bufferScale;\n\n    Object.defineProperty(canvas, 'width', {\n      configurable: true,\n      enumerable: true,\n      get: function() {\n        return self.bufferWidth;\n      },\n      set: function(value) {\n        self.bufferWidth = value;\n        self.onResize();\n      }\n    });\n\n    Object.defineProperty(canvas, 'height', {\n      configurable: true,\n      enumerable: true,\n      get: function() {\n        return self.bufferHeight;\n      },\n      set: function(value) {\n        self.bufferHeight = value;\n        self.onResize();\n      }\n    });\n  }\n\n  this.lastBoundFramebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n\n  if (this.lastBoundFramebuffer == null) {\n    this.lastBoundFramebuffer = this.framebuffer;\n    this.gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n  }\n\n  this.gl.bindFramebuffer = function(target, framebuffer) {\n    self.lastBoundFramebuffer = framebuffer ? framebuffer : self.framebuffer;\n    // Silently make calls to bind the default framebuffer bind ours instead.\n    self.realBindFramebuffer.call(gl, target, self.lastBoundFramebuffer);\n  };\n\n  this.cullFace = gl.getParameter(gl.CULL_FACE);\n  this.depthTest = gl.getParameter(gl.DEPTH_TEST);\n  this.blend = gl.getParameter(gl.BLEND);\n  this.scissorTest = gl.getParameter(gl.SCISSOR_TEST);\n  this.stencilTest = gl.getParameter(gl.STENCIL_TEST);\n\n  gl.enable = function(pname) {\n    switch (pname) {\n      case gl.CULL_FACE: self.cullFace = true; break;\n      case gl.DEPTH_TEST: self.depthTest = true; break;\n      case gl.BLEND: self.blend = true; break;\n      case gl.SCISSOR_TEST: self.scissorTest = true; break;\n      case gl.STENCIL_TEST: self.stencilTest = true; break;\n    }\n    self.realEnable.call(gl, pname);\n  };\n\n  gl.disable = function(pname) {\n    switch (pname) {\n      case gl.CULL_FACE: self.cullFace = false; break;\n      case gl.DEPTH_TEST: self.depthTest = false; break;\n      case gl.BLEND: self.blend = false; break;\n      case gl.SCISSOR_TEST: self.scissorTest = false; break;\n      case gl.STENCIL_TEST: self.stencilTest = false; break;\n    }\n    self.realDisable.call(gl, pname);\n  };\n\n  this.colorMask = gl.getParameter(gl.COLOR_WRITEMASK);\n  gl.colorMask = function(r, g, b, a) {\n    self.colorMask[0] = r;\n    self.colorMask[1] = g;\n    self.colorMask[2] = b;\n    self.colorMask[3] = a;\n    self.realColorMask.call(gl, r, g, b, a);\n  };\n\n  this.clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);\n  gl.clearColor = function(r, g, b, a) {\n    self.clearColor[0] = r;\n    self.clearColor[1] = g;\n    self.clearColor[2] = b;\n    self.clearColor[3] = a;\n    self.realClearColor.call(gl, r, g, b, a);\n  };\n\n  this.viewport = gl.getParameter(gl.VIEWPORT);\n  gl.viewport = function(x, y, w, h) {\n    self.viewport[0] = x;\n    self.viewport[1] = y;\n    self.viewport[2] = w;\n    self.viewport[3] = h;\n    self.realViewport.call(gl, x, y, w, h);\n  };\n\n  this.isPatched = true;\n  Util.safariCssSizeWorkaround(canvas);\n};\n\nCardboardDistorter.prototype.unpatch = function() {\n  if (!this.isPatched) {\n    return;\n  }\n\n  var gl = this.gl;\n  var canvas = this.gl.canvas;\n\n  if (!Util.isIOS()) {\n    Object.defineProperty(canvas, 'width', this.realCanvasWidth);\n    Object.defineProperty(canvas, 'height', this.realCanvasHeight);\n  }\n  canvas.width = this.bufferWidth;\n  canvas.height = this.bufferHeight;\n\n  gl.bindFramebuffer = this.realBindFramebuffer;\n  gl.enable = this.realEnable;\n  gl.disable = this.realDisable;\n  gl.colorMask = this.realColorMask;\n  gl.clearColor = this.realClearColor;\n  gl.viewport = this.realViewport;\n\n  // Check to see if our fake backbuffer is bound and bind the real backbuffer\n  // if that's the case.\n  if (this.lastBoundFramebuffer == this.framebuffer) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n\n  this.isPatched = false;\n\n  setTimeout(function() {\n    Util.safariCssSizeWorkaround(canvas);\n  }, 1);\n};\n\nCardboardDistorter.prototype.setTextureBounds = function(leftBounds, rightBounds) {\n  if (!leftBounds) {\n    leftBounds = [0, 0, 0.5, 1];\n  }\n\n  if (!rightBounds) {\n    rightBounds = [0.5, 0, 0.5, 1];\n  }\n\n  // Left eye\n  this.viewportOffsetScale[0] = leftBounds[0]; // X\n  this.viewportOffsetScale[1] = leftBounds[1]; // Y\n  this.viewportOffsetScale[2] = leftBounds[2]; // Width\n  this.viewportOffsetScale[3] = leftBounds[3]; // Height\n\n  // Right eye\n  this.viewportOffsetScale[4] = rightBounds[0]; // X\n  this.viewportOffsetScale[5] = rightBounds[1]; // Y\n  this.viewportOffsetScale[6] = rightBounds[2]; // Width\n  this.viewportOffsetScale[7] = rightBounds[3]; // Height\n};\n\n/**\n * Performs distortion pass on the injected backbuffer, rendering it to the real\n * backbuffer.\n */\nCardboardDistorter.prototype.submitFrame = function() {\n  var gl = this.gl;\n  var self = this;\n\n  var glState = [];\n\n  if (!WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS) {\n    glState.push(\n      gl.CURRENT_PROGRAM,\n      gl.ARRAY_BUFFER_BINDING,\n      gl.ELEMENT_ARRAY_BUFFER_BINDING,\n      gl.TEXTURE_BINDING_2D, gl.TEXTURE0\n    );\n  }\n\n  WGLUPreserveGLState(gl, glState, function(gl) {\n    // Bind the real default framebuffer\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n\n    // Make sure the GL state is in a good place\n    if (self.cullFace) { self.realDisable.call(gl, gl.CULL_FACE); }\n    if (self.depthTest) { self.realDisable.call(gl, gl.DEPTH_TEST); }\n    if (self.blend) { self.realDisable.call(gl, gl.BLEND); }\n    if (self.scissorTest) { self.realDisable.call(gl, gl.SCISSOR_TEST); }\n    if (self.stencilTest) { self.realDisable.call(gl, gl.STENCIL_TEST); }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n    // If the backbuffer has an alpha channel clear every frame so the page\n    // doesn't show through.\n    if (self.ctxAttribs.alpha || Util.isIOS()) {\n      self.realClearColor.call(gl, 0, 0, 0, 1);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n\n    // Bind distortion program and mesh\n    gl.useProgram(self.program);\n\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.enableVertexAttribArray(self.attribs.position);\n    gl.enableVertexAttribArray(self.attribs.texCoord);\n    gl.vertexAttribPointer(self.attribs.position, 2, gl.FLOAT, false, 20, 0);\n    gl.vertexAttribPointer(self.attribs.texCoord, 3, gl.FLOAT, false, 20, 8);\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.uniform1i(self.uniforms.diffuse, 0);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n\n    gl.uniform4fv(self.uniforms.viewportOffsetScale, self.viewportOffsetScale);\n\n    // Draws both eyes\n    gl.drawElements(gl.TRIANGLES, self.indexCount, gl.UNSIGNED_SHORT, 0);\n\n    if (self.cardboardUI) {\n      self.cardboardUI.renderNoState();\n    }\n\n    // Bind the fake default framebuffer again\n    self.realBindFramebuffer.call(self.gl, gl.FRAMEBUFFER, self.framebuffer);\n\n    // If preserveDrawingBuffer == false clear the framebuffer\n    if (!self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.call(gl, 0, 0, 0, 0);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n\n    if (!WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS) {\n      self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    }\n\n    // Restore state\n    if (self.cullFace) { self.realEnable.call(gl, gl.CULL_FACE); }\n    if (self.depthTest) { self.realEnable.call(gl, gl.DEPTH_TEST); }\n    if (self.blend) { self.realEnable.call(gl, gl.BLEND); }\n    if (self.scissorTest) { self.realEnable.call(gl, gl.SCISSOR_TEST); }\n    if (self.stencilTest) { self.realEnable.call(gl, gl.STENCIL_TEST); }\n\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    if (self.ctxAttribs.alpha || !self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.apply(gl, self.clearColor);\n    }\n  });\n\n  // Workaround for the fact that Safari doesn't allow us to patch the canvas\n  // width and height correctly. After each submit frame check to see what the\n  // real backbuffer size has been set to and resize the fake backbuffer size\n  // to match.\n  if (Util.isIOS()) {\n    var canvas = gl.canvas;\n    if (canvas.width != self.bufferWidth || canvas.height != self.bufferHeight) {\n      self.bufferWidth = canvas.width;\n      self.bufferHeight = canvas.height;\n      self.onResize();\n    }\n  }\n};\n\n/**\n * Call when the deviceInfo has changed. At this point we need\n * to re-calculate the distortion mesh.\n */\nCardboardDistorter.prototype.updateDeviceInfo = function(deviceInfo) {\n  var gl = this.gl;\n  var self = this;\n\n  var glState = [gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING];\n  WGLUPreserveGLState(gl, glState, function(gl) {\n    var vertices = self.computeMeshVertices_(self.meshWidth, self.meshHeight, deviceInfo);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n\n    // Indices don't change based on device parameters, so only compute once.\n    if (!self.indexCount) {\n      var indices = self.computeMeshIndices_(self.meshWidth, self.meshHeight);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n      self.indexCount = indices.length;\n    }\n  });\n};\n\n/**\n * Build the distortion mesh vertices.\n * Based on code from the Unity cardboard plugin.\n */\nCardboardDistorter.prototype.computeMeshVertices_ = function(width, height, deviceInfo) {\n  var vertices = new Float32Array(2 * width * height * 5);\n\n  var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();\n  var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();\n  var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);\n  var vidx = 0;\n  var iidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        var u = i / (width - 1);\n        var v = j / (height - 1);\n\n        // Grid points regularly spaced in StreoScreen, and barrel distorted in\n        // the mesh.\n        var s = u;\n        var t = v;\n        var x = Util.lerp(lensFrustum[0], lensFrustum[2], u);\n        var y = Util.lerp(lensFrustum[3], lensFrustum[1], v);\n        var d = Math.sqrt(x * x + y * y);\n        var r = deviceInfo.distortion.distortInverse(d);\n        var p = x * r / d;\n        var q = y * r / d;\n        u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);\n        v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);\n\n        // Convert u,v to mesh screen coordinates.\n        var aspect = deviceInfo.device.widthMeters / deviceInfo.device.heightMeters;\n\n        // FIXME: The original Unity plugin multiplied U by the aspect ratio\n        // and didn't multiply either value by 2, but that seems to get it\n        // really close to correct looking for me. I hate this kind of \"Don't\n        // know why it works\" code though, and wold love a more logical\n        // explanation of what needs to happen here.\n        u = (viewport.x + u * viewport.width - 0.5) * 2.0; //* aspect;\n        v = (viewport.y + v * viewport.height - 0.5) * 2.0;\n\n        vertices[(vidx * 5) + 0] = u; // position.x\n        vertices[(vidx * 5) + 1] = v; // position.y\n        vertices[(vidx * 5) + 2] = s; // texCoord.x\n        vertices[(vidx * 5) + 3] = t; // texCoord.y\n        vertices[(vidx * 5) + 4] = e; // texCoord.z (viewport index)\n      }\n    }\n    var w = lensFrustum[2] - lensFrustum[0];\n    lensFrustum[0] = -(w + lensFrustum[0]);\n    lensFrustum[2] = w - lensFrustum[2];\n    w = noLensFrustum[2] - noLensFrustum[0];\n    noLensFrustum[0] = -(w + noLensFrustum[0]);\n    noLensFrustum[2] = w - noLensFrustum[2];\n    viewport.x = 1 - (viewport.x + viewport.width);\n  }\n  return vertices;\n}\n\n/**\n * Build the distortion mesh indices.\n * Based on code from the Unity cardboard plugin.\n */\nCardboardDistorter.prototype.computeMeshIndices_ = function(width, height) {\n  var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);\n  var halfwidth = width / 2;\n  var halfheight = height / 2;\n  var vidx = 0;\n  var iidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        if (i == 0 || j == 0)\n          continue;\n        // Build a quad.  Lower right and upper left quadrants have quads with\n        // the triangle diagonal flipped to get the vignette to interpolate\n        // correctly.\n        if ((i <= halfwidth) == (j <= halfheight)) {\n          // Quad diagonal lower left to upper right.\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - 1;\n        } else {\n          // Quad diagonal upper left to lower right.\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width - 1;\n        }\n      }\n    }\n  }\n  return indices;\n};\n\nCardboardDistorter.prototype.getOwnPropertyDescriptor_ = function(proto, attrName) {\n  var descriptor = Object.getOwnPropertyDescriptor(proto, attrName);\n  // In some cases (ahem... Safari), the descriptor returns undefined get and\n  // set fields. In this case, we need to create a synthetic property\n  // descriptor. This works around some of the issues in\n  // https://github.com/borismus/webvr-polyfill/issues/46\n  if (descriptor.get === undefined || descriptor.set === undefined) {\n    descriptor.configurable = true;\n    descriptor.enumerable = true;\n    descriptor.get = function() {\n      return this.getAttribute(attrName);\n    };\n    descriptor.set = function(val) {\n      this.setAttribute(attrName, val);\n    };\n  }\n  return descriptor;\n};\n\nmodule.exports = CardboardDistorter;\n\n},{\"./cardboard-ui.js\":6,\"./deps/wglu-preserve-state.js\":8,\"./util.js\":24}],6:[function(_dereq_,module,exports){\n/*\n * Copyright 2016 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = _dereq_('./util.js');\nvar WGLUPreserveGLState = _dereq_('./deps/wglu-preserve-state.js');\n\nvar uiVS = [\n  'attribute vec2 position;',\n\n  'uniform mat4 projectionMat;',\n\n  'void main() {',\n  '  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );',\n  '}',\n].join('\\n');\n\nvar uiFS = [\n  'precision mediump float;',\n\n  'uniform vec4 color;',\n\n  'void main() {',\n  '  gl_FragColor = color;',\n  '}',\n].join('\\n');\n\nvar DEG2RAD = Math.PI/180.0;\n\n// The gear has 6 identical sections, each spanning 60 degrees.\nvar kAnglePerGearSection = 60;\n\n// Half-angle of the span of the outer rim.\nvar kOuterRimEndAngle = 12;\n\n// Angle between the middle of the outer rim and the start of the inner rim.\nvar kInnerRimBeginAngle = 20;\n\n// Distance from center to outer rim, normalized so that the entire model\n// fits in a [-1, 1] x [-1, 1] square.\nvar kOuterRadius = 1;\n\n// Distance from center to depressed rim, in model units.\nvar kMiddleRadius = 0.75;\n\n// Radius of the inner hollow circle, in model units.\nvar kInnerRadius = 0.3125;\n\n// Center line thickness in DP.\nvar kCenterLineThicknessDp = 4;\n\n// Button width in DP.\nvar kButtonWidthDp = 28;\n\n// Factor to scale the touch area that responds to the touch.\nvar kTouchSlopFactor = 1.5;\n\nvar Angles = [\n  0, kOuterRimEndAngle, kInnerRimBeginAngle,\n  kAnglePerGearSection - kInnerRimBeginAngle,\n  kAnglePerGearSection - kOuterRimEndAngle\n];\n\n/**\n * Renders the alignment line and \"options\" gear. It is assumed that the canvas\n * this is rendered into covers the entire screen (or close to it.)\n */\nfunction CardboardUI(gl) {\n  this.gl = gl;\n\n  this.attribs = {\n    position: 0\n  };\n  this.program = Util.linkProgram(gl, uiVS, uiFS, this.attribs);\n  this.uniforms = Util.getProgramUniforms(gl, this.program);\n\n  this.vertexBuffer = gl.createBuffer();\n  this.gearOffset = 0;\n  this.gearVertexCount = 0;\n  this.arrowOffset = 0;\n  this.arrowVertexCount = 0;\n\n  this.projMat = new Float32Array(16);\n\n  this.listener = null;\n\n  this.onResize();\n};\n\n/**\n * Tears down all the resources created by the UI renderer.\n */\nCardboardUI.prototype.destroy = function() {\n  var gl = this.gl;\n\n  if (this.listener) {\n    gl.canvas.removeEventListener('click', this.listener, false);\n  }\n\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n};\n\n/**\n * Adds a listener to clicks on the gear and back icons\n */\nCardboardUI.prototype.listen = function(optionsCallback, backCallback) {\n  var canvas = this.gl.canvas;\n  this.listener = function(event) {\n    console.log('event', event);\n    var midline = canvas.clientWidth / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor;\n    // Check to see if the user clicked on (or around) the gear icon\n    if (event.clientX > midline - buttonSize &&\n        event.clientX < midline + buttonSize &&\n        event.clientY > canvas.clientHeight - buttonSize) {\n      optionsCallback(event);\n    }\n    // Check to see if the user clicked on (or around) the back icon\n    else if (event.clientX < buttonSize && event.clientY < buttonSize) {\n      backCallback(event);\n    }\n  };\n  canvas.addEventListener('click', this.listener, false);\n};\n\n/**\n * Builds the UI mesh.\n */\nCardboardUI.prototype.onResize = function() {\n  var gl = this.gl;\n  var self = this;\n\n  var glState = [\n    gl.ARRAY_BUFFER_BINDING\n  ];\n\n  WGLUPreserveGLState(gl, glState, function(gl) {\n    var vertices = [];\n\n    var midline = gl.drawingBufferWidth / 2;\n\n    // Assumes your canvas width and height is scaled proportionately.\n    // TODO(smus): The following causes buttons to become huge on iOS, but seems\n    // like the right thing to do. For now, added a hack. But really, investigate why.\n    var dps = (gl.drawingBufferWidth / (screen.width * window.devicePixelRatio));\n    if (!Util.isIOS()) {\n      dps *= window.devicePixelRatio;\n    }\n\n    var lineWidth = kCenterLineThicknessDp * dps / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor * dps;\n    var buttonScale = kButtonWidthDp * dps / 2;\n    var buttonBorder = ((kButtonWidthDp * kTouchSlopFactor) - kButtonWidthDp) * dps;\n\n    // Build centerline\n    vertices.push(midline - lineWidth, buttonSize);\n    vertices.push(midline - lineWidth, gl.drawingBufferHeight);\n    vertices.push(midline + lineWidth, buttonSize);\n    vertices.push(midline + lineWidth, gl.drawingBufferHeight);\n\n    // Build gear\n    self.gearOffset = (vertices.length / 2);\n\n    function addGearSegment(theta, r) {\n      var angle = (90 - theta) * DEG2RAD;\n      var x = Math.cos(angle);\n      var y = Math.sin(angle);\n      vertices.push(kInnerRadius * x * buttonScale + midline, kInnerRadius * y * buttonScale + buttonScale);\n      vertices.push(r * x * buttonScale + midline, r * y * buttonScale + buttonScale);\n    }\n\n    for (var i = 0; i <= 6; i++) {\n      var segmentTheta = i * kAnglePerGearSection;\n\n      addGearSegment(segmentTheta, kOuterRadius);\n      addGearSegment(segmentTheta + kOuterRimEndAngle, kOuterRadius);\n      addGearSegment(segmentTheta + kInnerRimBeginAngle, kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kInnerRimBeginAngle), kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kOuterRimEndAngle), kOuterRadius);\n    }\n\n    self.gearVertexCount = (vertices.length / 2) - self.gearOffset;\n\n    // Build back arrow\n    self.arrowOffset = (vertices.length / 2);\n\n    function addArrowVertex(x, y) {\n      vertices.push(buttonBorder + x, gl.drawingBufferHeight - buttonBorder - y);\n    }\n\n    var angledLineWidth = lineWidth / Math.sin(45 * DEG2RAD);\n\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, 0);\n    addArrowVertex(buttonScale + angledLineWidth, angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + angledLineWidth);\n\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, buttonScale * 2);\n    addArrowVertex(buttonScale + angledLineWidth, (buttonScale * 2) - angledLineWidth);\n\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n\n    addArrowVertex(angledLineWidth, buttonScale - lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale - lineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale + lineWidth);\n\n    self.arrowVertexCount = (vertices.length / 2) - self.arrowOffset;\n\n    // Buffer data\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n  });\n};\n\n/**\n * Performs distortion pass on the injected backbuffer, rendering it to the real\n * backbuffer.\n */\nCardboardUI.prototype.render = function() {\n  var gl = this.gl;\n  var self = this;\n\n  var glState = [\n    gl.CULL_FACE,\n    gl.DEPTH_TEST,\n    gl.BLEND,\n    gl.SCISSOR_TEST,\n    gl.STENCIL_TEST,\n    gl.COLOR_WRITEMASK,\n    gl.VIEWPORT,\n\n    gl.CURRENT_PROGRAM,\n    gl.ARRAY_BUFFER_BINDING\n  ];\n\n  WGLUPreserveGLState(gl, glState, function(gl) {\n    // Make sure the GL state is in a good place\n    gl.disable(gl.CULL_FACE);\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.BLEND);\n    gl.disable(gl.SCISSOR_TEST);\n    gl.disable(gl.STENCIL_TEST);\n    gl.colorMask(true, true, true, true);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n    self.renderNoState();\n  });\n};\n\nCardboardUI.prototype.renderNoState = function() {\n  var gl = this.gl;\n\n  // Bind distortion program and mesh\n  gl.useProgram(this.program);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n  gl.enableVertexAttribArray(this.attribs.position);\n  gl.vertexAttribPointer(this.attribs.position, 2, gl.FLOAT, false, 8, 0);\n\n  gl.uniform4f(this.uniforms.color, 1.0, 1.0, 1.0, 1.0);\n\n  Util.orthoMatrix(this.projMat, 0, gl.drawingBufferWidth, 0, gl.drawingBufferHeight, 0.1, 1024.0);\n  gl.uniformMatrix4fv(this.uniforms.projectionMat, false, this.projMat);\n\n  // Draws UI element\n  //gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  //gl.drawArrays(gl.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount);\n  //gl.drawArrays(gl.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount);\n};\n\nmodule.exports = CardboardUI;\n\n},{\"./deps/wglu-preserve-state.js\":8,\"./util.js\":24}],7:[function(_dereq_,module,exports){\n/*\n * Copyright 2016 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar CardboardDistorter = _dereq_('./cardboard-distorter.js');\nvar CardboardUI = _dereq_('./cardboard-ui.js');\nvar DeviceInfo = _dereq_('./device-info.js');\nvar Dpdb = _dereq_('./dpdb/dpdb.js');\nvar FusionPoseSensor = _dereq_('./sensor-fusion/fusion-pose-sensor.js');\nvar RotateInstructions = _dereq_('./rotate-instructions.js');\nvar ViewerSelector = _dereq_('./viewer-selector.js');\nvar VRDisplay = _dereq_('./base.js').VRDisplay;\nvar Util = _dereq_('./util.js');\n\nvar Eye = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\n\n/**\n * VRDisplay based on mobile device parameters and DeviceMotion APIs.\n */\nfunction CardboardVRDisplay() {\n  this.displayName = 'Cardboard VRDisplay (webvr-polyfill)';\n\n  this.capabilities.hasOrientation = true;\n  this.capabilities.canPresent = true;\n\n  // \"Private\" members.\n  this.bufferScale_ = WebVRConfig.BUFFER_SCALE;\n  this.poseSensor_ = new FusionPoseSensor();\n  this.distorter_ = null;\n  this.cardboardUI_ = null;\n\n  this.dpdb_ = new Dpdb(true, this.onDeviceParamsUpdated_.bind(this));\n  this.deviceInfo_ = new DeviceInfo(this.dpdb_.getDeviceParams());\n\n  this.viewerSelector_ = new ViewerSelector();\n  this.viewerSelector_.on('change', this.onViewerChanged_.bind(this));\n\n  // Set the correct initial viewer.\n  this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());\n\n  if (!WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED) {\n    this.rotateInstructions_ = new RotateInstructions();\n  }\n\n  if (Util.isIOS()) {\n    // Listen for resize events to workaround this awful Safari bug.\n    window.addEventListener('resize', this.onResize_.bind(this));\n  }\n}\nCardboardVRDisplay.prototype = new VRDisplay();\n\nCardboardVRDisplay.prototype.getImmediatePose = function() {\n  return {\n    position: this.poseSensor_.getPosition(),\n    orientation: this.poseSensor_.getOrientation(),\n    linearVelocity: null,\n    linearAcceleration: null,\n    angularVelocity: null,\n    angularAcceleration: null\n  };\n};\n\nCardboardVRDisplay.prototype.resetPose = function() {\n  this.poseSensor_.resetPose();\n};\n\nCardboardVRDisplay.prototype.getEyeParameters = function(whichEye) {\n  var offset = [this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  var fieldOfView;\n\n  // TODO: FoV can be a little expensive to compute. Cache when device params change.\n  if (whichEye == Eye.LEFT) {\n    offset[0] *= -1.0;\n    fieldOfView = this.deviceInfo_.getFieldOfViewLeftEye();\n  } else if (whichEye == Eye.RIGHT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewRightEye();\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n\n  return {\n    fieldOfView: fieldOfView,\n    offset: offset,\n    // TODO: Should be able to provide better values than these.\n    renderWidth: this.deviceInfo_.device.width * 0.5 * this.bufferScale_,\n    renderHeight: this.deviceInfo_.device.height * this.bufferScale_,\n  };\n};\n\nCardboardVRDisplay.prototype.onDeviceParamsUpdated_ = function(newParams) {\n  console.log('DPDB reported that device params were updated.');\n  this.deviceInfo_.updateDeviceParams(newParams);\n\n  if (this.distorter_) {\n    this.distorter.updateDeviceInfo(this.deviceInfo_);\n  }\n};\n\nCardboardVRDisplay.prototype.beginPresent_ = function() {\n  var gl = this.layer_.source.getContext('webgl');\n  if (!gl)\n    gl = this.layer_.source.getContext('experimental-webgl');\n  if (!gl)\n    gl = this.layer_.source.getContext('webgl2');\n\n  if (!gl)\n    return; // Can't do distortion without a WebGL context.\n\n  // Provides a way to opt out of distortion\n  if (this.layer_.predistorted) {\n    if (!WebVRConfig.CARDBOARD_UI_DISABLED) {\n      gl.canvas.width = Util.getScreenWidth() * this.bufferScale_;\n      gl.canvas.height = Util.getScreenHeight() * this.bufferScale_;\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n  } else {\n    // Create a new distorter for the target context\n    this.distorter_ = new CardboardDistorter(gl);\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n    this.cardboardUI_ = this.distorter_.cardboardUI;\n\n    if (this.layer_.leftBounds || this.layer_.rightBounds) {\n      this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds);\n    }\n  }\n\n  if (this.cardboardUI_) {\n    this.cardboardUI_.listen(function(e) {\n      // Options clicked.\n      this.viewerSelector_.show(this.layer_.source.parentElement);\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this), function(e) {\n      // Back clicked.\n      this.exitPresent();\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this));\n  }\n\n  if (this.rotateInstructions_) {\n    if (Util.isLandscapeMode() && Util.isMobile()) {\n      // In landscape mode, temporarily show the \"put into Cardboard\"\n      // interstitial. Otherwise, do the default thing.\n      this.rotateInstructions_.showTemporarily(3000, this.layer_.source.parentElement);\n    } else {\n      this.rotateInstructions_.update();\n    }\n  }\n\n  // Listen for orientation change events in order to show interstitial.\n  this.orientationHandler = this.onOrientationChange_.bind(this);\n  window.addEventListener('orientationchange', this.orientationHandler);\n\n  // Fire this event initially, to give geometry-distortion clients the chance\n  // to do something custom.\n  this.fireVRDisplayDeviceParamsChange_();\n};\n\nCardboardVRDisplay.prototype.endPresent_ = function() {\n  if (this.distorter_) {\n    this.distorter_.destroy();\n    this.distorter_ = null;\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.destroy();\n    this.cardboardUI_ = null;\n  }\n\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.hide();\n  }\n  this.viewerSelector_.hide();\n\n  window.removeEventListener('orientationchange', this.orientationHandler);\n};\n\nCardboardVRDisplay.prototype.submitFrame = function(pose) {\n  if (this.distorter_) {\n    this.distorter_.submitFrame();\n  } else if (this.cardboardUI_ && this.layer_) {\n    // Hack for predistorted: true.\n    var canvas = this.layer_.source.getContext('webgl').canvas;\n    if (canvas.width != this.lastWidth || canvas.height != this.lastHeight) {\n      this.cardboardUI_.onResize();\n    }\n    this.lastWidth = canvas.width;\n    this.lastHeight = canvas.height;\n\n    // Render the Cardboard UI.\n    this.cardboardUI_.render();\n  }\n};\n\nCardboardVRDisplay.prototype.onOrientationChange_ = function(e) {\n\n  // Hide the viewer selector.\n  this.viewerSelector_.hide();\n\n  // Update the rotate instructions.\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.update();\n  }\n\n  this.onResize_();\n};\n\nCardboardVRDisplay.prototype.onResize_ = function(e) {\n  if (this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    // Size the CSS canvas.\n    // Added padding on right and bottom because iPhone 5 will not\n    // hide the URL bar unless content is bigger than the screen.\n    // This will not be visible as long as the container element (e.g. body)\n    // is set to 'overflow: hidden'.\n    var cssProperties = [\n      'position: absolute',\n      'top: 0',\n      'left: 0',\n      'width: ' + Math.max(screen.width, screen.height) + 'px',\n      'height: ' + Math.min(screen.height, screen.width) + 'px',\n      'border: 0',\n      'margin: 0',\n      'padding: 0 10px 10px 0',\n    ];\n    gl.canvas.setAttribute('style', cssProperties.join('; ') + ';');\n\n    Util.safariCssSizeWorkaround(gl.canvas);\n  }\n};\n\nCardboardVRDisplay.prototype.onViewerChanged_ = function(viewer) {\n  this.deviceInfo_.setViewer(viewer);\n\n  if (this.distorter_) {\n    // Update the distortion appropriately.\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n\n  // Fire a new event containing viewer and device parameters for clients that\n  // want to implement their own geometry-based distortion.\n  this.fireVRDisplayDeviceParamsChange_();\n};\n\nCardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_ = function() {\n  var event = new CustomEvent('vrdisplaydeviceparamschange', {\n    detail: {\n      vrdisplay: this,\n      deviceInfo: this.deviceInfo_,\n    }\n  });\n  window.dispatchEvent(event);\n};\n\nmodule.exports = CardboardVRDisplay;\n\n},{\"./base.js\":4,\"./cardboard-distorter.js\":5,\"./cardboard-ui.js\":6,\"./device-info.js\":9,\"./dpdb/dpdb.js\":13,\"./rotate-instructions.js\":18,\"./sensor-fusion/fusion-pose-sensor.js\":20,\"./util.js\":24,\"./viewer-selector.js\":25}],8:[function(_dereq_,module,exports){\n/*\nCopyright (c) 2016, Brandon Jones.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\n/*\nCaches specified GL state, runs a callback, and restores the cached state when\ndone.\n\nExample usage:\n\nvar savedState = [\n  gl.ARRAY_BUFFER_BINDING,\n\n  // TEXTURE_BINDING_2D or _CUBE_MAP must always be followed by the texure unit.\n  gl.TEXTURE_BINDING_2D, gl.TEXTURE0,\n\n  gl.CLEAR_COLOR,\n];\n// After this call the array buffer, texture unit 0, active texture, and clear\n// color will be restored. The viewport will remain changed, however, because\n// gl.VIEWPORT was not included in the savedState list.\nWGLUPreserveGLState(gl, savedState, function(gl) {\n  gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.bufferData(gl.ARRAY_BUFFER, ....);\n\n  gl.activeTexture(gl.TEXTURE0);\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n  gl.texImage2D(gl.TEXTURE_2D, ...);\n\n  gl.clearColor(1, 0, 0, 1);\n  gl.clear(gl.COLOR_BUFFER_BIT);\n});\n\nNote that this is not intended to be fast. Managing state in your own code to\navoid redundant state setting and querying will always be faster. This function\nis most useful for cases where you may not have full control over the WebGL\ncalls being made, such as tooling or effect injectors.\n*/\n\nfunction WGLUPreserveGLState(gl, bindings, callback) {\n  if (!bindings) {\n    callback(gl);\n    return;\n  }\n\n  var boundValues = [];\n\n  var activeTexture = null;\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    switch (binding) {\n      case gl.TEXTURE_BINDING_2D:\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) {\n          console.error(\"TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit\");\n          boundValues.push(null, null);\n          break;\n        }\n        if (!activeTexture) {\n          activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        }\n        gl.activeTexture(textureUnit);\n        boundValues.push(gl.getParameter(binding), null);\n        break;\n      case gl.ACTIVE_TEXTURE:\n        activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        boundValues.push(null);\n        break;\n      default:\n        boundValues.push(gl.getParameter(binding));\n        break;\n    }\n  }\n\n  callback(gl);\n\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    var boundValue = boundValues[i];\n    switch (binding) {\n      case gl.ACTIVE_TEXTURE:\n        break; // Ignore this binding, since we special-case it to happen last.\n      case gl.ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ARRAY_BUFFER, boundValue);\n        break;\n      case gl.COLOR_CLEAR_VALUE:\n        gl.clearColor(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.COLOR_WRITEMASK:\n        gl.colorMask(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.CURRENT_PROGRAM:\n        gl.useProgram(boundValue);\n        break;\n      case gl.ELEMENT_ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, boundValue);\n        break;\n      case gl.FRAMEBUFFER_BINDING:\n        gl.bindFramebuffer(gl.FRAMEBUFFER, boundValue);\n        break;\n      case gl.RENDERBUFFER_BINDING:\n        gl.bindRenderbuffer(gl.RENDERBUFFER, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_2D:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_2D, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, boundValue);\n        break;\n      case gl.VIEWPORT:\n        gl.viewport(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.BLEND:\n      case gl.CULL_FACE:\n      case gl.DEPTH_TEST:\n      case gl.SCISSOR_TEST:\n      case gl.STENCIL_TEST:\n        if (boundValue) {\n          gl.enable(binding);\n        } else {\n          gl.disable(binding);\n        }\n        break;\n      default:\n        console.log(\"No GL restore behavior for 0x\" + binding.toString(16));\n        break;\n    }\n\n    if (activeTexture) {\n      gl.activeTexture(activeTexture);\n    }\n  }\n}\n\nmodule.exports = WGLUPreserveGLState;\n},{}],9:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Distortion = _dereq_('./distortion/distortion.js');\nvar MathUtil = _dereq_('./math-util.js');\nvar Util = _dereq_('./util.js');\n\nfunction Device(params) {\n  this.width = params.width || Util.getScreenWidth();\n  this.height = params.height || Util.getScreenHeight();\n  this.widthMeters = params.widthMeters;\n  this.heightMeters = params.heightMeters;\n  this.bevelMeters = params.bevelMeters;\n}\n\n\n// Fallback Android device (based on Nexus 5 measurements) for use when\n// we can't recognize an Android device.\nvar DEFAULT_ANDROID = new Device({\n  widthMeters: 0.110,\n  heightMeters: 0.062,\n  bevelMeters: 0.004\n});\n\n// Fallback iOS device (based on iPhone6) for use when\n// we can't recognize an Android device.\nvar DEFAULT_IOS = new Device({\n  widthMeters: 0.1038,\n  heightMeters: 0.0584,\n  bevelMeters: 0.004\n});\n\n\nvar Viewers = {\n  CardboardV1: new CardboardViewer({\n    id: 'CardboardV1',\n    label: 'Cardboard I/O 2014',\n    fov: 40,\n    interLensDistance: 0.060,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.042,\n    distortionCoefficients: [0.441, 0.156],\n    inverseCoefficients: [-0.4410035, 0.42756155, -0.4804439, 0.5460139,\n      -0.58821183, 0.5733938, -0.48303202, 0.33299083, -0.17573841,\n      0.0651772, -0.01488963, 0.001559834]\n  }),\n  CardboardV2: new CardboardViewer({\n    id: 'CardboardV2',\n    label: 'Cardboard I/O 2015',\n    fov: 60,\n    interLensDistance: 0.064,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.039,\n    distortionCoefficients: [0.34, 0.55],\n    inverseCoefficients: [-0.33836704, -0.18162185, 0.862655, -1.2462051,\n      1.0560602, -0.58208317, 0.21609078, -0.05444823, 0.009177956,\n      -9.904169E-4, 6.183535E-5, -1.6981803E-6]\n  })\n};\n\n\nvar DEFAULT_LEFT_CENTER = {x: 0.5, y: 0.5};\nvar DEFAULT_RIGHT_CENTER = {x: 0.5, y: 0.5};\n\n/**\n * Manages information about the device and the viewer.\n *\n * deviceParams indicates the parameters of the device to use (generally\n * obtained from dpdb.getDeviceParams()). Can be null to mean no device\n * params were found.\n */\nfunction DeviceInfo(deviceParams) {\n  this.viewer = Viewers.CardboardV2;\n  this.updateDeviceParams(deviceParams);\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n}\n\nDeviceInfo.prototype.updateDeviceParams = function(deviceParams) {\n  this.device = this.determineDevice_(deviceParams) || this.device;\n};\n\nDeviceInfo.prototype.getDevice = function() {\n  return this.device;\n};\n\nDeviceInfo.prototype.setViewer = function(viewer) {\n  this.viewer = viewer;\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n};\n\nDeviceInfo.prototype.determineDevice_ = function(deviceParams) {\n  if (!deviceParams) {\n    // No parameters, so use a default.\n    if (Util.isIOS()) {\n      console.warn('Using fallback iOS device measurements.');\n      return DEFAULT_IOS;\n    } else {\n      console.warn('Using fallback Android device measurements.');\n      return DEFAULT_ANDROID;\n    }\n  }\n\n  // Compute device screen dimensions based on deviceParams.\n  var METERS_PER_INCH = 0.0254;\n  var metersPerPixelX = METERS_PER_INCH / deviceParams.xdpi;\n  var metersPerPixelY = METERS_PER_INCH / deviceParams.ydpi;\n  var width = Util.getScreenWidth();\n  var height = Util.getScreenHeight();\n  return new Device({\n    widthMeters: metersPerPixelX * width,\n    heightMeters: metersPerPixelY * height,\n    bevelMeters: deviceParams.bevelMm * 0.001,\n  });\n};\n\n/**\n * Calculates field of view for the left eye.\n */\nDeviceInfo.prototype.getDistortedFieldOfViewLeftEye = function() {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n\n  // Device.height and device.width for device in portrait mode, so transpose.\n  var eyeToScreenDistance = viewer.screenLensDistance;\n\n  var outerDist = (device.widthMeters - viewer.interLensDistance) / 2;\n  var innerDist = viewer.interLensDistance / 2;\n  var bottomDist = viewer.baselineLensDistance - device.bevelMeters;\n  var topDist = device.heightMeters - bottomDist;\n\n  var outerAngle = MathUtil.radToDeg * Math.atan(\n      distortion.distort(outerDist / eyeToScreenDistance));\n  var innerAngle = MathUtil.radToDeg * Math.atan(\n      distortion.distort(innerDist / eyeToScreenDistance));\n  var bottomAngle = MathUtil.radToDeg * Math.atan(\n      distortion.distort(bottomDist / eyeToScreenDistance));\n  var topAngle = MathUtil.radToDeg * Math.atan(\n      distortion.distort(topDist / eyeToScreenDistance));\n\n  return {\n    leftDegrees: Math.min(outerAngle, viewer.fov),\n    rightDegrees: Math.min(innerAngle, viewer.fov),\n    downDegrees: Math.min(bottomAngle, viewer.fov),\n    upDegrees: Math.min(topAngle, viewer.fov)\n  };\n};\n\n/**\n * Calculates the tan-angles from the maximum FOV for the left eye for the\n * current device and screen parameters.\n */\nDeviceInfo.prototype.getLeftEyeVisibleTanAngles = function() {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n\n  // Tan-angles from the max FOV.\n  var fovLeft = Math.tan(-MathUtil.degToRad * viewer.fov);\n  var fovTop = Math.tan(MathUtil.degToRad * viewer.fov);\n  var fovRight = Math.tan(MathUtil.degToRad * viewer.fov);\n  var fovBottom = Math.tan(-MathUtil.degToRad * viewer.fov);\n  // Viewport size.\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  // Viewport center, measured from left lens position.\n  var verticalLensOffset = (viewer.baselineLensDistance - device.bevelMeters - halfHeight);\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  // Tan-angles of the viewport edges, as seen through the lens.\n  var screenLeft = distortion.distort((centerX - halfWidth) / centerZ);\n  var screenTop = distortion.distort((centerY + halfHeight) / centerZ);\n  var screenRight = distortion.distort((centerX + halfWidth) / centerZ);\n  var screenBottom = distortion.distort((centerY - halfHeight) / centerZ);\n  // Compare the two sets of tan-angles and take the value closer to zero on each side.\n  var result = new Float32Array(4);\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\n\n/**\n * Calculates the tan-angles from the maximum FOV for the left eye for the\n * current device and screen parameters, assuming no lenses.\n */\nDeviceInfo.prototype.getLeftEyeNoLensTanAngles = function() {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n\n  var result = new Float32Array(4);\n  // Tan-angles from the max FOV.\n  var fovLeft = distortion.distortInverse(Math.tan(-MathUtil.degToRad * viewer.fov));\n  var fovTop = distortion.distortInverse(Math.tan(MathUtil.degToRad * viewer.fov));\n  var fovRight = distortion.distortInverse(Math.tan(MathUtil.degToRad * viewer.fov));\n  var fovBottom = distortion.distortInverse(Math.tan(-MathUtil.degToRad * viewer.fov));\n  // Viewport size.\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  // Viewport center, measured from left lens position.\n  var verticalLensOffset = (viewer.baselineLensDistance - device.bevelMeters - halfHeight);\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  // Tan-angles of the viewport edges, as seen through the lens.\n  var screenLeft = (centerX - halfWidth) / centerZ;\n  var screenTop = (centerY + halfHeight) / centerZ;\n  var screenRight = (centerX + halfWidth) / centerZ;\n  var screenBottom = (centerY - halfHeight) / centerZ;\n  // Compare the two sets of tan-angles and take the value closer to zero on each side.\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\n\n/**\n * Calculates the screen rectangle visible from the left eye for the\n * current device and screen parameters.\n */\nDeviceInfo.prototype.getLeftEyeVisibleScreenRect = function(undistortedFrustum) {\n  var viewer = this.viewer;\n  var device = this.device;\n\n  var dist = viewer.screenLensDistance;\n  var eyeX = (device.widthMeters - viewer.interLensDistance) / 2;\n  var eyeY = viewer.baselineLensDistance - device.bevelMeters;\n  var left = (undistortedFrustum[0] * dist + eyeX) / device.widthMeters;\n  var top = (undistortedFrustum[1] * dist + eyeY) / device.heightMeters;\n  var right = (undistortedFrustum[2] * dist + eyeX) / device.widthMeters;\n  var bottom = (undistortedFrustum[3] * dist + eyeY) / device.heightMeters;\n  return {\n    x: left,\n    y: bottom,\n    width: right - left,\n    height: top - bottom\n  };\n};\n\nDeviceInfo.prototype.getFieldOfViewLeftEye = function(opt_isUndistorted) {\n  return opt_isUndistorted ? this.getUndistortedFieldOfViewLeftEye() :\n      this.getDistortedFieldOfViewLeftEye();\n};\n\nDeviceInfo.prototype.getFieldOfViewRightEye = function(opt_isUndistorted) {\n  var fov = this.getFieldOfViewLeftEye(opt_isUndistorted);\n  return {\n    leftDegrees: fov.rightDegrees,\n    rightDegrees: fov.leftDegrees,\n    upDegrees: fov.upDegrees,\n    downDegrees: fov.downDegrees\n  };\n};\n\n/**\n * Calculates undistorted field of view for the left eye.\n */\nDeviceInfo.prototype.getUndistortedFieldOfViewLeftEye = function() {\n  var p = this.getUndistortedParams_();\n\n  return {\n    leftDegrees: MathUtil.radToDeg * Math.atan(p.outerDist),\n    rightDegrees: MathUtil.radToDeg * Math.atan(p.innerDist),\n    downDegrees: MathUtil.radToDeg * Math.atan(p.bottomDist),\n    upDegrees: MathUtil.radToDeg * Math.atan(p.topDist)\n  };\n};\n\nDeviceInfo.prototype.getUndistortedViewportLeftEye = function() {\n  var p = this.getUndistortedParams_();\n  var viewer = this.viewer;\n  var device = this.device;\n\n  // Distances stored in local variables are in tan-angle units unless otherwise\n  // noted.\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var xPxPerTanAngle = device.width / screenWidth;\n  var yPxPerTanAngle = device.height / screenHeight;\n\n  var x = Math.round((p.eyePosX - p.outerDist) * xPxPerTanAngle);\n  var y = Math.round((p.eyePosY - p.bottomDist) * yPxPerTanAngle);\n  return {\n    x: x,\n    y: y,\n    width: Math.round((p.eyePosX + p.innerDist) * xPxPerTanAngle) - x,\n    height: Math.round((p.eyePosY + p.topDist) * yPxPerTanAngle) - y\n  };\n};\n\nDeviceInfo.prototype.getUndistortedParams_ = function() {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n\n  // Most of these variables in tan-angle units.\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var halfLensDistance = viewer.interLensDistance / 2 / eyeToScreenDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n\n  var eyePosX = screenWidth / 2 - halfLensDistance;\n  var eyePosY = (viewer.baselineLensDistance - device.bevelMeters) / eyeToScreenDistance;\n\n  var maxFov = viewer.fov;\n  var viewerMax = distortion.distortInverse(Math.tan(MathUtil.degToRad * maxFov));\n  var outerDist = Math.min(eyePosX, viewerMax);\n  var innerDist = Math.min(halfLensDistance, viewerMax);\n  var bottomDist = Math.min(eyePosY, viewerMax);\n  var topDist = Math.min(screenHeight - eyePosY, viewerMax);\n\n  return {\n    outerDist: outerDist,\n    innerDist: innerDist,\n    topDist: topDist,\n    bottomDist: bottomDist,\n    eyePosX: eyePosX,\n    eyePosY: eyePosY\n  };\n};\n\n\nfunction CardboardViewer(params) {\n  // A machine readable ID.\n  this.id = params.id;\n  // A human readable label.\n  this.label = params.label;\n\n  // Field of view in degrees (per side).\n  this.fov = params.fov;\n\n  // Distance between lens centers in meters.\n  this.interLensDistance = params.interLensDistance;\n  // Distance between viewer baseline and lens center in meters.\n  this.baselineLensDistance = params.baselineLensDistance;\n  // Screen-to-lens distance in meters.\n  this.screenLensDistance = params.screenLensDistance;\n\n  // Distortion coefficients.\n  this.distortionCoefficients = params.distortionCoefficients;\n  // Inverse distortion coefficients.\n  // TODO: Calculate these from distortionCoefficients in the future.\n  this.inverseCoefficients = params.inverseCoefficients;\n}\n\n// Export viewer information.\nDeviceInfo.Viewers = Viewers;\nmodule.exports = DeviceInfo;\n\n},{\"./distortion/distortion.js\":11,\"./math-util.js\":16,\"./util.js\":24}],10:[function(_dereq_,module,exports){\n/*\n * Copyright 2016 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar VRDisplay = _dereq_('./base.js').VRDisplay;\nvar HMDVRDevice = _dereq_('./base.js').HMDVRDevice;\nvar PositionSensorVRDevice = _dereq_('./base.js').PositionSensorVRDevice;\n\n/**\n * Wraps a VRDisplay and exposes it as a HMDVRDevice\n */\nfunction VRDisplayHMDDevice(display) {\n  this.display = display;\n\n  this.hardwareUnitId = display.displayId;\n  this.deviceId = 'webvr-polyfill:HMD:' + display.displayId;\n  this.deviceName = display.displayName + ' (HMD)';\n}\nVRDisplayHMDDevice.prototype = new HMDVRDevice();\n\nVRDisplayHMDDevice.prototype.getEyeParameters = function(whichEye) {\n  var eyeParameters = this.display.getEyeParameters(whichEye);\n\n  return {\n    currentFieldOfView: eyeParameters.fieldOfView,\n    maximumFieldOfView: eyeParameters.fieldOfView,\n    minimumFieldOfView: eyeParameters.fieldOfView,\n    recommendedFieldOfView: eyeParameters.fieldOfView,\n    eyeTranslation: { x: eyeParameters.offset[0], y: eyeParameters.offset[1], z: eyeParameters.offset[2] },\n    renderRect: {\n      x: (whichEye == 'right') ? eyeParameters.renderWidth : 0,\n      y: 0,\n      width: eyeParameters.renderWidth,\n      height: eyeParameters.renderHeight\n    }\n  };\n};\n\nVRDisplayHMDDevice.prototype.setFieldOfView =\n    function(opt_fovLeft, opt_fovRight, opt_zNear, opt_zFar) {\n  // Not supported. getEyeParameters reports that the min, max, and recommended\n  // FoV is all the same, so no adjustment can be made.\n};\n\n// TODO: Need to hook requestFullscreen to see if a wrapped VRDisplay was passed\n// in as an option. If so we should prevent the default fullscreen behavior and\n// call VRDisplay.requestPresent instead.\n\n/**\n * Wraps a VRDisplay and exposes it as a PositionSensorVRDevice\n */\nfunction VRDisplayPositionSensorDevice(display) {\n  this.display = display;\n\n  this.hardwareUnitId = display.displayId;\n  this.deviceId = 'webvr-polyfill:PositionSensor: ' + display.displayId;\n  this.deviceName = display.displayName + ' (PositionSensor)';\n}\nVRDisplayPositionSensorDevice.prototype = new PositionSensorVRDevice();\n\nVRDisplayPositionSensorDevice.prototype.getState = function() {\n  var pose = this.display.getPose();\n  return {\n    position: pose.position ? { x: pose.position[0], y: pose.position[1], z: pose.position[2] } : null,\n    orientation: pose.orientation ? { x: pose.orientation[0], y: pose.orientation[1], z: pose.orientation[2], w: pose.orientation[3] } : null,\n    linearVelocity: null,\n    linearAcceleration: null,\n    angularVelocity: null,\n    angularAcceleration: null\n  };\n};\n\nVRDisplayPositionSensorDevice.prototype.resetState = function() {\n  return this.positionDevice.resetPose();\n};\n\n\nmodule.exports.VRDisplayHMDDevice = VRDisplayHMDDevice;\nmodule.exports.VRDisplayPositionSensorDevice = VRDisplayPositionSensorDevice;\n\n\n},{\"./base.js\":4}],11:[function(_dereq_,module,exports){\n/**\n * TODO(smus): Implement coefficient inversion.\n */\nfunction Distortion(coefficients) {\n  this.coefficients = coefficients;\n}\n\n/**\n * Calculates the inverse distortion for a radius.\n * </p><p>\n * Allows to compute the original undistorted radius from a distorted one.\n * See also getApproximateInverseDistortion() for a faster but potentially\n * less accurate method.\n *\n * @param {Number} radius Distorted radius from the lens center in tan-angle units.\n * @return {Number} The undistorted radius in tan-angle units.\n */\nDistortion.prototype.distortInverse = function(radius) {\n  // Secant method.\n  var r0 = 0;\n  var r1 = 1;\n  var dr0 = radius - this.distort(r0);\n  while (Math.abs(r1 - r0) > 0.0001 /** 0.1mm */) {\n    var dr1 = radius - this.distort(r1);\n    var r2 = r1 - dr1 * ((r1 - r0) / (dr1 - dr0));\n    r0 = r1;\n    r1 = r2;\n    dr0 = dr1;\n  }\n  return r1;\n};\n\n/**\n * Distorts a radius by its distortion factor from the center of the lenses.\n *\n * @param {Number} radius Radius from the lens center in tan-angle units.\n * @return {Number} The distorted radius in tan-angle units.\n */\nDistortion.prototype.distort = function(radius) {\n  var r2 = radius * radius;\n  var ret = 0;\n  for (var i = 0; i < this.coefficients.length; i++) {\n    ret = r2 * (ret + this.coefficients[i]);\n  }\n  return (ret + 1) * radius;\n};\n\n// Functions below roughly ported from\n// https://github.com/googlesamples/cardboard-unity/blob/master/Cardboard/Scripts/CardboardProfile.cs#L412\n\n// Solves a small linear equation via destructive gaussian\n// elimination and back substitution.  This isn't generic numeric\n// code, it's just a quick hack to work with the generally\n// well-behaved symmetric matrices for least-squares fitting.\n// Not intended for reuse.\n//\n// @param a Input positive definite symmetrical matrix. Destroyed\n//     during calculation.\n// @param y Input right-hand-side values. Destroyed during calculation.\n// @return Resulting x value vector.\n//\nDistortion.prototype.solveLinear_ = function(a, y) {\n  var n = a.length;\n\n  // Gaussian elimination (no row exchange) to triangular matrix.\n  // The input matrix is a A^T A product which should be a positive\n  // definite symmetrical matrix, and if I remember my linear\n  // algebra right this implies that the pivots will be nonzero and\n  // calculations sufficiently accurate without needing row\n  // exchange.\n  for (var j = 0; j < n - 1; ++j) {\n    for (var k = j + 1; k < n; ++k) {\n      var p = a[j][k] / a[j][j];\n      for (var i = j + 1; i < n; ++i) {\n        a[i][k] -= p * a[i][j];\n      }\n      y[k] -= p * y[j];\n    }\n  }\n  // From this point on, only the matrix elements a[j][i] with i>=j are\n  // valid. The elimination doesn't fill in eliminated 0 values.\n\n  var x = new Array(n);\n\n  // Back substitution.\n  for (var j = n - 1; j >= 0; --j) {\n    var v = y[j];\n    for (var i = j + 1; i < n; ++i) {\n      v -= a[i][j] * x[i];\n    }\n    x[j] = v / a[j][j];\n  }\n\n  return x;\n};\n\n// Solves a least-squares matrix equation.  Given the equation A * x = y, calculate the\n// least-square fit x = inverse(A * transpose(A)) * transpose(A) * y.  The way this works\n// is that, while A is typically not a square matrix (and hence not invertible), A * transpose(A)\n// is always square.  That is:\n//   A * x = y\n//   transpose(A) * (A * x) = transpose(A) * y   <- multiply both sides by transpose(A)\n//   (transpose(A) * A) * x = transpose(A) * y   <- associativity\n//   x = inverse(transpose(A) * A) * transpose(A) * y  <- solve for x\n// Matrix A's row count (first index) must match y's value count.  A's column count (second index)\n// determines the length of the result vector x.\nDistortion.prototype.solveLeastSquares_ = function(matA, vecY) {\n  var i, j, k, sum;\n  var numSamples = matA.length;\n  var numCoefficients = matA[0].length;\n  if (numSamples != vecY.Length) {\n    throw new Error(\"Matrix / vector dimension mismatch\");\n  }\n\n  // Calculate transpose(A) * A\n  var matATA = new Array(numCoefficients);\n  for (k = 0; k < numCoefficients; ++k) {\n    matATA[k] = new Array(numCoefficients);\n    for (j = 0; j < numCoefficients; ++j) {\n      sum = 0;\n      for (i = 0; i < numSamples; ++i) {\n        sum += matA[j][i] * matA[k][i];\n      }\n      matATA[k][j] = sum;\n    }\n  }\n\n  // Calculate transpose(A) * y\n  var vecATY = new Array(numCoefficients);\n  for (j = 0; j < numCoefficients; ++j) {\n    sum = 0;\n    for (i = 0; i < numSamples; ++i) {\n      sum += matA[j][i] * vecY[i];\n    }\n    vecATY[j] = sum;\n  }\n\n  // Now solve (A * transpose(A)) * x = transpose(A) * y.\n  return this.solveLinear_(matATA, vecATY);\n};\n\n/// Calculates an approximate inverse to the given radial distortion parameters.\nDistortion.prototype.approximateInverse = function(maxRadius, numSamples) {\n  maxRadius = maxRadius || 1;\n  numSamples = numSamples || 100;\n  var numCoefficients = 6;\n  var i, j;\n\n  // R + K1*R^3 + K2*R^5 = r, with R = rp = distort(r)\n  // Repeating for numSamples:\n  //   [ R0^3, R0^5 ] * [ K1 ] = [ r0 - R0 ]\n  //   [ R1^3, R1^5 ]   [ K2 ]   [ r1 - R1 ]\n  //   [ R2^3, R2^5 ]            [ r2 - R2 ]\n  //   [ etc... ]                [ etc... ]\n  // That is:\n  //   matA * [K1, K2] = y\n  // Solve:\n  //   [K1, K2] = inverse(transpose(matA) * matA) * transpose(matA) * y\n  var matA = new Array(numCoefficients);\n  for (j = 0; j < numCoefficients; ++j) {\n    matA[j] = new Array(numSamples);\n  }\n  var vecY = new Array(numSamples);\n\n  for (i = 0; i < numSamples; ++i) {\n    var r = maxRadius * (i + 1) / numSamples;\n    var rp = this.distort(r);\n    var v = rp;\n    for (j = 0; j < numCoefficients; ++j) {\n      v *= rp * rp;\n      matA[j][i] = v;\n    }\n    vecY[i] = r - rp;\n  }\n\n  var inverseCoefficients = this.solveLeastSquares_(matA, vecY);\n\n  return new Distortion(inverseCoefficients);\n};\n\nmodule.exports = Distortion;\n\n},{}],12:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * DPDB cache.\n */\nvar DPDB_CACHE = {\n  \"format\": 1,\n  \"last_updated\": \"2016-01-20T00:18:35Z\",\n  \"devices\": [\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"asus/*/Nexus 7/*\" },\n      { \"ua\": \"Nexus 7\" }\n    ],\n    \"dpi\": [ 320.8, 323.0 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"asus/*/ASUS_Z00AD/*\" },\n      { \"ua\": \"ASUS_Z00AD\" }\n    ],\n    \"dpi\": [ 403.0, 404.6 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"HTC/*/HTC6435LVW/*\" },\n      { \"ua\": \"HTC6435LVW\" }\n    ],\n    \"dpi\": [ 449.7, 443.3 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"HTC/*/HTC One XL/*\" },\n      { \"ua\": \"HTC One XL\" }\n    ],\n    \"dpi\": [ 315.3, 314.6 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"htc/*/Nexus 9/*\" },\n      { \"ua\": \"Nexus 9\" }\n    ],\n    \"dpi\": 289.0,\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"HTC/*/HTC One M9/*\" },\n      { \"ua\": \"HTC One M9\" }\n    ],\n    \"dpi\": [ 442.5, 443.3 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"HTC/*/HTC One_M8/*\" },\n      { \"ua\": \"HTC One_M8\" }\n    ],\n    \"dpi\": [ 449.7, 447.4 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"HTC/*/HTC One/*\" },\n      { \"ua\": \"HTC One\" }\n    ],\n    \"dpi\": 472.8,\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"Huawei/*/Nexus 6P/*\" },\n      { \"ua\": \"Nexus 6P\" }\n    ],\n    \"dpi\": [ 515.1, 518.0 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/Nexus 5X/*\" },\n      { \"ua\": \"Nexus 5X\" }\n    ],\n    \"dpi\": [ 422.0, 419.9 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/LGMS345/*\" },\n      { \"ua\": \"LGMS345\" }\n    ],\n    \"dpi\": [ 221.7, 219.1 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/LG-D800/*\" },\n      { \"ua\": \"LG-D800\" }\n    ],\n    \"dpi\": [ 422.0, 424.1 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/LG-D850/*\" },\n      { \"ua\": \"LG-D850\" }\n    ],\n    \"dpi\": [ 537.9, 541.9 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/VS985 4G/*\" },\n      { \"ua\": \"VS985 4G\" }\n    ],\n    \"dpi\": [ 537.9, 535.6 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/Nexus 5/*\" },\n      { \"ua\": \"Nexus 5 \" }\n    ],\n    \"dpi\": [ 442.4, 444.8 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/Nexus 4/*\" },\n      { \"ua\": \"Nexus 4\" }\n    ],\n    \"dpi\": [ 319.8, 318.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/LG-P769/*\" },\n      { \"ua\": \"LG-P769\" }\n    ],\n    \"dpi\": [ 240.6, 247.5 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/LGMS323/*\" },\n      { \"ua\": \"LGMS323\" }\n    ],\n    \"dpi\": [ 206.6, 204.6 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"LGE/*/LGLS996/*\" },\n      { \"ua\": \"LGLS996\" }\n    ],\n    \"dpi\": [ 403.4, 401.5 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"Micromax/*/4560MMX/*\" },\n      { \"ua\": \"4560MMX\" }\n    ],\n    \"dpi\": [ 240.0, 219.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"Micromax/*/A250/*\" },\n      { \"ua\": \"Micromax A250\" }\n    ],\n    \"dpi\": [ 480.0, 446.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"Micromax/*/Micromax AQ4501/*\" },\n      { \"ua\": \"Micromax AQ4501\" }\n    ],\n    \"dpi\": 240.0,\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/DROID RAZR/*\" },\n      { \"ua\": \"DROID RAZR\" }\n    ],\n    \"dpi\": [ 368.1, 256.7 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT830C/*\" },\n      { \"ua\": \"XT830C\" }\n    ],\n    \"dpi\": [ 254.0, 255.9 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1021/*\" },\n      { \"ua\": \"XT1021\" }\n    ],\n    \"dpi\": [ 254.0, 256.7 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1023/*\" },\n      { \"ua\": \"XT1023\" }\n    ],\n    \"dpi\": [ 254.0, 256.7 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1028/*\" },\n      { \"ua\": \"XT1028\" }\n    ],\n    \"dpi\": [ 326.6, 327.6 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1034/*\" },\n      { \"ua\": \"XT1034\" }\n    ],\n    \"dpi\": [ 326.6, 328.4 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1053/*\" },\n      { \"ua\": \"XT1053\" }\n    ],\n    \"dpi\": [ 315.3, 316.1 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1562/*\" },\n      { \"ua\": \"XT1562\" }\n    ],\n    \"dpi\": [ 403.4, 402.7 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/Nexus 6/*\" },\n      { \"ua\": \"Nexus 6 \" }\n    ],\n    \"dpi\": [ 494.3, 489.7 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1063/*\" },\n      { \"ua\": \"XT1063\" }\n    ],\n    \"dpi\": [ 295.0, 296.6 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1064/*\" },\n      { \"ua\": \"XT1064\" }\n    ],\n    \"dpi\": [ 295.0, 295.6 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1092/*\" },\n      { \"ua\": \"XT1092\" }\n    ],\n    \"dpi\": [ 422.0, 424.1 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"motorola/*/XT1095/*\" },\n      { \"ua\": \"XT1095\" }\n    ],\n    \"dpi\": [ 422.0, 423.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"OnePlus/*/A0001/*\" },\n      { \"ua\": \"A0001\" }\n    ],\n    \"dpi\": [ 403.4, 401.0 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"OnePlus/*/ONE E1005/*\" },\n      { \"ua\": \"ONE E1005\" }\n    ],\n    \"dpi\": [ 442.4, 441.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"OnePlus/*/ONE A2005/*\" },\n      { \"ua\": \"ONE A2005\" }\n    ],\n    \"dpi\": [ 391.9, 405.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"OPPO/*/X909/*\" },\n      { \"ua\": \"X909\" }\n    ],\n    \"dpi\": [ 442.4, 444.1 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/GT-I9082/*\" },\n      { \"ua\": \"GT-I9082\" }\n    ],\n    \"dpi\": [ 184.7, 185.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G360P/*\" },\n      { \"ua\": \"SM-G360P\" }\n    ],\n    \"dpi\": [ 196.7, 205.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/Nexus S/*\" },\n      { \"ua\": \"Nexus S\" }\n    ],\n    \"dpi\": [ 234.5, 229.8 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/GT-I9300/*\" },\n      { \"ua\": \"GT-I9300\" }\n    ],\n    \"dpi\": [ 304.8, 303.9 ],\n    \"bw\": 5,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-T230NU/*\" },\n      { \"ua\": \"SM-T230NU\" }\n    ],\n    \"dpi\": 216.0,\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SGH-T399/*\" },\n      { \"ua\": \"SGH-T399\" }\n    ],\n    \"dpi\": [ 217.7, 231.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-N9005/*\" },\n      { \"ua\": \"SM-N9005\" }\n    ],\n    \"dpi\": [ 386.4, 387.0 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SAMSUNG-SM-N900A/*\" },\n      { \"ua\": \"SAMSUNG-SM-N900A\" }\n    ],\n    \"dpi\": [ 386.4, 387.7 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/GT-I9500/*\" },\n      { \"ua\": \"GT-I9500\" }\n    ],\n    \"dpi\": [ 442.5, 443.3 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/GT-I9505/*\" },\n      { \"ua\": \"GT-I9505\" }\n    ],\n    \"dpi\": 439.4,\n    \"bw\": 4,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G900F/*\" },\n      { \"ua\": \"SM-G900F\" }\n    ],\n    \"dpi\": [ 415.6, 431.6 ],\n    \"bw\": 5,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G900M/*\" },\n      { \"ua\": \"SM-G900M\" }\n    ],\n    \"dpi\": [ 415.6, 431.6 ],\n    \"bw\": 5,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G800F/*\" },\n      { \"ua\": \"SM-G800F\" }\n    ],\n    \"dpi\": 326.8,\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G906S/*\" },\n      { \"ua\": \"SM-G906S\" }\n    ],\n    \"dpi\": [ 562.7, 572.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/GT-I9300/*\" },\n      { \"ua\": \"GT-I9300\" }\n    ],\n    \"dpi\": [ 306.7, 304.8 ],\n    \"bw\": 5,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-T535/*\" },\n      { \"ua\": \"SM-T535\" }\n    ],\n    \"dpi\": [ 142.6, 136.4 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-N920C/*\" },\n      { \"ua\": \"SM-N920C\" }\n    ],\n    \"dpi\": [ 515.1, 518.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/GT-I9300I/*\" },\n      { \"ua\": \"GT-I9300I\" }\n    ],\n    \"dpi\": [ 304.8, 305.8 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/GT-I9195/*\" },\n      { \"ua\": \"GT-I9195\" }\n    ],\n    \"dpi\": [ 249.4, 256.7 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SPH-L520/*\" },\n      { \"ua\": \"SPH-L520\" }\n    ],\n    \"dpi\": [ 249.4, 255.9 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SAMSUNG-SGH-I717/*\" },\n      { \"ua\": \"SAMSUNG-SGH-I717\" }\n    ],\n    \"dpi\": 285.8,\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SPH-D710/*\" },\n      { \"ua\": \"SPH-D710\" }\n    ],\n    \"dpi\": [ 217.7, 204.2 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/GT-N7100/*\" },\n      { \"ua\": \"GT-N7100\" }\n    ],\n    \"dpi\": 265.1,\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SCH-I605/*\" },\n      { \"ua\": \"SCH-I605\" }\n    ],\n    \"dpi\": 265.1,\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/Galaxy Nexus/*\" },\n      { \"ua\": \"Galaxy Nexus\" }\n    ],\n    \"dpi\": [ 315.3, 314.2 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-N910H/*\" },\n      { \"ua\": \"SM-N910H\" }\n    ],\n    \"dpi\": [ 515.1, 518.0 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-N910C/*\" },\n      { \"ua\": \"SM-N910C\" }\n    ],\n    \"dpi\": [ 515.2, 520.2 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G130M/*\" },\n      { \"ua\": \"SM-G130M\" }\n    ],\n    \"dpi\": [ 165.9, 164.8 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G928I/*\" },\n      { \"ua\": \"SM-G928I\" }\n    ],\n    \"dpi\": [ 515.1, 518.4 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G920F/*\" },\n      { \"ua\": \"SM-G920F\" }\n    ],\n    \"dpi\": 580.6,\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G920P/*\" },\n      { \"ua\": \"SM-G920P\" }\n    ],\n    \"dpi\": [ 522.5, 577.0 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G925F/*\" },\n      { \"ua\": \"SM-G925F\" }\n    ],\n    \"dpi\": 580.6,\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"samsung/*/SM-G925V/*\" },\n      { \"ua\": \"SM-G925V\" }\n    ],\n    \"dpi\": [ 522.5, 576.6 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"Sony/*/C6903/*\" },\n      { \"ua\": \"C6903\" }\n    ],\n    \"dpi\": [ 442.5, 443.3 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"Sony/*/D6653/*\" },\n      { \"ua\": \"D6653\" }\n    ],\n    \"dpi\": [ 428.6, 427.6 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"Sony/*/E6653/*\" },\n      { \"ua\": \"E6653\" }\n    ],\n    \"dpi\": [ 428.6, 425.7 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"Sony/*/E6853/*\" },\n      { \"ua\": \"E6853\" }\n    ],\n    \"dpi\": [ 403.4, 401.9 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"Sony/*/SGP321/*\" },\n      { \"ua\": \"SGP321\" }\n    ],\n    \"dpi\": [ 224.7, 224.1 ],\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"TCT/*/ALCATEL ONE TOUCH Fierce/*\" },\n      { \"ua\": \"ALCATEL ONE TOUCH Fierce\" }\n    ],\n    \"dpi\": [ 240.0, 247.5 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"THL/*/thl 5000/*\" },\n      { \"ua\": \"thl 5000\" }\n    ],\n    \"dpi\": [ 480.0, 443.3 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"android\",\n    \"rules\": [\n      { \"mdmh\": \"ZTE/*/ZTE Blade L2/*\" },\n      { \"ua\": \"ZTE Blade L2\" }\n    ],\n    \"dpi\": 240.0,\n    \"bw\": 3,\n    \"ac\": 500\n  },\n\n  {\n    \"type\": \"ios\",\n    \"rules\": [ { \"res\": [ 640, 960 ] } ],\n    \"dpi\": [ 325.1, 328.4 ],\n    \"bw\": 4,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"ios\",\n    \"rules\": [ { \"res\": [ 640, 960 ] } ],\n    \"dpi\": [ 325.1, 328.4 ],\n    \"bw\": 4,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"ios\",\n    \"rules\": [ { \"res\": [ 640, 1136 ] } ],\n    \"dpi\": [ 317.1, 320.2 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"ios\",\n    \"rules\": [ { \"res\": [ 640, 1136 ] } ],\n    \"dpi\": [ 317.1, 320.2 ],\n    \"bw\": 3,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"ios\",\n    \"rules\": [ { \"res\": [ 750, 1334 ] } ],\n    \"dpi\": 326.4,\n    \"bw\": 4,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"ios\",\n    \"rules\": [ { \"res\": [ 750, 1334 ] } ],\n    \"dpi\": 326.4,\n    \"bw\": 4,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"ios\",\n    \"rules\": [ { \"res\": [ 1242, 2208 ] } ],\n    \"dpi\": [ 453.6, 458.4 ],\n    \"bw\": 4,\n    \"ac\": 1000\n  },\n\n  {\n    \"type\": \"ios\",\n    \"rules\": [ { \"res\": [ 1242, 2208 ] } ],\n    \"dpi\": [ 453.6, 458.4 ],\n    \"bw\": 4,\n    \"ac\": 1000\n  }\n]};\n\nmodule.exports = DPDB_CACHE;\n\n},{}],13:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Offline cache of the DPDB, to be used until we load the online one (and\n// as a fallback in case we can't load the online one).\nvar DPDB_CACHE = _dereq_('./dpdb-cache.js');\nvar Util = _dereq_('../util.js');\n\n// Online DPDB URL.\nvar ONLINE_DPDB_URL = 'https://storage.googleapis.com/cardboard-dpdb/dpdb.json';\n\n/**\n * Calculates device parameters based on the DPDB (Device Parameter Database).\n * Initially, uses the cached DPDB values.\n *\n * If fetchOnline == true, then this object tries to fetch the online version\n * of the DPDB and updates the device info if a better match is found.\n * Calls the onDeviceParamsUpdated callback when there is an update to the\n * device information.\n */\nfunction Dpdb(fetchOnline, onDeviceParamsUpdated) {\n  // Start with the offline DPDB cache while we are loading the real one.\n  this.dpdb = DPDB_CACHE;\n\n  // Calculate device params based on the offline version of the DPDB.\n  this.recalculateDeviceParams_();\n\n  // XHR to fetch online DPDB file, if requested.\n  if (fetchOnline) {\n    // Set the callback.\n    this.onDeviceParamsUpdated = onDeviceParamsUpdated;\n\n    console.log('Fetching DPDB...');\n    var xhr = new XMLHttpRequest();\n    var obj = this;\n    xhr.open('GET', ONLINE_DPDB_URL, true);\n    xhr.addEventListener('load', function() {\n      obj.loading = false;\n      if (xhr.status >= 200 && xhr.status <= 299) {\n        // Success.\n        console.log('Successfully loaded online DPDB.');\n        obj.dpdb = JSON.parse(xhr.response);\n        obj.recalculateDeviceParams_();\n      } else {\n        // Error loading the DPDB.\n        console.error('Error loading online DPDB!');\n      }\n    });\n    xhr.send();\n  }\n}\n\n// Returns the current device parameters.\nDpdb.prototype.getDeviceParams = function() {\n  return this.deviceParams;\n};\n\n// Recalculates this device's parameters based on the DPDB.\nDpdb.prototype.recalculateDeviceParams_ = function() {\n  console.log('Recalculating device params.');\n  var newDeviceParams = this.calcDeviceParams_();\n  console.log('New device parameters:');\n  if (newDeviceParams) {\n    this.deviceParams = newDeviceParams;\n    // Invoke callback, if it is set.\n    if (this.onDeviceParamsUpdated) {\n      this.onDeviceParamsUpdated(this.deviceParams);\n    }\n  } else {\n    console.error('Failed to recalculate device parameters.');\n  }\n};\n\n// Returns a DeviceParams object that represents the best guess as to this\n// device's parameters. Can return null if the device does not match any\n// known devices.\nDpdb.prototype.calcDeviceParams_ = function() {\n  var db = this.dpdb; // shorthand\n  if (!db) {\n    console.error('DPDB not available.');\n    return null;\n  }\n  if (db.format != 1) {\n    console.error('DPDB has unexpected format version.');\n    return null;\n  }\n  if (!db.devices || !db.devices.length) {\n    console.error('DPDB does not have a devices section.');\n    return null;\n  }\n\n  // Get the actual user agent and screen dimensions in pixels.\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  var width = Util.getScreenWidth();\n  var height = Util.getScreenHeight();\n  console.log('User agent: ' + userAgent);\n  console.log('Pixel width: ' + width);\n  console.log('Pixel height: ' + height);\n\n  if (!db.devices) {\n    console.error('DPDB has no devices section.');\n    return null;\n  }\n\n  for (var i = 0; i < db.devices.length; i++) {\n    var device = db.devices[i];\n    if (!device.rules) {\n      console.warn('Device[' + i + '] has no rules section.');\n      continue;\n    }\n\n    if (device.type != 'ios' && device.type != 'android') {\n      console.warn('Device[' + i + '] has invalid type.');\n      continue;\n    }\n\n    // See if this device is of the appropriate type.\n    if (Util.isIOS() != (device.type == 'ios')) continue;\n\n    // See if this device matches any of the rules:\n    var matched = false;\n    for (var j = 0; j < device.rules.length; j++) {\n      var rule = device.rules[j];\n      if (this.matchRule_(rule, userAgent, width, height)) {\n        console.log('Rule matched:');\n        console.log(rule);\n        matched = true;\n        break;\n      }\n    }\n    if (!matched) continue;\n\n    // device.dpi might be an array of [ xdpi, ydpi] or just a scalar.\n    var xdpi = device.dpi[0] || device.dpi;\n    var ydpi = device.dpi[1] || device.dpi;\n\n    return new DeviceParams({ xdpi: xdpi, ydpi: ydpi, bevelMm: device.bw });\n  }\n\n  console.warn('No DPDB device match.');\n  return null;\n};\n\nDpdb.prototype.matchRule_ = function(rule, ua, screenWidth, screenHeight) {\n  // We can only match 'ua' and 'res' rules, not other types like 'mdmh'\n  // (which are meant for native platforms).\n  if (!rule.ua && !rule.res) return false;\n\n  // If our user agent string doesn't contain the indicated user agent string,\n  // the match fails.\n  if (rule.ua && ua.indexOf(rule.ua) < 0) return false;\n\n  // If the rule specifies screen dimensions that don't correspond to ours,\n  // the match fails.\n  if (rule.res) {\n    if (!rule.res[0] || !rule.res[1]) return false;\n    var resX = rule.res[0];\n    var resY = rule.res[1];\n    // Compare min and max so as to make the order not matter, i.e., it should\n    // be true that 640x480 == 480x640.\n    if (Math.min(screenWidth, screenHeight) != Math.min(resX, resY) ||\n        (Math.max(screenWidth, screenHeight) != Math.max(resX, resY))) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction DeviceParams(params) {\n  this.xdpi = params.xdpi;\n  this.ydpi = params.ydpi;\n  this.bevelMm = params.bevelMm;\n}\n\nmodule.exports = Dpdb;\n},{\"../util.js\":24,\"./dpdb-cache.js\":12}],14:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nfunction Emitter() {\n  this.callbacks = {};\n}\n\nEmitter.prototype.emit = function(eventName) {\n  var callbacks = this.callbacks[eventName];\n  if (!callbacks) {\n    //console.log('No valid callback specified.');\n    return;\n  }\n  var args = [].slice.call(arguments);\n  // Eliminate the first param (the callback).\n  args.shift();\n  for (var i = 0; i < callbacks.length; i++) {\n    callbacks[i].apply(this, args);\n  }\n};\n\nEmitter.prototype.on = function(eventName, callback) {\n  if (eventName in this.callbacks) {\n    this.callbacks[eventName].push(callback);\n  } else {\n    this.callbacks[eventName] = [callback];\n  }\n};\n\nmodule.exports = Emitter;\n\n},{}],15:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Util = _dereq_('./util.js');\nvar WebVRPolyfill = _dereq_('./webvr-polyfill.js');\n\n// Initialize a WebVRConfig just in case.\nwindow.WebVRConfig = Util.extend({\n  // Forces availability of VR mode, even for non-mobile devices.\n  FORCE_ENABLE_VR: false,\n\n  // Complementary filter coefficient. 0 for accelerometer, 1 for gyro.\n  K_FILTER: 0.98,\n\n  // How far into the future to predict during fast motion (in seconds).\n  PREDICTION_TIME_S: 0.040,\n\n  // Flag to disable touch panner. In case you have your own touch controls.\n  TOUCH_PANNER_DISABLED: false,\n\n  // Flag to disabled the UI in VR Mode.\n  CARDBOARD_UI_DISABLED: false, // Default: false\n\n  // Flag to disable the instructions to rotate your device.\n  ROTATE_INSTRUCTIONS_DISABLED: false, // Default: false.\n\n  // Enable yaw panning only, disabling roll and pitch. This can be useful\n  // for panoramas with nothing interesting above or below.\n  YAW_ONLY: false,\n\n  // To disable keyboard and mouse controls, if you want to use your own\n  // implementation.\n  MOUSE_KEYBOARD_CONTROLS_DISABLED: false,\n\n  // Prevent the polyfill from initializing immediately. Requires the app\n  // to call InitializeWebVRPolyfill() before it can be used.\n  DEFER_INITIALIZATION: false,\n\n  // Enable the deprecated version of the API (navigator.getVRDevices).\n  ENABLE_DEPRECATED_API: false,\n\n  // Scales the recommended buffer size reported by WebVR, which can improve\n  // performance.\n  // UPDATE(2016-05-03): Setting this to 0.5 by default since 1.0 does not\n  // perform well on many mobile devices.\n  BUFFER_SCALE: 0.5,\n\n  // Allow VRDisplay.submitFrame to change gl bindings, which is more\n  // efficient if the application code will re-bind its resources on the\n  // next frame anyway. This has been seen to cause rendering glitches with\n  // THREE.js.\n  // Dirty bindings include: gl.FRAMEBUFFER_BINDING, gl.CURRENT_PROGRAM,\n  // gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING,\n  // and gl.TEXTURE_BINDING_2D for texture unit 0.\n  DIRTY_SUBMIT_FRAME_BINDINGS: false\n}, window.WebVRConfig);\n\nif (!window.WebVRConfig.DEFER_INITIALIZATION) {\n  new WebVRPolyfill();\n} else {\n  window.InitializeWebVRPolyfill = function() {\n    new WebVRPolyfill();\n  }\n}\n\n},{\"./util.js\":24,\"./webvr-polyfill.js\":27}],16:[function(_dereq_,module,exports){\n/*\n * Copyright 2016 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar MathUtil = window.MathUtil || {};\n\nMathUtil.degToRad = Math.PI / 180;\nMathUtil.radToDeg = 180 / Math.PI;\n\n// Some minimal math functionality borrowed from THREE.Math and stripped down\n// for the purposes of this library.\n\n\nMathUtil.Vector2 = function ( x, y ) {\n  this.x = x || 0;\n  this.y = y || 0;\n};\n\nMathUtil.Vector2.prototype = {\n  constructor: MathUtil.Vector2,\n\n  set: function ( x, y ) {\n    this.x = x;\n    this.y = y;\n\n    return this;\n  },\n\n  copy: function ( v ) {\n    this.x = v.x;\n    this.y = v.y;\n\n    return this;\n  },\n\n  subVectors: function ( a, b ) {\n    this.x = a.x - b.x;\n    this.y = a.y - b.y;\n\n    return this;\n  },\n};\n\nMathUtil.Vector3 = function ( x, y, z ) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n};\n\nMathUtil.Vector3.prototype = {\n  constructor: MathUtil.Vector3,\n\n  set: function ( x, y, z ) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n\n    return this;\n  },\n\n  copy: function ( v ) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n\n    return this;\n  },\n\n  length: function () {\n    return Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n  },\n\n  normalize: function () {\n    var scalar = this.length();\n\n    if ( scalar !== 0 ) {\n      var invScalar = 1 / scalar;\n\n      this.multiplyScalar(invScalar);\n    } else {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    }\n\n    return this;\n  },\n\n  multiplyScalar: function ( scalar ) {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n  },\n\n  applyQuaternion: function ( q ) {\n    var x = this.x;\n    var y = this.y;\n    var z = this.z;\n\n    var qx = q.x;\n    var qy = q.y;\n    var qz = q.z;\n    var qw = q.w;\n\n    // calculate quat * vector\n    var ix =  qw * x + qy * z - qz * y;\n    var iy =  qw * y + qz * x - qx * z;\n    var iz =  qw * z + qx * y - qy * x;\n    var iw = - qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    this.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n    this.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n    this.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n    return this;\n  },\n\n  dot: function ( v ) {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n  },\n\n  crossVectors: function ( a, b ) {\n    var ax = a.x, ay = a.y, az = a.z;\n    var bx = b.x, by = b.y, bz = b.z;\n\n    this.x = ay * bz - az * by;\n    this.y = az * bx - ax * bz;\n    this.z = ax * by - ay * bx;\n\n    return this;\n  },\n};\n\nMathUtil.Quaternion = function ( x, y, z, w ) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n  this.w = ( w !== undefined ) ? w : 1;\n};\n\nMathUtil.Quaternion.prototype = {\n  constructor: MathUtil.Quaternion,\n\n  set: function ( x, y, z, w ) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n\n    return this;\n  },\n\n  copy: function ( quaternion ) {\n    this.x = quaternion.x;\n    this.y = quaternion.y;\n    this.z = quaternion.z;\n    this.w = quaternion.w;\n\n    return this;\n  },\n\n  setFromEulerXYZ: function( x, y, z ) {\n    var c1 = Math.cos( x / 2 );\n    var c2 = Math.cos( y / 2 );\n    var c3 = Math.cos( z / 2 );\n    var s1 = Math.sin( x / 2 );\n    var s2 = Math.sin( y / 2 );\n    var s3 = Math.sin( z / 2 );\n\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 + s1 * s2 * c3;\n    this.w = c1 * c2 * c3 - s1 * s2 * s3;\n\n    return this;\n  },\n\n  setFromEulerYXZ: function( x, y, z ) {\n    var c1 = Math.cos( x / 2 );\n    var c2 = Math.cos( y / 2 );\n    var c3 = Math.cos( z / 2 );\n    var s1 = Math.sin( x / 2 );\n    var s2 = Math.sin( y / 2 );\n    var s3 = Math.sin( z / 2 );\n\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 - s1 * s2 * c3;\n    this.w = c1 * c2 * c3 + s1 * s2 * s3;\n\n    return this;\n  },\n\n  setFromAxisAngle: function ( axis, angle ) {\n    // http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n    // assumes axis is normalized\n\n    var halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n    this.x = axis.x * s;\n    this.y = axis.y * s;\n    this.z = axis.z * s;\n    this.w = Math.cos( halfAngle );\n\n    return this;\n  },\n\n  multiply: function ( q ) {\n    return this.multiplyQuaternions( this, q );\n  },\n\n  multiplyQuaternions: function ( a, b ) {\n    // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n    var qax = a.x, qay = a.y, qaz = a.z, qaw = a.w;\n    var qbx = b.x, qby = b.y, qbz = b.z, qbw = b.w;\n\n    this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n    this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n    this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n    this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n    return this;\n  },\n\n  inverse: function () {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n\n    this.normalize();\n\n    return this;\n  },\n\n  normalize: function () {\n    var l = Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n    if ( l === 0 ) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 1;\n    } else {\n      l = 1 / l;\n\n      this.x = this.x * l;\n      this.y = this.y * l;\n      this.z = this.z * l;\n      this.w = this.w * l;\n    }\n\n    return this;\n  },\n\n  slerp: function ( qb, t ) {\n    if ( t === 0 ) return this;\n    if ( t === 1 ) return this.copy( qb );\n\n    var x = this.x, y = this.y, z = this.z, w = this.w;\n\n    // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n    var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;\n\n    if ( cosHalfTheta < 0 ) {\n      this.w = - qb.w;\n      this.x = - qb.x;\n      this.y = - qb.y;\n      this.z = - qb.z;\n\n      cosHalfTheta = - cosHalfTheta;\n    } else {\n      this.copy( qb );\n    }\n\n    if ( cosHalfTheta >= 1.0 ) {\n      this.w = w;\n      this.x = x;\n      this.y = y;\n      this.z = z;\n\n      return this;\n    }\n\n    var halfTheta = Math.acos( cosHalfTheta );\n    var sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\n\n    if ( Math.abs( sinHalfTheta ) < 0.001 ) {\n      this.w = 0.5 * ( w + this.w );\n      this.x = 0.5 * ( x + this.x );\n      this.y = 0.5 * ( y + this.y );\n      this.z = 0.5 * ( z + this.z );\n\n      return this;\n    }\n\n    var ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n    ratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n    this.w = ( w * ratioA + this.w * ratioB );\n    this.x = ( x * ratioA + this.x * ratioB );\n    this.y = ( y * ratioA + this.y * ratioB );\n    this.z = ( z * ratioA + this.z * ratioB );\n\n    return this;\n  },\n\n  setFromUnitVectors: function () {\n    // http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\n    // assumes direction vectors vFrom and vTo are normalized\n\n    var v1, r;\n    var EPS = 0.000001;\n\n    return function ( vFrom, vTo ) {\n      if ( v1 === undefined ) v1 = new MathUtil.Vector3();\n\n      r = vFrom.dot( vTo ) + 1;\n\n      if ( r < EPS ) {\n        r = 0;\n\n        if ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n          v1.set( - vFrom.y, vFrom.x, 0 );\n        } else {\n          v1.set( 0, - vFrom.z, vFrom.y );\n        }\n      } else {\n        v1.crossVectors( vFrom, vTo );\n      }\n\n      this.x = v1.x;\n      this.y = v1.y;\n      this.z = v1.z;\n      this.w = r;\n\n      this.normalize();\n\n      return this;\n    }\n  }(),\n};\n\nmodule.exports = MathUtil;\n\n},{}],17:[function(_dereq_,module,exports){\n/*\n * Copyright 2016 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar VRDisplay = _dereq_('./base.js').VRDisplay;\nvar MathUtil = _dereq_('./math-util.js');\nvar Util = _dereq_('./util.js');\n\n// How much to rotate per key stroke.\nvar KEY_SPEED = 0.15;\nvar KEY_ANIMATION_DURATION = 80;\n\n// How much to rotate for mouse events.\nvar MOUSE_SPEED_X = 0.5;\nvar MOUSE_SPEED_Y = 0.3;\n\n/**\n * VRDisplay based on mouse and keyboard input. Designed for desktops/laptops\n * where orientation events aren't supported. Cannot present.\n */\nfunction MouseKeyboardVRDisplay() {\n  this.displayName = 'Mouse and Keyboard VRDisplay (webvr-polyfill)';\n\n  this.capabilities.hasOrientation = true;\n\n  // Attach to mouse and keyboard events.\n  window.addEventListener('keydown', this.onKeyDown_.bind(this));\n  window.addEventListener('mousemove', this.onMouseMove_.bind(this));\n  window.addEventListener('mousedown', this.onMouseDown_.bind(this));\n  window.addEventListener('mouseup', this.onMouseUp_.bind(this));\n\n  // \"Private\" members.\n  this.phi_ = 0;\n  this.theta_ = 0;\n\n  // Variables for keyboard-based rotation animation.\n  this.targetAngle_ = null;\n  this.angleAnimation_ = null;\n\n  // State variables for calculations.\n  this.orientation_ = new MathUtil.Quaternion();\n\n  // Variables for mouse-based rotation.\n  this.rotateStart_ = new MathUtil.Vector2();\n  this.rotateEnd_ = new MathUtil.Vector2();\n  this.rotateDelta_ = new MathUtil.Vector2();\n  this.isDragging_ = false;\n\n  this.orientationOut_ = new Float32Array(4);\n}\nMouseKeyboardVRDisplay.prototype = new VRDisplay();\n\nMouseKeyboardVRDisplay.prototype.getImmediatePose = function() {\n  this.orientation_.setFromEulerYXZ(this.phi_, this.theta_, 0);\n\n  this.orientationOut_[0] = this.orientation_.x;\n  this.orientationOut_[1] = this.orientation_.y;\n  this.orientationOut_[2] = this.orientation_.z;\n  this.orientationOut_[3] = this.orientation_.w;\n\n  return {\n    position: null,\n    orientation: this.orientationOut_,\n    linearVelocity: null,\n    linearAcceleration: null,\n    angularVelocity: null,\n    angularAcceleration: null\n  };\n};\n\nMouseKeyboardVRDisplay.prototype.onKeyDown_ = function(e) {\n  // Track WASD and arrow keys.\n  if (e.keyCode == 38) { // Up key.\n    this.animatePhi_(this.phi_ + KEY_SPEED);\n  } else if (e.keyCode == 39) { // Right key.\n    this.animateTheta_(this.theta_ - KEY_SPEED);\n  } else if (e.keyCode == 40) { // Down key.\n    this.animatePhi_(this.phi_ - KEY_SPEED);\n  } else if (e.keyCode == 37) { // Left key.\n    this.animateTheta_(this.theta_ + KEY_SPEED);\n  }\n};\n\nMouseKeyboardVRDisplay.prototype.animateTheta_ = function(targetAngle) {\n  this.animateKeyTransitions_('theta_', targetAngle);\n};\n\nMouseKeyboardVRDisplay.prototype.animatePhi_ = function(targetAngle) {\n  // Prevent looking too far up or down.\n  targetAngle = Util.clamp(targetAngle, -Math.PI/2, Math.PI/2);\n  this.animateKeyTransitions_('phi_', targetAngle);\n};\n\n/**\n * Start an animation to transition an angle from one value to another.\n */\nMouseKeyboardVRDisplay.prototype.animateKeyTransitions_ = function(angleName, targetAngle) {\n  // If an animation is currently running, cancel it.\n  if (this.angleAnimation_) {\n    cancelAnimationFrame(this.angleAnimation_);\n  }\n  var startAngle = this[angleName];\n  var startTime = new Date();\n  // Set up an interval timer to perform the animation.\n  this.angleAnimation_ = requestAnimationFrame(function animate() {\n    // Once we're finished the animation, we're done.\n    var elapsed = new Date() - startTime;\n    if (elapsed >= KEY_ANIMATION_DURATION) {\n      this[angleName] = targetAngle;\n      cancelAnimationFrame(this.angleAnimation_);\n      return;\n    }\n    // loop with requestAnimationFrame\n    this.angleAnimation_ = requestAnimationFrame(animate.bind(this))\n    // Linearly interpolate the angle some amount.\n    var percent = elapsed / KEY_ANIMATION_DURATION;\n    this[angleName] = startAngle + (targetAngle - startAngle) * percent;\n  }.bind(this));\n};\n\nMouseKeyboardVRDisplay.prototype.onMouseDown_ = function(e) {\n  this.rotateStart_.set(e.clientX, e.clientY);\n  this.isDragging_ = true;\n};\n\n// Very similar to https://gist.github.com/mrflix/8351020\nMouseKeyboardVRDisplay.prototype.onMouseMove_ = function(e) {\n  if (!this.isDragging_ && !this.isPointerLocked_()) {\n    return;\n  }\n  // Support pointer lock API.\n  if (this.isPointerLocked_()) {\n    var movementX = e.movementX || e.mozMovementX || 0;\n    var movementY = e.movementY || e.mozMovementY || 0;\n    this.rotateEnd_.set(this.rotateStart_.x - movementX, this.rotateStart_.y - movementY);\n  } else {\n    this.rotateEnd_.set(e.clientX, e.clientY);\n  }\n  // Calculate how much we moved in mouse space.\n  this.rotateDelta_.subVectors(this.rotateEnd_, this.rotateStart_);\n  this.rotateStart_.copy(this.rotateEnd_);\n\n  // Keep track of the cumulative euler angles.\n  this.phi_ += 2 * Math.PI * this.rotateDelta_.y / screen.height * MOUSE_SPEED_Y;\n  this.theta_ += 2 * Math.PI * this.rotateDelta_.x / screen.width * MOUSE_SPEED_X;\n\n  // Prevent looking too far up or down.\n  this.phi_ = Util.clamp(this.phi_, -Math.PI/2, Math.PI/2);\n};\n\nMouseKeyboardVRDisplay.prototype.onMouseUp_ = function(e) {\n  this.isDragging_ = false;\n};\n\nMouseKeyboardVRDisplay.prototype.isPointerLocked_ = function() {\n  var el = document.pointerLockElement || document.mozPointerLockElement ||\n      document.webkitPointerLockElement;\n  return el !== undefined;\n};\n\nMouseKeyboardVRDisplay.prototype.resetPose = function() {\n  this.phi_ = 0;\n  this.theta_ = 0;\n};\n\nmodule.exports = MouseKeyboardVRDisplay;\n\n},{\"./base.js\":4,\"./math-util.js\":16,\"./util.js\":24}],18:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = _dereq_('./util.js');\n\nfunction RotateInstructions() {\n  this.loadIcon_();\n\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.top = 0;\n  s.right = 0;\n  s.bottom = 0;\n  s.left = 0;\n  s.backgroundColor = 'gray';\n  s.fontFamily = 'sans-serif';\n  // Force this to be above the fullscreen canvas, which is at zIndex: 999999.\n  s.zIndex = 1000000;\n\n  var img = document.createElement('img');\n  img.src = this.icon;\n  var s = img.style;\n  s.marginLeft = '25%';\n  s.marginTop = '25%';\n  s.width = '50%';\n  overlay.appendChild(img);\n\n  var text = document.createElement('div');\n  var s = text.style;\n  s.textAlign = 'center';\n  s.fontSize = '16px';\n  s.lineHeight = '24px';\n  s.margin = '24px 25%';\n  s.width = '50%';\n  text.innerHTML = 'Place your phone into your Cardboard viewer.';\n  overlay.appendChild(text);\n\n  var snackbar = document.createElement('div');\n  var s = snackbar.style;\n  s.backgroundColor = '#CFD8DC';\n  s.position = 'fixed';\n  s.bottom = 0;\n  s.width = '100%';\n  s.height = '48px';\n  s.padding = '14px 24px';\n  s.boxSizing = 'border-box';\n  s.color = '#656A6B';\n  overlay.appendChild(snackbar);\n\n  var snackbarText = document.createElement('div');\n  snackbarText.style.float = 'left';\n  snackbarText.innerHTML = 'No Cardboard viewer?';\n\n  var snackbarButton = document.createElement('a');\n  snackbarButton.href = 'https://www.google.com/get/cardboard/get-cardboard/';\n  snackbarButton.innerHTML = 'get one';\n  snackbarButton.target = '_blank';\n  var s = snackbarButton.style;\n  s.float = 'right';\n  s.fontWeight = 600;\n  s.textTransform = 'uppercase';\n  s.borderLeft = '1px solid gray';\n  s.paddingLeft = '24px';\n  s.textDecoration = 'none';\n  s.color = '#656A6B';\n\n  snackbar.appendChild(snackbarText);\n  snackbar.appendChild(snackbarButton);\n\n  this.overlay = overlay;\n  this.text = text;\n\n  this.hide();\n}\n\nRotateInstructions.prototype.show = function(parent) {\n  if (!parent && !this.overlay.parentElement) {\n    document.body.appendChild(this.overlay);\n  } else if (parent) {\n    if (this.overlay.parentElement && this.overlay.parentElement != parent)\n      this.overlay.parentElement.removeChild(this.overlay);\n\n    parent.appendChild(this.overlay);\n  }\n\n  this.overlay.style.display = 'block';\n\n  var img = this.overlay.querySelector('img');\n  var s = img.style;\n\n  if (Util.isLandscapeMode()) {\n    s.width = '20%';\n    s.marginLeft = '40%';\n    s.marginTop = '3%';\n  } else {\n    s.width = '50%';\n    s.marginLeft = '25%';\n    s.marginTop = '25%';\n  }\n};\n\nRotateInstructions.prototype.hide = function() {\n  this.overlay.style.display = 'none';\n};\n\nRotateInstructions.prototype.showTemporarily = function(ms, parent) {\n  this.show(parent);\n  this.timer = setTimeout(this.hide.bind(this), ms);\n};\n\nRotateInstructions.prototype.disableShowTemporarily = function() {\n  clearTimeout(this.timer);\n};\n\nRotateInstructions.prototype.update = function() {\n  this.disableShowTemporarily();\n  // In portrait VR mode, tell the user to rotate to landscape. Otherwise, hide\n  // the instructions.\n  if (!Util.isLandscapeMode() && Util.isMobile()) {\n    this.show();\n  } else {\n    this.hide();\n  }\n};\n\nRotateInstructions.prototype.loadIcon_ = function() {\n  // Encoded asset_src/rotate-instructions.svg\n  this.icon = Util.base64('image/svg+xml', 'PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+');\n};\n\nmodule.exports = RotateInstructions;\n\n},{\"./util.js\":24}],19:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * TODO: Fix up all \"new THREE\" instantiations to improve performance.\n */\nvar SensorSample = _dereq_('./sensor-sample.js');\nvar MathUtil = _dereq_('../math-util.js');\nvar Util = _dereq_('../util.js');\n\nvar DEBUG = false;\n\n/**\n * An implementation of a simple complementary filter, which fuses gyroscope and\n * accelerometer data from the 'devicemotion' event.\n *\n * Accelerometer data is very noisy, but stable over the long term.\n * Gyroscope data is smooth, but tends to drift over the long term.\n *\n * This fusion is relatively simple:\n * 1. Get orientation estimates from accelerometer by applying a low-pass filter\n *    on that data.\n * 2. Get orientation estimates from gyroscope by integrating over time.\n * 3. Combine the two estimates, weighing (1) in the long term, but (2) for the\n *    short term.\n */\nfunction ComplementaryFilter(kFilter) {\n  this.kFilter = kFilter;\n\n  // Raw sensor measurements.\n  this.currentAccelMeasurement = new SensorSample();\n  this.currentGyroMeasurement = new SensorSample();\n  this.previousGyroMeasurement = new SensorSample();\n\n  // Current filter orientation\n  this.filterQ = new MathUtil.Quaternion();\n  this.previousFilterQ = new MathUtil.Quaternion();\n\n  // Orientation based on the accelerometer.\n  this.accelQ = new MathUtil.Quaternion();\n  // Whether or not the orientation has been initialized.\n  this.isOrientationInitialized = false;\n  // Running estimate of gravity based on the current orientation.\n  this.estimatedGravity = new MathUtil.Vector3();\n  // Measured gravity based on accelerometer.\n  this.measuredGravity = new MathUtil.Vector3();\n\n  // Debug only quaternion of gyro-based orientation.\n  this.gyroIntegralQ = new MathUtil.Quaternion();\n}\n\nComplementaryFilter.prototype.addAccelMeasurement = function(vector, timestampS) {\n  this.currentAccelMeasurement.set(vector, timestampS);\n};\n\nComplementaryFilter.prototype.addGyroMeasurement = function(vector, timestampS) {\n  this.currentGyroMeasurement.set(vector, timestampS);\n\n  var deltaT = timestampS - this.previousGyroMeasurement.timestampS;\n  if (Util.isTimestampDeltaValid(deltaT)) {\n    this.run_();\n  }\n\n  this.previousGyroMeasurement.copy(this.currentGyroMeasurement);\n};\n\nComplementaryFilter.prototype.run_ = function() {\n\n  if (!this.isOrientationInitialized) {\n    this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample);\n    this.previousFilterQ.copy(this.accelQ);\n    this.isOrientationInitialized = true;\n    return;\n  }\n\n  var deltaT = this.currentGyroMeasurement.timestampS -\n      this.previousGyroMeasurement.timestampS;\n\n  // Convert gyro rotation vector to a quaternion delta.\n  var gyroDeltaQ = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, deltaT);\n  this.gyroIntegralQ.multiply(gyroDeltaQ);\n\n  // filter_1 = K * (filter_0 + gyro * dT) + (1 - K) * accel.\n  this.filterQ.copy(this.previousFilterQ);\n  this.filterQ.multiply(gyroDeltaQ);\n\n  // Calculate the delta between the current estimated gravity and the real\n  // gravity vector from accelerometer.\n  var invFilterQ = new MathUtil.Quaternion();\n  invFilterQ.copy(this.filterQ);\n  invFilterQ.inverse();\n\n  this.estimatedGravity.set(0, 0, -1);\n  this.estimatedGravity.applyQuaternion(invFilterQ);\n  this.estimatedGravity.normalize();\n\n  this.measuredGravity.copy(this.currentAccelMeasurement.sample);\n  this.measuredGravity.normalize();\n\n  // Compare estimated gravity with measured gravity, get the delta quaternion\n  // between the two.\n  var deltaQ = new MathUtil.Quaternion();\n  deltaQ.setFromUnitVectors(this.estimatedGravity, this.measuredGravity);\n  deltaQ.inverse();\n\n  if (DEBUG) {\n    console.log('Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)',\n                MathUtil.radToDeg * Util.getQuaternionAngle(deltaQ),\n                (this.estimatedGravity.x).toFixed(1),\n                (this.estimatedGravity.y).toFixed(1),\n                (this.estimatedGravity.z).toFixed(1),\n                (this.measuredGravity.x).toFixed(1),\n                (this.measuredGravity.y).toFixed(1),\n                (this.measuredGravity.z).toFixed(1));\n  }\n\n  // Calculate the SLERP target: current orientation plus the measured-estimated\n  // quaternion delta.\n  var targetQ = new MathUtil.Quaternion();\n  targetQ.copy(this.filterQ);\n  targetQ.multiply(deltaQ);\n\n  // SLERP factor: 0 is pure gyro, 1 is pure accel.\n  this.filterQ.slerp(targetQ, 1 - this.kFilter);\n\n  this.previousFilterQ.copy(this.filterQ);\n};\n\nComplementaryFilter.prototype.getOrientation = function() {\n  return this.filterQ;\n};\n\nComplementaryFilter.prototype.accelToQuaternion_ = function(accel) {\n  var normAccel = new MathUtil.Vector3();\n  normAccel.copy(accel);\n  normAccel.normalize();\n  var quat = new MathUtil.Quaternion();\n  quat.setFromUnitVectors(new MathUtil.Vector3(0, 0, -1), normAccel);\n  quat.inverse();\n  return quat;\n};\n\nComplementaryFilter.prototype.gyroToQuaternionDelta_ = function(gyro, dt) {\n  // Extract axis and angle from the gyroscope data.\n  var quat = new MathUtil.Quaternion();\n  var axis = new MathUtil.Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  quat.setFromAxisAngle(axis, gyro.length() * dt);\n  return quat;\n};\n\n\nmodule.exports = ComplementaryFilter;\n\n},{\"../math-util.js\":16,\"../util.js\":24,\"./sensor-sample.js\":22}],20:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ComplementaryFilter = _dereq_('./complementary-filter.js');\nvar PosePredictor = _dereq_('./pose-predictor.js');\nvar TouchPanner = _dereq_('../touch-panner.js');\nvar MathUtil = _dereq_('../math-util.js');\nvar Util = _dereq_('../util.js');\n\n/**\n * The pose sensor, implemented using DeviceMotion APIs.\n */\nfunction FusionPoseSensor() {\n  this.deviceId = 'webvr-polyfill:fused';\n  this.deviceName = 'VR Position Device (webvr-polyfill:fused)';\n\n  this.accelerometer = new MathUtil.Vector3();\n  this.gyroscope = new MathUtil.Vector3();\n\n  window.addEventListener('devicemotion', this.onDeviceMotionChange_.bind(this));\n  window.addEventListener('orientationchange', this.onScreenOrientationChange_.bind(this));\n\n  this.filter = new ComplementaryFilter(WebVRConfig.K_FILTER);\n  this.posePredictor = new PosePredictor(WebVRConfig.PREDICTION_TIME_S);\n  this.touchPanner = new TouchPanner();\n\n  this.filterToWorldQ = new MathUtil.Quaternion();\n\n  // Set the filter to world transform, depending on OS.\n  if (Util.isIOS()) {\n    this.filterToWorldQ.setFromAxisAngle(new MathUtil.Vector3(1, 0, 0), Math.PI / 2);\n  } else {\n    this.filterToWorldQ.setFromAxisAngle(new MathUtil.Vector3(1, 0, 0), -Math.PI / 2);\n  }\n\n  this.inverseWorldToScreenQ = new MathUtil.Quaternion();\n  this.worldToScreenQ = new MathUtil.Quaternion();\n  this.originalPoseAdjustQ = new MathUtil.Quaternion();\n  this.originalPoseAdjustQ.setFromAxisAngle(new MathUtil.Vector3(0, 0, 1),\n                                           -window.orientation * Math.PI / 180);\n\n  this.setScreenTransform_();\n  // Adjust this filter for being in landscape mode.\n  if (Util.isLandscapeMode()) {\n    this.filterToWorldQ.multiply(this.inverseWorldToScreenQ);\n  }\n\n  // Keep track of a reset transform for resetSensor.\n  this.resetQ = new MathUtil.Quaternion();\n\n  this.isFirefoxAndroid = Util.isFirefoxAndroid();\n  this.isIOS = Util.isIOS();\n\n  this.orientationOut_ = new Float32Array(4);\n}\n\nFusionPoseSensor.prototype.getPosition = function() {\n  // This PoseSensor doesn't support position\n  return null;\n};\n\nFusionPoseSensor.prototype.getOrientation = function() {\n  // Convert from filter space to the the same system used by the\n  // deviceorientation event.\n  var orientation = this.filter.getOrientation();\n\n  // Predict orientation.\n  this.predictedQ = this.posePredictor.getPrediction(orientation, this.gyroscope, this.previousTimestampS);\n\n  // Convert to THREE coordinate system: -Z forward, Y up, X right.\n  var out = new MathUtil.Quaternion();\n  out.copy(this.filterToWorldQ);\n  out.multiply(this.resetQ);\n  if (!WebVRConfig.TOUCH_PANNER_DISABLED) {\n    out.multiply(this.touchPanner.getOrientation());\n  }\n  out.multiply(this.predictedQ);\n  out.multiply(this.worldToScreenQ);\n\n  // Handle the yaw-only case.\n  if (WebVRConfig.YAW_ONLY) {\n    // Make a quaternion that only turns around the Y-axis.\n    out.x = 0;\n    out.z = 0;\n    out.normalize();\n  }\n\n  this.orientationOut_[0] = out.x;\n  this.orientationOut_[1] = out.y;\n  this.orientationOut_[2] = out.z;\n  this.orientationOut_[3] = out.w;\n  return this.orientationOut_;\n};\n\nFusionPoseSensor.prototype.resetPose = function() {\n  // Reduce to inverted yaw-only.\n  this.resetQ.copy(this.filter.getOrientation());\n  this.resetQ.x = 0;\n  this.resetQ.y = 0;\n  this.resetQ.z *= -1;\n  this.resetQ.normalize();\n\n  // Take into account extra transformations in landscape mode.\n  if (Util.isLandscapeMode()) {\n    this.resetQ.multiply(this.inverseWorldToScreenQ);\n  }\n\n  // Take into account original pose.\n  this.resetQ.multiply(this.originalPoseAdjustQ);\n\n  if (!WebVRConfig.TOUCH_PANNER_DISABLED) {\n    this.touchPanner.resetSensor();\n  }\n};\n\nFusionPoseSensor.prototype.onDeviceMotionChange_ = function(deviceMotion) {\n  var accGravity = deviceMotion.accelerationIncludingGravity;\n  var rotRate = deviceMotion.rotationRate;\n  var timestampS = deviceMotion.timeStamp / 1000;\n\n  // Firefox Android timeStamp returns one thousandth of a millisecond.\n  if (this.isFirefoxAndroid) {\n    timestampS /= 1000;\n  }\n\n  var deltaS = timestampS - this.previousTimestampS;\n  if (deltaS <= Util.MIN_TIMESTEP || deltaS > Util.MAX_TIMESTEP) {\n    console.warn('Invalid timestamps detected. Time step between successive ' +\n                 'gyroscope sensor samples is very small or not monotonic');\n    this.previousTimestampS = timestampS;\n    return;\n  }\n  this.accelerometer.set(-accGravity.x, -accGravity.y, -accGravity.z);\n  this.gyroscope.set(rotRate.alpha, rotRate.beta, rotRate.gamma);\n\n  // With iOS and Firefox Android, rotationRate is reported in degrees,\n  // so we first convert to radians.\n  if (this.isIOS || this.isFirefoxAndroid) {\n    this.gyroscope.multiplyScalar(Math.PI / 180);\n  }\n\n  this.filter.addAccelMeasurement(this.accelerometer, timestampS);\n  this.filter.addGyroMeasurement(this.gyroscope, timestampS);\n\n  this.previousTimestampS = timestampS;\n};\n\nFusionPoseSensor.prototype.onScreenOrientationChange_ =\n    function(screenOrientation) {\n  this.setScreenTransform_();\n};\n\nFusionPoseSensor.prototype.setScreenTransform_ = function() {\n  this.worldToScreenQ.set(0, 0, 0, 1);\n  switch (window.orientation) {\n    case 0:\n      break;\n    case 90:\n      this.worldToScreenQ.setFromAxisAngle(new MathUtil.Vector3(0, 0, 1), -Math.PI / 2);\n      break;\n    case -90:\n      this.worldToScreenQ.setFromAxisAngle(new MathUtil.Vector3(0, 0, 1), Math.PI / 2);\n      break;\n    case 180:\n      // TODO.\n      break;\n  }\n  this.inverseWorldToScreenQ.copy(this.worldToScreenQ);\n  this.inverseWorldToScreenQ.inverse();\n};\n\nmodule.exports = FusionPoseSensor;\n\n},{\"../math-util.js\":16,\"../touch-panner.js\":23,\"../util.js\":24,\"./complementary-filter.js\":19,\"./pose-predictor.js\":21}],21:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar MathUtil = _dereq_('../math-util.js');\nvar DEBUG = false;\n\n/**\n * Given an orientation and the gyroscope data, predicts the future orientation\n * of the head. This makes rendering appear faster.\n *\n * Also see: http://msl.cs.uiuc.edu/~lavalle/papers/LavYerKatAnt14.pdf\n *\n * @param {Number} predictionTimeS time from head movement to the appearance of\n * the corresponding image.\n */\nfunction PosePredictor(predictionTimeS) {\n  this.predictionTimeS = predictionTimeS;\n\n  // The quaternion corresponding to the previous state.\n  this.previousQ = new MathUtil.Quaternion();\n  // Previous time a prediction occurred.\n  this.previousTimestampS = null;\n\n  // The delta quaternion that adjusts the current pose.\n  this.deltaQ = new MathUtil.Quaternion();\n  // The output quaternion.\n  this.outQ = new MathUtil.Quaternion();\n}\n\nPosePredictor.prototype.getPrediction = function(currentQ, gyro, timestampS) {\n  if (!this.previousTimestampS) {\n    this.previousQ.copy(currentQ);\n    this.previousTimestampS = timestampS;\n    return currentQ;\n  }\n\n  // Calculate axis and angle based on gyroscope rotation rate data.\n  var axis = new MathUtil.Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n\n  var angularSpeed = gyro.length();\n\n  // If we're rotating slowly, don't do prediction.\n  if (angularSpeed < MathUtil.degToRad * 20) {\n    if (DEBUG) {\n      console.log('Moving slowly, at %s deg/s: no prediction',\n                  (MathUtil.radToDeg * angularSpeed).toFixed(1));\n    }\n    this.outQ.copy(currentQ);\n    this.previousQ.copy(currentQ);\n    return this.outQ;\n  }\n\n  // Get the predicted angle based on the time delta and latency.\n  var deltaT = timestampS - this.previousTimestampS;\n  var predictAngle = angularSpeed * this.predictionTimeS;\n\n  this.deltaQ.setFromAxisAngle(axis, predictAngle);\n  this.outQ.copy(this.previousQ);\n  this.outQ.multiply(this.deltaQ);\n\n  this.previousQ.copy(currentQ);\n\n  return this.outQ;\n};\n\n\nmodule.exports = PosePredictor;\n\n},{\"../math-util.js\":16}],22:[function(_dereq_,module,exports){\nfunction SensorSample(sample, timestampS) {\n  this.set(sample, timestampS);\n};\n\nSensorSample.prototype.set = function(sample, timestampS) {\n  this.sample = sample;\n  this.timestampS = timestampS;\n};\n\nSensorSample.prototype.copy = function(sensorSample) {\n  this.set(sensorSample.sample, sensorSample.timestampS);\n};\n\nmodule.exports = SensorSample;\n\n},{}],23:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar MathUtil = _dereq_('./math-util.js');\nvar Util = _dereq_('./util.js');\n\nvar ROTATE_SPEED = 0.5;\n/**\n * Provides a quaternion responsible for pre-panning the scene before further\n * transformations due to device sensors.\n */\nfunction TouchPanner() {\n  window.addEventListener('touchstart', this.onTouchStart_.bind(this));\n  window.addEventListener('touchmove', this.onTouchMove_.bind(this));\n  window.addEventListener('touchend', this.onTouchEnd_.bind(this));\n\n  this.isTouching = false;\n  this.rotateStart = new MathUtil.Vector2();\n  this.rotateEnd = new MathUtil.Vector2();\n  this.rotateDelta = new MathUtil.Vector2();\n\n  this.theta = 0;\n  this.orientation = new MathUtil.Quaternion();\n}\n\nTouchPanner.prototype.getOrientation = function() {\n  this.orientation.setFromEulerXYZ(0, 0, this.theta);\n  return this.orientation;\n};\n\nTouchPanner.prototype.resetSensor = function() {\n  this.theta = 0;\n};\n\nTouchPanner.prototype.onTouchStart_ = function(e) {\n  // Only respond if there is exactly one touch.\n  if (e.touches.length != 1) {\n    return;\n  }\n  this.rotateStart.set(e.touches[0].pageX, e.touches[0].pageY);\n  this.isTouching = true;\n};\n\nTouchPanner.prototype.onTouchMove_ = function(e) {\n  if (!this.isTouching) {\n    return;\n  }\n  this.rotateEnd.set(e.touches[0].pageX, e.touches[0].pageY);\n  this.rotateDelta.subVectors(this.rotateEnd, this.rotateStart);\n  this.rotateStart.copy(this.rotateEnd);\n\n  // On iOS, direction is inverted.\n  if (Util.isIOS()) {\n    this.rotateDelta.x *= -1;\n  }\n\n  var element = document.body;\n  this.theta += 2 * Math.PI * this.rotateDelta.x / element.clientWidth * ROTATE_SPEED;\n};\n\nTouchPanner.prototype.onTouchEnd_ = function(e) {\n  this.isTouching = false;\n};\n\nmodule.exports = TouchPanner;\n\n},{\"./math-util.js\":16,\"./util.js\":24}],24:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar objectAssign = _dereq_('object-assign');\n\nvar Util = window.Util || {};\n\nUtil.MIN_TIMESTEP = 0.001;\nUtil.MAX_TIMESTEP = 1;\n\nUtil.base64 = function(mimeType, base64) {\n  return 'data:' + mimeType + ';base64,' + base64;\n};\n\nUtil.clamp = function(value, min, max) {\n  return Math.min(Math.max(min, value), max);\n};\n\nUtil.lerp = function(a, b, t) {\n  return a + ((b - a) * t);\n};\n\nUtil.isIOS = (function() {\n  var isIOS = /iPad|iPhone|iPod/.test(navigator.platform);\n  return function() {\n    return isIOS;\n  };\n})();\n\nUtil.isSafari = (function() {\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  return function() {\n    return isSafari;\n  };\n})();\n\nUtil.isFirefoxAndroid = (function() {\n  var isFirefoxAndroid = navigator.userAgent.indexOf('Firefox') !== -1 &&\n      navigator.userAgent.indexOf('Android') !== -1;\n  return function() {\n    return isFirefoxAndroid;\n  };\n})();\n\nUtil.isLandscapeMode = function() {\n  return (window.orientation == 90 || window.orientation == -90);\n};\n\n// Helper method to validate the time steps of sensor timestamps.\nUtil.isTimestampDeltaValid = function(timestampDeltaS) {\n  if (isNaN(timestampDeltaS)) {\n    return false;\n  }\n  if (timestampDeltaS <= Util.MIN_TIMESTEP) {\n    return false;\n  }\n  if (timestampDeltaS > Util.MAX_TIMESTEP) {\n    return false;\n  }\n  return true;\n};\n\nUtil.getScreenWidth = function() {\n  return Math.max(window.screen.width, window.screen.height) *\n      window.devicePixelRatio;\n};\n\nUtil.getScreenHeight = function() {\n  return Math.min(window.screen.width, window.screen.height) *\n      window.devicePixelRatio;\n};\n\nUtil.requestFullscreen = function(element) {\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  } else {\n    return false;\n  }\n\n  return true;\n};\n\nUtil.exitFullscreen = function() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen();\n  } else {\n    return false;\n  }\n\n  return true;\n};\n\nUtil.getFullscreenElement = function() {\n  return document.fullscreenElement ||\n      document.webkitFullscreenElement ||\n      document.mozFullScreenElement ||\n      document.msFullscreenElement;\n};\n\nUtil.linkProgram = function(gl, vertexSource, fragmentSource, attribLocationMap) {\n  // No error checking for brevity.\n  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, vertexSource);\n  gl.compileShader(vertexShader);\n\n  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, fragmentSource);\n  gl.compileShader(fragmentShader);\n\n  var program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n\n  for (var attribName in attribLocationMap)\n    gl.bindAttribLocation(program, attribLocationMap[attribName], attribName);\n\n  gl.linkProgram(program);\n\n  gl.deleteShader(vertexShader);\n  gl.deleteShader(fragmentShader);\n\n  return program;\n};\n\nUtil.getProgramUniforms = function(gl, program) {\n  var uniforms = {};\n  var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  var uniformName = '';\n  for (var i = 0; i < uniformCount; i++) {\n    var uniformInfo = gl.getActiveUniform(program, i);\n    uniformName = uniformInfo.name.replace('[0]', '');\n    uniforms[uniformName] = gl.getUniformLocation(program, uniformName);\n  }\n  return uniforms;\n};\n\nUtil.orthoMatrix = function (out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right),\n      bt = 1 / (bottom - top),\n      nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n};\n\nUtil.isMobile = function() {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n  return check;\n};\n\nUtil.extend = objectAssign;\n\nUtil.safariCssSizeWorkaround = function(canvas) {\n  // TODO(smus): Remove this workaround when Safari for iOS is fixed.\n  // iOS only workaround (for https://bugs.webkit.org/show_bug.cgi?id=152556).\n  //\n  // \"To the last I grapple with thee;\n  //  from hell's heart I stab at thee;\n  //  for hate's sake I spit my last breath at thee.\"\n  // -- Moby Dick, by Herman Melville\n  if (Util.isIOS()) {\n    var width = canvas.style.width;\n    var height = canvas.style.height;\n    canvas.style.width = (parseInt(width) + 1) + 'px';\n    canvas.style.height = (parseInt(height)) + 'px';\n    console.log('Resetting width to...', width);\n    setTimeout(function() {\n      console.log('Done. Width is now', width);\n      canvas.style.width = width;\n      canvas.style.height = height;\n    }, 100);\n  }\n\n  // Debug only.\n  window.Util = Util;\n  window.canvas = canvas;\n};\n\nmodule.exports = Util;\n\n},{\"object-assign\":2}],25:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Emitter = _dereq_('./emitter.js');\nvar Util = _dereq_('./util.js');\nvar DeviceInfo = _dereq_('./device-info.js');\n\nvar DEFAULT_VIEWER = 'CardboardV1';\nvar VIEWER_KEY = 'WEBVR_CARDBOARD_VIEWER';\nvar CLASS_NAME = 'webvr-polyfill-viewer-selector';\n\n/**\n * Creates a viewer selector with the options specified. Supports being shown\n * and hidden. Generates events when viewer parameters change. Also supports\n * saving the currently selected index in localStorage.\n */\nfunction ViewerSelector() {\n  // Try to load the selected key from local storage. If none exists, use the\n  // default key.\n  try {\n    this.selectedKey = localStorage.getItem(VIEWER_KEY) || DEFAULT_VIEWER;\n  } catch (error) {\n    console.error('Failed to load viewer profile: %s', error);\n  }\n  this.dialog = this.createDialog_(DeviceInfo.Viewers);\n  this.root = null;\n}\nViewerSelector.prototype = new Emitter();\n\nViewerSelector.prototype.show = function(root) {\n  this.root = root;\n\n  root.appendChild(this.dialog);\n  //console.log('ViewerSelector.show');\n\n  // Ensure the currently selected item is checked.\n  var selected = this.dialog.querySelector('#' + this.selectedKey);\n  selected.checked = true;\n\n  // Show the UI.\n  this.dialog.style.display = 'block';\n};\n\nViewerSelector.prototype.hide = function() {\n  if (this.root && this.root.contains(this.dialog)) {\n    this.root.removeChild(this.dialog);\n  }\n  //console.log('ViewerSelector.hide');\n  this.dialog.style.display = 'none';\n};\n\nViewerSelector.prototype.getCurrentViewer = function() {\n  return DeviceInfo.Viewers[this.selectedKey];\n};\n\nViewerSelector.prototype.getSelectedKey_ = function() {\n  var input = this.dialog.querySelector('input[name=field]:checked');\n  if (input) {\n    return input.id;\n  }\n  return null;\n};\n\nViewerSelector.prototype.onSave_ = function() {\n  this.selectedKey = this.getSelectedKey_();\n  if (!this.selectedKey || !DeviceInfo.Viewers[this.selectedKey]) {\n    console.error('ViewerSelector.onSave_: this should never happen!');\n    return;\n  }\n\n  this.emit('change', DeviceInfo.Viewers[this.selectedKey]);\n\n  // Attempt to save the viewer profile, but fails in private mode.\n  try {\n    localStorage.setItem(VIEWER_KEY, this.selectedKey);\n  } catch(error) {\n    console.error('Failed to save viewer profile: %s', error);\n  }\n  this.hide();\n};\n\n/**\n * Creates the dialog.\n */\nViewerSelector.prototype.createDialog_ = function(options) {\n  var container = document.createElement('div');\n  container.classList.add(CLASS_NAME);\n  container.style.display = 'none';\n  // Create an overlay that dims the background, and which goes away when you\n  // tap it.\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.left = 0;\n  s.top = 0;\n  s.width = '100%';\n  s.height = '100%';\n  s.background = 'rgba(0, 0, 0, 0.3)';\n  overlay.addEventListener('click', this.hide.bind(this));\n\n  var width = 280;\n  var dialog = document.createElement('div');\n  var s = dialog.style;\n  s.boxSizing = 'border-box';\n  s.position = 'fixed';\n  s.top = '24px';\n  s.left = '50%';\n  s.marginLeft = (-width/2) + 'px';\n  s.width = width + 'px';\n  s.padding = '24px';\n  s.overflow = 'hidden';\n  s.background = '#fafafa';\n  s.fontFamily = \"'Roboto', sans-serif\";\n  s.boxShadow = '0px 5px 20px #666';\n\n  dialog.appendChild(this.createH1_('Select your viewer'));\n  for (var id in options) {\n    dialog.appendChild(this.createChoice_(id, options[id].label));\n  }\n  dialog.appendChild(this.createButton_('Save', this.onSave_.bind(this)));\n\n  container.appendChild(overlay);\n  container.appendChild(dialog);\n\n  return container;\n};\n\nViewerSelector.prototype.createH1_ = function(name) {\n  var h1 = document.createElement('h1');\n  var s = h1.style;\n  s.color = 'black';\n  s.fontSize = '20px';\n  s.fontWeight = 'bold';\n  s.marginTop = 0;\n  s.marginBottom = '24px';\n  h1.innerHTML = name;\n  return h1;\n};\n\nViewerSelector.prototype.createChoice_ = function(id, name) {\n  /*\n  <div class=\"choice\">\n  <input id=\"v1\" type=\"radio\" name=\"field\" value=\"v1\">\n  <label for=\"v1\">Cardboard V1</label>\n  </div>\n  */\n  var div = document.createElement('div');\n  div.style.marginTop = '8px';\n  div.style.color = 'black';\n\n  var input = document.createElement('input');\n  input.style.fontSize = '30px';\n  input.setAttribute('id', id);\n  input.setAttribute('type', 'radio');\n  input.setAttribute('value', id);\n  input.setAttribute('name', 'field');\n\n  var label = document.createElement('label');\n  label.style.marginLeft = '4px';\n  label.setAttribute('for', id);\n  label.innerHTML = name;\n\n  div.appendChild(input);\n  div.appendChild(label);\n\n  return div;\n};\n\nViewerSelector.prototype.createButton_ = function(label, onclick) {\n  var button = document.createElement('button');\n  button.innerHTML = label;\n  var s = button.style;\n  s.float = 'right';\n  s.textTransform = 'uppercase';\n  s.color = '#1094f7';\n  s.fontSize = '14px';\n  s.letterSpacing = 0;\n  s.border = 0;\n  s.background = 'none';\n  s.marginTop = '16px';\n\n  button.addEventListener('click', onclick);\n\n  return button;\n};\n\nmodule.exports = ViewerSelector;\n\n},{\"./device-info.js\":9,\"./emitter.js\":14,\"./util.js\":24}],26:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar Util = _dereq_('./util.js');\n\n/**\n * Android and iOS compatible wakelock implementation.\n *\n * Refactored thanks to dkovalev@.\n */\nfunction AndroidWakeLock() {\n  var video = document.createElement('video');\n\n  video.addEventListener('ended', function() {\n    video.play();\n  });\n\n  this.request = function() {\n    if (video.paused) {\n      // Base64 version of videos_src/no-sleep-120s.mp4.\n      video.src = Util.base64('video/mp4', 'AAAAGGZ0eXBpc29tAAAAAG1wNDFhdmMxAAAIA21vb3YAAABsbXZoZAAAAADSa9v60mvb+gABX5AAlw/gAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAdkdHJhawAAAFx0a2hkAAAAAdJr2/rSa9v6AAAAAQAAAAAAlw/gAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAQAAAAHAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAJcP4AAAAAAAAQAAAAAG3G1kaWEAAAAgbWRoZAAAAADSa9v60mvb+gAPQkAGjneAFccAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAABodtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAZHc3RibAAAAJdzdHNkAAAAAAAAAAEAAACHYXZjMQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAMABwASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAADFhdmNDAWQAC//hABlnZAALrNlfllw4QAAAAwBAAAADAKPFCmWAAQAFaOvssiwAAAAYc3R0cwAAAAAAAAABAAAAbgAPQkAAAAAUc3RzcwAAAAAAAAABAAAAAQAAA4BjdHRzAAAAAAAAAG4AAAABAD0JAAAAAAEAehIAAAAAAQA9CQAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEATEtAAAAAAQAehIAAAAABAAAAAAAAAAEAD0JAAAAAAQBMS0AAAAABAB6EgAAAAAEAAAAAAAAAAQAPQkAAAAABAExLQAAAAAEAHoSAAAAAAQAAAAAAAAABAA9CQAAAAAEALcbAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAABuAAAAAQAAAcxzdHN6AAAAAAAAAAAAAABuAAADCQAAABgAAAAOAAAADgAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAMAAAAEgAAAA4AAAAMAAAADAAAABIAAAAOAAAADAAAAAwAAAASAAAADgAAAAwAAAAM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');\n      video.play();\n    }\n  };\n\n  this.release = function() {\n    video.pause();\n    video.src = '';\n  };\n}\n\nfunction iOSWakeLock() {\n  var timer = null;\n\n  this.request = function() {\n    if (!timer) {\n      timer = setInterval(function() {\n        window.location = window.location;\n        setTimeout(window.stop, 0);\n      }, 30000);\n    }\n  }\n\n  this.release = function() {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n  }\n}\n\n\nfunction getWakeLock() {\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  if (userAgent.match(/iPhone/i) || userAgent.match(/iPod/i)) {\n    return iOSWakeLock;\n  } else {\n    return AndroidWakeLock;\n  }\n}\n\nmodule.exports = getWakeLock();\n},{\"./util.js\":24}],27:[function(_dereq_,module,exports){\n/*\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Polyfill ES6 Promises (mostly for IE 11).\n_dereq_('es6-promise').polyfill();\n\nvar CardboardVRDisplay = _dereq_('./cardboard-vr-display.js');\nvar MouseKeyboardVRDisplay = _dereq_('./mouse-keyboard-vr-display.js');\n// Uncomment to add positional tracking via webcam.\n//var WebcamPositionSensorVRDevice = require('./webcam-position-sensor-vr-device.js');\nvar VRDisplay = _dereq_('./base.js').VRDisplay;\nvar HMDVRDevice = _dereq_('./base.js').HMDVRDevice;\nvar PositionSensorVRDevice = _dereq_('./base.js').PositionSensorVRDevice;\nvar VRDisplayHMDDevice = _dereq_('./display-wrappers.js').VRDisplayHMDDevice;\nvar VRDisplayPositionSensorDevice = _dereq_('./display-wrappers.js').VRDisplayPositionSensorDevice;\n\nfunction WebVRPolyfill() {\n  this.displays = [];\n  this.devices = []; // For deprecated objects\n  this.devicesPopulated = false;\n  this.nativeWebVRAvailable = this.isWebVRAvailable();\n  this.nativeLegacyWebVRAvailable = this.isDeprecatedWebVRAvailable();\n\n  if (!this.nativeLegacyWebVRAvailable) {\n    if (!this.nativeWebVRAvailable) {\n      this.enablePolyfill();\n    }\n    if (WebVRConfig.ENABLE_DEPRECATED_API) {\n      this.enableDeprecatedPolyfill();\n    }\n  }\n}\n\nWebVRPolyfill.prototype.isWebVRAvailable = function() {\n  return ('getVRDisplays' in navigator);\n};\n\nWebVRPolyfill.prototype.isDeprecatedWebVRAvailable = function() {\n  return ('getVRDevices' in navigator) || ('mozGetVRDevices' in navigator);\n};\n\nWebVRPolyfill.prototype.populateDevices = function() {\n  if (this.devicesPopulated) {\n    return;\n  }\n\n  // Initialize our virtual VR devices.\n  var vrDisplay = null;\n\n  // Add a Cardboard VRDisplay on compatible mobile devices\n  if (this.isCardboardCompatible()) {\n    vrDisplay = new CardboardVRDisplay();\n\n    this.displays.push(vrDisplay);\n\n    // For backwards compatibility\n    if (WebVRConfig.ENABLE_DEPRECATED_API) {\n      this.devices.push(new VRDisplayHMDDevice(vrDisplay));\n      this.devices.push(new VRDisplayPositionSensorDevice(vrDisplay));\n    }\n  }\n\n  // Add a Mouse and Keyboard driven VRDisplay for desktops/laptops\n  if (!this.isMobile() && !WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED) {\n    vrDisplay = new MouseKeyboardVRDisplay();\n    this.displays.push(vrDisplay);\n\n    // For backwards compatibility\n    if (WebVRConfig.ENABLE_DEPRECATED_API) {\n      this.devices.push(new VRDisplayHMDDevice(vrDisplay));\n      this.devices.push(new VRDisplayPositionSensorDevice(vrDisplay));\n    }\n  }\n\n  // Uncomment to add positional tracking via webcam.\n  //if (!this.isMobile() && WebVRConfig.ENABLE_DEPRECATED_API) {\n  //  positionDevice = new WebcamPositionSensorVRDevice();\n  //  this.devices.push(positionDevice);\n  //}\n\n  this.devicesPopulated = true;\n};\n\nWebVRPolyfill.prototype.enablePolyfill = function() {\n  // Provide navigator.getVRDisplays.\n  navigator.getVRDisplays = this.getVRDisplays.bind(this);\n\n  // Provide the VRDisplay object.\n  window.VRDisplay = VRDisplay;\n};\n\nWebVRPolyfill.prototype.enableDeprecatedPolyfill = function() {\n  // Provide navigator.getVRDevices.\n  navigator.getVRDevices = this.getVRDevices.bind(this);\n\n  // Provide the CardboardHMDVRDevice and PositionSensorVRDevice objects.\n  window.HMDVRDevice = HMDVRDevice;\n  window.PositionSensorVRDevice = PositionSensorVRDevice;\n};\n\nWebVRPolyfill.prototype.getVRDisplays = function() {\n  this.populateDevices();\n  var displays = this.displays;\n  return new Promise(function(resolve, reject) {\n    try {\n      resolve(displays);\n          } catch (e) {\n      reject(e);\n    }\n  });\n};\n\nWebVRPolyfill.prototype.getVRDevices = function() {\n  console.warn('getVRDevices is deprecated. Please update your code to use getVRDisplays instead.');\n  var self = this;\n  return new Promise(function(resolve, reject) {\n    try {\n      if (!self.devicesPopulated) {\n        if (self.nativeWebVRAvailable) {\n          return navigator.getVRDisplays(function(displays) {\n            for (var i = 0; i < displays.length; ++i) {\n              self.devices.push(new VRDisplayHMDDevice(displays[i]));\n              self.devices.push(new VRDisplayPositionSensorDevice(displays[i]));\n            }\n            self.devicesPopulated = true;\n            resolve(self.devices);\n          }, reject);\n        }\n\n        if (self.nativeLegacyWebVRAvailable) {\n          return (navigator.getVRDDevices || navigator.mozGetVRDevices)(function(devices) {\n            for (var i = 0; i < devices.length; ++i) {\n              if (devices[i] instanceof HMDVRDevice) {\n                self.devices.push(devices[i]);\n              }\n              if (devices[i] instanceof PositionSensorVRDevice) {\n                self.devices.push(devices[i]);\n              }\n            }\n            self.devicesPopulated = true;\n            resolve(self.devices);\n          }, reject);\n        }\n      }\n\n      self.populateDevices();\n      resolve(self.devices);\n    } catch (e) {\n      reject(e);\n    }\n  });\n};\n\n/**\n * Determine if a device is mobile.\n */\nWebVRPolyfill.prototype.isMobile = function() {\n  return /Android/i.test(navigator.userAgent) ||\n      /iPhone|iPad|iPod/i.test(navigator.userAgent);\n};\n\nWebVRPolyfill.prototype.isCardboardCompatible = function() {\n  // For now, support all iOS and Android devices.\n  // Also enable the WebVRConfig.FORCE_VR flag for debugging.\n  return this.isMobile() || WebVRConfig.FORCE_ENABLE_VR;\n};\n\nmodule.exports = WebVRPolyfill;\n\n},{\"./base.js\":4,\"./cardboard-vr-display.js\":7,\"./display-wrappers.js\":10,\"./mouse-keyboard-vr-display.js\":17,\"es6-promise\":1}]},{},[15]);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./vendor/webvr-polyfill.js\n ** module id = 157\n ** module chunks = 0 1\n **/","import { Map, List } from 'immutable';\nimport createReducer from './utils/createReducer';\n\n/**\n * Plugins: loading, running\n *\n * @module plugins\n * @private\n */\n\nconst SET_API='SET_API';\nconst LOAD_PLUGIN='LOAD_PLUGIN';\nconst LOADING_PLUGIN='LOADING_PLUGIN';\nconst LOADED_PLUGIN='LOADED_PLUGIN';\nconst SET_PLUGIN='SET_PLUGIN';\nconst LOADING_PLUGIN_ERROR='LOADING_PLUGIN_ERROR';\n\nconst initialState = Map({\n  api: null,\n  plugins: Map(),\n  loading: Map(),\n});\n\nconst reducer = createReducer(initialState, {\n  [SET_API](state, api) {\n    return state.set('api', api);\n  },\n  [LOADING_PLUGIN](state, name) {\n    return state.setIn(['loading', name], true);\n  },\n  [LOADED_PLUGIN](state, name, { action }) {\n    return state.setIn(['loading', name], false);\n  },\n  [SET_PLUGIN](state, { name, plugin }) {\n    return state.setIn(['plugins', name], plugin);\n  }\n});\n\nfunction initPlugin(store, name) {\n  return (response) => {\n    const { content } = response;\n    const fn = new Function('api', content);\n    return Promise.resolve(fn(store.getIn(['plugins','api'])));\n  }\n};\n\nfunction loadPlugin(name) {\n  return (store) => {\n    const sceneId = store.getIn(['sceneIO', 'id']);\n    if (!sceneId) return Promise.reject('No scene attached');\n\n    const api = store.getIn(['plugins','api']);\n    if (api && api[name]) return Promise.resolve(api[name]);\n\n    return store.callApi({\n      types: [LOADING_PLUGIN, LOADED_PLUGIN, LOADING_PLUGIN_ERROR],\n      url: `${__APIROOT__}/scenes/${sceneId}/plugins/${name}`,\n      payload: name,\n      queryKey: 'PLUGIN'+name,\n    }).then(initPlugin(store, name)).then(function(plugin) {\n      store.dispatch({ type: SET_PLUGIN, payload: { name, plugin } });\n      return plugin;\n    });\n  }\n}\n\nexport function get(store, name) {\n  const plugin = store.getIn(['plugins','plugins',name]);\n  return plugin ? Promise.resolve(plugin) : store.dispatch(loadPlugin(name));\n}\n\nexport function setApi(api) {\n  return { type: SET_API, payload: api };\n}\n\n/**\n * Returns a function that will run the setup command\n */\nexport function getSetupCommand(store, cmd, data) {\n  try {\n    const [pluginName,command] = cmd.split('/');\n    const setupData = typeof data === 'string' ? JSON.parse(data) : data;\n    return function() {\n      return get(store, pluginName).then(function(plugin) {\n        if (Array.isArray(setupData)) {\n          return Promise.resolve(plugin[command].apply(plugin, setupData));\n        } else {\n          return Promise.resolve(plugin[command](setupData));\n        }\n      });\n    }\n  } catch (e) {\n    return function() { console.error(e); }\n  }\n}\n\n\nconst publicApi = {\n  reducer,\n  actions: { loadPlugin },\n  selectors: { get, getSetupCommand },\n};\n\nexport default publicApi;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/plugins.js\n **/","import { get, getAll, filter, find, set as sceneSet, setAll, clone as sceneClone } from './scene';\nimport { fetch as fetchScene } from './sceneIO';\nimport { openAnnotation as open, closeAnnotation as close } from './annotations';\n\n//export availableActions = {\n//  show: { args: [{key: 'name', type: 'String'}], description: 'Show nodes' },\n//  hide: { args: [{key: 'name', type: 'String'}], description: 'Hide nodes' },\n//};\n\nexport function show({ name }, { from }) {\n  return (store) => {\n    return setAll(store, { from, name, plug: 'Properties', property: 'visible' }, true)\n  }\n}\n\nexport function hide({ name }, { from }) {\n  return (store) => {\n    return setAll(store, { from, name, plug: 'Properties', property: 'visible' }, false)\n  }\n}\n\n/**\n * setMaterial will assign a `materialName`, `to` a node. It will optionally `clone`\n * the material, and optionally fetch `fromSceneId`.\n *\n * @param {Object} attrs\n * @param {String} attrs.to\n * @param {String} attrs.materialName\n * @param {String?} attrs.fromSceneId\n * @param {Boolean?} attrs.clone\n * @param {Object} options\n * @param {String?} options.from Optionally, a `from` base query to use to resolve the node\n */\nexport function setMaterial({ to, materialName, fromSceneId, clone }, { from }) {\n  return (store) => {\n    return (fromSceneId ? store.dispatch(fetchScene(fromSceneId)) : Promise.resolve(true)).then(function() {\n      const matId = find(store, {\n        from: (fromSceneId ? {id: fromSceneId} : null),\n        name: materialName\n      });\n      (clone && matId ? store.dispatch(sceneClone([matId])) : Promise.resolve({[matId]: matId})).then(function(cloned) {\n        var path = find(store, { from, name: to, plug: 'Material', property: 'reference' });\n        return store.dispatch(setAll({ from, name: to, plug: 'Material', property: 'reference' }, cloned[matId]));\n      });\n    });\n  }\n}\n\n/**\n * mate a `parentNode` to `targetNode`: Will align the transform of the `parentNode` to\n * that of `targetNode`. Set `translationOnly` to only set translation (must be previously aligned).\n *\n * @param {Object} attrs\n * @param {String} attrs.parentNode name of the node to move\n * @param {String} attrs.targetNode name of the target node\n * @param {Boolean?} attrs.translationOnly change translation only, not complete transform.\n * @param {Object} options\n * @param {String?} options.from Optionally, a `from` base query to use to resolve the parent node\n *\n */\nexport function mate({ parentNode, targetNode, translationOnly }, { from }) {\n  return (store) => {\n    var targetTranslation = get(store, { name: targetNode, evalPlug: 'Transform', property: 'translation' });\n    var parentTranslation = get(store, { from, name: parentNode, evalPlug: 'Transform', property: 'translation' });\n\n    if (targetTranslation && parentTranslation) {\n      const diff = targetTranslation.clone().sub(parentTranslation);\n      //console.log('diff?', parentNode, parentTranslation, 'to', targetNode, targetTranslation);\n      //console.log('set', get(store, {id: from.id, property: 'name'}), diff);\n      return store.dispatch(sceneSet({id: from.id, plug: 'Transform', property: 'translation'}, diff));\n    }\n    return Promise.resolve(true);\n  }\n}\n\nexport function setImage(query, reference) {\n  return (store) => {\n    const ref = scene.find(reference);\n    if (!ref) return Promise.resolve(true);\n    return setAll(store, { name: query, plug: 'Material', property: 'baseMap' }, ref);\n  }\n}\n\nexport function setDefaultColor(query, value) {\n  return (store) => {\n    return setAll({ name: query, plug: 'Material', property: 'defaultColor' }, value);\n  }\n}\n\nexport function moveCamera(query, value) {\n  return (store) => {\n    const duration = Number(value) || 500;\n    var camera = scene.find(query);\n    if (camera) return animateCameraTo(camera, duration);\n    return Promise.resolve(true);\n  }\n}\n\nexport function openAnnotation(query) {\n  return (store) => {\n    return Promise.all(filter(query).map((path) => open(store, path)));\n  }\n}\n\nexport function closeAnnotation(query) {\n  return (store) => {\n    return Promise.all(filter(query).map((path) => close(store, path)));\n  }\n}\n\nexport function set(query, value) {\n  return (store) => {\n    return setAll(store, query, value);\n  }\n}\n\nconst publicApi = {\n  actions: { show, hide, mate, setMaterial, setImage, setDefaultColor, moveCamera,\n    openAnnotation, closeAnnotation, set },\n  selectors: { },\n};\n\nexport default publicApi;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/modules/configuration.js\n **/","import { is, Record, Map } from 'immutable';\nimport { curry, map, mapObjIndexed, pick, pickBy } from 'ramda';\nimport schemaTypes from './schemaTypes';\n\nexport default function makeAllOperators(hierarchy, { withNone }) {\n  var make = curry(makeOperator);\n  let records = mapObjIndexed((ops, plug) => {\n    return mapObjIndexed((op, name) => {\n      return makeOperator(plug, op, name);\n    }, ops);\n  }, hierarchy);\n  if (withNone) records.None = {NoOp: makeOperator('None', {schema: {}}, 'NoOp')};\n  return records;\n};\n\n// export const Operator = Record({type: '', name: '', attributes: null});\n\nfunction makeOperator(plug, op, name) {\n  let props = map((info, key) => {\n    if (schemaTypes[info.type]) return Object.assign({type: info.type, schema: info}, schemaTypes[info.type](info));\n    return {\n      set: (v) => v,\n      get: (v) => v\n    };\n  }, op.schema);\n\n  let keys = Object.keys(props);\n\n  let defaults = map((prop, key) => prop.defaultValue, props);\n  defaults.type = name;\n  defaults.name = name;\n\n  let references = pickBy((prop, key) => prop.isReference, props);\n  let fileReferences = pickBy((prop, key) => prop.isFileReference, props);\n\n  let Operator = class R extends Record(defaults, plug+name) {\n    static keys() {\n      return keys;\n    }\n\n    keys() {\n      return keys;\n    }\n\n    getProperties() {\n      return props;\n    }\n\n    getReferences() {\n      return Map(pickBy((v) => !!v, mapObjIndexed((schema, key) => {\n        return this.get(key);\n      }, references)));\n    }\n\n    getFileReferences() {\n      return Map(pickBy((v) => !!v, mapObjIndexed((schema, key) => {\n        return this.get(key);\n      }, fileReferences)));\n    }\n\n    typeOf(key) {\n      return op.schema[key] && op.schema[key].type;\n    }\n\n    set(key, val) {\n      const newVal = props[key] ? props[key].set(val) : val;\n      return super.set(key, newVal);\n    }\n\n    export() {\n      const op = mapObjIndexed((prop, key) => {\n        const v = this.get(key);\n        return fileReferences[key] || references[key] ? (v ? v.get('id') : null) : v;\n      }, props);\n      op.name = name;\n      op.primitive = plug;\n      return op;\n    }\n\n    doUpdate(operator, primitive, sceneId) {\n      const result = op.update ? op.update.call(op, operator, primitive, sceneId) :\n        operator.mergeInto(operator, primitive);\n      if (!result) {\n        console.error('Operator not returning its result: ', name, op);\n      }\n      return result || Map();\n    }\n  }\n  return Operator;\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/makeAllOperators.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/classCallCheck.js\n ** module id = 162\n ** module chunks = 0 1\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"babel-runtime/core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/createClass.js\n ** module id = 163\n ** module chunks = 0 1\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/possibleConstructorReturn.js\n ** module id = 164\n ** module chunks = 0 1\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"babel-runtime/core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"babel-runtime/core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/get.js\n ** module id = 165\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/get-own-property-descriptor.js\n ** module id = 166\n ** module chunks = 0 1\n **/","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key){\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/get-own-property-descriptor.js\n ** module id = 167\n ** module chunks = 0 1\n **/","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject                 = require('./_to-iobject')\n  , $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function(){\n  return function getOwnPropertyDescriptor(it, key){\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.get-own-property-descriptor.js\n ** module id = 168\n ** module chunks = 0 1\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"babel-runtime/core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"babel-runtime/core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/inherits.js\n ** module id = 169\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/set-prototype-of.js\n ** module id = 170\n ** module chunks = 0 1\n **/","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/set-prototype-of.js\n ** module id = 171\n ** module chunks = 0 1\n **/","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', {setPrototypeOf: require('./_set-proto').set});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.set-prototype-of.js\n ** module id = 172\n ** module chunks = 0 1\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/create.js\n ** module id = 173\n ** module chunks = 0 1\n **/","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D){\n  return $Object.create(P, D);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/create.js\n ** module id = 174\n ** module chunks = 0 1\n **/","var $export = require('./_export')\r\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\r\n$export($export.S, 'Object', {create: require('./_object-create')});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.create.js\n ** module id = 175\n ** module chunks = 0 1\n **/","import { List } from 'immutable';\nimport { FileReference, NodeReference, PlugReference, Vec2, Vec3, Color} from './primitives';\n\nconst schemaTypes = {\n  'Boolean': function(schema) {\n    let defaultValue = schema.defaultValue || false;\n\n    return {\n      defaultValue,\n\n      set: (val) => {\n        return typeof val == null ? defaultValue : !!val;\n      }\n    }\n  },\n\n  'Label': function(schema) {\n    return {set: (val) => val};\n  },\n\n  'Number': function(schema) {\n    let min = schema.minValue;\n    let max = schema.maxValue;\n    let defaultValue = schema.defaultValue || 0;\n\n    let clamp;\n\n    if (min !== undefined && max !== undefined) clamp = (v) => Math.min(Math.max(min, v), max);\n    else if (min !== undefined) clamp = (v) => Math.max(v, min);\n    else if (max !== undefined) clamp = (v) => Math.min(v, max);\n    else clamp = (v) => v;\n\n    return {\n      defaultValue,\n\n      set: (val) => {\n        let num = Number(val);\n        if (isNaN(num)) return defaultValue;\n        return Math.round(clamp(num) * 10000) / 10000;\n      }\n    }\n  },\n\n  'Integer': function(schema) {\n    let min = schema.minValue;\n    let max = schema.maxValue;\n    let defaultValue = schema.defaultValue || 0;\n\n    let clamp;\n\n    if (min !== undefined && max !== undefined) clamp = (v) => Math.min(Math.max(min, v), max);\n    else if (min !== undefined) clamp = (v) => Math.max(v, min);\n    else if (max !== undefined) clamp = (v) => Math.min(v, max);\n    else clamp = (v) => v;\n\n    return {\n      defaultValue,\n\n      set: (val) => {\n        let num = Number(val);\n        if (isNaN(num)) return defaultValue;\n        return parseInt(clamp(num));\n      }\n    }\n  },\n\n  'Plug': function(schema) {\n    if (!schema.plug) throw new Error(\"plug property expects a `plug` property\");\n\n    return {\n      isReference: true,\n\n      set: (id) => {\n        return id ? PlugReference({id, plug: schema.plug}) : null;\n      },\n    }\n  },\n\n  'Options': function(schema) {\n    let defaultValue = schema.defaultValue;\n    return {\n      set: (val) => {\n        return typeof val == null ? defaultValue : val;\n      }\n    }\n  },\n\n  'Image': function(schema) {\n    return {\n      isFileReference: true,\n\n      set: (id) => {\n        return id ? FileReference({id}) : null;\n      },\n    }\n  },\n\n  'Binary': function(schema) {\n    return {\n      isFileReference: true,\n\n      set: (id) => {\n        return id ? FileReference({id}) : null;\n      },\n    }\n  },\n\n  'File': function(schema) {\n    return {\n      isFileReference: true,\n\n      set: (id) => {\n        return id ? FileReference({id}) : null;\n      },\n    }\n  },\n\n  'Object': function(schema) {\n    let defaultValue = schema.defaultValue || {};\n    return {\n      set: (obj) => {\n        return obj || defaultValue;\n      }\n    }\n  },\n\n  'Text': function(schema) {\n    let defaultValue = schema.defaultValue || '';\n\n    return {\n      defaultValue,\n\n      set: (val) => {\n        return typeof val === 'string' ? val : ''+val;\n      }\n    }\n  },\n\n  'String': function(schema) {\n    let defaultValue = schema.defaultValue;\n\n    return {\n      defaultValue,\n\n      set: (str) => str || defaultValue\n    }\n  },\n\n  'Node': function(schema) {\n    return {\n      isReference: true,\n\n      set: (id) => {\n        return id ? NodeReference({id}) : null;\n      },\n    }\n  },\n\n  'NodeList': function(schema) {\n    return {\n      isReference: true,\n\n      set: (ids) => {\n        if (Array.isArray(ids)) return List(ids.map((id) => {\n          return typeof id === 'string' ? NodeReference({id}) : id;\n        }));\n        if (ids.map) return ids.map((id) => {\n          return typeof id === 'string' ? NodeReference({id}) : id;\n        });\n        return List();\n      },\n    }\n  },\n    // return {value: val, references: {[val]: true}};\n\n  'Vec2': function(schema) {\n    let defaultValue = Vec2(schema.defaultValue);\n\n    return {\n      defaultValue,\n\n      set: (val) => {\n        return val ? Vec2(val) : defaultValue;\n      }\n    }\n  },\n\n  'Color': function(schema) {\n    let defaultValue = Color(schema.defaultValue);\n\n    return {\n      defaultValue,\n\n      set: (val) => {\n        if (!val) return defaultValue;\n        return Color(val);\n      }\n    }\n  },\n\n  'Vec3': function(schema) {\n    let defaultValue = Vec3(schema.defaultValue);\n\n    return {\n      defaultValue,\n\n      set: (val) => {\n        return val ? Vec3(val) : defaultValue;\n      }\n    }\n  }\n}\n\nexport default schemaTypes;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/schemaTypes.js\n **/","import {Record} from 'immutable';\n\nexport const FileReference = Record({id: ''}, 'FileReference');\nexport const NodeReference = Record({id: ''}, 'NodeReference');\nexport const PlugReference = Record({id: '', plug: ''}, 'PlugReference');\nexport const OperatorReference = Record({id: '', plug: '', index: 0}, 'OperatorReference');\n\nexport const Vec2 = Record({x: 0, y: 0}, 'Vec2');\nexport const Vec3 = Record({x: 0, y: 0, z: 0}, 'Vec3');\nexport const Color = Record({r: 0, g: 0, b: 0, a: 0}, 'Color');\n\nexport default {\n  FileReference, NodeReference, PlugReference, OperatorReference,\n  Vec2, Vec3, Color\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/primitives.js\n **/","import makeAllOperators from './makeAllOperators';\nimport Annotation from './Annotation';\nimport BinMesh from './BinMesh';\nimport Camera from './Camera';\nimport Environment from './Environment';\nimport Image from './Image';\nimport Light from './Light';\nimport Material from './Material';\nimport Player from './Player';\nimport PolyMesh from './PolyMesh';\nimport Properties from './Properties';\nimport Transform from './Transform';\n\nconst NoOp = {schema: {}};\n\nconst Bone = {Bone: NoOp};\nconst Null = {Null: NoOp};\nconst Pass = {Pass: NoOp};\nconst Mixer = {Action: NoOp, Mixer: NoOp};\nconst Renderer = {'vray/create': NoOp, WebGLRenderer: NoOp};\nconst Timeline = {Timeline: NoOp};\nconst GeneralRenderer = {GeneralRenderer: NoOp};\nconst Viewport = {Viewport: NoOp};\n\nconst records = makeAllOperators({\n  Annotation, BinMesh, Bone, Camera, Environment, GeneralRenderer, Light, Material,\n  Mixer, Null, Pass, Player, PolyMesh, Properties,\n  Renderer, Timeline, Transform, Image, Viewport\n}, {withNone: true});\n\nexport default records;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/minimal.js\n **/","\nconst Annotation = {\n  schema: {\n    useText: {type: 'Boolean', label: 'Use Custom Text', defaultValue: false, animatable: false },\n    text: {type: 'Text', label: 'Custom Text', defaultValue: 'Annotation Text', animatable: false },\n    open: {type: 'Boolean', label: 'Open by default', defaultValue: false, animatable: false },\n    // Mis-spelled `limitVisibility`\n    limitVisilibility: {type: 'Boolean', label: \"Limit Visibility\", defaultValue: false, animatable: false },\n    visibilityAngle: {type: 'Number', label: \"Visibility Angle\", defaultValue: 180, step: 5, minValue: 10, maxValue: 180, animatable: false },\n    directionMode: { label: 'Direction Mode', type: 'Options',\n                labels: ['Manual' , 'Away From Origin'],\n                values: ['manual', 'awayFromOrigin' ],\n                defaultValue: 'manual' },\n    directionTarget: { type: 'Node', label: 'Direction Target' }\n  },\n\n  update: function(operator, primitive, attrs) {\n    var result = operator.mergeInto(operator, primitive);\n    if (!operator.get('useText')) {\n      result = result.set('text', attrs.node.get('name'));\n    }\n    return result;\n  }\n};\n\nexport default { Annotation }\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/Annotation.js\n **/","import { convertToCNSPolyMesh } from '../translators/bingeom';\nimport { getOrFetchBinary, getHash } from '../modules/assets';\nimport { areAssetsLoaded } from '../modules/sceneIO';\n\nimport MeshSmooth from './PolyMesh/MeshSmooth';\n\nconst StaticMesh = {\n  schema: {\n    reference: {type: 'Binary', label: 'Binary Geometry File'}\n  },\n  update: (operator, primitive) => {\n    return [['bingeom', [operator.get('reference').get('id')]]]\n  }\n}\n\nconst ProxyMesh = {\n  schema: {\n    binary: {type: 'Binary', label: 'Binary Geometry File'},\n    reducedBinary: {type: 'Binary', label: 'Reduced Binary Geometry File'},\n    operatorDisplay: { type: \"Number\", defaultValue: 1, label: 'Operator Display Type' },\n    nbLevel: { type: \"Number\", defaultValue: 1}, // 1 -> only binary, 2 -> level0 and binary, 3 -> level0, level1, binary, ....\n    level0: { type: 'Binary', label: 'Binary Geometry File'},\n    level1: { type: 'Binary', label: 'Binary Geometry File'},\n    level2: { type: 'Binary', label: 'Binary Geometry File'},\n    level3: { type: 'Binary', label: 'Binary Geometry File'},\n    level4: { type: 'Binary', label: 'Binary Geometry File'},\n  },\n\n  update: function(operator, primitive, { node, store, properties }) {\n    const visible = properties.get('visible');\n    const binary = operator.get('binary');\n    const fetch = visible || (properties.get('prefetch') && areAssetsLoaded(store))\n    const bingeom = fetch && binary && store.hasApi() && getOrFetchBinary(binary.get('id'))(store);\n    const mesh = bingeom && convertToCNSPolyMesh(bingeom, binary.get('id'));\n    //console.log('Mesh update', 'visible:', visible, 'prefetch:', properties.get('prefetch'), 'fetch:', fetch, 'bingeom:', !!bingeom, ref && ref.get('id'), node.get('name'), mesh);\n    return mesh ? primitive.set('mesh', mesh) : primitive;\n  },\n}\n\nexport default { ProxyMesh, MeshSmooth };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/BinMesh.js\n **/","import { Importer, PolyMaps, PolyMesh } from '../polyMesh';\n\nfunction validateAndRetype(data) {\n  if (data instanceof Uint32Array) return data;\n  else if (data instanceof ArrayBuffer) return new Uint32Array(data);\n  else if (typeof(Buffer) !== \"undefined\" && data instanceof Buffer) {\n    return new Uint32Array( new Uint8Array(data).buffer );\n  }\n  throw new Error(\"Invalid bingeom type: \"+typeof(data));\n};\n\nfunction extractFooter(data) {\n  const jsonLength = data[data.length-2];\n  if (!jsonLength) throw new Error(\"No footer in bingeom\");\n  let charData = new Uint8Array(data.buffer);\n  const len = charData.byteLength - 8;\n  charData = charData.subarray(len - jsonLength, len)\n  return JSON.parse(String.fromCharCode.apply(null, charData));\n}\n\nfunction validateDataInfo(dataInfo) {\n  return dataInfo !== undefined && typeof(dataInfo.o) === \"number\" && typeof(dataInfo.l) === \"number\";\n}\n\nexport function validatePolymeshData(jsonData) {\n  return jsonData && validateDataInfo(jsonData.faceCount) && validateDataInfo(jsonData.faces) && validateDataInfo(jsonData.positions);\n}\n\nfunction assert(truthy, message) {\n  if (!truthy) throw new Error(message);\n}\n\nconst RawUintByteSize = {1: 'RawUint8', 2: 'RawUint16', 4: 'RawUint32'};\n\nconst types = {\n  RawUint8: {shift: 0, arr: Uint8Array},\n  RawUint16: {shift: 1, arr: Uint16Array},\n  RawUint32: {shift: 2, arr: Uint32Array},\n  RawFloat32: {shift: 2, arr: Float32Array}\n};\n\nfunction readArray(buffer, {o,l,b}, dataType=null) {\n  const typeinfo = types[dataType || RawUintByteSize[b || 4]];\n  return new typeinfo.arr(buffer, o, l>>typeinfo.shift);\n}\n\nfunction noTriangulation(faces, faceSize) {\n  return faces;\n}\n\nfunction staticTriangulation(faces, faceSize) {\n  if (faces.length % faceSize !== 0) throw new Error(\"Invalid face index array\");\n  const trianglePerFace = faceSize-2;\n  const nbFaces = 3*(faces.length * trianglePerFace) / faceSize;   // number of triangulated faces\n\n  const newFaces = new faces.constructor(nbFaces);\n  for (let inn = 0, out = 0, il = faces.length; out < il;) {\n    let first  = faces[out++];\n    let second = faces[out++];\n    for (let j = trianglePerFace; j > 0; --j) {\n      newFaces[inn++] = first;\n      newFaces[inn++] = second;\n      second = faces[out++];\n      newFaces[inn++] = second;\n    }\n  }\n  return newFaces;\n};\n\n\nfunction dynamicTriangulation(faces, faceCount) {\n  let fl = faceCount.length;\n  let nbFaces = -(fl<<1); // starts at -2*fl because the number of triangle in on face 'x' is faceCount[x]-2\n  for (let i = fl-1; i >= 0; --i) nbFaces += faceCount[i];\n\n  const newFaces = new faces.constructor(nbFaces*3);  // can reuse the same constructor as faces because the max index is the same\n  for (let inn = 0, out = 0, f = 0, fl = faceCount.length; f < fl; ++f) {\n    let first  = faces[out++];\n    let second = faces[out++];\n    for (let j = faceCount[f]-2; j > 0; --j) {\n      newFaces[inn++] = first;\n      newFaces[inn++] = second;\n      second = faces[out++];\n      newFaces[inn++] = second;\n    }\n  }\n  return newFaces;\n};\n\nconst geometryCache = {};\n\nexport function checkGeometryCache(hash) {\n  return geometryCache[hash];\n}\n\n/*\n * cache geometry by file hash. This might break when we start adding\n * on operators, so verify that.\n */\nexport function cacheGeometry(hash, geometry) {\n  geometryCache[hash] = geometry;\n  return geometry;\n}\n\nexport function convertToPolyMesh(data) {\n  const binaryData = validateAndRetype(data);\n  const jsonData = extractFooter(binaryData);\n  //console.log('extracted footer: ', jsonData);\n  const buffer = binaryData.buffer;\n  assert(validatePolymeshData(jsonData), 'Invalid Polymesh Data?');\n\n  const positions = readArray(buffer, jsonData.positions, 'RawFloat32');\n  const fc = readArray(buffer, jsonData.faceCount);\n  let faceCount = fc;\n  if (fc.length === 1) faceCount = fc[0];\n  const triangulationFunction = fc.length === 1 ? (fc[0] !== 3 ? staticTriangulation : noTriangulation) : dynamicTriangulation;\n  const faces = triangulationFunction(readArray(buffer, jsonData.faces), faceCount);\n\n\n  // normalMap\n  const normalMap = jsonData.normalMap && {\n    faces:  triangulationFunction(readArray(buffer, jsonData.normalMap.faces), faceCount),\n    values: readArray(buffer, jsonData.normalMap.values, \"RawFloat32\")\n  };\n\n\n  let uvs = null;\n\n  // uvMaps\n  if (jsonData.uvMaps && Object.keys(jsonData.uvMaps).length) {\n    uvs = {};\n    for (let attr in jsonData.uvMaps) {\n      if (jsonData.uvMaps.hasOwnProperty(attr)) {\n        const map = jsonData.uvMaps[attr];\n         // TODO for vray?: if (options.uvsToVec3Array) throw new Error('vec3ForUvs');\n\n        uvs[attr] = {\n          faces:  triangulationFunction(readArray(buffer, map.faces), faceCount),\n          values: readArray(buffer, map.values, \"RawFloat32\")\n        };\n      }\n    }\n  }\n\n  // // extra data\n  // if (tmp = jsonData.materialIds) {//this.materialIds = reader.readArray(tmp, \"RawUint32\");\n  //   let rawMtl = reader.readArray(tmp, \"RawUint32\");\n  //   if (triangulationFunction !== noTriangulation) {  // noTriangulation, material id already correct!\n  //     let nbTriangulatedFaces = this.faces.length / 3;    // already know the right size of the material ids array\n  //\n  //     let materialTriangulationFunction = (triangulationFunction === staticTriangulation) ? staticMaterialTriangulation : dynamicMaterialTriangulation;\n  //     rawMtl = materialTriangulationFunction(rawMtl, faceCount, nbTriangulatedFaces);\n  //   }\n  //   this.materialIds = rawMtl;\n  // }\n  // return this;\n  return {positions, faces, normalMap, uvs};\n}\n\nconst BIN_VERSION = 1000;\n\n/*\n * Convert PolyMesh to bingeom\n */\nexport function convertToBingeom(polyMesh) { //{ positions, faces, normalMap, uvs }) {\n  const jsonFooter = { blendShapes: {}, colorMaps: {} }; //, uvMaps: { 'default': {}} };\n  let byteLength = 0;\n  const buffers = [];\n  const bufferFooters = [];\n\n  function extract(key, typedArray, footer, readInto) {\n    const sourceBuf = readInto ? (new readInto(typedArray)).buffer : typedArray.buffer;\n    const buf = new Uint8Array(sourceBuf, 0, typedArray.byteLength);\n\n    let reuseFooter = null;\n    for(let i = 0; i<buffers.length; i++){\n      if(equalsArrayBuffers(buf,buffers[i])){\n        reuseFooter = bufferFooters[i];\n        break;\n      }\n    }\n\n    if(reuseFooter !== null){\n      footer[key] = reuseFooter;\n    } else {\n      footer[key] = { b: buf.length / typedArray.length, l: buf.byteLength, o: byteLength };\n      byteLength += buf.byteLength;\n      buffers.push(buf);\n      bufferFooters.push( footer[key] );\n    }\n    //console.log( \"extract: key\", key, \"result\", footer[key], (reuseFooter !== null ) ? 'deduped' : '');\n  }\n\n  function equalsArrayBuffers(a, b) {\n    // a and b must be Uint8Arrays.\n\n    if( a.length !== b.length ) {\n      return false;\n    }\n\n    for( let i = 0; i < a.length; i ++ ) {\n      if( a[i] !== b[i] ) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  function offsetsSum(offsets) {\n    const arr = new Uint32Array(offsets.length-1);\n    for (let i=0; i<(offsets.length-1); i++) {\n      arr[i] = offsets[i+1] - offsets[i];\n    }\n    return arr;\n  }\n\n  extract('faces', polyMesh.positions.faceValueIndices, jsonFooter);\n  extract('faceCount', offsetsSum(polyMesh.faceRangeOffsets), jsonFooter);\n  extract('positions', polyMesh.positions.values.data, jsonFooter, Float32Array)\n\n  if (polyMesh.normalMap) {\n    jsonFooter.normalMap = {};\n    extract('faces', polyMesh.normalMap.faceValueIndices, jsonFooter.normalMap);\n    extract('values', polyMesh.normalMap.values.data, jsonFooter.normalMap, Float32Array);\n  }\n\n  if (polyMesh.uvMaps && polyMesh.uvMaps.length) {\n    jsonFooter.uvMaps = {};\n    polyMesh.uvMaps.namesByIndex.forEach((uvName) => {\n      const uvMap = polyMesh.uvMaps.byName[uvName];\n      jsonFooter.uvMaps[uvName] = {};\n      extract('faces', uvMap.faceValueIndices, jsonFooter.uvMaps[uvName]);\n      extract('values', uvMap.values.data, jsonFooter.uvMaps[uvName], Float32Array);\n    });\n  }\n\n  let jsonFooterString = JSON.stringify(jsonFooter);\n  jsonFooterString += {0: \"\", 1: \"   \", 2: \"  \", 3: \" \"}[jsonFooterString.length % 4];\n\n  let currentByte = 0;\n  const result = new Uint8Array(byteLength + jsonFooterString.length + 8);\n  for (let i=0; i<buffers.length; i++) {\n    result.set(buffers[i], currentByte);\n    currentByte += buffers[i].byteLength;\n  }\n\n  for (let i=0; i<jsonFooterString.length; i++) {\n    result[currentByte++] = jsonFooterString.charCodeAt(i);\n  }\n  let currentDWord = currentByte >> 2;\n  let newBytes32 = new Uint32Array(result.buffer);\n  newBytes32[currentDWord] = jsonFooterString.length;\n  newBytes32[currentDWord+1] = BIN_VERSION;\n  return new Uint32Array(result.buffer);\n}\n\nconst polyMeshCaches = {};\n\nexport function convertToCNSPolyMesh(data, refId) {\n  if (refId && polyMeshCaches[refId]) return polyMeshCaches[refId];\n\n  const binaryData = validateAndRetype(data);\n  const jsonData = extractFooter(binaryData);\n  const buffer = binaryData.buffer;\n\n  if(jsonData && !jsonData.faceCount && !jsonData.faces && !jsonData.positions){\n    console.warn('Warning: PolyMesh is empty.');\n    return new PolyMesh();\n  }\n\n  assert(validatePolymeshData(jsonData), 'Invalid Polymesh Data?');\n\n  const fc = readArray(buffer, jsonData.faceCount);\n  //console.log( 'CNS', CNS );\n  const importer = new Importer();\n  //console.log( 'importer', importer );\n  if( fc.length === 1 ) {\n    importer.defaultFaceArity = fc[0];\n  }\n  else {\n    importer.setFaceArities( fc );\n  }\n\n  importer.collapsePositions = false;\n  importer.collapseMapValues = false;\n\n  const positionFaceIndices = readArray(buffer, jsonData.faces);\n  const positionValues = readArray(buffer, jsonData.positions, 'RawFloat32');\n\n  const positionsId = PolyMaps.id( PolyMaps.TypePosition );\n\n  importer.setMapIndices( positionsId, positionFaceIndices );\n  importer.setMapValues( positionsId, positionValues );\n\n\n  // normalMap\n  if( jsonData.normalMap ) {\n\n    const normalFaceIndices = readArray(buffer, jsonData.normalMap.faces);\n    const normalValues = readArray(buffer, jsonData.normalMap.values, 'RawFloat32');\n\n    const normalsId = PolyMaps.id( PolyMaps.TypeNormal );\n\n    importer.setMapIndices( normalsId, normalFaceIndices );\n    importer.setMapValues( normalsId, normalValues );\n  }\n\n  // uvMaps\n  if (jsonData.uvMaps && Object.keys(jsonData.uvMaps).length) {\n    for (let attr in jsonData.uvMaps) {\n      if (jsonData.uvMaps.hasOwnProperty(attr)) {\n        const map = jsonData.uvMaps[attr];\n\n        const uvFaceIndices = readArray(buffer, map.faces);\n        const uvValues = readArray(buffer, map.values, 'RawFloat32');\n\n        const uvsId = PolyMaps.id( PolyMaps.TypeUV, attr );\n\n        importer.setMapIndices( uvsId, uvFaceIndices );\n        importer.setMapValues( uvsId, uvValues );\n      }\n    }\n  }\n\n  // skinning\n  if( jsonData.skinning ) {\n\n    importer.setSkinning(\n      readArray( buffer, jsonData.skinning.positionSkinRange, \"RawUint32\"),\n      readArray( buffer, jsonData.skinning.skinWeights, \"RawFloat32\"),\n      readArray( buffer, jsonData.skinning.skinBoneIndices, \"RawUint16\"),\n\n      readArray( buffer, jsonData.skinning.poseSkinToPoseBoneTransform, \"RawFloat32\"),\n      readArray( buffer, jsonData.skinning.poseBoneToWorldTransform, \"RawFloat32\")\n    );\n\n  }\n\n  // TODO: add support for UVs.\n  // TODO: add support for Colors.\n  // TODO: add support for MaterialIDs.\n\n  const polyMesh = importer.toMeshAndClear();\n  //console.log('bingeom jsonDate ', jsonData);\n  //console.log('bingeom.js convertToCNSPolyMesh ', polyMesh );\n\n  if (refId) polyMeshCaches[refId] = polyMesh;\n  return polyMesh;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/bingeom.js\n **/","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/buffer/index.js\n ** module id = 182\n ** module chunks = 0 1\n **/","'use strict'\n\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nfunction init () {\n  var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n  for (var i = 0, len = code.length; i < len; ++i) {\n    lookup[i] = code[i]\n    revLookup[code.charCodeAt(i)] = i\n  }\n\n  revLookup['-'.charCodeAt(0)] = 62\n  revLookup['_'.charCodeAt(0)] = 63\n}\n\ninit()\n\nfunction toByteArray (b64) {\n  var i, j, l, tmp, placeHolders, arr\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n  // base64 is 4/3 + up to two characters of the original data\n  arr = new Arr(len * 3 / 4 - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0, j = 0; i < l; i += 4, j += 3) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/buffer/~/base64-js/lib/b64.js\n ** module id = 183\n ** module chunks = 0 1\n **/","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/buffer/~/ieee754/index.js\n ** module id = 184\n ** module chunks = 0 1\n **/","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/~/node-libs-browser/~/buffer/~/isarray/index.js\n ** module id = 185\n ** module chunks = 0 1\n **/","\nimport './three/ThreeInstanceScalarSize';\nimport './generic/utility/polyfill';\nimport Importer from './geometric/tool/Importer';\nimport PolyMesh from './geometric/model/PolyMesh';\nimport PolyMap from './geometric/model/PolyMap';\nimport PolyMaps from './geometric/model/PolyMaps';\nimport Selection from './geometric/transient/Selection';\nimport ThreeExport from './three/ThreeExport';\n\nexport {\n  Importer as Importer,\n  PolyMap as PolyMap,\n  PolyMaps as PolyMaps,\n  PolyMesh as PolyMesh,\n  Selection as Selection,\n  ThreeExport as ThreeExport,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/index.js\n **/","import THREE from 'three';\n\nTHREE.Vector2.InstanceScalarSize = 2;\nTHREE.Vector3.InstanceScalarSize = 3;\nTHREE.Vector4.InstanceScalarSize = 4;\n\nTHREE.Color.InstanceScalarSize = 3;\nTHREE.Quaternion.InstanceScalarSize = 4;\n\nTHREE.Matrix3.InstanceScalarSize = 9;\nTHREE.Matrix4.InstanceScalarSize = 16;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/three/ThreeInstanceScalarSize.js\n **/","if (!Uint32Array.prototype.fill) {\n  Object.defineProperty(Uint32Array.prototype, 'fill', {value: function(value, start, end) {\n    start = start || 0;\n    end = end || this.length;\n    for (var i=start; i<end; i++) {\n      this[i] = value;\n    }\n    return this;\n  }});\n}\n\nif (!Uint32Array.prototype.slice) {\n  Object.defineProperty(Uint32Array.prototype, 'slice', {value: function(start, end) {\n    var i = start === undefined ? 0 : start;\n    var finalIdx = end === undefined ? this.length : end;\n    var count = finalIdx - i;\n    var a = new this.constructor(count);\n    var n = 0;\n    while (i < finalIdx) {\n      a[n] = this[i];\n      ++n;\n      ++i;\n    }\n    return a;\n  }});\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/utility/polyfill.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ScalarArrayView from '../../generic/container/ScalarArrayView';\nimport Arrays from '../../generic/utility/Arrays';\nimport PolyMaps from '../model/PolyMaps';\nimport PolyMap from '../model/PolyMap';\nimport PolyMesh from '../model/PolyMesh';\nimport Skinning from '../model/Skinning';\nimport ImportConversions from '../algorithm/ImportConversions';\n\nexport default function Importer() {\n\n  this.defaultFaceArity = 3; // triangles\n  this.collapsePositions = true; // re-index positions\n  this.collapseMapValues = true; // join equal map values at the same vertex\n\n  this.faceArities = null;\n  this.materialIds = null;\n\n  this.mapIds = [];\n  this.mapValues = {};\n  this.mapIndices = {};\n\n  this.skinning = null;\n};\n\nImporter.prototype = {\n\n  constructor: Importer,\n\n  setFaceArities: function( array,\n      optionalNumberOfElements, optionalOffset, optionalStride ) {\n\n    this.faceArities = new ScalarArrayView(\n        optionalNumberOfElements || null,\n        array,\n        optionalOffset,\n        optionalStride );\n\n    return this;\n  },\n\n  setMaterialIds: function( array,\n      optionalNumberOfElements, optionalOffset, optionalStride ) {\n\n    this.materialIds = new ScalarArrayView(\n        optionalNumberOfElements || null,\n        array,\n        optionalOffset,\n        optionalStride );\n\n    return this;\n  },\n\n  setMapValues: function( mapId, array,\n      optionalNumberOfElements, optionalOffset, optionalStride ) {\n\n    var id = PolyMaps.checkId( mapId ),\n      ids = this.mapIds;\n\n    if ( ids.indexOf( id ) === -1 ) ids.push( id );\n\n    this.mapValues[ id ] = new ObjectArrayView(\n          PolyMaps.getTypeInfo(\n              PolyMaps.getAnchorName( mapId ) ).ElementType,\n          optionalNumberOfElements || null,\n          ! optionalOffset ? array : array.subarray( optionalOffset ),\n          optionalStride );\n\n    return this;\n  },\n\n  setMapIndices: function( mapId, array,\n      optionalNumberOfElements, optionalOffset, optionalStride ) {\n\n    this.mapIndices[ PolyMaps.checkId( mapId ) ] =\n        new ScalarArrayView(\n          optionalNumberOfElements || null,\n          array,\n          optionalOffset,\n          optionalStride );\n\n    return this;\n  },\n\n  setSkinning: function( positionSkinRange, skinWeights, skinBoneIndices, poseSkinToPoseBoneTransform, poseBoneToWorldTransform ) {\n    this.skinning = {};\n\n      this.skinning.positionSkinRange = positionSkinRange;\n      this.skinning.skinWeights = skinWeights;\n      this.skinning.skinBoneIndices = skinBoneIndices;\n\n      this.skinning.poseSkinToPoseBoneTransform = new ObjectArrayView( THREE.Matrix4, null, poseSkinToPoseBoneTransform );\n      this.skinning.poseBoneToWorldTransform = new ObjectArrayView( THREE.Matrix4, null, poseBoneToWorldTransform );\n\n    return this;\n  },\n\n\n  toMeshAndClear: function() {\n\n    var mapIds = this.mapIds,\n      mapValueData = this.mapValues,\n      mapIndexData = this.mapIndices,\n\n      PositionMapId = PolyMaps.IdPositions,\n      positions = mapValueData[ PositionMapId ],\n\n      faceArities = this.faceArities,\n      materialIds = this.materialIds;\n\n    if ( ! positions )\n      throw Error( \"No positions!\" );\n\n    var positionIndices = mapIndexData[ PositionMapId ] || null,\n\n      nFaceVertices = positionIndices ?\n          positionIndices.length : positions.length;\n\n\n    var faceOffsets = null;\n    //  -----------\n\n    if ( faceArities === null ) {\n\n      var fixedArity = this.defaultFaceArity,\n        nFaces = nFaceVertices / fixedArity | 0;\n\n      faceArities = new Uint32Array( nFaces + 1 ).fill( fixedArity, 1 );\n\n    } else {\n\n      var nFaces = faceArities.length;\n      faceArities = faceArities.toArray( Uint32Array, 1 );\n\n    }\n\n    // Here faceOffsets contains the face arities after a zero at index 0,\n    // their accumulation yields the offsets (including length sentinel):\n    faceOffsets = Arrays.accumulate( faceArities ); // (in-place)\n\n\n    var indices = null;\n    //  -------\n\n    for ( var i = 0; i !== mapIds.length; ++ i ) {\n      // avoid aliasing with the map indices in case it's the same array\n\n      var mapId = mapIds[ i ];\n      if ( mapId === PositionMapId ) continue;\n\n      var mapIndexView = mapIndexData[ mapId ];\n\n      if ( mapIndexView !== undefined )\n        mapIndexView.forceRepack( Uint32Array );\n    }\n\n    if ( this.collapsePositions ) {\n      // re-index values\n\n      var indices = null;\n\n      if ( positionIndices !== null )\n        indices = positionIndices.repack( Uint32Array ).data;\n\n      positions = ImportConversions.\n          collapsePositions( positions, indices );\n\n    } else if ( positionIndices !== null ) {\n      // use given indices as-is\n      indices = positionIndices.repack( Uint32Array ).data;\n    }\n\n\n    var mesh = PolyMesh.fromData(\n    /*  ==== */ faceOffsets, positions, indices,\n          materialIds && materialIds.repack( Uint32Array ).data );\n\n    for ( var i = 0; i !== mapIds.length; ++ i ) {\n\n      var mapId = mapIds[ i ];\n      if ( mapId === PositionMapId ) continue;\n\n      var mapIndexView = mapIndexData[ mapId ],\n        mapValueView = mapValueData[ mapId ],\n\n        polyMap = PolyMap.fromData(\n            faceOffsets, mapIndexView.data, mapValueView );\n\n      if ( this.collapseMapValues ) {\n\n        ImportConversions.collapseMapVertexValues( mesh, polyMap );\n\n        polyMap.compactValues();\n      }\n\n      PolyMaps.assignMap( mesh, mapId, polyMap );\n\n    }\n\n    if(this.skinning) mesh.skinning = new Skinning(this.skinning);\n\n\n    Importer.call( this ); // re-run constructor to clear state\n\n    return mesh;\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/tool/Importer.js\n **/","import Arrays from '../utility/Arrays';\nimport FlatArrayView from './FlatArrayView';\nimport ObjectBuffer from './ObjectBuffer';\n\n/**\n * Object view mapping fixed size objects to flat arrays.\n *\n * @constructor\n *\n * @param {!function(new:*)} type\n *\n *    object constructor\n *\n * @param {number} length\n *\n *    number of objects to map,\n *    can be null when an existing array is given,\n *\n * @param {ArrayOrType=} optionalArrayOrType\n *\n *    existing array or array constructor, default is Float32Array\n *\n * @param {number=} optionalStride\n *\n *    an explicit stride for cases where it differs from the element size\n *    deduced from {@code type.InstanceScalarSize}\n */\nexport default function ObjectArrayView( type, length,\n    optionalArrayOrType, optionalStride ) {\n\n  var elementSize = type.InstanceScalarSize || optionalStride,\n    stride = optionalStride || elementSize,\n    arrayLength = length !== null ? length * stride : null;\n\n  if ( elementSize === undefined || stride === undefined )\n    throw Error( \"Can't determine element size / stride!\" );\n\n  var existingArrayOrType = optionalArrayOrType || Float32Array;\n\n  var array = Arrays.maybeCreate(\n        existingArrayOrType, arrayLength );\n\n  FlatArrayView.call( this, array, length ||\n      // Note: Integer division by 'stride', rounding towards infinity\n      // at a minimum remainder of 'elementSize':\n      ( array.length + stride - elementSize ) / stride | 0 );\n\n  this.type = type;\n  this.stride = stride;\n  this.elementSize = elementSize;\n  this.tempBuffer = new Float32Array( elementSize );\n\n};\n\nObjectArrayView.prototype =\n    Object.assign( Object.create( FlatArrayView.prototype ), {\n\n  constructor: ObjectArrayView,\n\n\n  getAt: function ( index, optionalValue ) {\n\n    var result = optionalValue || new this.type();\n    return result.fromArray( this.data, index * this.stride );\n  },\n\n  setAt: function ( index, value ) {\n\n    value.toArray( this.data, index * this.stride );\n  },\n\n  addAt: function ( index, value ) {\n\n    value.toArray( this.tempBuffer, 0 );\n    for( var i = 0, offset = index * this.stride; i < this.elementSize; i ++ ) {\n      this.data[ offset + i ] += this.tempBuffer[ i ];\n    }\n\n  },\n\n  multiplyScalarAt: function ( index, scalar ) {\n\n    for( var i = 0, offset = index * this.stride; i < this.elementSize; i ++ ) {\n      this.data[ offset + i ] *= scalar;\n    }\n\n  },\n\n  newCompatibleView: function( arrayOrType, optionalLength ) {\n\n    return new ObjectArrayView(\n        this.type, optionalLength || null, arrayOrType, this.stride );\n  },\n\n  newCompatibleBuffer: function() {\n\n    return new ObjectBuffer(\n        this.type, this.data.constructor, this.stride );\n  }\n\n} );\n\n\nObjectArrayView.fromObjects = function( type, objects, optionalArrayType ) {\n\n  var result = new ObjectArrayView(\n      type, objects.length, optionalArrayType );\n\n  Arrays.copyObjects( objects, result.data );\n  return result;\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/container/ObjectArrayView.js\n **/","import Orders from './Orders';\n\n/**\n * @typedef {(function(new:Array)|Array)} ArrayOrType\n */\n\n/**\n * Various utilities for working with arrays.\n *\n * @namespace\n */\nconst Arrays = {\n\n  /**\n   * Empty arrays.\n   *\n   * @namespace\n   */\n  Empty: Object.freeze( {\n\n    /** @const @type {!Array} */\n    Array: Object.freeze( new Array( 0 ) ),\n\n    // Note: Typed arrays can't - and don't have to frozen, since\n    // they have an immutable length.\n\n    /** @const @type {!Array<!number>} */\n    Float64Array: new Float64Array( 0 ),\n    /** @const @type {!Array<!number>} */\n    Float32Array: new Float32Array( 0 ),\n    /** @const @type {!Array<!number>} */\n    Uint32Array: new Uint32Array( 0 ),\n    /** @const @type {!Array<!number>} */\n    Int32Array: new Int32Array( 0 )\n\n  } ),\n\n  //\n\n  rangeCopy: function( src, srcOffset, dst, dstOffset, length ) {\n\n    for ( var i = 0; i !== length; ++ i )\n      dst[ dstOffset + i ] = src[ srcOffset + i ];\n\n    return dst;\n\n  },\n\n  rangeEquals: function( a, aStart, b, bStart, length ) {\n\n    for ( var i = 0; i !== length; ++ i )\n      if ( a[ aStart + i ] !== b[ bStart + i ] ) return false;\n\n    return true;\n\n  },\n\n  stridedCopy: function( src, srcOffset, srcStride,\n      dst, dstOffset, dstStride, elementLength, numElements ) {\n\n    for ( var i = 0; i !== numElements; ++ i )\n    for ( var j = 0; j !== elementLength; ++ j )\n\n      dst[ dstOffset + i * dstStride + j ] =\n          src[ srcOffset + i * srcStride + j ];\n\n    return dst;\n\n  },\n\n  /**\n   * For each element add the previous element.\n   *\n   * @param {!Array<!number>} array\n   */\n  accumulate: function( array ) {\n\n    for ( var i = 1, n = array.length; i < n; ++ i )\n      array[ i ] += array[ i - 1 ];\n\n    return array;\n\n  },\n\n  slice: function( array, from, optionalTo ) {\n\n    // Not all browsers have .slice for typed arrays...\n\n    return array.slice !== undefined ?\n        array.slice( from, optionalTo ) :\n        new array.constructor( array.subarray( from, optionalTo ) );\n\n  },\n\n  clone: function( array ) {\n\n    // Not all browsers have .slice for typed arrays...\n\n    return array !== null ? ( array.slice !== undefined ?\n        array.slice( 0 ) :\n        new array.constructor( array ) ) : null;\n\n  },\n\n  binarySearch: function( array, elem, optionalBegin, optionalUntil ) {\n\n    var left = optionalBegin === undefined ? 0 : optionalBegin,\n      right = optionalUntil === undefined ?\n          array.length - left : optionalUntil,\n\n      rightBound = right;\n\n    while (left < right) {\n\n      var mid = ( left + right ) >>> 1,\n        midVal = array[ mid ];\n\n      if ( midVal < elem ) left = mid + 1;\n      else right = mid;\n\n    }\n\n    return left < rightBound && array[ left ] === elem ? left : ~ left;\n\n  },\n\n  sort: function( array, optionalOrder ) {\n\n    // TODO: Optimized sorting - a likely and improvable bottleneck:\n    //\n    // - A customized sort beats Chrome by a factor of 18 at block\n    //   sizes of 10.000 elements, where the performance is roughly\n    //   equal for a few elements. At this scale Chrome is already\n    //   3-4 times slower than Firefox - the more elements there are\n    //   the worse it gets.\n    //\n    // - The same routine beats Firefox by a factor of 5 with small\n    //   block sizes, where the performance becomes roughly equal at\n    //   10.000 elements.\n    //\n    // My test code did not contain duplicate elements (and does not\n    // handle them well, in the moment) and used a Quicksort with a\n    // median index pivot (which is rather lousy). It did implement\n    // a decent partitioner based on Hoare's algorithm, though.\n\n    if ( array.sort !== undefined ) {\n\n      return array.sort( optionalOrder || Orders.Numeric );\n\n    } else { // some browsers may not yet support the above\n\n      return Array.prototype.sort.call( array,\n          optionalOrder || Orders.Numeric );\n    }\n\n    return array;\n\n  },\n\n  unique: function( sortedArray, optionalOrder ) {\n\n    var n = sortedArray.length;\n\n    if ( n <= 1 ) return sortedArray.length;\n\n    var writeIndex = 0,\n      prevValue = sortedArray[ 0 ];\n\n    if ( optionalOrder === undefined ) {\n\n      for ( var i = 1; i !== n; ++ i ) {\n\n        var value = sortedArray[ i ];\n        if ( value !== prevValue ) {\n\n          prevValue = value;\n\n          if ( ++ writeIndex !== i )\n            sortedArray[ writeIndex ] = value;\n        }\n      }\n\n    } else {\n\n      var compare = optionalOrder;\n\n      if ( ! optionallyBuiltMap ) {\n\n        for ( var i = 1; i !== n; ++ i ) {\n\n          var value = sortedArray[ i ];\n          if ( compare( value, prevValue ) !== 0 ) {\n\n            prevValue = value;\n\n            if ( ++ writeIndex !== i )\n              sortedArray[ writeIndex ] = value;\n          }\n        }\n\n      }\n\n    }\n\n    return writeIndex + 1; // new length\n  },\n\n  //\n\n  /**\n   * Utiltiy function for taking an argument that is either an existing\n   * array or an array type / constructor.\n   *\n   * Example:\n   * <pre>\n   * var array = Arrays.maybeCreate( arg || Uint32Array, n );\n   * </pre>\n   *\n   * @param {!ArrayOrType} existingArrayOrType\n   * @param {number=} requiredLength\n   * @throws Error when argument missing or an array and too short\n   */\n  maybeCreate: function( existingArrayOrType, requiredLength ) {\n    if ( ! existingArrayOrType ) throw Error( \"Missing array!\" );\n\n    var validLength =\n        requiredLength !== null && ! isNaN( requiredLength );\n\n    // Safari returns \"object\" for typeof Uint32Array, Float32Array, etc, so use instanceof\n    if ( (typeof existingArrayOrType === 'function') || (existingArrayOrType instanceof Function)) {\n\n      if ( ! validLength )\n        throw Error( \"Missing or invalid length!\" );\n\n      // Note: Browsers show wEirD behavior when it comes to\n      // argument checks of typed array constructors...\n\n      return new existingArrayOrType( requiredLength );\n\n    }\n\n    // otherwise assume we got an existing array\n\n    if ( validLength && existingArrayOrType.length < requiredLength )\n\n      throw Error( \"Array too short: \" +\n          existingArrayOrType.length + \" < \" + requiredLength );\n\n    return existingArrayOrType;\n  },\n\n  copyObjects: function( objects, array, optionalStride ) {\n\n    if ( ! objects ) return null;\n\n    var nObjects = objects.length;\n    if ( nObjects === 0 ) return array;\n\n    var stride =\n        objects[ 0 ].constructor.InstanceScalarSize || optionalStride;\n\n    if ( stride === undefined )\n      throw Error( \"Arrays.fromObjects: Cannot determine stride!\" );\n\n    var result = Arrays.maybeCreate( arrayOrType, nObjects * stride );\n\n    for ( var i = 0, offset = 0; i !== nObjects; ++ i, offset += stride ) {\n\n      var object = objects[ i ];\n\n      if ( object === undefined ) {\n        console.warn( \"Arrays.fromObjects: Undefined object.\" );\n        array.fill( 0, offset, offset + stride );\n        continue;\n      }\n\n      object.toArray( array, offset );\n\n    }\n\n    return array;\n\n  }\n\n};\n\nexport default Arrays;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/utility/Arrays.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/freeze\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/freeze.js\n ** module id = 192\n ** module chunks = 0 1\n **/","require('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/_core').Object.freeze;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/freeze.js\n ** module id = 193\n ** module chunks = 0 1\n **/","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object')\n  , meta     = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function($freeze){\n  return function freeze(it){\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.object.freeze.js\n ** module id = 194\n ** module chunks = 0 1\n **/","const Orders = {\n\n  Numeric: function( a, b ) { return a - b; },\n\n  Natural: function( a, b ) { return a < b ? -1 : b < a ? 1 : 0; },\n\n  // Note: Unstable compare functions are not an optimization.\n  // Some operations require to detect equality!\n\n  derefedNumbersIn: function( array ) {\n\n    return function compare( a, b ) { return array[ a ] - array[ b ]; };\n\n  },\n\n  derefedTuplesIn: function( array, elementSize, optionalStride ) {\n\n    if ( ! elementSize ) throw Error( \"Invalid element size!\" );\n\n    var stride = optionalStride || elementSize;\n\n    if ( stride === 1 && elementSize === 1 )\n      return Orders.derefNumbersIn( array );\n\n    return function compare( a, b ) {\n\n      var offsetA = a * stride,\n        offsetB = b * stride,\n\n        result = array[ offsetA ] - array[ offsetB ];\n\n      for ( var i = 1; i !== elementSize && result === 0; ++ i )\n\n        result = array[ offsetA + i ] - array[ offsetB + i ];\n\n      return result;\n    };\n\n  },\n\n  derefedNumbersStableIn: function( array ) {\n\n    return function compare( a, b ) {\n\n      var result = array[ a ] - array[ b ];\n      return result !== 0 ? result : a - b;\n\n    };\n\n  },\n\n  derefedTuplesStableIn: function( array, elementSize, optionalStride ) {\n\n    if ( ! elementSize ) throw Error( \"Invalid element size!\" );\n\n    var stride = optionalStride || elementSize;\n\n    if ( stride === 1 && elementSize === 1 )\n      return Orders.derefNumbersStableIn( array );\n\n    return function compare( a, b ) {\n\n      var offsetA = a * stride,\n        offsetB = b * stride,\n\n        result = array[ offsetA ] - array[ offsetB ];\n\n      for ( var i = 1; i !== elementSize && result === 0; ++ i )\n\n        result = array[ offsetA + i ] - array[ offsetB + i ];\n\n      return result !== 0 ? result : a - b;\n    };\n\n  }\n\n};\n\nexport default Orders;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/utility/Orders.js\n **/","import Arrays from '../utility/Arrays';\nimport Orders from '../utility/Orders';\n\nexport default function FlatArrayView( data, length ) {\n\n  this.data = data;\n  this.length = length;\n};\n\nFlatArrayView.prototype = {\n\n  constructor: FlatArrayView,\n\n  offset: 0,    // in scalars, constant default\n  stride: 1,    // in scalars, constant default\n  elementSize: 1, // in scalars, constant default\n\n  // Access to element ranges\n\n  newRangeArray: function( optionalNumberOfElements ) {\n\n    var n = optionalNumberOfElements || 1;\n    return new this.data.constructor( n * this.elementSize );\n  },\n\n  rangeToArray: function( index, n, optionalArray, optionalWriteOffset ) {\n\n    var data = this.data,\n      stride = this.stride,\n      elemSize = this.elementSize,\n\n      array = optionalArray ||\n          new this.data.constructor( n * this.elementSize ),\n      writeOffset = optionalWriteOffset || 0;\n\n    for ( var offset = this.offset + index * stride,\n        end = offset + n * stride; offset < end; offset += stride )\n\n      for ( var i = offset, e = offset + elemSize; i !== e; ++ i )\n\n        array[ writeOffset ++ ] = data[ i ];\n\n    return array;\n\n  },\n\n  arrayToRange: function( array, index, n, optionalReadOffset ) {\n\n    var data = this.data,\n      stride = this.stride,\n      elemSize = this.elementSize,\n      readOffset = optionalReadOffset || 0;\n\n    for ( var offset = this.offset + index * stride,\n        end = offset + n * stride; offset < end; offset += stride )\n\n      for ( var i = offset, e = offset + elemSize; i !== e; ++ i )\n\n        data[ i ] = array[ readOffset ++ ];\n\n    return this;\n\n  },\n\n  // Bulk copy operations\n\n  toArray: function( optionalArrayOrType, optionalOffset ) {\n\n    var stride = this.stride,\n      length = this.length,\n      elemSize = this.elementSize,\n      writeOffset = optionalOffset === undefined ? 0 : optionalOffset,\n      minimumLength = writeOffset + length * elemSize;\n\n    if ( stride === elemSize ) {\n      // data is packed, can use typed array API\n\n      var data = this.data,\n        offset = this.offset,\n        dataEnd = offset + length * elemSize;\n\n      if ( writeOffset === 0 && (\n          optionalArrayOrType === undefined ||\n          optionalArrayOrType === this.data.constructor )  )\n\n        return Arrays.slice( data, offset, dataEnd );\n\n      var array = Arrays.maybeCreate(\n          optionalArrayOrType, minimumLength );\n\n      array.set( data.subarray( offset, dataEnd ), writeOffset );\n\n      return array;\n\n    } else {\n      // data is strided, twiddle it apart\n\n      var array = Arrays.maybeCreate(\n          optionalArrayOrType, minimumLength );\n\n      return this.rangeToArray( 0, length, array, optionalOffset );\n\n    }\n\n  },\n\n  fromArray: function( array, optionalOffset ) {\n\n    var stride = this.stride,\n      length = this.length,\n      elemSize = this.elementSize,\n      readOffset = optionalOffset === undefined ? 0 : optionalOffset,\n      minimumLength = readOffset + length * elemSize;\n\n    if ( stride === elemSize ) {\n      // data is packed, can use typed array API\n\n      var readView = readOffset === 0 && array.length === minimumLength ?\n          array : array.subarray( readOffset, minimumLength );\n\n      this.data.set( readView, this.offset );\n\n    } else {\n      // data is strided, scatter it\n\n      return this.arrayToRange( array, 0, length, readOffset );\n    }\n\n    return this;\n\n  },\n\n  // Array data management\n\n  repack: function( optionalArrayType ) {\n\n    var currentArrayType = this.data.constructor,\n      requestedArrayType = optionalArrayType || currentArrayType;\n\n    if ( this.stride !== this.elementSize ||\n        requestedArrayType !== currentArrayType )\n\n      this.forceRepack( optionalArrayType );\n\n    return this;\n\n  },\n\n  forceRepack: function( optionalArrayType ) {\n\n    this.data = this.toArray( optionalArrayType );\n    this.offset = 0;\n    this.stride = this.elementSize;\n\n    return this;\n\n  },\n\n  // Factory methods for views / buffers\n\n  clone: function() {\n\n    return this.newCompatibleView( this.toArray(), this.length );\n  },\n\n  newCompatibleView: function( arrayOrType, optionalLength ) {\n\n    throw Error( \"not implemented\" ); // abstract\n\n  },\n\n  newCompatibleBuffer: function() {\n\n    throw Error( \"not implemented\" ); // abstract\n\n  },\n\n  // Factory methods for compare functions\n\n  newCompareAtIndices: function() {\n\n    return Orders.derefedTuplesIn(\n        this.data, this.elementSize, this.stride );\n\n  },\n\n  newCompareAtIndicesStable: function() {\n\n    return Orders.derefedTuplesStableIn(\n        this.data, this.elementSize, this.stride );\n\n  }\n\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/container/FlatArrayView.js\n **/","import BlockBuffer from './BlockBuffer';\nimport ObjectArrayView from './ObjectArrayView';\n\nexport default function ObjectBuffer( type, optionalArrayType, optionalElementSize ) {\n\n  BlockBuffer.call( this, optionalArrayType || Float32Array );\n\n  this.elementSize = optionalElementSize || type.InstanceScalarSize;\n  this.type = type;\n\n};\n\nObjectBuffer.prototype =\n    Object.assign( Object.create( BlockBuffer.prototype ), {\n\n  constructor: ObjectBuffer,\n\n  toObjectArrayViewAndClear: function() {\n\n    return new ObjectArrayView(\n        this.type, null, this.toArrayAndClear() );\n\n  },\n\n\n  getAt: function( index, optionalValue ) {\n\n    var result = optionalValue || new this.type(),\n\n      blockIndex = index >> this.intraBlockIndexBits,\n      blockOffset = index & this.intraBlockIndexMask;\n\n    return result.fromArray(\n        this.blocks[ blockIndex ], blockOffset * this.elementSize );\n\n  },\n\n  setAt: function( index, value ) {\n\n    var blockIndex = index >> this.intraBlockIndexBits,\n      blockOffset = index & this.intraBlockIndexMask;\n\n    value.toArray(\n        this.blocks[ blockIndex ], blockOffset * this.elementSize );\n\n  },\n\n  push: function( value ) {\n\n    var index = this.length ++,\n      block = this.lastBlock,\n      blockOffset = index & this.intraBlockIndexMask;\n\n    if ( blockOffset === 0 ) {\n\n      var blockSize = this.intraBlockIndexMask + 1;\n      block = new this.arrayType( blockSize * this.elementSize );\n      this.lastBlock = block;\n      this.blocks.push( block );\n\n    }\n\n    value.toArray( block, blockOffset * this.elementSize );\n\n    return index + 1;\n\n  }\n\n} );\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/container/ObjectBuffer.js\n **/","import Arrays from '../utility/Arrays';\n\nexport default function BlockBuffer ( arrayType, nIntraBlockIndexBits ) {\n\n  this.blocks = [];\n  this.lastBlock = null;\n  this.arrayType = arrayType;\n\n  var nBits = nIntraBlockIndexBits || 12;\n  this.intraBlockIndexBits = nBits;\n  this.intraBlockIndexMask = ( 1 << nBits ) - 1;\n\n  this.length = 0;\n\n};\n\nBlockBuffer.prototype = {\n\n  constructor: BlockBuffer,\n\n  elementSize: 1, // in scalars, constant default\n\n\n  toArrayAndClear: function() {\n\n    var result = this.toArray();\n    this.clear();\n    return result;\n  },\n\n\n  newRangeArray: function( optionalNumberOfElements ) {\n\n    var n = optionalNumberOfElements || 1;\n    return new this.arrayType( n * this.elementSize );\n  },\n\n  rangeToArray: function( index, n, optionalArray, optionalWriteOffset ) {\n\n    var intraBlockIndexMask = this.intraBlockIndexMask,\n      elementSize = this.elementSize,\n\n      blockIndex = index >> this.intraBlockIndexBits,\n      blockOffset = index & intraBlockIndexMask,\n\n      block = this.blocks[ blockIndex ],\n\n      array = optionalArray || new this.arrayType( n * elementSize ),\n      writeOffset =\n          optionalWriteOffset === undefined ? 0 : optionalWriteOffset;\n\n    for ( var i = 0; i < n; ++ i ) {\n\n      for ( var j = blockOffset * elementSize,\n          s = j + elementSize; j !== s; ++ j )\n\n        array[ writeOffset ++ ] = block[ j ];\n\n      if ( ( ++ blockOffset & intraBlockIndexMask ) === 0 )\n\n        block = this.blocks[ ++ blockIndex ];\n    }\n\n    return array;\n  },\n\n  arrayToRange: function( array, index, n, optionalReadOffset ) {\n\n    var intraBlockIndexMask = this.intraBlockIndexMask,\n      elementSize = this.elementSize,\n\n      blockIndex = index >> this.intraBlockIndexBits,\n      blockOffset = index & intraBlockIndexMask,\n\n      block = this.blocks[ blockIndex ],\n\n      readOffset =\n          optionalReadOffset === undefined ? 0 : optionalReadOffset;\n\n    for ( var i = 0; i < n; ++ i ) {\n\n      for ( var j = blockOffset * elementSize,\n          s = j + elementSize; j !== s; ++ j )\n\n        block[ j ] = array[ readOffset ++ ];\n\n      if ( ( ++ blockOffset & intraBlockIndexMask ) === 0 )\n\n        block = this.blocks[ ++ blockIndex ];\n    }\n\n    return this;\n  },\n\n  pushArrayRange: function( array, n, optionalReadOffset ) {\n\n    var intraBlockIndexMask = this.intraBlockIndexMask,\n      elementSize = this.elementSize,\n\n      blockOffset = this.length, // masked later\n\n      block = this.lastBlock,\n\n      readOffset =\n          optionalReadOffset === undefined ? 0 : optionalReadOffset;\n\n    for ( var i = 0; i < n; ++ i ) {\n\n      if ( ( blockOffset &= intraBlockIndexMask ) === 0 ) {\n\n        var blockSize = intraBlockIndexMask + 1;\n        block = new this.arrayType( blockSize * elementSize );\n        this.lastBlock = block;\n        this.blocks.push( block );\n      }\n\n      for ( var j = blockOffset ++ * elementSize,\n          s = j + elementSize; j !== s; ++ j )\n\n        block[ j ] = array[ readOffset ++ ];\n    }\n\n    return this.length += n;\n  },\n\n  clear: function() {\n\n    this.blocks = [];\n    this.length = 0;\n    this.lastBlock = null;\n\n    return this;\n  },\n\n  toArray: function( optionalArrayOrType, optionalOffset ) {\n\n    var writeOffset = optionalOffset === undefined ? 0 : optionalOffset,\n      elementSize = this.elementSize,\n      minArraySize = this.length * elementSize + writeOffset,\n\n      array = Arrays.maybeCreate(\n          optionalArrayOrType || this.arrayType, minArraySize ),\n\n      blocks = this.blocks,\n      blockSize = ( 1 << this.intraBlockIndexBits ) * elementSize,\n      nFullBlocks = Math.max( blocks.length - 1, 0 );\n\n    for ( var i = 0; i !== nFullBlocks; ++ i ) {\n\n      array.set( blocks[ i ], writeOffset );\n      writeOffset += blockSize;\n    }\n\n    var lastBlockUse = minArraySize - writeOffset;\n\n    if ( lastBlockUse !== 0 )\n      array.set( blocks[ nFullBlocks ].subarray( 0, lastBlockUse ), writeOffset );\n\n    return array;\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/container/BlockBuffer.js\n **/","import Arrays from '../utility/Arrays';\nimport FlatArrayView from './FlatArrayView';\nimport ScalarBuffer from './ScalarBuffer';\n\nexport default function ScalarArrayView ( length,\n    optionalArrayOrType, optionalOffset, optionalStride ) {\n\n  var offset = optionalOffset === undefined ? 0 : optionalOffset,\n    stride = optionalStride === undefined ? 1 : optionalStride,\n\n    offsetLength = ( offset + stride - 1 ) / stride | 0,\n    minArrayLength = length !== null ?\n        ( offsetLength + length ) * stride : null,\n\n    array = Arrays.maybeCreate(\n      optionalArrayOrType || Uint32Array, minArrayLength );\n\n  FlatArrayView.call( this, array, length !== null ? length :\n    // figure out length from user-provided array\n    ( array.length - offset + stride - 1 ) / stride | 0 );\n\n  this.offset = offset;\n  this.stride = stride;\n\n};\n\nScalarArrayView.prototype =\n    Object.assign( Object.create( FlatArrayView.prototype ), {\n\n  constructor: ScalarArrayView,\n\n\n  getAt: function( index ) {\n\n    return this.array[ this.offset + index * this.stride ];\n  },\n\n  setAt: function( index, value ) {\n\n    this.array[ this.offset + index * this.stride ] = value;\n  },\n\n\n  newCompatibleView: function( arrayOrType, optionalLength ) {\n\n    return new ScalarArrayView( optionalLength || null, arrayOrType, 0 );\n  },\n\n  newCompatibleBuffer: function() {\n\n    return new ScalarBuffer( this.data.constructor );\n  }\n\n} );\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/container/ScalarArrayView.js\n **/","import BlockBuffer from './BlockBuffer';\n\nexport default function ScalarBuffer( optionalArrayType ) {\n\n  BlockBuffer.call( this, optionalArrayType || Uint32Array );\n\n};\n\nScalarBuffer.prototype =\n    Object.assign( Object.create( BlockBuffer.prototype ), {\n\n  constructor: ScalarBuffer,\n\n  getAt: function( index ) {\n\n    var blockIndex = index >> this.intraBlockIndexBits,\n      blockOffset = index & this.intraBlockIndexMask;\n\n    return this.blocks[ blockIndex ][ blockOffset ];\n\n  },\n\n  setAt: function( index, value ) {\n\n    var blockIndex = index >> this.intraBlockIndexBits,\n      blockOffset = index & this.intraBlockIndexMask;\n\n    this.blocks[ blockIndex ][ blockOffset ] = value;\n    return this;\n\n  },\n\n  push: function( value ) {\n\n    var index = this.length ++,\n      block = this.lastBlock,\n      blockOffset = index & this.intraBlockIndexMask;\n\n    if ( blockOffset === 0 ) {\n\n      var blockSize = this.intraBlockIndexMask + 1;\n      block = new this.arrayType( blockSize );\n      this.lastBlock = block;\n      this.blocks.push( block );\n\n    }\n\n    block[ blockOffset ] = value;\n\n    return index + 1;\n\n  }\n\n} );\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/container/ScalarBuffer.js\n **/","import ObjectsByName from '../../generic/container/ObjectsByName';\nimport THREE from 'three';\n\nexport default function PolyMaps() {\n\n  ObjectsByName.call( this );\n\n};\n\nPolyMaps.prototype = Object.create( ObjectsByName.prototype );\nPolyMaps.prototype.constructor = PolyMaps;\n\n// Pretty much an alias to ObjectsByName, adding a static interface\n// and a custom iterator for uniform access of maps within a mesh...\n\nObject.assign( PolyMaps, {\n\n  TypePosition: 1,\n  TypeNormal: 2,\n  TypeTangent: 4,\n  TypeUV: 8,\n  TypeColor: 16,\n\n  id: function( typeId, name ) {\n\n    var anchorName = PolyMaps.TypeInfo[ typeId ].AnchorName;\n    return name != null ? anchorName + '.' + name : anchorName;\n  },\n\n  checkId: function( id ) {\n\n    var anchorName = PolyMaps.getAnchorName( id ),\n      mapName = PolyMaps.getMapName( id, anchorName ),\n      typeInfo = PolyMaps.getTypeInfo( anchorName );\n\n    if ( typeInfo === null || mapName === '' )\n      throw Error( \"Invalid PolyMap ID '\" + id + \"'!\" );\n\n    return id;\n  },\n\n  getAnchorName: function( id ) {\n\n    var dot = id.indexOf( '.' );\n    return dot === -1 ? id : id.slice( 0, dot );\n  },\n\n  getMapName: function( id, anchorName ) {\n\n    return id === anchorName ? null :\n        id.slice( anchorName.length + 1 );\n  },\n\n  getTypeInfo: function( anchorName ) {\n\n    var info = PolyMaps.TypeInfo;\n    for ( var i = 0, n = info.length; i !== n; ++ i ) {\n      var entry = info[ i ];\n      if ( entry !== null &&\n          entry.AnchorName === anchorName ) return info[ i ];\n    }\n    return null;\n  },\n\n\n\n  resolveMap: function( mesh, id ) {\n\n    var anchorName = PolyMaps.getAnchorName( id );\n    if ( id === anchorName ) return mesh[ anchorName ];\n\n    var maps = mesh[ anchorName ];\n    return maps && maps.byName[ id.slice( anchorName.length + 1 ) ];\n  },\n\n  assignMap: function( mesh, id, map ) {\n\n    var anchorName = PolyMaps.getAnchorName( id ),\n      mapName = PolyMaps.getMapName( id, anchorName );\n\n    if ( mapName === null ) {\n\n      mesh[ anchorName ] = map;\n\n    } else {\n\n      var maps = mesh[ anchorName ];\n\n      if ( maps === null ) {\n\n        maps = new PolyMaps();\n        mesh[ anchorName ] = maps;\n\n      }\n\n      maps.set( mapName, map );\n\n    }\n\n  },\n\n  Iterator: function( mesh ) {\n\n    ObjectsByName.Iterator.call( this );\n    this.reset( mesh || null );\n  }\n\n} );\n\nPolyMaps.TypeInfo = [\n  null,\n  { // 1\n    Type: PolyMaps.TypePosition,\n    AnchorName: 'positions',\n    ElementType: THREE.Vector3\n  }, { // 2\n    Type: PolyMaps.TypeNormal,\n    AnchorName: 'normalMap',\n    ElementType: THREE.Vector3\n  }, null, { // 4\n    Type: PolyMaps.TypeTangent,\n    AnchorName: 'tangentMap',\n    ElementType: THREE.Vector3\n  }, null, null, null, { // 8\n    Type: PolyMaps.TypeUV,\n    AnchorName: 'uvMaps',\n    ElementType: THREE.Vector2\n  }, null, null, null, null, null, null, null, {\n    Type: PolyMaps.TypeColor,\n    AnchorName: 'colorMaps',\n    ElementType: THREE.Color\n  }\n];\n\nObject.assign( PolyMaps, {\n\n  IdPositions: PolyMaps.id( PolyMaps.TypePosition ),\n  IdNormals: PolyMaps.id( PolyMaps.TypeNormal ),\n  IdTangents: PolyMaps.id( PolyMaps.TypeTangent )\n\n} );\n\nPolyMaps.Iterator.prototype = Object.assign(\n    Object.create( ObjectsByName.Iterator.prototype ), {\n\n  constructor: PolyMaps.Iterator,\n  _super: ObjectsByName.Iterator.prototype,\n\n  reset: function( optionalMesh ) {\n\n    this._super.reset.call( this, null );\n\n    var mesh = optionalMesh || null;\n    this.mesh = mesh;\n    this.byName = mesh;\n    this.typeId = 0;\n\n  },\n\n  getId: function() {\n\n    return PolyMaps.id( this.typeId, this.name );\n\n  },\n\n  next: function() {\n\n    // Note: Not using dynamic resolution here because it may impact\n    // compiler optimizations in a negative way.\n\n    // If iterating a collection, keep going:\n\n    if ( this._super.next.call( this ) ) return true;\n\n    // Otherwise count up the id:\n\n    var mesh = this.mesh,\n      type = this.typeId,\n\n      elem = null,\n      object = null;\n\n    type <<= 1;\n\n    switch ( type ) {\n\n      case 0:\n        type = 1;\n        // v-v-v\n\n      case PolyMaps.TypePosition:\n        elem = mesh.positions;\n        break;\n\n      case PolyMaps.TypeNormal:\n        elem = mesh.normalMap;\n        break;\n\n      case PolyMaps.TypeTangent:\n        elem = mesh.tangentMap;\n        break;\n\n\n      case PolyMaps.TypeUV:\n        object = mesh.uvMaps;\n        break;\n\n      case PolyMaps.TypeColor:\n        object = mesh.colorMaps;\n        break;\n\n\n      default:\n\n        this.reset( null );\n        return false;\n\n    }\n\n    this.typeId = type;\n\n    if ( object !== null && object !== undefined ) {\n\n      this.byName = object.byName;\n      return this._super.reset.call( this, object ).next();\n\n    } else if ( elem !== null && elem !== undefined ) {\n\n      this.element = elem;\n      this.index = type;\n      this.name = null;\n      return true;\n\n    }\n\n    return this.next();\n\n  }\n\n} );\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/model/PolyMaps.js\n **/","/**\n * This class works around the problem that {@code for .. in} loops poison\n * the surrounding function and inhibit all optimizations with V8. This is\n * of course undesirable, especially since some data processing may happen\n * in the same function, and redundant workarounds would obscure the code.\n *\n * Therefore we use an extra data structure with an array of names.\n *\n * A noteworthy property is that there is no reliance on the indices, so\n * {@code .namesByIndex} can be sorted (unless within an ongoing iteration,\n * of course) in-place, e.g. alphabetically or by use frequency for UI or\n * caching purposes.\n *\n * Further, we provide a nested {@code Iterator} class that treats {@code\n * null} values gracefully.\n *\n * Example:\n * <pre>\n * // Create an iterator\n * var iterator = new ObjectsByName.Iterator( objects );\n *\n * // Iterate when this.objects is an ObjectsByName instance, do nothing\n * // in case it is null\n * for ( iterator.next(); ) {\n *     // [... use iterator.name, iterator.index and iterator.element ...]\n * }\n * </pre>\n *\n * @template T\n * @constructor\n */\nexport default function ObjectsByName() {\n\n  /** @const @type {!Object<!string,T>} */\n  this.byName = {};\n\n  /** @const @type {!Array<T>} */\n  this.namesByIndex = [];\n\n};\n\nObjectsByName.prototype = {\n\n  constructor: ObjectsByName,\n\n  /** @type {!number} */\n  get length() {\n    return this.namesByIndex.length;\n  },\n\n  set: function( name, object ) {\n\n    var byName = this.byName;\n    if ( name in byName === false ) this.namesByIndex.push( name );\n    byName[ name ] = object;\n  }\n\n};\n\n/**\n * @template T\n * @constructor\n * @param {ObjectsByName<T>=} optionalContainer\n */\nObjectsByName.Iterator = function( optionalContainer ) {\n\n  this.reset( optionalContainer || null );\n\n};\n\nObjectsByName.Iterator.prototype = {\n\n  constructor: ObjectsByName.Iterator,\n\n  /**\n   * @param {ObjectsByName<T>=} optionalContainer\n   * @return {!ObjectsByName.Iterator<T>}\n   */\n  reset: function( optionalContainer ) {\n\n    if ( optionalContainer !== undefined )\n      this.container = optionalContainer;\n\n    this.name = null;\n    this.index = -1;\n    this.element = null;\n    return this;\n\n  },\n\n  /**\n   * @return {!boolean}\n   */\n  next: function() {\n\n    var map = this.container;\n    if ( map === null ) return false;\n\n    var names = map.namesByIndex;\n    var index = ++ this.index;\n\n    if ( index >= names.length ) {\n\n      this.name = null;\n      return false;\n\n    }\n\n    this.element = map.byName[ this.name = names[ index ] ];\n    return true;\n\n  },\n\n  /**\n   * @param {!string} name\n   * @param {T} element\n   * @return {!ObjectsByName<T>}\n   */\n  add: function( name, element ) {\n\n    // TODO if ( this === null ) this = new ObjectsByName();\n\n    var namesByIndex = this.namesByIndex;\n\n    if ( namesByIndex.indexOf( name ) !== -1 )\n      throw Error( \"ObjectsByName: Name '\" + name + \"' not unique!\" );\n\n    namesByIndex.push( name );\n    this.byName[ name ] = element;\n\n    return this;\n  }\n\n};\n\n\nObjectsByName.shallowClone = ( function() {\n\n  var i = new ObjectsByName.Iterator();\n\n  return function shallowClone( that ) {\n\n    if ( ! that ) return null;\n\n    var newMap = new ObjectsByName(),\n\n      byName = newMap.byName,\n      names = newMap.namesByIndex;\n\n    names.length = that.namesByIndex.length;\n\n    for ( i.reset( that ); i.next() ;) {\n\n      var name = i.name;\n      byName[ name ] = i.element;\n      names[ i.index ] = name;\n\n    }\n\n    i.reset( null ); // (!)\n\n    return newMap;\n\n  };\n\n} )();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/container/ObjectsByName.js\n **/","import THREE from 'three';\nimport IndexMappings from '../../generic/algorithm/IndexMappings';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport Arrays from '../../generic/utility/Arrays';\nimport EdgeVertexAdjacency from './adjacency/EdgeVertexAdjacency';\nimport FaceEdgeAdjacency from './adjacency/FaceEdgeAdjacency';\nimport ValueAdjacency from './adjacency/ValueAdjacency';\n\n/**\n * @template T\n * @constructor\n *\n * @param {!PolyMap|!Object} from object to copy the properties from\n */\nexport default function PolyMap( from ) {\n\n  if(!from){\n    this.faceRangeOffsets = new Uint32Array(1);\n    this.faceValueIndices = new Uint32Array(0);\n    this.values = new ObjectArrayView(THREE.Vector3, 0);\n  } else {\n\n    this.faceRangeOffsets = from.faceRangeOffsets;  //Uint32Array\n    this.faceValueIndices = from.faceValueIndices;  //Uint32Array\n    this.values = from.values;            //ObjectArrayView contains Three.Vector3\n\n    // Cached transient information (can be rebuilt from the above):\n\n    // Inverse index (value indices -> faces):\n    const valueFaceIndices = from.valueFaceIndices || null;\n    this.valueFaceIndices = valueFaceIndices;\n    this.valueFaceIndexOffsets = // only reuse when complete\n        valueFaceIndices && from.valueFaceIndexOffsets || null;\n\n    // The low value index acts as the pivot for edge enumeration, so\n    // the following array is indexed by edge UIDs:\n    this._edgeVertexAdjacency = null;\n    this._faceEdgeAdjacency = null;\n    this._valueAdjacency = null;\n    this._valueValueAdjacency = null;\n  }\n\n\n};\n\nPolyMap.fromData = function( faceOffsets, indices, values ) {\n\n  const result = new PolyMap( {\n\n    faceRangeOffsets: faceOffsets,\n\n    faceValueIndices: indices ||\n        IndexMappings.identity( values.length, Uint32Array ),\n\n    values: values.repack( Float32Array ),\n\n  } );\n\n  const nFaceVertices = faceOffsets[ faceOffsets.length - 1 ]\n\n  if ( result.faceValueIndices.length !== nFaceVertices )\n    throw Error( \"Number of postition indices or unindexed \" +\n        \"data values does not match the number of face vertices!\" );\n\n  return result;\n};\n\n\nPolyMap.prototype = {\n\n  constructor: PolyMap,\n\n  findValueIndexOffset: function( faceIndex, valueIndex ) {\n\n    const offsets = this.faceRangeOffsets;\n    const indices = this.faceValueIndices;\n\n    const begin = offsets[ faceIndex ];\n    const until = offsets[ faceIndex + 1 ];\n\n    for ( let i = begin; i !== until; ++ i )\n      if ( indices[ i ] === valueIndex )\n        return i;\n\n    return -1;\n  },\n\n  // adjacency structures, computed on-demand adjacency structures.\n\n  get edgeVertexAdjacency() {\n\n    if( ! this._edgeVertexAdjacency ) this._edgeVertexAdjacency = new EdgeVertexAdjacency( this );\n\n    return this._edgeVertexAdjacency;\n  },\n\n  get faceEdgeAdjacency() {\n\n    if( ! this._faceEdgeAdjacency ) this._faceEdgeAdjacency = new FaceEdgeAdjacency( this );\n\n    return this._faceEdgeAdjacency;\n  },\n\n  get valueAdjacency() {\n\n    if( ! this._valueAdjacency ) this._valueAdjacency = new ValueAdjacency( this );\n\n    return this._valueAdjacency;\n  },\n\n  get valueValueAdjacency() {\n\n    if( ! this._valueValueAdjacency ) this._valueValueAdjacency = new ValueValueAdjacency( this );\n\n    return this._valueValueAdjacency;\n  },\n\n  // Inverse index (value index -> faces) build\n\n  updateInverseIndex: function() {\n\n    if ( this.valueFaceIndices === null ) {\n\n      const faceOffsets = this.faceRangeOffsets;\n\n      let faceIndex = -1;\n      let nextFaceStart = faceOffsets[ 0 ];\n\n      const indices = this.faceValueIndices;\n\n      const writeOffsets = this._updateValueFaceIndexOffsets();\n      const nDestOffsets = writeOffsets.length;\n\n      const nFaceIndices = indices.length;\n      const faceIndices = new Uint32Array( nFaceIndices );\n\n      for ( var i = 0; i !== nFaceIndices; ++ i ) {\n\n        if ( i === nextFaceStart )\n          nextFaceStart = faceOffsets[ ++ faceIndex + 1 ];\n\n        faceIndices[ writeOffsets[ indices[ i ] ] ++ ] = faceIndex;\n      }\n\n      this.valueFaceIndices = faceIndices;\n\n      // Shift the write offsets back to their initial values:\n\n      if ( writeOffsets.byteOffset === 0 )\n        throw Error( \"Invalid .valueFaceIndexOffsets != null!\" );\n\n      this.valueFaceIndexOffsets =\n          new Uint32Array( writeOffsets.buffer, 0, nDestOffsets );\n    }\n\n    return this;\n  },\n\n  _updateValueFaceIndexOffsets: function() {\n\n    let result = this.valueFaceIndexOffsets;\n\n    if ( result === null ) {\n\n      const nValues = this.values.length,\n        requiredLength = nValues + 2;\n\n      // Two extra values... Why?\n      //\n      // 1. For uniform access we keep n+1 offsets, that is\n      //    0, o_0, o_1, o_2 ..., <length>\n      //\n      // 2. The build of the inverse indices is destructive\n      //    and shifts the offsets by one index. The result\n      //    is something like:\n      //\n      //    o_0, o_1, o_2, ..., <length>, <length>\n      //\n      //    Now we will want our leading zero back.\n\n      const buffer = new Uint32Array( requiredLength );\n      const histogramArea = buffer.subarray( 2 );\n\n      result = buffer.subarray( 1 );\n\n      IndexMappings.histogram(\n          this.faceValueIndices, nValues, histogramArea );\n\n      Arrays.accumulate( histogramArea );\n\n      this.valueFaceIndices = null;\n      this.valueFaceIndexOffsets = result;\n    }\n\n    return result;\n  },\n\n  // Compaction\n\n  compactValues: function() {\n\n    const values = this.values;\n    const nValues = values.length;\n\n    if ( nValues !== 0 ) {\n\n      const sourceToTargetMap = new Uint32Array( nValues );\n      const nCompactValues =\n            this._compactFaceIndexOffsets( sourceToTargetMap );\n\n      if ( nCompactValues !== nValues ) {\n\n        this._compactData( sourceToTargetMap, nCompactValues );\n        this._compactIndices( sourceToTargetMap );\n\n      }\n\n    }\n\n    return this;\n  },\n\n  _compactFaceIndexOffsets: function( outSourceToTargetMap ) {\n\n    let faceIndexOffsets = this._updateValueFaceIndexOffsets();\n    const nValues = outSourceToTargetMap.length;\n\n    let nCompactValues = 0;\n    let offset = 0; // == faceIndexOffsets[ 0 ]\n\n    for ( let i = 0; i !== nValues; ++ i ) {\n\n      let nextOffset = faceIndexOffsets[ i + 1 ];\n\n      outSourceToTargetMap[ i ] = nCompactValues;\n      // Note: Filling in incorrect values at indices that are no longer\n      // used, actually. But those allow to replay the compaction of the\n      // offsets on the values once the size is known.\n      //\n      // The value that corresponds to the last index in an equal range\n      // is the one to keep.\n\n      if ( offset !== nextOffset ) {\n\n        if ( nCompactValues !== i )\n          faceIndexOffsets[ nCompactValues ] = offset;\n\n        offset = nextOffset;\n        ++ nCompactValues;\n      }\n    }\n\n    faceIndexOffsets[ nCompactValues ] = offset;\n\n    if ( nCompactValues !== nValues ) {\n\n      // Note: Since only empty ranges were removed, neither need to null\n      // nor rebuild .valueFaceIndices.\n\n      if ( faceIndexOffsets.byteOffset !== 0 ) {\n        // this will be our leading zero and we want to keep it, so have\n        // a little dance with the typed arrays API...\n\n        var bufferView = new Uint32Array( faceIndexOffsets.buffer ),\n          slice = Arrays.slice( bufferView, 0, nCompactValues + 2 );\n\n        faceIndexOffsets = slice.subarray( 1 );\n\n        // ... phew!\n\n      } else {\n\n        faceIndexOffsets = Arrays.slice(\n            faceIndexOffsets, 0, nCompactValues + 1 );\n      }\n    }\n\n    this.valueFaceIndexOffsets = faceIndexOffsets;\n    return nCompactValues;\n  },\n\n  _compactData: function( sourceToTargetMap, nCompactValues ) {\n\n    // Rewrite the values to a new buffer, avoiding to build another\n    // temporary map, instead exploit the bogus padding of the STTM:\n\n    const values = this.values;\n    const nValues = values.length;\n    const newValues = new ObjectArrayView( values.type, nCompactValues );\n    let writeIndex = sourceToTargetMap[ 0 ];\n    const element = newValues.newRangeArray();\n\n    for ( let i = 1; i !== nValues; ++ i ) {\n\n      const nextWriteIndex = sourceToTargetMap[ i ];\n\n      if ( writeIndex !== nextWriteIndex ) {\n        // now i - 1 is the source position we want\n\n        values.rangeToArray( i - 1, 1, element );\n        newValues.arrayToRange( element, writeIndex, 1 );\n\n        writeIndex = nextWriteIndex;\n      }\n    }\n\n    values.rangeToArray( nValues - 1, 1, element );\n    newValues.arrayToRange( element, writeIndex, 1 );\n\n    this.values = newValues;\n  },\n\n  _compactIndices: function( sourceToTargetMap ) {\n\n    // The size of the index array does not change - it has already (else\n    // there'd be no unused indices), but we don't know when (the typical\n    // case would be in a previous transaction), so the same array can be\n    // in use elsewhere...\n\n    const indices = this.faceValueIndices;\n    const nIndices = indices.length;\n\n    const newIndices = new Uint32Array( nIndices );\n\n    IndexMappings.apply( indices, sourceToTargetMap, newIndices );\n    this.faceValueIndices = newIndices;\n\n  },\n\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/model/PolyMap.js\n **/","import Arrays from '../utility/Arrays';\n\n/**\n * Utilties for working with arrays of indices that are broadly useful and not\n * tailored towards a specific purpose.\n *\n * @namespace\n */\nconst IndexMappings = {\n\n  /**\n   * Create or populate an array with elements equal to their indices.\n   *\n   * @param {!number} n\n   * @param {ArrayOrType=} arrayOrType defaults to Uint32Array\n   * @return {!Array<!number>}\n   */\n  identity: function( n, arrayOrType ) {\n\n    var result = Arrays.maybeCreate( arrayOrType || Uint32Array, n );\n    for ( var i = 0; i !== n; ++ i ) result[ i ] = i;\n    return result;\n  },\n\n  /**\n   * Get an identity map as a view onto a globally shared buffer which\n   * must not be changed.\n   *\n   * @param {!number} n\n   * @return {!Uint32Array}\n   */\n  identityForReading: function( n ) {\n\n    var proto = IndexMappings._identityProto;\n\n    if ( n > proto.length ) {\n\n      proto = IndexMappings.identity( n * 5 / 4 | 0 );\n      IndexMappings._identityProto = proto;\n    }\n\n    return proto.subarray( 0, n );\n  },\n\n  _identityProto: Arrays.Empty.Uint32Array,\n\n  /**\n   * Create an array where each index corresponds to the values and the\n   * values map back to the index of the source array.\n   *\n   * For non-surjective mappings, the missing indices are not written to.\n   * For non-injective mappings, duplicate indices will map to their last\n   * position of occurence in the input.\n   *\n   * @param {!Array<!number>} source integer indices\n   * @param {number} n\n   *    maximum entry in source map + 1\n   *    can be {@code null} when an existing array is given\n   * @param {ArrayOrType=} arrayOrType defaults to Uint32Array\n   * @return {!Array<!number>}\n   */\n  inverse: function( source, n, arrayOrType ) {\n\n    var result = Arrays.maybeCreate( arrayOrType || Uint32Array, n );\n\n    for ( var i = 0, e = source.length; i !== e; ++ i )\n      result[ source[ i ] ] = i;\n\n    return result;\n  },\n\n  /**\n   * Transform one mapping with another, in-place unless an explicit\n   * destination is given.\n   *\n   * @param {!Array<!number>} map indices to transform\n   * @param {!Array<!number>} transform mapping to apply\n   * @param {Array<!number>=} optionalDestination\n   * @return {!Array<!number>} same as {@code map}\n   */\n  apply: function( map, transform, optionalDestination ) {\n\n    var dst = optionalDestination || map;\n\n    for ( var i = 0, n = map.length; i !== n; ++ i )\n      dst[ i ] = transform[ map[ i ] ];\n\n    return map;\n  },\n\n  /**\n   * Count the equal elements.\n   *\n   * When an existing array is used for the destination, it must be\n   * filled with zeroes.\n   *\n   * @param {!Array<!number>} source integer indices\n   * @param {!number} n maximum entry in source map + 1\n   * @param {ArrayOrType=} arrayOrType defaults to Uint32Array\n   * @return {!Array<!number>}\n   */\n  histogram: function( source, n, arrayOrType ) {\n\n    var result = Arrays.maybeCreate( arrayOrType || Uint32Array, n );\n\n    for ( var i = 0, e = source.length; i !== e; ++ i )\n      ++ result[ source[ i ] ];\n\n    return result;\n  }\n\n};\nexport default IndexMappings;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/algorithm/IndexMappings.js\n **/","import MergeSort from \"../../../generic/algorithm/MergeSort\";\nimport Arrays from \"../../../generic/utility/Arrays\";\n\n/**\n * @template T\n * @constructor\n *\n */\nexport default function EdgeVertexAdjacency( polyMap ) {\n\n  this.polyMap = polyMap;\n\n  // The low value index acts as the pivot for edge enumeration, so\n  // the following array is indexed by edge UIDs:\n  this.edgeHighVertexIndices = null;\n\n  // Low -> high value index mapping (describes ranges of edge UIDs):\n  this.edgePivotRangeOffsets = null;\n\n  this.edgeVertices = null;\n\n  this._compactEdgeLowToHighMap( this._buildEdgeLowToHighMap() );\n\n  this._inverseMapping();\n};\n\nEdgeVertexAdjacency.prototype = {\n\n  constructor: EdgeVertexAdjacency,\n\n  getNumEdges: function() {\n\n    return this.edgeHighVertexIndices.length;\n  },\n\n  // VV -> E\n  findEdgeId: function( valueIndexA, valueIndexB ) {\n\n    var loVertex = valueIndexA,\n      hiVertex = valueIndexB;\n\n    if ( hiVertex < loVertex ) {\n\n      loVertex = valueIndexB;\n      hiVertex = valueIndexA;\n    }\n\n    var rangeOffsets = this.edgePivotRangeOffsets;\n\n    return Arrays.binarySearch(\n        this.edgeHighVertexIndices, hiVertex,\n        rangeOffsets[ loVertex ], rangeOffsets[ loVertex + 1 ] );\n  },\n\n  // E -> VV\n  getVerticesForEdge: function( edgeId ) {\n    return {\n      v: this.edgeVertices[ edgeId*2 ],\n      vNext: this.edgeVertices[ edgeId*2+1 ]\n    };\n  },\n\n  _inverseMapping: function() {\n\n    var numEdges = this.getNumEdges();\n\n    var edgeVertices = new Uint32Array( numEdges * 2 );\n\n    for( var v0 = 0; v0 < this.edgePivotRangeOffsets.length - 1; v0 ++ ) {\n\n      var edgeBegin = this.edgePivotRangeOffsets[ v0 ];\n      var edgeEnd = this.edgePivotRangeOffsets[ v0+1 ];\n\n      for( var i = edgeBegin; i <= edgeEnd; i ++ ) {\n        var v1 = this.edgeHighVertexIndices[ i ];\n\n        edgeVertices[ i*2 + 0 ] = v0;\n        edgeVertices[ i*2 + 1 ] = v1;\n      }\n    }\n    this.edgeVertices = edgeVertices;\n\n  },\n\n  _buildEdgeLowToHighMap: function() {\n\n    var faceOffsets = this.polyMap.faceRangeOffsets,\n      valueIndices = this.polyMap.faceValueIndices,\n\n      nValues = this.polyMap.values.length,\n      offsets = new Uint32Array( nValues + 2 ),\n      histogramArea = offsets.subarray( 2 ),\n\n      faceBegin = faceOffsets[ 0 ],\n      maxEdgesSharingPivot = 0;\n\n    // Construct histogram and accumulate:\n\n    for ( var i = 1, n = faceOffsets.length; i !== n; ++ i ) {\n\n      var faceUntil = faceOffsets[ i ],\n        vertexA = valueIndices[ faceUntil - 1 ];\n\n      for ( var j = faceBegin; j !== faceUntil; ++ j ) {\n\n        var vertexB = valueIndices[ j ],\n          loVertex = vertexB < vertexA ? vertexB : vertexA,\n\n          nEdges = ++ histogramArea[ loVertex ];\n\n        if ( nEdges > maxEdgesSharingPivot )\n\n          maxEdgesSharingPivot = nEdges;\n\n        vertexA = vertexB;\n      }\n\n      faceBegin = faceUntil;\n    }\n\n    Arrays.accumulate( histogramArea );\n\n    // Build the indices array (shifting the offsets):\n\n    var writeOffsets = offsets.subarray( 1 ),\n      indices = new Uint32Array( writeOffsets[ nValues ] );\n\n    faceBegin = faceOffsets[ 0 ];\n\n    for ( var i = 1, n = faceOffsets.length; i !== n; ++ i ) {\n\n      var faceUntil = faceOffsets[ i ],\n        vertexA = valueIndices[ faceUntil - 1 ];\n\n      for ( var j = faceBegin; j !== faceUntil; ++ j ) {\n\n        var vertexB = valueIndices[ j ],\n\n          loVertex = vertexA,\n          hiVertex = vertexB;\n\n        if ( hiVertex < loVertex ) {\n\n          loVertex = vertexB;\n          hiVertex = vertexA;\n        }\n\n        indices[ writeOffsets[ loVertex ] ++ ] = hiVertex;\n\n        vertexA = vertexB;\n      }\n\n      faceBegin = faceUntil;\n    }\n\n    this.edgePivotRangeOffsets = offsets;\n    this.edgeHighVertexIndices = indices;\n\n    return maxEdgesSharingPivot;\n  },\n\n  _compactEdgeLowToHighMap: function( maxEdgesSharingPivot ) {\n\n    var offsets = this.edgePivotRangeOffsets,\n      indices = this.edgeHighVertexIndices,\n\n      sorter = new MergeSort( Uint32Array, maxEdgesSharingPivot ),\n\n      nOffsets = this.polyMap.values.length + 1,\n\n      rangeUntil = 0,\n      rangeBegin = 0,\n      writeOffset = 0;\n\n    for ( var i = 1; i !== nOffsets; ++ i ) {\n\n      rangeUntil = offsets[ i ];\n\n      if ( rangeBegin !== rangeUntil ) {\n\n        sorter.sortRange( indices, rangeBegin, rangeUntil );\n\n        // Unique-compact indices within each range:\n\n        var prevElement = indices[ rangeBegin ];\n        indices[ writeOffset ++ ] = prevElement;\n\n        for ( var j = rangeBegin + 1; j < rangeUntil; ++ j ) {\n          \n          var element = indices[ j ];\n          if ( element !== prevElement ) {\n\n            indices[ writeOffset ++ ] = element;\n            prevElement = element;\n          }\n        }\n      }\n\n      offsets[ i ] = writeOffset; // re-write compact offsets\n      rangeBegin = rangeUntil; // certainly >= writeOffset\n    }\n\n    // Shrink to fit (offsets only has 2 extra elements, so view it):\n\n    this.edgeHighVertexIndices =\n        Arrays.slice( indices, 0, writeOffset );\n\n    this.edgePivotRangeOffsets = offsets.subarray( 0, nOffsets );\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/model/adjacency/EdgeVertexAdjacency.js\n **/","export default function MergeSort( arrayType, maxRangeLength ) {\n\n  this.ping = new arrayType( maxRangeLength );\n  this.pong = new arrayType( maxRangeLength );\n};\n\nMergeSort.apply = function( array ) {\n\n  var sorter = new MergeSort( array.constructor, array.length );\n  sorter.sortRange( array, 0, array.length );\n};\n\nMergeSort.prototype = {\n\n  constructor: MergeSort,\n\n\n  sortRange: function( array, begin, until ) {\n\n    var length = until - begin;\n\n    if ( length <= 4 ) {\n      // this implementation requires at least three elements and also\n      // has a high base cost when it comes to very short ranges\n\n      if ( length >= 2 ) this._handleShortRange( array, begin, length );\n      return;\n    }\n\n    var read = array,\n      readBegin = begin,\n      readUntil = until,\n\n      write = this.ping,\n      writeOffset = 0,\n\n      blockSize = 1,\n      blockPairSize = 2;\n\n    for ( var run = true; run; ) {\n\n      var nMerges = ( length + blockSize - 1 ) / blockSize >> 1,\n\n        l = readBegin,\n        endR = readBegin + blockPairSize;\n\n      for ( var last = 0; last <= 1; ++ last ) {\n\n        for ( var i = 1; i !== nMerges; ++ i,\n            l += blockSize, endR += blockPairSize ) {\n\n          var r = l + blockSize,\n            endL = r,\n\n            valL = read[ l ],\n            valR = read[ r ];\n\n          for ( var merge = true; merge; ) {\n\n            if ( valR < valL ) {\n\n              write[ writeOffset ++ ] = valR;\n\n              if ( ++ r === endR ) {\n\n                write[ writeOffset ++ ] = valL;\n                while ( ++ l !== endL )\n                  write[ writeOffset ++ ] = read[ l ];\n                merge = false;\n\n              } else valR = read[ r ];\n\n            } else {\n\n              write[ writeOffset ++ ] = valL;\n\n              if ( ++ l === endL ) {\n\n                write[ writeOffset ++ ] = valR;\n                while ( ++ r !== endR )\n                  write[ writeOffset ++ ] = read[ r ];\n                merge = false;\n\n              } else valL = read[ l ];\n\n            }\n          }\n        }\n\n        // Handle edge cases before the last pass:\n\n        if ( last === 0 ) {\n\n          nMerges = 2; // one more merge (1-based, exclusive)\n\n          if ( endR > readUntil ) endR = readUntil;\n          else if ( endR !== readUntil ) {\n\n            var writeOffsetTemp = writeOffset + blockPairSize;\n\n            for ( var j = endR; j !== readUntil; ++ j )\n              write[ writeOffsetTemp ++ ] = read[ j ];\n          }\n        }\n      }\n\n      if ( write !== array ) {\n        // not done yet? prepare next level\n\n        blockSize = blockPairSize;\n        blockPairSize <<= 1;\n\n        read = write;\n        readBegin = 0;\n        readUntil = length;\n\n        if ( blockPairSize < length ) {\n          // at least two more levels? destination is temporary\n\n          var ping = this.ping;\n          write = write === ping ? this.pong : ping;\n          writeOffset = 0;\n\n        } else {\n          // next will be the last level -> write back to source\n\n          write = array;\n          writeOffset = begin;\n\n        }\n\n      } else run = false;\n\n    }\n\n  },\n\n  _handleShortRange: function( array, begin, length ) {\n\n    var valA = array[   begin   ],\n      valB = array[ begin + 1 ];\n\n    switch ( length ) {\n\n      case 2:\n\n        if ( valB < valA ) {\n\n          array[ begin ] = valB;\n          array[ begin + 1 ] = valA;\n        }\n        break;\n\n      case 3: {\n\n        var valC = array[ begin + 2 ];\n\n        if ( valB < valA ) {\n\n          var tmp = valA; valA = valB; valB = tmp;\n        }\n\n        if ( valC < valB ) {\n\n          var tmp = valB; valB = valC; valC = tmp;\n        }\n\n        if ( valB < valA ) {\n\n          var tmp = valA; valA = valB; valB = tmp;\n        }\n\n        array[   begin   ] = valA;\n        array[ begin + 1 ] = valB;\n        array[ begin + 2 ] = valC;\n\n        break;\n      }\n\n      case 4: {\n\n        var valC = array[ begin + 2 ],\n          valD = array[ begin + 3 ];\n\n        if ( valB < valA ) {\n\n          var tmp = valA; valA = valB; valB = tmp;\n        }\n\n        if ( valD < valC ) {\n\n          var tmp = valC; valC = valD; valD = tmp;\n        }\n\n        if ( valC < valA ) {\n\n          var tmp = valA; valA = valC; valC = tmp;\n        }\n\n        if ( valD < valB ) {\n\n          var tmp = valB; valB = valD; valD = tmp;\n        }\n\n        if ( valC < valB ) {\n\n          var tmp = valB; valB = valC; valC = tmp;\n        }\n\n        array[   begin   ] = valA;\n        array[ begin + 1 ] = valB;\n        array[ begin + 2 ] = valC;\n        array[ begin + 3 ] = valD;\n\n      }\n    }\n\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/algorithm/MergeSort.js\n **/","export default function FaceEdgeAdjacency( polyMap ) {\n\n  this.polyMap = polyMap;\n\n  this.faceEdgeIndices = null;\n\n  this.edgeFaceCounts = null;\n  this.edgeFaceIndices = null;\n\n  this._compute();\n\n};\n\nFaceEdgeAdjacency.prototype = {\n\n  constructor: FaceEdgeAdjacency,\n\n  // F -> E\n  getEdgeIdFromFaceValueIndex: function( faceValueIndex ) {\n    return this.faceEdgeIndices[ faceValueIndex ];\n  },\n\n  // E -> F, part 1\n  getNumFacesForEdgeId: function( edgeID ) {\n    return this.edgeFaceCounts[ edgeID ];\n  },\n  // E -> F, part 2\n  getFaceForEdgeId: function( edgeId, faceOffset ) {\n    return this.edgeFaceIndices[ edgeId*2 + faceOffset ];\n  },\n\n  //returns false if there is an invalid surface\n  //if this function returns false this adjacency structure is invalid and cannot be used\n  checkValidity: function() {\n    var invalidSurface = true;\n    for (var i = 0; i<this.edgeFaceCounts.length; i++ ){\n      if(this.edgeFaceCounts[i] > 2)\n        invalidSurface = false;\n    }\n    return invalidSurface;\n  },\n\n  _compute: function() {\n\n    var polyMap = this.polyMap;\n    var edgeVertexAdjacency = polyMap.edgeVertexAdjacency;\n\n    var faceRangeOffsets = polyMap.faceRangeOffsets;\n    var faceValueIndices = polyMap.faceValueIndices;\n\n    var numEdges = edgeVertexAdjacency.edgeHighVertexIndices.length;\n    var numFaces = faceRangeOffsets.length - 1;\n    var edgeFaceCounts = new Uint32Array( numEdges );\n    var edgeFaceIndices = new Uint32Array( numEdges * 2 );\n    var faceEdgeIndices = new Uint32Array( faceValueIndices.length );\n\n    for( var f = 0; f < faceRangeOffsets.length - 1; f ++ ) {\n\n      var faceBegin = faceRangeOffsets[ f ];\n      var faceUntil = faceRangeOffsets[ f + 1 ];\n      var numFaceValues = faceUntil - faceBegin;\n\n      var vNext = faceValueIndices[ faceBegin ];\n    \n      // count faces on each edge.\n      for( var fv = 0; fv < numFaceValues; fv ++ ) {\n\n        var v = vNext;\n        vNext = faceValueIndices[ faceBegin + ( (fv+1)%numFaceValues ) ];\n\n        var edgeId = edgeVertexAdjacency.findEdgeId( v, vNext );\n\n        var faceValueIndex = faceBegin + fv;\n    \n        faceEdgeIndices[faceValueIndex] = edgeId;\n\n        edgeFaceIndices[edgeId*2 + edgeFaceCounts[edgeId]] = f;\n        edgeFaceCounts[edgeId]++;\n      }\n\n    }\n\n    this.faceEdgeIndices = faceEdgeIndices;\n\n    this.edgeFaceCounts = edgeFaceCounts;\n    this.edgeFaceIndices = edgeFaceIndices;\n\n    return this;\n\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/model/adjacency/FaceEdgeAdjacency.js\n **/","export default function ValueAdjacency( polyMap ) {\n\n  this.polyMap = polyMap;\n\n  this._compute();\n\n};\n\nValueAdjacency.prototype = {\n\n  constructor: ValueAdjacency,\n\n  // V -> E, part 1\n  getNumEdgesForVertex: function( vertexId ) {\n    var valueBegin = this.valueEdgeOffsets[ vertexId ];\n    var valueUntil = this.valueEdgeOffsets[ vertexId + 1 ];\n    var numValueEdges = valueUntil - valueBegin;\n\n    return numValueEdges;\n  },\n\n  // V -> E, part 2\n  getEdgeForVertexId: function( vertexId, edgeOffset ) {\n    var valueBegin = this.valueEdgeOffsets[ vertexId ];\n    return this.valueEdgeIndices[ valueBegin + edgeOffset ];\n  },\n\n  // V -> F, part 1\n  getNumFacesForVertex: function( vertexId ) {\n    var valueBegin = this.valueFaceOffsets[ vertexId ];\n    var valueUntil = this.valueFaceOffsets[ vertexId + 1 ];\n    var numValueFace = valueUntil - valueBegin;\n\n    return numValueFace;\n  },\n\n  // V -> F, part 2\n  getFaceForVertexId: function( vertexId, faceOffset ) {\n    var valueBegin = this.valueFaceOffsets[ vertexId ];\n    return this.valueFaceIndices[ valueBegin + faceOffset ];\n  },\n\n  _compute: function() {\n\n    var polyMap = this.polyMap;\n\n    var faceRangeOffsets = polyMap.faceRangeOffsets;\n    var faceValueIndices = polyMap.faceValueIndices;\n\n    var edgeVertexAdjacency = polyMap.edgeVertexAdjacency;\n\n    var valueFaceCount = new Uint32Array( polyMap.values.length );\n    var valueEdgeCount = new Uint32Array( polyMap.values.length );\n    var numFaces = faceRangeOffsets.length - 1;\n  \n    var numEdges = edgeVertexAdjacency.getNumEdges();\n    var edgeUnique = new Uint8Array( numEdges );\n\n    // histogram.\n    for( var f = 0; f < polyMap.faceRangeOffsets.length - 1; f ++ ) {\n\n      var faceBegin = polyMap.faceRangeOffsets[ f ];\n      var faceUntil = polyMap.faceRangeOffsets[ f + 1 ];\n      var numFaceValues = faceUntil - faceBegin;\n\n      var vNext = polyMap.faceValueIndices[ faceBegin ];\n  \n      for( var fv = 0; fv < numFaceValues; fv ++ ) {\n\n        var v = vNext;\n        vNext = polyMap.faceValueIndices[ faceBegin + ( (fv+1)%numFaceValues ) ];\n\n        var e = edgeVertexAdjacency.findEdgeId( v, vNext );\n\n        valueFaceCount[ v ] ++;\n\n        // is this the first time processing this edge\n        if( edgeUnique[ e ] === 0 ) {\n          edgeUnique[ e ] = 1;\n\n          valueEdgeCount[ v ] ++;\n          valueEdgeCount[ vNext ] ++;\n        }\n      }\n    }\n\n    // create offset arrays.\n    var faceSum = 0, edgeSum = 0;\n    var valueFaceOffsets = new Uint32Array( valueFaceCount.length + 1 );\n    var valueEdgeOffsets = new Uint32Array( valueEdgeCount.length + 1 );\n    for( var i = 0; i < valueFaceCount.length; i++ ) {\n      valueFaceOffsets[ i ] = faceSum;\n      faceSum += valueFaceCount[i];\n      valueFaceCount[i] = 0;\n\n      valueEdgeOffsets[ i ] = edgeSum;\n      edgeSum += valueEdgeCount[i];\n      valueEdgeCount[i] = 0;\n    }\n    valueFaceOffsets[ valueFaceCount.length ] = faceSum;\n    valueEdgeOffsets[ valueEdgeCount.length ] = edgeSum;\n\n    // fill in the values\n    var valueFaceIndices = new Uint32Array( faceSum );\n    var valueEdgeIndices = new Uint32Array( edgeSum );\n\n    for( var f = 0; f < polyMap.faceRangeOffsets.length - 1; f ++ ) {\n\n      var faceBegin = polyMap.faceRangeOffsets[ f ];\n      var faceUntil = polyMap.faceRangeOffsets[ f + 1 ];\n      var numFaceValues = faceUntil - faceBegin;\n\n      var vNext = polyMap.faceValueIndices[ faceBegin ];\n  \n      for( var fv = 0; fv < numFaceValues; fv ++ ) {\n\n        var v = vNext;\n        vNext = polyMap.faceValueIndices[ faceBegin + ( (fv+1)%numFaceValues ) ];\n\n        var e = edgeVertexAdjacency.findEdgeId( v, vNext );\n\n        valueFaceIndices[ valueFaceOffsets[ v ] + (valueFaceCount[ v ] ++) ] = f;\n\n        // is this the first time processing this edge\n        if( edgeUnique[ e ] === 1 ) {\n          edgeUnique[ e ] = 2;\n\n          valueEdgeIndices[ valueEdgeOffsets[ v ] + ( valueEdgeCount[ v ] ++ ) ] = e;\n          valueEdgeIndices[ valueEdgeOffsets[ vNext ] + ( valueEdgeCount[ vNext ] ++ ) ] = e;\n        }\n      }\n    }\n\n    this.valueFaceOffsets = valueFaceOffsets;\n    this.valueFaceIndices = valueFaceIndices;\n    \n    this.valueEdgeOffsets = valueEdgeOffsets;\n    this.valueEdgeIndices = valueEdgeIndices;\n\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/model/adjacency/ValueAdjacency.js\n **/","import ObjectsByName from '../../generic/container/ObjectsByName';\nimport PolyMaps from './PolyMaps';\nimport PolyMap from './PolyMap';\n\nexport default function PolyMesh( from ) {\n\n  if(!from){\n    this.faceRangeOffsets = new Uint32Array(1);\n    this.positions = new PolyMap();\n  } else {\n\n    this.faceRangeOffsets = from.faceRangeOffsets;  //Uint32Array\n    this.materialIds = from.materialIds;    //PolyMap\n\n    this.positions = from.positions;        //PolyMap\n\n    this.normalMap = from.normalMap;        //PolyMap\n    this.tangentMap = from.tangentMap;      //PolyMap\n    this.colorMaps = ObjectsByName.shallowClone( from.colorMaps );  //ObjectsByName contains PolyMap\n    this.uvMaps = ObjectsByName.shallowClone( from.uvMaps );        //ObjectsByName contains PolyMap\n\n    this.skinning = from.skinning;          //Skinning\n  }\n\n};\n\nPolyMesh.prototype = {\n\n  constructor: PolyMesh,\n\n  getNumFaces: function() {\n\n    return this.faceRangeOffsets.length - 1;\n\n  },\n\n  getNumFaceVertices: function() {\n\n    return this.positions.faceValueIndices.length;\n\n  },\n\n  getNumVertices: function() {\n\n    return this.positions.values.length;\n\n  },\n\n  getMapById: function( mapId ) {\n\n    return PolyMaps.resolveMap( this, mapId ) || null;\n\n  }\n\n};\n\nPolyMesh.fromData = function(\n    faceRangeOffsets, positions, optionalIndices, optionalMaterialIds ) {\n\n  return new PolyMesh( {\n\n    faceRangeOffsets: faceRangeOffsets,\n\n    positions: positions instanceof PolyMap ? positions :\n        PolyMap.fromData(\n          faceRangeOffsets, optionalIndices || null, positions ),\n\n    materialIds: optionalMaterialIds || null, // Uint32Array\n\n    normalMap: null,  // optional PolyMap< THREE.Vector3 >\n    tangentMap: null, // optional PolyMap< THREE.Vector3 >\n\n    uvMaps: null,   // optional ObjectsByName< PolyMap<THREE.Vector2> >\n    colorMaps: null,  // optional ObjectsByName< PolyMap<THREE.Color> >\n\n    skinning: null\n\n  } );\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/model/PolyMesh.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\n\nexport default function Skinning( from ) {\n\n  this.positionSkinRange = from.positionSkinRange;  //Uint32Array\n  this.skinWeights = from.skinWeights;        //Float32Array\n  this.skinBoneIndices = from.skinBoneIndices;    //Uint16Array\n\n  this.poseSkinToPoseBoneTransform = from.poseSkinToPoseBoneTransform;  //ObjectArrayView of Matrix4's\n  this.poseBoneToWorldTransform = from.poseBoneToWorldTransform;      //ObjectArrayView of Matrix4's\n\n};\n\nSkinning.fromData = function( positionSkinRange, skinWeights, skinBoneIndices ) {\n\n  if ( result.skinWeights.length !== result.skinBoneIndices.length )\n    throw Error( \"skinWeights and skinBoneIndices sizes do not match.\" );\n\n  const result = new Skinning( {\n\n    positionSkinRange: positionSkinRange,\n    skinWeights: skinWeights,\n    skinBoneIndices: skinBoneIndices,\n\n    poseSkinToPoseBoneTransform: poseSkinToPoseBoneTransform,\n    poseBoneToWorldTransform: poseBoneToWorldTransform\n\n  } );\n\n\n  return result;\n};\n\n\n\nSkinning.prototype = {\n\n  constructor: Skinning,\n\n  applyTransforms: function(positions, skinToWorldTransform, boneWorldTransforms, rootBoneIndex) {\n    return this.deform(this.createFinalTransforms(skinToWorldTransform, boneWorldTransforms, rootBoneIndex), positions);\n  },\n\n  createFinalTransforms: function( skinToWorldTransform, boneWorldTransforms, rootBoneIndex) {\n\n    const poseSkinToPoseBoneTransform = this.poseSkinToPoseBoneTransform;\n    const worldToSkinTransform = new THREE.Matrix4().getInverse( skinToWorldTransform, true );\n    const finalTransforms = new Array( poseSkinToPoseBoneTransform.length );\n\n    const identity = new THREE.Matrix4().identity();\n\n    if( poseSkinToPoseBoneTransform.length === 0 ) {\n      return finalTransforms;\n    }\n\n    let rootToWorldTransform;\n    let worldToRootTransform;\n    let poseRootToSkinTransform;\n\n    if( rootBoneIndex > -1) {\n      rootToWorldTransform = boneWorldTransforms[rootBoneIndex];\n      worldToRootTransform = new THREE.Matrix4().getInverse( rootToWorldTransform, true );\n      poseRootToSkinTransform = new THREE.Matrix4().getInverse( poseSkinToPoseBoneTransform.getAt(rootBoneIndex), true );\n    }\n\n    const boneToRootTransform = new THREE.Matrix4();\n    const boneToSkinTransform = new THREE.Matrix4();\n    const finalTransform = new THREE.Matrix4();\n\n    for( let i = 0, il = poseSkinToPoseBoneTransform.length; i < il; i ++ ) {\n\n\n      let boneToWorldTransform = boneWorldTransforms[i];\n      if( rootBoneIndex > -1) {\n        boneToRootTransform.multiplyMatrices( worldToRootTransform, boneToWorldTransform );\n        boneToSkinTransform.multiplyMatrices( poseRootToSkinTransform, boneToRootTransform );\n      } else {\n        boneToSkinTransform.multiplyMatrices( worldToSkinTransform, boneToWorldTransform );\n      }\n\n      finalTransforms[i] = new THREE.Matrix4().multiplyMatrices( boneToSkinTransform, poseSkinToPoseBoneTransform.getAt(i) );\n\n    }\n\n    return finalTransforms;\n\n  },\n\n  deform: function ( finalTransforms, positions ) {\n\n    const positionSkinRange = this.positionSkinRange;\n    const skinWeights = this.skinWeights;\n    const skinBoneIndices = this.skinBoneIndices;\n\n    const deformedPositions = new ObjectArrayView(THREE.Vector3, positions.length);\n    const v = new THREE.Vector3();\n    const d = new THREE.Vector3();\n\n    for(let i = 0; i<positions.length; i++){\n      positions.getAt(i, v);\n      d.multiplyScalar(0);\n      for(let j = positionSkinRange[i]; j<positionSkinRange[i+1]; j++){\n        positions.getAt(i, v);\n        v.applyMatrix4( finalTransforms[ skinBoneIndices[j] ] );\n        v.multiplyScalar( skinWeights[j] );\n        d.addVectors(d, v);\n      }\n      if(positionSkinRange[i+1] - positionSkinRange[i] === 0){\n        d.copy(v);\n      }\n      deformedPositions.setAt(i, d);\n    }\n    return deformedPositions;\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/model/Skinning.js\n **/","import Arrays from '../../generic/utility/Arrays';\nimport GlobalCompaction from '../../generic/algorithm/GlobalCompaction';\n\nconst ImportConversions = {\n\n  collapsePositions: function( positions, indices ) {\n\n    var compaction = new GlobalCompaction( positions ),\n      compactPositions = compaction.compactedValues( positions );\n\n    if ( indices ) compaction.transcribeIndices( indices );\n\n    return compactPositions;\n\n  },\n\n  collapseMapVertexValues: function( polyMesh, polyMap ) {\n\n    var positions = polyMesh.positions.updateInverseIndex(),\n      indexRanges = polyMesh.faceRangeOffsets,\n      positionIndices = positions.faceValueIndices,\n      faceRangeOffsets = positions.faceRangeOffsets,\n      currFaceIndex = -1,\n      nextFaceStart = 0,\n\n      faceIndexOffsets = positions.valueFaceIndexOffsets,\n      faceIndices = positions.valueFaceIndices,\n\n      values= polyMap.values,\n      data = values.data,\n      elementSize = values.elementSize,\n      valueIndices = polyMap.faceValueIndices;\n\n    for ( var i = 0, n = polyMesh.getNumFaceVertices(); i !== n; ++ i ) {\n\n      var positionIndex = positionIndices[ i ],\n        currValueIndex = valueIndices[ i ],\n        currValueOffset = currValueIndex * elementSize;\n\n      if ( i === nextFaceStart )\n        nextFaceStart = faceRangeOffsets[ ++ currFaceIndex + 1 ];\n\n      var facesStart = faceIndexOffsets[   positionIndex   ],\n        facesUntil = faceIndexOffsets[ positionIndex + 1 ];\n\n      for ( var j = facesStart; j !== facesUntil; ++ j ) {\n\n        var faceIndex = faceIndices[ j ];\n        if ( faceIndex === currFaceIndex ) break;\n\n        var valueIndexOffset = positions.\n            findValueIndexOffset( faceIndex, positionIndex ),\n\n          valueIndex = valueIndices[ valueIndexOffset ];\n\n        if ( valueIndex !== currValueIndex ) {\n\n          if ( Arrays.rangeEquals( data, currValueOffset,\n              data, valueIndex * elementSize, elementSize ) )\n\n            valueIndices[ i ] = valueIndex;\n        }\n      }\n    }\n  }\n\n};\n\n\nexport default ImportConversions;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/algorithm/ImportConversions.js\n **/","import Arrays from '../utility/Arrays';\nimport BitSet from '../container/BitSet';\nimport ObjectArrayView from '../container/ObjectArrayView';\nimport IndexMappings from './IndexMappings';\n\n/**\n * Construct a compact (injective / scattering) map to globally unique values\n * within an ObjectArrayView and optionally also the (injective / compacting)\n * source-to-target mapping (STTM).\n *\n * For each index in the input data, the STTM contains the index in compacted\n * form. The STTM can be used to transcribe existing indices into the data or,\n * if the data is \"unindexed\", it is the indices.\n *\n * @constructor\n *\n * @param {!ObjectArrayView} values\n * @param {boolean=} ttsOnly whether to only create the target-to-source map\n */\nexport default function GlobalCompaction ( values, ttsOnly ) {\n\n  var nValues = values.length,\n\n    tupleOrder = Arrays.sort(\n        IndexMappings.identity( nValues ),\n        values.newCompareAtIndicesStable() );\n\n  var nUnique = 0,\n    sourceToTargetMap = null,\n\n    compare = values.newCompareAtIndices();\n\n  if ( ttsOnly ) {\n\n    nUnique = Arrays.unique( tupleOrder, compare );\n\n  } else {\n    // customized UNIQUE algo that builds the STTM on the fly\n\n    sourceToTargetMap = new Uint32Array( nValues );\n\n    var writeIndex = 0,\n      prevUniqueAt = 0,\n      minValueIndex = tupleOrder[ 0 ];\n\n    for ( var i = 1; i < nValues; ++ i ) {\n\n      var valueIndex = tupleOrder[ i ];\n\n      if ( compare( valueIndex, minValueIndex ) !== 0 ) {\n\n        for ( var j = prevUniqueAt; j !== i; ++ j )\n          sourceToTargetMap[ tupleOrder[ j ] ] = minValueIndex;\n\n        prevUniqueAt = i;\n        minValueIndex = valueIndex;\n\n        if ( ++ writeIndex !== i )\n          tupleOrder[ writeIndex ] = valueIndex;\n\n      }\n    }\n\n    for ( var j = prevUniqueAt; j !== nValues; ++ j )\n      sourceToTargetMap[ tupleOrder[ j ] ] = minValueIndex;\n\n    nUnique = writeIndex + 1;\n  }\n\n  // Now that duplicates have been removed, restore the original order by\n  // sorting the indices (since we have a finite integer range, we can do\n  // so very quickly using a BitSet):\n\n  var targetToSourceMap = new BitSet( nValues ).\n      includeFromArray( tupleOrder, 0, nUnique ).toIndexArray( nUnique );\n\n  if ( sourceToTargetMap !== null ) {\n\n    // The STTM already has all equal indices mapped to the first, but\n    // these indices are still in respect to the input, so they need to\n    // be translated to refer to compact data:\n\n    var reusableMemory = tupleOrder,\n\n      sparseCompaction =\n          IndexMappings.inverse(\n            targetToSourceMap, null, reusableMemory );\n\n    IndexMappings.apply( sourceToTargetMap, sparseCompaction );\n  }\n\n  this.targetToSourceMap = targetToSourceMap;\n  this.sourceToTargetMap = sourceToTargetMap;\n\n};\n\n\nGlobalCompaction.prototype = {\n\n  constructor: GlobalCompaction,\n\n  compactedValues: function( data ) {\n\n    var map = this.targetToSourceMap,\n      nCompact = map.length,\n\n      result = new ObjectArrayView( data.type, nCompact ),\n\n      elementData = data.newRangeArray();\n\n    for ( var i = 0; i !== nCompact; ++ i ) {\n\n      data.rangeToArray( map[ i ], 1, elementData );\n      result.arrayToRange( elementData, i, 1 );\n    }\n\n    return result;\n\n  },\n\n  indices: function( nFaceVertices ) {\n\n    return new Uint32Array( this.sourceToTargetMap );\n\n  },\n\n  transcribeIndices: function( indices ) {\n\n    return IndexMappings.apply( indices, this.sourceToTargetMap );\n\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/algorithm/GlobalCompaction.js\n **/","export default function BitSet( length ) {\n\n  this.data = new Uint32Array( ( length + 31 ) >>> 5 );\n  this.length = length;\n\n  this.byteView = null;\n};\n\nBitSet.prototype = {\n\n  constructor: BitSet,\n\n  clear: function() {\n\n    this.data.fill( 0 );\n    return this;\n  },\n\n  fill: function( optionalOffset, optionalLength ) {\n\n    var data = this.data,\n\n      begin = optionalOffset !== undefined ? optionalOffset : 0,\n      until = optionalLength !== undefined ?\n              begin + optionalLength : this.length,\n\n      wordIndexBegin = begin >>> 5,\n      wordIndexUntil = until >>> 5,\n\n      // Smear the highbit with a signed shift for a pattern of MSBs:\n      maskBegin = -0x80000000 >> ~begin,\n\n      // Power of two minus one yields a pattern of LSBs:\n      maskUntil = ( 1 << until ) - 1;\n\n\n    if ( wordIndexBegin === wordIndexUntil )\n\n      data[ wordIndexBegin ] |= ( maskBegin & maskUntil );\n\n    else {\n\n      data[ wordIndexBegin ] |= maskBegin;\n\n      if ( ++ wordIndexBegin !== wordIndexUntil )\n        data.fill( ~0, wordIndexBegin, wordIndexUntil );\n\n      data[ wordIndexUntil ] |= maskUntil;\n\n    }\n\n    return this;\n  },\n\n  include: function( i ) {\n\n    this.data[ i >>> 5 ] |= 1 << i;\n  },\n\n  exclude: function( i ) {\n\n    this.data[ i >>> 5 ] &= ~ ( 1 << i );\n  },\n\n  contains: function( i ) {\n\n    return ( this.data[ i >>> 5 ] & 1 << i ) !== 0;\n  },\n\n  swap: function( i, j ) {\n\n    var data = this.data,\n\n      wordIndexI = i >>> 5, maskI = 1 << i,\n      wordIndexJ = j >>> 5, maskJ = 1 << j,\n\n      stateI = ( data[ wordIndexI ] & maskI ) !== 0,\n      stateJ = ( data[ wordIndexJ ] & maskJ ) !== 0;\n\n    if ( stateI !== stateJ ) {\n\n      if ( stateI ) {\n\n        data[ wordIndexI ] &= ~maskI;\n        data[ wordIndexJ ] |= maskJ;\n\n      } else {\n\n        data[ wordIndexI ] |= maskI;\n        data[ wordIndexJ ] &= ~maskJ;\n      }\n    }\n\n  },\n\n  testAndInclude: function( i ) {\n\n    var data = this.data,\n\n      wordIndex = i >>> 5, mask = 1 << i,\n\n      unchangedWord  = data[ wordIndex ];\n\n    data[ wordIndex ] = unchangedWord | mask;\n    return ( unchangedWord & mask ) !== 0;\n  },\n\n  includeFromArray: function( array, optionalOffset, optionalUntil ) {\n\n    var data = this.data;\n\n    for ( var j = optionalOffset || 0,\n        e = optionalUntil || array.length; j < e; ++ j ) {\n\n      var i = array[ j ];\n\n      data[ i >>> 5 ] |= 1 << i;\n    }\n\n    return this;\n  },\n\n  containsAnyIn: function( array, optionalOffset, optionalUntil ) {\n\n    var result = false,\n      data = this.data;\n\n    for ( var j = optionalOffset || 0,\n        e = optionalUntil || array.length; j < e && ! result; ++ j ) {\n\n      var i = array[ j ];\n\n      result = ( data[ i >>> 5 ] & 1 << i ) !== 0;\n    }\n\n    return result;\n  },\n\n  countSetBits: function( optionalOffset, optionalUntil ) {\n\n    var result = 0,\n\n      begin = optionalOffset !== undefined ? optionalOffset : 0,\n      until = optionalUntil !== undefined ? optionalUntil : this.length;\n\n    if ( ( until - begin & -0x4000 ) === 0 )\n      // that is, 'begin' is less than 'until' and fewer than 2048 bytes\n\n      result = this.countSetBitsInShortRange( begin, until );\n\n    else if ( begin < until ) {\n      // use a LUT - it's several times faster at scale\n\n      var data = this.byteView,\n        lut = BitSet._ByteBitCount;\n\n      if ( data === null ) {\n\n        data = new Uint8Array( this.data.buffer );\n        this.byteView = data;\n      }\n\n      var wordIndexBegin = begin >>> 3,\n        wordIndexUntil = until >>> 3,\n\n        // Smear the highbit with a signed shift for a pattern of MSBs:\n        maskBegin = -0x80000000 >> 31 - ( begin & 7 ),\n        // Power of two minus one yields a pattern of LSBs:\n        maskUntil = ( 1 << ( until & 7 ) ) - 1;\n\n      result = lut[ data[ wordIndexBegin ] & maskBegin ];\n\n      for ( var j = wordIndexBegin + 1; j !== wordIndexUntil; ++ j )\n        result += lut[ data[ j ] ];\n\n      result += lut[ data[ wordIndexUntil ] & maskUntil ];\n    }\n\n    return result;\n  },\n\n  countSetBitsInShortRange: function( begin, until ) {\n\n    // Note: For some odd reason the data word must be signed to keep\n    // V8 from deoptimizing - all unsigned access won't do.\n\n    var result = 0,\n\n      data = this.data,\n\n      here = begin,\n      index = here >>> 5,\n\n      word = data[ index ] >> here;\n\n    result = word & 1;\n\n    while ( ++ here !== until ) {\n\n      if ( ( here & 31 ) !== 0 )\n        word >>= 1;\n      else\n        word = data[ ++ index ] | 0; // cast to signed (important)\n\n      result += word & 1;\n    }\n\n    return result;\n  },\n\n  toIndexArray: function( optionalKnownLength ) {\n\n    var result = new Uint32Array(\n          optionalKnownLength === undefined ?\n              this.countSetBits() : optionalKnownLength ),\n      baseIndex = 0,\n      writeOffset = 0,\n      data = this.data;\n\n    for ( var j = 0, n = data.length; j !== n; ++ j ) {\n\n      for ( var mask = data[ j ],\n          i = baseIndex; mask !== 0; mask >>>= 1, ++ i )\n\n        if ( ( mask & 1 ) !== 0 ) result[ writeOffset ++ ] = i;\n\n      baseIndex += 32;\n    }\n\n    return result;\n  }\n\n};\n\nBitSet._ByteBitCount = ( function() {\n\n  var lut = new Uint8Array( 256 );\n\n  for ( var i = 0; i !== 256; ++ i ) {\n\n    var value = 0;\n    for ( var m = i; m !== 0; m >>>= 1 ) if ( ( m & 1 ) !== 0 ) ++ value;\n\n    lut[ i ] = value;\n  }\n\n  return lut;\n\n} )();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/generic/container/BitSet.js\n **/","import Arrays from '../../generic/utility/Arrays';\nimport PolyMaps from '../model/PolyMaps';\nimport ScalarBuffer from '../../generic/container/ScalarBuffer';\nimport BitSet from '../../generic/container/BitSet';\nimport IndexMappings from '../../generic/algorithm/IndexMappings';\n\nexport default function Selection( indices, meaning, optionalMapId ) {\n\n  this.indices = indices;\n  this.meaning = meaning;\n  this.mapId = optionalMapId || PolyMaps.IdPositions;\n};\n\nSelection.Faces = 0;\nSelection.Vertices = 1;\nSelection.Edges = 2;\n\nSelection.prototype = {\n\n  constructor: Selection,\n\n  getIndices: function( mesh, meaning, optionalMapId ) {\n\n    var indices = this.indices,\n      convTab = Selection.ConversionTable,\n      convFunc = convTab[ this.meaning ][ meaning ];\n\n    if ( convFunc !== null )\n\n      indices = convFunc.call( null, mesh, indices,\n          this.mapId, optionalMapId || PolyMaps.IdPositions );\n\n    return indices;\n  }\n\n};\n\nSelection.newRandomSelection =\n    function( seed, density, polyMesh, meaning, optionalMapId ) {\n\n  var n = Selection.getNumElements( polyMesh, meaning, optionalMapId ),\n\n    nPopulation = density * n | 0,\n    bits = new BitSet( n ).fill( 0, nPopulation ),\n    prng = seed;\n\n  for ( var i = 0, e = n - 1; i < e; ++ i ) {\n\n    // Magic constants taken from\n    // https://en.wikipedia.org/wiki/Linear_congruential_generator\n    prng = prng * 22695477 + 1 >>> 0;\n\n    bits.swap( i, i + ( prng & 0x3fffffff ) % ( n - i ) );\n  }\n\n  return new Selection( bits.toIndexArray(), meaning, optionalMapId );\n\n};\n\n\n// Provides an identity mapping in case a selection is not provided:\n\nSelection.getIndices = function(\n    mesh, meaning, optionalSelectionOrMapId, optionalSelection ) {\n\n  var mapId = PolyMaps.IdPositions,\n    selection = optionalSelection;\n\n  if ( typeof optionalSelectionOrMapId === 'string' )\n    mapId = optionalSelectionOrMapId;\n  else\n    selection = optionalSelectionOrMapId;\n\n  return ! selection ?\n\n      IndexMappings.identityForReading(\n        Selection.getNumElements( mesh, meaning, mapId ) ) :\n\n      selection.getIndices( mesh, meaning, mapId );\n};\n\nSelection.getNumElements = function( mesh, meaning, optionalMapId ) {\n\n  switch ( meaning ) {\n\n    case Selection.Faces:\n      return mesh.getNumFaces();\n\n    case Selection.Vertices:\n      return PolyMaps.resolveMap( mesh,\n          optionalMapId || PolyMaps.IdPositions ).values.length;\n\n    case Selection.Edges:\n      return PolyMaps.resolveMap( mesh,\n          optionalMapId || PolyMaps.IdPositions ).getNumEdges();\n\n    default:\n      throw Error( \"Bad meaning argument!\" );\n  }\n};\n\n// Conversions:\n\nSelection.convFacesToVertices = function( mesh, indices, _, mapId ) {\n\n  var mapOut = PolyMaps.resolveMap( mesh, mapId ),\n    result = new BitSet( mapOut.values.length ),\n\n    faceRangeOffsets = mesh.faceRangeOffsets,\n    mapValueIndices = mapOut.faceValueIndices;\n\n  for ( var i = 0, n = indices.length; i !== n; ++ i ) {\n\n    var faceIndex = indices[ i ],\n\n      begin = faceRangeOffsets[   faceIndex   ],\n      until = faceRangeOffsets[ faceIndex + 1 ];\n\n    result.includeFromArray( mapValueIndices, begin, until );\n  }\n\n  return result.toIndexArray();\n};\n\nSelection.convFacesToEdges = function( mesh, indices, _, mapId ) {\n\n  var mapOut = PolyMaps.resolveMap( mesh, mapId ),\n    result = new BitSet( mapOut.getNumEdges() ),\n\n    faceRangeOffsets = mesh.faceRangeOffsets,\n    mapValueIndices = mapOut.faceValueIndices;\n\n  for ( var i = 0, n = indices.length; i !== n; ++ i ) {\n\n    var faceIndex = indices[ i ],\n\n      begin = faceRangeOffsets[   faceIndex   ],\n      until = faceRangeOffsets[ faceIndex + 1 ];\n\n    if ( begin !== until ) {\n\n      var vertexA = mapValueIndices[ until - 1 ]\n\n      for ( var j = begin; j !== until; ++ j ) {\n\n        var vertexB = mapValueIndices[ j ];\n        result.include( mapOut.findEdgeId( vertexA, vertexB ) );\n        vertexA = vertexB;\n      }\n    }\n  }\n\n  return result.toIndexArray();\n};\n\n//\n\nSelection.convVerticesToFaces = function( mesh, indices, mapId, _ ) {\n\n  var buffer = new ScalarBuffer( Uint32Array ),\n\n    faceRangeOffsets = mesh.faceRangeOffsets,\n    mapValueIndices =\n        PolyMaps.resolveMap( mesh, mapId ).faceValueIndices,\n\n    nFaces = mesh.getNumFaces();\n\n  for ( var faceIndex = 0; faceIndex !== nFaces; ++ faceIndex ) {\n\n    var begin = faceRangeOffsets[ faceIndex ],\n      until = faceRangeOffsets[ faceIndex + 1 ],\n\n      allVerticesFound = true;\n\n    for ( var i = begin; i !== until && allVerticesFound; ++ i )\n\n      allVerticesFound = -1 <\n          Arrays.binarySearch( indices, mapValueIndices[ i ] );\n\n    if ( allVerticesFound ) buffer.push( faceIndex );\n  }\n\n  return buffer.toArrayAndClear();\n};\n\nSelection.convVerticesToVertices =\n    function( mesh, indices, mapIdIn, mapIdOut ) {\n\n  if ( mapIdIn === mapIdOut ) return indices;\n\n  var mapOut = PolyMaps.resolveMap( mesh, mapIdOut ),\n    result = new BitSet( mapOut.values.length ),\n\n    mapOutValueIndices = mapOut.faceValueIndices,\n\n    mapIn = PolyMaps.resolveMap( mesh, mapIdIn ).updateInverseIndex(),\n    faceIndexOffsets = mapIn.valueFaceIndexOffsets,\n    faceIndices = mapIn.valueFaceIndices;\n\n  for ( var i = 0, n = indices.length; i !== n; ++ i ) {\n\n    var mapInValueIndex = indices[ i ],\n\n      facesBegin = faceIndexOffsets[   mapInValueIndex   ],\n      facesUntil = faceIndexOffsets[ mapInValueIndex + 1 ];\n\n    for ( var j = facesBegin; j !== facesUntil; ++ j ) {\n\n      var vertexOffset =\n          mapIn.findValueIndexOffset(\n              faceIndices[ j ], mapInValueIndex );\n\n      result.include( mapOutValueIndices[ vertexOffset ] );\n    }\n  }\n\n  return result.toIndexArray();\n};\n\nSelection.convVerticesToEdges =\n    function( mesh, indices, mapIdIn, mapIdOut ) {\n\n  var mapOut = PolyMaps.resolveMap( mesh, mapIdOut ),\n    result = new BitSet( mapOut.getNumEdges() ),\n\n    faceRangeOffsets = mesh.faceRangeOffsets,\n    mapValueIndices =\n        PolyMaps.resolveMap( mesh, mapIdIn ).faceValueIndices,\n\n    nFaces = mesh.getNumFaces();\n\n  for ( var faceIndex = 0; faceIndex !== nFaces; ++ faceIndex ) {\n\n    var begin = faceRangeOffsets[ faceIndex ],\n      until = faceRangeOffsets[ faceIndex + 1 ];\n\n    if ( begin !== until ) {\n\n      var last = mapValueIndices[ -- until ],\n        lastSelected = -1 < Arrays.binarySearch( indices, last ),\n\n        vertexA = last,\n        prevSelected = lastSelected;\n\n      for ( var j = begin; j !== until; ++ j ) {\n\n        var vertexB = mapValueIndices[ j ],\n          selected = -1 < Arrays.binarySearch( indices, vertexB );\n\n        if ( prevSelected && selected )\n\n          result.include( mapOut.findEdgeId( vertexA, vertexB ) );\n\n        vertexA = vertexB;\n        prevSelected = selected;\n      }\n\n      if ( prevSelected && lastSelected )\n        result.include( mapOut.findEdgeId( vertexA, last ) );\n    }\n  }\n\n  return result.toIndexArray();\n};\n\n//\n\nSelection.convEdgesToFaces = function( mesh, indices, mapIdIn, _ ) {\n\n  var tmp = Selection.\n      convEdgesToVertices( mesh, indices, mapIdIn, mapIdIn );\n\n  return Selection.convVerticesToFaces( mesh, tmp, mapIdIn, '' );\n};\n\nSelection.convEdgesToVertices =\n    function( mesh, indices, mapIdIn, mapIdOut ) {\n\n  var tmp = Selection.\n      convEdgesToVerticesOfSameMap( mesh, indices, mapIdIn );\n\n  return Selection.convVerticesToVertices( mesh, tmp, mapIdIn, mapIdOut );\n};\n\nSelection.convEdgesToEdges =\n    function( mesh, indices, mapIdIn, mapIdOut ) {\n\n  if ( mapIdIn === mapIdOut ) return indices;\n\n  var tmp = Selection.\n      convEdgesToVerticesOfSameMap( mesh, indices, mapIdIn );\n\n  return Selection.\n      convVerticesToEdges( mesh, indices, mapIdIn, mapIdOut );\n};\n\nSelection.convEdgesToVerticesOfSameMap = function( mesh, indices, mapId ) {\n\n  var map = PolyMaps.resolveMap( mesh, mapId ).updateEdgeMap(),\n\n    edgeRangeOffsets = map.edgePivotRangeOffsets,\n    highVertexIndices = map.edgeHighVertexIndices,\n\n    result = new BitSet( map.values.length );\n\n  for ( var i = 0, n = indices.length; i !== n; ++ i ) {\n\n    var edgeId = indices[ i ],\n\n      hiVertex = highVertexIndices[ edgeId ],\n\n      searchResult = Arrays.\n          binarySearch( edgeRangeOffsets, edgeId + 1 );\n\n    if ( searchResult < 0 ) searchResult = ~searchResult;\n\n    var loVertex = searchResult - 1;\n\n    result.include( hiVertex );\n    result.include( loVertex );\n  }\n\n  return result.toIndexArray();\n};\n\nSelection.ConversionTable = [\n\n  // From Faces to...\n  [\n    // ... Faces\n    null,\n    // ... Vertices\n    Selection.convFacesToVertices,\n    // ... Edges\n    Selection.convFacesToEdges\n  ],\n  // From Vertices to...\n  [\n    // ... Faces\n    Selection.convVerticesToFaces,\n    // ... Vertices\n    Selection.convVerticesToVertices,\n    // ... Edges\n    Selection.convVerticesToEdges\n  ],\n  // From Edges to...\n  [\n    // ... Faces\n    Selection.convEdgesToFaces,\n    // ... Vertices\n    Selection.convEdgesToVertices,\n    // ... Edges\n    Selection.convEdgesToEdges\n  ]\n];\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/transient/Selection.js\n **/","import PolyMaps from '../geometric/model/PolyMaps';\nimport Exporter from '../geometric/tool/Exporter';\nimport THREE from 'three';\n\nconst ThreeExport = {\n\n    NoIndices: 0,\n    SimpleIndices: 1,\n    CompactIndices: 2,\n\n    exportBufferGeometry: function(\n            polyMesh, indicesMode, interleaved, exportTangents, prevData, prevTriangulation, prevIndexing, prevValueMap) {\n\n        var result = new THREE.BufferGeometry(),\n            exportSpec = [],\n            { exporter, triangulationChanged } = ThreeExport._prepare( polyMesh,\n                    exportSpec, indicesMode, interleaved, exportTangents, prevData, prevTriangulation, prevIndexing),\n\n            IdPositions = PolyMaps.IdPositions,\n            valueMap = {};\n\n        if ( indicesMode !== ThreeExport.NoIndices ) {\n\n            var indices = indicesMode === ThreeExport.SimpleIndices ?\n                    exporter.getTriangulatingIndices() :\n                    exporter.getMapIndices( IdPositions );\n\n            result.setIndex( new THREE.BufferAttribute( indices, 1, false ) );\n        }\n\n        if ( ! interleaved ) {\n\n            for ( var i = 0; i !== exportSpec.length; ++ i ) {\n\n                //console.log(indicesMode);\n\n                var attrSpec = exportSpec[ i ],\n\n                    triangulateValues =\n                            indicesMode === ThreeExport.NoIndices;\n\n                var data;\n                var newMap = PolyMaps.resolveMap( polyMesh, attrSpec.mapId ),\n                oldMap = prevData && prevData.get('mesh') && PolyMaps.resolveMap( prevData.get('mesh'), attrSpec.mapId );\n\n                if(oldMap!==newMap || !prevValueMap ){\n                    data = indicesMode !== ThreeExport.CompactIndices ?\n\n                                exporter.getUnindexedMapValues(\n                                        attrSpec.mapId, triangulateValues ) :\n\n                                exporter.getMapValues( attrSpec.mapId );        \n                } else {\n                    //console.log('skip');\n                    data = prevValueMap[attrSpec.mapId];\n                }\n\n                valueMap[attrSpec.mapId] = data;\n                result.addAttribute( attrSpec.threeName,\n                        new THREE.BufferAttribute(\n                            data, attrSpec.itemSize, attrSpec.normalized ) );\n            }\n\n        } else {\n\n            var stride = 0;\n            for ( var i = 0; i !== exportSpec.length; ++ i )\n                stride += exportSpec[ i ].itemSize;\n\n            var nValuess = 0;\n            switch ( indicesMode ) {\n\n                case ThreeExport.NoIndices: // no. of triangulated vertices\n                    nValuess = exporter.getNumFaceVertices();\n                    break;\n\n                case ThreeExport.SimpleIndices: // no. of values\n                    nValuess = exporter.mesh.getNumFaceVertices();\n                    break;\n\n                case ThreeExport.CompactIndices: // as calculated\n                    nValuess = exporter.\n                            getNumMapValues( PolyMaps.IdPositions );\n            }\n\n            var data = new Float32Array( stride * nValuess ),\n                buffer = new THREE.InterleavedBuffer( data, stride ),\n\n                offset = 0;\n\n            for ( var i = 0; i !== exportSpec.length; ++ i ) {\n\n                var attrSpec = exportSpec[ i ],\n                    itemSize = attrSpec.itemSize,\n                    mapId = attrSpec.mapId;\n\n                if ( indicesMode !== ThreeExport.CompactIndices ){\n\n                    exporter.getUnindexedMapValues( mapId,\n                            indicesMode === ThreeExport.NoIndices,\n                            data, offset, stride );\n\n                } else {\n\n                    exporter.getMapValues( mapId, data, offset, stride );\n                }\n\n                result.addAttribute( attrSpec.threeName,\n                        new THREE.InterleavedBufferAttribute(\n                                                buffer, itemSize, offset ) );\n\n                offset += itemSize;\n            }\n        }\n\n        return {\n            geometry:result, \n            triangulation:exporter.triangulation, \n            renderIndexing:exporter.renderIndexing, \n            triangulationChanged,\n            valueMap\n        };\n    },\n\n\n    _prepare: function(\n            polyMesh, outSpec, indicesMode, interleaved, exportTangents, prevData, prevTriangulation, prevIndexing) {\n\n        var exporter = new Exporter( polyMesh ),\n            mapsToExport = [];\n\n        var retriangulate = !prevData || !prevData.get('mesh') || !prevTriangulation \n            || prevData.get('mesh').positions.faceValueIndices!==polyMesh.positions.faceValueIndices;\n        var reIndex = !prevData || !prevData.get('mesh') || !prevIndexing;\n\n        var mapOffset = 0;\n        //console.log(polyMesh);\n        for ( var iter = new PolyMaps.Iterator( polyMesh ); iter.next(); ) {\n\n            var threeName = '',\n                itemSize = 3,\n                normalized = false;\n\n            switch ( iter.typeId ) {\n\n                case PolyMaps.TypePosition:\n                    threeName = 'position';\n                    break;\n\n                case PolyMaps.TypeTangent:\n                    // Note: Since tangents are normally ignored by the three.js\n                    // renderer, they must be requested explicitly.\n                    if ( ! exportTangents ) break;\n                    threeName = 'tangent';\n                    break;\n\n                case PolyMaps.TypeNormal:\n                    threeName = 'normal';\n                    break;\n\n                case PolyMaps.TypeUV:\n                    if ( iter.index >= 2 ) break; // max two UV maps\n                    threeName = 'uv' + (\n                            iter.index !== 0 ? iter.index + 1 : '' );\n                    itemSize = 2;\n                    break;\n\n                case PolyMaps.TypeColor:\n\n                    if ( iter.index >= 1 ) break; // use first color map\n                    threeName = 'color';\n                    normalized = true;\n\n            }\n\n            if ( ! threeName || ( interleaved && normalized ) ) continue;\n\n            var mapId = iter.getId();\n            mapsToExport.push( mapId ); \n\n            outSpec.push( {\n                mapId: mapId,\n                threeName: threeName,\n                itemSize: itemSize,\n                normalized: normalized\n            } );\n            ++mapOffset;\n\n        }\n\n        for(var i=0; i<outSpec.length && !reIndex;i++){\n            var oldMap = PolyMaps.resolveMap(prevData.get('mesh'), outSpec[i].mapId),\n            newMap = PolyMaps.resolveMap(polyMesh, outSpec[i].mapId);\n            if(oldMap.faceValueIndices!==newMap.faceValueIndices) reIndex = true;\n        }\n\n        //console.log(polyMesh===(prevData && prevData.get('mesh')));\n        if( indicesMode === ThreeExport.CompactIndices && !reIndex){\n            prevIndexing.mesh = polyMesh;\n            exporter.renderIndexing = prevIndexing;\n        } else if ( indicesMode === ThreeExport.CompactIndices && reIndex ) {\n\n            exporter.reindexForRendering( mapsToExport );\n        }\n        \n        var triangulationChanged = false;\n        if(retriangulate){\n          exporter.triangulate();\n          triangulationChanged = true;\n        } else {\n          exporter.triangulation = prevTriangulation;\n        }\n        return {exporter, triangulationChanged};\n    }\n\n};\n\nexport default ThreeExport;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/three/ThreeExport.js\n **/","import Arrays from '../../generic/utility/Arrays';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ScalarArrayView from '../../generic/container/ScalarArrayView';\nimport IndexMappings from '../../generic/algorithm/IndexMappings';\nimport RenderIndexing from '../algorithm/RenderIndexing';\nimport SimpleFanTriangulation from '../algorithm/SimpleFanTriangulation';\n\nexport default function Exporter ( polyMesh ) {\n\n  this.mesh = polyMesh;\n\n  this.triangulation = null;\n  this.renderIndexing = null;\n};\n\nExporter.prototype = {\n\n  constructor: Exporter,\n\n\n  reindexForRendering: function( optionalMapIdWhitelist ) {\n\n    if ( this.triangulation !== null )\n      throw Error( \"Reindex must come before triangulation!\" );\n\n    this.renderIndexing =\n        new RenderIndexing( this.mesh, optionalMapIdWhitelist );\n\n    return this;\n  },\n\n  triangulate: function( optionalTriangulationType ) {\n\n    var triangulationType =\n        optionalTriangulationType || SimpleFanTriangulation;\n\n    this.triangulation =\n        new triangulationType( this.mesh, this.renderIndexing );\n\n    return this;\n  },\n\n\n  getNumFaces: function() {\n\n    var triangulation = this.triangulation;\n\n    return triangulation === null ? this.mesh.getNumFaces() :\n        triangulation.numTriangles;\n  },\n\n  getNumFaceVertices: function() {\n\n    return this.triangulation === null ?\n        this.mesh.getNumFaceVertices() : this.getNumFaces() * 3;\n  },\n\n  getNumMapValues: function( mapId ) {\n\n    var renderIndexing = this.renderIndexing;\n\n    return renderIndexing !== null ?\n        renderIndexing.numVertices :\n        this.mesh.getMapById( mapId ).values.length;\n  },\n\n\n  getFaceArities: function(\n      optionalArrayOrType, optionalOffset, optionalStride ) {\n\n    if ( this.triangulation !== null )\n      throw Error( \"No face arity export for triangular meshes!\" );\n\n    var result = new ScalarArrayView( this.getNumFaces(),\n          optionalArrayOrType, optionalOffset, optionalStride ),\n\n      offsets = this.mesh.faceRangeOffsets,\n      nOffsets = offsets.length;\n\n    if ( nOffsets > 1 ) {\n\n      var prevOffset = offsets[ 0 ];\n\n      for ( var i = 1; i !== nOffsets; ++ i ) {\n\n        var offset = offsets[ i ];\n        result.setAt( i - 1, offset - prevOffset );\n        prevOffset = offset;\n      }\n\n    }\n\n    return result.data;\n  },\n\n  getMaterialIds: function(\n      optionalArrayOrType, optionalOffset, optionalStride ) {\n\n    var result = null,\n      source = this.mesh.materialIDs;\n\n    if ( source === null ) return null;\n\n    if ( this.triangulation === null ) {\n\n      var offset = optionalOffset || 0,\n        stride = optionalStride || 1,\n        arrayOrType = optionalArrayOrType || source.data.constructor;\n\n      if ( offset === 0 && stride === 1 &&\n          arrayOrType === source.data.constructor )\n\n        return source;\n\n      result = new ScalarArrayView(\n          source.length, arrayOrType, offset, stride );\n\n      result.fromArray( source );\n\n    } else {\n\n      this.triangulation.translateMaterialIds( source, result );\n\n    }\n\n    return result.data;\n  },\n\n  getMapValues: function( mapId,\n      optionalArrayOrType, optionalOffset, optionalStride ) {\n\n    var result = null,\n      renderIndexing = this.renderIndexing,\n\n      source = this.mesh.getMapById( mapId ).values,\n      type = source.type,\n\n      offset = optionalOffset || 0,\n      stride = optionalStride || type.InstanceScalarSize,\n      arrayOrType = optionalArrayOrType || source.data.constructor;\n\n    if ( renderIndexing === null &&\n        ( offset === 0 ) &&\n        ( stride === type.InstanceScalarSize ) &&\n        ( arrayOrType === source.data.constructor ) )\n\n      result = source; // compatible format, just expose the data\n\n    else {\n\n      var length = renderIndexing === null ?\n          source.length : renderIndexing.numVertices;\n\n      result = this._offsetObjects(\n          type, length, arrayOrType, offset, stride );\n\n      if ( renderIndexing !== null ) {\n\n        renderIndexing.getMapValues( mapId, result );\n\n      } else {\n\n        result.fromArray( source.data );\n\n      }\n    }\n\n    return result.data;\n  },\n\n  getMapIndices: function( mapId,\n      optionalArrayOrType, optionalOffset, optionalStride ) {\n\n    var result = null,\n\n      renderIndexing = this.renderIndexing,\n      triangulation = this.triangulation,\n\n      source = renderIndexing !== null ?\n          renderIndexing.renderIndices :\n          this.mesh.getMapById( mapId ).faceValueIndices;\n\n    if ( triangulation === null ) {\n\n      var offset = optionalOffset || 0,\n        stride = optionalStride || 1,\n        arrayOrType = optionalArrayOrType || source.constructor;\n\n      if ( offset === 0 && stride === 1 &&\n          arrayOrType === source.constructor )\n\n        return source;\n\n      result = new ScalarArrayView(\n          source.length, arrayOrType, offset, stride );\n\n      result.fromArray( source );\n\n    } else {\n\n      result = new ScalarArrayView(\n          this.triangulation.numTriangles * 3,\n          optionalArrayOrType, optionalOffset, optionalStride );\n\n      triangulation.translateIndices( source, result );\n\n    }\n\n    return result.data;\n  },\n\n  getUnindexedMapValues: function( mapId, allowTriangulation,\n      optionalArrayOrType, optionalOffset, optionalStride ) {\n\n    var result = null,\n      polyMap = this.mesh.getMapById( mapId ),\n      values = polyMap.values,\n      valueType = values.type,\n      indices = polyMap.faceValueIndices,\n      triangulation = this.triangulation;\n\n    if ( ! allowTriangulation || triangulation === null ) {\n\n      result = this._offsetObjects(\n            valueType, indices.length,\n            optionalArrayOrType || values.data.constructor,\n            optionalOffset, optionalStride );\n\n      var temp = values.newRangeArray( 1 );\n\n      for ( var i = 0, n = indices.length; i !== n; ++ i )\n\n        result.arrayToRange(\n            values.rangeToArray( indices[ i ], 1, temp ), i, 1 );\n\n    } else {\n\n      result = this._offsetObjects(\n            valueType, triangulation.numTriangles * 3,\n            optionalArrayOrType || values.data.constructor,\n            optionalOffset, optionalStride );\n\n      triangulation.\n          translateToUnindexedValues( values, result, indices );\n    }\n\n    return result.data;\n  },\n\n  getTriangulatingIndices: function(\n      optionalArrayOrType, optionalOffset, optionalStride ) {\n\n    var triangulation = this.triangulation;\n\n    if ( triangulation === null ) return null;\n\n    var result = new ScalarArrayView( this.getNumFaceVertices(),\n        optionalArrayOrType, optionalOffset, optionalStride ),\n\n      nFaceVertices = this.getNumFaceVertices(),\n      identityMap = IndexMappings.identityForReading( nFaceVertices );\n\n    triangulation.translateIndices( identityMap, result );\n\n    return result.data;\n  },\n\n\n  _offsetObjects: function(\n      type, length, arrayOrType, optionalOffset, optionalStride ) {\n\n    var offset = optionalOffset || 0,\n      stride = optionalStride || type.InstanceScalarSize,\n\n      offsetLength = offset / stride | 0,\n      minArrayLength = ( offsetLength + length ) * stride,\n      array = Arrays.maybeCreate( arrayOrType, minArrayLength ),\n      offsetView = offset === 0 ? array : array.subarray( offset );\n\n    return new ObjectArrayView( type, null, offsetView, stride );\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/tool/Exporter.js\n **/","import PolyMaps from '../model/PolyMaps';\n\nexport default function RenderIndexing( polyMesh, optionalMapIdWhitelist ) {\n\n  var mapIds = [],\n    mapStates = [];\n\n  for ( var iter = new PolyMaps.Iterator( polyMesh ); iter.next(); ) {\n\n    var map = iter.element,\n      mapId = iter.getId();\n\n    if ( optionalMapIdWhitelist &&\n        optionalMapIdWhitelist.indexOf( mapId ) === -1 ) continue;\n\n    mapIds.push( mapId );\n\n    mapStates.push( {\n      map: map,\n      faceIndices: map.updateInverseIndex().valueFaceIndices,\n      facesOffset: 0\n    } );\n  }\n\n  // Processing face vertices, an n-way MERGE-like step is performed to\n  // identify a previously processed face that uses the same combination\n  // of value indices. Forward processing and the sorted nature of the\n  // inverse PolyMap indices allow this algorithm to be very efficient.\n\n  var nFaceVertices = polyMesh.getNumFaceVertices(),\n    nMaps = mapStates.length,\n\n    renderIndices = new Uint32Array( nFaceVertices ),\n    valueIndices = new Uint32Array( nFaceVertices * nMaps ),\n    writeOffset = 0,\n    nVertices = 0,\n\n    faceRangeOffsets = polyMesh.faceRangeOffsets,\n    faceIndex = -1,\n    nextFaceStart = 0,\n\n    pivotState = mapStates[ nMaps - 1 ],\n    pivotFaces = pivotState.faceIndices,\n    mapScanStart = nMaps - 2;\n\n  for ( var i = 0; i !== nFaceVertices; ++ i ) {\n\n    if ( i === nextFaceStart )\n      nextFaceStart = faceRangeOffsets[ ++ faceIndex + 1 ];\n\n    // Try to find a face before this one that already uses all the\n    // values for this vertex:\n\n    var reusePossible = true,\n      reuseFromFace = 0;\n\n    for ( var j = 0; j !== nMaps; ++ j ) {\n\n      var mapState = mapStates[ j ],\n        map = mapState.map,\n        valueIndex = map.faceValueIndices[ i ];\n\n      // Speculatively write data:\n      valueIndices[ writeOffset + j ] = valueIndex;\n\n      if ( reusePossible ) {\n\n        var facesBegin = map.valueFaceIndexOffsets[ valueIndex ],\n          firstFaceIndex = map.valueFaceIndices[ facesBegin ];\n\n        // Speculatively prepare the scanning state:\n        mapState.facesOffset = facesBegin;\n\n        // Early-out when a value index is used for the first time:\n        reusePossible = ( firstFaceIndex !== faceIndex );\n      }\n\n    }\n\n    if ( reusePossible ) {\n\n      var pivotFaceIdxPos = pivotState.facesOffset,\n        pivotFaceIndex = 0,\n        pivotFaceGood = true;\n\n      do {\n\n        pivotFaceIndex = pivotFaces[ pivotFaceIdxPos ++ ];\n        pivotFaceGood = ( pivotFaceIndex !== faceIndex );\n        reusePossible = pivotFaceGood;\n\n        for ( var j = mapScanStart;\n            pivotFaceGood && j !== -1; -- j ) {\n\n          var mapState = mapStates[ j ],\n            faceIdxPos = mapState.facesOffset,\n            faceIndices = mapState.faceIndices,\n            candidate = faceIndices[ faceIdxPos ];\n\n          while ( candidate < pivotFaceIndex )\n            candidate = faceIndices[ ++ faceIdxPos ];\n\n          if ( candidate !== pivotFaceIndex ) pivotFaceGood = false;\n          if ( candidate === faceIndex ) reusePossible = false;\n          else mapState.facesOffset = faceIdxPos;\n\n          // Note that the next pivot face will have a higher index\n          // and that we'll see the current face when out of input.\n          // Also note that the pivot face has a lower index than\n          // the current face.\n\n        }\n\n      } while ( reusePossible && ! pivotFaceGood );\n\n      reusePossible = pivotFaceGood;\n      reuseFromFace = pivotFaceIndex;\n\n    }\n\n    if ( reusePossible ) {\n\n      var positionMap = mapStates[ 0 ].map,\n        faceVertexIndex = positionMap.findValueIndexOffset(\n            reuseFromFace, positionMap.faceValueIndices[ i ] ),\n\n        reuseIndex = renderIndices[ faceVertexIndex ];\n\n      renderIndices[ i ] = reuseIndex;\n\n    } else {\n\n      renderIndices[ i ] = nVertices ++;\n      writeOffset += nMaps;\n\n    }\n  }\n\n  this.mesh = polyMesh;\n  this.mapIds = mapIds;\n  this.renderIndices = renderIndices;\n  this.valueIndices = valueIndices.slice( 0, writeOffset );\n  this.numVertices = nVertices;\n\n};\n\nRenderIndexing.prototype = {\n\n  constructor: RenderIndexing,\n\n  getMapValues: function( mapId, targetView ) {\n\n    var mapIds = this.mapIds,\n      mapIndex = mapIds.indexOf( mapId ),\n      nVertices = this.numVertices,\n      valueIndices = this.valueIndices;\n\n    if ( mapIndex === -1 )\n      throw Error( \"Map with id '\" + mapId + \"' not found!\" );\n\n    var map = PolyMaps.resolveMap( this.mesh, mapId ),\n      mapValues = map.values;\n\n    if ( targetView.length < nVertices )\n      throw Error( \"Data won't fit!\" );\n\n    var viOffset = mapIndex,\n      viStride = mapIds.length,\n\n      tmp = new targetView.type();\n\n    for ( var i = 0; i !== nVertices; ++ i ) {\n\n      var valueIndex = valueIndices[ viOffset + i * viStride ];\n      targetView.setAt( i, mapValues.getAt( valueIndex, tmp ) );\n\n    }\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/algorithm/RenderIndexing.js\n **/","import THREE from 'three';\n\nexport default function SimpleFanTriangulation ( mesh ) {\n\n  this.mesh = mesh;\n\n  var nTriangles = 0,\n\n    faceOffsets = mesh.faceRangeOffsets,\n    faceBegin = faceOffsets[ 0 ],\n    maxNumVerticesPerFace = 0;;\n\n  for ( var i = 1, n = faceOffsets.length; i < n; ++ i ) {\n\n    var faceUntil = faceOffsets[ i ],\n      nVertices = faceUntil - faceBegin;\n\n    if ( nVertices >= 3 ) nTriangles += nVertices - 2;\n\n    maxNumVerticesPerFace = Math.max( maxNumVerticesPerFace, nVertices );\n\n    faceBegin = faceUntil;\n  }\n\n  this.startFaceIndices = this.getStartFaceIndices( mesh.positions, maxNumVerticesPerFace );\n  //console.log( 'this.startFaceIndices', this.startFaceIndices );\n\n  this.numTriangles = nTriangles;\n};\n\nSimpleFanTriangulation.prototype = {\n\n  constructor: SimpleFanTriangulation,\n\n  getStartFaceIndices: function( positionsPolyMap, maxNumVerticesPerFace ) {\n\n    //return an array of size faces, that says which face vertex index to use as the starting vertex in simple fan triangulation.\n    // you will want return the first convex vertex face vertex index (in the range 0 to number of vertices in that face), if there is one\n    // otherwise you can return 0.\n\n    var faceOffsets = this.mesh.faceRangeOffsets;\n\n    var numFaces = this.mesh.faceRangeOffsets.length - 1;\n    var startFaceIndices = new Uint32Array( numFaces );\n        var faceEdgeSign = new Float32Array( maxNumVerticesPerFace );\n\n    var faceValueIndices = positionsPolyMap.faceValueIndices;\n    var positionValues = positionsPolyMap.values;\n\n    var dPrev = new THREE.Vector3();\n    var d = new THREE.Vector3();\n    var dNext = new THREE.Vector3();\n    var dTemp;\n\n    var pPrev = new THREE.Vector3();\n    var p = new THREE.Vector3();\n    var pNext = new THREE.Vector3();\n    var pNextNext = new THREE.Vector3();\n    var pTemp;\n\n    var cpTemp;\n    var cp = new THREE.Vector3();\n    var cpNext = new THREE.Vector3();\n\n    for ( var i = 0, il = faceOffsets.length - 1; i < il; ++ i ) {\n\n      var faceBegin = faceOffsets[ i ]\n      var faceUntil = faceOffsets[ i + 1 ];\n      var numFaceVertices = faceUntil - faceBegin;\n\n      if( numFaceVertices <= 3 ) {\n        continue;\n      }\n      \n      var vPrev;\n      var v = faceValueIndices[ faceBegin + ( numFaceVertices - 1 ) ];\n      var vNext = faceValueIndices[ faceBegin ];\n      var vNextNext = faceValueIndices[ faceBegin + ( 1 % numFaceVertices ) ];\n\n      positionValues.getAt( v, p );\n      positionValues.getAt( vNext, pNext );\n      positionValues.getAt( vNextNext, pNextNext );\n\n      d.copy( pNext ).sub( p );\n      dNext.copy( pNextNext ).sub( pNext );\n\n      cpNext.copy( dNext ).cross( d );\n\n      for ( var j = 0; j < numFaceVertices; ++ j ) {\n\n        vPrev = v;\n        v = vNext;\n        vNext = vNextNext;\n        vNextNext = faceValueIndices[ faceBegin + (( j + 2 ) % numFaceVertices ) ];\n\n        pTemp = pPrev;\n        pPrev = p;\n        p = pNext;\n        pNext = pNextNext;\n        pNextNext = pTemp;\n        positionValues.getAt( vNextNext, pNextNext );\n\n        dTemp = dPrev;\n        dPrev = d;\n        d = dNext;\n        dNext = dTemp;\n        dNext.copy( pNextNext ).sub( pNext );\n\n        cpTemp = cp;\n        cp = cpNext;\n        cpNext = cpTemp;\n        cpNext.copy( dNext ).cross( d );\n\n        var sign = cp.dot( cpNext );\n\n        faceEdgeSign[ j ] = sign;\n      }\n\n      //console.log( 'faceEdgeSign for face: ', i, faceEdgeSign );\n\n      for ( var j = 0; j < numFaceVertices; ++ j ) {\n        var sign = faceEdgeSign[ j ];\n        var signNext = faceEdgeSign[ ( j + 1 ) % numFaceVertices ];\n        if( sign >= 0 && signNext >= 0 ) {\n          startFaceIndices[ i ] = ( j + 1 ) % numFaceVertices;\n          break;\n        }\n      }\n    }\n\n    return startFaceIndices;\n  },\n\n  translateIndices: function( inputArray, outputView ) {\n\n    var faceOffsets = this.mesh.faceRangeOffsets,\n      faceBegin = faceOffsets[ 0 ],\n      outputArray = outputView.data,\n      writeIndex = outputView.offset,\n      stride = outputView.stride;\n\n    for ( var i = 1, e = faceOffsets.length; i < e; ++ i ) {\n\n      var faceUntil = faceOffsets[ i ];\n      var numFaceVertices = faceUntil- faceBegin;\n      var startOffset = this.startFaceIndices[ i-1 ];\n\n      for ( var j = 0; j < numFaceVertices - 2; ++ j ) {\n\n        outputArray[ writeIndex ] = inputArray[ faceBegin + startOffset ];\n        writeIndex += stride;\n\n        outputArray[ writeIndex ] = inputArray[ faceBegin + ( startOffset + j + 1 ) % numFaceVertices ];\n        writeIndex += stride;\n\n        outputArray[ writeIndex ] = inputArray[ faceBegin + ( startOffset + j + 2 ) % numFaceVertices ];\n        writeIndex += stride;\n      }\n\n      faceBegin = faceUntil;\n    }\n  },\n\n  translateMaterialIds: function( outputView ) {\n\n    var faceOffsets = this.mesh.faceRangeOffsets,\n      inputArray = this.mesh.materialIds,\n      faceBegin = faceOffsets[ 0 ];\n\n    for ( var i = 1, j = 0, n = faceOffsets.length; i < n; ++ i ) {\n\n      var materialId = inputArray[ i - 1 ],\n\n        faceUntil = faceOffsets[ i ],\n        nVertices = faceUntil - faceBegin,\n\n        nTriangles = nVertices >= 3 ? nVertices - 2 : 0;\n\n      for ( var writeUntil = writeIndex + nTriangles * stride;\n          writeIndex !== writeUntil; writeIndex += stride  )\n\n        outputArray[ writeIndex ] = materialId;\n\n      faceBegin = faceUntil;\n    }\n  },\n\n  translateToUnindexedValues: function( inputView, outputView, indices ) {\n\n    var faceOffsets = this.mesh.faceRangeOffsets,\n      faceBegin = faceOffsets[ 0 ],\n      writeIndex = 0,\n      temp = inputView.newRangeArray( 1 );\n\n    for ( var i = 1, e = faceOffsets.length; i < e; ++ i ) {\n\n      var faceUntil = faceOffsets[ i ];\n      var numFaceVertices = faceUntil- faceBegin;\n      var startOffset = this.startFaceIndices[ i-1 ];\n\n      for ( var j = 0; j < numFaceVertices - 2; ++ j ) {\n\n        outputView.arrayToRange( inputView.rangeToArray(\n            indices[ faceBegin + startOffset ], 1, temp ), writeIndex, 1 );\n\n        outputView.arrayToRange( inputView.rangeToArray(\n            indices[ faceBegin + ( startOffset + j + 1 ) % numFaceVertices ], 1, temp ), writeIndex + 1, 1 );\n\n        outputView.arrayToRange( inputView.rangeToArray(\n            indices[ faceBegin + ( startOffset + j + 2 ) % numFaceVertices ], 1, temp ), writeIndex + 2, 1 );\n\n        writeIndex += 3;\n\n      }\n\n      faceBegin = faceUntil;\n    }\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/algorithm/SimpleFanTriangulation.js\n **/","import { List } from 'immutable';\nimport THREE from 'three';\nimport subdivision2 from '../../polyMesh/geometric/operator/subdivision2';\n\nconst MeshSmooth = {\n  schema: {\n    subdivisions: { label: 'Subdivisions', type: 'Number', defaultValue: 1, minValue: 0, maxValue: 4 },\n    hardEdges: { label: 'Hard Edges', type: 'Boolean', defaultValue: false }\n  },\n\n  update: function(operator, primitive) {\n    const mesh = primitive.get('mesh');\n    return mesh ? primitive.set('mesh', subdivision2(mesh)) : primitive;\n  }\n}\n\nexport default MeshSmooth;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/MeshSmooth.js\n **/","import ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ObjectsByName from '../../generic/container/ObjectsByName';\nimport PolyMap from '../model/PolyMap';\nimport PolyMesh from '../model/PolyMesh';\nimport polyMeshValidation from './polyMeshValidation';\nimport removeDuplicateNormals from './removeDuplicateNormals';\n\nexport default function subdivision3( mesh ) {\n\n  // based on theory given on pages 623-624 of \"Real-Time Rendering\"\n  const subdividePolyMap = function( polyMap, newFaceRangeOffsets, faceEdgeCreases, faceValueCorners ) {\n\n    const edgeVertexAdjacency = polyMap.edgeVertexAdjacency;\n    const valueAdjacency = polyMap.valueAdjacency;\n    const faceEdgeAdjacency = polyMap.faceEdgeAdjacency;\n    /*\n    if(!faceEdgeAdjacency.checkValidity()){\n      throw 'This polymap contains an invalid surface and cannot be subdivided. Edge Adjacency will fail.';\n    }//*/\n\n    const values = polyMap.values;\n    const valueType = values.type;\n    const numValues = values.length;\n    const faceRangeOffsets = polyMap.faceRangeOffsets;\n    const numFaces = faceRangeOffsets.length - 1;\n    const faceValueIndices = polyMap.faceValueIndices;\n    const numEdges = edgeVertexAdjacency.getNumEdges();\n\n    const numNewFaces = faceValueIndices.length;\n\n    const vertexCorners = new Uint8Array( polyMap.values.length );\n    for(let i = 0; i<faceValueCorners.length; i++ ){\n      vertexCorners[faceValueIndices[i]] = faceValueCorners[i];\n    }\n\n    if( ! newFaceRangeOffsets ) {\n      newFaceRangeOffsets = new Uint32Array( numNewFaces + 1 );\n      for( let f = 0; f < newFaceRangeOffsets.length; f ++ ) {\n        newFaceRangeOffsets[ f ] = f * 4;\n      }\n    }\n\n    const numNewFaceValueIndices = numNewFaces * 4;\n    const newFaceValueIndices = new Uint32Array( numNewFaceValueIndices );\n\n    // pre allocate all new vertices\n    //    updated vertices (V) + edge centroids (E) + face centroids (V)\n    const edgeOffset = numValues;\n    const faceOffset = edgeOffset + numEdges;\n    const numNewValues = numValues + numEdges + numFaces;\n    const newValues = new ObjectArrayView( valueType, numNewValues );\n\n    const valueEdgeValence = new Uint8Array( numValues );\n    const valueFaceValence = new Uint8Array( numValues );\n    const edgeFaceValence = new Uint8Array( numEdges );\n    const edgeUnique = new Uint8Array( numEdges );\n\n    const tempFaceCentroid = new valueType();\n    const tempValue = new valueType();\n    const tempNextValue = new valueType();\n    const tempEdgeCentroid = new valueType();\n    const tempConnectedValue = new valueType();\n    const tempConnectedFace = new valueType();\n\n    let nf = 0;\n\n    const edgeCreases = new Uint8Array( numEdges );\n    const valueCreases = new Uint8Array( numValues );\n\n    for( let f = 0; f < numFaces; f ++ ) {\n\n      const faceBegin = faceRangeOffsets[ f ];\n      const faceUntil = faceRangeOffsets[ f + 1 ];\n      const numFaceValues = faceUntil - faceBegin;\n\n      let vNext = faceValueIndices[ faceBegin ];\n      let vNextNext = faceValueIndices[ faceBegin + 1 % numFaceValues ];\n\n      let eNext = edgeVertexAdjacency.findEdgeId( vNext, vNextNext );\n\n      // calculate face centroid\n      tempFaceCentroid.multiplyScalar( 0.0 );\n\n      for( let fv = 0; fv < numFaceValues; fv ++ ) {\n\n        const v = vNext;\n        vNext = vNextNext;\n        vNextNext = faceValueIndices[ faceBegin + ( (fv+2)%numFaceValues ) ];\n\n        const e = eNext;\n        eNext = edgeVertexAdjacency.findEdgeId( vNext, vNextNext );\n\n        edgeFaceValence[ e ] ++;\n        valueFaceValence[ v ] ++;\n\n        // is this the first time processing this edge\n        if( edgeUnique[ e ] == 0 ) {\n          edgeUnique[ e ] = 1;\n\n          valueEdgeValence[ v ] ++;\n          valueEdgeValence[ vNext ] ++;\n\n          if( faceEdgeCreases[ faceBegin + fv ] ) {\n            edgeCreases[ e ] = 1;\n            valueCreases[ v ] ++;\n            valueCreases[ vNext ] ++;\n          }\n        }\n\n        values.getAt( v, tempValue );\n        tempFaceCentroid.add( tempValue );\n\n        newFaceValueIndices[ nf ++ ] = edgeOffset + e;\n        newFaceValueIndices[ nf ++ ] = vNext;\n        newFaceValueIndices[ nf ++ ] = edgeOffset + eNext;\n        newFaceValueIndices[ nf ++ ] = faceOffset + f;\n      }\n\n      tempFaceCentroid.multiplyScalar( 1.0 / numFaceValues );\n      newValues.setAt( faceOffset + f, tempFaceCentroid );\n    }\n    // create new edges\n    for( let e = 0; e < numEdges; e ++ ) {\n\n      const v = edgeVertexAdjacency.edgeVertices[ e*2 ];\n      const vNext = edgeVertexAdjacency.edgeVertices[ e*2+1 ];\n\n      values.getAt( v, tempEdgeCentroid );\n      values.getAt( vNext, tempValue );\n      tempEdgeCentroid.add( tempValue );\n      let numNeighbors = 2;\n\n      const edgeFaceCount = faceEdgeAdjacency.edgeFaceCounts[ e ];\n\n      if( !edgeCreases[ e ] && edgeFaceCount === 2 ) {\n\n        //if the edge contains 2 corners do not average with face\n        if( ! ( vertexCorners[ v ] && vertexCorners[ vNext ] ) ) {\n\n          for( let ef = 0; ef < edgeFaceCount; ef ++ ) {\n            const f = faceEdgeAdjacency.edgeFaceIndices[ e*2 + ef ];\n            newValues.getAt( faceOffset + f, tempValue );\n            tempEdgeCentroid.add( tempValue );\n            numNeighbors ++;\n          }\n        }\n      }\n      tempEdgeCentroid.multiplyScalar( 1.0 / numNeighbors );\n\n      newValues.setAt( edgeOffset + e, tempEdgeCentroid );\n    }\n\n    const useBoundaryValues = true;\n\n    // create new values\n    for( let v = 0; v < numValues; v ++ ) {\n\n      values.getAt( v, tempNextValue );\n\n      const boundaryValue = valueEdgeValence[v] !== valueFaceValence[v];\n\n      if( valueEdgeValence[v] === 0 || vertexCorners[ v ] ) {\n        // do nothing, keep original value unmodified.\n      }\n      else if( useBoundaryValues && boundaryValue || valueCreases[v]) {\n\n        // sum of connected boundary vertices.\n        const valueBegin = valueAdjacency.valueEdgeOffsets[ v ];\n        const valueUntil = valueAdjacency.valueEdgeOffsets[ v + 1 ];\n        const numValueEdges = valueUntil - valueBegin;\n\n        tempConnectedValue.multiplyScalar( 0.0 );\n        let numConnectedValues = 0;\n\n        for( let ve = 0; ve < numValueEdges; ve ++ ) {\n\n          const e = valueAdjacency.valueEdgeIndices[ valueBegin + ve ];\n          if( edgeCreases[ e ] ) {\n            let vOther = edgeVertexAdjacency.edgeVertices[ e*2 ];\n            if( vOther === v ) {\n              vOther = edgeVertexAdjacency.edgeVertices[ e*2+1 ];\n            }\n            values.getAt( vOther, tempValue );\n            tempConnectedValue.add( tempValue );\n            numConnectedValues ++;\n          }\n\n        }\n        tempNextValue.multiplyScalar( 0.75 ).add( tempConnectedValue.multiplyScalar( 0.25 / numConnectedValues ) );\n      }\n      else {\n\n        // sum of connected vertices.\n        const valueBegin = valueAdjacency.valueEdgeOffsets[ v ];\n        const valueUntil = valueAdjacency.valueEdgeOffsets[ v + 1 ];\n        const numValueEdges = valueUntil - valueBegin;\n\n        tempConnectedValue.multiplyScalar( 0.0 );\n        let numConnectedValues = 0;\n\n        for( let ve = 0; ve < numValueEdges; ve ++ ) {\n\n          const e = valueAdjacency.valueEdgeIndices[ valueBegin + ve ];\n          let vOther = edgeVertexAdjacency.edgeVertices[ e*2 ];\n          if( vOther == v ) {\n            vOther = edgeVertexAdjacency.edgeVertices[ e*2+1 ];\n          }\n          values.getAt( vOther, tempValue );\n          tempConnectedValue.add( tempValue );\n          numConnectedValues ++;\n        }\n\n        tempConnectedValue.multiplyScalar( 1 / ( numConnectedValues * numConnectedValues ) );\n\n        const valueBeginF = valueAdjacency.valueFaceOffsets[ v ];\n        const valueUntilF = valueAdjacency.valueFaceOffsets[ v + 1 ];\n        const numValueFacesF = valueUntilF - valueBeginF;\n\n        tempConnectedFace.multiplyScalar( 0.0 );\n        let numConnectedFaces = 0;\n\n        for( let vf = 0; vf < numValueFacesF; vf ++ ) {\n\n          const f = valueAdjacency.valueFaceIndices[ valueBeginF + vf ];\n          newValues.getAt( faceOffset + f, tempValue );\n          tempConnectedFace.add( tempValue );\n          numConnectedFaces ++;\n        }\n\n        tempConnectedFace.multiplyScalar( 1 / ( numConnectedFaces * numConnectedFaces ) );\n\n        tempNextValue.multiplyScalar( ( numConnectedFaces - 2 ) / numConnectedFaces );\n        tempNextValue.add( tempConnectedValue );\n        tempNextValue.add( tempConnectedFace );\n\n      }\n      newValues.setAt( v, tempNextValue );\n\n    }\n\n    const pm = {\n      faceRangeOffsets: newFaceRangeOffsets,\n      faceValueIndices: newFaceValueIndices,\n      values: newValues\n    };\n\n    return new PolyMap( pm );\n  };\n\n  polyMeshValidation( mesh );\n  const polyMesh = removeDuplicateNormals( mesh );\n\n  const faceEdgeCreases = ( polyMesh.normalMap ) ? getFaceEdgeCreases( polyMesh.normalMap ) : new Uint8Array( polyMesh.positions.faceValueIndices.length );\n  const faceValueCorners = getValueCorners( polyMesh.positions, faceEdgeCreases );\n\n  const results = {};\n  results.positions = subdividePolyMap( polyMesh.positions, null, faceEdgeCreases, faceValueCorners );\n  results.faceRangeOffsets = results.positions.faceRangeOffsets;\n\n  if( polyMesh.normalMap ) {\n    results.normalMap = subdividePolyMap( polyMesh.normalMap, results.faceRangeOffsets, faceEdgeCreases, faceValueCorners );\n  }\n\n  if( polyMesh.uvMaps ) {\n    const uvMaps = new ObjectsByName();\n    for( let i = 0; i < polyMesh.uvMaps.length; i ++ ) {\n      const name = polyMesh.uvMaps.namesByIndex[i];\n      const uvEdgeCreases = getFaceEdgeCreases( polyMesh.uvMaps.byName[ name ] );\n      uvMaps.set( name, subdividePolyMap( polyMesh.uvMaps.byName[ name ], results.faceRangeOffsets, uvEdgeCreases, faceValueCorners ));\n    }\n    results.uvMaps = uvMaps;\n  }\n\n  return new PolyMesh( results );\n};\n\nconst getFaceEdgeCreases = function( polyMap ) {\n\n  const faceEdgeCreases = new Uint8Array( polyMap.faceValueIndices.length );\n  const faceEdgeAdjacency = polyMap.faceEdgeAdjacency;\n\n  for( let fe = 0; fe < faceEdgeAdjacency.faceEdgeIndices.length; fe ++ ) {\n    const edgeIndex = faceEdgeAdjacency.faceEdgeIndices[fe];\n    faceEdgeCreases[ fe ] = ( faceEdgeAdjacency.edgeFaceCounts[ edgeIndex ] !== 2 ) ? 1 : 0;\n  }\n  return faceEdgeCreases;\n};\n\nconst getValueCorners = function( polyMap, faceEdgeCreases ) {\n\n  //converted to track indices that are corners instead of values\n  const faceValueCorners = new Uint8Array( polyMap.faceValueIndices.length );\n\n  const edgeVertexAdjacency = polyMap.edgeVertexAdjacency;\n\n  const valueCreaseEdgeCount = new Uint8Array( polyMap.values.length );\n  const edgeProcessed = new Uint8Array( edgeVertexAdjacency.getNumEdges() );\n\n  for( let f = 0; f < polyMap.faceRangeOffsets.length - 1; f ++ ) {\n\n    const faceBegin = polyMap.faceRangeOffsets[ f ];\n    const faceUntil = polyMap.faceRangeOffsets[ f + 1 ];\n    const numFaceValues = faceUntil - faceBegin;\n\n    let vNext = polyMap.faceValueIndices[ faceBegin ];\n\n    for( let fv = 0; fv < numFaceValues; fv ++ ) {\n\n      const v = vNext;\n      vNext = polyMap.faceValueIndices[ faceBegin + (fv+1)%numFaceValues ];\n\n      const e = edgeVertexAdjacency.findEdgeId( v, vNext );\n      if( edgeProcessed[ e ] === 0 ) {\n        edgeProcessed[ e ] = 1;\n\n        if( faceEdgeCreases[ faceBegin + fv ] ) {\n          valueCreaseEdgeCount[ v ] ++;\n          valueCreaseEdgeCount[ vNext ] ++;\n        }\n\n      }\n\n    }\n\n  }\n\n  for( let i = 0; i < faceValueCorners.length; i ++ ) {\n    const valueIndex = polyMap.faceValueIndices[ i ];\n    if( valueCreaseEdgeCount[ valueIndex ] > 2 ) {\n      faceValueCorners[i] = 1;\n    }\n  }\n\n  return faceValueCorners;\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/operator/subdivision2.js\n **/","import ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ObjectsByName from '../../generic/container/ObjectsByName';\nimport PolyMap from '../model/PolyMap';\nimport PolyMesh from '../model/PolyMesh';\n\nconst isVec3NaN = function( v ) {\n  return isNaN( v.x ) || isNaN( v.y ) || isNaN( v.z );\n};\nconst isVec3Zero = function( v ) {\n  return v.length() === 0;\n};\n\nconst isVec2NaN = function( v ) {\n  return isNaN( v.x ) || isNaN( v.y );\n};\n\nconst validateValues = function( polyMapName, values, validationFunc ) {\n  //console.log( polyMapName, values.length );\n  const temp = new (values.type)();\n  const replacement = new (values.type)();\n  for( let i = 0; i < values.length; i ++ ) {\n    values.getAt( i, temp );\n    if( ! validationFunc( temp ) ) {\n      //console.log( \"  badValue at \" + i + \" is \", temp );\n      values.setAt( i, replacement );\n    }\n  }\n}\nexport default function polyMeshValidation( mesh ) {\n\n  validateValues( \"positions\", mesh.positions.values, function( v ) { return ! isVec3NaN( v ); } );\n  if( mesh.normalMap ) {\n    validateValues( \"normalMap\", mesh.normalMap.values, function( v ) { return ! isVec3NaN( v ) && ! isVec3Zero( v ); } );\n  }\n  if( mesh.uvMaps ) {\n    const uvMaps = new ObjectsByName();\n    for( let i = 0; i < mesh.uvMaps.length; i ++ ) {\n      let name = mesh.uvMaps.namesByIndex[i];\n      validateValues( \"uvMap[\" + name + \"]\", mesh.uvMaps.byName[ name ].values, function( v ) { return ! isVec2NaN( v ); } );     \n    }\n  }\n\n  return mesh;\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/operator/polyMeshValidation.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ObjectBuffer from '../../generic/container/ObjectBuffer';\nimport PolyMesh from '../model/PolyMesh';\nimport PolyMap from '../model/PolyMap';\n\nexport default function removeDuplicateNormals( polyMesh, removeUnusedValues, withLogging ) {\n\n  if(!polyMesh.normalMap) return polyMesh;\n\n  const ru = removeUnusedValues || true;\n  const l = withLogging || false;\n\n  const faceValueIndices = polyMesh.positions.faceValueIndices;\n  const values = polyMesh.positions.values;\n\n  const normalFaceValueIndices = new Uint32Array(polyMesh.normalMap.faceValueIndices);\n  const normalValues = polyMesh.normalMap.values;\n\n  let duplicatesFound = 0;\n\n  let n1, n2;\n\n  //TODO bad nested array\n  const valuesToIndices = [];\n  for( let i = 0; i<values.length; i++){\n    valuesToIndices[i] = [];\n  }\n\n  for( let i = 0; i<faceValueIndices.length; i++){\n    valuesToIndices[faceValueIndices[i]].push(i);\n  }\n\n  //compares every normal on specific vertices to each other\n  //then remaps indices of normals that are the same\n  for( let i = 0; i<valuesToIndices.length; i++){\n    \n    for( let j = 0; j<valuesToIndices[i].length; j++){\n\n      n1 = normalFaceValueIndices[valuesToIndices[i][j]];\n      for( let k = 0; k<valuesToIndices[i].length; k++){\n\n        n2 = normalFaceValueIndices[valuesToIndices[i][j+k]];\n        if( n1 !== n2 && normalValues.getAt(n1).dot(normalValues.getAt(n2)) > 0.99){\n          normalFaceValueIndices[valuesToIndices[i][j+k]] = n1;\n          duplicatesFound++;\n        }\n\n      }\n    }\n  }\n  if(l) console.log('Normal Duplicates Found: ' + duplicatesFound);\n\n  let normals = normalValues;\n  if(ru && duplicatesFound){\n    let newNormalValuesBuffer = new ObjectBuffer(THREE.Vector3);\n    let isUsed = new Int32Array(normalValues.length);\n    isUsed.fill(-1);\n\n    let newNormalsCount = 0;\n    for( let i = 0; i<normalFaceValueIndices.length; i++){\n      if(isUsed[normalFaceValueIndices[i]] === -1){\n        newNormalValuesBuffer.push(normalValues.getAt(normalFaceValueIndices[i]));\n        isUsed[normalFaceValueIndices[i]] = newNormalsCount++;\n      }\n      normalFaceValueIndices[i] = isUsed[normalFaceValueIndices[i]];\n    }\n\n    let newNormalValues = new ObjectArrayView(THREE.Vector3, newNormalsCount);\n    newNormalValues.fromArray(newNormalValuesBuffer.toArray());\n\n    normals = newNormalValues;\n    if(l) console.log('' + normalValues.length + ' normal values reduced to ' + newNormalValues.length + ', duplicates removed: ' + (normalValues.length-newNormalValues.length));\n  }\n\n  const newNormals = new PolyMap( {\n    faceRangeOffsets: polyMesh.faceRangeOffsets,\n    faceValueIndices: normalFaceValueIndices,\n    values: normals\n  });\n\n  let resultMesh = new PolyMesh( polyMesh );\n  resultMesh.normalMap = newNormals;\n  return resultMesh;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/operator/removeDuplicateNormals.js\n **/","const filmSizes = {\n  \"-1\": \"[ Custom ]\",\n  \"35\": \"35mm\",\n  \"70\": \"IMAX\",\n  // TODO: add more of these!\n};\n\nconst viewType = {\n  values: [ 0, 1 ],\n  labels: [ \"Field of View\", \"Focal Length\" ]\n};\n\nconst Camera = {\n  schema: {\n    targeted: { label: 'Enable Look Target', type: 'Boolean', defaultValue: false },\n    focalDepthEnabled: { label: 'Use Focal Depth', type: 'Boolean', defaultValue: false },\n    focalDepth: { label: 'Focal Depth', type: 'Number', defaultValue: 100, minValue: 0.001, animatable: true, hidden: true },\n\n    axisDirection: { type: 'Object', hidden: true},\n    zoomAxis: { type: 'Object', hidden: true},\n    //size: { type: 'Object', hidden: true},  // Call getSize() to access this field, and call viewport.getViewRect(() for view resolution\n\n    projection: { label: 'Projection', type: 'Options', defaultValue: 'Perspective', values: ['Perspective', 'Orthographic'] },\n\n    viewCtrl: { type: 'Options', defaultValue: 0, values: viewType.values, labels: viewType.labels, label: \"View Control\" },\n    fieldOfView: { label: 'Field of View', type: 'Number', defaultValue: 45, minValue: 5, maxValue: 179, animatable: true },\n    focalLength: { label: 'Focal Length (mm)', type: 'Number', defaultValue: 40, minValue: 1, maxValue: 400, step: 1, animatable: true },\n    filmSizeBox: { type: 'Options', defaultValue: '35', values: Object.keys(filmSizes), labels: filmSizes, label: \"Film Size\" },\n    customFilmSize: { label: 'Custom Film Size (mm)', type: 'Number', defaultValue: 35, step: 0.1, minValue: 1, maxValue: 1000 },\n    fStop: { label: 'F-Stop', type: 'Number', defaultValue: 2.8, minValue: 0.7, maxValue: 32, step: 0.1 },\n    filmOffset: { label: 'Film Offset (mm)', type: 'Vec2', defaultValue: {x: 0, y: 0}, minValue: -1000.0, step: 1.0, maxValue: 1000.0 },\n\n    aspectRatio: { label: 'Aspect Ratio', type: 'Number', defaultValue: 16.0/9.0, step: 0.01, minValue: 0.01, maxValue: 10 },\n    nearClip: { label: 'Near Clip', type: 'Number', step: 0.01, defaultValue: 0.1, minValue: 0.01 },\n    farClip: { label: 'Far Clip', type: 'Number', defaultValue: 50000, step: 1, minValue: 0.00001, maxValue: 1000000 },\n    orthoZoom: { label: 'Ortho Zoom', type: 'Number', defaultValue: 1, minValue: 0.01, step: 0.1 },\n\n\n    // Orbit around\n    targetDistance: { label: 'Distance to Target', type: 'Number', defaultValue: 5.0, minValue: 0.01 }, // Distance to target, in world space\n    target: { label: 'Virtual Target', type: 'Vec3', defaultValue: {x: 0, y: 0, z: 0}, hidden: true },  // Virtual target, in world space\n\n    // Display\n    showFrustum: { label: 'Show Frustum', type: 'Boolean', defaultValue: false },\n    frustumColor: { label: 'Frustum Color', type: 'Color', defaultValue: {r: 255, g: 200, b: 0}, animatable: true },\n    showClipping: { label: 'Show Clipping', type: 'Boolean', defaultValue: false },\n    showTarget: { label: 'Show Virtual Target', type: 'Boolean', defaultValue: false },\n  },\n\n  update: function(operator, primitive) {\n    let prim = operator.mergeInto(operator, primitive);\n    let box = operator.get('filmSizeBox');\n    return prim.set('filmSize', box === -1 ? operator.get('customFilmSize') : parseFloat(box));\n  }\n}\n\nexport default { Camera };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/Camera.js\n **/","\nconst backgroundStyle = {\n  values: [ 0, 1, 2, 3, 4 ],\n  labels: [ \"Default\", \"Color\", \"Image\", \"CubeMap\", \"EnvironmentMap\" ]\n};\n\nconst Environment = {\n  schema: {\n    ambientLight: { label: 'Color', type: 'Color', defaultValue: {r: 0, g: 0, b: 0}},\n    environmentMap: { label: \"Environment Map\", type: 'Plug', plug: 'Material' },\n\n    backgroundStyle: { label: 'Style', type: 'Options', defaultValue: 0, values: backgroundStyle.values, labels: backgroundStyle.labels },\n    backgroundColor: { label: 'Color', type: 'Color', defaultValue: {r: 0, g: 0, b: 0} },\n    backgroundOpacity: { label: 'Opacity', type: 'Number', defaultValue: 1, minValue: 0, maxValue: 1, step: 0.1 },\n\n    background: { label: 'Image', type: 'Plug', plug: 'Image' },\n\n    cubeMapBlurring: { label: 'CubeMap Blur', type: 'Number', defaultValue: 0, minValue: 0, maxValue: 10, step: 0.5, animatable: true },\n    cubeMap: { label: 'CubeMap', type: 'Plug', plug: 'Material' },\n  }\n}\n\nexport default { Environment };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/Environment.js\n **/","import { forEach } from 'ramda';\nimport THREE from 'three';\nimport { getImageFromNode, fetchTextureImage } from '../translators/asset';\n\nimport { List } from 'immutable';\n\nconst NearestFilter = 1003;\nconst NearestMipMapNearestFilter = 1004;\nconst NearestMipMapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipMapNearestFilter = 1007;\nconst LinearMipMapLinearFilter = 1008;\n\nconst Linear = 3000;\nconst sRGB = 3001;\nconst RGBE = 3002;\nconst LogLUV = 3003;\nconst RGBM7 = 3004;\nconst RGBM16 = 3005;\n\nvar renderType = {\n  Original: 0, WebGL: 1, Renderer: 3\n};\n\nvar renderTypes = {\n  values: [0,1,2],\n  labels: [\"Original\", \"WebGL\", \"Renderer\"]\n};\n\nconst wrapType = {\n  values: [ 0, 1, 2 ],\n  labels: [ \"None\", \"Wrap\", \"Mirror\" ]\n};\n\nconst sampleFilter = {\n  values: [ NearestFilter, NearestMipMapNearestFilter, NearestMipMapLinearFilter, LinearFilter, LinearMipMapNearestFilter, LinearMipMapLinearFilter ],\n  labels: [ \"Nearest\", \"Nearest MipMap Nearest\", \"Nearest MipMap Linear\", \"Linear\", \"Linear MipMap Nearest\", \"Linear MipMap Linear\" ]\n};\n\nconst encodingType = {\n  values: [ Linear, sRGB, RGBE, LogLUV, RGBM7, RGBM16 ],\n  labels: [ \"Linear\", \"sRGB\", \"RGBE/Radiance\", \"Log LUV\", \"RGBM 7\", \"RGBM 16\" ]\n};\n\nconst Image = {\n  schema: {\n    originalBitmapFile: { type: 'Image', hidden: true },\n    glBitmapFile:       { type: 'Image', hidden: true },\n    rendererBitmapFile: { type: 'Image', hidden: true },\n    hdrBitmapFile:      { type: 'Image', hidden: true },\n\n    renderOption: { label: 'Server Image', type: 'Options', defaultValue: 0, values: renderTypes.values, labels: renderTypes.labels },\n    glOption: { label: 'WebGL Image', type: 'Options', defaultValue: 1, values: renderTypes.values, labels: renderTypes.labels },\n\n    uOffset:  { type: 'Number', label: 'U Offset', defaultValue: 0, step: 0.1, animatable: true },\n    vOffset:  { type: 'Number', label: 'V Offset', defaultValue: 0, step: 0.1, animatable: true },\n    uTile:    { type: 'Number', label: 'U Tile',   defaultValue: 1, step: 0.1, animatable: true },\n    vTile:    { type: 'Number', label: 'V Tile',   defaultValue: 1, step: 0.1, animatable: true },\n    rotation: { type: 'Number', label: 'Rotation', defaultValue: 0, step: 0.1, animatable: true },\n    wrapU:    { type: 'Options', defaultValue: 1, values: wrapType.values, labels: wrapType.labels, label: \"U Wrap Style\" },\n    wrapV:    { type: 'Options', defaultValue: 1, values: wrapType.values, labels: wrapType.labels, label: \"V Wrap Style\" },\n\n    invert:  { type: 'Boolean', label: 'Invert', defaultValue: false, animatable: true },\n    gainPivot:  { type: 'Number', label: 'Gain Pivot', defaultValue: 0, step: 0.1, animatable: true },\n    gain:  { type: 'Number', label: 'Gain', defaultValue: 1.0, step: 0.1, animatable: true },\n    brightness:    { type: 'Number', label: 'Brightness',  defaultValue: 0, step: 0.1, animatable: true },\n\n    magFilter:    { type: 'Options', defaultValue: LinearFilter, values: sampleFilter.values, labels: sampleFilter.labels, label: \"Magnify Filter\" },\n    minFilter:    { type: 'Options', defaultValue: LinearMipMapLinearFilter, values: sampleFilter.values, labels: sampleFilter.labels, label: \"Minify Filter\" },\n    generateMipMaps:    { label: \"Use MipMaps\", type: \"Boolean\", defaultValue: true },\n\n    hdrEncoding: { type: 'Options', defaultValue: RGBM16, values: encodingType.values, labels: encodingType.labels, label: \"HDR Encoding\" }\n  },\n\n  update: function(operator, primitive, {node}) {\n    var asset = null;\n\n    //var renderOption = __SERVER__ ? operator.get('renderOption') : operator.get('glOption');\n    var renderOption = operator.get('glOption');\n\n    if (renderOption == renderType.Original) {\n      asset = operator.get(\"originalBitmapFile\");\n    } else if (renderOption === renderType.WebGL) {\n      asset = operator.get(\"glBitmapFile\") || operator.get(\"originalBitmapFile\");\n    } else {\n      asset = operator.get(\"rendererBitmapFile\") || operator.get(\"originalBitmapFile\");\n    }\n\n    primitive = primitive.set('asset', asset);\n    primitive = primitive.set('hdr', operator.get(\"hdrBitmapFile\"));\n\n    forEach((key) => {\n      primitive = primitive.set(key, operator.get(key));\n    }, ['uOffset', 'vOffset', 'uTile', 'vTile', 'rotation', 'wrapU', 'wrapV', 'gain', 'gainPivot', 'brightness', 'magFilter', 'minFilter', 'generateMipMaps', 'hdrEncoding', 'invert' ]);\n\n    primitive = primitive.set('preferHDR', operator.get('hdrEncoding') !== Linear);\n\n    return primitive;\n  }\n};\n\nconst Canvas = {\n  schema: {\n    width: { type: \"Number\", defaultValue: 512, minValue: 16, maxValue: 4096, step: 1, label: \"Width\" },\n    height: { type: \"Number\", defaultValue: 512, minValue: 16, maxValue: 4096, step: 1, label: \"Height\" },\n\n    color: { label: 'Color', type: 'Color', defaultValue: {r: 0, g:0 , b:0, a:0}, animatable: true },\n    opacity: { label: 'Opacity', type: 'Number', defaultValue: 1, minValue: 0, maxValue: 1, step: 0.1, animatable: true },\n\n    uOffset:  { type: 'Number', label: 'U Offset', defaultValue: 0, step: 0.1, animatable: true },\n    vOffset:  { type: 'Number', label: 'V Offset', defaultValue: 0, step: 0.1, animatable: true },\n    uTile:    { type: 'Number', label: 'U Tile',   defaultValue: 1, step: 0.1, animatable: true },\n    vTile:    { type: 'Number', label: 'V Tile',   defaultValue: 1, step: 0.1, animatable: true },\n    rotation: { type: 'Number', label: 'Rotation', defaultValue: 0, step: 0.1, animatable: true },\n    wrapU:    { type: 'Options', defaultValue: 1, values: wrapType.values, labels: wrapType.labels, label: \"U Wrap Style\" },\n    wrapV:    { type: 'Options', defaultValue: 1, values: wrapType.values, labels: wrapType.labels, label: \"V Wrap Style\" },\n\n    invert:  { type: 'Boolean', label: 'Invert', defaultValue: false, animatable: true },\n    gainPivot:  { type: 'Number', label: 'Gain Pivot', defaultValue: 0, step: 0.1, animatable: true },\n    gain:  { type: 'Number', label: 'Gain', defaultValue: 1.0, step: 0.1, animatable: true },\n      brightness:    { type: 'Number', label: 'Brightness',  defaultValue: 0, step: 0.1, animatable: true },\n\n    magFilter:    { type: 'Options', defaultValue: THREE.LinearFilter, values: sampleFilter.values, labels: sampleFilter.labels, label: \"Magnify Filter\" },\n    minFilter:    { type: 'Options', defaultValue: THREE.LinearMipMapLinearFilter, values: sampleFilter.values, labels: sampleFilter.labels, label: \"Minify Filter\" },\n    generateMipMaps:    { label: \"Use MipMaps\", type: \"Boolean\", defaultValue: true },\n\n    hdrEncoding: { type: 'Options', defaultValue: THREE.RGBM16, values: encodingType.values, labels: encodingType.labels, label: \"HDR Encoding\" }\n  },\n\n  update: function(operator, primitive, {node}) {\n\n    var ctxWidth = operator.get(\"width\");\n    var ctxHeight = operator.get(\"height\");\n\n    var color = operator.get('color');\n    color = 'rgba(' + parseInt(color.r*255) + ',' + parseInt(color.g*255) + ',' + parseInt(color.b*255) + ',' + operator.get('opacity') + ')';\n\n    forEach((key) => {\n      primitive = primitive.set(key, operator.get(key));\n    }, ['uOffset', 'vOffset', 'uTile', 'vTile', 'rotation', 'wrapU', 'wrapV', 'gain', 'gainPivot', 'brightness', 'magFilter', 'minFilter', 'generateMipMaps', 'hdrEncoding', 'invert', 'width', 'height' ]);\n\n    const op = (context) => {\n      context.fillStyle = color;\n      context.fillRect(0, 0, ctxWidth, ctxHeight);\n      return true;\n    };\n\n    if (!primitive.get('canvasOperations')) {\n      primitive = primitive.set('canvasOperations', new List([op]));\n    } else {\n      primitive = primitive.set('canvasOperations', primitive.get('canvasOperations').push(op));\n    }\n\n    return primitive;\n  }\n\n};\n\nconst CanvasLinearGradient = {\n  schema: {\n    startIs: { label: \"Start Is\", type: \"Options\", values: ['top', 'left', 'top-left', 'bottom-left'], initialValue: 'top' },\n    startColor: { label: 'Start Color', type: 'Color', defaultValue: {r:0, g:0, b:0, a:0}, animatable: true },\n    startOpacity: { label: 'Start Opacity', type: 'Number', defaultValue: 1, minValue: 0, maxValue: 1, step: 0.1, animatable: true },\n    endColor: { label: 'End Color', type: 'Color', defaultValue: {r:0, g:0, b:0, a:0}, animatable: true },\n    endOpacity: { label: 'End Opacity', type: 'Number', defaultValue: 1, minValue: 0, maxValue: 1, step: 0.1, animatable: true },\n\n    xOffset: { type: \"Number\", defaultValue: 0, minValue: -10000, maxValue: +10000, step: 1, label: \"X\", animatable: true },\n    yOffset: { type: \"Number\", defaultValue: 0, minValue: -10000, maxValue: +10000, step: 1, label: \"Y\", animatable: true },\n    width: { type: \"Number\", defaultValue: 512, minValue: 16, maxValue: 4096, step: 1, label: \"Width\" },\n    height: { type: \"Number\", defaultValue: 512, minValue: 16, maxValue: 4096, step: 1, label: \"Height\" },\n\n    composition: { label: \"Mode\", type: \"Options\", values: ['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'copy', 'xor', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'], initialValue: 'source-over' }\n\n  },\n\n  update: function(operator, primitive) {\n    var xOffset = operator.get(\"xOffset\");\n    var yOffset = operator.get(\"yOffset\");\n    var width = operator.get(\"width\");\n    var height = operator.get(\"height\");\n\n    var startColor = operator.get('startColor');\n    var endColor = operator.get('endColor');\n    startColor = 'rgba(' + parseInt(startColor.r*255) + ',' + parseInt(startColor.g*255) + ',' + parseInt(startColor.b*255) + ',' + operator.get('startOpacity') + ')';\n    endColor = 'rgba(' + parseInt(endColor.r*255) + ',' + parseInt(endColor.g*255) + ',' + parseInt(endColor.b*255) + ',' + operator.get('endOpacity') + ')';\n\n    const op = (canvasContext) => {\n      var grd;\n      switch (operator.get('startIs')) {\n      case 'top':     grd = canvasContext.createLinearGradient(xOffset, yOffset, xOffset, yOffset + height); break;\n      case 'left':    grd = canvasContext.createLinearGradient(xOffset, yOffset, xOffset + width, yOffset); break;\n      case 'top-left':grd = canvasContext.createLinearGradient(xOffset, yOffset, xOffset + width, yOffset + height); break;\n      default:        grd = canvasContext.createLinearGradient(xOffset, yOffset + height, xOffset + width, yOffset); break;\n      }\n      grd.addColorStop(0, startColor);\n      grd.addColorStop(1, endColor);\n      canvasContext.fillStyle = grd;\n\n      canvasContext.globalCompositeOperation = operator.get('composition');\n\n      canvasContext.fillRect(xOffset, yOffset, width, height);\n      return true;\n    };\n\n    if (!primitive.get('canvasOperations')) {\n      primitive = primitive.set('canvasOperations', new List([op]));\n    } else {\n      primitive = primitive.set('canvasOperations', primitive.get('canvasOperations').push(op));\n    }\n\n    return primitive;\n  }\n\n}\n\nconst CanvasFill = {\n  schema: {\n    color: { label: 'Color', type: 'Color', defaultValue: {r:0, g:0, b:0, a:0}, animatable: true },\n    opacity: { label: 'Opacity', type: 'Number', defaultValue: 1, minValue: 0, maxValue: 1, step: 0.1, animatable: true },\n\n    xOffset: { type: \"Number\", defaultValue: 0, minValue: -10000, maxValue: +10000, step: 1, label: \"X\", animatable: true },\n    yOffset: { type: \"Number\", defaultValue: 0, minValue: -10000, maxValue: +10000, step: 1, label: \"Y\", animatable: true },\n    width: { type: \"Number\", defaultValue: 512, minValue: 16, maxValue: 4096, step: 1, label: \"Width\" },\n    height: { type: \"Number\", defaultValue: 512, minValue: 16, maxValue: 4096, step: 1, label: \"Height\" },\n\n    composition: { label: \"Mode\", type: \"Options\", values: ['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'copy', 'xor', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'], initialValue: 'source-over' }\n\n  },\n\n  update: function(operator, primitive) {\n    var xOffset = operator.get(\"xOffset\");\n    var yOffset = operator.get(\"yOffset\");\n    var width = operator.get(\"width\");\n    var height = operator.get(\"height\");\n\n    var color = operator.get('color');\n    color = 'rgba(' + parseInt(color.r*255) + ',' + parseInt(color.g*255) + ',' + parseInt(color.b*255) + ',' + operator.get('opacity') + ')';\n\n    const op = (canvasContext) => {\n      canvasContext.fillStyle = color;\n      canvasContext.globalCompositeOperation = operator.get('composition');\n      canvasContext.fillRect(xOffset, yOffset, width, height);\n      return true;\n    };\n\n    if (!primitive.get('canvasOperations')) {\n      primitive = primitive.set('canvasOperations', new List([op]));\n    } else {\n      primitive = primitive.set('canvasOperations', primitive.get('canvasOperations').push(op));\n    }\n\n    return primitive;\n  }\n}\n\nconst CanvasComposite = {\n  schema: {\n    sourceImage: { type: \"Plug\", plug: \"Image\" },\n    xOffset: { type: \"Number\", defaultValue: 0, minValue: -10000, maxValue: +10000, step: 1, label: \"X\", animatable: true },\n    yOffset: { type: \"Number\", defaultValue: 0, minValue: -10000, maxValue: +10000, step: 1, label: \"Y\", animatable: true },\n\n    overrideSize: { type: \"Boolean\", label: 'Override Default Size', defaultValue: false, animatable: true },\n    overrideWidth: { type: \"Number\", defaultValue: 0, minValue: -10000, maxValue: +10000, step: 1, label: \"Override Width\", animatable: true },\n    overrideHeight: { type: \"Number\", defaultValue: 0, minValue: -10000, maxValue: +10000, step: 1, label: \"Override Height\", animatable: true },\n\n    composition: { label: \"Composition\", type: \"Options\", values: ['source-over', 'source-in', 'source-out', 'source-atop', 'destination-over', 'destination-in', 'destination-out', 'destination-atop', 'lighter', 'copy', 'xor', 'multiply', 'screen', 'overlay', 'darken', 'lighten', 'color-dodge', 'color-burn', 'hard-light', 'soft-light', 'difference', 'exclusion', 'hue', 'saturation', 'color', 'luminosity'], initialValue: 'source-over' }\n\n  },\n\n  update: function(operator, primitive, {node}) {\n    var sourceImage = operator.get('sourceImage');\n    var nodeId = operator.get('id');\n\n    var xOffset = operator.get(\"xOffset\");\n    var yOffset = operator.get(\"yOffset\");\n    var overrideSize = operator.get(\"overrideSize\");\n    var overrideWidth = operator.get(\"overrideWidth\");\n    var overrideHeight = operator.get(\"overrideHeight\");\n    var composition = operator.get(\"composition\");\n\n    const op = (context, store) => {\n      if (!sourceImage) return false;\n\n      const textureImage = fetchTextureImage(store, sourceImage);\n      if (!textureImage) {\n        return false;\n      }\n\n      if( ! overrideSize ) {\n        overrideWidth = textureImage.width;\n        overrideHeight = textureImage.height;\n      }\n      if( overrideWidth == 0 ) {\n        overrideWidth = 1;\n      }\n      if( overrideHeight == 0 ) {\n        overrideHeight = 1;\n      }\n\n      var imgCanvas = document.createElement('canvas');\n      imgCanvas.width = overrideWidth;\n      imgCanvas.height = overrideHeight;\n      var imgCanvasContext = imgCanvas.getContext('2d');\n\n      imgCanvasContext.drawImage(textureImage,0,0,overrideWidth,overrideHeight);\n\n      context.globalCompositeOperation = composition;\n\n      context.drawImage( imgCanvas, xOffset, yOffset, overrideWidth, overrideHeight );\n\n      return true;\n    };\n\n    if (!primitive.get('canvasOperations')) {\n      primitive = primitive.set('canvasOperations', new List([op]));\n    } else {\n      primitive = primitive.set('canvasOperations', primitive.get('canvasOperations').push(op));\n    }\n\n    return primitive;\n  }\n};\n\nexport default { Image, Canvas, CanvasLinearGradient, CanvasFill, CanvasComposite };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/Image.js\n **/","import { curry, map } from 'ramda';\nimport { getOrFetchImage, getOrFetchBinary } from '../modules/assets';\nimport createTranslator from './translator';\n\n\nexport function getAssetIdFromImage(store, image) {\n  const ref = image.get('asset');\n  const hdr = image.get('hdr');\n  return image.get('preferHDR') && hdr ? hdr.get('id') : ref.get('id');\n};\n\nexport function getImageFromNode(store, image) {\n  const id = getAssetIdFromImage(store, image);\n  return id && getOrFetchImage(id)(store);\n}\n\n\nexport function fetchTextureImage(store, image) {\n  const ref = image.get('asset');\n  const id = ref && ref.get('id');\n  return id && getOrFetchImage(id)(store);\n}\n\n// Asset translator!\nfunction translate(store, state={}, id, evalNode, prevEvalNode, node, prevNode) {\n  if (!node) return state; // deleted node, do not care\n  let type = node.get('type');\n  if (translators[type]) translators[type](store, state, id, evalNode, prevEvalNode, node, prevNode);\n  return state;\n};\n\n\nconst translators = {\n  PolyMesh: (store, state, id, data, prevData, node, prevNode) => {\n    if (!data.getIn(['Properties','visible'])) return;\n    const ref = data.getIn(['PolyMesh','geometry']);\n    const bingeom = ref && getOrFetchBinary(ref.get('id'))(store);\n    fetchMaterial(store, data.get('Material'));\n  },\n\n  BinMesh: (store, state, id, data, prevData, node, prevNode) => {\n    if (!data.getIn(['Properties','visible'])) return;\n    const ref = data.getIn(['BinMesh','binary']);\n    const bingeom = ref && getOrFetchBinary(ref.get('id'))(store);\n    fetchMaterial(store, data.get('Material'));\n  },\n};\n\nconst imageMaps = [\n 'baseMap','baseFalloffMap',\n 'anisotropyMap','anisotropyRotationMap','bumpMap','emissiveMap','lightMap',\n 'metallicMap','normalMap','opacityMap','reflectivityMap','roughnessMap',\n 'specularMap','translucencyMap',\n];\n\nfunction fetchMaterial(store, data) {\n  for (var image of imageMaps) {\n    fetchTextureImages(store, data.get(image));\n  }\n  fetchTextureImages(store, data.getIn(['envMap', 'specularCubeMap']));\n  fetchTextureImages(store, data.getIn(['envMap', 'irradianceCubeMap']));\n};\n\nfunction fetchTextureImages(store, image) {\n  if (!image) return null;\n  const maps = image.get('maps');\n  if (maps) {\n    return map(curry(getImageFromNode)(store), maps);\n  } else {\n    fetchTextureImage(store, image);\n  }\n}\n\n// fixme asset translator\n//export default createTranslator(translate, {});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/asset.js\n **/","import { getEvalSceneGraph } from '../modules/utils/evalSceneGraph';\nimport { Map } from 'immutable';\nimport { iterateDepthFirstWithFilter } from '../modules/utils/iteration';\nimport { markPreloaded, markLoaded, isSceneLoaded, areAssetsLoaded, areAssetsPreloaded, markRenderedScene, markRenderingScene, getSceneId } from '../modules/sceneIO';\nimport { virtualCameraId, vrCameraId } from '../modules/sceneGraph';\nimport 'webvr';\nimport { incrementTime } from '../modules/animation';\n\nconst defaultNodeFilter = (n) => true;\n\nconst defaultFns = {\n  onLoad() {},\n  postTranslate() {},\n  updateView() {},\n  handleStateChanges() {},\n  dirtyCheck() { return false; }\n};\n\nexport function createTranslator(store, initTranslator, context) {\n  let api = {};\n  let translator = initTranslator(store, context, api);\n  let nodeFilter = defaultNodeFilter;\n  let sceneGraph = Map();\n  let evalSceneGraph = Map();\n  let nodes = Map();\n  let rendered = false;\n  let preloaded = false;\n  let loaded = false;\n  let view = null;\n  let player = store.get('player');\n  let dirtyCheck = false;\n\n  let updateRequested = false;\n  let updating = false;\n  let renderingMode = store.getIn(['player','renderingMode']);\n  let vrDisplay;\n\n  function translateNodes() {\n    const sceneId = getSceneId(store);\n    if (!sceneId) return 0;\n\n    const newEvalSceneGraph = getEvalSceneGraph(store);\n    const newSceneGraph = store.get('sceneGraph');\n    let numUpdated = 0;\n\n    dirtyCheck = translator.dirtyCheck(loaded);\n\n    if (!dirtyCheck && newEvalSceneGraph === evalSceneGraph) return numUpdated;\n\n    function translateNode(id, nextNode, prevNode) {\n      let prevResult = evalSceneGraph.getIn(['nodes',id]);\n      let nextResult = newEvalSceneGraph.getIn(['nodes',id]);\n      if (prevResult !== nextResult || (!nextNode && prevNode) ||\n        (dirtyCheck && dirtyCheck(store, id, nextResult, prevResult, nextNode, prevNode))){\n        translator.translate(id, nextResult, prevResult, nextNode, prevNode);\n        numUpdated++;\n      }\n    }\n\n    for (let prevNode of iterateDepthFirstWithFilter(sceneGraph, sceneId, nodeFilter)) {\n      let id = prevNode.get('id');\n      translateNode(id, newSceneGraph.get(id), prevNode);\n    }\n\n    for (let nextNode of iterateDepthFirstWithFilter(newSceneGraph, sceneId, nodeFilter)) {\n      let id = nextNode.get('id');\n      if (sceneGraph.get(id)) continue;\n      translateNode(id, nextNode, null);\n    }\n\n    translateNode(virtualCameraId, newSceneGraph.get(virtualCameraId), sceneGraph.get(virtualCameraId));\n    translateNode(vrCameraId, newSceneGraph.get(vrCameraId), sceneGraph.get(vrCameraId));\n\n    sceneGraph = newSceneGraph;\n    evalSceneGraph = newEvalSceneGraph;\n\n    return numUpdated;\n\n    //console.log('translated in: ', (new Date() - s)+'ms', numUpdated+' nodes');\n    //return numUpdated;\n  }\n\n  function doUpdate() {\n  }\n\n  return Object.assign({}, defaultFns, translator, {\n    update: function(options={}) {\n      // console.log('translator do update');\n      const numUpdated = translateNodes();\n      //console.log('numUpdated: ', numUpdated);\n      let renderedAndLoaded = false;\n\n\n      if (!rendered && numUpdated) {\n        rendered = true;\n        store.dispatch(markRenderingScene());\n      }\n\n      if (!loaded && preloaded && areAssetsLoaded(store)) {\n        loaded = true;\n        translator.onLoad();\n        store.dispatch(markLoaded());\n        renderedAndLoaded = true;\n      }\n\n      if (!preloaded && areAssetsPreloaded(store)) {\n        preloaded = true;\n        store.dispatch(markPreloaded());\n      }\n\n      if (loaded && store.get('player') !== player) {\n        player = store.get('player');\n        translator.updateView(player);\n      }\n\n      if (store.getIn(['player','renderingMode']) !== renderingMode) {\n        renderingMode = store.getIn(['player','renderingMode']);\n      }\n\n      translator.postTranslate(renderingMode, loaded);\n\n      if (renderedAndLoaded) {\n        store.dispatch(markRenderedScene());\n      }\n\n      store.dispatch(incrementTime());\n    }\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/translator.js\n **/","\nconst DirectionalLight = {\n  schema: {\n    lightType: { label: 'type', type: 'String', defaultValue: 'DirectionalLight' },\n    color: { label: 'Color', type: 'Color', defaultValue: {r: 240, g: 240, b: 240, a: 1}},\n    intensity: { label: 'Intensity', type: 'Number', defaultValue: 0.8}\n  }\n}\n\nconst SpotLight = {\n  schema: {\n    lightType: { label: 'type', type: 'String', defaultValue: 'SpotLight' },\n    color: { label: 'Color', type: 'Color', defaultValue: {r: 240, g: 240, b: 240, a: 1}},\n    intensity: { label: 'Intensity', type: 'Number', defaultValue: 0.8}\n  }\n}\n\nconst PointLight = {\n  schema: {\n    lightType: { label: 'type', type: 'String', defaultValue: 'PointLight' },\n    color: { label: 'Color', type: 'Color', defaultValue: {r: 240, g: 240, b: 240, a: 1}},\n    intensity: { label: 'Intensity', type: 'Number', defaultValue: 0.8}\n  }\n}\n\nconst HemisphereLight = {\n  schema: {\n    lightType: { label: 'type', type: 'String', defaultValue: 'HemisphereLight' },\n    color: { label: 'Sky Color', type: 'Color', defaultValue: {r: 0x33, g: 0x85, b: 0xff, a: 1}},\n    gndColor: { label: 'Sky Color', type: 'Color', defaultValue: {r: 0xff, g: 0xc8, b: 0x7f, a: 1}},\n    intensity: { label: 'Intensity', type: 'Number', defaultValue: 0.6}\n  }\n}\n\nconst AreaLight = {\n  schema: {\n    lightType: { label: 'type', type: 'String', defaultValue: 'AreaLight' },\n    color: { label: 'Color', type: 'Color', defaultValue: {r: 240, g: 240, b: 240, a: 1}},\n    intensity: { label: 'Intensity', type: 'Number', defaultValue: 10}\n  }\n}\n\nexport default { DirectionalLight, SpotLight, PointLight, HemisphereLight, AreaLight };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/Light.js\n **/","import { map } from 'ramda';\n\nconst Material = {\n  schema: {\n    color: { label: 'Color', type: 'Color', defaultValue: {r: 240, g: 240, b: 240, a: 1}}\n  },\n  update: (operator, primitive) => {\n    return primitive.set('color', operator.get('color'));\n  }\n}\n\nconst Physical = {\n  schema: {\n    baseMap: { label: 'Image', type: 'Plug', plug: 'Image'},\n    baseMapTransparent: { label: 'Image Transparent', type: 'Boolean', defaultValue: false },\n    baseColor: { label: 'Color', type: 'Color', defaultValue: {r: 240, g: 240, b: 240, a: 1}},\n\n    baseFalloff: { label: 'Falloff', type: 'Boolean', defaultValue: false },\n    baseFalloffColor: { label: \"Falloff Color\", type: 'Color', defaultValue: {r: 240, g: 240, b: 240, a: 1}, animatable: true },\n    baseFalloffMap: { label: 'Image', type: 'Plug', plug: 'Image'},\n\n    opacityMap: { label: 'Image', type: 'Plug', plug: 'Image'},\n    opacityFactor: { label: \"Factor\", type: \"Number\", defaultValue: 1.0, maxValue: 1.0, minValue: 0.0, step: 0.01, animatable: true },\n\n    depthWrite: { label: \"Depth Write\", type: \"Boolean\", defaultValue: true },\n    depthTest: { label: \"Depth Test\", type: \"Boolean\", defaultValue: true },\n\n    specularMap: { label: 'Image', type: 'Plug', plug: 'Image' },\n    specularColor: { label: \"Color\", type: 'Color', defaultValue: {r: 255, g: 255, b: 255}, animatable: true },\n\n    roughness: { label: \"Roughness\", type: \"Number\", defaultValue: 0.25, minValue: 0.0, maxValue: 1.0, step: 0.01, animatable: true },\n    roughnessMap: { label: 'Image', type: 'Plug', plug: 'Image' },\n\n    metallic: { label: \"Metallic\", type: \"Number\", defaultValue: 0.0, minValue: 0.0, maxValue: 1.0, step: 0.01, animatable: true },\n    metallicMap: { label: 'Image', type: 'Plug', plug: 'Image' },\n\n    clearCoat: { label: \"Thickness\", type: \"Number\", defaultValue: 0.0, minValue: 0.0, maxValue: 1.0, step: 0.01, animatable: true },\n    clearCoatRoughness: { label: \"Roughness\", type: \"Number\", defaultValue: 0.25, minValue: 0.0, maxValue: 1.0, step: 0.01, animatable: true },\n\n    lightMap:  { label: 'Image', type: 'Plug', plug: 'Image' },\n    ambientColor2: { label: \"Color\", type: 'Color', animatable: true, defaultValue: {r: 0, g: 0, b: 0}},\n\n    emissiveMap:  { label: 'Image', type: 'Plug', plug: 'Image' },\n    emissiveColor: { label: \"Color\", type: 'Color', animatable: true,  defaultValue: {r: 0, g: 0, b: 0}},\n    emissiveScale: { label: \"Scale\", type: 'Number', defaultValue: 1.0, minValue: 0.0, maxValue: 100.0, step: 0.1, animatable: true },\n    emissiveLabel: { type: \"Label\", align: \"right\", defaultValue: \"Emissive uses the second UV channel.\" },\n\n    translucencyColor: { label: \"Color\", type: 'Color', animatable: true, defaultValue: {r: 0, g: 0, b: 0}},\n    translucencyMap:  { label: 'Image', type: 'Plug', plug: 'Image' },\n    translucencyNormalAlpha: { label: \"Normal Alpha\", type: \"Number\", defaultValue: 0.75, minValue: 0.0, maxValue: 1.0, step: 0.05, animatable: true },\n    translucencyNormalPower: { label: \"Normal Power\", type: \"Number\", defaultValue: 2.0, minValue: 0.01, maxValue: 100.0, step: 0.05, animatable: true },\n    translucencyViewAlpha: { label: \"View Alpha\", type: \"Number\", defaultValue: 0.75, minValue: 0.0, maxValue: 1.0, step: 0.05, animatable: true },\n    translucencyViewPower: { label: \"View Power\", type: \"Number\", defaultValue: 2.0, minValue: 0.01, maxValue: 100.0, step: 0.05, animatable: true },\n\n    bumpMap:  { label: 'Image', type: 'Plug', plug: 'Image' },\n    bumpFactor: { label: \"Scale Factor\", type: \"Number\", defaultValue: 0.03, minValue: -5.0, maxValue: 5.0, step: 0.001, animatable: true },\n\n    normalMap: { label: 'Image', type: 'Plug', plug: 'Image' },\n    normalFactor: { label: \"Scale Factor\", type: \"Number\", defaultValue: 1.0, minValue: -100.0, maxValue: 100.0, step: 0.001, animatable: true },\n\n    anisotropyLabel: { type: \"Label\", align: \"right\", defaultValue: \"Anisotropy requires the Tangent operator.\" },\n    anisotropyMap: { label: 'Image', type: 'Plug', plug: 'Image' },\n    anisotropy: { label: \"Offset\", type: \"Number\", defaultValue: 0.0, minValue: -1.0, maxValue: 1.0, step: 0.025, animatable: true },\n\n    anisotropyRotationMap:  { label: 'Image', type: 'Plug', plug: 'Image' },\n    anisotropyRotation: { label: \"Rotation Offset\", type: \"Number\", defaultValue: 0.0, minValue: -1.0, maxValue: 1.0, step: 0.025, animatable: true },\n\n    overrideEnvironment: { label: 'Override Environment', type: 'Boolean', defaultValue: false },\n    //environmentMap: { label: \"Environment Map\", type: 'Node', filter: environmentMapFilter },\n  },\n\n  update: function(operator, primitive, attrs={}) {\n    return operator.mergeInto(operator, primitive).set('envMap',\n        operator.getPlug('envMap', attrs.sceneId, 'Environment').get('environmentMap'));\n  }\n}\n\nconst MaterialReference = {\n  schema: {\n    defaultColor: { label: 'Default Color', type: 'Color', defaultValue: {r: 1, g: 1, b: 1, a: 1}},\n    reference: {type: 'Plug', plug: 'Material', label: \"Reference\"}\n  },\n  update: (operator, primitive) => {\n    return operator.get('reference') || primitive.set('color', operator.get('defaultColor'));\n  }\n}\n\nconst Reference = {\n  schema: {\n    defaultColor: { label: 'Default Color', type: 'Color', defaultValue: {r: 1, g: 1, b: 1, a: 1}},\n    reference: {type: 'Plug', plug: 'Material', label: \"Reference\"}\n  },\n  update: (operator, primitive) => {\n    return operator.get('reference') || primitive.set('defaultColor', operator.get('defaultColor'));\n  }\n}\n\nconst EnvironmentMap = {\n  schema: {\n    thumbnailImage: { label: \"Thumbnail\", type: 'Plug', plug: 'Image' },\n\n    irradianceCubeMap: { label: \"Irradiance\", type: 'Plug', plug: 'Material'}, //filter: cubeMapFilter },\n    specularCubeMap: { label: \"Specular\", type: 'Plug', plug: 'Material'}, //filter: cubeMapFilter },\n\n    //giImage:   { label: 'Global Illumination', type: 'Node', initialValue: null, filter: exo.material.ImageUtils.nodeFilter },\n    //// these two maps should usually be the global illumination map.\n    //reflectionImage:   { label: 'Reflection', type: 'Node', initialValue: null, filter: exo.material.ImageUtils.nodeFilter },\n    //refractionImage:   { label: 'Refraction', type: 'Node', initialValue: null, filter: exo.material.ImageUtils.nodeFilter },\n  }\n}\n\nconst CubeMap = {\n  schema: {\n    map0: { label: 'Map ( x)', type: 'Plug', plug: 'Image' },\n    map1: { label: 'Map (-x)', type: 'Plug', plug: 'Image' },\n    map2: { label: 'Map ( y)', type: 'Plug', plug: 'Image' },\n    map3: { label: 'Map (-y)', type: 'Plug', plug: 'Image' },\n    map4: { label: 'Map ( z)', type: 'Plug', plug: 'Image' },\n    map5: { label: 'Map (-z)', type: 'Plug', plug: 'Image' }\n  },\n  update: (operator, primitive, {node}) => {\n    return primitive\n      .set('maps', map((k) => operator.get(k), ['map0','map1','map2','map3','map4','map5']));\n  }\n}\n\nconst ProxyReference = {\n  schema: {\n    webgl: { type: 'Plug', label: 'WebGL Material', plug: 'Material'},\n    vray: { type: 'Plug', label: 'VRay Material', plug: 'Material'},\n  },\n  update: (operator, primitive) => {\n    return operator.get('webgl') || primitive;\n  }\n};\n\nconst Standard = {\n  schema: {\n    diffuseColor: { label: 'Color', type: 'Color', defaultValue: {r: 240, g: 240, b: 240, a: 1}},\n  }\n}\n\nconst MultiID = {\n  schema: {\n    material0: { type: 'Plug', plug: 'Material', label: 'Material ID 0' },\n    material1: { type: 'Plug', plug: 'Material', label: 'Material ID 1' },\n    material2: { type: 'Plug', plug: 'Material', label: 'Material ID 2' },\n    material3: { type: 'Plug', plug: 'Material', label: 'Material ID 3' },\n    material4: { type: 'Plug', plug: 'Material', label: 'Material ID 4' },\n    material5: { type: 'Plug', plug: 'Material', label: 'Material ID 5' },\n    material6: { type: 'Plug', plug: 'Material', label: 'Material ID 6' },\n    material7: { type: 'Plug', plug: 'Material', label: 'Material ID 7' },\n    material8: { type: 'Plug', plug: 'Material', label: 'Material ID 8' },\n    material9: { type: 'Plug', plug: 'Material', label: 'Material ID 9' },\n    material10: { type: 'Plug', plug: 'Material', label: 'Material ID 10' },\n    material11: { type: 'Plug', plug: 'Material', label: 'Material ID 11' },\n    material12: { type: 'Plug', plug: 'Material', label: 'Material ID 12' },\n    material13: { type: 'Plug', plug: 'Material', label: 'Material ID 13' },\n    material14: { type: 'Plug', plug: 'Material', label: 'Material ID 14' },\n    material15: { type: 'Plug', plug: 'Material', label: 'Material ID 15' },\n    material16: { type: 'Plug', plug: 'Material', label: 'Material ID 16' },\n    material17: { type: 'Plug', plug: 'Material', label: 'Material ID 17' },\n    material18: { type: 'Plug', plug: 'Material', label: 'Material ID 18' },\n    material19: { type: 'Plug', plug: 'Material', label: 'Material ID 19' },\n    material20: { type: 'Plug', plug: 'Material', label: 'Material ID 20' },\n    material21: { type: 'Plug', plug: 'Material', label: 'Material ID 21' },\n    material22: { type: 'Plug', plug: 'Material', label: 'Material ID 22' },\n    material23: { type: 'Plug', plug: 'Material', label: 'Material ID 23' },\n    material24: { type: 'Plug', plug: 'Material', label: 'Material ID 24' },\n    material25: { type: 'Plug', plug: 'Material', label: 'Material ID 25' },\n    material26: { type: 'Plug', plug: 'Material', label: 'Material ID 26' },\n    material27: { type: 'Plug', plug: 'Material', label: 'Material ID 27' },\n    material28: { type: 'Plug', plug: 'Material', label: 'Material ID 28' },\n    material29: { type: 'Plug', plug: 'Material', label: 'Material ID 29' },\n\n    multiID: { type: 'Boolean', label: 'Is MultiID', defaultValue: true },\n  }\n};\n\nconst VRmat = {\n  schema: {\n    visMatZipFile:  { type: 'File',  hidden: true },\n    viewColor:      { type: \"Color\", defaultValue: {r: 240, g: 240, b:240, a: 1}, label: \"Viewport Color\" },\n  }\n}\n\nexport default { Material, Physical, MaterialReference, Reference, EnvironmentMap,\n  CubeMap, Standard, ProxyReference, MultiID, 'vray/VRmat': VRmat };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/Material.js\n **/","\nconst Player = {\n  schema: {\n    autoRotate: { label: 'Auto-Rotate Camera', type: 'Boolean', defaultValue: false},\n    autoRotateNode: { label: 'Rotate Node', type: 'Node' },\n    autoRotateSpeed: { label: 'Rotate Speed (seconds)', type: 'Number', minValue: 1, maxValue: 60, defaultValue: 12 },\n    autoRotateDirection: { label: 'Rotate Direction', type: 'Options', values: ['-','+'], labels: ['Clockwise', 'Counter-clockwise'], defaultValue: '-' },\n\n    camera: { label: 'Camera', type: 'Node' },\n    constraintCameraY: { label: 'Constrain Camera to Positive Y', type: 'Boolean', defaultValue: false },\n    orbitTarget: { label: 'Orbit Target', type: 'Node' },\n    orbitMode: { label: 'Orbit Mode', type:  'Options', values: ['gyroscope', 'trackball'], labels: ['Gyropscope', 'Trackball'], defaultValue: 'gyroscope' },\n\n    toneMapStyle: { label: 'Style', type: 'Options', values: ['Linear', 'Reinhard', 'Cineon', 'Filmic'], defaultValue: 'Linear' },\n    toneMapExposureGain: { label: 'Exposure Gain', type: 'Number', defaultValue: 1.0, minValue: 0.0, maxValue: 20.0, step: 0.1 },\n    toneMapWhitePoint: { label: 'White Point', type: 'Number', defaultValue: 4.0, minValue: 0.0, maxValue: 20.0, step: 0.1 },\n\n    saoPass: { label: 'Enabled', type: 'Boolean', defaultValue: false },\n    saoIntensity: { label: 'Intensity', type: 'Number', defaultValue: 1.0, minValue: 0.0, maxValue: 1000.0, step: 0.1 },\n    saoScale: { label: 'Scale', type: 'Number', defaultValue: 24.0, minValue: 0.0, maxValue: 1000.0, step: 0.1 },\n\n    reflectiveFloor: { label: 'Enabled', type: 'Boolean', defaultValue: false },\n    reflectiveFloorWidth: { label: 'Width', type: 'Number', defaultValue: 1.0, minValue: 0.0, maxValue: 1000.0, step: 1.0 },\n    reflectiveFloorRoughness: { label: 'Roughness', type: 'Number', defaultValue: 0.0, minValue: 0.0, maxValue: 10.0, step: 0.1 },\n    reflectiveFloorMetallic: { label: 'Metallic', type: 'Number', defaultValue: 0.0, minValue: 0.0, maxValue: 1.0, step: 0.1 },\n    reflectiveFloorFade: { label: 'Fade', type: 'Number', defaultValue: 0.0, minValue: 0.0, maxValue: 10.0, step: 0.1 },\n    reflectiveFloorHeight: { label: 'Height', type: 'Number', defaultValue: 0.0, minValue: -100.0, maxValue: 100.0, step: 0.1 },\n    reflectiveFloorOpacity: { label: 'Opacity', type: 'Number', defaultValue: 1.0, minValue: 0.0, maxValue: 1.0, step: 0.1 },\n    reflectiveFloorFresnel: { label: 'Fresnel Strength', type: 'Number', defaultValue: 1.0, minValue: -1.0, maxValue: 1.0, step: 0.1 },\n    reflectiveFloorExcludeServer: { label: 'Exclude on Server', type: 'Boolean', defaultValue: false },\n\n    configurator: { label: 'Configurator', type: 'Text', hidden: true, defaultValue: '' }\n\n  }\n};\n\nexport default { Player };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/Player.js\n **/","import Mesh from './Mesh';\nimport TransformVertices from './TransformVertices';\nimport MeshSmooth from './MeshSmooth';\nimport UVMap from './UVMap';\nimport Skin from './Skin';\nimport Box from './Box';\nimport Sphere from './Sphere';\nimport Cone from './Cone';\nimport Capsule from './Capsule';\nimport Cylinder from './Cylinder';\nimport Plane from './Plane';\nimport Torus from './Torus';\nimport Disk from './Disk';\n\nexport default { Mesh, MeshSmooth, Skin, TransformVertices, UVMap, Box, Sphere,\n  Cone, Capsule, Cylinder, Plane, Torus, Disk };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/index.js\n **/","import { readwrite, convertToPolyMesh, convertToCNSPolyMesh, convertToBingeom } from '../../translators/bingeom';\nimport { getOrFetchBinary, getHash } from '../../modules/assets';\nimport { isSceneLoaded } from '../../modules/sceneIO';\n\nconst Mesh = {\n  schema: {\n    geometry: {type: 'File', label: 'PolyMesh Geometry File'}\n  },\n\n  update: function(operator, primitive, { node, store, properties }) {\n    const visible = properties.get('visible');\n    const geom = operator.get('geometry'); // Request geometry so the asset gets referenced\n    const fetch = visible || (properties.get('prefetch') && isSceneLoaded(store))\n    const ref = fetch && operator.get('geometry');\n    const bingeom = ref && store.hasApi() && getOrFetchBinary(ref.get('id'))(store);\n    const mesh = bingeom && convertToCNSPolyMesh(bingeom, ref.get('id'));\n    //console.log('Mesh update', 'visible:', visible, 'prefetch:', properties.get('prefetch'), 'fetch:', fetch, 'bingeom:', !!bingeom, ref && ref.get('id'), node.get('name'), mesh);\n    return mesh ? primitive.set('mesh', mesh) : primitive;\n  },\n}\n\nexport default Mesh;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Mesh.js\n **/","import { List } from 'immutable';\nimport THREE from 'three';\nimport { PolyMesh, Selection, PolyMap, PolyMaps } from '../../polyMesh';\n\nfunction stringIndicesToArray(str=\"\") {\n  const indices = str.split(',');\n  let outIndices = [];\n  let i,j,start,end,v;\n  for (i=0; i<indices.length; i++) {\n    v = indices[i];\n    if (v.indexOf('-') !== -1) {\n      [start,end] = v.split('-');\n      start = Number(start);\n      end = Number(end);\n      for (j=start; j<=end; j++) {\n        outIndices.push(j);\n      }\n    } else {\n      outIndices.push(Number(v));\n    }\n  }\n  return outIndices;\n}\n\nconst TransformVertices = {\n  schema: {\n    translation: { label: 'Translation', type: 'Vec3', step: 0.1, defaultValue: { x: 0, y: 0, z: 0}, animatable: true },\n    rotation: { label: 'Rotation', type: 'Vec3', step: 1, defaultValue: { x: 0, y: 0, z: 0}, animatable: true, hidden: true },\n    scale: { label: 'Scale', type: 'Vec3', minValue: 0.0001, step: 0.1, defaultValue: { x: 1, y: 1, z: 1}, animatable: true, hidden: true },\n    updateNormals: { label: 'Update Normals', type: 'Boolean', defaultValue: true, hidden: true },\n      //centerType: { label: 'Center', type: 'Options', display: 'Dropdown',\n      //      labels: ['Selection Center', 'World Center', 'Pivot'],\n      //      values: ['SelectionCenter', 'WorldCenter', 'Pivot'],\n      //      defaultValue: 'SelectionCenter' },\n      //// matrix is used in baking transform and overrides other parameters\n      //matrix: { label: 'Translation', type: 'Object', defaultValue: null, hidden: true },\n    vertexIndices: { label: \"Selection\", type: 'String', defaultValue: \"\" },\n  },\n\n  update: function(operator, primitive) {\n    const mesh = primitive.get('mesh');\n    if (!mesh) return primitive;\n\n    const seed = Math.random();\n    const density = 0.5;\n    const meaning = Selection.Vertices;\n\n    const indices = stringIndicesToArray(operator.get('vertexIndices'));\n    //console.log('create selection from: ', operator.get('vertexIndices'), indices);\n\n    const selection = new Selection(indices, Selection.Vertices);\n    const translation = operator.get('translation');\n\n    const newMesh = new PolyMesh( mesh );\n    const newPolyMap = new PolyMap(PolyMaps.resolveMap(mesh, 'positions'));\n    const newMapValues = newPolyMap.values.clone();\n    newPolyMap.values = newMapValues;\n    PolyMaps.assignMap( newMesh, 'positions', newPolyMap );\n\n    var vertexIndices = Selection.getIndices(mesh, Selection.Vertices, 'positions', selection);\n\n    const nonuniform = !!selection;\n\n    for ( var j = 0, n = vertexIndices.length; j !== n; ++ j ) {\n      var i = vertexIndices[ j ];\n\n      newMapValues.setAt( i,\n          newMapValues.getAt( i, new THREE.Vector3()).add( translation ) );\n    }\n    return primitive.set('mesh', newMesh);\n  }\n}\n\nexport default TransformVertices;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/TransformVertices.js\n **/","import { List } from 'immutable';\nimport THREE from 'three';\nimport subdivision2 from '../../polyMesh/geometric/operator/subdivision2';\nimport PolyMesh from '../../polyMesh/geometric/model/PolyMesh';\nimport PolyMap from '../../polyMesh/geometric/model/PolyMap';\nimport ObjectArrayView from \"../../polyMesh/generic/container/ObjectArrayView\";\n\nconst UVMap = {\n  schema: {\n    mWidth: { type: 'Number', label: 'Width', defaultValue: 1,step: 0.1, minValue: 0.0, animatable: true },\n    mHeight: { type: 'Number', label: 'Height', defaultValue: 1, step: 0.1,  minValue: 0.0, animatable: true },\n    mLength: { type: 'Number', label: 'Length', defaultValue: 1, step: 0.1,  minValue: 0.0, animatable: true },\n\n    center: { label: 'Center', type: 'Vec3', step: 0.1, defaultValue: new THREE.Vector3( 0, 0, 0 ), animatable: true },\n    rotation: {label: 'Rotation', type: 'Vec3', step: 1,  minValue: -360, maxValue: 360, defaultValue: new THREE.Vector3( 0, 0, 0 ), animatable: true },\n    uTile: { label: 'U Tile', type: 'Number', step: 0.1, defaultValue: 1.0, animatable: true },\n    vTile: { label: 'V Tile', type: 'Number', step: 0.1, defaultValue: 1.0, animatable: true },\n\n    //uvProjectionMode: {  label: 'Projection', type: 'Options', display: 'Radio',\n    //  values: [], // FIXME UVMAP type\n    //  labels: ['Planar', 'Box', 'Cylindrical', 'Spherical'], defaultValue: 0 // FIXME PROPER value },\n    //xAxis: { label: 'Align Local Axis', type: 'Options', display: 'Radio',\n    //  values: [AxisTypes.X, AxisTypes.Y, AxisTypes.Z, AxisTypes.AverageNormals],\n    //  labels: ['X', 'Y', 'Z' , 'Average Normals'], defaultValue: AxisTypes.Y },\n    //uvMapChannel: { label: 'UV Channel', type: 'Text', defaultValue: 'default' },\n\n    autoFit: {label: 'Auto Fit', type: 'Button'},\n    autoAlign: {label: 'Auto Align', type: 'Button'}, // Hidden until local manipulators fixed\n    autoFitAlign: {label: 'Best Fit', type: 'Button'}, // Hidden until local manipulators fixed\n    autoCenter: {label: 'Auto Center', type: 'Button'},\n    resetUVs: {label: 'Reset', type: 'Button'},\n\n    // SubObjects\n    //indices: { label: \"Selection\", type: 'TextArea', defaultValue: \"\", display: 'indexStyle' },\n    //componentType: { type: 'Object', hidden: true, defaultValue: 'Face' },\n\n    // For backward compatibility\n    //scale: { label: 'scale', type: 'Vec3', step: 0.1, defaultValue: {x: 0, y: 0, z: 0}, hidden: true },\n\n    //subdivisions: { label: 'Subdivisions', type: 'Number', defaultValue: 1, minValue: 0, maxValue: 4 },\n    //hardEdges: { label: 'Hard Edges', type: 'Boolean', defaultValue: false }\n  },\n\n  update: function(operator, primitive) {\n    const mesh = primitive.get('mesh');\n    if(!mesh) return primitive;\n\n    const options = {};\n\n    const mLength = operator.get('mLength');\n    const mWidth = operator.get('mWidth');\n    const mHeight = operator.get('mHeight');\n\n    options.uTile = operator.get('uTile');\n    options.vTile = operator.get('vTile');\n    options.center = operator.get('center');\n    options.rotation = operator.get('rotation');\n    options.mapChannel = operator.get('uvMapChannel');\n    options.scale = new THREE.Vector3(mWidth, mHeight, mLength);\n\n    const newPolymesh = applyUVMap(mesh, options);\n\n    return primitive.set('mesh', newPolymesh);;\n  }\n}\n//*//WIP\nfunction applyUVMap( polyMesh, uvMapOptions ) {\n\n  uvMapOptions = uvMapOptions || {};    // because all values can be defaulted, uvMapOptions should be allowed to be null/undefined too!\n\n  const rotation = uvMapOptions.rotation.multiplyScalar( 180 / Math.PI ) || new THREE.Vector3();\n  const scale = uvMapOptions.scale || new THREE.Vector3( 1, 1, 1 );\n  const center = uvMapOptions.center || new THREE.Vector3();\n  const mapChannel = ( uvMapOptions.mapChannel !== undefined ) ? uvMapOptions.mapChannel : 'default';\n  const uTile = (uvMapOptions.uTile !== undefined) ? uvMapOptions.uTile : 1.0;\n  const vTile = (uvMapOptions.vTile !== undefined) ? uvMapOptions.vTile : 1.0;\n\n  // Inverse matrix should be used, so uv map follows the gimzo\n  const matrixRotation = new THREE.Matrix4().makeRotationFromEuler( new THREE.Euler().setFromVector3( rotation, 'ZYX' ) );\n  const matrixRotationInv = new THREE.Matrix4().getInverse( matrixRotation );\n\n  const faceRangeOffsets = polyMesh.faceRangeOffsets;\n  const faceValueIndices = polyMesh.positions.faceValueIndices;\n  const values = polyMesh.positions.values;\n\n  const uvFaceValueIndices = new Uint32Array(faceValueIndices.length);\n  const uvValues = new ObjectArrayView(THREE.Vector2, faceValueIndices.length);\n\n  const vertex1 = new THREE.Vector3();\n  const vertex2 = new THREE.Vector3();\n  const faceNormal = new THREE.Vector3();\n  const newUV = new THREE.Vector2();\n\n  //for every face\n  let faceBegin = 0;\n  let faceEnd = 0;\n  let uvValueCounter = 0;\n  for(let i = 1; i<faceRangeOffsets.length; i++){\n    faceEnd = faceRangeOffsets[i];\n\n    //compute the face normal\n    faceNormal.multiplyScalar(0);\n    for ( let j = faceBegin; j<faceEnd; j++ ) {\n\n      let k = j + 1;\n      if(k >= faceEnd){\n        k = faceBegin;\n      }\n      values.getAt(faceValueIndices[j], vertex1);\n      values.getAt(faceValueIndices[k], vertex2);\n\n      faceNormal.x += (vertex1.y - vertex2.y) * (vertex1.z + vertex2.z);\n      faceNormal.y += (vertex1.z - vertex2.z) * (vertex1.x + vertex2.x);\n      faceNormal.z += (vertex1.x - vertex2.x) * (vertex1.y + vertex2.y);\n    }\n    faceNormal.normalize();\n\n    //for every index on that face\n    for (let j = faceBegin; j<faceEnd; j++) {\n\n      values.getAt(faceValueIndices[j], vertex1);\n\n      vertex1.sub(center);    // Translate to center\n      vertex1.applyMatrix4( matrixRotationInv );   // Apply Inverse rotation to the vertex (to follow gizmo)\n\n      boxUVMap( vertex1, faceNormal, scale, newUV );\n\n      // Apply tiling\n      if ( uTile !== 1.0 ) {\n        newUV.x *= uTile;\n      }\n\n      if ( vTile !== 1.0 ) {\n        newUV.y *= vTile;\n      }\n\n      // Avoid disconnected uv faces\n      //TODO check for duplicate uv's on that vertex and don't store it twice;\n\n      uvFaceValueIndices[j] = uvValueCounter;\n      uvValues.setAt(uvValueCounter++, newUV );\n    }\n\n    faceBegin = faceEnd;\n  }\n\n  const resultMesh = new PolyMesh(polyMesh);\n\n  const newUVMap = new PolyMap( {\n   faceRangeOffsets: faceRangeOffsets,\n   faceValueIndices: uvFaceValueIndices,\n   values: uvValues\n  });\n\n  resultMesh.uvMaps.set( mapChannel, newUVMap );\n\n  return resultMesh;\n};\n\n\nfunction boxUVMap( vertex, normal, scale, uv ) {\n\n  let s = 0;\n  let t = 0;\n\n  const x = vertex.x;\n  const y = vertex.y;\n  const z = vertex.z;\n  // Face normal\n  const nx = Math.abs( normal.x );\n  const ny = Math.abs( normal.y );\n  const nz = Math.abs( normal.z );\n\n  if (nx >= ny && nx >= nz) {\n    s = -z / scale.z + 0.5;\n    t = y / scale.y + 0.5;\n  }\n  if (ny >= nx && ny >= nz) {\n    s = x / scale.x + 0.5;\n    t = -z / scale.z + 0.5;\n  }\n  if (nz >= nx && nz >= ny) {\n    s = x / scale.x + 0.5;\n    t = y / scale.y + 0.5;\n  }\n\n  // Otherside of box is mirror of the other side\n  // However, only making them negative is not a good solution for tiling, so we add them to 1 to be flipped in positive side\n  if ( normal.x < 0 ) {\n    s = -s + 1;\n  }\n  if ( normal.y < 0 ) {\n    s = -s + 1;\n  }\n  if ( normal.z < 0 ) {\n    s = -s + 1;\n  }\n\n  uv.set( s, t );\n  return uv;\n};\n//*/\n\nexport default UVMap;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/UVMap.js\n **/","import skin from '../../polyMesh/geometric/operator/skin';\n\nconst Skin = {\n  schema: {\n    boneNodeList: { type: 'NodeList', label: 'Select Bones', plug: 'Bone' },\n    optionalRootBone: { type: 'Node', label: 'Optional Root Bone', defaultValue: null, filter: function(n) { return n.isBone(); } },\n  },\n\n  update: function(operator, primitive, attrs) {\n    const skinNode = attrs.node;\n    const skinWorldTransform = operator.getWorldTransform(skinNode.get('id'));\n\n    // Ensure we reference the bone node list, so that the dependency\n    // graph gets updated properly.\n    const nodeList = operator.get('boneNodeList');\n    const rootBone = operator.get('optionalRootBone');\n    let rootBoneIndex = -1;\n\n    //get world transforms for each bone\n    const boneWorldTransforms = nodeList.map((node) => {\n      return operator.getWorldTransform(node.get('id'));\n    }).toArray();\n\n    //get the index of the root bone\n    if( rootBone ) {\n      for( let i = 0, il = nodeList.size; i < il; i ++ ) {\n        let boneNode = nodeList.get( i );\n        if (boneNode == rootBone ) {\n          rootBoneIndex = i;\n          break;\n        }\n      }\n    }\n\n    const polyMesh = primitive.get('mesh');\n    const skinToWorldTransform = skinWorldTransform;\n\n    const newPolymesh = skin(polyMesh, skinToWorldTransform, boneWorldTransforms, rootBoneIndex);\n\n    return primitive.set('mesh', newPolymesh);\n  }\n}\n\nexport default Skin;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Skin.js\n **/","import THREE from 'three';\nimport PolyMap from '../model/PolyMap';\nimport PolyMesh from '../model/PolyMesh';\nimport Skinning from '../model/Skinning';\n\nexport default function skin( polyMesh, skinToWorldTransform, boneWorldTransforms, rootBoneIndex ) {\n  if(!polyMesh || !polyMesh.skinning){\n    //console.warn('Polymesh skinning is undefined.', polyMesh);\n    return polyMesh;\n  }\n\n  const skinning = polyMesh.skinning;\n  const newValues = skinning.applyTransforms(polyMesh.positions.values, skinToWorldTransform, boneWorldTransforms, rootBoneIndex);\n\n  const newPositions = new PolyMap( {\n    faceRangeOffsets: polyMesh.faceRangeOffsets,\n    faceValueIndices: polyMesh.positions.faceValueIndices,\n    values: newValues\n  });\n\n  const resultMesh = new PolyMesh(polyMesh);\n  resultMesh.positions = newPositions;\n\n\n  return resultMesh;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/operator/skin.js\n **/","\nimport box from '../../polyMesh/geometric/primitives/Box';\n\nconst Box = {\n  schema: {\n      depth: { type: 'Number', label: 'Depth', defaultValue: 1, step: 0.1, minValue: 0.0, animatable: true },\n      width: { type: 'Number', label: 'Width', defaultValue: 1,step: 0.1, minValue: 0.0, animatable: true },\n      height: { type: 'Number', label: 'Height', defaultValue: 1, step: 0.1,  minValue: 0.0, animatable: true },\n      depthSegments: { type: 'Number', label: 'Depth Segments', defaultValue: 1, minValue: 1, isInteger: true, animatable: true, i18n: {en: {}, xn: {label: \"XXX\"}, hn: {label: \"DX\"}}},\n      widthSegments: { type: 'Number', label: 'Width Segments', defaultValue: 1, minValue: 1, isInteger: true, animatable: true },\n      heightSegments: { type: 'Number', label: 'Height Segments', defaultValue: 1, minValue: 1, isInteger: true, animatable: true }\n  },\n\n  update: function(operator, primitive) {\n    const { width, height, depth, widthSegments, heightSegments, depthSegments } = operator.toJS();\n    return primitive.set('mesh', box(width, height, depth, widthSegments, heightSegments, depthSegments));\n  }\n}\n\nexport default Box;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Box.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ObjectsByName from '../../generic/container/ObjectsByName';\nimport PolyMesh from '../model/PolyMesh';\nimport PolyMap from '../model/PolyMap';\nimport removeDuplicateValues from '../operator/removeDuplicateValues';\n\nexport default function Box( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n  widthSegments = Math.floor(widthSegments) || 1;\n  heightSegments = Math.floor(heightSegments) || 1;\n  depthSegments = Math.floor(depthSegments) || 1;\n\n  const faceRangeOffsets = new Uint32Array((widthSegments*heightSegments)*2 + (widthSegments*depthSegments)*2 + (heightSegments*depthSegments)*2 + 1);//number of faces\n  const faceValueIndices = new Uint32Array(((widthSegments*heightSegments)*2 + (widthSegments*depthSegments)*2 + (heightSegments*depthSegments)*2)*4);//number of faces*4\n  const values = new ObjectArrayView( THREE.Vector3, (widthSegments+1)*(heightSegments+1)*2 + (widthSegments+1)*(depthSegments+1)*2 + (heightSegments+1)*(depthSegments+1)*2 );\n  const normals = new ObjectArrayView( THREE.Vector3, (widthSegments+1)*(heightSegments+1)*2 + (widthSegments+1)*(depthSegments+1)*2 + (heightSegments+1)*(depthSegments+1)*2 );\n  const uvValues = new ObjectArrayView( THREE.Vector2, (widthSegments+1)*(heightSegments+1)*2 + (widthSegments+1)*(depthSegments+1)*2 + (heightSegments+1)*(depthSegments+1)*2 );\n\n  const segment_width = width / widthSegments;\n  const segment_height = height / heightSegments;\n  const segment_depth = depth / depthSegments;\n\n  const width_half = width / 2;\n  const height_half = height / 2;\n  const depth_half = depth / 2;\n\n  let ix, iy, iz;\n  let indOffset = 0;\n\n  const newValue = new THREE.Vector3();\n  const newNormal = new THREE.Vector3();\n  const newUV = new THREE.Vector2();\n\n  //push utility for faceValueIndices\n  let indLengthMarker = 0;\n  function pushInd(value){\n    faceValueIndices[indLengthMarker] = value;\n    indLengthMarker++;\n  }\n\n  //populate FaceRangeOffsets\n  for(iz = 0, ix = 0; iz < faceRangeOffsets.length ; iz++, ix+=4){\n    faceRangeOffsets[iz] = ix;//0 4 8 12 16 20 ...\n  }\n\n\n  //front and back\n  for(iz = 0; iz < 2; iz++){//do twice, one for each face\n    for (iy = 0; iy < heightSegments; iy++){\n      for (ix = 0; ix < widthSegments; ix++){\n        pushInd( indOffset + iy * (widthSegments+1) + ix);\n        pushInd( indOffset + iy * (widthSegments+1) + ix + 1);\n        pushInd( indOffset + ( iy + 1 ) * (widthSegments+1) + ix + 1);\n        pushInd( indOffset + ( iy + 1 ) * (widthSegments+1) + ix);\n      }\n    }\n    indOffset += (widthSegments+1)*(heightSegments+1);\n  }\n\n  //top and bottom face\n  for(iy = 0; iy < 2; iy++){//do twice, one for each face\n    for (iz = 0; iz < depthSegments; iz++){\n      for (ix = 0; ix < widthSegments; ix++){\n        pushInd( indOffset + iz * (widthSegments+1) + ix);\n        pushInd( indOffset + iz * (widthSegments+1) + ix + 1);\n        pushInd( indOffset + ( iz + 1 ) * (widthSegments+1) + ix + 1);\n        pushInd( indOffset + ( iz + 1 ) * (widthSegments+1) + ix);\n      }\n    }\n    indOffset += (widthSegments+1)*(depthSegments+1);\n  }\n\n  //left and right face\n  for(ix = 0; ix < 2; ix++){//do twice, one for each face\n    for (iy = 0; iy < heightSegments; iy++){\n      for (iz = 0; iz < depthSegments; iz++){\n        pushInd( indOffset + iy * (depthSegments+1) + iz);\n        pushInd( indOffset + iy * (depthSegments+1) + iz + 1);\n        pushInd( indOffset + ( iy + 1 ) * (depthSegments+1) + iz + 1);\n        pushInd( indOffset + ( iy + 1 ) * (depthSegments+1) + iz);\n      }\n    }\n    indOffset += (depthSegments+1)*(heightSegments+1);\n  }\n\n\n  //push utility for faceValueIndices\n  let valLengthMarker = 0;\n  function pushVal(value){\n    values.setAt(valLengthMarker, value);\n    valLengthMarker++;\n  }\n\n  //push utility for uv's and normals\n  let uv_normLengthMarker = 0;\n  function push_uv_norm(uv, norm){\n    uvValues.setAt(uv_normLengthMarker, uv);\n    normals.setAt(uv_normLengthMarker, norm);\n    uv_normLengthMarker++;\n  }\n\n  //populate values, normals, and uv values\n  //front and back\n  for (iz = -1; iz < 2; iz+=2){//do twice for each side with -1 for first and +1 for second\n    for (iy = 0; iy < heightSegments+1; iy++){\n\n      //calculate y coord\n      let y = -1*iz*iy*segment_height + iz*height_half;\n\n      for (ix = 0; ix < widthSegments+1; ix++){\n        //calculate x coord\n        let x = ix*segment_width - width_half;\n\n        //set value\n        newValue.set(x, y, -1*iz*depth_half);\n        pushVal(newValue);\n\n        //set normal\n        newNormal.set(0, 0, -1*iz);\n\n        //set uv value\n        newUV.set(ix/widthSegments, iy/heightSegments);\n        push_uv_norm(newUV, newNormal);\n\n      }\n    }\n  }\n\n  //top and bottom\n  for (iy = -1; iy < 2; iy+=2){//do twice for each side with -1 for first and +1 for second\n    for (ix = 0; ix < widthSegments+1; ix++){\n\n      //calculate z coord\n      let x = -1*ix*iy*segment_width + iy*width_half;\n\n      for (iz = 0; iz < depthSegments+1; iz++){\n        //calculate x coord\n        let z = iz*segment_depth - depth_half;\n\n        //set value\n        newValue.set(x, -1*iy*height_half, z);\n        pushVal(newValue);\n\n        //set normal\n        newNormal.set(0, -1*iy, 0);\n\n        //set uv value\n        newUV.set(ix/widthSegments, iz/depthSegments);\n        push_uv_norm(newUV, newNormal);\n\n      }\n    }\n  }\n\n\n  //left and right\n  for (ix = -1; ix < 2; ix+=2){//do twice for each side with -1 for first and +1 for second\n    for (iz = 0; iz < depthSegments+1; iz++){\n\n      //calculate y coord\n      let z = -1*ix*iz*segment_depth + ix*depth_half;\n\n      for (iy = 0; iy < heightSegments+1; iy++){\n        //calculate z coord\n        let y = iy*segment_height - height_half;\n\n        //set value\n        newValue.set(-1*ix*width_half, y, z);\n        pushVal(newValue);\n\n        //set normal\n        newNormal.set(-1*ix, 0, 0);\n\n        //set uv value\n        newUV.set(iz/depthSegments, iy/heightSegments);\n        push_uv_norm(newUV, newNormal);\n\n      }\n    }\n  }\n\n\n  const polyMap = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: values\n  });\n\n  const normalMap = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: normals\n  });\n\n  const uvMap = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: uvValues\n  });\n\n  const uvMapsByName = new ObjectsByName();\n  let name = \"default\";\n  uvMapsByName.set( name, uvMap );\n\n\n  const polyMesh = new PolyMesh( {\n    faceRangeOffsets: faceRangeOffsets,\n    positions: polyMap,\n\n    materialIds: null,\n\n    normalMap: normalMap,\n    tangentMap: null,\n\n    uvMaps: uvMapsByName,\n    colorMaps: null\n  });\n\n\n  return removeDuplicateValues( polyMesh );\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/primitives/Box.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ObjectBuffer from '../../generic/container/ObjectBuffer';\nimport PolyMesh from '../model/PolyMesh';\nimport PolyMap from '../model/PolyMap';\n\nexport default function removeDuplicateValues( polyMesh, withLogging ) {\n\n  //removes indentical values in the values array and remaps the indices\n  //also has the side effect of removing values not used by a face\n\n  const l = withLogging || false;\n\n  const faceValueIndices = new Uint32Array(polyMesh.positions.faceValueIndices);\n  const values = polyMesh.positions.values;\n\n  const newValues = new ObjectBuffer(THREE.Vector3);\n\n  const valueMappings = new Map();\n  let newValuesLength = 0;\n\n  let key = 0;\n  let newIndex = 0;\n  const value = new THREE.Vector3;\n\n  for( let ix = 0; ix < faceValueIndices.length; ix++){\n\n    values.getAt(faceValueIndices[ix], value);\n    //hash function rounds to 3 decimal places and creates a 'unique' value for the vertex\n    //may fail if a vertex has a coordinate over 1,000,000 although even if that happens collision is unlikly\n    key = 1000000000000*Math.round(value.x*1000) + 100000*Math.round(value.y*1000) + Math.round(value.z*1000);\n\n    if( !valueMappings.has(key) ){\n      valueMappings.set(key, newValuesLength);//save location of value in map\n      newIndex = newValuesLength;\n      newValues.push(value);//push value to the newValues array\n      newValuesLength++;\n    }\n    else {\n      newIndex = valueMappings.get(key);\n    }\n\n    faceValueIndices[ix] = newIndex;//update indices array with new value\n\n  }\n\n  if(l) console.log('' + values.length + ' values reduced to ' + newValuesLength + ', duplicates removed: ' + (values.length-newValuesLength));\n\n  if(values.length === newValuesLength) return polyMesh;\n\n  const newValuesArray = new ObjectArrayView(THREE.Vector3, newValuesLength);\n  newValuesArray.fromArray(newValues.toArray());\n\n  const newPositions = new PolyMap( {\n   faceRangeOffsets: polyMesh.faceRangeOffsets,\n   faceValueIndices: faceValueIndices,\n   values: newValuesArray\n  });\n\n\n  const resultMesh = new PolyMesh( polyMesh );\n  resultMesh.positions = newPositions;\n\n  return resultMesh;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/operator/removeDuplicateValues.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/map\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/map.js\n ** module id = 240\n ** module chunks = 0 1\n **/","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.map');\nrequire('../modules/es7.map.to-json');\nmodule.exports = require('../modules/_core').Map;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/map.js\n ** module id = 241\n ** module chunks = 0 1\n **/","'use strict';\nvar strong = require('./_collection-strong');\n\n// 23.1 Map Objects\nmodule.exports = require('./_collection')('Map', function(get){\n  return function Map(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.1.3.6 Map.prototype.get(key)\n  get: function get(key){\n    var entry = strong.getEntry(this, key);\n    return entry && entry.v;\n  },\n  // 23.1.3.9 Map.prototype.set(key, value)\n  set: function set(key, value){\n    return strong.def(this, key === 0 ? 0 : key, value);\n  }\n}, strong, true);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es6.map.js\n ** module id = 242\n ** module chunks = 0 1\n **/","'use strict';\nvar dP          = require('./_object-dp').f\n  , create      = require('./_object-create')\n  , hide        = require('./_hide')\n  , redefineAll = require('./_redefine-all')\n  , ctx         = require('./_ctx')\n  , anInstance  = require('./_an-instance')\n  , defined     = require('./_defined')\n  , forOf       = require('./_for-of')\n  , $iterDefine = require('./_iter-define')\n  , step        = require('./_iter-step')\n  , setSpecies  = require('./_set-species')\n  , DESCRIPTORS = require('./_descriptors')\n  , fastKey     = require('./_meta').fastKey\n  , SIZE        = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      anInstance(that, C, NAME, '_i');\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        anInstance(this, C, 'forEach');\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)dP(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_collection-strong.js\n ** module id = 243\n ** module chunks = 0 1\n **/","'use strict';\nvar global         = require('./_global')\n  , $export        = require('./_export')\n  , meta           = require('./_meta')\n  , fails          = require('./_fails')\n  , hide           = require('./_hide')\n  , redefineAll    = require('./_redefine-all')\n  , forOf          = require('./_for-of')\n  , anInstance     = require('./_an-instance')\n  , isObject       = require('./_is-object')\n  , setToStringTag = require('./_set-to-string-tag')\n  , dP             = require('./_object-dp').f\n  , each           = require('./_array-methods')(0)\n  , DESCRIPTORS    = require('./_descriptors');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  if(!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function(target, iterable){\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base;\n      if(iterable != undefined)forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','),function(KEY){\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if(KEY in proto && !(IS_WEAK && KEY == 'clear'))hide(C.prototype, KEY, function(a, b){\n        anInstance(this, C, KEY);\n        if(!IS_ADDER && IS_WEAK && !isObject(a))return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    if('size' in proto)dP(C.prototype, 'size', {\n      get: function(){\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_collection.js\n ** module id = 244\n ** module chunks = 0 1\n **/","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx      = require('./_ctx')\n  , IObject  = require('./_iobject')\n  , toObject = require('./_to-object')\n  , toLength = require('./_to-length')\n  , asc      = require('./_array-species-create');\nmodule.exports = function(TYPE, $create){\n  var IS_MAP        = TYPE == 1\n    , IS_FILTER     = TYPE == 2\n    , IS_SOME       = TYPE == 3\n    , IS_EVERY      = TYPE == 4\n    , IS_FIND_INDEX = TYPE == 6\n    , NO_HOLES      = TYPE == 5 || IS_FIND_INDEX\n    , create        = $create || asc;\n  return function($this, callbackfn, that){\n    var O      = toObject($this)\n      , self   = IObject(O)\n      , f      = ctx(callbackfn, that, 3)\n      , length = toLength(self.length)\n      , index  = 0\n      , result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined\n      , val, res;\n    for(;length > index; index++)if(NO_HOLES || index in self){\n      val = self[index];\n      res = f(val, index, O);\n      if(TYPE){\n        if(IS_MAP)result[index] = res;            // map\n        else if(res)switch(TYPE){\n          case 3: return true;                    // some\n          case 5: return val;                     // find\n          case 6: return index;                   // findIndex\n          case 2: result.push(val);               // filter\n        } else if(IS_EVERY)return false;          // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_array-methods.js\n ** module id = 245\n ** module chunks = 0 1\n **/","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar isObject = require('./_is-object')\n  , isArray  = require('./_is-array')\n  , SPECIES  = require('./_wks')('species');\nmodule.exports = function(original, length){\n  var C;\n  if(isArray(original)){\n    C = original.constructor;\n    // cross-realm fallback\n    if(typeof C == 'function' && (C === Array || isArray(C.prototype)))C = undefined;\n    if(isObject(C)){\n      C = C[SPECIES];\n      if(C === null)C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_array-species-create.js\n ** module id = 246\n ** module chunks = 0 1\n **/","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./_export');\n\n$export($export.P + $export.R, 'Map', {toJSON: require('./_collection-to-json')('Map')});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es7.map.to-json.js\n ** module id = 247\n ** module chunks = 0 1\n **/","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof')\n  , from    = require('./_array-from-iterable');\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_collection-to-json.js\n ** module id = 248\n ** module chunks = 0 1\n **/","var forOf = require('./_for-of');\n\nmodule.exports = function(iter, ITERATOR){\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_array-from-iterable.js\n ** module id = 249\n ** module chunks = 0 1\n **/","\nimport sphere from '../../polyMesh/geometric/primitives/Sphere';\n\nconst Sphere = {\n  schema: {\n    radius: { label: 'Radius', type: 'Number', defaultValue: 0.5, minValue: 0.0, step: 0.1, animatable: true },\n    widthSegments: { label: 'Longitudinal Segments', type: 'Integer', defaultValue: 24, minValue: 3, maxValue: 200, step: 1, animatable: true },\n    heightSegments: { label: 'Latitudinal Segments', type: 'Integer', defaultValue: 24, minValue: 3, maxValue: 200, step: 1, animatable: true },\n    phiStart: { label: 'Phi Start', type: 'Number', defaultValue: 0, minValue: 0, maxValue: 360, step: 10, animatable: true },\n    phiLength: { label: 'Phi Length', type: 'Number', defaultValue: 360, minValue: 0, maxValue: 360, step: 10, animatable: true },\n    thetaStart: { label: 'Theta Start', type: 'Number', defaultValue: 0, minValue: 0, maxValue: 180, step: 10, animatable: true },\n    thetaLength: { label: 'Theta Length', type: 'Number', defaultValue: 180, minValue: 0, maxValue: 180, step: 10, animatable: true }\n  },\n\n  update: function(operator, primitive) {\n    const { radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength} = operator.toJS();\n    return primitive.set('mesh', sphere(radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength));\n  }\n}\n\nexport default Sphere;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Sphere.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport Lathe from './Lathe';\n\nexport default function Sphere( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ){\n\n  radius = radius || 50;\n\n  widthSegments = Math.max( 3, Math.floor( widthSegments || 8 ) );\n  heightSegments = Math.max( 2, Math.floor( heightSegments || 6 ) );\n\n  phiStart = THREE.Math.clamp( phiStart || 0, 0, Math.PI * 2 );\n  phiLength = THREE.Math.clamp( phiLength || Math.PI * 2, 0, Math.PI * 2 - phiStart );\n\n  thetaStart = THREE.Math.clamp( thetaStart || 0, 0, Math.PI );\n  thetaLength = THREE.Math.clamp( thetaLength || Math.PI, 0, Math.PI - thetaStart );\n\n  const inverseHeightSegments = 1.0 / heightSegments;\n  const points = new ObjectArrayView(THREE.Vector3, heightSegments + 1);\n  const norms  = new ObjectArrayView(THREE.Vector3, heightSegments + 1);\n  const pt = new THREE.Vector3();\n\n  for( let i = 0, il = heightSegments; i <= il; i ++ ) {\n\n    const theta = thetaStart + i * inverseHeightSegments * thetaLength;\n\n    pt.set(\n      radius * Math.sin( theta ),\n      - radius * Math.cos( theta ),\n      0\n    );\n\n    points.setAt( i, pt );\n    norms.setAt( i, pt.normalize() );\n  }\n\n  return Lathe( points, norms, widthSegments, phiStart, phiLength );\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/primitives/Sphere.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ObjectsByName from '../../generic/container/ObjectsByName';\nimport PolyMesh from '../model/PolyMesh';\nimport PolyMap from '../model/PolyMap';\nimport cleanPolyMesh from '../operator/cleanPolyMesh';\n\nexport default function Lathe( points, norms, segments, phiStart, phiLength ){\n  //assumes one normal per point\n  const positions = new ObjectArrayView( THREE.Vector3, (segments+1)*points.length );\n  const normals   = new ObjectArrayView( THREE.Vector3, (segments+1)*norms.length );\n  let positionCounter = 0;\n  const faceRangeOffsets = new Uint32Array( (segments)*(points.length-1) + 1 );//number of faces\n  const faceValueIndices = new Uint32Array( (segments)*(points.length-1) * 4 );//number of faces*4\n  let indCounter = 0;\n  const uvValues = new ObjectArrayView(THREE.Vector2, (segments+1)*points.length );\n  let uvCounter = 0;\n\n  segments = segments || 12;\n  phiStart = phiStart || 0;\n  phiLength = phiLength || 2 * Math.PI;\n\n  const inversePointLength = 1.0 / ( points.length - 1 );\n  const inverseSegments = 1.0 / segments;\n\n  faceRangeOffsets[0] = 0;\n  let faceCounter = 1;\n\n  const tempUV = new THREE.Vector2();\n  const vertex = new THREE.Vector3();\n  const normal = new THREE.Vector3();\n\n  const rotationMatrix4 = new THREE.Matrix4().identity();\n  const rotationMatrix = new THREE.Matrix3().identity();\n\n  for ( let i = 0, il = segments; i <= il; i ++ ) {\n\n    const phi = phiStart + i * inverseSegments * phiLength;\n    rotationMatrix4.copy( rotationMatrix4.makeRotationY( phi ) );\n    rotationMatrix.getNormalMatrix( rotationMatrix4 );\n\n    const u = i *inverseSegments;\n\n    for ( let j = 0, jl = points.length; j < jl; j ++ ) {\n\n      points.getAt( j, vertex );\n      norms.getAt( j, normal );\n\n      vertex.applyMatrix3( rotationMatrix );\n      normal.applyMatrix3( rotationMatrix );\n\n      vertex.set(\n        Math.round(vertex.x*1000)/1000,\n        Math.round(vertex.y*1000)/1000,\n        Math.round(vertex.z*1000)/1000);\n\n      normal.set(\n        Math.round(normal.x*1000)/1000,\n        Math.round(normal.y*1000)/1000,\n        Math.round(normal.z*1000)/1000);\n\n      positions.setAt(positionCounter, vertex );\n      normals.setAt(positionCounter, normal);\n\n      const v = j / (points.length - 1 );\n\n      tempUV.set( u, v );\n      uvValues.setAt( positionCounter++, tempUV );\n    }\n\n  }\n\n  const np = points.length;\n\n  for ( let i = 0, il = segments; i < il; i ++ ) {\n\n    for ( let j = 0, jl = points.length - 1; j < jl; j ++ ) {\n\n      const base = j + np * i;\n      const a = base;\n      const b = base + np;\n      const c = base + 1 + np;\n      const d = base + 1;\n\n      faceValueIndices[indCounter++] = a;\n      faceValueIndices[indCounter++] = b;\n      faceValueIndices[indCounter++] = c;\n      faceValueIndices[indCounter++] = d;\n      faceRangeOffsets[faceCounter++] = indCounter;\n    }\n\n  }\n\n  const positionsMap = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: positions\n  });\n\n  const normalMap = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: normals\n  });\n\n  const uvMap = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: uvValues\n  });\n\n  const uvMapsByName = new ObjectsByName();\n  const name = \"default\";\n  uvMapsByName.set( name, uvMap );\n\n\n  const polyMesh = {};\n  polyMesh.faceRangeOffsets = positionsMap.faceRangeOffsets;\n  polyMesh.positions = positionsMap;\n  polyMesh.normalMap = normalMap;\n  polyMesh.uvMaps = uvMapsByName;\n\n  polyMesh.materialIds = null;\n  polyMesh.tangentMap = null;\n  polyMesh.colorMaps = null;\n\n  return cleanPolyMesh(  new PolyMesh( polyMesh ) );\n  //return new PolyMesh( new PolyMesh( polyMesh ) );\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/primitives/Lathe.js\n **/","import removeDuplicateValues from '../operator/removeDuplicateValues';\nimport removeDuplicateIndices from '../operator/removeDuplicateIndices';\nimport removeInvalidSurfaces from '../operator/removeInvalidSurfaces';\nimport removeDuplicateNormals from '../operator/removeDuplicateNormals';\n\nexport default function cleanPolyMesh(polyMesh){\n  //not advisable to remove normals by default. can lead to fusing of normals on joints while doing animation\n  //return removeDuplicateNormals(removeInvalidSurfaces(removeDuplicateIndices(removeDuplicateValues(polyMesh))));\n  return removeInvalidSurfaces(removeDuplicateIndices(removeDuplicateValues(polyMesh)));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/operator/cleanPolyMesh.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ObjectsByName from '../../generic/container/ObjectsByName';\nimport ObjectBuffer from '../../generic/container/ObjectBuffer';\nimport PolyMesh from '../model/PolyMesh';\nimport PolyMap from '../model/PolyMap';\n\nexport default function removeDuplicateIndices ( polyMesh, withLogging ) {\n\n  const l = withLogging || false;\n\n  const faceRangeOffsets = new Uint32Array (polyMesh.positions.faceRangeOffsets);\n  const faceValueIndices = new Uint32Array (polyMesh.positions.faceValueIndices);\n  const normalFaceValueIndices = new Uint32Array (polyMesh.normalMap.faceValueIndices);\n\n  const uvMapNames = [];\n  const uvMapsNewIndices = [];\n  if(polyMesh.uvMaps){\n    for( let i = 0; i < polyMesh.uvMaps.length; i ++ ) {\n      uvMapNames.push(polyMesh.uvMaps.namesByIndex[i]);\n      uvMapsNewIndices.push(new Uint32Array (polyMesh.uvMaps.byName[uvMapNames[i]].faceValueIndices));\n    }\n  }\n\n  let newIndicesMarker = 0;\n\n  let previousFaceIndex = 0;\n  let currentFaceIndex = 0;\n  let currentFaceSize = 0;\n  let newFaceSize = 0;\n\n  //stores [index value, index];\n  const uniqueIndicesMap = new Map();\n\n  //Check every face\n  for( let i = 1; i < faceRangeOffsets.length; i++){\n\n    currentFaceIndex = faceRangeOffsets[i];\n    currentFaceSize = currentFaceIndex-previousFaceIndex;\n    newFaceSize = currentFaceSize;\n\n    //check unique\n    uniqueIndicesMap.clear();\n    for(let j = 0; j < currentFaceSize; j++){\n      uniqueIndicesMap.set(faceValueIndices[previousFaceIndex + j], previousFaceIndex + j);\n    }\n\n    newFaceSize = uniqueIndicesMap.size;\n    //special case face of size 1\n    if(newFaceSize === 1){\n      if(l && currentFaceSize > 1) console.log('Face ' + i + ' has only 1 unique value. Reducing to a point...');\n      faceRangeOffsets[i] = faceRangeOffsets[i-1] + 1;\n      faceValueIndices[newIndicesMarker++] = faceValueIndices[previousFaceIndex];\n\n    } else {\n      if(l && currentFaceSize === 2) console.log('Face ' + i + ' has only 2 unique values. Reducing to a line...');\n\n      faceRangeOffsets[i] = faceRangeOffsets[i-1] + newFaceSize;\n      let entries = uniqueIndicesMap.entries();\n\n      let element;\n      for(element of entries){\n        normalFaceValueIndices[newIndicesMarker] = normalFaceValueIndices[element[1]];\n        for(let k = 0; k<uvMapsNewIndices.length; k++){\n          uvMapsNewIndices[k][newIndicesMarker] = uvMapsNewIndices[k][element[1]];\n        }\n        faceValueIndices[newIndicesMarker++] = element[0];\n      }\n    }\n    previousFaceIndex = currentFaceIndex;\n  }\n\n  if(l) console.log('' + faceValueIndices.length + ' index values reduced to ' + newIndicesMarker + ', duplicates removed: ' + (faceValueIndices.length-newIndicesMarker));\n\n  const newIndices = new Uint32Array (faceValueIndices.subarray(0,newIndicesMarker));\n  const newNormalIndices = new Uint32Array (normalFaceValueIndices.subarray(0,newIndicesMarker));\n\n  const positions = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: newIndices,\n    values: polyMesh.positions.values\n  });\n\n  const results = {};\n  results.positions = positions;\n  results.faceRangeOffsets = results.positions.faceRangeOffsets;\n\n  const normalMap = new PolyMap( {\n    faceRangeOffsets: results.faceRangeOffsets,\n    faceValueIndices: newNormalIndices,\n    values: polyMesh.normalMap.values\n  });\n  results.normalMap = normalMap;\n\n  if(polyMesh.uvMaps){\n    let uvMaps = new ObjectsByName();\n    for( let i = 0; i < polyMesh.uvMaps.length; i ++ ) {\n      let name = polyMesh.uvMaps.namesByIndex[i];\n      const uvMap = new PolyMap( {\n        faceRangeOffsets: results.faceRangeOffsets,\n        faceValueIndices: uvMapsNewIndices[i],\n        values: polyMesh.uvMaps.byName[ name ].values\n      });\n      uvMaps.set( name, uvMap );\n    }\n    results.uvMaps = uvMaps;\n  }\n\n\n  return new PolyMesh( results );\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/operator/removeDuplicateIndices.js\n **/","import THREE from 'three';\nimport ObjectsByName from '../../generic/container/ObjectsByName';\nimport PolyMesh from '../model/PolyMesh';\nimport PolyMap from '../model/PolyMap';\nimport removeUnusedValues from '../operator/removeUnusedValues';\n\nexport default function removeInvalidSurfaces ( polyMesh, withLogging ) {\n\n  //this algorithm assumes no duplicate indices\n  //to remove those use removeDuplicateIndices first\n\n  function removeInvalidSurfacesFromMap(polymap, withLogging){\n    const l = withLogging || false;\n\n    const faceRangeOffsets = new Uint32Array(polymap.faceRangeOffsets);\n    const faceValueIndices = new Uint32Array(polymap.faceValueIndices);\n    const values = polymap.values;\n\n    let currentFaceIndex = 0;\n    let previousFaceIndex = 0;\n    let size = 0;\n\n    let newFacesMarker = 1;\n    let newIndicesMarker = 0;\n\n    for( let i = 1; i<faceRangeOffsets.length; i++){\n\n      currentFaceIndex = faceRangeOffsets[i];\n      size = currentFaceIndex - previousFaceIndex;\n\n\n      if( size > 2 ){\n        //store face\n        faceRangeOffsets[newFacesMarker] = faceRangeOffsets[newFacesMarker-1] + size;\n        newFacesMarker++;\n\n        //store all the indices on that face\n        for( let j = 0; j<size; j++){\n          faceValueIndices[newIndicesMarker++] = faceValueIndices[previousFaceIndex + j];\n        }\n      } else if (l) {\n        console.log('Removed face ' + i + ' of size ' + size);\n      }\n\n      previousFaceIndex = currentFaceIndex;\n\n    }\n\n    const newFaceRangeOffsets = new Uint32Array(faceRangeOffsets.subarray(0,newFacesMarker));\n    const newFaceValueIndices = new Uint32Array(faceValueIndices.subarray(0,newIndicesMarker));\n\n    let resultMap = new PolyMap({\n      faceRangeOffsets: newFaceRangeOffsets,\n      faceValueIndices: newFaceValueIndices,\n      values: values\n    });\n    return resultMap;\n  }\n\n  const positions = removeInvalidSurfacesFromMap(polyMesh.positions, withLogging);\n\n\n  const resultMesh = {};\n  resultMesh.faceRangeOffsets = positions.faceRangeOffsets;\n  resultMesh.positions = positions;\n  \n  if(polyMesh.normalMap){\n    let normals = removeInvalidSurfacesFromMap(polyMesh.normalMap, withLogging);\n    resultMesh.normalMap = normals;\n  }\n\n  if(polyMesh.uvMaps){\n    const uvMaps = new ObjectsByName();\n    for( let i = 0; i < polyMesh.uvMaps.length; i ++ ) {\n      const name = polyMesh.uvMaps.namesByIndex[i];\n      const uvMap = removeInvalidSurfacesFromMap(polyMesh.uvMaps.byName[name], withLogging);\n      uvMaps.set( name, uvMap );\n    }\n    resultMesh.uvMaps = uvMaps;\n  }\n\n  if(withLogging) console.log('' + (polyMesh.faceRangeOffsets.length-1) + ' faces reduced to ' + (resultMesh.faceRangeOffsets.length-1) + ', faces removed: ' + (polyMesh.faceRangeOffsets.length-resultMesh.faceRangeOffsets.length));\n\n  return removeUnusedValues( new PolyMesh( resultMesh ));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/operator/removeInvalidSurfaces.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport PolyMesh from '../model/PolyMesh';\nimport PolyMap from '../model/PolyMap';\n\nexport default function removeUnusedValues( polyMesh, withLogging ) {\n\n  const l = withLogging || false;\n\n  const faceValueIndices = new Uint32Array(polyMesh.positions.faceValueIndices);\n  const values = polyMesh.positions.values;\n\n  const newValues = new ObjectArrayView(THREE.Vector3, values.length);\n\n  const valueMappings = new Map();\n  let newValuesLength = 0;\n\n  let newIndex = 0;\n  const value = new THREE.Vector3;\n\n  for( let i = 0; i < faceValueIndices.length; i++){\n    if(!valueMappings.has(faceValueIndices[i])){\n      valueMappings.set(faceValueIndices[i], newValuesLength);\n      newIndex = newValuesLength;\n      values.getAt(faceValueIndices[i], value);\n      newValues.setAt(newValuesLength, value);\n      newValuesLength++;\n    } else {\n      newIndex = valueMappings.get(faceValueIndices[i]);\n    }\n\n    faceValueIndices[i] = newIndex;\n\n  }\n\n  if(l) console.log('' + values.length + ' values reduced to ' + newValuesLength + ', unused values removed: ' + (values.length-newValuesLength));\n\n  if(values.length === newValuesLength) return polyMesh;\n\n  const newValuesArray = new ObjectArrayView(THREE.Vector3, newValuesLength);\n  newValuesArray.fromArray(newValues.toArray());\n\n  const newPositions = new PolyMap( {\n    faceRangeOffsets: polyMesh.faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: newValuesArray\n  });\n\n  const resultMesh = new PolyMesh( polyMesh );\n  resultMesh.positions = newPositions;\n\n  return resultMesh;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/operator/removeUnusedValues.js\n **/","import cone from '../../polyMesh/geometric/primitives/Cone';\n\nconst Cone = {\n  schema: {\n    base: { type: 'Number', label: 'Base Radius', defaultValue: 0.5, minValue: 0.0, step: 0.1, animatable: true },\n    height: { type: 'Number', label: 'Height', defaultValue: 1, minValue: 0.0, step: 0.1, animatable: true },\n    radiusSegments: { label: 'Radial Segments', type: 'Integer', defaultValue: 12, minValue: 3, maxValue: 200, animatable: true },\n    heightSegments: { label: 'Height Segments', type: 'Integer', defaultValue: 1, minValue: 1, maxValue: 200, animatable: true },\n    openEnded:  { label: 'Open Base', type: 'Boolean', defaultValue: false, animatable: true }\n  },\n\n  update: function(operator, primitive) {\n    const { base, height, radiusSegments, heightSegments } = operator.toJS();\n    return primitive.set('mesh', cone(base, radiusSegments, height));\n  }\n}\n\nexport default Cone;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Cone.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport Lathe from './Lathe';\n\nexport default function Cone( radius, segments, height, thetaStart, thetaLength) {\n\n  radius = radius || 50;\n\n  segments = Math.max( 1, Math.floor( segments || 8 ) );\n  const segmentLength = radius/segments;\n  const heightSegmentLength = height/segments;\n\n  thetaStart = THREE.Math.clamp( thetaStart || 0, 0, Math.PI * 2 );\n  thetaLength = THREE.Math.clamp( thetaLength || Math.PI * 2, 0, Math.PI * 2 - thetaStart );\n\n  const points = new ObjectArrayView(THREE.Vector3, (segments + 1)*2);\n  const norms  = new ObjectArrayView(THREE.Vector3, (segments + 1)*2);\n  const normPt = new THREE.Vector3(0,-1,0);\n  const pt = new THREE.Vector3();\n\n  for( let i = 0, il = segments; i <= il; i ++ ) {\n\n    pt.set(i*segmentLength, -height/2, 0);\n\n    points.setAt( i, pt );\n    norms.setAt( i, normPt );\n  }\n\n  normPt.set(height, radius, 0);\n  normPt.normalize();\n  for( let i = 0, il = segments; i <= il; i++ ) {\n\n    pt.set(radius-i*segmentLength, i*heightSegmentLength - (height/2), 0);\n\n    points.setAt( segments+1+i, pt );\n    norms.setAt( segments+1+i, normPt );\n  }\n\n  const latheSegments = segments < 3 ? 3 : segments;\n  return Lathe( points, norms, latheSegments, thetaStart, thetaLength );\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/primitives/Cone.js\n **/","\n\nimport capsule from '../../polyMesh/geometric/primitives/Capsule';\n\nconst Capsule = {\n  schema: {\n    radius: { type: 'Number', label: 'Radius', defaultValue: 0.5, minValue: 0.1, step: 0.1 },\n    height: { type: 'Number', label: 'Height', defaultValue: 1, minValue: 0.1, step: 0.1 },\n    radiusSegments: { label: 'Radial Segments', type: 'Integer', defaultValue: 12, minValue: 4, maxValue: 100 },\n    heightSegments: { label: 'Height Segments', type: 'Integer', defaultValue: 10, minValue: 1, maxValue: 100 }\n  },\n\n  update: function(operator, primitive) {\n    const { radius, height, radiusSegments, heightSegments } = operator.toJS();\n    return primitive.set('mesh', capsule(radius, height, radiusSegments, heightSegments));\n  }\n}\n\nexport default Capsule;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Capsule.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport Lathe from './Lathe';\n\nexport default function Capsule( radius, height, radialSegments, heightSegments, thetaStart, thetaLength ){\n\n  radius = radius !== undefined ? radius: 20;\n  height = height !== undefined ? height : 100;\n\n  radialSegments = Math.max( 1, Math.floor( radialSegments || 8 ) );\n  heightSegments = Math.max( 1, Math.floor( heightSegments || 8 ) );\n\n  thetaStart = THREE.Math.clamp( thetaStart || 0, 0, Math.PI * 2 );\n  thetaLength = THREE.Math.clamp( thetaLength || Math.PI * 2, 0, Math.PI * 2 - thetaStart );\n\n  const heightSegmentLength = height/heightSegments;\n  const halfHeight = height/2;\n  const inverseRadialSegments = 1/radialSegments;\n\n  const points = new ObjectArrayView(THREE.Vector3, heightSegments+1 + (radialSegments+1)*2);\n  const norms  = new ObjectArrayView(THREE.Vector3, heightSegments+1 + (radialSegments+1)*2);\n  const pt = new THREE.Vector3();\n  const normPt = new THREE.Vector3();\n\n  //top\n  for( let i = 0, il = radialSegments; i <= il; i++){\n\n    let theta = i*(Math.PI/2)*inverseRadialSegments;\n\n    pt.set(\n      radius * Math.sin( theta ),\n      - radius * Math.cos( theta ) - halfHeight,\n      0\n    );\n\n    normPt.set(\n      Math.sin( theta ),\n      -Math.cos( theta ),\n      0\n    );\n\n    points.setAt( i, pt );\n    norms.setAt( i, normPt.normalize() );\n  }\n\n  //body\n  normPt.set(1,0,0);\n  for( let i = 0, il = heightSegments; i <= il; i ++ ) {\n\n    pt.set(radius, i*heightSegmentLength-halfHeight, 0);\n\n    points.setAt( i+radialSegments+1, pt );\n    norms.setAt(  i+radialSegments+1, normPt );\n  }\n\n  //bottom\n  for( let i = 0, il = radialSegments; i <= il; i++){\n\n    let theta = Math.PI/2 + i*(Math.PI/2)*inverseRadialSegments;\n\n    pt.set(\n      radius * Math.sin( theta ),\n      - radius * Math.cos( theta ) + halfHeight,\n      0\n    );\n\n    normPt.set(\n      Math.sin( theta ),\n      -Math.cos( theta ),\n      0\n    );\n\n    points.setAt( i+radialSegments+heightSegments+2, pt );\n    norms.setAt(  i+radialSegments+heightSegments+2, normPt.normalize() );\n  }\n\n  const latheSegments = radialSegments < 3 ? 3 : radialSegments;\n  return Lathe( points, norms, latheSegments, thetaStart, thetaLength );\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/primitives/Capsule.js\n **/","\n\nimport cylinder from '../../polyMesh/geometric/primitives/Cylinder';\n\nconst Cylinder = {\n  schema: {\n    radiusTop: { type: 'Number', label: 'Top Radius', defaultValue: 0.5, minValue: 0.0, step: 0.1, animatable: true },\n    radiusBottom: { type: 'Number', label: 'Bottom Radius', defaultValue: 0.5, minValue: 0.0, step: 0.1, animatable: true },\n    height: { type: 'Number', label: 'Height', defaultValue: 1, minValue: 0.0, step: 0.1, animatable: true },\n    radiusSegments: { label: 'Radial Segments', type: 'Integer', defaultValue: 24, minValue: 3, maxValue: 200, animatable: true },\n    heightSegments: { label: 'Height Segments', type: 'Integer', defaultValue: 1, minValue: 1, maxValue: 200, animatable: true },\n    openEnded:  { label: 'Open Ended', type: 'Boolean', defaultValue: false, animatable: true }\n  },\n\n  update: function(operator, primitive) {\n    const { radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded } = operator.toJS();\n    return primitive.set('mesh', cylinder(radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded));\n  }\n}\n\nexport default Cylinder;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Cylinder.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport Lathe from './Lathe';\n\nexport default function Cylinder( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n  radiusTop = radiusTop !== undefined ? radiusTop : 20;\n  radiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\n  height = height !== undefined ? height : 100;\n\n  openEnded = openEnded || false;\n\n  radialSegments = Math.max( 1, Math.floor( radialSegments || 8 ) );\n  heightSegments = Math.max( 1, Math.floor( heightSegments || 8 ) );\n\n  thetaStart = THREE.Math.clamp( thetaStart || 0, 0, Math.PI * 2 );\n  thetaLength = THREE.Math.clamp( thetaLength || Math.PI * 2, 0, Math.PI * 2 - thetaStart );\n\n  const heightSegmentLength = height/heightSegments;\n  const halfHeight = height/2;\n  const slope = (radiusBottom - radiusTop)/height;\n\n  const radialSegmentsLengthTop = radiusTop/radialSegments;\n  const radialSegmentsLengthBottom = radiusBottom/radialSegments;\n\n  let points;\n  let norms;\n\n  if(openEnded){\n    points = new ObjectArrayView(THREE.Vector3, heightSegments+1);\n    norms = new ObjectArrayView(THREE.Vector3, heightSegments+1);\n  } else {\n    points = new ObjectArrayView(THREE.Vector3, heightSegments+1 + (radialSegments+1)*2);\n    norms = new ObjectArrayView(THREE.Vector3, heightSegments+1 + (radialSegments+1)*2);\n  }\n\n  const pt = new THREE.Vector3();\n  const normPt = new THREE.Vector3(0,-1,0);\n\n  if(!openEnded){\n    //top\n    for( let i = 0, il = radialSegments; i <= il; i++){\n\n      pt.set(i*radialSegmentsLengthTop, -1*halfHeight, 0);\n      points.setAt( i, pt );\n      norms.setAt( i, normPt );\n    }\n  }\n\n  //body\n  normPt.set(height, radiusTop - radiusBottom, 0);\n  normPt.normalize();\n  for( let i = 0, il = heightSegments; i <= il; i ++ ) {\n\n    pt.set(slope*i*heightSegmentLength+radiusTop, i*heightSegmentLength-halfHeight, 0);\n\n    if(openEnded){\n      points.setAt( i , pt );\n      norms.setAt( i, normPt );\n    } else {\n      points.setAt( i + radialSegments + 1, pt );\n      norms.setAt(  i + radialSegments + 1, normPt);\n    }\n  }\n\n  if(!openEnded){\n    //bottom\n    normPt.set(0,1,0);\n\n    for( let i = 0, il = radialSegments; i <= il; i++){\n\n      pt.set(radiusBottom-i*radialSegmentsLengthBottom, 1*halfHeight, 0);\n      points.setAt( i+radialSegments+heightSegments+2, pt );\n      norms.setAt(  i+radialSegments+heightSegments+2, normPt);\n    }\n  }\n\n  const latheSegments = radialSegments < 3 ? 3 : radialSegments;\n  return Lathe( points, norms, latheSegments, thetaStart, thetaLength );\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/primitives/Cylinder.js\n **/","\nimport plane from '../../polyMesh/geometric/primitives/Plane';\n\nconst Plane = {\n  schema: {\n    width: { label: 'Width', type: 'Number', defaultValue: 4, minValue: 0.0, step: 0.1, animatable: true },\n    height: { label: 'Height', type: 'Number', defaultValue: 4, minValue: 0.0, step: 0.1, animatable: true },\n    widthSegments: { type: 'Number', label: 'Width Segments', defaultValue: 1, minValue: 1, isInteger: true, animatable: true },\n    heightSegments: { type: 'Number', label: 'Height Segments', defaultValue: 1, minValue: 1, isInteger: true, animatable: true }\n  },\n\n  update: function(operator, primitive) {\n    const { width, height, widthSegments, heightSegments } = operator.toJS();\n    return primitive.set('mesh', plane(width, height, widthSegments, heightSegments));\n  }\n}\n\nexport default Plane;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Plane.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport ObjectsByName from '../../generic/container/ObjectsByName';\nimport PolyMesh from '../model/PolyMesh';\nimport PolyMap from '../model/PolyMap';\n\nexport default function Plane( width, height, widthSegments, heightSegments ) {\n\n  widthSegments = Math.floor(widthSegments);\n  heightSegments = Math.floor(heightSegments);\n\n  const faceRangeOffsets = new Uint32Array(widthSegments*heightSegments+1);\n  const faceValueIndices = new Uint32Array(widthSegments*heightSegments*4);\n  const values = new ObjectArrayView( THREE.Vector3, (widthSegments+1)*(heightSegments+1) );\n  const normals = new ObjectArrayView( THREE.Vector3, (widthSegments+1)*(heightSegments+1) );\n  const uvValues = new ObjectArrayView( THREE.Vector2, (widthSegments+1)*(heightSegments+1) );\n\n  const segment_width = width / widthSegments;\n  const segment_height = height / heightSegments;\n\n  const width_half = width / 2;\n  const height_half = height / 2;\n\n  let iz, ix;\n\n  const newValue = new THREE.Vector3();\n  const newNormal = new THREE.Vector3(0, 1, 0);\n  const newUV = new THREE.Vector2();\n\n  //populate FaceRangeOffsets\n  for(iz = 0, ix = 0; iz < faceRangeOffsets.length ; iz++, ix+=4){\n    faceRangeOffsets[iz] = ix;//0 4 8 12 16 20 ...\n  }\n\n  //populate faceValueIndices\n  for (iz = 0; iz < heightSegments; iz++){\n    for (ix = 0; ix < widthSegments; ix++){\n      faceValueIndices[( iz * widthSegments + ix ) * 4]     = iz * (widthSegments+1) + ix;\n      faceValueIndices[( iz * widthSegments + ix ) * 4 + 1] = iz * (widthSegments+1) + ix + 1;\n      faceValueIndices[( iz * widthSegments + ix ) * 4 + 2] = ( iz + 1 ) * (widthSegments+1) + ix + 1;\n      faceValueIndices[( iz * widthSegments + ix ) * 4 + 3] = ( iz + 1 ) * (widthSegments+1) + ix;\n    }\n  }\n\n  //populate values, normals, and uv values\n  for (iz = 0; iz < heightSegments+1; iz++){\n\n    //calculate z coord\n    const z = iz*segment_height - height_half;\n    \n    for (ix = 0; ix < widthSegments+1; ix++){\n      //calculate x coord\n      const x = ix*segment_width - width_half;\n\n      //set value\n      newValue.set(x, 0, -z);\n      values.setAt(( iz * (widthSegments+1) + ix), newValue);\n\n      //set normal\n      normals.setAt(( iz * (widthSegments+1) + ix), newNormal);\n\n      //set uv value\n      newUV.set(ix/widthSegments, iz/heightSegments);\n      uvValues.setAt(( iz * (widthSegments+1) + ix), newUV);\n    \n    }\n  \n  }\n\n\n  const polyMap = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: values\n  });\n\n  const normalMap = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: normals\n  });\n\n  const uvMap = new PolyMap( {\n    faceRangeOffsets: faceRangeOffsets,\n    faceValueIndices: faceValueIndices,\n    values: uvValues\n  });\n\n  const uvMapsByName = new ObjectsByName();\n  const name = \"default\";\n  uvMapsByName.set( name, uvMap );\n\n\n  const polyMesh = new PolyMesh( {\n    faceRangeOffsets: faceRangeOffsets,\n    positions: polyMap,\n\n    materialIds: null,\n\n    normalMap: normalMap,\n    tangentMap: null,\n\n    uvMaps: uvMapsByName,\n    colorMaps: null\n  });\n\n\n  return polyMesh;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/primitives/Plane.js\n **/","import torus from '../../polyMesh/geometric/primitives/Torus';\n\nconst Torus = {\n  schema: {\n    radius: { label: 'Radius', type: 'Number', defaultValue: 0.3, minValue: 0.0, step: 0.1, animatable: true },\n    tube: { label: 'Tube Radius', type: 'Number', defaultValue: 0.2, minValue: 0.0, step: 0.1, animatable: true },\n    radialSegments: { label: 'Longitudinal Segments', type: 'Integer', defaultValue: 24, minValue: 3, step: 1, animatable: true },\n    tubularSegments: { label: 'Latitudinal Segments', type: 'Integer', defaultValue: 24, minValue: 3, step: 1, animatable: true },\n    phiStart: { label: 'Phi Start', type: 'Number', defaultValue: 0, minValue: 0, maxValue: 360, step: 10, animatable: true },\n    phiLength: { label: 'Phi Length', type: 'Number', defaultValue: 360, minValue: 0, maxValue: 360, step: 10, animatable: true },\n    thetaStart: { label: 'Theta Start', type: 'Number', defaultValue: 0, minValue: 0, maxValue: 360, step: 10, animatable: true },\n    thetaLength: { label: 'Theta Length', type: 'Number', defaultValue: 360, minValue: 0, maxValue: 360, step: 10, animatable: true }\n  },\n\n  update: function(operator, primitive) {\n    const { radius, tube, radialSegments, tubularSegments, phiStart, phiLength, thetaStart, thetalength } = operator.toJS();\n    return primitive.set('mesh', torus(radius, tube, radialSegments, tubularSegments, phiStart, phiLength, thetaStart, thetalength));\n  }\n}\n\nexport default Torus;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Torus.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport Lathe from './Lathe';\n\nexport default function Torus( radius, tube, radialSegments, tubularSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n  radialSegments = Math.floor(radialSegments) || 1;\n  tubularSegments = Math.floor(tubularSegments) || 1;\n\n  radius = radius || 100;\n  tube = tube || 40;\n\n  radialSegments = Math.max( radialSegments || 8, 3 );\n  tubularSegments = Math.max( tubularSegments || 6, 3 );\n\n  phiStart = THREE.Math.clamp( phiStart || 0, 0, Math.PI * 2 );\n  phiLength = THREE.Math.clamp( phiLength || Math.PI * 2, 0, Math.PI * 2 - phiStart );\n\n  thetaStart = THREE.Math.clamp( thetaStart || 0, 0, Math.PI * 2 );\n  thetaLength = THREE.Math.clamp( thetaLength || Math.PI * 2, 0, Math.PI * 2 - thetaStart );\n\n  const inverseTubularSegments = 1.0 / tubularSegments;\n  const points = new ObjectArrayView(THREE.Vector3, tubularSegments + 1);\n  const norms  = new ObjectArrayView(THREE.Vector3, tubularSegments + 1);\n  const pt = new THREE.Vector3();\n  const normPt = new THREE.Vector3();\n\n  for ( let i = 0, il = tubularSegments; i <= il; i ++ ) {\n\n    const theta = thetaStart + i * inverseTubularSegments * thetaLength;\n\n    pt.set(\n      radius + tube * Math.cos( theta ),\n      tube * Math.sin( theta ),\n      0\n    );\n\n    normPt.set(\n      Math.cos( theta ),\n      Math.sin( theta ),\n      0\n    );\n\n    points.setAt( i, pt );\n    norms.setAt( i, normPt.normalize() );\n  }\n\n  return Lathe( points, norms, radialSegments, phiStart, phiLength );\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/primitives/Torus.js\n **/","import disk from '../../polyMesh/geometric/primitives/Disk';\n\nconst Disk = {\n  schema: {\n    radius: { type: 'Number', label: 'Radius', defaultValue: 0.5, minValue: 0.0, step: 0.1, animatable: true },\n    segments: { type: 'Integer', label: 'Segments', defaultValue: 12, minValue: 3, maxValue: 200, animatable: true },\n    thetaStart: { label: 'Theta Start', type: 'Number', defaultValue: 0, minValue: 0, maxValue: 360, step: 10, animatable: true },\n    thetaLength: { label: 'Theta Length', type: 'Number', defaultValue: 360, minValue: 0, maxValue: 360, step: 10, animatable: true },\n    removeDuplicate: { label: 'Remove Duplicate Vertices', type: 'Boolean', defaultValue: false, hidden: true }\n  },\n\n  update: function(operator, primitive) {\n    const { radius, segments, thetaStart, thetaLength } = operator.toJS();\n    return primitive.set('mesh', disk(radius, segments, thetaStart, thetaLength));\n  }\n}\n\nexport default Disk;\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/PolyMesh/Disk.js\n **/","import THREE from 'three';\nimport ObjectArrayView from '../../generic/container/ObjectArrayView';\nimport Lathe from './Lathe';\n\nexport default function Disk( radius, segments, thetaStart, thetaLength) {\n\n  radius = radius || 50;\n\n  segments = Math.max( 1, Math.floor( segments || 8 ) );\n  const segmentLength = radius/segments;\n\n  thetaStart = THREE.Math.clamp( thetaStart || 0, 0, Math.PI * 2 );\n  thetaLength = THREE.Math.clamp( thetaLength || Math.PI * 2, 0, Math.PI * 2 - thetaStart );\n\n  const points = new ObjectArrayView(THREE.Vector3, segments + 1);\n  const norms  = new ObjectArrayView(THREE.Vector3, segments + 1);\n  const normPt = new THREE.Vector3(0,1,0);\n  const pt = new THREE.Vector3();\n\n  for( let i = 0, il = segments; i <= il; i ++ ) {\n\n    pt.set(radius-i*segmentLength, 0, 0);\n\n    points.setAt( i, pt );\n    norms.setAt( i, normPt );\n  }\n\n  const latheSegments = segments < 3 ? 3 : segments;\n  return Lathe( points, norms, latheSegments, thetaStart, thetaLength);\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyMesh/geometric/primitives/Disk.js\n **/","const PolyMeshProperties = {\n  schema: {\n    visible: { label: 'Visible', type: 'Boolean', defaultValue: true, animatable: true },\n    prefetch: { label: 'Pre-fetch mesh', type: 'Boolean', defaultValue: false},\n  }\n}\n\nconst MaterialProperties = {\n  schema: {\n    prefetch: { label: 'Pre-fetch Material', type: 'Boolean', defaultValue: false}\n  },\n}\n\nconst ImageProperties = {\n  schema: {\n    prefetch: { label: 'Pre-fetch Image', type: 'Boolean', defaultValue: false}\n  },\n}\n\nconst Default = {\n  schema: {\n    visible: { label: 'Visible', type: 'Boolean', defaultValue: true, animatable: true },\n  }\n}\n\nexport default { Default, PolyMeshProperties, MaterialProperties, ImageProperties }\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/Properties.js\n **/","import THREE from 'three'\nimport { getLocalTransform } from '../modules/scene'\n\nconst Transform = {\n  schema: {\n    translation: { label: \"Translation\", type: 'Vec3', step: 0.1, defaultValue: {x: 0, y: 0, z: 0}, animatable: true },\n    rotation: { label: \"Rotation\", type: 'Vec3', step: 1.0, defaultValue: {x: 0, y: 0, z: 0}, animatable: true },\n    scale: { label: \"Scale\", type: 'Vec3', step: 0.01, defaultValue: {x: 1, y: 1, z: 1}, animatable: true }, // Scale's step must be 0.01 as 1 percent\n    shear: { label:\"Shear\", type: 'Vec3', step: 0.1, defaultValue:{x:0, y:0, z:0}, animatable: true},\n    rotateOrder: { label: 'Rotate Order', type: 'Options', display: 'Dropdown',\n      values: ['XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX'], defaultValue: 'ZYX' },\n    preRotation: { label: \"Pre-Rotation\", type: 'Vec3', step: 1.0, defaultValue: {x:0, y:0, z:0} },\n    rotatePivotOffset: { label: \"Rotate Pivot Offset\", type: 'Vec3', step:0.1, defaultValue: {x:0, y:0, z:0}},\n    scalePivotOffset: { label: \"Scale Pivot Offset\", type: 'Vec3', step: 0.1, defaultValue: {x:0, y:0, z:0}},\n    localRotatePivot: { label: \"Local Rotate Pivot\", type: 'Vec3', step: 0.1, defaultValue: {x:0, y:0, z:0}}, \n    localScalePivot: { label: \"Local Scale Pivot\", type: 'Vec3', step: 0.1, defaultValue: {x:0, y:0, z:0}},    \n  },\n\n  update: function(operator, primitive) {\n    return primitive.set('transform', getLocalTransform(operator));\n  }\n}\n\n\nconst LookAt = {\n  schema: {\n    target: { label: 'LookAt Target', type: 'Plug', plug: 'Transform'},\n    orientation: { label: 'Orientation', type: 'Vec3', defaultValue: {x:0, y:0, z:0}, animatable: true },\n\n    lookAtAxis: { label: 'Look Axis', type: 'Options', display: 'Dropdown', defaultValue: 'Z',\n      labels: ['X', 'Y', 'Z'], values: ['X', 'Y', 'Z'] },\n    flipLookAtAxis: { label: 'Flip Look Axis', type: 'Boolean', defaultValue: true },\n\n    upAxis: { label: 'Up Axis', type: 'Options', display: 'Dropdown', defaultValue: 'Y',\n      labels: ['X', 'Y', 'Z'], values: ['X', 'Y', 'Z'] },\n    flipUpAxis: { label: 'Flip Up Axis', type: 'Boolean', defaultValue: false }\n  }\n}\n\nconst BoneTransform = {\n  schema: {\n    translation: { label: \"Translation\", type: 'Vec3', step: 0.1, defaultValue: {x:0, y:0, z:0}, animatable: true },\n    rotation: { label: \"Rotation\", type: 'Vec3', step: 1.0, defaultValue: {x:0, y:0, z:0}, animatable: true },\n    scale: { label: \"Scale\", type: 'Vec3', step: 0.1, defaultValue: {x: 1, y: 1, z: 1}, animatable: true },\n    rotateOrder: { label: 'Rotate Order', type: 'Options', display: 'Dropdown',\n      values: ['XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX'], defaultValue: 'ZYX' },\n    preRotation: { label: \"Pre-Rotation\", type: 'Vec3', step: 1.0, defaultValue: {x:0, y:0, z:0} }, // hidden: true\n    rotateAxis: { label: \"Rotate Axis\", type: 'Vec3', step: 1.0, defaultValue: {x:0, y:0, z:0} },\n  },\n\n  update: function(operator, primitive) {\n\n\n    const translation = operator.get('translation');\n    const rotation = operator.get('rotation');\n    const scale = operator.get('scale');\n\n    const rotateOrder = operator.get('rotateOrder');\n    const preRotation = operator.get('preRotation');\n    const rotateAxis = operator.get('rotateAxis');\n\n    const translationM = new THREE.Matrix4().makeTranslation(translation.x, translation.y, translation.z);\n    const rotationRadians = new THREE.Vector3().copy(rotation).multiplyScalar(Math.PI / 180);\n    const rotationM = new THREE.Matrix4().makeRotationFromEuler(new THREE.Euler(rotationRadians.x, rotationRadians.y, rotationRadians.z, 'ZYX'));\n    const shearM = new THREE.Matrix4();\n    const scaleM = new THREE.Matrix4().makeScale(scale.x, scale.y, scale.z);\n\n    const preRotationRadians = new THREE.Vector3().copy(preRotation).multiplyScalar(Math.PI / 180);\n    const lPreRotationM = new THREE.Matrix4().makeRotationFromEuler( new THREE.Euler(preRotationRadians.x, preRotationRadians.y, preRotationRadians.z, 'ZYX'));\n\n    const rotateAxisRadians  = new THREE.Vector3().copy(rotateAxis).multiplyScalar(Math.PI / 180);\n    const lPostRotationM = new THREE.Matrix4().makeRotationFromEuler( new THREE.Euler(rotateAxisRadians.x, rotateAxisRadians.y, rotateAxisRadians.z, 'ZYX'));\n\n    const localTransform = new THREE.Matrix4().multiplyMatricesList( [\n      translationM, lPreRotationM, rotationM, lPostRotationM, scaleM\n    ] );\n\n    return primitive.set('transform', localTransform);\n  }\n\n}\n\nexport default { Transform, BoneTransform, LookAt };\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/operators/Transform.js\n **/","import { chain, values } from 'ramda';\nimport createReducer from './createReducer';\nimport applyMiddleware from './applyMiddleware';\nimport createStore from './createStore';\n\nexport default function buildStore(reducers, operatorRecords, primitives, middleware) {\n  const reducer = createReducer(reducers, operatorRecords);\n  const records = chain(values, values(operatorRecords)).concat(values(primitives));\n  const store = createStore(reducer, applyMiddleware(...middleware));\n  store.addRecords(records);\n  return store;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/index.js\n **/","import { Map, is } from 'immutable';\nimport { chain, reduce, values } from 'ramda';\n\nexport default function(reducers, operatorRecords) {\n  let keys = Object.keys(reducers);\n\n  let defaultState = reduce((state, key) => {\n    return state.set(key, reducers[key]());\n  }, Map(), keys);\n\n  return function reducer(state = defaultState, action, createEvent) {\n    return reduce((state, key) => {\n      let previousStateForKey = state.get(key);\n      let nextStateForKey = reducers[key](previousStateForKey, action, state, createEvent);\n      return is(previousStateForKey, nextStateForKey) ? state : state.set(key, nextStateForKey);\n    }, state, keys);\n  }\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/createReducer.js\n **/","import { compose } from 'ramda';\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nexport default function applyMiddleware(...middlewares) {\n  return (createStore) => (reducer, initialState, enhancer) => {\n    var store = createStore(reducer, initialState, enhancer)\n    let { dispatch } = store;\n    var chain = []\n\n    var middlewareAPI = {\n      get: store.get,\n      getIn: store.getIn,\n      getState: store.getState,\n      getTranslator: store.getTranslator,\n      getDerived: store.getDerived,\n      dispatch: (action) => dispatch(action),\n      read: store.read,\n      write: store.write,\n      callApi: store.callApi,\n    }\n\n    chain = middlewares.map(middleware => middleware(middlewareAPI))\n    dispatch = compose(...chain)(store.dispatch)\n\n    return {\n      ...store,\n      dispatch,\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/applyMiddleware.js\n **/","import isPlainObject from './isPlainObject'\nimport transitImmutable from './transitImmutable';\nimport rsvp from 'rsvp';\n\nlet raf = __BROWSER__ ? requestAnimationFrame : setImmediate;\n\nlet vrDisplay=null;\nlet vrRequestAnimationFrame = null;\n\nfunction changeRequestAnimationFrame(displays){\n  if(displays.length>0 && displays[0].capabilities.hasExternalDisplay){\n    vrRequestAnimationFrame = displays[0].requestAnimationFrame;\n    vrDisplay = displays[0];\n  }\n}\n\nif ( navigator.getVRDisplays ) {\n\n  navigator.getVRDisplays().then( changeRequestAnimationFrame );\n\n} else if ( navigator.getVRDevices ) {\n\n  // Deprecated API.\n  navigator.getVRDevices().then( changeRequestAnimationFrame );\n\n}\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nexport var ActionTypes = {\n  INIT: '@@redux/INIT'\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [initialState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nexport default function createStore(reducer, initialState, enhancer) {\n  if (typeof initialState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = initialState;\n    initialState = undefined;\n  }\n  if (typeof enhancer === 'function') {\n    return enhancer(createStore)(reducer, initialState);\n  }\n\n  let transitInstance;\n  let currentReducer = reducer\n  let currentState = initialState\n  const derived = {};\n  const listeners = []\n  const events = [];\n  let isDispatching = false\n  let records = [];\n  let rollbar = false;\n  let currentTranslator = null;\n  let currentNavigator = null;\n  let apiFunction = null;\n\n  function createEvent(type, ...args) {\n    events.push({type, args});\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    return currentState\n  }\n\n  function getIn(path) {\n    return currentState.getIn(path);\n  }\n\n  function get(key) {\n    return currentState.get(key);\n  }\n\n  function setDerived(key, value) {\n    derived[key] = {value, state: currentState};\n    return value;\n  }\n\n  function getDerived(key, fn) {\n    if (derived[key] && derived[key].state === currentState) {\n      return derived[key].value;\n    };\n    let prev = derived[key] ? derived[key].value : undefined;\n\n    const presentState = currentState;\n    derived[key] = {\n      value: fn(this, prev), // FIXME this!\n      state: presentState\n    }\n    return derived[key].value;\n  }\n\n  function getTranslator() {\n    return currentTranslator;\n  };\n\n  function setTranslator(translator) {\n    currentTranslator = translator;\n  };\n\n  function setApi(api) {\n    apiFunction = api;\n  };\n\n  function hasApi() {\n    return !!apiFunction;\n  };\n\n  function callApi(...args) {\n    return apiFunction(this, ...args);\n  };\n\n  function getNavigator() {\n    return currentNavigator;\n  };\n\n  function setNavigator(translator) {\n    currentNavigator = translator;\n  };\n\n  /**\n   * Adds 'Record' types required for reading/writing transit format.\n   */\n  function addRecords(newRecords) {\n    records = records.concat(newRecords);\n  };\n\n  function initTransit() {\n    transitInstance = transitImmutable.withRecords(records, 'NoneNoOp');\n  };\n\n  function read(transitString) {\n    if (!transitInstance) initTransit();\n    return transitInstance.fromJSON(transitString);\n  };\n\n  function write(data) {\n    if (!transitInstance) initTransit();\n    try {\n      return transitInstance.toJSON(data); //sceneGraph: Map(), files: Map()});\n    } catch (e) {\n      console.log('Transit write error', e);\n    }\n  };\n\n  function useRollbar(rb) {\n    rollbar = rb;\n  };\n\n  function error(err, label) {\n    if (label) console.error(label);\n    if (rollbar) {\n      rollbar.error(err);\n    } else {\n      throw err;\n      //console.assert(false, err);\n    }\n  };\n\n  rsvp.on('error', error);\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    listeners.push(listener)\n    var isSubscribed = true\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return\n      }\n\n      isSubscribed = false\n      var index = listeners.indexOf(listener)\n      listeners.splice(index, 1)\n    }\n  }\n\n  // Custom debounce function, lodash.debounce is bigger and slower.\n  function batchNotify() {\n    var notifying = false;\n    var requestNotify = false;\n\n    function notify() {\n      if (notifying) {\n        requestNotify = true;\n      } else {\n        notifying = true;\n\n        let context = window, rafCall = raf;\n        const vrPresent = vrDisplay && currentState.getIn(['player', 'renderingMode']) === 'vr';\n        if(vrPresent){\n          context = vrDisplay;\n          rafCall = vrRequestAnimationFrame;\n        }\n\n        rafCall.call(context, () => {\n          // Actual notify code\n          try {\n          var evs = events.splice(0, events.length);\n          listeners.slice().forEach(listener => listener(evs))\n          } catch (e) {\n            error(e);\n          }\n\n          notifying = false;\n          if (requestNotify) {\n            if(!vrPresent) requestNotify = false;\n            notify();\n          }\n        });\n      }\n    }\n\n    return notify;\n  }\n\n  const notifyListenersBatched = batchNotify();\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(\n        'Actions must be plain objects. ' +\n        'Use custom middleware for async actions.'\n      )\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(\n        'Actions may not have an undefined \"type\" property. ' +\n        'Have you misspelled a constant?'\n      )\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.')\n    }\n\n    try {\n      isDispatching = true\n      currentState = currentReducer(currentState, action, createEvent)\n    } catch (e) {\n      error(e);\n    } finally {\n      isDispatching = false\n    }\n\n    notifyListenersBatched();\n    // listeners.slice().forEach(listener => listener())\n\n    return rsvp.Promise.resolve(action.resolve ? action.resolve : action.payload);\n  }\n\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    currentReducer = nextReducer\n    dispatch({ type: ActionTypes.INIT })\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT })\n\n  return {\n    dispatch,\n    subscribe,\n    getState,\n    getIn,\n    get,\n    replaceReducer,\n    setDerived,\n    getDerived,\n    setTranslator,\n    getTranslator,\n    setNavigator,\n    getNavigator,\n    addRecords,\n    read,\n    write,\n    useRollbar,\n    error,\n    setApi,\n    hasApi,\n    callApi,\n    createEvent,\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/createStore.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/set-immediate\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/set-immediate.js\n ** module id = 275\n ** module chunks = 0 1\n **/","require('../modules/web.immediate');\nmodule.exports = require('../modules/_core').setImmediate;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/set-immediate.js\n ** module id = 276\n ** module chunks = 0 1\n **/","var $export = require('./_export')\n  , $task   = require('./_task');\n$export($export.G + $export.B, {\n  setImmediate:   $task.set,\n  clearImmediate: $task.clear\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/web.immediate.js\n ** module id = 277\n ** module chunks = 0 1\n **/","// Modified from:\n// https://github.com/thomasboyt/transit-immutable-js/blob/records-support/index.js\n\n// With changes:\n//  * Records can't simply be serialized with 'toJS', since\n//    records may contain other composite types.\n//  * Serialize with array for efficiency.\n//  * Build records into an object first instead of using 'asMutable',\n//    due to weird bug with 'id' containing records.\n\nimport transit from 'transit-js';\nimport Immutable from 'immutable';\n\nfunction createReader(recordMap, defaultRecord) {\n  return transit.reader('json', {\n    mapBuilder: {\n      init: function() {\n        return {};\n      },\n      add: function(m, k, v) {\n        m[k] = v;\n        return m;\n      },\n      finalize: function(m) {\n        return m;\n      }\n    },\n    handlers: {\n      iM: function(v) {\n        var o = {};\n        for (var i = 0; i < v.length; i += 2) {\n          o[v[i]] = v[i+1];\n        }\n        return new Immutable.Map(o);\n      },\n      iL: function(v) {\n        return Immutable.List(v);\n      },\n      iR: function(v) {\n        var Record = recordMap[v[0]];\n        if (!Record) {\n          var msg = ('Tried to deserialize Record type named `' + v[0] + '`, ' +\n                     'but no type with that name was passed to withRecords()');\n          if (defaultRecord) {\n            if (console) console.error(msg);\n            return new recordMap[defaultRecord]();\n          } else {\n            throw new Error(msg);\n          }\n        }\n        var o = {};\n        for (var i = 1; i < v.length; i += 2) {\n          o[v[i]] = v[i+1];\n        }\n        return new Record(o);\n      }\n    }\n  });\n\n}\n\nvar reader = createReader([]);\nvar writer = createWriter(false, []);\n\nexports.toJSON = toJSON;\nfunction toJSON(data) {\n  return writer.write(data);\n}\n\nexports.fromJSON = fromJSON;\nfunction fromJSON(data) {\n  return reader.read(data);\n}\n\nfunction withFilter(predicate) {\n  var filteredWriter = createWriter(predicate, []);\n  return {\n    toJSON: function(data) {\n      return filteredWriter.write(data);\n    },\n    fromJSON: fromJSON\n  };\n}\nexports.withFilter = withFilter;\n\nfunction withRecords(records, defaultRecord, predicate) {\n  var recordMap = {};\n\n  records.forEach(function(RecordType) {\n    var rec = new RecordType({});\n\n    if (!rec._name) {\n      throw new Error('Cannot (de)serialize Record() without a name field');\n    }\n\n    recordMap[rec._name] = RecordType;\n  });\n  var recordWriter = createWriter(predicate, recordMap);\n  var recordReader = createReader(recordMap, defaultRecord);\n\n  return {\n    toJSON: function(data) {\n      return recordWriter.write(data);\n    },\n    fromJSON: function(data) {\n      return recordReader.read(data);\n    }\n  };\n}\nexports.withRecords = withRecords;\n\nfunction createWriter(predicate, recordMap) {\n  var handlers = transit.map([\n    Immutable.Map, transit.makeWriteHandler({\n      tag: function() {\n        return 'iM';\n      },\n      rep: function(m) {\n        var i = 0, a = new Array(2 * m.size);\n        if (predicate) {\n          m = m.filter(predicate);\n        }\n        m.forEach(function(v, k) {\n          a[i++] = k;\n          a[i++] = v;\n        });\n        return a;\n      }\n    }),\n    Immutable.List, transit.makeWriteHandler({\n      tag: function() {\n        return \"iL\";\n      },\n      rep: function(v) {\n        if (predicate) {\n          v = v.filter(predicate);\n        }\n        return v.toArray();\n      }\n    }),\n    Function, transit.makeWriteHandler({\n      tag: function() {\n        return '_';\n      },\n      rep: function() {\n        return null;\n      }\n    })\n  ]);\n\n  Object.keys(recordMap).forEach(function(name) {\n    handlers.set(recordMap[name], makeRecordHandler(name, recordMap[name], predicate));\n  });\n\n  return transit.writer('json', {\n    handlers: handlers\n  });\n}\n\nfunction makeRecordHandler(name, Record, predicate) {\n  var rec = new Record();\n  return transit.makeWriteHandler({\n    tag: function() {\n      return 'iR';\n    },\n    rep: function(m) {\n      var i = 0, a = new Array(); //2 * m.size + 1);\n      a.push(name); //a[i++] = name;\n      if (predicate) {\n        m = m.filter(predicate);\n      }\n      m.forEach(function(v, k) {\n        let d = rec.get(k);\n        if (d !== v && !Immutable.is(d, v)) {\n          a.push(k); //a[i++] = k;\n          a.push(v); //a[i++] = v;\n        }\n      });\n      return a;\n    }\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/transitImmutable.js\n **/","// transit-js 0.8.837\n// http://transit-format.org\n//\n// Copyright 2014 Cognitect. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License..\n;(function(){var aa=this;\nfunction ba(a){var b=typeof a;if(\"object\"==b)if(a){if(a instanceof Array)return\"array\";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(\"[object Window]\"==c)return\"object\";if(\"[object Array]\"==c||\"number\"==typeof a.length&&\"undefined\"!=typeof a.splice&&\"undefined\"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable(\"splice\"))return\"array\";if(\"[object Function]\"==c||\"undefined\"!=typeof a.call&&\"undefined\"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable(\"call\"))return\"function\"}else return\"null\";else if(\"function\"==\nb&&\"undefined\"==typeof a.call)return\"object\";return b}function k(a,b){var c=a.split(\".\"),d=aa;c[0]in d||!d.execScript||d.execScript(\"var \"+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b};function l(a,b){this.v=a|0;this.j=b|0}var ca,da,ea,fa,ga,ia,ja={};function m(a){if(-128<=a&&128>a){var b=ja[a];if(b)return b}b=new l(a|0,0>a?-1:0);-128<=a&&128>a&&(ja[a]=b);return b}function n(a){isNaN(a)||!isFinite(a)?a=p():a<=-ka?a=q():a+1>=ka?(fa||(fa=r(-1,2147483647)),a=fa):a=0>a?t(n(-a)):new l(a%v|0,a/v|0);return a}function r(a,b){return new l(a,b)}\nfunction la(a,b){if(0==a.length)throw Error(\"number format error: empty string\");var c=b||10;if(2>c||36<c)throw Error(\"radix out of range: \"+c);if(\"-\"==a.charAt(0))return t(la(a.substring(1),c));if(0<=a.indexOf(\"-\"))throw Error('number format error: interior \"-\" character: '+a);for(var d=n(Math.pow(c,8)),e=p(),f=0;f<a.length;f+=8){var g=Math.min(8,a.length-f),h=parseInt(a.substring(f,f+g),c);8>g?(g=n(Math.pow(c,g)),e=w(e,g).add(n(h))):(e=w(e,d),e=e.add(n(h)))}return e}var v=4294967296,ka=v*v/2;\nfunction p(){ca||(ca=m(0));return ca}function x(){da||(da=m(1));return da}function ma(){ea||(ea=m(-1));return ea}function q(){ga||(ga=r(0,-2147483648));return ga}function na(){ia||(ia=m(16777216));return ia}function y(a){return a.j*v+(0<=a.v?a.v:v+a.v)}\nl.prototype.toString=function(a){a=a||10;if(2>a||36<a)throw Error(\"radix out of range: \"+a);if(z(this))return\"0\";if(0>this.j){if(A(this,q())){var b=n(a),c=B(this,b),b=oa(w(c,b),this);return c.toString(a)+b.v.toString(a)}return\"-\"+t(this).toString(a)}for(var c=n(Math.pow(a,6)),b=this,d=\"\";;){var e=B(b,c),f=oa(b,w(e,c)).v.toString(a),b=e;if(z(b))return f+d;for(;6>f.length;)f=\"0\"+f;d=\"\"+f+d}};function z(a){return 0==a.j&&0==a.v}function A(a,b){return a.j==b.j&&a.v==b.v}\nfunction C(a,b){if(A(a,b))return 0;var c=0>a.j,d=0>b.j;return c&&!d?-1:!c&&d?1:0>oa(a,b).j?-1:1}function t(a){return A(a,q())?q():r(~a.v,~a.j).add(x())}l.prototype.add=function(a){var b=this.j>>>16,c=this.j&65535,d=this.v>>>16,e=a.j>>>16,f=a.j&65535,g=a.v>>>16,h;h=0+((this.v&65535)+(a.v&65535));a=0+(h>>>16);a+=d+g;d=0+(a>>>16);d+=c+f;c=0+(d>>>16);c=c+(b+e)&65535;return r((a&65535)<<16|h&65535,c<<16|d&65535)};function oa(a,b){return a.add(t(b))}\nfunction w(a,b){if(z(a)||z(b))return p();if(A(a,q()))return 1==(b.v&1)?q():p();if(A(b,q()))return 1==(a.v&1)?q():p();if(0>a.j)return 0>b.j?w(t(a),t(b)):t(w(t(a),b));if(0>b.j)return t(w(a,t(b)));var c=na();if(c=0>C(a,c))c=na(),c=0>C(b,c);if(c)return n(y(a)*y(b));var c=a.j>>>16,d=a.j&65535,e=a.v>>>16,f=a.v&65535,g=b.j>>>16,h=b.j&65535,Ia=b.v>>>16,ha=b.v&65535,M,u,H,Ja;Ja=0+f*ha;H=0+(Ja>>>16);H+=e*ha;u=0+(H>>>16);H=(H&65535)+f*Ia;u+=H>>>16;H&=65535;u+=d*ha;M=0+(u>>>16);u=(u&65535)+e*Ia;M+=u>>>16;u&=\n65535;u+=f*h;M+=u>>>16;u&=65535;M=M+(c*ha+d*Ia+e*h+f*g)&65535;return r(H<<16|Ja&65535,M<<16|u)}\nfunction B(a,b){if(z(b))throw Error(\"division by zero\");if(z(a))return p();if(A(a,q())){if(A(b,x())||A(b,ma()))return q();if(A(b,q()))return x();var c;c=1;if(0==c)c=a;else{var d=a.j;c=32>c?r(a.v>>>c|d<<32-c,d>>c):r(d>>c-32,0<=d?0:-1)}c=pa(B(c,b),1);if(A(c,p()))return 0>b.j?x():ma();d=oa(a,w(b,c));return c.add(B(d,b))}if(A(b,q()))return p();if(0>a.j)return 0>b.j?B(t(a),t(b)):t(B(t(a),b));if(0>b.j)return t(B(a,t(b)));for(var e=p(),d=a;0<=C(d,b);){c=Math.max(1,Math.floor(y(d)/y(b)));for(var f=Math.ceil(Math.log(c)/\nMath.LN2),f=48>=f?1:Math.pow(2,f-48),g=n(c),h=w(g,b);0>h.j||0<C(h,d);)c-=f,g=n(c),h=w(g,b);z(g)&&(g=x());e=e.add(g);d=oa(d,h)}return e}function pa(a,b){b&=63;if(0==b)return a;var c=a.v;return 32>b?r(c<<b,a.j<<b|c>>>32-b):r(0,c<<b-32)}function qa(a,b){b&=63;if(0==b)return a;var c=a.j;return 32>b?r(a.v>>>b|c<<32-b,c>>>b):32==b?r(c,0):r(c>>>b-32,0)};function ra(a,b){if(3<a.length){if(b)return!0;var c=a.charAt(1);return\"~\"===a.charAt(0)?\":\"===c||\"$\"===c||\"#\"===c:!1}return!1}function sa(a){var b=Math.floor(a/44);a=String.fromCharCode(a%44+48);return 0===b?\"^\"+a:\"^\"+String.fromCharCode(b+48)+a}function ta(){this.a=this.s=0;this.g={}}ta.prototype.write=function(a,b){if(ra(a,b)){1936===this.s&&this.clear();var c=this.g[a];return null==c?(this.g[a]=[sa(this.s),this.a],this.s++,a):c[1]!=this.a?(c[1]=this.a,c[0]=sa(this.s),this.s++,a):c[0]}return a};\nta.prototype.clear=function(){this.s=0;this.a++};function ua(){this.s=0;this.a=[]}ua.prototype.write=function(a){1936==this.s&&(this.s=0);this.a[this.s]=a;this.s++;return a};ua.prototype.P=function(a){return this.a[2===a.length?a.charCodeAt(1)-48:44*(a.charCodeAt(1)-48)+(a.charCodeAt(2)-48)]};ua.prototype.clear=function(){this.s=0};var D=\"undefined\"!=typeof Object.keys?function(a){return Object.keys(a)}:function(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b},E=\"undefined\"!=typeof Array.isArray?function(a){return Array.isArray(a)}:function(a){return\"array\"===ba(a)};function F(){return Math.round(15*Math.random()).toString(16)}\nfunction va(){var a=(8|3&Math.round(14*Math.random())).toString(16);return F()+F()+F()+F()+F()+F()+F()+F()+\"-\"+F()+F()+F()+F()+\"-4\"+F()+F()+F()+\"-\"+a+F()+F()+F()+\"-\"+F()+F()+F()+F()+F()+F()+F()+F()+F()+F()+F()+F()};var wa=1;function G(a,b){if(null==a)return null==b;if(a===b)return!0;if(\"object\"===typeof a){if(E(a)){if(E(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!G(a[c],b[c]))return!1;return!0}return!1}if(a.C)return a.C(b);if(null!=b&&\"object\"===typeof b){if(b.C)return b.C(a);var c=0,d=D(b).length,e;for(e in a)if(a.hasOwnProperty(e)&&(c++,!b.hasOwnProperty(e)||!G(a[e],b[e])))return!1;return c===d}}return!1}function xa(a,b){return a^b+2654435769+(a<<6)+(a>>2)}var ya={},za=0;\nfunction Aa(a){var b=0;if(null!=a.forEach)a.forEach(function(a,c){b=(b+(I(c)^I(a)))%4503599627370496});else for(var c=D(a),d=0;d<c.length;d++)var e=c[d],f=a[e],b=(b+(I(e)^I(f)))%4503599627370496;return b}function Ba(a){var b=0;if(E(a))for(var c=0;c<a.length;c++)b=xa(b,I(a[c]));else a.forEach&&a.forEach(function(a){b=xa(b,I(a))});return b}\nfunction I(a){if(null==a)return 0;switch(typeof a){case \"number\":return a;case \"boolean\":return!0===a?1:0;case \"string\":var b=ya[a];if(null==b){for(var c=b=0;c<a.length;++c)b=31*b+a.charCodeAt(c),b%=4294967296;za++;256<=za&&(ya={},za=1);ya[a]=b}a=b;return a;case \"function\":if(b=a.transit$hashCode$)return b;b=wa;\"undefined\"!=typeof Object.defineProperty?Object.defineProperty(a,\"transit$hashCode$\",{value:b,enumerable:!1}):a.transit$hashCode$=b;wa++;return b;default:return a instanceof Date?a.valueOf():\nE(a)?Ba(a):a.D?a.D():Aa(a)}};var Ca=\"undefined\"!=typeof Symbol?Symbol.iterator:\"@@iterator\";function J(a,b){this.tag=a;this.rep=b;this.a=-1}J.prototype.toString=function(){return\"[TaggedValue: \"+this.tag+\", \"+this.rep+\"]\"};J.prototype.g=function(a){return G(this,a)};J.prototype.equiv=J.prototype.g;J.prototype.C=function(a){return a instanceof J?this.tag===a.tag&&G(this.rep,a.rep):!1};J.prototype.D=function(){-1===this.a&&(this.a=xa(I(this.tag),I(this.rep)));return this.a};function K(a,b){return new J(a,b)}\nvar Da=la(\"9007199254740991\"),Ea=la(\"-9007199254740991\");function Fa(a){if(\"number\"===typeof a)return a;if(a instanceof l)return a;a=la(a,10);return 0<C(a,Da)||0>C(a,Ea)?a:y(a)}l.prototype.a=function(a){return G(this,a)};l.prototype.equiv=l.prototype.a;l.prototype.C=function(a){return a instanceof l&&A(this,a)};l.prototype.D=function(){return this.v};function Ga(a){return K(\"n\",a)}function Ha(a){return K(\"f\",a)}function L(a){this.w=a;this.a=-1}L.prototype.toString=function(){return\":\"+this.w};\nL.prototype.namespace=function(){var a=this.w.indexOf(\"/\");return-1!=a?this.w.substring(0,a):null};L.prototype.name=function(){var a=this.w.indexOf(\"/\");return-1!=a?this.w.substring(a+1,this.w.length):this.w};L.prototype.g=function(a){return G(this,a)};L.prototype.equiv=L.prototype.g;L.prototype.C=function(a){return a instanceof L&&this.w==a.w};L.prototype.D=function(){-1===this.a&&(this.a=I(this.w));return this.a};function Ka(a){return new L(a)}function N(a){this.w=a;this.a=-1}\nN.prototype.namespace=function(){var a=this.w.indexOf(\"/\");return-1!=a?this.w.substring(0,a):null};N.prototype.name=function(){var a=this.w.indexOf(\"/\");return-1!=a?this.w.substring(a+1,this.w.length):this.w};N.prototype.toString=function(){return this.w};N.prototype.g=function(a){return G(this,a)};N.prototype.equiv=N.prototype.g;N.prototype.C=function(a){return a instanceof N&&this.w==a.w};N.prototype.D=function(){-1===this.a&&(this.a=I(this.w));return this.a};function La(a){return new N(a)}\nfunction Ma(a,b,c){var d=\"\";c=c||b+1;for(var e=8*(7-b),f=pa(m(255),e);b<c;b++,e-=8,f=qa(f,8)){var g=qa(r(a.v&f.v,a.j&f.j),e).toString(16);1==g.length&&(g=\"0\"+g);d+=g}return d}function O(a,b){this.g=a;this.o=b;this.a=-1}O.prototype.toString=function(){var a,b=this.g,c=this.o;a=\"\"+(Ma(b,0,4)+\"-\");a+=Ma(b,4,6)+\"-\";a+=Ma(b,6,8)+\"-\";a+=Ma(c,0,2)+\"-\";return a+=Ma(c,2,8)};O.prototype.F=function(a){return G(this,a)};O.prototype.equiv=O.prototype.F;\nO.prototype.C=function(a){return a instanceof O&&A(this.g,a.g)&&A(this.o,a.o)};O.prototype.D=function(){-1===this.a&&(this.a=I(this.toString()));return this.a};\nfunction Na(a){a=a.replace(/-/g,\"\");for(var b=null,c=null,d=c=0,e=24,f=0,f=c=0,e=24;8>f;f+=2,e-=8)c|=parseInt(a.substring(f,f+2),16)<<e;d=0;f=8;for(e=24;16>f;f+=2,e-=8)d|=parseInt(a.substring(f,f+2),16)<<e;b=r(d,c);c=0;f=16;for(e=24;24>f;f+=2,e-=8)c|=parseInt(a.substring(f,f+2),16)<<e;d=0;for(e=f=24;32>f;f+=2,e-=8)d|=parseInt(a.substring(f,f+2),16)<<e;c=r(d,c);return new O(b,c)}function Oa(a){a=\"number\"===typeof a?a:parseInt(a,10);return new Date(a)}\nDate.prototype.C=function(a){return a instanceof Date?this.valueOf()===a.valueOf():!1};Date.prototype.D=function(){return this.valueOf()};\nfunction Pa(a,b){var c;if(b&&!1===b.O||\"undefined\"==typeof Buffer)if(\"undefined\"!=typeof Uint8Array){if(\"undefined\"!=typeof atob)c=atob(a);else{c=String(a).replace(/=+$/,\"\");if(1==c.length%4)throw Error(\"'atob' failed: The string to be decoded is not correctly encoded.\");for(var d=0,e,f,g=0,h=\"\";f=c.charAt(g++);~f&&(e=d%4?64*e+f:f,d++%4)?h+=String.fromCharCode(255&e>>(-2*d&6)):0)f=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\".indexOf(f);c=h}d=c.length;e=new Uint8Array(d);for(f=\n0;f<d;f++)e[f]=c.charCodeAt(f);c=e}else c=K(\"b\",a);else c=new Buffer(a,\"base64\");return c}function Qa(a){return K(\"r\",a)}function P(a,b){this.a=a;this.type=b||0;this.s=0}P.prototype.next=function(){if(this.s<this.a.length){var a=null;0===this.type?a=this.a[this.s]:1===this.type?a=this.a[this.s+1]:a=[this.a[this.s],this.a[this.s+1]];a={value:a,done:!1};this.s+=2;return a}return{value:null,done:!0}};P.prototype.next=P.prototype.next;P.prototype[Ca]=function(){return this};\nfunction Q(a,b){this.map=a;this.type=b||0;this.keys=Ra(this.map);this.s=0;this.g=null;this.a=0}Q.prototype.next=function(){if(this.s<this.map.size){null!=this.g&&this.a<this.g.length||(this.g=this.map.map[this.keys[this.s]],this.a=0);var a=null;0===this.type?a=this.g[this.a]:1===this.type?a=this.g[this.a+1]:a=[this.g[this.a],this.g[this.a+1]];a={value:a,done:!1};this.s++;this.a+=2;return a}return{value:null,done:!0}};Q.prototype.next=Q.prototype.next;Q.prototype[Ca]=function(){return this};\nfunction Sa(a,b){if(a instanceof R&&Ta(b)){if(a.size!==b.size)return!1;for(var c in a.map)for(var d=a.map[c],e=0;e<d.length;e+=2)if(!G(d[e+1],b.get(d[e])))return!1;return!0}if(a instanceof S&&Ta(b)){if(a.size!==b.size)return!1;c=a.l;for(e=0;e<c.length;e+=2)if(!G(c[e+1],b.get(c[e])))return!1;return!0}if(null!=b&&\"object\"===typeof b&&(e=D(b),c=e.length,a.size===c)){for(d=0;d<c;d++){var f=e[d];if(!a.has(f)||!G(b[f],a.get(f)))return!1}return!0}return!1}\nfunction Ua(a){return null==a?\"null\":\"array\"==ba(a)?\"[\"+a.toString()+\"]\":\"string\"==typeof a?'\"'+a+'\"':a.toString()}function Va(a){var b=0,c=\"TransitMap {\";a.forEach(function(d,e){c+=Ua(e)+\" => \"+Ua(d);b<a.size-1&&(c+=\", \");b++});return c+\"}\"}function Wa(a){var b=0,c=\"TransitSet {\";a.forEach(function(d){c+=Ua(d);b<a.size-1&&(c+=\", \");b++});return c+\"}\"}function S(a){this.l=a;this.h=null;this.a=-1;this.size=a.length/2;this.g=0}S.prototype.toString=function(){return Va(this)};S.prototype.inspect=function(){return this.toString()};\nfunction Xa(a){if(a.h)throw Error(\"Invalid operation, already converted\");if(8>a.size)return!1;a.g++;return 32<a.g?(a.h=T(a.l,!1,!0),a.l=[],!0):!1}S.prototype.clear=function(){this.a=-1;this.h?this.h.clear():this.l=[];this.size=0};S.prototype.clear=S.prototype.clear;S.prototype.keys=function(){return this.h?this.h.keys():new P(this.l,0)};S.prototype.keys=S.prototype.keys;S.prototype.o=function(){if(this.h)return this.h.o();for(var a=[],b=0,c=0;c<this.l.length;b++,c+=2)a[b]=this.l[c];return a};\nS.prototype.keySet=S.prototype.o;S.prototype.entries=function(){return this.h?this.h.entries():new P(this.l,2)};S.prototype.entries=S.prototype.entries;S.prototype.values=function(){return this.h?this.h.values():new P(this.l,1)};S.prototype.values=S.prototype.values;S.prototype.forEach=function(a){if(this.h)this.h.forEach(a);else for(var b=0;b<this.l.length;b+=2)a(this.l[b+1],this.l[b])};S.prototype.forEach=S.prototype.forEach;\nS.prototype.get=function(a,b){if(this.h)return this.h.get(a);if(Xa(this))return this.get(a);for(var c=0;c<this.l.length;c+=2)if(G(this.l[c],a))return this.l[c+1];return b};S.prototype.get=S.prototype.get;S.prototype.has=function(a){if(this.h)return this.h.has(a);if(Xa(this))return this.has(a);for(var b=0;b<this.l.length;b+=2)if(G(this.l[b],a))return!0;return!1};S.prototype.has=S.prototype.has;\nS.prototype.set=function(a,b){this.a=-1;if(this.h)this.h.set(a,b),this.size=this.h.size;else{for(var c=0;c<this.l.length;c+=2)if(G(this.l[c],a)){this.l[c+1]=b;return}this.l.push(a);this.l.push(b);this.size++;32<this.size&&(this.h=T(this.l,!1,!0),this.l=null)}};S.prototype.set=S.prototype.set;\nS.prototype[\"delete\"]=function(a){this.a=-1;if(this.h)return a=this.h[\"delete\"](a),this.size=this.h.size,a;for(var b=0;b<this.l.length;b+=2)if(G(this.l[b],a))return a=this.l[b+1],this.l.splice(b,2),this.size--,a};S.prototype.clone=function(){var a=T();this.forEach(function(b,c){a.set(c,b)});return a};S.prototype.clone=S.prototype.clone;S.prototype[Ca]=function(){return this.entries()};S.prototype.D=function(){if(this.h)return this.h.D();-1===this.a&&(this.a=Aa(this));return this.a};\nS.prototype.C=function(a){return this.h?Sa(this.h,a):Sa(this,a)};function R(a,b,c){this.map=b||{};this.a=a||[];this.size=c||0;this.g=-1}R.prototype.toString=function(){return Va(this)};R.prototype.inspect=function(){return this.toString()};R.prototype.clear=function(){this.g=-1;this.map={};this.a=[];this.size=0};R.prototype.clear=R.prototype.clear;function Ra(a){return null!=a.a?a.a:D(a.map)}\nR.prototype[\"delete\"]=function(a){this.g=-1;this.a=null;for(var b=I(a),c=this.map[b],d=0;d<c.length;d+=2)if(G(a,c[d]))return a=c[d+1],c.splice(d,2),0===c.length&&delete this.map[b],this.size--,a};R.prototype.entries=function(){return new Q(this,2)};R.prototype.entries=R.prototype.entries;R.prototype.forEach=function(a){for(var b=Ra(this),c=0;c<b.length;c++)for(var d=this.map[b[c]],e=0;e<d.length;e+=2)a(d[e+1],d[e],this)};R.prototype.forEach=R.prototype.forEach;\nR.prototype.get=function(a,b){var c=I(a),c=this.map[c];if(null!=c)for(var d=0;d<c.length;d+=2){if(G(a,c[d]))return c[d+1]}else return b};R.prototype.get=R.prototype.get;R.prototype.has=function(a){var b=I(a),b=this.map[b];if(null!=b)for(var c=0;c<b.length;c+=2)if(G(a,b[c]))return!0;return!1};R.prototype.has=R.prototype.has;R.prototype.keys=function(){return new Q(this,0)};R.prototype.keys=R.prototype.keys;\nR.prototype.o=function(){for(var a=Ra(this),b=[],c=0;c<a.length;c++)for(var d=this.map[a[c]],e=0;e<d.length;e+=2)b.push(d[e]);return b};R.prototype.keySet=R.prototype.o;R.prototype.set=function(a,b){this.g=-1;var c=I(a),d=this.map[c];if(null==d)this.a&&this.a.push(c),this.map[c]=[a,b],this.size++;else{for(var c=!0,e=0;e<d.length;e+=2)if(G(b,d[e])){c=!1;d[e]=b;break}c&&(d.push(a),d.push(b),this.size++)}};R.prototype.set=R.prototype.set;R.prototype.values=function(){return new Q(this,1)};\nR.prototype.values=R.prototype.values;R.prototype.clone=function(){var a=T();this.forEach(function(b,c){a.set(c,b)});return a};R.prototype.clone=R.prototype.clone;R.prototype[Ca]=function(){return this.entries()};R.prototype.D=function(){-1===this.g&&(this.g=Aa(this));return this.g};R.prototype.C=function(a){return Sa(this,a)};\nfunction T(a,b,c){a=a||[];b=!1===b?b:!0;if((!0!==c||!c)&&64>=a.length){if(b){var d=a;a=[];for(b=0;b<d.length;b+=2){var e=!1;for(c=0;c<a.length;c+=2)if(G(a[c],d[b])){a[c+1]=d[b+1];e=!0;break}e||(a.push(d[b]),a.push(d[b+1]))}}return new S(a)}var d={},e=[],f=0;for(b=0;b<a.length;b+=2){c=I(a[b]);var g=d[c];if(null==g)e.push(c),d[c]=[a[b],a[b+1]],f++;else{var h=!0;for(c=0;c<g.length;c+=2)if(G(g[c],a[b])){g[c+1]=a[b+1];h=!1;break}h&&(g.push(a[b]),g.push(a[b+1]),f++)}}return new R(e,d,f)}\nfunction Ta(a){return a instanceof S||a instanceof R}function U(a){this.map=a;this.size=a.size}U.prototype.toString=function(){return Wa(this)};U.prototype.inspect=function(){return this.toString()};U.prototype.add=function(a){this.map.set(a,a);this.size=this.map.size};U.prototype.add=U.prototype.add;U.prototype.clear=function(){this.map=new R;this.size=0};U.prototype.clear=U.prototype.clear;U.prototype[\"delete\"]=function(a){a=this.map[\"delete\"](a);this.size=this.map.size;return a};\nU.prototype.g=function(){return this.map.entries()};U.prototype.entries=U.prototype.g;U.prototype.forEach=function(a){var b=this;this.map.forEach(function(c,d){a(d,b)})};U.prototype.forEach=U.prototype.forEach;U.prototype.has=function(a){return this.map.has(a)};U.prototype.has=U.prototype.has;U.prototype.keys=function(){return this.map.keys()};U.prototype.keys=U.prototype.keys;U.prototype.o=function(){return this.map.o()};U.prototype.keySet=U.prototype.o;U.prototype.a=function(){return this.map.values()};\nU.prototype.values=U.prototype.a;U.prototype.clone=function(){var a=Ya();this.forEach(function(b){a.add(b)});return a};U.prototype.clone=U.prototype.clone;U.prototype[Ca]=function(){return this.a()};U.prototype.C=function(a){if(a instanceof U){if(this.size===a.size)return G(this.map,a.map)}else return!1};U.prototype.D=function(){return I(this.map)};\nfunction Ya(a){a=a||[];for(var b={},c=[],d=0,e=0;e<a.length;e++){var f=I(a[e]),g=b[f];if(null==g)c.push(f),b[f]=[a[e],a[e]],d++;else{for(var f=!0,h=0;h<g.length;h+=2)if(G(g[h],a[e])){f=!1;break}f&&(g.push(a[e]),g.push(a[e]),d++)}}return new U(new R(c,b,d))}function Za(a){return K(\"'\",a)}function $a(a){return K(\"list\",a)}function ab(a){return K(\"link\",a)};var bb=0,cb=\"transit$guid$\"+va();function db(a){if(null==a)return\"null\";if(a===String)return\"string\";if(a===Boolean)return\"boolean\";if(a===Number)return\"number\";if(a===Array)return\"array\";if(a===Object)return\"map\";var b=a[cb];null==b&&(\"undefined\"!=typeof Object.defineProperty?(b=++bb,Object.defineProperty(a,cb,{value:b,enumerable:!1})):a[cb]=b=++bb);return b}function V(a,b){for(var c=a.toString(),d=c.length;d<b;d++)c=\"0\"+c;return c}function eb(){}eb.prototype.tag=function(){return\"_\"};\neb.prototype.rep=function(){return null};eb.prototype.B=function(){return\"null\"};function fb(){}fb.prototype.tag=function(){return\"s\"};fb.prototype.rep=function(a){return a};fb.prototype.B=function(a){return a};function gb(){}gb.prototype.tag=function(){return\"i\"};gb.prototype.rep=function(a){return a};gb.prototype.B=function(a){return a.toString()};function hb(){}hb.prototype.tag=function(){return\"i\"};hb.prototype.rep=function(a){return a.toString()};hb.prototype.B=function(a){return a.toString()};\nfunction ib(){}ib.prototype.tag=function(){return\"?\"};ib.prototype.rep=function(a){return a};ib.prototype.B=function(a){return a.toString()};function jb(){}jb.prototype.tag=function(){return\"array\"};jb.prototype.rep=function(a){return a};jb.prototype.B=function(){return null};function kb(){}kb.prototype.tag=function(){return\"map\"};kb.prototype.rep=function(a){return a};kb.prototype.B=function(){return null};function lb(){}lb.prototype.tag=function(){return\"t\"};\nlb.prototype.rep=function(a){return a.getUTCFullYear()+\"-\"+V(a.getUTCMonth()+1,2)+\"-\"+V(a.getUTCDate(),2)+\"T\"+V(a.getUTCHours(),2)+\":\"+V(a.getUTCMinutes(),2)+\":\"+V(a.getUTCSeconds(),2)+\".\"+V(a.getUTCMilliseconds(),3)+\"Z\"};lb.prototype.B=function(a,b){return b.rep(a)};function mb(){}mb.prototype.tag=function(){return\"m\"};mb.prototype.rep=function(a){return a.valueOf()};mb.prototype.B=function(a){return a.valueOf().toString()};mb.prototype.R=function(){return new lb};function nb(){}\nnb.prototype.tag=function(){return\"u\"};nb.prototype.rep=function(a){return a.toString()};nb.prototype.B=function(a){return a.toString()};function ob(){}ob.prototype.tag=function(){return\":\"};ob.prototype.rep=function(a){return a.w};ob.prototype.B=function(a,b){return b.rep(a)};function pb(){}pb.prototype.tag=function(){return\"$\"};pb.prototype.rep=function(a){return a.w};pb.prototype.B=function(a,b){return b.rep(a)};function qb(){}qb.prototype.tag=function(a){return a.tag};qb.prototype.rep=function(a){return a.rep};\nqb.prototype.B=function(){return null};function rb(){}rb.prototype.tag=function(){return\"set\"};rb.prototype.rep=function(a){var b=[];a.forEach(function(a){b.push(a)});return K(\"array\",b)};rb.prototype.B=function(){return null};function sb(){}sb.prototype.tag=function(){return\"map\"};sb.prototype.rep=function(a){return a};sb.prototype.B=function(){return null};function tb(){}tb.prototype.tag=function(){return\"map\"};tb.prototype.rep=function(a){return a};tb.prototype.B=function(){return null};\nfunction ub(){}ub.prototype.tag=function(){return\"b\"};ub.prototype.rep=function(a){return a.toString(\"base64\")};ub.prototype.B=function(){return null};function vb(){}vb.prototype.tag=function(){return\"b\"};\nvb.prototype.rep=function(a){for(var b=0,c=a.length,d=\"\",e=null;b<c;)e=a.subarray(b,Math.min(b+32768,c)),d+=String.fromCharCode.apply(null,e),b+=32768;var f;if(\"undefined\"!=typeof btoa)f=btoa(d);else{a=String(d);c=0;d=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";for(e=\"\";a.charAt(c|0)||(d=\"=\",c%1);e+=d.charAt(63&f>>8-c%1*8)){b=a.charCodeAt(c+=.75);if(255<b)throw Error(\"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\");f=f<<8|b}f=e}return f};\nvb.prototype.B=function(){return null};function wb(){this.A={};this.set(null,new eb);this.set(String,new fb);this.set(Number,new gb);this.set(l,new hb);this.set(Boolean,new ib);this.set(Array,new jb);this.set(Object,new kb);this.set(Date,new mb);this.set(O,new nb);this.set(L,new ob);this.set(N,new pb);this.set(J,new qb);this.set(U,new rb);this.set(S,new sb);this.set(R,new tb);\"undefined\"!=typeof Buffer&&this.set(Buffer,new ub);\"undefined\"!=typeof Uint8Array&&this.set(Uint8Array,new vb)}\nwb.prototype.get=function(a){var b=null,b=\"string\"===typeof a?this.A[a]:this.A[db(a)];return null!=b?b:this.A[\"default\"]};wb.prototype.get=wb.prototype.get;wb.prototype.set=function(a,b){var c;if(c=\"string\"===typeof a)a:{switch(a){case \"null\":case \"string\":case \"boolean\":case \"number\":case \"array\":case \"map\":c=!1;break a}c=!0}c?this.A[a]=b:this.A[db(a)]=b};function xb(a){this.K=a}\nfunction W(a){this.o=a||{};this.A={};for(var b in this.G.A)this.A[b]=this.G.A[b];for(b in this.o.handlers){a:{switch(b){case \"_\":case \"s\":case \"?\":case \"i\":case \"d\":case \"b\":case \"'\":case \"array\":case \"map\":a=!0;break a}a=!1}if(a)throw Error('Cannot override handler for ground type \"'+b+'\"');this.A[b]=this.o.handlers[b]}this.J=null!=this.o.preferStrings?this.o.preferStrings:this.G.J;this.O=null!=this.o.preferBuffers?this.o.preferBuffers:this.G.O;this.M=this.o.defaultHandler||this.G.M;this.g=this.o.mapBuilder;\nthis.F=this.o.arrayBuilder}\nW.prototype.G={A:{_:function(){return null},\"?\":function(a){return\"t\"===a},b:function(a,b){return Pa(a,b)},i:function(a){return Fa(a)},n:function(a){return Ga(a)},d:function(a){return parseFloat(a)},f:function(a){return Ha(a)},c:function(a){return a},\":\":function(a){return Ka(a)},$:function(a){return La(a)},r:function(a){return Qa(a)},z:function(a){a:switch(a){case \"-INF\":a=-Infinity;break a;case \"INF\":a=Infinity;break a;case \"NaN\":a=NaN;break a;default:throw Error(\"Invalid special double value \"+a);\n}return a},\"'\":function(a){return a},m:function(a){return Oa(a)},t:function(a){return new Date(a)},u:function(a){return Na(a)},set:function(a){return Ya(a)},list:function(a){return $a(a)},link:function(a){return ab(a)},cmap:function(a){return T(a,!1)}},M:function(a,b){return K(a,b)},J:!0,O:!0};\nW.prototype.a=function(a,b,c,d){if(null==a)return null;switch(typeof a){case \"string\":return ra(a,c)?(a=yb(this,a),b&&b.write(a,c),b=a):b=\"^\"===a.charAt(0)&&\" \"!==a.charAt(1)?b.P(a,c):yb(this,a),b;case \"object\":if(E(a))if(\"^ \"===a[0])if(this.g)if(17>a.length&&this.g.fromArray){d=[];for(c=1;c<a.length;c+=2)d.push(this.a(a[c],b,!0,!1)),d.push(this.a(a[c+1],b,!1,!1));b=this.g.fromArray(d,a)}else{d=this.g.init(a);for(c=1;c<a.length;c+=2)d=this.g.add(d,this.a(a[c],b,!0,!1),this.a(a[c+1],b,!1,!1),a);b=\nthis.g.finalize(d,a)}else{d=[];for(c=1;c<a.length;c+=2)d.push(this.a(a[c],b,!0,!1)),d.push(this.a(a[c+1],b,!1,!1));b=T(d,!1)}else b=zb(this,a,b,c,d);else{c=D(a);var e=c[0];if((d=1==c.length?this.a(e,b,!1,!1):null)&&d instanceof xb)a=a[e],c=this.A[d.K],b=null!=c?c(this.a(a,b,!1,!0),this):K(d.K,this.a(a,b,!1,!1));else if(this.g)if(16>c.length&&this.g.fromArray){var f=[];for(d=0;d<c.length;d++)e=c[d],f.push(this.a(e,b,!0,!1)),f.push(this.a(a[e],b,!1,!1));b=this.g.fromArray(f,a)}else{f=this.g.init(a);\nfor(d=0;d<c.length;d++)e=c[d],f=this.g.add(f,this.a(e,b,!0,!1),this.a(a[e],b,!1,!1),a);b=this.g.finalize(f,a)}else{f=[];for(d=0;d<c.length;d++)e=c[d],f.push(this.a(e,b,!0,!1)),f.push(this.a(a[e],b,!1,!1));b=T(f,!1)}}return b}return a};W.prototype.decode=W.prototype.a;\nfunction zb(a,b,c,d,e){if(e){var f=[];for(e=0;e<b.length;e++)f.push(a.a(b[e],c,d,!1));return f}f=c&&c.s;if(2===b.length&&\"string\"===typeof b[0]&&(e=a.a(b[0],c,!1,!1))&&e instanceof xb)return b=b[1],f=a.A[e.K],null!=f?f=f(a.a(b,c,d,!0),a):K(e.K,a.a(b,c,d,!1));c&&f!=c.s&&(c.s=f);if(a.F){if(32>=b.length&&a.F.fromArray){f=[];for(e=0;e<b.length;e++)f.push(a.a(b[e],c,d,!1));return a.F.fromArray(f,b)}f=a.F.init(b);for(e=0;e<b.length;e++)f=a.F.add(f,a.a(b[e],c,d,!1),b);return a.F.finalize(f,b)}f=[];for(e=\n0;e<b.length;e++)f.push(a.a(b[e],c,d,!1));return f}function yb(a,b){if(\"~\"===b.charAt(0)){var c=b.charAt(1);if(\"~\"===c||\"^\"===c||\"`\"===c)return b.substring(1);if(\"#\"===c)return new xb(b.substring(2));var d=a.A[c];return null==d?a.M(c,b.substring(2)):d(b.substring(2),a)}return b};function Ab(a){this.a=new W(a)}function Bb(a,b){this.o=a;this.g=b||{};this.a=this.g.cache?this.g.cache:new ua}Bb.prototype.P=function(a){var b=this.a;a=this.o.a.a(JSON.parse(a),b);this.a.clear();return a};Bb.prototype.read=Bb.prototype.P;function Cb(a){this.a=a||{};this.J=null!=this.a.preferStrings?this.a.preferStrings:!0;this.S=this.a.objectBuilder||null;this.A=new wb;if(a=this.a.handlers){if(E(a)||!a.forEach)throw Error('transit writer \"handlers\" option must be a map');var b=this;a.forEach(function(a,d){if(void 0!==d)b.A.set(d,a);else throw Error(\"Cannot create handler for JavaScript undefined\");})}this.H=this.a.handlerForForeign;this.L=this.a.unpack||function(a){return a instanceof S&&null===a.h?a.l:!1};this.I=this.a&&this.a.verbose||\n!1}function Db(a,b){var c=a.A.get(null==b?null:b.constructor);return null!=c?c:(c=b&&b.transitTag)?a.A.get(c):null}function X(a,b,c,d,e){a=a+b+c;return e?e.write(a,d):a}function Eb(a,b,c){var d=[];if(E(b))for(var e=0;e<b.length;e++)d.push(Y(a,b[e],!1,c));else b.forEach(function(b){d.push(Y(a,b,!1,c))});return d}function Fb(a,b){if(\"string\"!==typeof b){var c=Db(a,b);return c&&1===c.tag(b).length}return!0}\nfunction Gb(a,b){var c=a.L(b),d=!0;if(c){for(var e=0;e<c.length&&(d=Fb(a,c[e]),d);e+=2);return d}if(b.keys&&(c=b.keys(),e=null,c.next)){for(e=c.next();!e.done;){d=Fb(a,e.value);if(!d)break;e=c.next()}return d}if(b.forEach)return b.forEach(function(b,c){d=d&&Fb(a,c)}),d;throw Error(\"Cannot walk keys of object type \"+(null==b?null:b.constructor).name);}\nfunction Hb(a){if(a.constructor.transit$isObject)return!0;var b=a.constructor.toString(),b=b.substr(9),b=b.substr(0,b.indexOf(\"(\")),b=\"Object\"==b;\"undefined\"!=typeof Object.defineProperty?Object.defineProperty(a.constructor,\"transit$isObject\",{value:b,enumerable:!1}):a.constructor.transit$isObject=b;return b}\nfunction Ib(a,b,c){if(b.constructor===Object||null!=b.forEach||a.H&&Hb(b)){if(a.I){if(null!=b.forEach){if(Gb(a,b)){var d={};b.forEach(function(b,e){d[Y(a,e,!0,!1)]=Y(a,b,!1,c)});return d}var e=a.L(b),f=[],g=X(\"~#\",\"cmap\",\"\",!0,c);if(e)for(var h=0;h<e.length;h+=2)f.push(Y(a,e[h],!0,!1)),f.push(Y(a,e[h+1],!1,c));else b.forEach(function(b,d){f.push(Y(a,d,!0,!1));f.push(Y(a,b,!1,c))});d={};d[g]=f;return d}d={};e=D(b);for(h=0;h<e.length;h++)d[Y(a,e[h],!0,!1)]=Y(a,b[e[h]],!1,c);return d}if(null!=b.forEach){if(Gb(a,\nb)){e=a.L(b);d=[\"^ \"];if(e)for(h=0;h<e.length;h+=2)d.push(Y(a,e[h],!0,c)),d.push(Y(a,e[h+1],!1,c));else b.forEach(function(b,e){d.push(Y(a,e,!0,c));d.push(Y(a,b,!1,c))});return d}e=a.L(b);f=[];g=X(\"~#\",\"cmap\",\"\",!0,c);if(e)for(h=0;h<e.length;h+=2)f.push(Y(a,e[h],!0,c)),f.push(Y(a,e[h+1],!1,c));else b.forEach(function(b,d){f.push(Y(a,d,!0,c));f.push(Y(a,b,!1,c))});return[g,f]}d=[\"^ \"];e=D(b);for(h=0;h<e.length;h++)d.push(Y(a,e[h],!0,c)),d.push(Y(a,b[e[h]],!1,c));return d}if(null!=a.S)return a.S(b,\nfunction(b){return Y(a,b,!0,c)},function(b){return Y(a,b,!1,c)});h=(null==b?null:b.constructor).name;e=Error(\"Cannot write \"+h);e.data={N:b,type:h};throw e;}\nfunction Y(a,b,c,d){var e=Db(a,b)||(a.H?a.H(b,a.A):null),f=e?e.tag(b):null,g=e?e.rep(b):null;if(null!=e&&null!=f)switch(f){case \"_\":return c?X(\"~\",\"_\",\"\",c,d):null;case \"s\":return 0<g.length?(a=g.charAt(0),a=\"~\"===a||\"^\"===a||\"`\"===a?\"~\"+g:g):a=g,X(\"\",\"\",a,c,d);case \"?\":return c?X(\"~\",\"?\",g.toString()[0],c,d):g;case \"i\":return Infinity===g?X(\"~\",\"z\",\"INF\",c,d):-Infinity===g?X(\"~\",\"z\",\"-INF\",c,d):isNaN(g)?X(\"~\",\"z\",\"NaN\",c,d):c||\"string\"===typeof g||g instanceof l?X(\"~\",\"i\",g.toString(),c,d):g;case \"d\":return c?\nX(g.T,\"d\",g,c,d):g;case \"b\":return X(\"~\",\"b\",g,c,d);case \"'\":return a.I?(b={},c=X(\"~#\",\"'\",\"\",!0,d),b[c]=Y(a,g,!1,d),d=b):d=[X(\"~#\",\"'\",\"\",!0,d),Y(a,g,!1,d)],d;case \"array\":return Eb(a,g,d);case \"map\":return Ib(a,g,d);default:a:{if(1===f.length){if(\"string\"===typeof g){d=X(\"~\",f,g,c,d);break a}if(c||a.J){(a=a.I&&e.R())?(f=a.tag(b),g=a.B(b,a)):g=e.B(b,e);if(null!==g){d=X(\"~\",f,g,c,d);break a}d=Error('Tag \"'+f+'\" cannot be encoded as string');d.data={tag:f,rep:g,N:b};throw d;}}b=f;c=g;a.I?(g={},g[X(\"~#\",\nb,\"\",!0,d)]=Y(a,c,!1,d),d=g):d=[X(\"~#\",b,\"\",!0,d),Y(a,c,!1,d)]}return d}else throw d=(null==b?null:b.constructor).name,a=Error(\"Cannot write \"+d),a.data={N:b,type:d},a;}function Jb(a,b){var c=Db(a,b)||(a.H?a.H(b,a.A):null);if(null!=c)return 1===c.tag(b).length?Za(b):b;var c=(null==b?null:b.constructor).name,d=Error(\"Cannot write \"+c);d.data={N:b,type:c};throw d;}function Z(a,b){this.a=a;this.o=b||{};!1===this.o.cache?this.g=null:this.g=this.o.cache?this.o.cache:new ta}Z.prototype.G=function(){return this.a};\nZ.prototype.marshaller=Z.prototype.G;Z.prototype.write=function(a,b){var c=null,d=b||{},c=d.asMapKey||!1,e=this.a.I?!1:this.g;!1===d.marshalTop?c=Y(this.a,a,c,e):(d=this.a,c=JSON.stringify(Y(d,Jb(d,a),c,e)));null!=this.g&&this.g.clear();return c};Z.prototype.write=Z.prototype.write;Z.prototype.F=function(a,b){this.a.A.set(a,b)};Z.prototype.register=Z.prototype.F;var Kb=T;k(\"transit.reader\",function(a,b){if(\"json\"===a||\"json-verbose\"===a||null==a){var c=new Ab(b);return new Bb(c,b)}throw Error(\"Cannot create reader of type \"+a);});k(\"transit.writer\",function(a,b){if(\"json\"===a||\"json-verbose\"===a||null==a){\"json-verbose\"===a&&(null==b&&(b={}),b.verbose=!0);var c=new Cb(b);return new Z(c,b)}c=Error('Type must be \"json\"');c.data={type:a};throw c;});\nk(\"transit.makeBuilder\",function(a){function b(){}b.prototype.init=a.init;b.prototype.add=a.add;b.prototype.finalize=a.finalize;b.prototype.fromArray=a.fromArray;return new b});k(\"transit.makeWriteHandler\",function(a){function b(){}b.prototype.tag=a.tag;b.prototype.rep=a.rep;b.prototype.B=a.stringRep;b.prototype.R=a.getVerboseHandler;return new b});k(\"transit.date\",Oa);k(\"transit.integer\",Fa);\nk(\"transit.isInteger\",function(a){return a instanceof l?!0:\"number\"===typeof a&&!isNaN(a)&&Infinity!==a&&parseFloat(a)===parseInt(a,10)});k(\"transit.uuid\",function(a){return Na(a)});k(\"transit.isUUID\",function(a){return a instanceof O});k(\"transit.bigInt\",Ga);k(\"transit.isBigInt\",function(a){return a instanceof J&&\"n\"===a.tag});k(\"transit.bigDec\",Ha);k(\"transit.isBigDec\",function(a){return a instanceof J&&\"f\"===a.tag});k(\"transit.keyword\",Ka);k(\"transit.isKeyword\",function(a){return a instanceof L});\nk(\"transit.symbol\",La);k(\"transit.isSymbol\",function(a){return a instanceof N});k(\"transit.binary\",Pa);k(\"transit.isBinary\",function(a){return\"undefined\"!=typeof Buffer&&a instanceof Buffer?!0:\"undefined\"!=typeof Uint8Array&&a instanceof Uint8Array?!0:a instanceof J&&\"b\"===a.tag});k(\"transit.uri\",Qa);k(\"transit.isURI\",function(a){return a instanceof J&&\"r\"===a.tag});k(\"transit.map\",T);k(\"transit.isMap\",Ta);k(\"transit.set\",Ya);k(\"transit.isSet\",function(a){return a instanceof U});\nk(\"transit.list\",$a);k(\"transit.isList\",function(a){return a instanceof J&&\"list\"===a.tag});k(\"transit.quoted\",Za);k(\"transit.isQuoted\",function(a){return a instanceof J&&\"'\"===a.tag});k(\"transit.tagged\",K);k(\"transit.isTaggedValue\",function(a){return a instanceof J});k(\"transit.link\",ab);k(\"transit.isLink\",function(a){return a instanceof J&&\"link\"===a.tag});k(\"transit.hash\",I);k(\"transit.hashMapLike\",Aa);k(\"transit.hashArrayLike\",Ba);k(\"transit.equals\",G);\nk(\"transit.extendToEQ\",function(a,b){a.D=b.hashCode;a.C=b.equals;return a});k(\"transit.mapToObject\",function(a){var b={};a.forEach(function(a,d){if(\"string\"!==typeof d)throw Error(\"Cannot convert map with non-string keys\");b[d]=a});return b});k(\"transit.objectToMap\",function(a){var b=Kb(),c;for(c in a)a.hasOwnProperty(c)&&b.set(c,a[c]);return b});k(\"transit.decoder\",function(a){return new W(a)});k(\"transit.UUIDfromString\",Na);k(\"transit.randomUUID\",va);k(\"transit.stringableKeys\",Gb);\nk(\"transit.readCache\",function(){return new ua});k(\"transit.writeCache\",function(){return new ta});})();\nmodule.exports = transit;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./vendor/transit-0.8.837-min.js\n ** module id = 279\n ** module chunks = 0 1\n **/","import { map } from 'ramda';\n\nfunction bindActionCreators(dispatch, actionCreators) {\n  return map((actionCreator) => {\n    return (...args) => dispatch(actionCreator(...args));\n  }, actionCreators);\n};\n\nfunction bindSelectors(store, selectors) {\n  return map((selector) => {\n    return (...args) => selector(store, ...args);\n  }, selectors);\n};\n\n/**\n * Iterate over modules,\n */\nexport default function bindActionCreatorsAndSelectors(store, modules) {\n  return map((module) => {\n    return Object.assign({},\n      bindActionCreators(store.dispatch, module.actions),\n      bindSelectors(store, module.selectors)\n    );\n  }, modules);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/store/bindActionCreatorsAndSelectors.js\n **/","import h from 'snabbdom/h';\nimport canvas from './canvas';\nimport styles from './styles';\nimport error from './error';\nimport manipulatorTools from './manipulatorTools';\nimport progress from './progress';\nimport { setPlayerElement, isFullscreen, setFullscreen,  shouldDisplayThumbnail } from '../modules/player';\nimport { isSceneLoaded, isSceneRendered, loadingProgress, numErrors } from '../modules/sceneIO';\n\n\n\nconst brokenThumbnails = {};\n\nexport default function player(store, { isFlex, isRelative, parentEl }) {\n  const rendered = isSceneRendered(store);\n\n  let sceneId = store.getIn(['sceneIO','id']);\n  const hideThumbnail = rendered || !sceneId || !shouldDisplayThumbnail(store);\n\n  const cssStyle = `\n  div.claraplayer canvas {\n    box-sizing: content-box;\n    -webkit-box-sizing: content-box;\n  }\n`\n  var children = [h('style', { props: { innerHTML: cssStyle } })];\n\n  const fullscreenBackgroundColor = store.getIn(['player', 'fullscreenBackgroundColor']);\n  const playerStyles =  Object.assign({}, styles.player, {\n    backgroundImage: hideThumbnail ? '' : `url(${__URLROOT__}/api/scenes/${sceneId}/v2thumbnail)`,\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'auto 100%',\n    backgroundPosition: 'center',\n    position: (isFlex || isRelative) ? 'absolute' : 'relative',\n    boxSizing: 'border-box',\n    backgroundColor: isFullscreen(store) ?  fullscreenBackgroundColor : 'transparent',\n    overflow: 'hidden',\n  });\n\n  if (numErrors(store)) {\n    children.push(error(store));\n  } else {\n    children.push(canvas(store, 'player'));\n    if (rendered) children.push(manipulatorTools(store));\n    else children.push(progress(store));\n  }\n\n  return h('div.claraplayer', { style: playerStyles, hook: {\n    insert: attachFullscreenHandlers(store)\n  } }, children);\n}\n\nfunction attachFullscreenHandlers(store) {\n  return () => {\n    [ // ['fullscreenChange', 'fullscreenElement'],\n      ['webkitfullscreenchange', 'webkitIsFullScreen'],\n      ['mozfullscreenchange', 'mozFullScreen'],\n      ['MSFullscreenChange', 'msFullscreenElement'],\n    ].forEach(function(info) {\n      document.addEventListener(info[0], () => {\n        //console.log('FULLSCREEN', info[0], !!document[info[1]]);\n        store.dispatch(setFullscreen(!!document[info[1]]));\n      });\n    });\n  }\n}\n\n\n/*function statsReporter() {\n  var pageLoadTime, toRenderedTime;\n  if (typeof performace === 'undefined') return function() {};\n\n  return function(store, pct) {\n    if (pageLoadTime && toRenderedTime) return;\n    if (!pageLoadTime) pageLoadTime = new Date().getTime() - performance.timing.navigationStart;\n    if (pct < 1) return;\n    toRenderedTime = new Date().getTime() - performance.timing.navigationStart;\n    console.log(`Page loaded in ${pageLoadTime}ms and rendered in ${toRenderedTime}ms`);\n  };\n};\n\n//\n//\nvar circleDiv = {\n  flex: '0 0 25%'\n};\n\nvar r = 90;\nvar PIR2 = Math.PI * r * 2;\n\nvar outer = {\n  r, cx: 100, cy: 100,\n  fill: 'transparent',\n  'stroke-dasharray': PIR2,\n  'stroke-dashoffset': 0,\n  'stroke-width': '1em',\n  stroke: '#eee'\n};\nvar inner = {\n  r, cx: 100, cy: 100,\n  fill: 'transparent',\n  stroke: colour,\n  transition: 'stroke-dashoffset 1s linear',\n  'stroke-width': '1em',\n  'stroke-dashoffset': PIR2,\n  'stroke-dasharray': PIR2\n};\nvar svg = {\n  height: '100%',\n  width: '100%',\n  viewport: '0 0 100 100',\n  viewBox: '0 0 200 200',\n};\n\nfunction progress(store, pct) {\n  var r = 90;\n  var degrees = PIR2*(1-pct);\n\n  return h('div', {style: {...styles.absoluteMaxCentered, backgroundColor: 'transparent', boxSizing: 'border-box' }}, [\n    h('div', {style: circleDiv}, [\n      h('svg', {attrs: svg}, [\n        h('circle', {attrs: outer}),\n        h('circle', {props: {id: 'bar'}, attrs: {...inner, 'stroke-dashoffset': degrees}}),\n      ])\n    ])\n  ]);\n};*/\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/player.js\n **/","import h from 'snabbdom/h';\nimport { filter, map } from 'ramda';\nimport annotation, { getAnnotationProperties } from './annotation';\nimport { isSceneRendered } from '../modules/sceneIO';\nimport { getCustomAnnotationFunction } from '../modules/annotations';\n\nconst attachTranslator = function(store, translator) {\n  return (info) => {\n    translator.attach(info.elm);\n\n    function onResize() {\n      translator.resize();\n    }\n    window.addEventListener('resize', onResize);\n  }\n};\n\nfunction ignoreRightClick(ev) {\n  ev.preventDefault();\n};\n\nexport default function canvas(store) {\n  const translator = store.getTranslator();\n  const rendered = isSceneRendered(store);\n\n  translator.update();\n\n  const annotationFn = getCustomAnnotationFunction(store);\n\n  const annotations = filter((a) => !!a, map((obj) => getAnnotationProperties(store, obj),\n      Object.values(translator.getAnnotations())));\n\n  const children = annotationFn ? [h('div.annotations', {\n    style: { position: 'absolute', top: 0, left: 0, right: 0, bottom: 0, pointerEvents: 'none' },\n    hook: { update: (vnode) => {\n      annotations.forEach((annotation) => annotationFn(annotation, vnode.elm));\n    }},\n  })] : map(annotation(store), annotations);\n\n  return h('div', {\n    style: {position: 'relative', display: (rendered ? 'block' : 'none')},\n    on: {contextmenu: ignoreRightClick},\n    hook: {insert: attachTranslator(store, translator)}\n  }, children);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/canvas.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/values\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/values.js\n ** module id = 283\n ** module chunks = 0 1\n **/","require('../../modules/es7.object.values');\nmodule.exports = require('../../modules/_core').Object.values;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/fn/object/values.js\n ** module id = 284\n ** module chunks = 0 1\n **/","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export')\n  , $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it){\n    return $values(it);\n  }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/es7.object.values.js\n ** module id = 285\n ** module chunks = 0 1\n **/","var getKeys   = require('./_object-keys')\n  , toIObject = require('./_to-iobject')\n  , isEnum    = require('./_object-pie').f;\nmodule.exports = function(isEntries){\n  return function(it){\n    var O      = toIObject(it)\n      , keys   = getKeys(O)\n      , length = keys.length\n      , i      = 0\n      , result = []\n      , key;\n    while(length > i)if(isEnum.call(O, key = keys[i++])){\n      result.push(isEntries ? [key, O[key]] : O[key]);\n    } return result;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/~/core-js/library/modules/_object-to-array.js\n ** module id = 286\n ** module chunks = 0 1\n **/","import h from 'snabbdom/h';\nimport { map, filter } from 'ramda';\nimport { Map } from 'immutable';\nimport { getRect } from '../modules/player';\nimport { setAnnotationProperties } from '../modules/annotations';\n\nlet imgStyle = {cursor: 'pointer'};\n\nconst initialAnnotationState = Map({open: false, pinned: false});\n\nconst bs = '5px solid #333';\nconst bi = '5px solid transparent';\n\nconst arrowCss = {\n  position: 'absolute',\n  display: 'inline-block',\n  borderTop: bi, borderLeft: bi, borderRight: bi, borderBottom: bi,\n  height: 0,\n  width: 0,\n  top: '', bottom: '', right: '', left: ''\n};\n\nconst arrows = {\n  tl: {...arrowCss, ...{borderRight: bs, top: '12px', left: '-10px', marginTop: '-5px'}},\n  bl: {...arrowCss, ...{borderRight: bs, bottom: '8px', left: '-10px', marginTop: '-5px'}},\n  tr:  {...arrowCss, ...{borderLeft: bs, top: '12px', right: '-10px', marginTop: '-5px'}},\n  br:  {...arrowCss, ...{borderLeft: bs, bottom: '8px', right: '-10px', marginTop: '-5px'}}\n};\n\nconst popupCss = { position: 'absolute', textAlign: 'left',\n  left: '', top: '', bottom: '', right: '',\n  transition: 'opacity 0.3s ease-out', webkitTransition: 'opacity 0.3s ease-out',\n  fontFamily: 'sans-serif', delayed: {opacity: 1}, remove: {opacity: 0}\n};\n\nconst popupCsses = {\n  tl:  {...popupCss, ...{left: '30px', top: '0'}},\n  bl:  {...popupCss, ...{left: '30px', bottom: '0'}},\n  tr:   {...popupCss, ...{right: '30px', top: '0'}},\n  br:  {...popupCss, ...{right: '30px', bottom: '0'}}\n};\n\nexport function getAnnotationProperties(store, data) {\n  const rect = getRect(store);\n  const { position, normal, alpha } = data.position(store);\n  if (!position) return false;\n\n  const left = rect.width * position.x;\n  const bottom = rect.height * position.y;\n  const visible = !(left <  0 || left > rect.width-24 || bottom < 0 || bottom > rect.height-24);\n\n  return {\n    ...data.annotation,\n    id: data.id,\n    alpha,\n    normal,\n    position,\n    top: rect.height - bottom,\n    right: rect.width - left,\n    bottom,\n    left,\n    visible,\n  }\n};\n\nexport default function(store) {\n  const rect = getRect(store);\n  const compact = filter((n) => n);\n\n\n  return function(annotation) {\n    const { id, text, left, bottom, visible, position, normal, alpha } = annotation; //data.position(store);\n    if (position === undefined) return h('span');\n\n    const state = store.getIn(['annotations',id]) || Map({open: annotation.open, pinned: annotation.open});\n    const open = state.get('open');\n    const pinned = state.get('pinned');\n\n    let tb = position.y > 0.5 ? 't' : 'b';\n    let lr = position.x < 0.6 ? 'l' : 'r';\n    let side = [tb,lr].join('');\n\n    function click(ev) {\n      ev.preventDefault();\n      store.dispatch(setAnnotationProperties(id, {\n        open: (!pinned ? true : !open),\n        pinned: !pinned\n      }));\n    }\n\n    function mouseover(ev) {\n      if (!pinned) store.dispatch(setAnnotationProperties(id, {open: true}));\n    }\n\n    function mouseout(ev) {\n      if (!pinned) store.dispatch(setAnnotationProperties(id, {open: false}));\n    };\n\n    let children = [h('img', {style: { cursor: 'pointer' }, props: {\n      width: 24,\n      height: 24,\n      src: `${__URLROOT__}/img/annotation-${open ? 'open' : 'closed'}.svg`\n    }})];\n\n    if (open) {\n      const textCss = {\n        fontSize: '12px', padding: '10px', color: '#fff', backgroundColor: '#000',\n        borderRadius: '3px', opacity: '0.8', cursor: 'pointer', lineHeight: 1.3,\n        width: text.length > 10 ? (text.length > 50 ? '200px' : '150px') : '100px'\n      };\n\n      children.push(h('div', {style: popupCsses[side]}, compact([\n        lr === 'l' && h('div', {key: side, style: arrows[side]}),\n        h('div', {key: 'text', style: textCss, on: {click}}, text),\n        lr === 'r' && h('div', {key: side, style: arrows[side]}),\n      ])));\n    }\n\n    return h('div', {\n      key: id,\n      style: {\n        visibility: visible ? 'visible' : 'hidden',\n        opacity: alpha,\n        position: 'absolute',\n        left: `${Math.round(left)}px`,\n        bottom: `${Math.round(bottom)}px`,\n      },\n      on: { click, mouseover, mouseout }\n    }, children);\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/annotation.js\n **/","let headerFont = '-apple-system,\".SFNSDisplay-Bold\",\"Helvetica Neue\",\"Roboto\",\"Segoe UI\",sans-serif';\nlet bodyFont = \"'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Verdana, Tahoma, sans-serif\";\nlet colors = {\n  gray: '#999',\n  black: '#333',\n  lightBg: '#eee',\n  border: '#ccc',\n  white: '#fff'\n};\n\nexport default {\n  root: {\n    height: '100%',\n    fontSize: '14px',\n    fontFamily: bodyFont,\n    position: 'absolute',\n    top: 0, left: 0, right: 0, bottom: 0,\n  },\n  absoluteMaxCentered: {\n    position: 'absolute',\n    top: 0, left: 0, right: 0, bottom: 0,\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  header: {\n    display: 'flex',\n    flex: '0 0 auto',\n    justifyContent: 'center',\n    margin: '0',\n    backgroundColor: colors.lightBg,\n    fontFamily: headerFont\n  },\n  mainRow: {\n    display: 'flex',\n    flex: '1 1 100px',\n    justifyContent: 'center'\n  },\n  commandsRow: {\n    flex: '0 0 auto',\n  },\n  statsRow: {\n    flex: '0 0 auto',\n    backgroundColor: colors.gray,\n    color: colors.lightBg,\n    padding: '5px'\n  },\n  player: {\n    position: 'relative',\n    top: 0, left: 0, right: 0, bottom: 0,\n    height: '100%',\n    width: '100%',\n  },\n  maxRow: {\n    flex: '1 1 auto'\n  },\n  leftCol: {\n    flex: '1 1 200px',\n    maxWidth: '300px',\n    overflow: 'scroll'\n  },\n  centerCol: {\n    flex: '2 2 500px',\n    border: '1px solid '+colors.border\n  },\n  rightCol: {\n    flex: '1 1 200px',\n    maxWidth: '300px',\n    overflow: 'scroll'\n  },\n  footer: {\n    flex: '0 0 auto',\n    padding: '5px',\n    backgroundColor: colors.lightBg,\n    margin: '0'\n  },\n  explorerSelected: {\n    backgroundColor: colors.gray\n  },\n  explorerNotSelected: {\n    backgroundColor: colors.white,\n    cursor: 'pointer'\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/styles.js\n **/","import h from 'snabbdom/h';\nimport { map } from 'ramda';\nimport styles from './styles';\nimport { getErrors } from '../modules/sceneIO';\n\nexport default function error(store) {\n  return h('div', {key: 'error', style: styles.absoluteMaxCentered}, [\n    h('div', {style: {flex: '0 0 100%'}}, getErrors(store).map((err) => {\n      return h('h2', err)\n    }).toArray())\n  ]);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/error.js\n **/","import h from 'snabbdom/h';\nimport { filter, map } from 'ramda';\nimport { glowFilter, orbit, home, pan, zoom, fullscreen, exitfullscreen,\n  vrMode, lenticularMode, deviceTracking, nodeRotate, nodeMove, nodeScale\n} from './icons';\nimport { manipulators, useManipulator, getInitialCameraPosition, useCamera, getActiveColor,\n   toggleFullscreen, isFullscreen, getHoverColor, isVRMode, isLenticularMode,\n   toggleVRMode, toggleLenticularMode, isDeviceTracking, toggleDeviceTracking, displayTool,\n} from '../modules/player';\nimport timeline from './timeline';\n\nconst manipulatorInfos = [\n  {key: 'orbit', svg: orbit, label: 'Orbit'},\n  {key: 'pan', svg: pan, label: 'Pan'},\n  {key: 'zoom', svg: zoom, label: 'Zoom'},\n  {key: 'home', svg: home, label: 'Home'},\n  {key: 'fullscreen', svg: fullscreen, isActive: isFullscreen, label: 'Full screen', activeLabel: 'Exit Full screen'},\n  {key: 'vrMode', svg: vrMode, isActive: isVRMode, label: 'VR mode', activeLabel: 'Exit VR Mode'},\n  {key: 'lenticularMode', svg: lenticularMode, isActive: isLenticularMode, label: 'Lenticular mode', activeLabel: 'Exit Lenticular Mode'},\n  {key: 'deviceTracking', svg: deviceTracking, isActive: isDeviceTracking, label: 'Head Tracking', activeLabel: 'Disable Head Tracking'},\n  {key: 'nodeRotate', svg: nodeRotate, label: 'Rotate Node'},\n  {key: 'nodeMove', svg: nodeMove, label: 'Move Node'},\n  {key: 'nodeScale', svg: nodeScale, label: 'Scale Node'},\n]\n\nconst isTouch = __BROWSER__ && (!!(\"ontouchstart\" in window) || window.navigator.msMaxTouchPoints > 0);\n\nexport default function manipulatorTools(store) {\n  const manipulator = store.getIn(['player','activeManipulator']);\n\n  const liStyle = {\n    cursor: 'pointer',\n    float: 'left',\n    borderRadius: '5px',\n    padding: '5px',\n    boxSizing: 'border-box',\n  };\n\n  function handleResetCamera() {\n    const navigator = store.getNavigator();\n    if (navigator) navigator.reset();\n  };\n\n  function click(what) {\n    return (ev) => {\n      if (what === 'home') handleResetCamera();\n      else if (what === 'fullscreen') store.dispatch(toggleFullscreen());\n      else if (what === 'vrMode') store.dispatch(toggleVRMode());\n      else if (what === 'lenticularMode') store.dispatch(toggleLenticularMode());\n      else if (what === 'deviceTracking') store.dispatch(toggleDeviceTracking());\n      else store.dispatch(useManipulator(manipulators[what]));\n    }\n  }\n\n  const ulStyle = {position: 'relative', bottom: 0, left: 0, listStyleType: 'none', padding: '0 5px', margin: 0, zIndex: 2147483647};\n  const activeColor = getActiveColor(store);\n  const hoverColor = getHoverColor(store);\n\n  const hoverStyle = isTouch ? '' : `\ndiv.claraplayer ul.tools li:not(.active):hover svg path {\n  fill: ${hoverColor};\n}\n`;\n  const spanStyle = {\n    position: 'absolute',\n    left: '5px',\n    right: '5px',\n    bottom: '5px',\n    display: 'flex',\n    flexWrap: 'nowrap',\n    height: '54px',\n  };\n\n  let toolChildren = [\n    h('style', { props: { innerHTML: hoverStyle } }),\n    h('ul.tools', {style: ulStyle}, [glowFilter()].concat(map((info) => {\n      const active = info.isActive ? info.isActive(store) : (manipulators[info.key] === manipulator);\n      const label = active && info.activeLabel ? info.activeLabel : info.label;\n      return h('li' + (active ? '.active' : ''), {on: {click: click(info.key)}, style: liStyle}, [info.svg({width: 34, height: 34, title: label}, { active, activeColor })]);\n    }, filter((info) => displayTool(store, info.key), manipulatorInfos)))),\n  ];\n\n  const tLine = timeline(store);\n  if (tLine) toolChildren.push(tLine);\n\n  return h('span', {style: spanStyle}, toolChildren);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/manipulatorTools.js\n **/","import h from 'snabbdom/h';\n\nconst filter = 'url(#glowfilter)';\nconst activeColor = '#ffc85f';\nconst blurColor = '#000';\nconst color = '#fff';\nconst padding = '0';\nconst boxSizing = 'border-box';\nconst viewBox = '-300 -300 1624 1624';\nconst panViewBox = '-150 -150 812 812';\n\nexport function glowFilter() {\n  return h('svg', {attrs: {width: 0, height: 0}}, [\n    h('filter', {attrs: {id: 'glowfilter'}}, [\n      h('feGaussianBlur', {attrs: {in: 'SourceAlpha', stdDeviation: 50, result: 'blur'}}),\n      h('feOffset', {attrs: {in: 'blur', dx: 0, dy: 0, result: 'offsetBlur'}}),\n      h('feFlood', {attrs: {'flood-color': blurColor, 'flood-opacity': 1, result: 'offsetColor'}}),\n      h('feComposite', {attrs: {in: 'offsetColor', in2: 'offsetBlur', operator: 'in', result: 'offsetBlurComposed'}}),\n      h('feMerge', [\n        h('feMergeNode', {attrs: {in: 'offsetBlurComposed'}}),\n        h('feMergeNode', {attrs: {in: 'SourceGraphic'}})\n      ])\n    ])\n  ]);\n}\n\n// icomoon free svg icons\n\nexport function home(attrs, options) {\n  return h('svg', {attrs: {viewBox, ...attrs}, style: { padding, boxSizing }}, [\n    //blurFilter('homefilter'),\n    h('path', {attrs: {fill: color, filter, d: \"M1024 608l-192-192v-288h-128v160l-192-192-512 512v32h128v320h320v-192h128v192h320v-320h128z\"}})\n  ]);\n};\n\nexport function orbit(attrs, options) {\n  var fill = options.active ? options.activeColor : color;\n  return h('svg', {attrs: {viewBox, ...attrs}, style: { padding, boxSizing }}, [\n    h('path', {attrs: {fill, filter, d: \"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z\"}})\n  ]);\n}\n\nexport function pan(attrs, options) {\n  var fill = options.active ? options.activeColor : color;\n  return h('svg', {attrs: {viewBox: panViewBox, ...attrs}, style: { padding, boxSizing }}, [\n    h('g', {attrs: {transform: 'matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)'}}, [\n      h('path', {attrs: {fill, filter, d: 'M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z'}})\n    ])\n  ]);\n}\n\n// paths for diagonal arrows\n//h('path', { attrs: { fill, filter, d: \"M1024 0h-416l160 160-192 192 96 96 192-192 160 160z\"} }),\n//h('path', { attrs: { fill, filter, d: \"M1024 1024v-416l-160 160-192-192-96 96 192 192-160 160z\" } }),\n//h('path', { attrs: { fill, filter, d: \"M0 1024h416l-160-160 192-192-96-96-192 192-160-160z\" } }),\n//h('path', { attrs: { fill, filter, d: \"M0 0v416l160-160 192 192 96-96-192-192 160-160z\" } }),\n\nexport function zoom(attrs, options) {\n  var fill = options.active ? options.activeColor : color;\n  return h('svg', {attrs: {viewBox, ...attrs}, style: { padding, boxSizing }}, [\n    h('path', {attrs: {fill, filter, d: \"M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z\"}})\n  ]);\n}\n\nexport function fullscreen(attrs, options) {\n  const fill = options.active ? options.activeColor : color;\n\n  return h('svg', { attrs: { viewBox, ...attrs }, style: { padding: boxSizing }}, [\n    options.active\n      ? h('path', { attrs: { fill, filter, d: \"M448 576v416l-160-160-192 192-96-96 192-192-160-160zM1024 96l-192 192 160 160h-416v-416l160 160 192-192z\" } })\n      : h('path', { attrs: { fill, filter, d: \"M1024 0v416l-160-160-192 192-96-96 192-192-160-160zM448 672l-192 192 160 160h-416v-416l160 160 192-192z\" } })\n  ]);\n}\n\nexport function vrMode(attrs, options) {\n  const fill = options.active ? options.activeColor : color;\n\n  return h('svg', { attrs: { viewBox, ...attrs }, style: { padding: boxSizing }}, [\n    h('path', { attrs: { fill, filter, d: \"M884.907 256h-748.373c-27.733 0-51.2 24.32-51.2 54.187v446.293c0 29.867 23.467 54.187 52.48 54.187h203.52c23.040 0 42.667-13.653 49.493-33.707l59.307-148.053c10.24-24.747 34.133-42.24 61.867-42.24s51.627 17.493 61.867 42.24l59.307 148.053c8.107 20.053 26.453 33.707 47.36 33.707h204.373c30.293 0 53.76-24.32 53.76-54.187v-446.293c0-29.867-23.467-54.187-53.76-54.187zM308.053 622.080c-52.053 0-94.72-43.947-94.72-97.707 0-55.040 42.667-97.707 94.72-97.707s94.293 42.667 94.293 97.707c0 53.76-42.24 97.707-94.293 97.707zM715.947 622.080c-52.053 0-94.293-43.947-94.293-97.707s42.24-97.707 94.293-97.707c52.053 0 94.72 43.947 94.72 97.707s-42.667 97.707-94.72 97.707z\" } }),\n  ]);\n}\n\nexport function lenticularMode(attrs, options) {\n  const fill = options.active ? options.activeColor : color;\n\n  return h('svg', { attrs: { viewBox, ...attrs }, style: { padding: boxSizing }}, [\n    options.active\n      ? h('path', { attrs: { fill, filter, d: \"M317.143 762.857l44.571-80.571q-49.714-36-77.714-90.857t-28-116q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 95.429 147.429 244 214.286zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM746.857 220q0 4-0.571 5.143-60 107.429-180 323.429t-180.571 324l-28 50.857q-5.714 9.143-16 9.143-6.857 0-76.571-40-9.143-5.714-9.143-16 0-6.857 25.143-49.714-81.714-37.143-150.571-98.857t-119.143-140q-11.429-17.714-11.429-39.429t11.429-39.429q87.429-134.286 217.143-212t283.429-77.714q50.857 0 102.857 9.714l30.857-55.429q5.714-9.143 16-9.143 2.857 0 10.286 3.429t17.714 8.857 18.857 10.571 18 10.571 11.143 6.571q9.143 5.714 9.143 15.429zM768 475.429q0 79.429-45.143 144.857t-119.429 94l160-286.857q4.571 25.714 4.571 48zM1024 548.571q0 20-11.429 39.429-22.286 36.571-62.286 82.857-85.714 98.286-198.571 152.571t-239.714 54.286l42.286-75.429q121.143-10.286 224.286-78.286t172.286-175.429q-65.714-102.286-161.143-168l36-64q54.286 36.571 104.286 87.429t82.571 105.143q11.429 19.429 11.429 39.429z\" } })\n      : h('path', { attrs: { fill, filter, d: \"M950.857 548.571q-86.857-134.857-217.714-201.714 34.857 59.429 34.857 128.571 0 105.714-75.143 180.857t-180.857 75.143-180.857-75.143-75.143-180.857q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 76 117.143 190.571 186.571t248.286 69.429 248.286-69.429 190.571-186.571zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM1024 548.571q0 19.429-11.429 39.429-80 131.429-215.143 210.571t-285.429 79.143-285.429-79.429-215.143-210.286q-11.429-20-11.429-39.429t11.429-39.429q80-130.857 215.143-210.286t285.429-79.429 285.429 79.429 215.143 210.286q11.429 20 11.429 39.429z\" } })\n  ]);\n}\n\n//export function enableParallaxmode(attrs, options) {\n//  const fill = options.active ? options.activeColor : color;\n\n//  return h('svg', { attrs: { viewBox, ...attrs }, style: { padding: boxSizing }}, [\n//    h('path', { attrs: { fill, filter, d: \"M494.464 96.192l-427.584 184.224 428 182.784 432.416-183.2-432.832-183.808zM512 486.208v441.6l415.84-197.408v-420.832l-415.84 176.64zM64.16 730.4l417.248 197.408v-441.6l-417.248-176.64v420.832z\" } }),\n//  ]);\n//}\n\n//export function disableParallaxmode(attrs, options) {\n//  const fill = '#000';\n\n//  return h('svg', { attrs: { viewBox, ...attrs }, style: { padding: boxSizing }}, [\n//    h('path', { attrs: { fill, filter, d: \"M494.464 96.192l-427.584 184.224 428 182.784 432.416-183.2-432.832-183.808zM512 486.208v441.6l415.84-197.408v-420.832l-415.84 176.64zM64.16 730.4l417.248 197.408v-441.6l-417.248-176.64v420.832z\" } }),\n//  ]);\n//}\n//\nexport function deviceTracking(attrs, options) {\n  const fill = options.active ? options.activeColor : color;\n\n  return h('svg', { attrs: { viewBox, ...attrs }, style: { padding: boxSizing }}, [\n    h('path', { attrs: { fill, filter, d: \"M395 37.2c-24.2 1.4-50.2 3.6-57.8 4.8-28.2 4.4-60.2 22.8-77.4 44.4-7.8 9.8-23.4 39-21.6 40.4 1.2 1 26.4 9.2 26.6 8.6 0.2-0.2 3.2-6.4 7-13.8 11.6-23.6 38.8-44 65.4-49.6 9.2-1.8 59.8-6 74.4-6h6.4v85.6l-16.4 1.2c-9.2 0.6-38.2 2-64.6 3.2-52.8 2.4-92.6 6.4-108 11-13 3.8-24.6 11.4-31.4 20.8-5 7-15.6 38.6-21.6 64l-2.6 10.6-8.2-1.2c-4.4-0.8-11.4-1.8-15.2-2.4l-7-1.2-17.6 88.4c-12.8 63.6-17 89-15.4 90 1.2 0.8 8.4 2.4 15.8 3.8l13.4 2.4-1.8 13.4c-1 7.4-1.8 31-2 52.4-0.2 34.6 0.2 40.4 4 51.4 15.2 45.6 59.8 72 133 78.6 24 2.2 25.2 2.2 42.6-3 62.8-18.2 121.4-24.2 219-22.4 79 1.6 130.2 8 175.6 22.4 15 4.8 17 5 38.6 3.2 73.4-6.2 118.6-32.2 134.8-77.2 4.6-13.2 6.4-64.6 3.2-95.2-1.4-12.2-2-22.6-1.6-23s6.8-2 14.2-3.6c7.4-1.4 13.8-3.2 14.4-3.6 0.4-0.6-7-40.4-16.8-88.8l-17.6-87.8-5.8 0.2c-3.4 0-10.2 0.8-15.2 1.6l-9.2 1.6-6.2-25c-9-35.4-13.2-45.8-22.2-54-8.8-8-30-18.4-43.6-21.6-15.4-3.4-63.8-7.4-120-10.2l-52.6-2.4v-85.6l5.6 1.2c3 0.6 18 1.6 33.4 2.2 15.4 0.8 34 2.6 41.6 4 28.2 5.8 54.4 26 67 51.6 3.8 7.6 7.8 13.2 9 12.8 1.4-0.4 7.2-2.4 13-4.2 5.6-2 10.4-4.6 10.4-6 0-1.6-3.4-9.4-7.4-17.4-10.6-21.4-32.6-43-54.4-53.6-9.2-4.4-23-9.4-31-11-38.2-8.2-203.8-11.6-296.2-6zM592 186c68.4 3.2 106 9 132.2 20.2 12 5.2 16.8 11.8 34.2 46.8 37.6 75 76.8 210.6 72.6 250.6-0.8 7.4-2.6 15.6-4 18.6-3.6 6.8-18.4 20.2-32.4 29.2-12.4 7.8-61.8 32-76.6 37.4-8.6 3-8.8 3-4-0.4 49.6-35 63.4-45.6 76.6-58.4 17.8-17.6 17.4-16 12.4-56-4.8-39-20-94.8-40.4-149-11-29.4-36.4-82.4-42.4-88.4-7.4-7.8-43.2-16.4-86.2-20.6-34.4-3.4-158.2-4.8-206.8-2.2-60.4 3.2-89.4 7.4-112.2 16.4-12 4.6-16.8 11.6-33.6 49.8-38 86.6-61.4 172.2-61.4 224.4v15.4l13.2 13.2c12.8 12.6 43.4 35.6 67.4 50.4 6.2 4 11.2 7.6 10.6 8-1.2 1.4-40.4-15-62.8-26.2-24.8-12.4-45-26.6-49-34.6-1.6-3-4-15.6-5.4-27.6-2.2-20-2-24.2 1.8-46.4 8-46.4 22.4-94.6 45.6-153.6 13.4-34 32-73 40.2-84.2 7.8-10.6 21.2-17 46.4-22.4 19.2-4.2 70.6-10 98-11 38.6-1.6 127.2-1.2 166 0.6zM194 656.8c0 6.4 6 33 10 45.2 21.6 63.6 98.4 169.8 171 236.8 28 25.8 44 37.4 60.8 44.2 25.2 10.4 69 15 103.6 11.2 52.2-6 69.8-16 125.6-71 90-89.2 156-193 163.8-257.8l1.4-11.4h-30.2v7.6c0 19.8-18 63.4-41.8 101.4-38 60.2-102 134.8-150 174.8-25.4 21-49.8 28.2-96.2 28.2-41.2 0-63.6-5.4-85.6-20.4-15.8-10.8-56-49.2-79-75.6-73.4-83.8-117.8-157.2-124.4-205.6l-1.4-10.4h-13.8c-10.6 0-13.8 0.6-13.8 2.8zM407.2 770.6c-1.8 7.4-3.2 13.6-3.2 14.2 0 1.6 28 7.4 55 11.4 43.2 6.4 79.6 4.6 136-6.2 12.2-2.4 22.2-4.6 22.6-5 0.4-0.2-1-6.6-2.8-14l-3.4-13.4-7.2 1c-4 0.6-17.6 3.2-30.2 5.6-33.6 6.6-93.2 6.6-126 0.2-12.6-2.6-26.2-5.2-30.2-5.8l-7.2-1-3.4 13z\" } }),\n  ]);\n}\n\nexport function nodeRotate(attrs, options){\n  const fill = options.active ? options.activeColor : color;\n\n  return h('svg', { attrs: { viewBox, ...attrs }, style: { padding: boxSizing }}, [\n    h('path', { attrs: { fill, filter, d:\"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z\"}}),\n    h('path', { attrs: { fill, filter, d:\"M512 250l262 262-262 262-262-262z\"}}),\n  ]);\n}\n\nexport function nodeMove(attrs, options){\n  const fill = options.active ? options.activeColor : color;\n  return h('svg', {attrs: {viewBox: panViewBox, ...attrs}, style: { padding, boxSizing }}, [\n    h('g', {attrs: {transform: 'matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)'}}, [\n      h('path', {attrs: {fill, filter, d: 'M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z'}}),\n      h('path', { attrs: { fill, filter, d:\"M256 0l256 256-256 256-256-256z\"}}),\n    ])\n  ]);\n}\n\nexport function nodeScale(attrs, options){\n  const fill = options.active ? options.activeColor : color;\n\n  return h('svg', {attrs: {viewBox, ...attrs}, style: { padding, boxSizing }}, [\n    h('path', {attrs: {fill, filter, d: \"M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z\"}}),\n    h('path', { attrs: { fill, filter, d:\"M375 181l200 200-200 200-200-200z\"}}),\n  ]);\n}\n\nexport function pause(attrs, options){\n  const fill = options.active ? options.activeColor : color;\n\n  return h('svg', {attrs: {viewBox, ...attrs}, style: { padding, boxSizing }}, [\n    h('path', { attrs: {fill, filter, d:'M64 0h384v1024h-384z'}}),\n    h('path', { attrs: {fill, filter, d:'M576 0h384v1024h-384z'}}),\n  ]);\n}\n\nexport function play(attrs, options){\n  const fill = options.active ? options.activeColor : color;\n\n  return h('svg', {attrs: {viewBox, ...attrs}, style: { padding, boxSizing }}, [\n    h('path', { attrs: {fill, filter, d:'M138 0L1024 512L138 1024z'}}),\n  ]);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/icons.js\n **/","import h from 'snabbdom/h';\nimport { play, pause } from './icons';\nimport marker from './marker';\nimport { manipulators, getActiveColor, getHoverColor } from '../modules/player';\nimport { isPlaying, getTime, startPlaying, stopPlaying, getTimelineAnimation, setTime } from '../modules/animation';\n\n\nlet dragHandler = null;\nlet timeoutHandler = null;\nlet visible = false;\n\nexport default function timeline(store){\n  const timelineStyle = {\n    flex: '1 1 auto',\n    position: 'relative',\n    bottom: 0,\n    right:0,\n    borderRadius: '5px',\n    padding: '0 20px',\n  };\n\n  const rulerStyle = {\n    boxSizing: 'border-box',\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    border: '1px solid #ccc',\n    position: 'relative',\n    top: '17px',\n    left: '56px',\n    height: '10px',\n    width:'calc(100% - 55px)',\n    cursor: 'pointer',\n  };\n\n  const activeColor = getActiveColor(store);\n  const hoverColor = getHoverColor(store);\n  const iconAttrs = {width: 34, height: 34, title: 'play'};\n  const iconOptions = { active:false, activeColor };\n\n\n  const timeAnimation = getTimelineAnimation(store);\n  if(!timeAnimation) return null;\n  const startTime = timeAnimation.get('start');\n  const duration = timeAnimation.get('duration')/Math.abs(timeAnimation.get('playSpeed'));\n  const played = Math.max(Math.min((getTime(store)-startTime)/duration, 1), 0) * 100;\n\n  const playedStyle = {\n    backgroundColor: activeColor,\n    width: 'calc('+played+'% - 2px)',\n    height: '6px',\n    position: 'absolute',\n    left: '1px',\n    top: '1px',\n    cursor: 'pointer',\n  };\n\n  const buttonStyle = {\n    position: 'relative',\n    display: 'inline-block',\n    verticalAlign: 'middle',\n    top:'-5px',\n    cursor: 'pointer',\n  };\n\n  const hoverStyle = `\n    div.claraplayer div div svg:hover path {\n    fill: ${hoverColor};\n  }`;\n\n  function createHandleDrag({width, left}, touch){\n    return (ev) => {\n      visible = true;\n      if (timeoutHandler){\n        window.clearTimeout(timeoutHandler);\n      }\n      timeoutHandler = window.setTimeout(function(){\n        visible=false;\n        store.dispatch({type:'POKE'});\n      }, 2000);\n\n      const evX = touch ? ev.touches[0].pageX : ev.pageX;\n      const percentTime = Math.max(Math.min((evX-left)/width, 1),0);\n      const time = (percentTime)*duration+startTime;\n      store.dispatch(setTime(time));\n    }\n  }\n\n  function handleClick(ev){\n    //console.log(ev.target.parentNode);\n    visible = true;\n    if (timeoutHandler){\n      window.clearTimeout(timeoutHandler);\n    }\n    timeoutHandler = window.setTimeout(function(){\n      visible=false;\n      store.dispatch({type:'POKE'});\n    }, 2000);\n\n    if(dragHandler !== null){\n      window.removeEventListener('mousemove', dragHandler);\n      window.removeEventListener('mouseup', endDrag);\n      window.removeEventListener('touchmove', dragHandler);\n      window.removeEventListener('touchend', endDrag);\n    }\n\n    const touch = !!ev.touches;\n    const evX = touch ? ev.touches[0].clientX : ev.clientX;\n\n    let rectElement = ev.target.className === 'ruler' ? ev.target : ev.target.parentNode;\n    const rect = rectElement.getBoundingClientRect()\n\n    const time = ((evX-rect.left)/rect.width)*duration+startTime;\n    store.dispatch(setTime(time));\n\n    dragHandler = createHandleDrag(rect, touch);\n    if(!touch){\n      window.addEventListener('mousemove', dragHandler);\n      window.addEventListener('mouseup', endDrag);\n    } else {\n      window.addEventListener('touchmove', dragHandler);\n      window.addEventListener('touchend', endDrag);\n    }\n  }\n\n  function endDrag(ev){\n    window.removeEventListener('mousemove', dragHandler);\n    window.removeEventListener('mouseup', endDrag);\n    window.removeEventListener('touchmove', dragHandler);\n    window.removeEventListener('touchend', endDrag);\n    dragHandler = null;\n  }\n\n  const icon = isPlaying(store) ? pause(iconAttrs, iconOptions) : play(iconAttrs, iconOptions);\n  const clickAction = isPlaying(store) ? () => store.dispatch(stopPlaying()) : () => store.dispatch(startPlaying());\n\n  return h('div', {style: timelineStyle}, [\n    h('style',{ props: { innerHTML: hoverStyle } }),\n    h('div.ruler', { style: rulerStyle, on:{mousedown:handleClick, touchstart:handleClick}}, [\n      h('div.played', {style: playedStyle}),\n      marker(store, played, duration, visible)\n    ]),\n    h('div', {style: buttonStyle, on:{click: clickAction}}, [icon]),\n  ]);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/timeline.js\n **/","import h from 'snabbdom/h';\n\nexport default function marker(store, percentPlayed, duration, visible){\n\n  const markerStyle = {\n    width: '0',\n    height: '100%',\n    position: 'absolute',\n    left: percentPlayed+'%',\n    top: '0',\n    pointerEvents: 'auto',\n    cursor: 'pointer',\n  };\n\n  let toolTipStyle = {\n    boxSizing: 'border-box',\n    position: 'absolute',\n    zIndex: '1070',\n    display: 'block',\n    visibility: 'visible',\n    fontSize: '12px',\n    fontWeight: 'normal',\n    lineHeight: '1.4',\n    top: '-32px',\n    left: '-25px',\n    width: '50px',\n    height: '22px',\n    marginTop: '-3px',\n    padding: '5px 0',\n    opacity: '1',\n  };\n  if(!visible){\n    toolTipStyle.opacity = '0';\n    toolTipStyle.transition = 'opacity 0.15s linear';\n  }\n\n  const innerStyle = {\n    maxWidth: '200px',\n    padding: '3px 8px',\n    color: '#ffffff',\n    textAlign: 'center',\n    textDecoration: 'none',\n    backgroundColor: '#000000',\n    borderRadius: '4px',\n    boxShadow: '#000 0 0 5px',\n    margin:'0 auto',\n    userSelect:'none',\n    WebkitUserSelect:'none',\n    MozUserSelect:'none', \n  };\n\n\n  const arrowStyle = {\n    boxSizing: 'border-box',\n    position: 'absolute',\n    width: '0',\n    height: '0',\n    bottom: '-10px',\n    left: '50%',\n    marginLeft: '-5px',\n    borderWidth: '5px 5px 0',\n    borderTopColor: '#000000',\n    borderRightColor: 'transparent',\n    borderBottomColor: 'transparent',\n    borderLeftColor: 'transparent',\n    borderStyle: 'solid',\n  };    \n\n  function stopEvent(ev){\n    ev.stopPropagation();\n  }\n\n  return h('div.marker', {style: markerStyle, on:{mousedown:stopEvent, touchstart:stopEvent}}, [\n    h('div.tooltip', {style: toolTipStyle}, [\n      h('div.tooltip-arrow', {style: arrowStyle}),\n      h('div.tooltip-inner', {style: innerStyle}, (duration*percentPlayed/100000).toFixed(1)),\n    ])\n  ]);\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/marker.js\n **/","import h from 'snabbdom/h';\nimport styles from './styles';\nimport { isSceneLoaded, isSceneRendered, loadingProgress, numErrors } from '../modules/sceneIO';\n\nvar stats = statsReporter();\n\nfunction statsReporter() {\n  var pageLoadTime, toRenderedTime;\n  if (typeof performace === 'undefined') return function() {};\n\n  return function(store, pct) {\n    if (pageLoadTime && toRenderedTime) return;\n    if (!pageLoadTime) pageLoadTime = new Date().getTime() - performance.timing.navigationStart;\n    if (pct < 1) return;\n    toRenderedTime = new Date().getTime() - performance.timing.navigationStart;\n    console.log(`Page loaded in ${pageLoadTime}ms and rendered in ${toRenderedTime}ms`);\n  };\n};\n\n//\nvar spinnerColor = '#646766';\n\nvar circleDiv = {\n  flex: '0 0 25%'\n};\n\nvar r = 90;\nvar PIR2 = Math.PI * r * 2;\n\nvar outer = {\n  r, cx: 100, cy: 100,\n  fill: 'transparent',\n  'stroke-dasharray': PIR2,\n  'stroke-dashoffset': 0,\n  'stroke-width': '1em',\n  stroke: '#eee'\n};\nvar inner = {\n  r, cx: 100, cy: 100,\n  fill: 'transparent',\n  stroke: spinnerColor,\n  transition: 'stroke-dashoffset 1s linear',\n  'stroke-width': '1em',\n  'stroke-dashoffset': PIR2,\n  'stroke-dasharray': PIR2\n};\nvar svg = {\n  height: '100%',\n  width: '100%',\n  viewport: '0 0 100 100',\n  viewBox: '0 0 200 200',\n};\n\nexport default function progress(store) {\n  const pct = loadingProgress(store);\n  const degrees = PIR2*(1-pct);\n  stats(store, pct);\n\n  return h('div', {style: {...styles.absoluteMaxCentered, backgroundColor: 'transparent', boxSizing: 'border-box' }}, [\n    h('div', {style: circleDiv}, [\n      h('svg', {attrs: svg}, [\n        h('circle', {attrs: outer}),\n        h('circle', {props: {id: 'bar'}, attrs: {...inner, 'stroke-dashoffset': degrees}}),\n      ])\n    ])\n  ]);\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/progress.js\n **/","import THREE from 'three';\nimport { manipulators } from '../modules/player';\n\nfunction isManip(store, key) {\n  return store.getIn(['player','activeManipulator']) === manipulators[key];\n};\n\nfunction isManipOn(store, key) {\n  return store.getIn(['player', 'enableTools', key]);\n}\n\nconst tools = {\n  orbit: (store, { navigator }) => {\n    return {\n      drag: function(ev) {\n        if (ev.which !== 1 || !isManip(store, 'orbit') || !isManipOn(store, 'orbit')) return false;\n\n        return {\n          momentum: true,\n          handle: function({ deltaX, deltaY }) {\n            navigator.updateSphericalRotation(new THREE.Vector2(deltaX, deltaY));\n          }\n        };\n      }\n    };\n  },\n\n  pan: (store, { navigator}) => {\n    function move({ deltaX, deltaY }) {\n      navigator.updatePan(new THREE.Vector2(deltaX, deltaY));\n    }\n\n    return {\n      drag: function(ev) {\n        if ((!isManip(store, 'pan') && ev.which !== 2 && ev.which !== 3) || !isManipOn(store, 'pan')) return false;\n\n        return {\n          momentum: true,\n          handle: function(ev) {\n            move(ev);\n          }\n        };\n      },\n      swipe: function(ev) {\n        if (!isManipOn(store, 'pan')) return false;\n        move(ev);\n      }\n    };\n  },\n\n  zoom: (store, state) => {\n    function zoomBy({ delta, deltaX, deltaY }) {\n      const d = delta !== undefined ? delta : ((deltaX / 30) + (-deltaY / 30));\n\n      state.navigator.updateZoom(-d);\n    }\n\n    return {\n      drag: function(ev) {\n        if (!isManip(store, 'zoom') || !isManipOn(store, 'zoom')) return false;\n\n        return {\n          momentum: true,\n          handle: function(ev) {\n            const newEv = {delta: ev.delta !== undefined ? ev.delta : ((ev.deltaX / 30) + (-ev.deltaY / 30))};\n            zoomBy(newEv);\n          }\n        };\n      },\n\n      pinch: function(ev) {\n        if (!isManipOn(store, 'zoom')) return false;\n        zoomBy(ev);\n      },\n\n      scroll: function(ev) {\n        if (!isManipOn(store, 'zoom')) return false;\n        zoomBy(ev);\n      }\n    };\n  },\n\n  nodeRotate: (store, {navigator}) => {\n    return {\n      drag: function(ev){\n        if(ev.which!==1 || !isManip(store, 'nodeRotate')) return false;\n        return {\n          momentum:false,\n          handle:function(ev){\n            navigator.rotateNode({x:ev.deltaX, y:ev.deltaY});\n          }\n        };\n      }\n    };\n  },\n\n  nodeMove: (store, {navigator}) => {\n    return {\n      drag: function(ev){\n        if(ev.which!==1 || !isManip(store,'nodeMove')) return false;\n        return {\n          momentum:false,\n          handle:function(ev){\n            navigator.moveNode(ev.deltaX, ev.deltaY);\n          }\n        };\n      }\n    };\n  },\n\n  nodeScale: (store, {navigator}) => {\n    return {\n      drag: function(ev){\n        if(ev.which!==1 || !isManip(store,'nodeScale')) return false;\n        return {\n          momentum:false,\n          handle: function(ev){\n            navigator.scaleNode((ev.deltaX / 30) + (-ev.deltaY / 30))\n          }\n        };\n      }\n    };\n  }\n\n  //test: (store) => {\n  //  return {\n  //    click: function(ev) {\n  //      console.log('click', ev);\n  //    },\n  //    dblclick: function(ev) {\n  //      console.log('double click', ev);\n  //    },\n  //    hover: function(ev) {\n  //      console.log('hover', ev);\n  //    },\n  //    dragenter: function(ev) {\n  //      console.log('dragenter', ev);\n  //    },\n  //    dragover: function(ev) {\n  //      console.log('dragover', ev);\n  //    },\n  //    dragleave: function(ev) {\n  //      console.log('dragleave', ev);\n  //    },\n  //    drop: function(ev) {\n  //      console.log('drop', ev);\n  //    },\n  //    mouseup: function(ev) {\n  //      console.log('mouseup', ev);\n  //    },\n  //    mousedown: function(ev) {\n  //      console.log('mousedown', ev);\n  //    },\n  //    hover: function(ev) {\n  //      console.log('hover');\n  //    }\n  //  };\n  //}\n};\n\nexport default tools;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/tools.js\n **/","import THREE from 'three';\nimport WEBVR from 'webvr';\nimport { List } from 'immutable';\nimport { createTranslator } from './translator';\nimport { convertToPolyMesh, convertToCNSPolyMesh, checkGeometryCache, cacheGeometry } from './bingeom';\nimport { primitiveToMaterial, getCubeMapTexture, assignTexture } from './materials';\nimport { polyMeshToBufferGeometry } from './polyMesh';\nimport { createLight, updateLight } from './light';\nimport { setTransformOn, setMatrixOn } from './transform';\nimport initNavigator from './navigator';\nimport { initManipulators } from './manipulators';\n\nimport { getOrFetchBinary, getHash } from '../modules/assets';\nimport { getScreenPositionNormalAlpha } from './annotation';\nimport { reportError } from '../modules/sceneIO';\nimport { resizeCamera, virtualCameraId } from '../modules/sceneGraph';\nimport { getTools, getCameraPosition, isStereoMode, setPlayerElement, isDeviceTracking  } from '../modules/player';\n\nimport getBoundingBox from './utils/getBoundingBox';\nimport './utils/outlinePass';\nimport './utils/FXAAShader';\n\nimport './utils/vrEffect'; // Extend three with VREffect\nimport './utils/vrControls'; // extend three with VRControls\nimport './utils/parallaxBarrierEffect'; // extend three with StereoEffect\nimport './utils/reticle';\nimport './utils/viveController';\nimport './utils/objLoader';\n\nimport { ThreeExport } from '../polyMesh';\n\nconst BACKGROUND_STYLE_DEFAULT = 0;\nconst BACKGROUND_STYLE_COLOR = 1;\nconst BACKGROUND_STYLE_IMAGE = 2;\nconst BACKGROUND_STYLE_CUBEMAP = 3;\nconst BACKGROUND_STYLE_ENVIRONMENT = 4;\n\nfunction initTranslator(store, context, translator) {\n  const scene = new THREE.Scene();\n  const camera = new THREE.PerspectiveCamera(75, 4 / 3, 0.1, 1000);\n\n  const rendererAttrs = {\n    antialias: false,\n    precision: 'highp',\n    alpha: true,\n    preserveDrawingBuffer: true,\n  };\n  if (context) {\n    rendererAttrs.canvas = { style: {} };\n    rendererAttrs.context = context;\n  }\n  let isIOS = false;\n  const renderer = new THREE.WebGLRenderer(rendererAttrs);\n  renderer.setClearColor( 0xffffff );\n  renderer.autoResizeTextures = false;\n  renderer.gammaInput = true;\n  renderer.gammaOutput = true;\n  renderer.toneMapping = THREE.ReinhardToneMapping;\n  renderer.physicallyCorrectLights = true;\n  if (__BROWSER__) {\n    const pixelRatio = 1; //window.devicePixelRatio || 1;\n    renderer.setPixelRatio( pixelRatio );\n    isIOS = ( window.navigator ) ? ( /iPad|iPhone|iPod/.test(window.navigator.userAgent) && !window.MSStream ) : false;\n  }\n\n\n  let el = null;\n  let playerEl = null; // This is the parent element that we control (div.claraplayer)\n\n  const nodes = {};\n  const annotations = {};\n  const rect = new THREE.Vector2(400, 300);\n  let navigator = null;\n  let tools = [];\n  let interactionHandler = null;\n  let cameraId = virtualCameraId;\n  let boundingBox = null;\n  let prefetched = null;\n  let reflectiveFloorMaterial = null;\n  let reflectiveFloorMesh = null;\n\n  let noExternalDisplay = true;\n  let controller1, controller2;\n  let vrElements = new THREE.Object3D();\n  let vrDisplay = null;\n  let vrReticle = null;\n  let vrFloor = null;\n  let vrTexture = null;\n  let viveControllerButtonPressed = false;\n  let currentRenderingMode = 'normal';\n\n  const translatorState = {};\n\n  function getContext() {\n    return renderer.getContext();\n  }\n\n  // use msaa on the server\n  const serverRenderingMode = !!context;\n\n  const composer = new THREE.EffectComposer( renderer );\n\n  const clearPass = new THREE.ClearPass();\n  clearPass.enabled = true;\n  clearPass.renderToScreen = true;\n  composer.addPass( clearPass );\n\n  const texturePass = new THREE.TexturePass();\n  texturePass.clear = false;\n  texturePass.enabled = false;\n  texturePass.renderToScreen = true;\n  composer.addPass( texturePass );\n\n  const cubeTexturePass = new THREE.CubeTexturePass( scene, camera );\n  cubeTexturePass.clear = false;\n  cubeTexturePass.enabled = false;\n  cubeTexturePass.renderToScreen = true;\n  composer.addPass( cubeTexturePass );\n\n  const msaaRenderPass = new THREE.ManualMSAARenderPass( scene, camera );\n  msaaRenderPass.clear = false;\n  msaaRenderPass.renderToScreen = true;\n  msaaRenderPass.sampleLevel = serverRenderingMode ? 3 : 1;\n  msaaRenderPass.unbiased = true;\n  msaaRenderPass.enabled = true;\n  composer.addPass( msaaRenderPass );\n\n  const renderPass = new THREE.RenderPass( scene, camera, null, 0xffffff );\n  //renderPass.clear = true;\n  renderPass.renderToScreen = true;\n  //renderPass.enabled = ! msaaRenderPass.enabled;\n  composer.addPass( renderPass );\n\n  var outlinePass = new THREE.OutlinePass( new THREE.Vector2(window.innerWidth, window.innerHeight), scene, camera);\n  outlinePass.edgeStrength = 10;\n  outlinePass.edgeGlow = 0;\n  outlinePass.edgeThickness = 1;\n  outlinePass.pulsePeriod = 0;\n  outlinePass.visibleEdgeColor = new THREE.Color(0, 1, 0);\n  outlinePass.hiddenEdgeColor = new THREE.Color(0, 1, 0);\n  outlinePass.renderToScreen = true;\n  composer.addPass( outlinePass );\n\n/*  var effectFXAA = new THREE.ShaderPass(THREE.FXAAShader);\n  effectFXAA.uniforms['resolution'].value.set(1 / window.innerWidth, 1 / window.innerHeight );\n  effectFXAA.renderToScreen = true;\n  composer.addPass( effectFXAA );*/\n\n  const saoPass = new THREE.SAOPass( scene, camera );\n  saoPass.downSamplingRatio = serverRenderingMode ? 1 : 1; // fast enough if not full screen (I think.)\n  saoPass.intensity = 3;\n  saoPass.occlusionSphereWorldRadius = 2;\n  saoPass.renderToScreen = true;\n  saoPass.blurEnabled = true;\n  saoPass.outputOverride = null//\"sao\";\n  saoPass.manualCompositing = false;\n  saoPass.blurKernelSize = ((saoPass.downSamplingrendererRatio === 1) ? 6 : 6 ) + ( serverRenderingMode ? 2 : 0 );\n  saoPass.enabled = true;\n  composer.addPass( saoPass );\n\n  //---For VR Render\n\n  const stereoEffect = new THREE.ParallaxBarrierEffect( renderer );\n  const vrControls = new THREE.VRControls( camera );\n  const vrEffect = new THREE.VREffect( renderer );\n\n  function resize(width, height) {\n    if (el) {\n      const elRect = el.parentNode.getBoundingClientRect();\n      width = elRect.width;\n      height = elRect.height;\n    }\n\n    if (width < 10 || height < 10) return;\n\n    rect.set(width, height);\n\n    if (navigator) navigator.resize(rect);\n    renderer.setSize(rect.width, rect.height);\n\n    const pixelRatio = renderer.getPixelRatio();\n    composer.setSize(rect.width * pixelRatio, rect.height * pixelRatio);\n    if (interactionHandler) interactionHandler.resize(rect);\n\n    if (vrEffect !== undefined) vrEffect.setSize(width, height);\n\n    if(height && height!==0) {\n      camera.aspect = width/height;\n      camera.updateProjectionMatrix();\n    }\n\n    //effectFXAA.uniforms['resolution'].value.set(1 / width, 1 / height );\n  }\n\n  /*\n   * Attach the renderer's canvas element to the DOM?.\n   */\n  function attach(element) {\n    el = element;\n    el.insertBefore(renderer.domElement, el.firstChild);\n\n    playerEl = el.parentElement;\n    store.dispatch(setPlayerElement(playerEl, renderer.domElement));\n    resize();\n  }\n  function enterVR() {\n    vrControls.resetPose(); // zero orientation controls\n    vrEffect.requestPresent();\n    function texture() {\n      // Materials\n      var mat = new THREE.LineBasicMaterial( {color: 0xffffff, linewidth: 10} );\n\n      let lineGeometry = new THREE.BufferGeometry();\n      let positions = new Float32Array( 80 * 2 * 3 );\n\n      for(let x = -10, i = 0; x < 10; x+=0.5, i++) {\n        positions[i*6+0] = x;\n        positions[i*6+1] = 0;\n        positions[i*6+2] = -10;\n        positions[i*6+3+0] = x;\n        positions[i*6+3+1] = 0;\n        positions[i*6+3+2] = 10;\n      }\n      for(let z = -10, i = 40; z < 10; z+=0.5, i++) {\n        positions[i*6+0] = -10;\n        positions[i*6+1] = 0;\n        positions[i*6+2] = z;\n        positions[i*6+3+0] = 10;\n        positions[i*6+3+1] = 0;\n        positions[i*6+3+2] = z;\n      }\n\n      lineGeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\n\n      let mesh = new THREE.LineSegments( lineGeometry, mat );\n      mesh.mode = THREE.LineSegments;\n\n      return mesh;\n    };\n    if(vrElements.children.length == 0) {\n      var cbgeometry = new THREE.PlaneGeometry( 20, 20, 1, 1 );\n      var mat = new THREE.MeshBasicMaterial( {color: 0x666666 } );\n      vrFloor = new THREE.Mesh( cbgeometry, mat);\n      vrFloor.rotation.x = -Math.PI * 0.5;\n      vrTexture = texture();\n\n      vrReticle = new THREE.Reticle(camera);\n\n      vrReticle.addCollider(vrFloor);\n\n      scene.add(vrElements);\n\n      vrElements.add(vrReticle.armObject);\n      vrElements.add(vrFloor);\n      vrElements.add(vrTexture);\n    }\n\n    window.navigator.getVRDisplays().then(function(displays) {\n      if (displays.length > 0) {\n        vrDisplay = displays[0];\n        if(!vrDisplay.capabilities.hasExternalDisplay) {\n          scene.add(camera);\n          window.addEventListener(\"touchend\", navHandle);\n        }\n        else {\n          noExternalDisplay = false;\n          vrControls.standing = true;\n          if(vrElements.children.controller1 === undefined) {\n            //------Add vive controllers-----------\n            controller1 = new THREE.ViveController( 0 );\n            controller1.standingMatrix = vrControls.getStandingMatrix();\n            vrElements.add( controller1 );\n\n            controller2 = new THREE.ViveController( 1 );\n            controller2.standingMatrix = vrControls.getStandingMatrix();\n            vrElements.add( controller2 );\n\n            var loader = new THREE.OBJLoader();\n            loader.setPath( 'models/' );\n            loader.load( 'vr_controller_vive_1_5.obj', function ( object ) {\n\n              var loader = new THREE.TextureLoader();\n              loader.setPath( 'models/' );\n\n              var controller = object.children[ 0 ];\n              var material = new THREE.MeshBasicMaterial();\n              material.map = loader.load( 'onepointfive_texture.png' );\n              material.specularMap = loader.load( 'onepointfive_spec.png' );\n              controller.material = material;\n\n              controller1.add( object.clone() );\n              controller2.add( object.clone() );\n\n            });\n          }\n          window.addEventListener(\"thumbpadup\", viveNavHandle);\n        }\n      }\n    });\n\n\n  }\n\n  function exitVR() {\n    vrEffect.exitPresent();\n    if(noExternalDisplay) {\n      scene.remove(camera);\n      window.removeEventListener(\"touchend\", navHandle);\n    }\n    else {\n      controller1 = null;\n      controller2 = null;\n      scene.position.set(0, 0, 0);\n      vrElements.position.set(0, 0, 0);\n      window.removeEventListener(\"thumbpadup\", viveNavHandle);\n    }\n    vrControls.standing = false;\n    //vrReticle.removeCollider(vrFloor);\n    renderer.setScissorTest(false);\n    //vrElements.children = [];\n    scene.remove(vrElements);\n  }\n\n  function viveNavHandle() {\n    if(vrReticle.armObject !== null) {\n      var pos = vrReticle.getReticlePosition().clone();\n      var vrdpPos = camera.position.clone();\n      var trans = vrdpPos.sub(pos);\n      scene.translateX(trans.x);\n      scene.translateZ(trans.z);\n      vrElements.translateX(-trans.x);\n      vrElements.translateZ(-trans.z);\n    }\n  }\n\n  function navHandle() {\n    if(vrReticle.armObject !== null) {\n      var pos = vrReticle.getReticlePosition().clone();\n      pos.y = 1.6;\n      navigator.changeCameraPosition(pos);\n    }\n  }\n\n  function orientHandle() {\n    store.dispatch({type:'POKE'});\n  }\n\n  function deviceTrackingTransition(enabled) {\n    window[enabled ? 'addEventListener' : 'removeEventListener']('deviceorientation', orientHandle);\n  }\n\n  function handleStateChanges() {\n    // TODO: only do this if the player has changed. Requires moving the cameraWorldMatrix\n    // out of the player state.\n    //\n\n    function stateChange(key, handler) {\n      const newState = store.getIn(['player', key]);\n      if (translatorState[key] !== newState) {\n        handler(newState, translatorState[key]);\n        translatorState[key] = newState;\n      }\n    }\n    stateChange('deviceTracking', deviceTrackingTransition);\n  }\n\n  /*\n   * After all nodes have been translated.\n   */\n  let renderDisplaySceneTimeout = null;\n  let lastRenderStartTime = -1;\n  let lastRenderDeltaTime = -1;\n\n  function updateRenderTime() {\n\n    const currentRenderStartTime = Date.now();\n    if( lastRenderStartTime > 0 ) {\n      lastRenderDeltaTime = currentRenderStartTime - lastRenderStartTime;\n    } else {\n      lastRenderDeltaTime = -1;\n    }\n    lastRenderStartTime = currentRenderStartTime;\n\n  }\n\n  function postTranslate(renderingMode, loaded) {\n\n    if( renderDisplaySceneTimeout ) {\n      clearTimeout( renderDisplaySceneTimeout );\n    }\n\n    updateRenderTime();\n\n    if (loaded) {\n      handleStateChanges();\n\n      if( reflectiveFloorMesh && reflectiveFloorMesh.data.get('reflectiveFloor') ) {\n        reflectiveFloorMaterial.distanceFade = reflectiveFloorMesh.data.get('reflectiveFloorFade') * 0.0001;\n        reflectiveFloorMaterial.roughness = reflectiveFloorMesh.data.get('reflectiveFloorRoughness');\n        reflectiveFloorMaterial.metalness = reflectiveFloorMesh.data.get('reflectiveFloorMetallic');\n        reflectiveFloorMaterial.opacity = reflectiveFloorMesh.data.get('reflectiveFloorOpacity');\n        reflectiveFloorMaterial.fresnelStrength = reflectiveFloorMesh.data.get('reflectiveFloorFresnel');\n        reflectiveFloorMaterial.reflectivity = 0.5;\n        reflectiveFloorMaterial.render( renderer, scene, camera );\n\n        //reflectiveFloorMesh.material = new THREE.MeshStandardMaterial( { emissive: 0xff00ff, emissiveMap: reflectiveFloorMaterial.material.uniforms.tReflection.value } );\n      }\n      //renderer.setClearColor( renderPass.clearColor, renderPass.clearAlpha );\n\n\n      if (isDeviceTracking(store)) vrControls.update();\n\n      cubeTexturePass.camera = camera;\n\n      if (renderingMode === 'normal') {\n        //renderer.autoClear = false;\n        renderer.setClearColor( 0xffffff );\n        renderPass.enabled = false;\n        //effectFXAA.enabled = false;\n        msaaRenderPass.enabled = true;\n        //renderer.setClearAlpha( 0.9 );\n        composer.render();\n      } else if (renderingMode === 'vr') {\n        renderPass.enabled = true;\n        //effectFXAA.enabled = true;\n        msaaRenderPass.enabled = false;\n        vrDisplay = vrEffect.getVRDisplay();\n        if(!noExternalDisplay) {\n          controller1.update();\n          controller2.update();\n        }\n        vrReticle.update();\n        vrEffect.render(scene, camera, null, true);\n      } else if (renderingMode === 'lenticular') {\n        stereoEffect.render(scene, camera);\n      }\n\n      if (!serverRenderingMode || lastRenderDeltaTime > 0 ) {\n        renderDisplaySceneTimeout = setTimeout( function() {\n\n          updateRenderTime();\n\n          msaaRenderPass.sampleLevel = 2;\n          composer.render();\n          msaaRenderPass.sampleLevel = 1;\n\n          renderDisplaySceneTimeout = setTimeout( function() {\n\n            updateRenderTime();\n\n            msaaRenderPass.sampleLevel = 3;\n            composer.render();\n            msaaRenderPass.sampleLevel = 1;\n            lastRenderStartTime = -1;\n          }, Math.max( lastRenderDeltaTime, 100 ) * 4 );\n        }, Math.max( lastRenderDeltaTime, 100 ) * 4 );\n      }\n    }\n  }\n\n  function getReticle() {\n    return vrReticle;\n  }\n  function getVRDisplay() {\n    return vrDisplay;\n  }\n  /*\n   * View attributes have changed (rect, camera data, etc).\n   */\n  function updateView(player) {\n    if (interactionHandler && tools !== getTools(store)) {\n      tools = getTools(store);\n      interactionHandler.updateTools(tools, { navigator });\n    }\n    setMatrixOn(camera, getCameraPosition(store));\n  }\n\n  /*\n   * Scene is loaded.\n   */\n  function onLoad() {\n    boundingBox = getBoundingBox(scene);\n    navigator = initNavigator(store, boundingBox, rect, cameraId);\n    store.setNavigator(navigator);\n\n    if (!context) {\n      interactionHandler = initManipulators(store, renderer.domElement);\n      interactionHandler.resize(rect);\n    }\n  }\n\n  function getAnnotations() {\n    return annotations;\n  }\n\n  function getNavigator() {\n    return navigator;\n  }\n\n  function addToParent(id, node, obj, skipReplace) {\n    // console.log('Add toParent: ', node && node.get('parent'), obj);\n    const parentId = node && node.get('parent');\n    const parent = (parentId && nodes[parentId]) || scene;\n    obj.name = node.get('name'); // eslint-disable-line no-param-reassign\n    obj.nodeId = id;\n\n    if (nodes[id]) {\n      if (skipReplace) return;\n\n      const children = [].concat(nodes[id].children);\n      for (let i=0; i<children.length; i++) {\n        nodes[id].remove(children[i]);\n        obj.add(children[i]);\n      }\n      parent.remove(nodes[id]);\n      if(nodes[id].geometry) nodes[id].geometry.dispose();\n    }\n\n    nodes[id] = obj;\n    parent.add(nodes[id]);\n  }\n\n  function shouldPrefetch(properties) {\n    return prefetched && properties && properties.get('prefetch');\n  }\n\n  const plugs = {\n    PolyMesh: (id, data, prevData, node, prevNode, properties) => {\n      const visible = properties.get('visible');\n      const mesh = data.get('mesh');\n      //console.log(mesh, prevData && prevData.get('mesh'));\n\n      //const collapseMaps = true;\n      const indexingMode = renderer.extensions.get( 'OES_element_index_uint' ) ? ThreeExport.CompactIndices : ThreeExport.NoIndices;\n      const interleaved = false;\n      const oldMesh = nodes[id];\n      const prevTriangulation = oldMesh && oldMesh.userData.triangulation;\n      const prevIndexing = oldMesh && oldMesh.userData.renderIndexing;\n      const prevValueMap = oldMesh && oldMesh.userData.valueMap;\n      const bufferInfo = mesh && ThreeExport.exportBufferGeometry( mesh, indexingMode, interleaved, null, prevData, prevTriangulation, prevIndexing, prevValueMap);\n\n      let geometry, triangulation, triangulationChanged, renderIndexing, valueMap;\n      if(bufferInfo){\n        geometry = bufferInfo.geometry;\n        triangulation = bufferInfo.triangulation;\n        triangulationChanged = bufferInfo.triangulationChanged;\n        renderIndexing  = bufferInfo.renderIndexing;\n        valueMap = bufferInfo.valueMap;\n      }\n\n      let obj;\n\n      if (triangulationChanged || !oldMesh){\n        obj = geometry && new THREE.Mesh(geometry, primitiveToMaterial(store));\n      } else {\n        obj = oldMesh;\n        if(geometry) {\n          obj.geometry.dispose();\n          obj.geometry = geometry;\n        }\n        //obj.material.dispose();\n        //obj.material = primitiveToMaterial(store);\n      }\n\n      if (obj) {\n        obj.visible = visible;\n        obj.userData.triangulation = triangulation;\n        obj.userData.renderIndexing = renderIndexing;\n        obj.userData.valueMap = valueMap;\n      }\n\n      addToParent(id, node, obj || new THREE.Object3D());\n    },\n\n    BinMesh: (id, data, prevData, node, prevNode, properties) => {\n      const visible = properties.get('visible');\n      const mesh = data.get('mesh');\n\n      //const collapseMaps = true;\n      //const polyMesh = CNS.ThreeImport.importBufferGeometry(geometry, collapseMaps);\n      const indexingMode = renderer.extensions.get( 'OES_element_index_uint' ) ? ThreeExport.CompactIndices : ThreeExport.NoIndices;\n      const interleaved = false;\n      const bufferInfo = mesh && ThreeExport.exportBufferGeometry( mesh, indexingMode, interleaved );\n      const obj = bufferInfo && bufferInfo.geometry && new THREE.Mesh(bufferInfo.geometry, primitiveToMaterial(store));\n      if (obj) obj.visible = visible;\n      addToParent(id, node, obj || new THREE.Object3D());\n    },\n\n    Light: (id, data, prevData, node) => {\n      let obj = nodes[id];\n      if (!obj) {\n        obj = createLight(data);\n        if (obj) addToParent(id, node, obj);\n      } else {\n        updateLight(data, obj);\n      }\n    },\n\n    Bone: (id, data, prevData, node) => {\n      // FIXME: Make bones work, this just adds a null object\n      if (!nodes[id]) addToParent(id, node, new THREE.Object3D());\n    },\n\n\n    Null: (id, data, prevData, node) => {\n      if (!nodes[id]) addToParent(id, node, new THREE.Object3D());\n    },\n\n    Transform: (id, data) => {\n      if (!nodes[id] || !data || !data.get('transform')) return;\n      setMatrixOn(nodes[id], data.get('transform'));\n    },\n\n    Material: (id, data) => {\n      if (!nodes[id]) return;\n      nodes[id].material = primitiveToMaterial(store, renderer, data, nodes[id].material);\n    },\n\n    Environment: (id, data) => {\n      //console.log(data.toJS());\n      const backgroundStyle = data.get('backgroundStyle');\n      clearPass.enabled = false;\n      cubeTexturePass.enabled = false;\n\n      switch( backgroundStyle ) {\n\n        case BACKGROUND_STYLE_COLOR:\n          clearPass.enabled = true;\n          clearPass.clearColor = data.get('backgroundColor');\n          clearPass.clearAlpha = data.get('backgroundOpacity');\n          break;\n        case BACKGROUND_STYLE_IMAGE:\n          texturePass.enabled = true;\n          texturePass.map = assignTexture(store, renderer, data.get('background'));\n          break;\n        case BACKGROUND_STYLE_CUBEMAP:\n        case BACKGROUND_STYLE_ENVIRONMENT: {\n\n            clearPass.enabled = true;\n            clearPass.clearColor = 0x000000;\n            clearPass.clearAlpha = 0.0;\n\n            cubeTexturePass.enabled = true;\n\n            let cubeMapNode;\n            let cubeMapBlurring;\n\n            if( backgroundStyle === BACKGROUND_STYLE_ENVIRONMENT ) {\n              cubeMapNode = data.get('environmentMap');\n              if( cubeMapNode ) {\n                cubeMapNode = cubeMapNode.get('specularCubeMap');\n              }\n              cubeMapBlurring = data.get('environmentMapBlurring' );\n            }\n            else {\n              cubeMapNode = data.get('cubeMap');\n              cubeMapBlurring = data.get('cubeMapBlurring');\n            }\n\n            if( cubeMapNode ) {\n              cubeTexturePass.envMap = getCubeMapTexture(store, renderer, cubeMapNode, true );\n              cubeTexturePass.envMapIntensity = 1.0;\n              cubeTexturePass.opacity = data.get('backgroundOpacity');\n              cubeTexturePass.roughness = data.get('cubeMapBlurring');\n            }\n            else {\n              cubeTexturePass.enabled = false;\n            }\n          }\n\n          break;\n\n        default:\n          clearPass.enabled = true;\n          clearPass.clearColor = new THREE.Color(1,1,1);\n          clearPass.clearAlpha = 0;\n          break;\n      }\n    },\n\n    Player: (id, data) => {\n      const newCameraId = data.getIn(['camera', 'id']);\n      if (newCameraId && newCameraId !== cameraId) {\n        cameraId = newCameraId;\n        if (navigator) navigator.switchCamera(cameraId);\n      }\n\n      const styleToToneMapping = {\n        Linear: THREE.LinearToneMapping,\n        Reinhard: THREE.ReinhardToneMapping,\n        Cineon: THREE.CineonToneMapping,\n        Filmic: THREE.Uncharted2ToneMapping,\n      };\n\n      renderer.toneMapping = styleToToneMapping[data.get('toneMapStyle')];\n      renderer.toneMappingExposure = data.get('toneMapExposureGain');\n      renderer.toneMappingWhitePoint = data.get('toneMapWhitePoint');\n      renderer.gammaInput = true;\n      renderer.gammaOutput = true;\n      renderer.autoClear = false;\n\n      saoPass.enabled = data.get('saoPass');\n      saoPass.intensity = data.get('saoIntensity');\n      saoPass.occlusionSphereWorldRadius = data.get('saoScale');\n\n      if( data.get('reflectiveFloor') && ( ( ! data.get('reflectiveFloorExcludeServer') ) || __BROWSER__ ) ) {\n\n        if( ! reflectiveFloorMaterial ) {\n          const mirrorGeo = new THREE.PlaneBufferGeometry( 1, 1 );\n          reflectiveFloorMaterial = new THREE.GlossyMirror( { clipBias: 0.003, textureWidth: 1024, textureHeight: 1024, color: 0x777777, localMirrorNormal: new THREE.Vector3( 0, 1, 0 ) } );\n          reflectiveFloorMesh = new THREE.Mesh( mirrorGeo, reflectiveFloorMaterial.material );\n        }\n\n        reflectiveFloorMaterial.specularColor = new THREE.Color( 0xffffff );\n        reflectiveFloorMaterial.specularColor = new THREE.Color( 0xffffff );\n\n        reflectiveFloorMesh.scale.x = data.get('reflectiveFloorWidth');\n        reflectiveFloorMesh.scale.y = data.get('reflectiveFloorWidth');\n        reflectiveFloorMesh.rotation.x = -Math.PI * 0.5;\n        reflectiveFloorMesh.position.y = data.get('reflectiveFloorHeight');\n\n        reflectiveFloorMesh.data = data;\n\n        if( ! reflectiveFloorMesh.parent ) {\n          scene.add( reflectiveFloorMesh );\n        }\n      }\n      else {\n        if( reflectiveFloorMesh && reflectiveFloorMesh.parent ) {\n          scene.remove( reflectiveFloorMesh );\n        }\n      }\n    },\n\n    Camera: (id, data) => {\n      camera.fov = data.get('fieldOfView');\n      camera.aspect = data.get('aspectRatio');\n      camera.near = data.get('nearClip');\n      camera.far = data.get('farClip');\n      camera.updateProjectionMatrix();\n    },\n  };\n\n  const translators = {\n    Scene: (id, data, prevData, node, prevNode) => {\n      for (const plug of ['Player','Environment']) {\n        plugs[plug](id, data.get(plug), prevData && prevData.get(plug), node, prevNode);\n      }\n    },\n\n    PolyMesh: (id, data, prevData, node, prevNode) => {\n      const visible = data.getIn(['Properties', 'visible']);\n      const prevVisible = prevData && prevData.getIn(['Properties', 'visible']);\n\n      const meshChanged = !prevData || prevData.get('PolyMesh') !== data.get('PolyMesh')\n          || visible !== prevVisible || (!visible && shouldPrefetch(data.get('Properties')));\n\n      for (const plug of ['PolyMesh', 'Transform', 'Material']) {\n        if (!prevData || meshChanged || prevData.get(plug) !== data.get(plug)) {\n          if (plug === 'PolyMesh' || visible) {\n            plugs[plug](id, data.get(plug), prevData && prevData.get(plug),\n                node, prevNode, data.get('Properties'));\n          }\n        }\n      }\n    },\n\n    BinMesh: (id, data, prevData, node, prevNode) => {\n      const visible = data.getIn(['Properties', 'visible']);\n      const prevVisible = prevData && prevData.getIn(['Properties', 'visible']);\n\n      const meshChanged = !prevData || prevData.get('BinMesh') !== data.get('BinMesh')\n          || visible !== prevVisible || (!visible && shouldPrefetch(data.get('Properties')));\n      for (const plug of ['BinMesh', 'Transform', 'Material']) {\n        if (!prevData || meshChanged || prevData.get(plug) !== data.get(plug)) {\n          if (plug === 'BinMesh' || visible) {\n            plugs[plug](id, data.get(plug), prevData && prevData.get(plug),\n                node, prevNode, data.get('Properties'));\n          }\n        }\n      }\n    },\n\n    Light: (id, data, prevData, node, prevNode) => {\n      for (const plug of ['Light', 'Transform']) {\n        plugs[plug](id, data.get(plug), prevData && prevData.get(plug), node, prevNode);\n      }\n    },\n\n    Null: (id, data, prevData, node, prevNode) => {\n      for (const plug of ['Null', 'Transform']) {\n        plugs[plug](id, data.get(plug), prevData && prevData.get(plug), node, prevNode);\n      }\n    },\n\n    Model: (id, data, prevData, node, prevNode) => {\n      for (const plug of ['Null', 'Transform']) {\n        plugs[plug](id, data.get(plug), prevData && prevData.get(plug), node, prevNode);\n      }\n    },\n\n    Camera: (id, data, prevData, node, prevNode) => {\n      if (cameraId === id) {\n        plugs.Camera(id, data.get('Camera'), // eslint-disable-line new-cap\n            prevData && prevData.get('Camera'), node, prevNode);\n      }\n    },\n\n    ErrorNode: (id, data, prevData, node) => {\n      addToParent(id, node, new THREE.Object3D());\n    },\n\n    Annotation: (id, data) => {\n      const calcDirection = data.getIn(['Annotation','directionMode']) === 'awayFromOrigin';\n\n      if (data.getIn(['Properties', 'visible'])) {\n\n        annotations[id] = {\n          id: id,\n          annotation: data.get('Annotation').toJS(),\n          position: getScreenPositionNormalAlpha(id, calcDirection, data.getIn(['Annotation', 'directionTarget'])),\n        };\n      }\n    },\n\n    Material: (id, data, prevData, node, prevNode) => {\n      if (!shouldPrefetch(data.get('Properties'))) return;\n\n      for (const plug of ['Null', 'Material']) {\n        plugs[plug](id, data.get(plug), prevData && prevData.get(plug), node, prevNode);\n      }\n    },\n\n    Image: (id, data, prevData, node) => {\n      if (!shouldPrefetch(data.get('Properties'))) return;\n      const img = getTextureImage(store, data.get('Image'));\n    },\n\n    Bone: (id, data, prevData, node, prevNode) => {\n      for (const plug of ['Bone', 'Transform']) {\n        plugs[plug](id, data.get(plug), prevData && prevData.get(plug), node, prevNode);\n      }\n    },\n  };\n\n  for (const UnhandledType of ['Objects', 'MaterialLibrary']) {\n    translators[UnhandledType] = (id, data, prevData, node) => {\n      addToParent(id, node, new THREE.Object3D(), true);\n    };\n  }\n  for (const UnhandledType of ['Renderers', 'Passes', 'Pass', 'Renderer']) {\n    translators[UnhandledType] = (id, data, prevData, node) => {};\n  }\n\n  // If necessary, return a function that determines whether a node is dirty or not.\n  // used for flagging nodes as dirty when we want to 'prefetch' them, after scene\n  // has been fully loaded.\n  // mutates 'state'.\n  function dirtyCheck(loaded) {\n    if (prefetched || !loaded) return false;\n\n    prefetched = true;\n    return (s, id, nextResult) => {\n      const props = nextResult.get('Properties');\n      return props && shouldPrefetch(props);\n    };\n  }\n\n  /*\n   * Translate a node, either create, update or delete\n   */\n  function translate(id, evalNode, prevEvalNode, node, prevNode) {\n    if (!node && prevNode) {\n       let id = prevNode.get('id');\n       const k= nodes[id];\n       delete nodes[id];\n       k.parent.remove(k);\n      // TODO: delete\n      return;\n    }\n\n    const type = node.get('type');\n    if (translators[type]) {\n      // console.log('translate', type, node.get('name'));\n      translators[type](id, evalNode, prevEvalNode, node, prevNode);\n    } else {\n      console.warn('translate SKIP', type, node.get('name')); // eslint-disable-line no-console\n    }\n  }\n\n  function raycastSelect(mousePosition){\n    let hits = [];\n    let selectedObjects = [];\n    const ray = new THREE.Raycaster()\n    ray.setFromCamera(mousePosition, camera);\n    let objectsRoot = scene;\n\n    var gizmo = objectsRoot.getObjectByName('GizmoV2');\n    \n    gizmo.traverse((node)=>{\n      if (!node.visible) return;\n      if (!node.geometry) return;\n\n      if (node.geometry.boundingBox === null){\n        node.geometry.computeBoundingBox();\n      }\n\n      const geometry = node.geometry;\n\n      if (geometry.boundingBox.isEmpty() === false) {\n        node.matrix.compose(node.position, node.quaternion, node.scale);\n        node.updateMatrixWorld(true);\n        const inter = ray.intersectObject(node);\n        if (inter.length>0) {\n          hits.push({id: node.name, node: node, data: inter});\n        }\n      }\n    });\n\n\n    scene.children.forEach((child)=>{\n      if(child.type===\"Object3D\" && child.name===\"Objects\") objectsRoot=child;\n    });\n    objectsRoot.traverse((node)=>{\n      if (!node.visible) return;\n      if (!node.geometry) return;\n\n      if (node.geometry.boundingBox === null){\n        node.geometry.computeBoundingBox();\n      }\n\n      const geometry = node.geometry;\n\n      if (geometry.boundingBox.isEmpty() === false) {\n        node.matrix.compose(node.position, node.quaternion, node.scale);\n        node.updateMatrixWorld(true);\n        const inter = ray.intersectObject(node);\n        \n        if (inter.length>0) {\n          hits.push({id: node.nodeId, node: node, data: inter});\n        }\n      }\n    });\n    hits.sort((a,b)=>{\n      return a.data[0].distance-b.data[0].distance;\n    });\n\n    return hits;\n  }\n\n  function highlightSelection(rootNodeId) {\n    outlinePass.selectedObjects = [];\n    if(rootNodeId !== null) {\n      var rootNode = nodes[rootNodeId];\n      if(rootNode !== undefined) {\n        rootNode.traverse((node)=>{\n          if(node.name !== \"optSymbols\" && node.parent.name !== \"optSymbols\" && node.type === \"Mesh\") {\n            outlinePass.selectedObjects.push(node);\n          }\n        });\n      }\n    }\n  }\n\n\n  function toScreenPosition(rootNodeId) {\n    if(rootNodeId) {\n      var obj = nodes[rootNodeId];\n      if(obj) {\n        var vector = new THREE.Vector3();\n\n        var widthHalf = 0.5*renderer.context.canvas.width;\n        var heightHalf = 0.5*renderer.context.canvas.height;\n\n        obj.updateMatrixWorld();\n        var bbox = getBoundingBox(obj);\n        var height = bbox.max.y - bbox.min.y;\n        obj.updateMatrixWorld();\n        vector.setFromMatrixPosition(obj.matrixWorld);\n        vector.y += height;\n        vector.project(camera);\n\n        vector.x = ( vector.x * widthHalf ) + widthHalf;\n        vector.y = - ( vector.y * heightHalf ) + heightHalf;\n\n        return {\n          x: vector.x,\n          y: vector.y\n        };\n      }\n   }\n  };\n\n  function createGizmo() {\n    var gizmo = new THREE.Object3D();\n    gizmo.name = \"GizmoV2\";\n\n    var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );\n    material.side = THREE.DoubleSide;\n    //Draw rotate circle geometry\n    var coneGeometry1 = new THREE.ConeGeometry( 0.2, 0.6, 25 );\n    var rotGeometry = new THREE.TorusGeometry( 1.5, 0.05, 16, 100, 2.5);\n    coneGeometry1.rotateX(Math.PI);\n    coneGeometry1.translate(1.45, 0, 0);\n    rotGeometry.merge(coneGeometry1);\n    var clone1 = rotGeometry.clone();\n    clone1.rotateZ(Math.PI);\n    rotGeometry.merge(clone1); \n    var rotateSyb = new THREE.Mesh( rotGeometry, material );\n    rotateSyb.name = 'rotateSymbol';\n    rotateSyb.visible = true;\n    //Draw translate cross geometry\n    var coneGeometry2 = new THREE.ConeGeometry( 0.2, 0.6, 25 );\n    var transGeometry = new THREE.CylinderGeometry( 0.05, 0.05, 3, 32 );\n    var cloneCone = coneGeometry2.clone();\n    coneGeometry2.translate(0, 1.5, 0);\n    cloneCone.rotateX(Math.PI);\n    cloneCone.translate(0,-1.5,0);\n    transGeometry.merge(coneGeometry2);\n    transGeometry.merge(cloneCone);\n    var clone2 = transGeometry.clone();\n    clone2.rotateZ(Math.PI/2);\n    transGeometry.merge(clone2);\n    material.side = THREE.DoubleSide;\n    var translateSyb = new THREE.Mesh( transGeometry, material );\n    translateSyb.name = 'translateSymbol';\n    translateSyb.visible = true;\n\n    gizmo.add(translateSyb);\n    gizmo.add(rotateSyb);\n    gizmo.position.set(0, 0.1, 0);\n    gizmo.rotateX(Math.PI / 2);\n    gizmo.scale.set(0.4, 0.4, 0.4);\n    scene.add(gizmo);\n    gizmo.visible = false;\n  }\n\n  function updateGizmo(rootNodeId, mode) {\n    var gizmo = scene.getObjectByName('GizmoV2');\n    \n    if(rootNodeId !== null) {\n      var rootNode = nodes[rootNodeId];\n      if (rootNode !== undefined) {\n        var bbox = getBoundingBox(rootNode);\n        var length = bbox.max.x - bbox.min.x;\n        var width = bbox.max.z - bbox.min.z;\n        var dis = length > width ? length : width;\n        gizmo.scale.set(dis/2, dis/2, dis/2);\n\n        gizmo.parent = rootNode;\n        gizmo.visible = true;\n        var tanSyb = gizmo.getObjectByName(\"translateSymbol\");\n        var rotSyb = gizmo.getObjectByName(\"rotateSymbol\");\n        if(mode === \"Rotate Item\") {\n          tanSyb.visible = false;\n          rotSyb.visible = true;\n        }\n        if(mode === \"Translate Item\") {\n          rotSyb.visible = false;\n          tanSyb.visible = true;\n        }\n        if(mode === \"orbit\"){\n          tanSyb.visible = false;\n          rotSyb.visible = false;\n        }\n\n      }\n    }\n    else {\n      gizmo.visible = false;\n    }\n\n  }\n\n  return {\n    attach,\n    resize,\n    translate,\n    raycastSelect,\n    createGizmo,\n    updateGizmo,\n    enterVR,\n    exitVR,\n    highlightSelection,\n    toScreenPosition,\n    getReticle,\n    getVRDisplay,\n    postTranslate,\n    dirtyCheck,\n    updateView,\n    onLoad,\n    getAnnotations,\n    getContext,\n    getNavigator,\n    scene,\n    camera,\n  };\n}\n\n\nexport default function threeTranslator(store, context) {\n  return createTranslator(store, initTranslator, context);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/three.js\n **/","import { all, curry, forEach, reduce, map, mapObjIndexed } from 'ramda';\nimport { getImageFromNode, fetchTextureImage } from './asset';\nimport THREE from 'three';\n\n\nlet textures = {};\nfunction checkTextureCache(id, image) {\n  const cachedImage = textures[id] &&  textures[id].image;\n\n  if (cachedImage && cachedImage.equals(image)) {\n    return textures[id].value;\n  }\n};\n\nfunction cacheTexture(id, image, value) {\n  textures[id] = { image, value };\n  return value;\n};\n\nexport function getCubeMapTexture(store, renderer, image, textureCubeOnly) {\n  const maps = image.get('maps');\n  const nodeId = image.get('id');\n\n  const texture = checkTextureCache(nodeId, image);\n  if (texture) return texture;\n\n  let images = map(curry(getImageFromNode)(store), maps);\n  if (!all((img) => !!img, images)) return null;\n\n  let textureCube = new THREE.CubeTexture();\n  textureCube.images = images;\n\n//  texture.wrapS = texture.wrapT = THREE.ClampToEdgeWrapping;\n//  texture.anisotropy = 16;\n  textureCube.flipY = false;\n  textureCube.needsUpdate = true;\n  if (maps[0].get('preferHDR')) {\n\n    textureCube.encoding = maps[0].get('hdrEncoding');\n    textureCube.generateMipMaps = false;\n  }\n\n  if(textureCubeOnly) return cacheTexture(nodeId, image, textureCube);\n\n  //console.warn( \"skipping PMREM generation because one needs to get the WebGLRenderer here.\" );\n  //return textureCube;\n  const pmremGenerator = new THREE.PMREMGenerator( textureCube );\n  pmremGenerator.update( renderer );\n\n  pmremGenerator.cubeLods[0].texture.magFilter = THREE.LinearFilter;\n  pmremGenerator.cubeLods[0].texture.minFilter = THREE.LinearFilter;\n\n  const pmremCubeUVPacker = new THREE.PMREMCubeUVPacker( pmremGenerator.cubeLods );\n  pmremCubeUVPacker.update( renderer );\n\n  pmremCubeUVPacker.CubeUVRenderTarget.texture.magFilter = THREE.LinearFilter;\n  pmremCubeUVPacker.CubeUVRenderTarget.texture.minFilter = THREE.LinearFilter;\n  pmremCubeUVPacker.CubeUVRenderTarget.texture.needsUpdate = true;\n\n  return cacheTexture(nodeId, image, pmremCubeUVPacker.CubeUVRenderTarget.texture);\n}\n\nexport function getTextureImage(store, image) {\n  if (!image) return null;\n  const nodeId = image.get('id');\n\n  if (!checkTextureCache(image.get('id'), image)) {\n    if (image.get('maps')) {\n      map(curry(getImageFromNode)(store), maps);\n    } else {\n      fetchTextureImage(store, image);\n    }\n  }\n};\n\n/*\n * Modifies the map being passed in.\n */\nexport function assignTexture(store, renderer, image, optionalThreemap) {\n  if (!image) {\n    if(optionalThreemap) optionalThreemap.texture = null;\n    return null;\n  }\n\n  if (image.get('maps')) {\n    return getCubeMapTexture(store, renderer, image);\n  }\n\n  const uvOptions = image.toJS();\n  const nodeId = image.get('id');\n  let texture = checkTextureCache(nodeId, image);\n\n  if (!texture) {\n    texture = new THREE.Texture();\n    texture.meta = { nodeId: nodeId };\n    if (image.get('canvasOperations')) {\n      texture.meta.source = \"canvas operator\";\n      let ops = image.get('canvasOperations');\n\n      let canvas = document.createElement('canvas');\n      canvas.width = image.get('width');\n      canvas.height = image.get('height');\n      let context = canvas.getContext('2d');\n\n      let ok = ops.reduce((ok, op) => {\n        context.save();\n        let ret = ok && op(context, store);\n        context.restore();\n        return ret;\n      }, true);\n\n      if (ok) texture.image = canvas;\n    } else {\n      texture.meta.source = \"image fetch\";\n      texture.image = fetchTextureImage(store, image);\n    }\n\n    if (!texture.image) {\n      if(optionalThreemap) optionalThreemap.texture = null;\n      return null;\n    }\n    texture.transparent = true;\n\n    const textureWraps = {\n      0: THREE.ClampToEdgeWrapping,\n      1: THREE.RepeatWrapping,\n      2: THREE.MirroredRepeatWrapping\n    };\n\n    texture.wrapS = textureWraps[uvOptions.wrapU];\n    texture.wrapT = textureWraps[uvOptions.wrapV];\n\n    texture.generateMipMaps = uvOptions.generateMipMaps;\n    texture.anisotropy = texture.generateMipMaps ? 16 : 1;\n    texture.magFilter = uvOptions.magFilter;\n    texture.minFilter = uvOptions.minFilter;\n    texture.encoding = THREE.sRGBEncoding;\n\n    if( ( THREE.Math.nearestPowerOfTwo( texture.image.width ) !== texture.image.width ) ||\n        ( THREE.Math.nearestPowerOfTwo( texture.image.height ) !== texture.image.height ) ) {\n      texture.wrapS = THREE.ClampToEdgeWrapping;\n      texture.wrapT = THREE.ClampToEdgeWrapping;\n      texture.generateMipMaps = false;\n      texture.anisotropy = 1;\n      texture.anisotropy = 1;\n      texture.magFilter = THREE.LinearFilter;\n      texture.minFilter = THREE.LinearFilter;\n    }\n\n    texture.needsUpdate = true;\n\n    cacheTexture(nodeId, image, texture);\n  };\n\n  if(!optionalThreemap){\n    return texture;\n  }\n  optionalThreemap.texture = texture;\n\n  optionalThreemap.uvTransform = true;\n  optionalThreemap.uvOffset = new THREE.Vector2(uvOptions.uOffset, uvOptions.vOffset);\n  optionalThreemap.uvRepeat = new THREE.Vector2(uvOptions.uTile, uvOptions.vTile);\n\n  optionalThreemap.texelTransform = true;\n  optionalThreemap.texelInvert = uvOptions.invert;\n  optionalThreemap.texelScale = uvOptions.gain;\n  optionalThreemap.texelOffset = uvOptions.brightness;\n  //texture.gainPivot = uvOptions.gainPivot;\n  //texture.gain = uvOptions.gain;\n  //texture.brightness = uvOptions.brightness;\n\n  //console.log('texture with image', texture);\n  //textures[id] = texture;\n  return optionalThreemap;\n};\n\nconst initialStandardDefaults = {\n  \"side\":2,\n  \"emissive\":{\"r\":0,\"g\":0,\"b\":0},\n  \"ambient\":{\"r\":0,\"g\":0,\"b\":0},\n  \"vertexColors\":0,\n  \"opacity\":1,\n  \"transparent\":false,\n  \"specular\":{\"r\":1,\"g\":1,\"b\":1},\n  \"normalScale\":{\"x\":1,\"y\":1},\n  \"envMap\":null,\n  \"combine\":0,\n  \"color\":{\"r\":0.1803921568627451,\"g\":0.4,\"b\":0.8274509803921568},\n  \"metal\":false,\n  \"gloss\":false,\n  \"reflectivity\":1,\n  \"refractionRatio\":0.98,\n  \"shininess\":50\n}\n\nexport function primitiveToMaterial(store, renderer, data, previousMaterial) {\n  let mat = {};\n\n  let material = previousMaterial && previousMaterial instanceof THREE.MeshPhysicalMaterial ?\n    previousMaterial : new THREE.MeshPhysicalMaterial({});\n\n  if (!data) return material;\n\n  // TODO: vertexColors, blend/combine?\n  // FIXME: envMapScale??\n\n  if (data.get('defaultColor')) {\n    material.color = data.get('defaultColor');\n    return material;\n  }\n\n\n  if (!data.get('baseColor')) {\n    //console.log('Expected physical material, received: ', data.toJS());\n    if (data.get('diffuseColor')) material.color = data.get('diffuseColor');\n    return material;\n  }\n\n  //side?\n  //\n  const propertyMap = {\n    //ambient: 'ambientColor2',\n    bumpScale: 'bumpFactor',\n    color: 'baseColor',\n    emissive: 'emissiveColor',\n    //falloff: 'baseFalloff',\n    //falloffColor: 'baseFalloffColor',\n    metalness: 'metallic',\n    roughness: 'roughness',\n    clearCoat: 'clearCoat',\n    clearCoatRoughness: 'clearCoatRoughness',\n    opacity: 'opacityFactor', // opacityMap and opacityColor are not supported in Three.js\n    //specular: 'specularColor',\n    //translucency: 'translucencyColor',\n    transparent: 'baseMapTransparent'\n  }\n\n  const keys = [\n    'depthTest','depthWrite'//,'roughness',\n  ];\n\n  // 'anisotropyMap','anisotropyRotationMap','--diffuseEnvMap','falloffMap', '+-metallicMap','+-opacityMap','reflectivityMap','specularMap','translucencyMap',\n  // '--ambient','falloff','falloffColor','specular','translucency'\n  //  'anisotropy','anisotropyRotation', 'clearCoat','clearCoatRoughness','+-metallic', 'translucencyNormalAlpha','translucencyNormalPower', 'translucencyViewAlpha','translucencyViewPower'\n  //\n  const imageMaps = {\n  'baseMap': 'map',\n   bumpMap: 'bumpMap',\n   emissiveMap: 'emissiveMap',\n   lightMap: 'lightMap',\n   'metallicMap': 'metalnessMap',\n   normalMap: 'normalMap',\n   opacityMap: 'alphaMap',\n   roughnessMap: 'roughnessMap'\n  };\n\n  function updateTexture(image, slot) {\n    const map = assignTexture(store, renderer, image, material[slot] || new THREE.Map());\n    if (map && !material[slot]) material[slot] = map;\n  };\n\n  for (let image of Object.keys(imageMaps)) {\n    updateTexture(data.get(image), imageMaps[image]+'Slot');\n  }\n\n  for (let to of Object.keys(propertyMap)) {\n    material[to] = data.get(propertyMap[to]);\n  }\n\n  material.roughness = data.get('roughness');\n\n  for (let key of keys) {\n    material[key] = data.get(key);\n  }\n\n  if (data.get('emissiveScale')) {\n    material.emissive.multiplyScalar(data.get('emissiveScale'));\n  }\n\n  material.transparent = (material.opacity < 1.0) || !!data.get('opacityMap') || data.get('baseMapTransparent');\n\n  const specular = data.get('specularColor');\n  material.reflectivity = ( specular.r + specular.g + specular.b ) * 0.33333;\n  material.clearCoat *= 0.25;\n  const normalFactor = data.get('normalFactor');\n  material.normalScale = new THREE.Vector2(normalFactor, normalFactor);\n\n  material.blending = THREE.NormalBlending;\n  material.premultipliedAlpha = true;\n  material.side = THREE.DoubleSide;\n  //mat.falloffMap = getTexture(store, data.get('baseFalloffMap')) || mat.map;\n\n  updateTexture(data.getIn(['envMap', 'specularCubeMap']), 'envMap');\n  material.needsUpdate = true;\n\n  //mat.envMapIntensity = 10;\n  //mat.diffuseEnvMap = getTexture(store,  data.getIn(['envMap', 'irradianceCubeMap']));\n  //console.log( 'mat', mat );\n  //const standardMaterial =  new THREE.MeshStandardMaterial(mat);\n  ////console.log( 'standardMaterial', standardMaterial );\n  //return standardMaterial;\n  return material;\n}\n\n//function multiIDMaterial(store, renderer, data, previousMaterial) {\n//  const materials = reduce((list, i) => {\n//    const mat = data.get(`material${i}`);\n//    if (mat) list.push(primitiveToMaterial(store, renderer, mat));\n//    return list;\n//  }, [], [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]);\n\n//  return new THREE.MultiMaterial(materials);\n//};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/materials.js\n **/","import THREE from 'three';\n\nfunction flattenBuffer(klass, elementBuffer, numElementsPerValue, indicesBuffer) {\n  var flattenedBuffer = new klass(indicesBuffer.length*numElementsPerValue);\n\n  var sourceIndex, destIndex;\n  for (var v=0; v<indicesBuffer.length; v++) {\n    sourceIndex = indicesBuffer[v]*numElementsPerValue;\n    destIndex = v*numElementsPerValue;\n    for (var e=0; e<numElementsPerValue; e++) {\n      flattenedBuffer[destIndex+e] = elementBuffer[sourceIndex+e];\n    }\n  }\n\n  return new THREE.BufferAttribute(flattenedBuffer, numElementsPerValue);\n}\n\nexport function polyMeshToBufferGeometry({ faces, positions, normalMap, uvs }) {\n  var geom = new THREE.BufferGeometry();\n\n  geom.addAttribute('position', flattenBuffer(Float32Array, positions, 3, faces));\n\n  if (normalMap) {\n    geom.addAttribute( 'normal', flattenBuffer(Float32Array, normalMap.values, 3, normalMap.faces)); //normalMap.faces.length));\n  }\n\n  if (uvs) {\n     var uvNames = Object.keys(uvs);\n     uvNames.sort();\n\n     // uv\n     if( uvNames.length >= 1 ) {\n       var uvMap = uvs[ uvNames[0] ];\n       geom.addAttribute( 'uv', flattenBuffer(Float32Array, uvMap.values, 2, uvMap.faces)); // uvMap.faces.length));\n     }\n\n     // uv2\n     if( uvNames.length >= 2 ) {\n       var uvMap = uvs[ uvNames[1] ];\n       geom.addAttribute( 'uv2', flattenBuffer(Float32Array, uvMap.values, 2, uvMap.faces)); //uvMap.faces.length));\n     }\n  }\n\n  return geom;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/polyMesh.js\n **/","import THREE from 'three';\n\nlet initialLightDefaults = {\n  castShadow: true,\n  color: {r: 1, g: 1, b: 1},\n  intensity: 0.85,\n  lightType: 'DirectionalLight',\n  radius: 0,\n  shadowBias: 0,\n  shadowCameraSize: 1.7321,\n  shadowDarkness: 0.1,\n  shadowFarClip: 40,\n  shadowFrustumColor: {r: 1, g: 1, b: 1},\n  shadowNearClip: 10,\n  shadowSize: 1024,\n  showShadowCamera: false\n}\n\nexport function createLight(data, light) {\n  const type = data.get('lightType');\n  // Skip AreaLight without crashing for now\n  if (type === 'AreaLight') return;\n  if (!THREE[type]) throw new Error('Unknown light type: '+type);\n  if (type === 'HemisphereLight') {\n    return new THREE[type](data.get('color').getHex(), data.get('gndColor').getHex(), data.get('intensity'));\n  }\n  return new THREE[type](data.get('color').getHex(), data.get('intensity'));\n}\n\nexport function updateLight(data, light) {\n  light.intensity = data.get('intensity');\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/light.js\n **/","import THREE from 'three';\n\nconst rotationFactor = 3.14/180;\n\n// Set transalation, rotation, scale on Object3D\nfunction setTRS(object3d, t, r, s) {\n  object3d.position.set(t.x, t.y, t.z);\n  object3d.rotation.set(r.x, r.y, r.z, 'ZYX');\n  object3d.scale.set(s.x, s.y, s.z);\n};\n\nfunction setTRSDegrees(object3d, t, r, s) {\n  object3d.position.set(t.x, t.y, t.z);\n  object3d.rotation.set(r.x*rotationFactor, r.y*rotationFactor, r.z*rotationFactor, 'ZYX');\n  object3d.scale.set(s.x, s.y, s.z);\n};\n\n/* Apply transform to threejs node. Side Effects!\n */\nexport function setTransformOn(object3d, t) {\n  setTRSDegrees(object3d, t.get('translation'), t.get('rotation'), t.get('scale'));\n}\n\n/* Apply matrix4 to threejs node.\n */\nexport function setMatrixOn(object3d, matrix4) {\n  let translation = new THREE.Vector3();\n  let rotQuat = new THREE.Quaternion();\n  let scale = new THREE.Vector3();\n  matrix4.decompose(translation, rotQuat, scale);\n  let rotation = new THREE.Vector3().copy(new THREE.Euler().setFromQuaternion(rotQuat, 'ZYX'));\n  setTRS(object3d, translation, rotation, scale);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/transform.js\n **/","import THREE from 'three';\nimport clamp from './utils/clamp';\nimport updateCameraLookAtTarget from './utils/updateCameraLookAtTarget';\nimport getProjectionMatrix from './utils/getProjectionMatrix';\nimport deviceOrientationControls from './utils/deviceOrientationControls'\nimport { getWorldTransform, get, set, find } from '../modules/scene';\nimport { getCamera, getCameraAttrs, getInitialCameraPosition, setCameraPosition, setRect } from '../modules/player';\nimport { virtualCameraId } from '../modules/sceneGraph';\nconst { degToRad, radToDeg } = THREE.Math;\nconst { tan, cos, atan, acos, min, max, pow, PI, sqrt } = Math;\n\nexport default function initNavigator(store, initialBoundingBox, initialRect, initialCameraId) {\n\n  const BOUNDING_BUFFER = 0.001;\n\n  // values from outside\n  let boundingBox = initialBoundingBox;\n  let rect = initialRect;\n  let cameraId = null;\n  let orbitMode = null;\n  let constraintCameraY = false;\n  let pivotId = null;\n  let maxBoundingSphere = null;\n  let minBoundingSphere = new THREE.Sphere();\n  let objectDisplay = false;\n\n  // This is what we're adjusting\n  let cameraWorldMatrix = null;\n  let targetWorldMatrix = null;\n  let pivotMatrix = null;\n  let minFov = null;\n  let minPolarAngle = 0;\n  let maxPolarAngle = PI;\n\n  let controls = deviceOrientationControls(new THREE.Object3D());\n\n  // Temporary variables for intermediate calculations\n  const cameraPosition = new THREE.Vector3();\n  const targetPosition = new THREE.Vector3();\n  const upPosition = new THREE.Vector3();\n  const sphericalCamera = new THREE.Spherical();\n  const sphericalTarget = new THREE.Spherical();\n  const invTargetWorldMatrix = new THREE.Matrix4();\n  const invPivotMatrix = new THREE.Matrix4();\n\n  const initialMinPolarAngle = 0;\n  const initialMaxPolarAngle = PI;\n  const azimuthalAxis = new THREE.Vector3();\n\n  var defaultCameraAttrs = getCameraAttrs(store).toJS();\n  if (defaultCameraAttrs.azimuthAngle == null) defaultCameraAttrs.azimuthAngle = 45;\n  if (defaultCameraAttrs.polarAngle == null) defaultCameraAttrs.polarAngle = 20;\n  if (defaultCameraAttrs.boundingRadius == null) defaultCameraAttrs.boundingRadius = 1;\n\n  function initCamera(newCameraId, dispatchless) {\n    //if (cameraId === newCameraId) return;\n\n    cameraId = newCameraId;\n    cameraWorldMatrix = getWorldTransform(store, cameraId);\n\n    azimuthalAxis.set(0,1,0);//.copy(upPosition);\n\n    let playerData = get(store, { scene: true, evalPlug: 'Player' });\n    let cameraData = get(store, { id:  cameraId, evalPlug: 'Camera' });\n    let cameraTransform = get(store, { id:cameraId, evalPlug: 'Transform'});\n    //console.log(cameraTransform);\n\n    orbitMode=playerData.get('orbitMode');\n\n    if (cameraTransform.get('target')){\n      targetWorldMatrix = new THREE.Matrix4().copyPosition(getWorldTransform(store, cameraTransform.getIn(['target', 'id'])));\n    } else if (playerData.get('orbitTarget')) {\n      pivotId = playerData.getIn(['orbitTarget','id']);\n      targetWorldMatrix = new THREE.Matrix4().copyPosition(getWorldTransform(store, playerData.getIn(['orbitTarget','id'])));\n    } else {\n      pivotId = null;\n      const bbCenter = boundingBox.center();\n      //console.log( 'bb center target', bbCenter, JSON.stringify( state.boundingBox ) );\n      targetWorldMatrix = new THREE.Matrix4().makeTranslation( bbCenter.x, bbCenter.y, bbCenter.z );\n    }\n    pivotMatrix = targetWorldMatrix.clone();\n    const pivotPosition = new THREE.Vector3().setFromMatrixPosition(pivotMatrix);\n    cameraPosition.setFromMatrixPosition(cameraWorldMatrix).sub(pivotPosition);\n\n    upPosition.set(0,1,0);\n    if(orbitMode==='trackball'){\n      upPosition.transformDirection(cameraWorldMatrix);\n      const offset = cameraPosition.length();\n      const normal = new THREE.Vector3().copy(cameraPosition).normalize();\n      const cameraViewPlane = new THREE.Plane(normal, 0);\n      upPosition.copy(cameraViewPlane.projectPoint(upPosition).normalize());\n    }\n\n    const pivY = pivotMatrix.elements[13];\n    if (pivY+cameraPosition.length()<0 && constraintCameraY) {\n      cameraPosition.normalize().multiplyScalar(pivY);\n    }\n    cameraWorldMatrix.setPosition(cameraPosition.applyMatrix4(pivotMatrix));\n\n    removeScale(targetWorldMatrix);\n\n    resize(rect);\n\n    adjustAngleAndRadius(cameraId === virtualCameraId ? defaultCameraAttrs : getCameraAttrs(store).toJS());\n\n    // update orientation\n    constraintCameraY = playerData.get('constraintCameraY');\n    if (constraintCameraY) updateSphericalRotation(new THREE.Vector2(0,0), dispatchless);\n    updateCameraLookAtTarget(cameraWorldMatrix, targetWorldMatrix, upPosition);\n\n    if(store.getIn(['player', 'constrainCameraRadius'])) enableObjectMode(store.getIn(['player', 'constrainCameraRadius']));\n\n    if(!dispatchless){\n      store.dispatch(setCameraPosition({\n        cameraWorldMatrix: cameraWorldMatrix.clone(),\n        initialCameraWorldMatrix: cameraWorldMatrix.clone(),\n        initialTargetWorldMatrix: targetWorldMatrix.clone(),\n      }));\n    } else {\n      return cameraWorldMatrix.clone();\n    }\n  };\n\n  function switchCamera(newCameraId) {\n    initCamera(newCameraId);\n  }\n\n  function changeCameraPosition(pos) {\n    cameraWorldMatrix.setPosition(pos);\n    store.dispatch(setCameraPosition({\n      cameraWorldMatrix: cameraWorldMatrix.clone(),\n    }));\n  }\n\n  function adjustAngleAndRadius({ polarAngle, azimuthAngle, boundingRadius }) {\n    if (azimuthAngle != null && polarAngle != null) {\n      invTargetWorldMatrix.getInverse(targetWorldMatrix, true);\n      // world to relative\n      cameraPosition.setFromMatrixPosition(cameraWorldMatrix).applyMatrix4(invTargetWorldMatrix);\n\n      sphericalCamera.setFromVector3(cameraPosition);\n      sphericalCamera.theta = degToRad(azimuthAngle);\n      sphericalCamera.phi = degToRad(90 - polarAngle);\n\n      minPolarAngle = max(minPolarAngle || 0, initialMinPolarAngle); // radians\n      maxPolarAngle = min(maxPolarAngle || PI, initialMaxPolarAngle); // radians\n\n      sphericalCamera.phi = clamp(sphericalCamera.phi, minPolarAngle, maxPolarAngle);\n\n      if (boundingRadius != null) {\n        const fixRadius = boundingRadius * boundingBox.getBoundingSphere().radius;\n        sphericalCamera.radius = (fixRadius <= 0 ? 1 : fixRadius) / tan(degToRad(minFov * 0.5));\n      }\n\n      sphericalCamera.makeSafe();\n\n      cameraPosition.setFromSpherical(sphericalCamera);\n      sphericalCamera.setFromVector3(cameraPosition);\n\n      // relative to world\n      cameraPosition.applyMatrix4(targetWorldMatrix);\n      cameraWorldMatrix.setPosition(cameraPosition);\n    }\n  }\n\n  function reset() { //{ initialCameraWorldMatrix, initialTargetWorldMatrix }) {\n    initCamera(cameraId);\n    /*const cameraAttrs = getInitialCameraPosition(store);\n    targetWorldMatrix = cameraAttrs.initialTargetWorldMatrix.clone();\n    cameraWorldMatrix = cameraAttrs.initialCameraWorldMatrix.clone();\n    store.dispatch(setCameraPosition({\n      cameraWorldMatrix: cameraAttrs.initialCameraWorldMatrix.clone()\n    }));*/\n  }\n\n  function getCameraWorldMatrix() {\n    return cameraWorldMatrix;\n  };\n\n  function setCameraWorldMatrix(m) {\n    cameraWorldMatrix.copy(m);\n  }\n\n  function getTargetWorldMatrix() {\n    return targetWorldMatrix;\n  };\n\n  function getBoundingBox(){\n    return boundingBox;\n  }\n\n  function resize(viewportSize) {\n    const cameraData = cameraId && get(store, { id: cameraId, evalPlug: 'Camera' });\n    const yFov = cameraData ? cameraData.get('fieldOfView') : 45;\n    const initialAspect = cameraData ? cameraData.get('aspectRatio') : 16/9;\n\n    rect = viewportSize;\n\n    const aspectRatio = rect.x / rect.y;\n\n    minFov = yFov;\n\n    store.dispatch(setRect({width: rect.x, height: rect.height}));\n    if (cameraId) store.dispatch(set({ id: cameraId, plug: 'Camera', properties: { name: 'Camera' }}, { aspectRatio, fieldOfView: yFov }));\n  }\n\n  function updateSphericalRotation(mouseDelta, dispatchless) {\n    if (orbitMode==='trackball') trackballUpdate(mouseDelta, dispatchless);\n    else if (orbitMode==='gyroscope') gyroscropeUpdate(mouseDelta, dispatchless);\n  }\n\n  function gyroscropeUpdate({ x, y }, dispatchless) {\n    //to target space\n    targetPosition.setFromMatrixPosition(targetWorldMatrix);\n    cameraPosition.setFromMatrixPosition(cameraWorldMatrix).sub(targetPosition);\n\n    let cameraSpherical = new THREE.Spherical().setFromVector3(cameraPosition);\n\n    let azimuthalAngle=2*PI*(-x/rect.x);\n    cameraSpherical.theta += azimuthalAngle;\n\n    let polarAngle=2*PI*(-y/rect.y);\n    cameraSpherical.phi += polarAngle;\n    let maxPolarAngle;\n    if(targetPosition.y/cameraPosition.length() <= 1){\n      maxPolarAngle = constraintCameraY ? acos(-targetPosition.y/cameraPosition.length()) : PI;\n    } else {\n      maxPolarAngle = PI;\n    }\n    cameraSpherical.phi = clamp(cameraSpherical.phi, 0, maxPolarAngle);\n\n    cameraSpherical.makeSafe();\n    cameraPosition.setFromSpherical(cameraSpherical).add(targetPosition);\n\n    //bounding box constraining\n    if (objectDisplay && maxBoundingSphere){\n      const camToTarg = new THREE.Vector3().subVectors(targetPosition, cameraPosition);\n      if (minBoundingSphere.containsPoint(cameraPosition)){\n        const backwardRay = new THREE.Ray(cameraPosition, camToTarg.multiplyScalar(-1));\n        const newPosition = backwardRay.intersectSphere(minBoundingSphere).addScaledVector(camToTarg, BOUNDING_BUFFER);\n        cameraPosition.copy(newPosition);\n      } else if (!maxBoundingSphere.containsPoint(cameraPosition)){\n        const forwardRay = new THREE.Ray(cameraPosition, camToTarg);\n        const newPosition = forwardRay.intersectSphere(maxBoundingSphere).addScaledVector(camToTarg, BOUNDING_BUFFER);\n        cameraPosition.copy(newPosition);\n      } else {}\n    }\n\n\n    cameraWorldMatrix.setPosition(cameraPosition);\n\n    // update orientation\n    updateCameraLookAtTarget( cameraWorldMatrix, targetWorldMatrix, upPosition );\n    if(!dispatchless){\n      store.dispatch(setCameraPosition({\n        cameraWorldMatrix: cameraWorldMatrix.clone(),\n      }));\n    }\n  }\n\n  function trackballUpdate({ x, y }, dispatchless){\n    const radius = min(rect.x, rect.y);\n    const pivotPosition = new THREE.Vector3().setFromMatrixPosition(pivotMatrix);\n\n    let relativeDelta = new THREE.Vector3().set(-2*x/radius,2*y/radius,0);\n    if (relativeDelta.length()>1) relativeDelta.normalize();\n    if (relativeDelta.x===0 && relativeDelta.y===0) return;\n    let delta = relativeDelta.length();\n\n    //world to relative pivot space\n    relativeDelta.transformDirection(cameraWorldMatrix).multiplyScalar(delta);\n    cameraPosition.setFromMatrixPosition(cameraWorldMatrix).sub(pivotPosition);\n    targetPosition.setFromMatrixPosition(targetWorldMatrix).sub(pivotPosition);\n    //upPosition.transformDirection(invPivotMatrix);\n    let camNorm = new THREE.Vector3().copy(cameraPosition).normalize();\n    //create rotational Quaternion\n    const scaleFactor = sqrt(1-relativeDelta.lengthSq());\n    relativeDelta.addScaledVector(camNorm, scaleFactor).normalize();\n\n    let rotationalAxis = new THREE.Vector3().crossVectors(camNorm,relativeDelta).normalize();\n    let rotationalAngle = camNorm.angleTo(relativeDelta);\n    let rotationalQuaternion = new THREE.Quaternion().setFromAxisAngle(rotationalAxis, rotationalAngle);\n\n\n    //pivot relative to world space\n    cameraPosition.applyQuaternion(rotationalQuaternion).add(pivotPosition);\n    targetPosition.applyQuaternion(rotationalQuaternion).add(pivotPosition);\n    upPosition.applyQuaternion(rotationalQuaternion)//.transformDirection(pivotMatrix);\n\n    //bounding box constraining\n    if (objectDisplay && maxBoundingSphere){\n      const camToTarg = new THREE.Vector3().subVectors(targetPosition, cameraPosition);\n\n      if (minBoundingSphere.containsPoint(cameraPosition)){\n        const backwardRay = new THREE.Ray(cameraPosition,\n          new THREE.Vector3().copy(camToTarg).multiplyScalar(-1));\n\n        const newPosition = backwardRay.intersectSphere(minBoundingSphere)\n          .addScaledVector(camToTarg, -BOUNDING_BUFFER);\n\n        cameraPosition.copy(newPosition);\n      } else if (!maxBoundingSphere.containsPoint(cameraPosition)){\n        const forwardRay = new THREE.Ray(cameraPosition, camToTarg);\n\n        const newPosition = forwardRay.intersectSphere(maxBoundingSphere)\n          .addScaledVector(camToTarg, BOUNDING_BUFFER);\n\n        cameraPosition.copy(newPosition);\n      } else {}\n\n      if (!minBoundingSphere.containsPoint(targetPosition)){\n        const thirdVector = new THREE.Vector3().crossVectors(camToTarg, upPosition);\n        const newPosition = minBoundingSphere.clampPoint(targetPosition);\n\n        const posChange = new THREE.Vector3().subVectors(newPosition,targetPosition);\n        newPosition.addScaledVector(posChange, BOUNDING_BUFFER);\n\n        upPosition.crossVectors(thirdVector,\n          camToTarg.subVectors(newPosition, cameraPosition)).normalize();\n        targetPosition.copy(newPosition);\n      }\n    }\n\n    cameraWorldMatrix.setPosition(cameraPosition);\n    targetWorldMatrix.setPosition(targetPosition);\n\n    updateCameraLookAtTarget( cameraWorldMatrix, targetWorldMatrix, upPosition );\n\n    if(!dispatchless){\n      store.dispatch(setCameraPosition({\n        cameraWorldMatrix: cameraWorldMatrix.clone(),\n      }));\n    }\n  }\n\n  const updatePan = function() {\n    const cameraProjectMatrix = new THREE.Matrix4();\n    const cameraUnprojectMatrix = new THREE.Matrix4();\n    const ndcReferencePoint = new THREE.Vector3();\n    const worldRelative = new THREE.Vector3();\n    const deltaReferencePoint = new THREE.Vector3();\n    const referencePoint = new THREE.Vector3();\n    const translationMatrix = new THREE.Matrix4();\n\n    return (mouseDelta) => {\n      var projectionMatrix = getProjectionMatrix(get(store, {id: cameraId, evalPlug: 'Camera' }));\n      var relativeDelta = new THREE.Vector2().copy(mouseDelta).divide(rect).multiplyScalar(2.0);\n      relativeDelta.x *= -1;\n\n      const invCameraWorldMatrix = new THREE.Matrix4().getInverse(cameraWorldMatrix, true);\n      cameraProjectMatrix.copy(projectionMatrix).multiply(invCameraWorldMatrix);\n\n      ndcReferencePoint.setFromMatrixPosition(targetWorldMatrix).applyProjection(cameraProjectMatrix);\n      cameraUnprojectMatrix.getInverse(cameraProjectMatrix, true);\n\n      referencePoint.set(0, 0, ndcReferencePoint.z).applyProjection(cameraUnprojectMatrix);\n      deltaReferencePoint.set(relativeDelta.x, relativeDelta.y, ndcReferencePoint.z).applyProjection(cameraUnprojectMatrix);\n\n      // ensure that NDC has the same layout as mouseDelta coordinate space\n      worldRelative.copy(deltaReferencePoint).sub(referencePoint);\n\n      //bounding box constraining\n      if (objectDisplay && maxBoundingSphere && worldRelative.length()>0){\n        cameraPosition.setFromMatrixPosition(cameraWorldMatrix);\n        targetPosition.setFromMatrixPosition(targetWorldMatrix);\n\n        const directionNorm = new THREE.Vector3().copy(worldRelative).normalize();\n        const camRay = new THREE.Ray(cameraPosition, directionNorm);\n        const targRay = new THREE.Ray(targetPosition, directionNorm);\n\n        const targHit = targRay.intersectSphere(minBoundingSphere).sub(targetPosition).length()-BOUNDING_BUFFER;\n\n        let inCamHit = camRay.intersectSphere(minBoundingSphere);\n        if (inCamHit) inCamHit = inCamHit.sub(cameraPosition).length()-BOUNDING_BUFFER;\n        else inCamHit = Infinity;\n\n        const outCamHit = camRay.intersectSphere(maxBoundingSphere).sub(cameraPosition).length()-BOUNDING_BUFFER;\n\n        const moveLength = Math.min(worldRelative.length(), targHit, inCamHit, outCamHit);\n        worldRelative.normalize().multiplyScalar(moveLength);\n      }\n\n      translationMatrix.makeTranslation(worldRelative.x, worldRelative.y, worldRelative.z);\n      targetWorldMatrix.multiplyMatrices(translationMatrix, targetWorldMatrix);\n      cameraWorldMatrix.multiplyMatrices(translationMatrix, cameraWorldMatrix);\n\n      if (constraintCameraY && orbitMode!=='trackball') {\n        cameraPosition.setFromMatrixPosition(cameraWorldMatrix);\n        targetPosition.setFromMatrixPosition(targetWorldMatrix);\n        if (cameraPosition.y<0) {\n          targetPosition.y -= cameraPosition.y;\n          cameraPosition.y = 0;\n        }\n        targetWorldMatrix.setPosition(targetPosition);\n        cameraWorldMatrix.setPosition(cameraPosition);\n      }\n\n      updateCameraLookAtTarget(cameraWorldMatrix, targetWorldMatrix, upPosition);\n\n      store.dispatch(setCameraPosition({\n        cameraWorldMatrix: cameraWorldMatrix.clone(),\n      }));\n    }\n  }();\n\n  const updateZoom = function() {\n    const EPS = 0.000001;\n    const targetPosition = new THREE.Vector3();\n    const targetToCamera = new THREE.Vector3();\n\n    return (mouseDelta, minZoomDistance, maxZoomDistance) => {\n      const deltaZoom = mouseDelta / rect.y;\n      const decayZoomFactor = pow(2, deltaZoom * 100);  // this ensures the zoom has consistent speed no matter the size\n\n      cameraPosition.setFromMatrixPosition(cameraWorldMatrix);\n      targetPosition.setFromMatrixPosition(targetWorldMatrix);\n\n      targetToCamera.copy(cameraPosition).sub(targetPosition);\n      const targetToCameraDistance = max(targetToCamera.length(), EPS);\n      let newTargetToCameraDistance = targetToCameraDistance * decayZoomFactor;\n\n\n      if (objectDisplay && maxBoundingSphere){\n        const camToTargetBackward = new THREE.Vector3().copy(targetToCamera).normalize();\n        const camToTargetForward = new THREE.Vector3().copy(camToTargetBackward).multiplyScalar(-1);\n\n        const forwardRay = new THREE.Ray(cameraPosition,camToTargetForward);\n        const backwardRay = new THREE.Ray(cameraPosition,camToTargetBackward);\n\n        let lowerBound = new THREE.Vector3(), upperBound = new THREE.Vector3();\n\n        forwardRay.intersectSphere(minBoundingSphere, lowerBound);\n        backwardRay.intersectSphere(maxBoundingSphere, upperBound);\n\n        const minZoom = lowerBound.sub(targetPosition).length();\n        const maxZoom = upperBound.sub(targetPosition).length();\n\n        newTargetToCameraDistance = clamp(newTargetToCameraDistance, minZoom+BOUNDING_BUFFER, maxZoom-BOUNDING_BUFFER);\n      }\n\n      targetToCamera.multiplyScalar(newTargetToCameraDistance / targetToCameraDistance);\n      cameraPosition.copy(targetPosition).add(targetToCamera);\n      if (cameraPosition.y<0 && constraintCameraY && orbitMode!=='trackball') {\n        const thirdVector = new THREE.Vector3().crossVectors(targetToCamera, upPosition).normalize();\n        cameraPosition.y=0;\n        targetToCamera.copy(cameraPosition).sub(targetPosition);\n      }\n      cameraWorldMatrix.setPosition(cameraPosition);\n\n      updateCameraLookAtTarget(cameraWorldMatrix, targetWorldMatrix, upPosition);\n\n      store.dispatch(setCameraPosition({\n        cameraWorldMatrix: cameraWorldMatrix.clone(),\n      }));\n    };\n  }();\n\n  function updatePivot(){\n    let cameraTransform = get(store, { id:cameraId, evalPlug: 'Transform'});\n    let playerData = get(store, { scene: true, evalPlug: 'Player' });\n    const playerTarget = playerData.get('orbitTarget');\n    const lookAtTarget = cameraTransform.get('target');\n    let target = playerTarget;\n    if(lookAtTarget) target = lookAtTarget;\n\n    const camMove = playerTarget && !lookAtTarget;\n    if (target) {\n      const newPivotPosition = new THREE.Vector3().setFromMatrixPosition(getWorldTransform(store, target.get('id')));\n      const pivotPosition = new THREE.Vector3().setFromMatrixPosition(pivotMatrix);\n      const delta = new THREE.Vector3().subVectors(newPivotPosition, pivotPosition);\n\n      if(camMove) cameraPosition.setFromMatrixPosition(cameraWorldMatrix);\n      targetPosition.setFromMatrixPosition(targetWorldMatrix);\n      if(camMove) cameraPosition.add(delta);\n      targetPosition.add(delta);\n      if(camMove) cameraWorldMatrix.setPosition(cameraPosition);\n      targetWorldMatrix.setPosition(targetPosition);\n      pivotMatrix.setPosition(newPivotPosition);\n\n      if(delta.length()>0){\n        updateCameraLookAtTarget(cameraWorldMatrix, targetWorldMatrix, upPosition);\n        updateSphericalRotation(new THREE.Vector2(0,0));\n        store.dispatch(setCameraPosition({\n          cameraWorldMatrix: cameraWorldMatrix.clone(),\n        }));\n      }\n    }\n  }\n\n  function enableObjectMode(outerRadius){\n    boundingBox.getBoundingSphere(minBoundingSphere);\n    if (outerRadius<=minBoundingSphere.radius) {\n      console.warn(\"Outer bounding sphere too small\");\n      return;\n    }\n    maxBoundingSphere = new THREE.Sphere(minBoundingSphere.center, outerRadius);\n    objectDisplay = maxBoundingSphere!==null;\n\n    targetPosition.setFromMatrixPosition(targetWorldMatrix);\n    cameraPosition.setFromMatrixPosition(cameraWorldMatrix);\n    const targetToCamera = new THREE.Vector3().subVectors(cameraPosition, targetPosition);\n\n    const thirdVector = new THREE.Vector3().crossVectors(targetToCamera, upPosition).normalize();\n    const newTargetPosition = minBoundingSphere.clampPoint(targetPosition);\n    const newCameraPosition = maxBoundingSphere.clampPoint(cameraPosition);\n    cameraWorldMatrix.setPosition(newCameraPosition);\n    targetWorldMatrix.setPosition(newTargetPosition);\n    if(orbitMode==='trackball') {\n      const newTargetToCamera = new THREE.Vector3().subVectors(newCameraPosition, newTargetPosition);\n      upPosition.crossVectors(thirdVector, newTargetToCamera).normalize();\n    }\n    updateZoom(0);\n  }\n\n  function disableObjectMode(){\n    maxBoundingSphere = null;\n    objectDisplay = false;\n  }\n\n  function updateDeviceOrientation(ev){\n    if(controls.freeze)return;\n    controls.update(ev);\n\n    const scale = new THREE.Vector3();\n    cameraWorldMatrix.decompose(cameraPosition, new THREE.Quaternion(), scale);\n\n    targetPosition.setFromMatrixPosition(targetWorldMatrix);\n    const distToTarget = targetPosition.distanceTo(cameraPosition);\n    const newPosition = new THREE.Vector3(0, 0, -1).applyQuaternion(controls.object.quaternion);\n    newPosition.multiplyScalar(distToTarget).add(cameraPosition);\n    targetWorldMatrix.setPosition(newPosition);\n\n    cameraWorldMatrix.compose(cameraPosition, controls.object.quaternion, scale);\n\n    store.dispatch(setCameraPosition({\n      cameraWorldMatrix: cameraWorldMatrix.clone()\n    }));\n  }\n\n  function enableHeadTracking(){\n    controls.connect();\n  }\n\n  function disableHeadTracking(){\n    controls.disconnect();\n  }\n\n  const rotateNode = function(){\n    const parentInvMatrix = new THREE.Matrix4();\n    const nodeRotationQuaternion = new THREE.Quaternion();\n    const nodePosition = new THREE.Vector3();\n    const nodeScale = new THREE.Vector3();\n    const nodeRotationEuler = new THREE.Euler();\n    return ({x,y}) => {\n      const manipId = store.getState().getIn(['player', 'manipulationId']) || pivotId;\n      const nodeTransform = getWorldTransform(store, manipId)\n      if (!nodeTransform) return;\n\n      nodeTransform.decompose(nodePosition, nodeRotationQuaternion, nodeScale);\n      cameraPosition.setFromMatrixPosition(cameraWorldMatrix);\n\n      const radius = min(rect.x, rect.y);\n\n      let relativeDelta = new THREE.Vector3().set(2*x/radius,-2*y/radius,0);\n      if (relativeDelta.length()>1) relativeDelta.normalize();\n      else if (relativeDelta.length()===0) return;\n      let delta = relativeDelta.length();\n      relativeDelta.transformDirection(cameraWorldMatrix).multiplyScalar(delta);\n\n      const objNormal = new THREE.Vector3().subVectors(cameraPosition,nodePosition).normalize();\n      const scaleFactor = sqrt(1-relativeDelta.lengthSq());\n      relativeDelta.addScaledVector(objNormal, scaleFactor).normalize();\n      const modifyQuaternion = new THREE.Quaternion().setFromUnitVectors(objNormal, relativeDelta);\n      nodeRotationQuaternion.premultiply(modifyQuaternion);\n\n      nodeTransform.compose(nodePosition, nodeRotationQuaternion, nodeScale);\n      const parentMatrix = getWorldTransform(store, find(store, {id: manipId, parent:true}));\n      if(parentMatrix) {\n        parentInvMatrix.getInverse(parentMatrix, true);\n        nodeTransform.premultiply(parentInvMatrix);\n      }\n      nodeTransform.decompose(nodePosition, nodeRotationQuaternion, nodeScale);\n\n      nodeRotationEuler.setFromQuaternion(nodeRotationQuaternion, 'ZYX');\n      store.dispatch(set({id:manipId, plug:'Transform', property:'rotation'}, nodeRotationEuler.toVector3().multiplyScalar(180/PI)));\n    }\n  }();\n\n  const moveNode = function (){\n    const invCameraWorldMatrix = new THREE.Matrix4();\n    const cameraProjectMatrix = new THREE.Matrix4();\n    const cameraUnprojectMatrix = new THREE.Matrix4();\n    const inverseParent = new THREE.Matrix4();\n    const referencePoint = new THREE.Vector3();\n    const deltaReferencePoint = new THREE.Vector3();\n    return (x,y) => {\n      const manipId = store.getState().getIn(['player', 'manipulationId']) || pivotId;\n      var projectionMatrix = getProjectionMatrix(get(store, {id: cameraId, evalPlug: 'Camera' }));\n      invCameraWorldMatrix.getInverse(cameraWorldMatrix, true);\n      cameraProjectMatrix.copy(projectionMatrix).multiply(invCameraWorldMatrix);\n\n      const nodeMatrix = getWorldTransform(store, manipId);\n      if(!nodeMatrix) return;\n\n      const parentMatrix = getWorldTransform(store, find(store, {id:manipId, parent:true}));\n      const nodePosition = new THREE.Vector3().setFromMatrixPosition(nodeMatrix);\n      var relativeDelta = new THREE.Vector2(x,-y).divide(rect).multiplyScalar(2.0);\n\n      referencePoint.copy(nodePosition).applyProjection(cameraProjectMatrix);\n      referencePoint.x = 0;\n      referencePoint.y = 0;\n      deltaReferencePoint.set(relativeDelta.x,relativeDelta.y,referencePoint.z);\n\n      cameraUnprojectMatrix.getInverse(cameraProjectMatrix,true);\n      referencePoint.applyProjection(cameraUnprojectMatrix);\n      deltaReferencePoint.applyProjection(cameraUnprojectMatrix).sub(referencePoint);\n      nodePosition.add(deltaReferencePoint);\n\n      nodeMatrix.setPosition(nodePosition);\n      if(parentMatrix) nodeMatrix.premultiply(inverseParent.getInverse(parentMatrix));\n      nodePosition.setFromMatrixPosition(nodeMatrix)\n\n      store.dispatch(set({id:manipId, plug:'Transform', property:'translation'}, nodePosition));\n    }\n  }();\n\n  function scaleNode(delta){\n    const EPS = 0.000001;\n    const deltaZoom = delta/rect.y;\n    const decayZoomFactor = pow(2, deltaZoom * 100);\n\n    const manipId = store.getState().getIn(['player', 'manipulationId']) || pivotId;\n    const nodeGraphScale = get(store,{id:manipId, plug:'Transform', property:'scale'});\n    if(!nodeGraphScale) return;\n\n    const nodeScale = new THREE.Vector3().copy(nodeGraphScale);\n    const oldScale = max(nodeScale.length(), EPS);\n    const newScale = oldScale*decayZoomFactor;\n    nodeScale.setLength(newScale);\n    store.dispatch(set({id:manipId, plug:'Transform', property:'scale'}, nodeScale));\n  }\n\n  if (initialCameraId) initCamera(initialCameraId);\n\n  return {\n    initCamera,\n    switchCamera,\n    resize,\n    reset,\n    getCameraWorldMatrix,\n    getTargetWorldMatrix,\n    changeCameraPosition,\n    getBoundingBox,\n    updateSphericalRotation,\n    updatePan,\n    updateZoom,\n    updatePivot,\n    updateDeviceOrientation,\n    enableHeadTracking,\n    disableHeadTracking,\n    rotateNode,\n    moveNode,\n    scaleNode,\n    enableObjectMode,\n    disableObjectMode\n  };\n};\n\nfunction removeScale(matrix) {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n  const scale = new THREE.Vector3();\n  matrix.decompose(position, quaternion, scale);\n  matrix.compose(position, quaternion, new THREE.Vector3(1, 1, 1) );\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/navigator.js\n **/","\nexport default function clamp(value, min, max) {\n  return Math.max(Math.min(value, max), min);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/clamp.js\n **/","import THREE from 'three';\n\nexport default function getProjectionMatrix(cameraData) {\n  const projectionMatrix = new THREE.Matrix4();\n  if (cameraData.get('projection') === 'Orthographic') {\n    const size = /* this.computeCameraSize(true) ||*/ { width: 1, height: 1 };\n    projectionMatrix.makeOrthographic(-size.width, size.width, -size.height,\n        size.height, cameraData.get('nearClip'), cameraData.get('farClip'));\n  } else {\n    // const filmSizeVec = new THREE.Vector2(cameraData.get('filmSize'),\n    //     cameraData.get('filmSize') * cameraData.get('aspectRatio'));\n    //  console.log(navigator.getProjectionMatrix:, data.fieldOfView, data.aspectRatio);\n    projectionMatrix.makePerspective(cameraData.get('fieldOfView'),\n        cameraData.get('aspectRatio'), cameraData.get('nearClip'),\n        cameraData.get('farClip'));\n  }\n  return projectionMatrix;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/getProjectionMatrix.js\n **/","/* globals THREE */\n/**\n * DeviceOrientationControls - applies device orientation on object rotation\n *\n * @param {Object} object - instance of THREE.Object3D\n * @constructor\n *\n * @author richt / http://richt.me\n * @author WestLangley / http://github.com/WestLangley\n * @author jonobr1 / http://jonobr1.com\n * @author arodic / http://aleksandarrodic.com\n * @author doug / http://github.com/doug\n *\n * W3C Device Orientation control\n * (http://w3c.github.io/deviceorientation/spec-source-orientation.html)\n */\nimport THREE from 'three';\n\nvar screenOrientation = getOrientation();//window.orientation || 0;\n\nfunction getOrientation() {\n  //console.log(window.screen.orientation || window.screen.mozOrientation);\n  if (__SERVER__) return 0;\n\n  switch (window.screen.orientation || window.screen.mozOrientation) {\n    case 'landscape-primary':\n      return 90;\n    case 'landscape-secondary':\n      return -90;\n    case 'portrait-secondary':\n      return 180;\n    case 'portrait-primary':\n      return 0;\n  }\n  // this returns 90 if width is greater then height\n  // and window orientation is undefined OR 0\n  // if (!window.orientation && window.innerWidth > window.innerHeight)\n  //   return 90;\n  return window.orientation || 0;\n}\n\nfunction onScreenOrientationChangeEvent() {\n  screenOrientation = getOrientation();\n}\nif (__BROWSER__) window.addEventListener('orientationchange', onScreenOrientationChangeEvent, false);\n\n\nexport default function deviceOrientationControls(object) {\n  let device = {};\n  device.object = object;\n\n  device.object.rotation.reorder('YXZ');\n\n  device.freeze = true;\n\n  device.movementSpeed = 1.0;\n  device.rollSpeed = 0.005;\n  device.autoAlign = true;\n  device.autoForward = false;\n\n  device.alpha = 0;\n  device.beta = 0;\n  device.gamma = 0;\n  device.orient = 0;\n\n  device.alignQuaternion = new THREE.Quaternion();\n  device.orientationQuaternion = new THREE.Quaternion();\n\n  var quaternion = new THREE.Quaternion();\n  var quaternionLerp = new THREE.Quaternion();\n\n  var tempVector3 = new THREE.Vector3();\n  var tempMatrix4 = new THREE.Matrix4();\n  var tempEuler = new THREE.Euler(0, 0, 0, 'YXZ');\n  var tempQuaternion = new THREE.Quaternion();\n\n  var zee = new THREE.Vector3(0, 0, 1);\n  var up = new THREE.Vector3(0, 1, 0);\n  var v0 = new THREE.Vector3(0, 0, 0);\n  var euler = new THREE.Euler();\n  var q0 = new THREE.Quaternion(); // - PI/2 around the x-axis\n  var q1 = new THREE.Quaternion(- Math.sqrt(0.5), 0, 0, Math.sqrt(0.5));\n\n\n  device.update = (function(delta) {\n\n    return function(event) {\n\n      // should not need this\n      //var orientation = getOrientation();\n      //if (orientation !== this.screenOrientation) {\n        //this.screenOrientation = orientation;\n        //this.autoAlign = true;\n      //}\n      //console.log(deviceOrientation);\n      device.alpha = event.gamma ?\n        THREE.Math.degToRad(event.alpha) : 0; // Z\n      device.beta = event.beta ?\n        THREE.Math.degToRad(event.beta) : 0; // X'\n      device.gamma = event.gamma ?\n        THREE.Math.degToRad(event.gamma) : 0; // Y''\n      device.orient = screenOrientation ?\n        THREE.Math.degToRad(screenOrientation) : 0; // O\n\n      if(device.freeze) return;\n\n      // The angles alpha, beta and gamma\n      // form a set of intrinsic Tait-Bryan angles of type Z-X'-Y''\n\n      // 'ZXY' for the device, but 'YXZ' for us\n      euler.set(device.beta, device.alpha, - device.gamma, 'YXZ');\n\n      quaternion.setFromEuler(euler);\n      quaternionLerp.slerp(quaternion, 0.5); // interpolate\n\n      // orient the device\n      if (device.autoAlign) device.orientationQuaternion.copy(quaternion); // interpolation breaks the auto alignment\n      else device.orientationQuaternion.copy(quaternionLerp);\n\n      // camera looks out the back of the device, not the top\n      device.orientationQuaternion.multiply(q1);\n\n      // adjust for screen orientation\n      device.orientationQuaternion.multiply(q0.setFromAxisAngle(zee, - device.orient));\n\n      device.object.quaternion.copy(device.alignQuaternion);\n      device.object.quaternion.multiply(device.orientationQuaternion);\n\n      if (device.autoForward) {\n\n        tempVector3\n          .set(0, 0, -1)\n          .applyQuaternion(device.object.quaternion, 'ZXY')\n          .setLength(device.movementSpeed / 50); // TODO: why 50 :S\n\n        device.object.position.add(tempVector3);\n\n      }\n\n      if (device.autoAlign && device.alpha !== 0) {\n\n        device.autoAlign = false;\n\n        device.align();\n\n      }\n\n    };\n\n  })();\n\n  // //debug\n  // window.addEventListener('click', (function(){\n  //   this.align();\n  // }).bind(this));\n  device.connect = function(){\n    device.freeze = false;\n  }\n\n  device.disconnect = function(){\n    device.freeze = true;\n  }\n\n  device.align = function() {\n\n    tempVector3\n      .set(0, 0, -1)\n      .applyQuaternion( tempQuaternion.copy(device.orientationQuaternion).inverse(), 'ZXY' );\n\n    tempEuler.setFromQuaternion(\n      tempQuaternion.setFromRotationMatrix(\n        tempMatrix4.lookAt(tempVector3, v0, up)\n     )\n   );\n\n    tempEuler.set(0, tempEuler.y, 0);\n    device.alignQuaternion.setFromEuler(tempEuler);\n\n  };\n  return device;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/deviceOrientationControls.js\n **/","import flyd from 'flyd';\nimport { compose, curry, filter, forEach, map } from 'ramda';\n\nfunction mapStream(el, eventName, fn) {\n  let stream = flyd.stream();\n  el.addEventListener(eventName, stream);\n  return fn ? flyd.map(fn, stream) : stream;\n};\n\nfunction transduceStream(el, eventName, fn) {\n  let stream = flyd.stream();\n  el.addEventListener(eventName, stream);\n  return flyd.transduce(fn, stream);\n};\n\nfunction isSingleTouch(e) { return e.touches && e.touches.length === 1; };\nfunction isDoubleTouch(e) { return e.touches && e.touches.length === 2; };\n\n\nfunction toMouseEvent(e) {\n  if (!e.touches || !e.touches.length) return e;\n  e.preventDefault();\n  return {\n    which: 1,\n    clientX: e.touches[0].clientX,\n    clientY: e.touches[0].clientY,\n    originalEvent: e\n  };\n};\n\n\nfunction addMomentum(toStream, endStream) {\n  let momentumStream = flyd.stream()(0);\n\n  let result = flyd.combine(function(to,momentum) {\n    return to.end() ? momentum() : to();\n  }, [toStream, momentumStream]);\n\n  let decay = 1;\n\n  flyd.on(function() {\n    const timer = every(1000/60);\n    const momentumStart = new Date();\n    const momentumDecay = 0.2;\n    if (!toStream()) {\n      return momentumStream.end(true);\n    }\n    const { deltaX, deltaY } = toStream();\n\n    flyd.map(function(i) {\n      if (decay <= 0.005) {\n        momentumStream.end(true);\n        timer.end(true);\n      } else {\n        decay = Math.exp(- (1-momentumDecay) * 10 * (Date.now() - momentumStart)/1000);\n        //console.log('decay: ', decay, deltaX, deltaY);\n        momentumStream({deltaX: deltaX*decay, deltaY: deltaY*decay});\n      }\n    }, timer);\n  }, toStream.end);\n\n  return result;\n};\n\nexport function initManipulators(store, el) {\n  let playerEl = el.parentNode.parentNode;\n  let offset = {x: 0, y: 0};\n  let rect = {width: 0, height: 0};\n  let tools = [];\n  let hasEvents = {};\n\n  let dragging = false;\n  let lastMousedown = false;\n\n  function resize(newRect) {\n    const playerRect = playerEl.getBoundingClientRect();\n    offset = {\n      x: playerRect.left,\n      y: playerRect.top,\n    };\n    rect = newRect;\n  }\n\n  function touchLastMove(ev) {\n    if (dragging) dragging.lastMove = new Date();\n    return ev;\n  }\n\n  function callTool(which, options={}) {\n    return function(ev) {\n      if (!hasEvents[which]) return;\n\n      var tool, result;\n\n      for (var i=tools.length - 1; i>=0; i--) {\n        tool = tools[i];\n        if (!tool[which]) continue;\n\n        result = tool[which].call(tool, ev);\n\n        if (options.findFirst) {\n          if (result !== false) break;\n        } else if (!options.doAll) {\n          if (result === false) break;\n        }\n      }\n      return result;\n    }\n  };\n\n  function toCoords(ev) {\n    ev.preventDefault();\n    return {\n      rect,\n      clientX: ev.clientX - offset.x,\n      clientY: ev.clientY - offset.y,\n      deltaX: ev.movementX,\n      deltaY: ev.movementY,\n      originalEvent: ev,\n      which: ev.which,\n      altKey: ev.altKey,\n      ctrlKey: ev.ctrlKey,\n      metaKey: ev.metaKey,\n      shiftKey: ev.shiftKey\n    };\n  };\n\n  function toMouseEvent(e) {\n    if (!e.touches || !e.touches.length) return e;\n    e.preventDefault();\n    const elRect = e.srcElement.getBoundingClientRect();\n    return {\n      which: 1,\n      rect: rect,\n      clientX: e.touches[0].clientX - elRect.left,\n      clientY: e.touches[0].clientY - elRect.top,\n      originalEvent: e\n    };\n  };\n\n  flyd.on(callTool('dragenter'), mapStream(el, 'dragenter'));\n  flyd.on(callTool('dragover'), mapStream(el, 'dragover'));\n  flyd.on(callTool('dragleave'), mapStream(el, 'dragleave'));\n  flyd.on(callTool('dblclick'), mapStream(el, 'dblclick'));\n\n  let clickStream = mapStream(el, 'click', toCoords);\n  let mousedownStream = mapStream(el, 'mousedown', toCoords);\n  let mousemoveStream = mapStream(el, 'mousemove', toCoords);\n  let mouseupStream = mapStream(window, 'mouseup', toCoords);\n  let moveStream = flyd.stream();\n  let dragStream = flyd.stream();\n\n\n  let touchstartStream = transduceStream(el, 'touchstart', compose(filter(isSingleTouch), map(toMouseEvent)));\n  let touchendStream = mapStream(el, 'touchend', toMouseEvent);\n\n  flyd.on((md) => {\n    callTool('mousedown')(md);\n    lastMousedown = {start: new Date(), event: md};\n\n    let tool = callTool('drag', {findFirst: true})(md);\n    if (!tool) return;\n\n    dragging = {lastMove: new Date()};\n\n    let clientX = null;\n    let clientY = null;\n\n    function toDeltaCoords(ev) {\n      ev.preventDefault();\n      let newEv = {\n        rect,\n        clientX: ev.clientX - offset.x,\n        clientY: ev.clientY - offset.y,\n        originalEvent: ev,\n        which: ev.which,\n        altKey: ev.altKey,\n        ctrlKey: ev.ctrlKey,\n        metaKey: ev.metaKey,\n        shiftKey: ev.shiftKey\n      };\n      if (ev.movementX === undefined) {\n        newEv.deltaX = clientX === null ? 0 : ev.clientX - clientX;\n        newEv.deltaY = clientX === null ? 0 : ev.clientY - clientY;\n      } else {\n        newEv.deltaX = ev.movementX;\n        newEv.deltaY = ev.movementY;\n      }\n      clientX = ev.clientX;\n      clientY = ev.clientY;\n      return newEv;\n    }\n\n    moveStream = transduceStream(window, 'mousemove', compose(\n      map(touchLastMove), map(toDeltaCoords)\n    ))\n\n    dragStream.end(true);\n    dragStream = tool.momentum ? addMomentum(moveStream, mouseupStream) : moveStream;\n    dragStream.map(tool.handle);\n  }, mousedownStream);\n\n  flyd.on((ts) => {\n    callTool('mousedown')(ts);\n    lastMousedown = {start: new Date(), event: ts};\n\n    let tool = callTool('drag', {findFirst: true})(ts);\n    if (!tool) return;\n\n    dragging = {lastMove: new Date()};\n\n    let { clientX, clientY } = ts;\n\n    function toDelta(e) {\n      const newE = {\n        ...e,\n        deltaX: e.clientX - clientX,\n        deltaY: e.clientY - clientY\n      };\n      clientX = e.clientX;\n      clientY = e.clientY;\n      return newE;\n    };\n\n    moveStream = transduceStream(el, 'touchmove', compose(\n      filter(isSingleTouch), map(touchLastMove), map(toMouseEvent), map(toDelta)\n    ));\n\n    dragStream.end(true);\n    dragStream = tool.momentum ? addMomentum(moveStream, touchendStream) : moveStream;\n    dragStream.map(tool.handle);\n  }, touchstartStream);\n\n  let endingStream = flyd.merge(touchendStream, mouseupStream);\n  // If we are in an iframe, we can't handle mouseup events on parent window, so use mouseout instead\n  if (window.parent !== window) endingStream = flyd.merge(endingStream, mapStream(window, 'mouseout'));\n\n  flyd.on((mu) => {\n    if (dragging) {\n      moveStream.end(true);\n      // End momentum if last mousemove event is gt 200ms from mouseup.\n      if (new Date() - dragging.lastMove > 200) {\n        dragStream.end(true);\n      }\n    }\n\n    //console.log('mu', new Date() - lastMousedown.start, lastMousedown.event, mu, muX, muY);\n\n    callTool('mouseup')(mu);\n\n    if (lastMousedown && new Date() - lastMousedown.start < 300) {\n      const muX = Math.abs(mu.clientX - lastMousedown.event.clientX);\n      const muY = Math.abs(mu.clientY - lastMousedown.event.clientY);\n\n      if (isNaN(muX)) {\n        callTool('click')(lastMousedown.event);\n      } else if (muX <= 5 && muY <= 5) {\n        callTool('click')(mu);\n      }\n    }\n\n    dragging = false;\n    lastMousedown = false;\n  }, endingStream);\n\n  flyd.on(callTool('hover'), flyd.transduce(filter(() => !dragging && hasEvents['hover']), mousemoveStream));\n\n  //flyd.map((scroll) => {\n  //  console.log('scroll?', scroll);\n  const scrollHandler = callTool('scroll');\n  mapStream(el, 'wheel', (ev) => {\n    if (hasEvents['scroll']) {\n      ev.preventDefault();\n      scrollHandler({\n        delta: -ev.deltaY / (ev.wheelDelta ? 200 : 10),\n        originalEvent: ev\n      });\n    }\n  });\n\n  flyd.map((move) => {\n    // console.log('mousemove', move.clientX, move.clientY);\n  }, mousemoveStream);\n\n  function extractTouches(e) {\n    e.preventDefault();\n    return {\n      a: {x: e.touches[0].clientX, y: e.touches[0].clientY},\n      b: {x: e.touches[1].clientX, y: e.touches[1].clientY}\n    };\n  };\n\n  let zoom = flatMap((ts) => {\n    let f = ts;\n    let moveStream = transduceStream(el, 'touchmove', compose(\n      filter(isDoubleTouch), map(extractTouches), map(function(g) {\n        var result = {\n          pinchX: (g.b.x - f.b.x) - (g.a.x - f.a.x),\n          pinchY: (f.a.y - g.a.y) - (f.b.y - g.b.y),\n          dragX: ((g.a.x - f.a.x) + (g.b.x - f.b.x)) / 2,\n          dragY: ((g.a.y - f.a.y) + (g.b.y - f.b.y)) / 2,\n          a: g.a, b: g.b\n        };\n        f = g;\n        return result;\n      })\n    ));\n    flyd.endsOn(touchendStream, moveStream);\n    return moveStream;\n  }, transduceStream(el, 'touchstart', compose(\n    filter(isDoubleTouch), map(extractTouches)\n  )));\n\n  flyd.on((z) => {\n    const { pinchX, pinchY, dragX, dragY, a, b } = z;\n    if ((Math.abs(pinchX) + Math.abs(pinchY)) > (Math.abs(dragX) + Math.abs(dragY))) {\n      // pinch\n      callTool('pinch')({\n        deltaX: (a.x > b.x ? -pinchX : pinchX),\n        deltaY: (a.y > b.y ? pinchY : -pinchY)\n      });\n    } else {\n      // swipe\n      callTool('swipe')({deltaX: dragX, deltaY: dragY});\n    }\n  }, zoom);\n\n  return {\n    resize,\n\n    updateTools: function(newTools, options) {\n      tools = map((info) => {\n        const tool = info.get('tool');\n        return typeof tool === 'function' ? tool(store, options) : tool\n      }, newTools.toArray());\n      hasEvents = {};\n      forEach(function(tool) {\n        Object.keys(tool).forEach((k) => hasEvents[k] = true)\n      }, tools);\n    }\n  };\n}\n\nfunction every(dur) {\n  var s = flyd.stream();\n  var target = Date.now();\n  function timer() {\n    if (s.end()) return;\n    var now = Date.now();\n    target += dur;\n    s(now);\n    setTimeout(timer, target - now);\n  }\n  timer();\n  return s;\n};\n\nfunction flatMap(f, s) {\n  return flyd.combine(function(s, own) {\n    flyd.map(own, f(s()));\n  }, [s]);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/manipulators.js\n **/","var curryN = require('ramda').curryN;\n\n'use strict';\n\nfunction isFunction(obj) {\n  return !!(obj && obj.constructor && obj.call && obj.apply);\n}\n\n// Globals\nvar toUpdate = [];\nvar inStream;\n\n// Library functions use self callback to accept (null, undefined) update triggers.\nfunction map(f, s) {\n  return combine(function(s, self) { self(f(s.val)); }, [s]);\n}\n\nfunction on(f, s) {\n  return combine(function(s) { f(s.val); }, [s]);\n}\n\nfunction boundMap(f) { return map(f, this); }\n\nvar scan = curryN(3, function(f, acc, s) {\n  var ns = combine(function(s, self) {\n    self(acc = f(acc, s.val));\n  }, [s]);\n  if (!ns.hasVal) ns(acc);\n  return ns;\n});\n\nvar merge = curryN(2, function(s1, s2) {\n  var s = immediate(combine(function(s1, s2, self, changed) {\n    if (changed[0]) {\n      self(changed[0]());\n    } else if (s1.hasVal) {\n      self(s1.val);\n    } else if (s2.hasVal) {\n      self(s2.val);\n    }\n  }, [s1, s2]));\n  endsOn(combine(function() {\n    return true;\n  }, [s1.end, s2.end]), s);\n  return s;\n});\n\nfunction ap(s2) {\n  var s1 = this;\n  return combine(function(s1, s2, self) { self(s1.val(s2.val)); }, [s1, s2]);\n}\n\nfunction initialDepsNotMet(stream) {\n  stream.depsMet = stream.deps.every(function(s) {\n    return s.hasVal;\n  });\n  return !stream.depsMet;\n}\n\nfunction updateStream(s) {\n  if ((s.depsMet !== true && initialDepsNotMet(s)) ||\n      (s.end !== undefined && s.end.val === true)) return;\n  if (inStream !== undefined) {\n    toUpdate.push(s);\n    return;\n  }\n  inStream = s;\n  if (s.depsChanged) s.fnArgs[s.fnArgs.length - 1] = s.depsChanged;\n  var returnVal = s.fn.apply(s.fn, s.fnArgs);\n  if (returnVal !== undefined) {\n    s(returnVal);\n  }\n  inStream = undefined;\n  if (s.depsChanged !== undefined) s.depsChanged = [];\n  s.shouldUpdate = false;\n  if (flushing === false) flushUpdate();\n}\n\nvar order = [];\nvar orderNextIdx = -1;\n\nfunction findDeps(s) {\n  var i, listeners = s.listeners;\n  if (s.queued === false) {\n    s.queued = true;\n    for (i = 0; i < listeners.length; ++i) {\n      findDeps(listeners[i]);\n    }\n    order[++orderNextIdx] = s;\n  }\n}\n\nfunction updateDeps(s) {\n  var i, o, list, listeners = s.listeners;\n  for (i = 0; i < listeners.length; ++i) {\n    list = listeners[i];\n    if (list.end === s) {\n      endStream(list);\n    } else {\n      if (list.depsChanged !== undefined) list.depsChanged.push(s);\n      list.shouldUpdate = true;\n      findDeps(list);\n    }\n  }\n  for (; orderNextIdx >= 0; --orderNextIdx) {\n    o = order[orderNextIdx];\n    if (o.shouldUpdate === true) updateStream(o);\n    o.queued = false;\n  }\n}\n\nvar flushing = false;\n\nfunction flushUpdate() {\n  flushing = true;\n  while (toUpdate.length > 0) {\n    var s = toUpdate.shift();\n    if (s.vals.length > 0) s.val = s.vals.shift();\n    updateDeps(s);\n  }\n  flushing = false;\n}\n\nfunction isStream(stream) {\n  return isFunction(stream) && 'hasVal' in stream;\n}\n\nfunction streamToString() {\n  return 'stream(' + this.val + ')';\n}\n\nfunction updateStreamValue(s, n) {\n  if (n !== undefined && n !== null && isFunction(n.then)) {\n    n.then(s);\n    return;\n  }\n  s.val = n;\n  s.hasVal = true;\n  if (inStream === undefined) {\n    flushing = true;\n    updateDeps(s);\n    if (toUpdate.length > 0) flushUpdate(); else flushing = false;\n  } else if (inStream === s) {\n    markListeners(s, s.listeners);\n  } else {\n    s.vals.push(n);\n    toUpdate.push(s);\n  }\n}\n\nfunction markListeners(s, lists) {\n  var i, list;\n  for (i = 0; i < lists.length; ++i) {\n    list = lists[i];\n    if (list.end !== s) {\n      if (list.depsChanged !== undefined) {\n        list.depsChanged.push(s);\n      }\n      list.shouldUpdate = true;\n    } else {\n      endStream(list);\n    }\n  }\n}\n\nfunction createStream() {\n  function s(n) {\n    return arguments.length > 0 ? (updateStreamValue(s, n), s)\n                                : s.val;\n  }\n  s.hasVal = false;\n  s.val = undefined;\n  s.vals = [];\n  s.listeners = [];\n  s.queued = false;\n  s.end = undefined;\n\n  s.map = boundMap;\n  s.ap = ap;\n  s.of = stream;\n  s.toString = streamToString;\n\n  return s;\n}\n\nfunction addListeners(deps, s) {\n  for (var i = 0; i < deps.length; ++i) {\n    deps[i].listeners.push(s);\n  }\n}\n\nfunction createDependentStream(deps, fn) {\n  var s = createStream();\n  s.fn = fn;\n  s.deps = deps;\n  s.depsMet = false;\n  s.depsChanged = deps.length > 0 ? [] : undefined;\n  s.shouldUpdate = false;\n  addListeners(deps, s);\n  return s;\n}\n\nfunction immediate(s) {\n  if (s.depsMet === false) {\n    s.depsMet = true;\n    updateStream(s);\n  }\n  return s;\n}\n\nfunction removeListener(s, listeners) {\n  var idx = listeners.indexOf(s);\n  listeners[idx] = listeners[listeners.length - 1];\n  listeners.length--;\n}\n\nfunction detachDeps(s) {\n  for (var i = 0; i < s.deps.length; ++i) {\n    removeListener(s, s.deps[i].listeners);\n  }\n  s.deps.length = 0;\n}\n\nfunction endStream(s) {\n  if (s.deps !== undefined) detachDeps(s);\n  if (s.end !== undefined) detachDeps(s.end);\n}\n\nfunction endsOn(endS, s) {\n  detachDeps(s.end);\n  endS.listeners.push(s.end);\n  s.end.deps.push(endS);\n  return s;\n}\n\nfunction trueFn() { return true; }\n\nfunction stream(initialValue) {\n  var endStream = createDependentStream([], trueFn);\n  var s = createStream();\n  s.end = endStream;\n  s.fnArgs = [];\n  endStream.listeners.push(s);\n  if (arguments.length > 0) s(initialValue);\n  return s;\n}\n\nfunction combine(fn, streams) {\n  var i, s, deps, depEndStreams;\n  var endStream = createDependentStream([], trueFn);\n  deps = []; depEndStreams = [];\n  for (i = 0; i < streams.length; ++i) {\n    if (streams[i] !== undefined) {\n      deps.push(streams[i]);\n      if (streams[i].end !== undefined) depEndStreams.push(streams[i].end);\n    }\n  }\n  s = createDependentStream(deps, fn);\n  s.depsChanged = [];\n  s.fnArgs = s.deps.concat([s, s.depsChanged]);\n  s.end = endStream;\n  endStream.listeners.push(s);\n  addListeners(depEndStreams, endStream);\n  endStream.deps = depEndStreams;\n  updateStream(s);\n  return s;\n}\n\nvar transduce = curryN(2, function(xform, source) {\n  xform = xform(new StreamTransformer());\n  return combine(function(source, self) {\n    var res = xform['@@transducer/step'](undefined, source.val);\n    if (res && res['@@transducer/reduced'] === true) {\n      self.end(true);\n      return res['@@transducer/value'];\n    } else {\n      return res;\n    }\n  }, [source]);\n});\n\nfunction StreamTransformer() { }\nStreamTransformer.prototype['@@transducer/init'] = function() { };\nStreamTransformer.prototype['@@transducer/result'] = function() { };\nStreamTransformer.prototype['@@transducer/step'] = function(s, v) { return v; };\n\nmodule.exports = {\n  stream: stream,\n  combine: curryN(2, combine),\n  isStream: isStream,\n  transduce: transduce,\n  merge: merge,\n  scan: scan,\n  endsOn: endsOn,\n  map: curryN(2, map),\n  on: curryN(2, on),\n  curryN: curryN,\n  immediate: immediate,\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./vendor/flyd.js\n ** module id = 306\n ** module chunks = 0 1\n **/","import THREE from 'three';\nimport { getWorldTransform, get } from '../modules/scene';\nimport { getCamera, getCameraPosition } from '../modules/player';\nimport getProjectionMatrix from './utils/getProjectionMatrix';\n\nfunction getScreenPositionNormal(nodeWorldMatrix, cameraWorldMatrix,\n    cameraProjection, optionalLocalDirection) {\n\n  const cameraInverseWorldMatrix = new THREE.Matrix4().getInverse(cameraWorldMatrix);\n\n  const combinedCameraSpaceMatrix = new THREE.Matrix4()\n      .multiplyList([cameraInverseWorldMatrix, nodeWorldMatrix]);\n  const combinedProjectionMatrix = new THREE.Matrix4()\n      .multiplyList([cameraProjection, cameraInverseWorldMatrix, nodeWorldMatrix]);\n\n  const nodeLocalPosition = new THREE.Vector3(0, 0, 0);\n  const nodeLocalDirectionOffset = optionalLocalDirection || new THREE.Vector3(0, 0, -1);\n\n  const nodeCameraPosition = nodeLocalPosition.clone()\n      .applyProjection(combinedCameraSpaceMatrix);\n  const nodeCameraDirectionOffset = nodeLocalDirectionOffset.clone()\n      .applyProjection(combinedCameraSpaceMatrix);\n\n  const nodeCameraNormal = new THREE.Vector3()\n      .subVectors(nodeCameraDirectionOffset, nodeCameraPosition).normalize();\n\n  const nodeScreenPosition = nodeLocalPosition.clone()\n      .applyProjection(combinedProjectionMatrix);\n  nodeScreenPosition.addScalar(1.0).multiplyScalar(0.5);\n\n  return {\n    position: nodeScreenPosition,\n    normal: nodeCameraNormal,\n  };\n}\n\nexport function getScreenPositionNormalAlpha(id, calcDirection, directionTarget) {\n  return (store) => {\n    const nodeWorldTransform = getWorldTransform(store, id);\n    const cameraId = getCamera(store);\n    const cameraPlug = get(store, { id: cameraId, evalPlug: 'Camera' });\n\n    const cameraWorldTransform = getCameraPosition(store);\n    if (!cameraWorldTransform) return {};\n\n    const cameraProjection = getProjectionMatrix(cameraPlug);\n\n    const positionNormal = getScreenPositionNormal(nodeWorldTransform,\n        cameraWorldTransform, cameraProjection, calcDirection && getDirection(store, id, directionTarget));\n\n    const annotation = get(store, { id, evalPlug: 'Annotation' });\n\n    let alpha = 1.0;\n\n    // mis-spelled visibility property.\n    if (annotation.get('limitVisilibility')) {\n      const visibilityAngle = Math.min(annotation.get('visibilityAngle') * 0.5, 90);\n      const cameraWorldDirection = new THREE.Vector3(0, 0, -1);\n      const dotResult = cameraWorldDirection.dot(positionNormal.normal);\n      if (dotResult < 0.0) {\n        alpha = 0.0;\n      } else {\n        const theta = THREE.Math.radToDeg(\n          Math.acos(cameraWorldDirection.dot(positionNormal.normal))\n        );\n\n        if (theta > visibilityAngle) {\n          alpha = 0.0;\n        } else if (theta > visibilityAngle * 0.75) {\n          alpha = (visibilityAngle - theta) / (visibilityAngle * 0.25);\n        }\n      }\n    }\n\n    return { alpha, ...positionNormal };\n  };\n}\n\n\nfunction getDirection(store, id, directionTarget) {\n  let targetPosition = new THREE.Vector3(0, 0, 0);\n  if (directionTarget) {\n    targetPosition = new THREE.Vector3().setFromMatrixPosition(getWorldTransform(store, directionTarget.get('id')));\n  }\n  const currentTransform = getWorldTransform(store, id);\n  const currentPosition = new THREE.Vector3().setFromMatrixPosition(currentTransform);\n  const direction = targetPosition.clone().sub(currentPosition).normalize();\n  const inverseWorldMatrix = new THREE.Matrix4();\n  inverseWorldMatrix.getInverse(currentTransform);\n  direction.applyMatrix4(inverseWorldMatrix).normalize();\n  return direction;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/annotation.js\n **/","import THREE from 'three';\n\nexport default function getBoundingBox(object) {\n  const box = new THREE.Box3();\n  const result = new THREE.Box3();\n\n  let objectsRoot = object;\n  object.children.forEach((child)=>{\n    if(child.type===\"Object3D\" && child.name===\"Objects\") objectsRoot=child;\n  });\n\n  result.makeEmpty();\n\n  object.updateMatrixWorld(true);\n\n  objectsRoot.traverse((node) => {\n    if (!node.visible) return;\n    if (!node.geometry) return;\n\n    const geometry = node.geometry;\n\n    if (geometry.boundingBox === null) {\n      geometry.computeBoundingBox();\n    }\n\n    if (geometry.boundingBox.isEmpty() === false) {\n      box.copy(geometry.boundingBox);\n      node.matrix.compose(node.position, node.quaternion, node.scale);\n      node.updateMatrixWorld(true);\n      box.applyMatrix4(node.matrixWorld);\n      result.union(box);\n    }\n  });\n\n  return result;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/getBoundingBox.js\n **/","import THREE from 'three';\n/**\n * @author spidersharma / http://eduperiment.com/\n */\n\nTHREE.OutlinePass = function ( resolution, scene, camera, selectedObjects ) {\n\n\tthis.renderScene = scene;\n\tthis.renderCamera = camera;\n\tthis.selectedObjects = selectedObjects !== undefined ? selectedObjects : [];\n\tthis.visibleEdgeColor = new THREE.Color(1, 1, 1);\n\tthis.hiddenEdgeColor = new THREE.Color(0.1, 0.04, 0.02);\n\tthis.edgeGlow = 0.0;\n\tthis.usePatternTexture = false;\n\tthis.edgeThickness = 1.0;\n\tthis.edgeStrength = 3.0;\n\tthis.downSampleRatio = 2;\n\tthis.pulsePeriod = 0;\n\n\tTHREE.Pass.call( this );\n\n\tthis.resolution = ( resolution !== undefined ) ? new THREE.Vector2(resolution.x, resolution.y) : new THREE.Vector2(256, 256);\n\n\tvar pars = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };\n\n\tvar resx = Math.round(this.resolution.x/this.downSampleRatio);\n\tvar resy = Math.round(this.resolution.y/this.downSampleRatio);\n\n\tthis.maskBufferMaterial = new THREE.MeshBasicMaterial({color:0xffffff});\n\tthis.maskBufferMaterial.side = THREE.DoubleSide;\n\tthis.renderTargetMaskBuffer = new THREE.WebGLRenderTarget( this.resolution.x, this.resolution.y, pars );\n\tthis.renderTargetMaskBuffer.texture.generateMipmaps = false;\n\n\tthis.depthMaterial = new THREE.MeshDepthMaterial();\n\tthis.depthMaterial.side = THREE.DoubleSide;\n\tthis.depthMaterial.depthPacking = THREE.RGBADepthPacking;\n\tthis.depthMaterial.blending = THREE.NoBlending;\n\n\tthis.prepareMaskMaterial = this.getPrepareMaskMaterial();\n\tthis.prepareMaskMaterial.side = THREE.DoubleSide;\n\n\tthis.renderTargetDepthBuffer = new THREE.WebGLRenderTarget( this.resolution.x, this.resolution.y, pars );\n\tthis.renderTargetDepthBuffer.texture.generateMipmaps = false;\n\n\tthis.renderTargetMaskDownSampleBuffer = new THREE.WebGLRenderTarget( resx, resy, pars );\n\tthis.renderTargetMaskDownSampleBuffer.texture.generateMipmaps = false;\n\n\tthis.renderTargetBlurBuffer1 = new THREE.WebGLRenderTarget( resx, resy, pars );\n\tthis.renderTargetBlurBuffer1.texture.generateMipmaps = false;\n\tthis.renderTargetBlurBuffer2 = new THREE.WebGLRenderTarget( Math.round(resx/2), Math.round(resy/2), pars );\n\tthis.renderTargetBlurBuffer2.texture.generateMipmaps = false;\n\n\tthis.edgeDetectionMaterial = this.getEdgeDetectionMaterial();\n\tthis.renderTargetEdgeBuffer1 = new THREE.WebGLRenderTarget( resx, resy, pars );\n\tthis.renderTargetEdgeBuffer1.texture.generateMipmaps = false;\n\tthis.renderTargetEdgeBuffer2 = new THREE.WebGLRenderTarget( Math.round(resx/2), Math.round(resy/2), pars );\n\tthis.renderTargetEdgeBuffer2.texture.generateMipmaps = false;\n\n\tvar MAX_EDGE_THICKNESS = 4;\n\tvar MAX_EDGE_GLOW = 4;\n\n\tthis.separableBlurMaterial1 = this.getSeperableBlurMaterial(MAX_EDGE_THICKNESS);\n\tthis.separableBlurMaterial1.uniforms[ \"texSize\" ].value = new THREE.Vector2(resx, resy);\n\tthis.separableBlurMaterial1.uniforms[ \"kernelRadius\" ].value = 1;\n\tthis.separableBlurMaterial2 = this.getSeperableBlurMaterial(MAX_EDGE_GLOW);\n\tthis.separableBlurMaterial2.uniforms[ \"texSize\" ].value = new THREE.Vector2(Math.round(resx/2), Math.round(resy/2));\n\tthis.separableBlurMaterial2.uniforms[ \"kernelRadius\" ].value = MAX_EDGE_GLOW;\n\n\t// Overlay material\n\tthis.overlayMaterial = this.getOverlayMaterial();\n\n\t// copy material\n\tif ( THREE.CopyShader === undefined )\n\t\tconsole.error( \"THREE.OutlinePass relies on THREE.CopyShader\" );\n\n\tvar copyShader = THREE.CopyShader;\n\n\tthis.copyUniforms = THREE.UniformsUtils.clone( copyShader.uniforms );\n\tthis.copyUniforms[ \"opacity\" ].value = 1.0;\n\n\tthis.materialCopy = new THREE.ShaderMaterial( {\n\t\tuniforms: this.copyUniforms,\n\t\tvertexShader: copyShader.vertexShader,\n\t\tfragmentShader: copyShader.fragmentShader,\n\t\tblending: THREE.NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false,\n\t\ttransparent: true\n\t} );\n\n\tthis.enabled = true;\n\tthis.needsSwap = false;\n\n\tthis.oldClearColor = new THREE.Color();\n\tthis.oldClearAlpha = 1;\n\n\tthis.camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tthis.scene  = new THREE.Scene();\n\n\tthis.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );\n\tthis.scene.add( this.quad );\n\n\tthis.tempPulseColor1 = new THREE.Color();\n\tthis.tempPulseColor2 = new THREE.Color();\n\tthis.textureMatrix = new THREE.Matrix4();\n};\n\nTHREE.OutlinePass.prototype = Object.assign( Object.create( THREE.Pass.prototype ), {\n\n\tconstructor: THREE.OutlinePass,\n\n\tdispose: function() {\n\t\tthis.renderTargetMaskBuffer.dispose();\n\t\tthis.renderTargetDepthBuffer.dispose();\n\t\tthis.renderTargetMaskDownSampleBuffer.dispose();\n\t\tthis.renderTargetBlurBuffer1.dispose();\n\t\tthis.renderTargetBlurBuffer2.dispose();\n\t\tthis.renderTargetEdgeBuffer1.dispose();\n\t\tthis.renderTargetEdgeBuffer2.dispose();\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tthis.renderTargetMaskBuffer.setSize(width, height );\n\n\t\tvar resx = Math.round(width/this.downSampleRatio);\n\t\tvar resy = Math.round(height/this.downSampleRatio);\n\t\tthis.renderTargetMaskDownSampleBuffer.setSize(resx, resy );\n\t\tthis.renderTargetBlurBuffer1.setSize(resx, resy );\n\t\tthis.renderTargetEdgeBuffer1.setSize(resx, resy );\n\t\tthis.separableBlurMaterial1.uniforms[ \"texSize\" ].value = new THREE.Vector2(resx, resy);\n\n\t  resx = Math.round(resx/2);\n\t  resy = Math.round(resy/2);\n\n\t\tthis.renderTargetBlurBuffer2.setSize(resx, resy );\n\t\tthis.renderTargetEdgeBuffer2.setSize(resx, resy );\n\n\t\tthis.separableBlurMaterial2.uniforms[ \"texSize\" ].value = new THREE.Vector2(resx, resy);\n\t},\n\n\tchangeVisibilityOfSelectedObjects: function( bVisible ) {\n\n\t\tvar gatherSelectedMeshesCallBack = function( object ) {\n\n\t\t\tif( object instanceof THREE.Mesh ) {\n\t\t\t\tvar visibility = object.visible;\n\t\t\t\tif( !bVisible || object.bVisible )\n\t\t\t\t\tobject.visible = bVisible;\n\t\t\t\tobject.bVisible = visibility;\n\t\t\t}\n\t\t}\n\n\t\tfor( var i=0; i<this.selectedObjects.length; i++ ) {\n\n\t\t\tvar selectedObject = this.selectedObjects[i];\n\n\t\t\tselectedObject.traverse( gatherSelectedMeshesCallBack );\n\t\t}\n\t},\n\n\tchangeVisibilityOfNonSelectedObjects: function( bVisible ) {\n\n\t\tvar selectedMeshes = [];\n\n\t\tvar gatherSelectedMeshesCallBack = function( object ) {\n\n\t\t\tif( object instanceof THREE.Mesh ) {\n\n\t\t\t\tselectedMeshes.push(object);\n\n\t\t\t}\n\t\t}\n\n\t\tfor( var i=0; i<this.selectedObjects.length; i++ ) {\n\n\t\t\tvar selectedObject = this.selectedObjects[i];\n\n\t\t\tselectedObject.traverse( gatherSelectedMeshesCallBack );\n\t\t}\n\n\t\tvar VisibilityChangeCallBack = function( object ) {\n\n\t\t\tif( object instanceof THREE.Mesh ) {\n\n\t\t\t\tvar bFound = false;\n\n\t\t\t\tfor( var i=0; i<selectedMeshes.length; i++ ) {\n\n\t\t\t\t\tvar selectedObjectId = selectedMeshes[i].id;\n\n\t\t\t\t\tif(selectedObjectId === object.id) {\n\t\t\t\t\t\tbFound = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tif(!bFound) {\n\t\t\t\t\tvar visibility = object.visible;\n\t\t\t\t\tif( !bVisible || object.bVisible )\n\t\t\t\t\t\tobject.visible = bVisible;\n\t\t\t\t\tobject.bVisible = visibility;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.renderScene.traverse( VisibilityChangeCallBack );\n\t},\n\n\tupdateTextureMatrix: function() {\n\n\t\tthis.textureMatrix.set( 0.5, 0.0, 0.0, 0.5,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t0.0, 0.0, 0.0, 1.0 );\n\t\tthis.textureMatrix.multiply( this.renderCamera.projectionMatrix );\n\t\tthis.textureMatrix.multiply( this.renderCamera.matrixWorldInverse );\n\n\t},\n\n\trender: function ( renderer, writeBuffer, readBuffer, delta, maskActive ) {\n\n\t\tif(this.selectedObjects.length === 0 )\n\t\t\treturn;\n\n\t\tthis.oldClearColor.copy( renderer.getClearColor() );\n\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\tvar oldAutoClear = renderer.autoClear;\n\n\t\trenderer.autoClear = false;\n\n\t\tif ( maskActive ) renderer.context.disable( renderer.context.STENCIL_TEST );\n\n\t\trenderer.setClearColor( 0xffffff, 1 );\n\n\t\t// Make selected objects invisible\n\t\tthis.changeVisibilityOfSelectedObjects(false);\n\n\t\t// 1. Draw Non Selected objects in the depth buffer\n\t\tthis.renderScene.overrideMaterial = this.depthMaterial;\n\t\trenderer.render( this.renderScene, this.renderCamera, this.renderTargetDepthBuffer, true );\n\n\t\t// Make selected objects visible\n\t\tthis.changeVisibilityOfSelectedObjects(true);\n\n\t\t// Update Texture Matrix for Depth compare\n\t\tthis.updateTextureMatrix();\n\n\t\t// Make non selected objects invisible, and draw only the selected objects, by comparing the depth buffer of non selected objects\n\t\tthis.changeVisibilityOfNonSelectedObjects(false);\n\t\tthis.renderScene.overrideMaterial = this.prepareMaskMaterial;\n\t\tthis.prepareMaskMaterial.uniforms[ \"cameraNearFar\" ].value = new THREE.Vector2(this.renderCamera.near, this.renderCamera.far);\n\t\tthis.prepareMaskMaterial.uniforms[ \"depthTexture\" ].value = this.renderTargetDepthBuffer.texture;\n\t\tthis.prepareMaskMaterial.uniforms[ \"textureMatrix\" ].value = this.textureMatrix;\n\t\trenderer.render( this.renderScene, this.renderCamera, this.renderTargetMaskBuffer, true );\n\t\tthis.renderScene.overrideMaterial = null;\n\t\tthis.changeVisibilityOfNonSelectedObjects(true);\n\n\t\t// 2. Downsample to Half resolution\n\t\tthis.quad.material = this.materialCopy;\n\t\tthis.copyUniforms[ \"tDiffuse\" ].value = this.renderTargetMaskBuffer.texture;\n\t\trenderer.render( this.scene, this.camera, this.renderTargetMaskDownSampleBuffer, true );\n\n\t\tthis.tempPulseColor1.copy( this.visibleEdgeColor );\n\t\tthis.tempPulseColor2.copy( this.hiddenEdgeColor );\n\t\tif( this.pulsePeriod > 0 ) {\n\t\t\tvar scalar = ( 1 + 0.25 ) / 2 + Math.cos( performance.now() * 0.01/ this.pulsePeriod ) * ( 1.0 - 0.25 )/2\n\t\t\tthis.tempPulseColor1.multiplyScalar( scalar );\n\t\t\tthis.tempPulseColor2.multiplyScalar( scalar );\n\t\t}\n\n\t\t// 3. Apply Edge Detection Pass\n\t\tthis.quad.material = this.edgeDetectionMaterial;\n\t\tthis.edgeDetectionMaterial.uniforms[ \"maskTexture\" ].value = this.renderTargetMaskDownSampleBuffer.texture;\n\t\tthis.edgeDetectionMaterial.uniforms[ \"texSize\" ].value = new THREE.Vector2(this.renderTargetMaskDownSampleBuffer.width, this.renderTargetMaskDownSampleBuffer.height);\n\t\tthis.edgeDetectionMaterial.uniforms[ \"visibleEdgeColor\" ].value = this.tempPulseColor1;\n\t\tthis.edgeDetectionMaterial.uniforms[ \"hiddenEdgeColor\" ].value = this.tempPulseColor2;\n\t\trenderer.render( this.scene, this.camera, this.renderTargetEdgeBuffer1, true );\n\n\t\t// 4. Apply Blur on Half res\n\t\tthis.quad.material = this.separableBlurMaterial1;\n\t\tthis.separableBlurMaterial1.uniforms[ \"colorTexture\" ].value = this.renderTargetEdgeBuffer1.texture;\n\t\tthis.separableBlurMaterial1.uniforms[ \"direction\" ].value = THREE.OutlinePass.BlurDirectionX;\n\t\tthis.separableBlurMaterial1.uniforms[ \"kernelRadius\" ].value = this.edgeThickness;\n\t\trenderer.render( this.scene, this.camera, this.renderTargetBlurBuffer1, true );\n\t\tthis.separableBlurMaterial1.uniforms[ \"colorTexture\" ].value = this.renderTargetBlurBuffer1.texture;\n\t\tthis.separableBlurMaterial1.uniforms[ \"direction\" ].value = THREE.OutlinePass.BlurDirectionY;\n\t\t//renderer.render( this.scene, this.camera, this.renderTargetEdgeBuffer1, false );\n\n\t\t// Apply Blur on quarter res\n\t\tthis.quad.material = this.separableBlurMaterial2;\n\t\tthis.separableBlurMaterial2.uniforms[ \"colorTexture\" ].value = this.renderTargetEdgeBuffer1.texture;\n\t\tthis.separableBlurMaterial2.uniforms[ \"direction\" ].value = THREE.OutlinePass.BlurDirectionX;\n\t\trenderer.render( this.scene, this.camera, this.renderTargetBlurBuffer2, true );\n\t\tthis.separableBlurMaterial2.uniforms[ \"colorTexture\" ].value = this.renderTargetBlurBuffer2.texture;\n\t\tthis.separableBlurMaterial2.uniforms[ \"direction\" ].value = THREE.OutlinePass.BlurDirectionY;\n\t\trenderer.render( this.scene, this.camera, this.renderTargetEdgeBuffer2, true );\n\n\t\t// Blend it additively over the input texture\n\t\tthis.quad.material = this.overlayMaterial;\n\t\tthis.overlayMaterial.uniforms[ \"maskTexture\" ].value = this.renderTargetMaskBuffer.texture;\n\t\tthis.overlayMaterial.uniforms[ \"edgeTexture1\" ].value = this.renderTargetEdgeBuffer1.texture;\n\t\tthis.overlayMaterial.uniforms[ \"edgeTexture2\" ].value = this.renderTargetEdgeBuffer2.texture;\n\t\tthis.overlayMaterial.uniforms[ \"patternTexture\" ].value = this.patternTexture;\n\t\tthis.overlayMaterial.uniforms[ \"edgeStrength\" ].value = this.edgeStrength;\n\t\tthis.overlayMaterial.uniforms[ \"edgeGlow\" ].value = this.edgeGlow;\n\t\tthis.overlayMaterial.uniforms[ \"usePatternTexture\" ].value = this.usePatternTexture;\n\n\n\t\tif ( maskActive ) renderer.context.enable( renderer.context.STENCIL_TEST );\n\n\t\trenderer.render( this.scene, this.camera, this.renderToScreen ? null : readBuffer, false );\n\n\t\trenderer.setClearColor( this.oldClearColor, this.oldClearAlpha );\n\t\trenderer.autoClear = oldAutoClear;\n\t},\n\n\tgetPrepareMaskMaterial: function() {\n\n\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\t\"depthTexture\": { value: null },\n\t\t\t\t\"cameraNearFar\": { value: new THREE.Vector2( 0.5, 0.5 ) },\n\t\t\t\t\"textureMatrix\" : { value: new THREE.Matrix4() }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\\n\t\t\t\tvarying vec4 projTexCoord;\\\n\t\t\t\tvarying vec4 vPosition;\\\n\t\t\t\tuniform mat4 textureMatrix;\\\n\t\t\t\tvoid main() {\\\n\t\t\t\t\tvUv = uv;\\\n\t\t\t\t\tvPosition = modelViewMatrix * vec4( position, 1.0 );\\\n\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\\\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"#include <packing>\\\n\t\t\t\tvarying vec2 vUv;\\\n\t\t\t\tvarying vec4 vPosition;\\\n\t\t\t\tvarying vec4 projTexCoord;\\\n\t\t\t\tuniform sampler2D depthTexture;\\\n\t\t\t\tuniform vec2 cameraNearFar;\\\n\t\t\t\t\\\n\t\t\t\tvoid main() {\\\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\\\n\t\t\t\t\tfloat viewZ = -perspectiveDepthToViewZ( depth, cameraNearFar.x, cameraNearFar.y );\\\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\\\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\\\n\t\t\t\t}\"\n\t\t} );\n\t},\n\n\tgetEdgeDetectionMaterial: function() {\n\n\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\t\"maskTexture\": { value: null },\n\t\t\t\t\"texSize\": { value: new THREE.Vector2( 0.5, 0.5 ) },\n\t\t\t\t\"visibleEdgeColor\": { value: new THREE.Vector3( 1.0, 1.0, 1.0 ) },\n\t\t\t\t\"hiddenEdgeColor\":  { value: new THREE.Vector3( 1.0, 1.0, 1.0 ) },\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"varying vec2 vUv;\\\n\t\t\t\tuniform sampler2D maskTexture;\\\n\t\t\t\tuniform vec2 texSize;\\\n\t\t\t\tuniform vec3 visibleEdgeColor;\\\n\t\t\t\tuniform vec3 hiddenEdgeColor;\\\n\t\t\t\t\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\\\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\\\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\\\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\\\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\\\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\\\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\\\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\\\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\\\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\\\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\\\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\\\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\\\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\\\n\t\t\t\t}\"\n\t\t} );\n\t},\n\n\tgetSeperableBlurMaterial: function(maxRadius) {\n\n\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t\"MAX_RADIUS\" : maxRadius,\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t\"colorTexture\": { value: null },\n\t\t\t\t\"texSize\": \t{ value: new THREE.Vector2( 0.5, 0.5 ) },\n\t\t\t\t\"direction\": { value: new THREE.Vector2( 0.5, 0.5 ) },\n\t\t\t\t\"kernelRadius\": { value: 1.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"#include <common>\\\n\t\t\t\tvarying vec2 vUv;\\\n\t\t\t\tuniform sampler2D colorTexture;\\\n\t\t\t\tuniform vec2 texSize;\\\n\t\t\t\tuniform vec2 direction;\\\n\t\t\t\tuniform float kernelRadius;\\\n\t\t\t\t\\\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\\\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\\\n\t\t\t\t}\\\n\t\t\t\tvoid main() {\\\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\\\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\\\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\\\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\\\n\t\t\t\t\tvec2 uvOffset = delta;\\\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\\\n\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\\\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\\\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\\\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\\\n\t\t\t\t\t\tweightSum += (2.0 * w);\\\n\t\t\t\t\t\tuvOffset += delta;\\\n\t\t\t\t\t}\\\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\\\n\t\t\t\t}\"\n\t\t} );\n\t},\n\n\tgetOverlayMaterial: function() {\n\n\t\treturn new THREE.ShaderMaterial( {\n\n\t\t\tuniforms: {\n\t\t\t\t\"maskTexture\": { value: null },\n\t\t\t\t\"edgeTexture1\": { value: null },\n\t\t\t\t\"edgeTexture2\": { value: null },\n\t\t\t\t\"patternTexture\": { value: null },\n\t\t\t\t\"edgeStrength\" : { value: 1.0 },\n\t\t\t\t\"edgeGlow\" : { value: 1.0 },\n\t\t\t\t\"usePatternTexture\" : { value: 0.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"varying vec2 vUv;\\\n\t\t\t\tuniform sampler2D maskTexture;\\\n\t\t\t\tuniform sampler2D edgeTexture1;\\\n\t\t\t\tuniform sampler2D edgeTexture2;\\\n\t\t\t\tuniform sampler2D patternTexture;\\\n\t\t\t\tuniform float edgeStrength;\\\n\t\t\t\tuniform float edgeGlow;\\\n\t\t\t\tuniform bool usePatternTexture;\\\n\t\t\t\t\\\n\t\t\t\tvoid main() {\\\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\\\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\\\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\\\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\\\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\\\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\\\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\\\n\t\t\t\t\tif(usePatternTexture)\\\n\t\t\t\t\t\tfinalColor += visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\\\n\t\t\t\t\tgl_FragColor = finalColor;\\\n\t\t\t\t}\",\n\n\t\t\t\tblending: THREE.AdditiveBlending,\n\t\t\t\tdepthTest: false,\n\t\t\t\tdepthWrite: false,\n\t\t\t\ttransparent: true\n\t\t} );\n\t}\n\n} );\n\nTHREE.OutlinePass.BlurDirectionX = new THREE.Vector2( 1.0, 0.0 );\nTHREE.OutlinePass.BlurDirectionY = new THREE.Vector2( 0.0, 1.0 );\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/outlinePass.js\n **/","import THREE from 'three';\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author davidedc / http://www.sketchpatch.net/\n *\n * NVIDIA FXAA by Timothy Lottes\n * http://timothylottes.blogspot.com/2011/06/fxaa3-source-released.html\n * - WebGL port by @supereggbert\n * http://www.glge.org/demos/fxaa/\n */\n\nTHREE.FXAAShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\":   { value: null },\n\t\t\"resolution\": { value: new THREE.Vector2( 1 / 1024, 1 / 512 ) }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"void main() {\",\n\n\t\t\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform vec2 resolution;\",\n\n\t\t\"#define FXAA_REDUCE_MIN   (1.0/128.0)\",\n\t\t\"#define FXAA_REDUCE_MUL   (1.0/8.0)\",\n\t\t\"#define FXAA_SPAN_MAX     8.0\",\n\n\t\t\"void main() {\",\n\n\t\t\t\"vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;\",\n\t\t\t\"vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;\",\n\t\t\t\"vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;\",\n\t\t\t\"vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;\",\n\t\t\t\"vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );\",\n\t\t\t\"vec3 rgbM  = rgbaM.xyz;\",\n\t\t\t\"vec3 luma = vec3( 0.299, 0.587, 0.114 );\",\n\n\t\t\t\"float lumaNW = dot( rgbNW, luma );\",\n\t\t\t\"float lumaNE = dot( rgbNE, luma );\",\n\t\t\t\"float lumaSW = dot( rgbSW, luma );\",\n\t\t\t\"float lumaSE = dot( rgbSE, luma );\",\n\t\t\t\"float lumaM  = dot( rgbM,  luma );\",\n\t\t\t\"float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\",\n\t\t\t\"float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\",\n\n\t\t\t\"vec2 dir;\",\n\t\t\t\"dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\",\n\t\t\t\"dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\",\n\n\t\t\t\"float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\",\n\n\t\t\t\"float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\",\n\t\t\t\"dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\",\n\t\t\t\t  \"max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\",\n\t\t\t\t\t\t\"dir * rcpDirMin)) * resolution;\",\n\t\t\t\"vec4 rgbA = (1.0/2.0) * (\",\n        \t\"texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +\",\n\t\t\t\"texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));\",\n    \t\t\"vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (\",\n\t\t\t\"texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +\",\n      \t\t\"texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));\",\n    \t\t\"float lumaB = dot(rgbB, vec4(luma, 0.0));\",\n\n\t\t\t\"if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {\",\n\n\t\t\t\t\"gl_FragColor = rgbA;\",\n\n\t\t\t\"} else {\",\n\t\t\t\t\"gl_FragColor = rgbB;\",\n\n\t\t\t\"}\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/FXAAShader.js\n **/","import THREE from 'three';\n/**\n * @author dmarcos / https://github.com/dmarcos\n * @author mrdoob / http://mrdoob.com\n *\n * WebVR Spec: http://mozvr.github.io/webvr-spec/webvr.html\n *\n * Firefox: http://mozvr.com/downloads/\n * Chromium: https://drive.google.com/folderview?id=0BzudLt22BqGRbW9WTHMtOWMzNjQ&usp=sharing#list\n *\n */\n\nTHREE.VREffect = function ( renderer, onError ) {\n\n\tvar isWebVR1 = true;\n\n\tvar vrDisplay, vrDisplays;\n\tvar eyeTranslationL = new THREE.Vector3();\n\tvar eyeTranslationR = new THREE.Vector3();\n\tvar renderRectL, renderRectR;\n\tvar eyeFOVL, eyeFOVR;\n\n\tfunction gotVRDisplays( displays ) {\n\n\t\tvrDisplays = displays;\n\n\t\tfor ( var i = 0; i < displays.length; i ++ ) {\n\n\t\t\tif ( 'VRDisplay' in window && displays[ i ] instanceof VRDisplay ) {\n\n\t\t\t\tvrDisplay = displays[ i ];\n\t\t\t\tisWebVR1 = true;\n\t\t\t\tbreak; // We keep the first we encounter\n\n\t\t\t} else if ( 'HMDVRDevice' in window && displays[ i ] instanceof HMDVRDevice ) {\n\n\t\t\t\tvrDisplay = displays[ i ];\n\t\t\t\tisWebVR1 = false;\n\t\t\t\tbreak; // We keep the first we encounter\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( vrDisplay === undefined ) {\n\n\t\t\tif ( onError ) onError( 'HMD not available' );\n\n\t\t}\n\n\t}\n\n\tif ( navigator.getVRDisplays ) {\n\n\t\tnavigator.getVRDisplays().then( gotVRDisplays );\n\n\t} else if ( navigator.getVRDevices ) {\n\n\t\t// Deprecated API.\n\t\tnavigator.getVRDevices().then( gotVRDisplays );\n\n\t}\n\n\t//\n\n\tthis.isPresenting = false;\n\tthis.scale = 1;\n\n\tvar scope = this;\n\n\tvar rendererSize = renderer.getSize();\n\tvar rendererPixelRatio = renderer.getPixelRatio();\n\n\tthis.getVRDisplay = function () {\n\n\t\treturn vrDisplay;\n\n\t};\n\n\tthis.getVRDisplays = function () {\n\n\t\treturn vrDisplays;\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\trendererSize = { width: width, height: height };\n\n\t\tif ( scope.isPresenting ) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters( 'left' );\n\t\t\trenderer.setPixelRatio( 1 );\n\n\t\t\tif ( isWebVR1 ) {\n\n\t\t\t\trenderer.setSize( eyeParamsL.renderWidth * 2, eyeParamsL.renderHeight, false );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setSize( eyeParamsL.renderRect.width * 2, eyeParamsL.renderRect.height, false );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderer.setPixelRatio( rendererPixelRatio );\n\t\t\trenderer.setSize( width, height );\n\n\t\t}\n\n\t};\n\n\t// fullscreen\n\n\tvar canvas = renderer.domElement;\n\tvar requestFullscreen;\n\tvar exitFullscreen;\n\tvar fullscreenElement;\n\tvar leftBounds = [ 0.0, 0.0, 0.5, 1.0 ];\n\tvar rightBounds = [ 0.5, 0.0, 0.5, 1.0 ];\n\n\tfunction onFullscreenChange () {\n\t\tvar wasPresenting = scope.isPresenting;\n\t\tscope.isPresenting = vrDisplay !== undefined && ( vrDisplay.isPresenting || ( ! isWebVR1 && document[ fullscreenElement ] instanceof window.HTMLElement ) );\n\n\t\tif ( scope.isPresenting ) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters( 'left' );\n\t\t\tvar eyeWidth, eyeHeight;\n\n\t\t\tif ( isWebVR1 ) {\n\n\t\t\t\teyeWidth = eyeParamsL.renderWidth;\n\t\t\t\teyeHeight = eyeParamsL.renderHeight;\n\n\t\t\t\tif ( vrDisplay.getLayers ) {\n\n\t\t\t\t\tvar layers = vrDisplay.getLayers();\n\t\t\t\t\tif (layers.length) {\n\n\t\t\t\t\t\tleftBounds = layers[0].leftBounds || [ 0.0, 0.0, 0.5, 1.0 ];\n\t\t\t\t\t\trightBounds = layers[0].rightBounds || [ 0.5, 0.0, 0.5, 1.0 ];\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\teyeWidth = eyeParamsL.renderRect.width;\n\t\t\t\teyeHeight = eyeParamsL.renderRect.height;\n\n\t\t\t}\n\n\t\t\tif ( !wasPresenting ) {\n\n\t\t\t\trendererPixelRatio = renderer.getPixelRatio();\n\t\t\t\trendererSize = renderer.getSize();\n\n\t\t\t\trenderer.setPixelRatio( 1 );\n\t\t\t\trenderer.setSize( eyeWidth * 2, eyeHeight, false );\n\n\t\t\t}\n\n\t\t} else if ( wasPresenting ) {\n\n\t\t\trenderer.setPixelRatio( rendererPixelRatio );\n\t\t\trenderer.setSize( rendererSize.width, rendererSize.height );\n\n\t\t}\n\n\t}\n\n\tif ( canvas.requestFullscreen ) {\n\n\t\trequestFullscreen = 'requestFullscreen';\n\t\tfullscreenElement = 'fullscreenElement';\n\t\texitFullscreen = 'exitFullscreen';\n\t\tdocument.addEventListener( 'fullscreenchange', onFullscreenChange, false );\n\n\t} else if ( canvas.mozRequestFullScreen ) {\n\n\t\trequestFullscreen = 'mozRequestFullScreen';\n\t\tfullscreenElement = 'mozFullScreenElement';\n\t\texitFullscreen = 'mozCancelFullScreen';\n\t\tdocument.addEventListener( 'mozfullscreenchange', onFullscreenChange, false );\n\n\t} else {\n\n\t\trequestFullscreen = 'webkitRequestFullscreen';\n\t\tfullscreenElement = 'webkitFullscreenElement';\n\t\texitFullscreen = 'webkitExitFullscreen';\n\t\tdocument.addEventListener( 'webkitfullscreenchange', onFullscreenChange, false );\n\n\t}\n\n\twindow.addEventListener( 'vrdisplaypresentchange', onFullscreenChange, false );\n\n\tthis.setFullScreen = function ( boolean ) {\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tif ( vrDisplay === undefined ) {\n\n\t\t\t\treject( new Error( 'No VR hardware found.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( scope.isPresenting === boolean ) {\n\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( isWebVR1 ) {\n\n\t\t\t\tif ( boolean ) {\n\n\t\t\t\t\tresolve( vrDisplay.requestPresent( [ { source: canvas } ] ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresolve( vrDisplay.exitPresent() );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( canvas[ requestFullscreen ] ) {\n\n\t\t\t\t\tcanvas[ boolean ? requestFullscreen : exitFullscreen ]( { vrDisplay: vrDisplay } );\n\t\t\t\t\tresolve();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'No compatible requestFullscreen method found.' );\n\t\t\t\t\treject( new Error( 'No compatible requestFullscreen method found.' ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\tthis.requestPresent = function () {\n\n\t\treturn this.setFullScreen( true );\n\n\t};\n\n\tthis.exitPresent = function () {\n\n\t\treturn this.setFullScreen( false );\n\n\t};\n\n\tthis.requestAnimationFrame = function ( f ) {\n\n\t\tif ( isWebVR1 && vrDisplay !== undefined ) {\n\n\t\t\treturn vrDisplay.requestAnimationFrame( f );\n\n\t\t} else {\n\n\t\t\treturn window.requestAnimationFrame( f );\n\n\t\t}\n\n\t};\n\t\n\tthis.cancelAnimationFrame = function ( h ) {\n\n\t\tif ( isWebVR1 && vrDisplay !== undefined ) {\n\n\t\t\tvrDisplay.cancelAnimationFrame( h );\n\n\t\t} else {\n\n\t\t\twindow.cancelAnimationFrame( h );\n\n\t\t}\n\n\t};\n\t\n\tthis.submitFrame = function () {\n\n\t\tif ( isWebVR1 && vrDisplay !== undefined && scope.isPresenting ) {\n\n\t\t\tvrDisplay.submitFrame();\n\n\t\t}\n\n\t};\n\n\tthis.autoSubmitFrame = true;\n\n\t// render\n\n\tvar cameraL = new THREE.PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\n\tvar cameraR = new THREE.PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( vrDisplay && scope.isPresenting ) {\n\n\t\t\tvar autoUpdate = scene.autoUpdate;\n\n\t\t\tif ( autoUpdate ) {\n\n\t\t\t\tscene.updateMatrixWorld();\n\t\t\t\tscene.autoUpdate = false;\n\n\t\t\t}\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters( 'left' );\n\t\t\tvar eyeParamsR = vrDisplay.getEyeParameters( 'right' );\n\n\t\t\tif ( isWebVR1 ) {\n\n\t\t\t\teyeTranslationL.fromArray( eyeParamsL.offset );\n\t\t\t\teyeTranslationR.fromArray( eyeParamsR.offset );\n\t\t\t\teyeFOVL = eyeParamsL.fieldOfView;\n\t\t\t\teyeFOVR = eyeParamsR.fieldOfView;\n\n\t\t\t} else {\n\n\t\t\t\teyeTranslationL.copy( eyeParamsL.eyeTranslation );\n\t\t\t\teyeTranslationR.copy( eyeParamsR.eyeTranslation );\n\t\t\t\teyeFOVL = eyeParamsL.recommendedFieldOfView;\n\t\t\t\teyeFOVR = eyeParamsR.recommendedFieldOfView;\n\n\t\t\t}\n\n\t\t\tif ( Array.isArray( scene ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.VREffect.render() no longer supports arrays. Use object.layers instead.' );\n\t\t\t\tscene = scene[ 0 ];\n\n\t\t\t}\n\n\t\t\t// When rendering we don't care what the recommended size is, only what the actual size\n\t\t\t// of the backbuffer is.\n\t\t\tvar size = renderer.getSize();\n\t\t\trenderRectL = {\n\t\t\t\tx: Math.round( size.width * leftBounds[ 0 ] ),\n\t\t\t\ty: Math.round( size.height * leftBounds[ 1 ] ),\n\t\t\t\twidth: Math.round( size.width * leftBounds[ 2 ] ),\n\t\t\t\theight:  Math.round(size.height * leftBounds[ 3 ] )\n\t\t\t};\n\t\t\trenderRectR = {\n\t\t\t\tx: Math.round( size.width * rightBounds[ 0 ] ),\n\t\t\t\ty: Math.round( size.height * rightBounds[ 1 ] ),\n\t\t\t\twidth: Math.round( size.width * rightBounds[ 2 ] ),\n\t\t\t\theight:  Math.round(size.height * rightBounds[ 3 ] )\n\t\t\t};\n\n\t\t\tif (renderTarget) {\n\t\t\t\t\n\t\t\t\trenderer.setRenderTarget(renderTarget);\n\t\t\t\trenderTarget.scissorTest = true;\n\t\t\t\t\n\t\t\t} else  {\n\t\t\t\t\n\t\t\t\trenderer.setScissorTest( true );\n\t\t\t\n\t\t\t}\n\n\t\t\tif ( renderer.autoClear || forceClear ) renderer.clear();\n\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\tcameraL.projectionMatrix = fovToProjection( eyeFOVL, true, camera.near, camera.far );\n\t\t\tcameraR.projectionMatrix = fovToProjection( eyeFOVR, true, camera.near, camera.far );\n\n\t\t\tcamera.matrixWorld.decompose( cameraL.position, cameraL.quaternion, cameraL.scale );\n\t\t\tcamera.matrixWorld.decompose( cameraR.position, cameraR.quaternion, cameraR.scale );\n\n\t\t\tvar scale = this.scale;\n\t\t\tcameraL.translateOnAxis( eyeTranslationL, scale );\n\t\t\tcameraR.translateOnAxis( eyeTranslationR, scale );\n\n\n\t\t\t// render left eye\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\trenderTarget.viewport.set(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\t\t\t\trenderTarget.scissor.set(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\t\t\t\trenderer.setScissor( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\n\t\t\t}\n\t\t\trenderer.render( scene, cameraL, renderTarget, forceClear );\n\n\t\t\t// render right eye\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderTarget.viewport.set(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n  \t\t\t\trenderTarget.scissor.set(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\t\t\t\trenderer.setScissor( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\n\t\t\t}\n\t\t\trenderer.render( scene, cameraR, renderTarget, forceClear );\n\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderTarget.viewport.set( 0, 0, size.width, size.height );\n\t\t\t\trenderTarget.scissor.set( 0, 0, size.width, size.height );\n\t\t\t\trenderTarget.scissorTest = false;\n\t\t\t\trenderer.setRenderTarget( null );\n\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\trenderer.setScissorTest( false );\n\n\t\t\t}\n\t\t\t\n\t\t\tif ( autoUpdate ) {\n\n\t\t\t\tscene.autoUpdate = true;\n\n\t\t\t}\n\n\t\t\tif ( scope.autoSubmitFrame ) {\n\n\t\t\t\tscope.submitFrame();\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Regular render mode if not HMD\n\n\t\trenderer.render( scene, camera, renderTarget, forceClear );\n\n\t};\n\n\t//\n\n\tfunction fovToNDCScaleOffset( fov ) {\n\n\t\tvar pxscale = 2.0 / ( fov.leftTan + fov.rightTan );\n\t\tvar pxoffset = ( fov.leftTan - fov.rightTan ) * pxscale * 0.5;\n\t\tvar pyscale = 2.0 / ( fov.upTan + fov.downTan );\n\t\tvar pyoffset = ( fov.upTan - fov.downTan ) * pyscale * 0.5;\n\t\treturn { scale: [ pxscale, pyscale ], offset: [ pxoffset, pyoffset ] };\n\n\t}\n\n\tfunction fovPortToProjection( fov, rightHanded, zNear, zFar ) {\n\n\t\trightHanded = rightHanded === undefined ? true : rightHanded;\n\t\tzNear = zNear === undefined ? 0.01 : zNear;\n\t\tzFar = zFar === undefined ? 10000.0 : zFar;\n\n\t\tvar handednessScale = rightHanded ? - 1.0 : 1.0;\n\n\t\t// start with an identity matrix\n\t\tvar mobj = new THREE.Matrix4();\n\t\tvar m = mobj.elements;\n\n\t\t// and with scale/offset info for normalized device coords\n\t\tvar scaleAndOffset = fovToNDCScaleOffset( fov );\n\n\t\t// X result, map clip edges to [-w,+w]\n\t\tm[ 0 * 4 + 0 ] = scaleAndOffset.scale[ 0 ];\n\t\tm[ 0 * 4 + 1 ] = 0.0;\n\t\tm[ 0 * 4 + 2 ] = scaleAndOffset.offset[ 0 ] * handednessScale;\n\t\tm[ 0 * 4 + 3 ] = 0.0;\n\n\t\t// Y result, map clip edges to [-w,+w]\n\t\t// Y offset is negated because this proj matrix transforms from world coords with Y=up,\n\t\t// but the NDC scaling has Y=down (thanks D3D?)\n\t\tm[ 1 * 4 + 0 ] = 0.0;\n\t\tm[ 1 * 4 + 1 ] = scaleAndOffset.scale[ 1 ];\n\t\tm[ 1 * 4 + 2 ] = - scaleAndOffset.offset[ 1 ] * handednessScale;\n\t\tm[ 1 * 4 + 3 ] = 0.0;\n\n\t\t// Z result (up to the app)\n\t\tm[ 2 * 4 + 0 ] = 0.0;\n\t\tm[ 2 * 4 + 1 ] = 0.0;\n\t\tm[ 2 * 4 + 2 ] = zFar / ( zNear - zFar ) * - handednessScale;\n\t\tm[ 2 * 4 + 3 ] = ( zFar * zNear ) / ( zNear - zFar );\n\n\t\t// W result (= Z in)\n\t\tm[ 3 * 4 + 0 ] = 0.0;\n\t\tm[ 3 * 4 + 1 ] = 0.0;\n\t\tm[ 3 * 4 + 2 ] = handednessScale;\n\t\tm[ 3 * 4 + 3 ] = 0.0;\n\n\t\tmobj.transpose();\n\n\t\treturn mobj;\n\n\t}\n\n\tfunction fovToProjection( fov, rightHanded, zNear, zFar ) {\n\n\t\tvar DEG2RAD = Math.PI / 180.0;\n\n\t\tvar fovPort = {\n\t\t\tupTan: Math.tan( fov.upDegrees * DEG2RAD ),\n\t\t\tdownTan: Math.tan( fov.downDegrees * DEG2RAD ),\n\t\t\tleftTan: Math.tan( fov.leftDegrees * DEG2RAD ),\n\t\t\trightTan: Math.tan( fov.rightDegrees * DEG2RAD )\n\t\t};\n\n\t\treturn fovPortToProjection( fovPort, rightHanded, zNear, zFar );\n\n\t}\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/vrEffect.js\n **/","import THREE from 'three';\r\n/**\r\n * @author dmarcos / https://github.com/dmarcos\r\n * @author mrdoob / http://mrdoob.com\r\n */\r\n\r\nTHREE.VRControls = function ( object, onError ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar vrDisplay, vrDisplays;\r\n\r\n\tvar standingMatrix = new THREE.Matrix4();\r\n\r\n\tfunction gotVRDisplays( displays ) {\r\n\r\n\t\tvrDisplays = displays;\r\n\r\n\t\tfor ( var i = 0; i < displays.length; i ++ ) {\r\n\r\n\t\t\tif ( ( 'VRDisplay' in window && displays[ i ] instanceof VRDisplay ) ||\r\n\t\t\t\t ( 'PositionSensorVRDevice' in window && displays[ i ] instanceof PositionSensorVRDevice ) ) {\r\n\r\n\t\t\t\tvrDisplay = displays[ i ];\r\n\t\t\t\tbreak;  // We keep the first we encounter\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( vrDisplay === undefined ) {\r\n\r\n\t\t\tif ( onError ) onError( 'VR input not available.' );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tif ( navigator.getVRDisplays ) {\r\n\r\n\t\tnavigator.getVRDisplays().then( gotVRDisplays );\r\n\r\n\t} else if ( navigator.getVRDevices ) {\r\n\r\n\t\t// Deprecated API.\r\n\t\tnavigator.getVRDevices().then( gotVRDisplays );\r\n\r\n\t}\r\n\r\n\t// the Rift SDK returns the position in meters\r\n\t// this scale factor allows the user to define how meters\r\n\t// are converted to scene units.\r\n\r\n\tthis.scale = 1;\r\n\r\n\t// If true will use \"standing space\" coordinate system where y=0 is the\r\n\t// floor and x=0, z=0 is the center of the room.\r\n\tthis.standing = false;\r\n\r\n\t// Distance from the users eyes to the floor in meters. Used when\r\n\t// standing=true but the VRDisplay doesn't provide stageParameters.\r\n\tthis.userHeight = 1.6;\r\n\r\n\tthis.getVRDisplay = function () {\r\n\r\n\t\treturn vrDisplay;\r\n\r\n\t};\r\n\r\n\tthis.getVRDisplays = function () {\r\n\r\n\t\treturn vrDisplays;\r\n\r\n\t};\r\n\r\n\tthis.getStandingMatrix = function () {\r\n\r\n\t\treturn standingMatrix;\r\n\r\n\t};\r\n\r\n\tthis.update = function () {\r\n\r\n\t\tif ( vrDisplay ) {\r\n\r\n\t\t\tif ( vrDisplay.getPose ) {\r\n\r\n\t\t\t\tvar pose = vrDisplay.getPose();\r\n\t\t\t\tif ( pose.orientation !== null ) {\r\n\r\n\t\t\t\t\tobject.quaternion.fromArray( pose.orientation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( pose.position !== null ) {\r\n\r\n\t\t\t\t\tobject.position.fromArray( pose.position );\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif(vrDisplay.capabilities.hasExternalDisplay) {\r\n\t\t\t\t\t\tobject.position.set( 0, 1.6, 1.5 );\r\n\t\t\t\t\t\tobject.quaternion.set(0, 0, 0, 1);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Deprecated API.\r\n\t\t\t\tvar state = vrDisplay.getState();\r\n\r\n\t\t\t\tif ( state.orientation !== null ) {\r\n\r\n\t\t\t\t\tobject.quaternion.copy( state.orientation );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( state.position !== null ) {\r\n\r\n\t\t\t\t\tobject.position.copy( state.position );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t//object.position.set( 0, 0, 0 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.standing ) {\r\n\r\n\t\t\t\tif ( vrDisplay.stageParameters ) {\r\n\r\n\t\t\t\t\tobject.updateMatrix();\r\n\r\n\t\t\t\t\tstandingMatrix.fromArray( vrDisplay.stageParameters.sittingToStandingTransform );\r\n\t\t\t\t\tobject.applyMatrix( standingMatrix );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tobject.position.setY( object.position.y + this.userHeight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.position.multiplyScalar( scope.scale );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.resetPose = function () {\r\n\r\n\t\tif ( vrDisplay ) {\r\n\r\n\t\t\tif ( vrDisplay.resetPose !== undefined ) {\r\n\r\n\t\t\t\tvrDisplay.resetPose();\r\n\r\n\t\t\t} else if ( vrDisplay.resetSensor !== undefined ) {\r\n\r\n\t\t\t\t// Deprecated API.\r\n\t\t\t\tvrDisplay.resetSensor();\r\n\r\n\t\t\t} else if ( vrDisplay.zeroSensor !== undefined ) {\r\n\r\n\t\t\t\t// Really deprecated API.\r\n\t\t\t\tvrDisplay.zeroSensor();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.resetSensor = function () {\r\n\r\n\t\tconsole.warn( 'THREE.VRControls: .resetSensor() is now .resetPose().' );\r\n\t\tthis.resetPose();\r\n\r\n\t};\r\n\r\n\tthis.zeroSensor = function () {\r\n\r\n\t\tconsole.warn( 'THREE.VRControls: .zeroSensor() is now .resetPose().' );\r\n\t\tthis.resetPose();\r\n\r\n\t};\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tvrDisplay = null;\r\n\r\n\t};\r\n\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/vrControls.js\n **/","import THREE from 'three';\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author marklundin / http://mark-lundin.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.ParallaxBarrierEffect = function ( renderer ) {\n\n  var _camera = new THREE.OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\n  var _scene = new THREE.Scene();\n\n  var _stereo = new THREE.StereoCamera();\n\n  var _params = { minFilter: THREE.LinearFilter, magFilter: THREE.NearestFilter, format: THREE.RGBAFormat };\n\n  var _renderTargetL = new THREE.WebGLRenderTarget( 512, 512, _params );\n  var _renderTargetR = new THREE.WebGLRenderTarget( 512, 512, _params );\n\n  var _material = new THREE.ShaderMaterial( {\n\n    uniforms: {\n\n      \"mapLeft\": { value: _renderTargetL.texture },\n      \"mapRight\": { value: _renderTargetR.texture }\n\n    },\n\n    vertexShader: [\n\n      \"varying vec2 vUv;\",\n\n      \"void main() {\",\n\n      \" vUv = vec2( uv.x, uv.y );\",\n      \" gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n      \"}\"\n\n    ].join( \"\\n\" ),\n\n    fragmentShader: [\n\n      \"uniform sampler2D mapLeft;\",\n      \"uniform sampler2D mapRight;\",\n      \"varying vec2 vUv;\",\n\n      \"void main() {\",\n\n      \" vec2 uv = vUv;\",\n\n      \" if ( ( mod( gl_FragCoord.x, 2.0 ) ) > 1.00 ) {\",\n\n      \"   gl_FragColor = texture2D( mapLeft, uv );\",\n\n      \" } else {\",\n\n      \"   gl_FragColor = texture2D( mapRight, uv );\",\n\n      \" }\",\n\n      \"}\"\n\n    ].join( \"\\n\" )\n\n  } );\n\n  var mesh = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), _material );\n  _scene.add( mesh );\n\n  this.setSize = function ( width, height ) {\n\n    renderer.setSize( width, height );\n\n    var pixelRatio = renderer.getPixelRatio();\n\n    _renderTargetL.setSize( width * pixelRatio, height * pixelRatio );\n    _renderTargetR.setSize( width * pixelRatio, height * pixelRatio );\n\n  };\n\n  this.render = function ( scene, camera ) {\n\n    scene.updateMatrixWorld();\n\n    if ( camera.parent === null ) camera.updateMatrixWorld();\n\n    _stereo.update( camera );\n\n    renderer.render( scene, _stereo.cameraL, _renderTargetL, true );\n    renderer.render( scene, _stereo.cameraR, _renderTargetR, true );\n    renderer.render( _scene, _camera );\n\n  };\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/parallaxBarrierEffect.js\n **/","import THREE from 'three';\n\nTHREE.Reticle = function(camera) {\n\n    var reticle = {};\n\n    reticle.armObject = null;\n    reticle.reticleObject = null;\n    reticle.dot = null;\n    reticle.intersection = null;\n    reticle.colliders = [];\n\n    const defaultMaterial = new THREE.MeshBasicMaterial({color: '#a9a9a9',transparent: true,opacity: 0 });\n    const hitMaterial = new THREE.MeshBasicMaterial({color: '#ff0000',transparent: true,opacity: 0.7 });\n\n    reticle.createDefaultObject = function(position, length, isDot) {\n        if (isDot) {\n            var defaultGeometry = new THREE.SphereGeometry(0.007, 32, length);\n        } else {\n            var defaultGeometry = new THREE.TorusGeometry( 0.2, 0.04, 16, 100 );\n        }\n        var defaultObject = new THREE.Mesh(defaultGeometry, defaultMaterial);\n        defaultObject.position.copy(position);\n        defaultObject.rotation.x = -Math.PI * 0.5;\n        return defaultObject;\n    };\n\n    reticle.init = function(camera) {\n        this.camera = camera;\n        this.armObject = new THREE.Object3D();\n        this.reticleObject = this.createDefaultObject(new THREE.Vector3(0, 0, -0.5), .01, false);\n        this.armObject.add(this.reticleObject);\n\n        this.dot = this.createDefaultObject(new THREE.Vector3(0, 0, -0.5), .01, true);\n        this.camera.add(this.armObject);\n        this.camera.add(this.dot);\n        this.startClock();\n    };\n\n    reticle.getReticlePosition = function() {\n        return reticle.reticleObject.position;\n    };\n\n    reticle.remvoeFromList = function(object_in, list_in) {\n        var index = list_in.indexOf(object_in);\n        if (index > -1) {\n            list_in.splice(index, 1);\n        }\n    };\n\n    reticle.addCollider = function(threeObject) {\n        this.colliders.push(threeObject);\n    };\n\n    reticle.removeCollider = function(threeObject) {\n        this.remvoeFromList(threeObject, reticle.colliders);\n    };\n\n    reticle.update = function() {\n        var camDirection = new THREE.Vector3();\n        this.camera.getWorldDirection( camDirection );\n        var ray = new THREE.Raycaster(this.camera.position, camDirection);\n       \n\n        var intersects = ray.intersectObjects(this.colliders);\n        if (intersects.length > 0) {\n            //save the new hit object and time\n            this.intersection = intersects[0];\n            this.reticleObject.position.copy(this.intersection.point);\n\n            this.reticleObject.material = hitMaterial;\n            this.dot.material.opacity = 0;\n\n        } else {\n            this.dot.material.opacity = 1;\n            this.reticleObject.material = defaultMaterial;\n        }\n    }\n\n    reticle.startClock = function() {\n        this.clock = new THREE.Clock(true);\n    }\n\n    reticle.init(camera);\n\n    return reticle;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/reticle.js\n **/","import THREE from 'three';\n/**\n * @author mrdoob / http://mrdoob.com\n * @author stewdio / http://stewd.io\n */\n\nTHREE.ViveController = function ( id ) {\n\n\tTHREE.Object3D.call( this );\n\n\tvar scope = this;\n\tvar gamepad;\n\n\tvar axes = [ 0, 0 ];\n\tvar thumbpadIsPressed = false;\n\tvar triggerIsPressed = false;\n\tvar gripsArePressed = false;\n\tvar menuIsPressed = false;\n\n\tfunction findGamepad( id ) {\n\n\t\t// Iterate across gamepads as Vive Controllers may not be\n\t\t// in position 0 and 1.\n\n\t\tvar gamepads = navigator.getGamepads();\n\n\t\tfor ( var i = 0, j = 0; i < 4; i ++ ) {\n\n\t\t\tvar gamepad = gamepads[ i ];\n\n\t\t\tif ( gamepad && gamepad.id === 'OpenVR Gamepad' ) {\n\n\t\t\t\tif ( j === id ) return gamepad;\n\n\t\t\t\tj ++;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tthis.matrixAutoUpdate = false;\n\tthis.standingMatrix = new THREE.Matrix4();\n\n\tthis.getGamepad = function () {\n\n\t\treturn gamepad;\n\n\t};\n\n\tthis.getButtonState = function ( button ) {\n\n\t\tif ( button === 'thumbpad' ) return thumbpadIsPressed;\n\t\tif ( button === 'trigger' ) return triggerIsPressed;\n\t\tif ( button === 'grips' ) return gripsArePressed;\n\t\tif ( button === 'menu' ) return menuIsPressed;\n\n\t};\n\n\tthis.update = function () {\n\n\t\tgamepad = findGamepad( id );\n\n\t\tif ( gamepad !== undefined && gamepad.pose.position !== null && gamepad.pose.orientation !== null ) {\n\n\t\t\t//  Position and orientation.\n\n\t\t\tvar pose = gamepad.pose;\n\n\t\t\tscope.position.fromArray( pose.position );\n\t\t\tscope.quaternion.fromArray( pose.orientation );\n\t\t\tscope.matrix.compose( scope.position, scope.quaternion, scope.scale );\n\t\t\tscope.matrix.multiplyMatrices( scope.standingMatrix, scope.matrix );\n\t\t\tscope.matrixWorldNeedsUpdate = true;\n\t\t\tscope.visible = true;\n\n\t\t\t//  Thumbpad and Buttons.\n\n\t\t\tif ( axes[ 0 ] !== gamepad.axes[ 0 ] || axes[ 1 ] !== gamepad.axes[ 1 ] ) {\n\n\t\t\t\taxes[ 0 ] = gamepad.axes[ 0 ]; //  X axis: -1 = Left, +1 = Right.\n\t\t\t\taxes[ 1 ] = gamepad.axes[ 1 ]; //  Y axis: -1 = Bottom, +1 = Top.\n\t\t\t\tscope.dispatchEvent( { type: 'axischanged', axes: axes } );\n\n\t\t\t}\n\n\t\t\tif ( thumbpadIsPressed !== gamepad.buttons[ 0 ].pressed ) {\n\n\t\t\t\tthumbpadIsPressed = gamepad.buttons[ 0 ].pressed;\n\t\t\t\tvar event = new Event( thumbpadIsPressed ? 'thumbpaddown' : 'thumbpadup');\n\t\t\t\t//window.dispatchEvent( { type: thumbpadIsPressed ? 'thumbpaddown' : 'thumbpadup' } );\n\t\t\t\twindow.dispatchEvent(event);\n\t\t\t}\n\n\t\t\tif ( triggerIsPressed !== gamepad.buttons[ 1 ].pressed ) {\n\n\t\t\t\ttriggerIsPressed = gamepad.buttons[ 1 ].pressed;\n\t\t\t\t//scope.dispatchEvent( { type: triggerIsPressed ? 'triggerdown' : 'triggerup' } );\n\t\t\t\tvar event = new Event( triggerIsPressed ? 'triggerdown' : 'triggerup');\n\t\t\t\twindow.dispatchEvent(event);\n\n\t\t\t}\n\n\t\t\tif ( gripsArePressed !== gamepad.buttons[ 2 ].pressed ) {\n\n\t\t\t\tgripsArePressed = gamepad.buttons[ 2 ].pressed;\n\t\t\t\t//scope.dispatchEvent( { type: gripsArePressed ? 'gripsdown' : 'gripsup' } );\n\t\t\t\tvar event = new Event( gripsArePressed ? 'gripsdown' : 'gripsup');\n\t\t\t\twindow.dispatchEvent(event);\n\n\t\t\t}\n\n\t\t\tif ( menuIsPressed !== gamepad.buttons[ 3 ].pressed ) {\n\n\t\t\t\tmenuIsPressed = gamepad.buttons[ 3 ].pressed;\n\t\t\t\t//scope.dispatchEvent( { type: menuIsPressed ? 'menudown' : 'menuup' } );\n\t\t\t\tvar event = new Event( menuIsPressed ? 'menudown' : 'menuup' );\n\t\t\t\twindow.dispatchEvent(event);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tscope.visible = false;\n\n\t\t}\n\n\t};\n\n};\n\nTHREE.ViveController.prototype = Object.create( THREE.Object3D.prototype );\nTHREE.ViveController.prototype.constructor = THREE.ViveController;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/viveController.js\n **/","import THREE from 'three';\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nTHREE.OBJLoader = function ( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\n\n\tthis.materials = null;\n\n\tthis.regexp = {\n\t\t// v float float float\n\t\tvertex_pattern           : /^v\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t// vn float float float\n\t\tnormal_pattern           : /^vn\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t// vt float float\n\t\tuv_pattern               : /^vt\\s+([\\d|\\.|\\+|\\-|e|E]+)\\s+([\\d|\\.|\\+|\\-|e|E]+)/,\n\t\t// f vertex vertex vertex\n\t\tface_vertex              : /^f\\s+(-?\\d+)\\s+(-?\\d+)\\s+(-?\\d+)(?:\\s+(-?\\d+))?/,\n\t\t// f vertex/uv vertex/uv vertex/uv\n\t\tface_vertex_uv           : /^f\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+))?/,\n\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n\t\tface_vertex_uv_normal    : /^f\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+)(?:\\s+(-?\\d+)\\/(-?\\d+)\\/(-?\\d+))?/,\n\t\t// f vertex//normal vertex//normal vertex//normal\n\t\tface_vertex_normal       : /^f\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)\\s+(-?\\d+)\\/\\/(-?\\d+)(?:\\s+(-?\\d+)\\/\\/(-?\\d+))?/,\n\t\t// o object_name | g group_name\n\t\tobject_pattern           : /^[og]\\s*(.+)?/,\n\t\t// s boolean\n\t\tsmoothing_pattern        : /^s\\s+(\\d+|on|off)/,\n\t\t// mtllib file_reference\n\t\tmaterial_library_pattern : /^mtllib /,\n\t\t// usemtl material_name\n\t\tmaterial_use_pattern     : /^usemtl /\n\t};\n\n};\n\nTHREE.OBJLoader.prototype = {\n\n\tconstructor: THREE.OBJLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( text ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tsetPath: function ( value ) {\n\n\t\tthis.path = value;\n\n\t},\n\n\tsetMaterials: function ( materials ) {\n\n\t\tthis.materials = materials;\n\n\t},\n\n\t_createParserState : function () {\n\n\t\tvar state = {\n\t\t\tobjects  : [],\n\t\t\tobject   : {},\n\n\t\t\tvertices : [],\n\t\t\tnormals  : [],\n\t\t\tuvs      : [],\n\n\t\t\tmaterialLibraries : [],\n\n\t\t\tstartObject: function ( name, fromDeclaration ) {\n\n\t\t\t\t// If the current object (initial from reset) is not from a g/o declaration in the parsed\n\t\t\t\t// file. We need to use it for the first parsed g/o to keep things in sync.\n\t\t\t\tif ( this.object && this.object.fromDeclaration === false ) {\n\n\t\t\t\t\tthis.object.name = name;\n\t\t\t\t\tthis.object.fromDeclaration = ( fromDeclaration !== false );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize();\n\n\t\t\t\t}\n\n\t\t\t\tvar previousMaterial = ( this.object && typeof this.object.currentMaterial === 'function' ? this.object.currentMaterial() : undefined );\n\n\t\t\t\tthis.object = {\n\t\t\t\t\tname : name || '',\n\t\t\t\t\tfromDeclaration : ( fromDeclaration !== false ),\n\n\t\t\t\t\tgeometry : {\n\t\t\t\t\t\tvertices : [],\n\t\t\t\t\t\tnormals  : [],\n\t\t\t\t\t\tuvs      : []\n\t\t\t\t\t},\n\t\t\t\t\tmaterials : [],\n\t\t\t\t\tsmooth : true,\n\n\t\t\t\t\tstartMaterial : function( name, libraries ) {\n\n\t\t\t\t\t\tvar previous = this._finalize( false );\n\n\t\t\t\t\t\t// New usemtl declaration overwrites an inherited material, except if faces were declared\n\t\t\t\t\t\t// after the material, then it must be preserved for proper MultiMaterial continuation.\n\t\t\t\t\t\tif ( previous && ( previous.inherited || previous.groupCount <= 0 ) ) {\n\n\t\t\t\t\t\t\tthis.materials.splice( previous.index, 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar material = {\n\t\t\t\t\t\t\tindex      : this.materials.length,\n\t\t\t\t\t\t\tname       : name || '',\n\t\t\t\t\t\t\tmtllib     : ( Array.isArray( libraries ) && libraries.length > 0 ? libraries[ libraries.length - 1 ] : '' ),\n\t\t\t\t\t\t\tsmooth     : ( previous !== undefined ? previous.smooth : this.smooth ),\n\t\t\t\t\t\t\tgroupStart : ( previous !== undefined ? previous.groupEnd : 0 ),\n\t\t\t\t\t\t\tgroupEnd   : -1,\n\t\t\t\t\t\t\tgroupCount : -1,\n\t\t\t\t\t\t\tinherited  : false,\n\n\t\t\t\t\t\t\tclone : function( index ) {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tindex      : ( typeof index === 'number' ? index : this.index ),\n\t\t\t\t\t\t\t\t\tname       : this.name,\n\t\t\t\t\t\t\t\t\tmtllib     : this.mtllib,\n\t\t\t\t\t\t\t\t\tsmooth     : this.smooth,\n\t\t\t\t\t\t\t\t\tgroupStart : this.groupEnd,\n\t\t\t\t\t\t\t\t\tgroupEnd   : -1,\n\t\t\t\t\t\t\t\t\tgroupCount : -1,\n\t\t\t\t\t\t\t\t\tinherited  : false\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.materials.push( material );\n\n\t\t\t\t\t\treturn material;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tcurrentMaterial : function() {\n\n\t\t\t\t\t\tif ( this.materials.length > 0 ) {\n\t\t\t\t\t\t\treturn this.materials[ this.materials.length - 1 ];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\n\t\t\t\t\t},\n\n\t\t\t\t\t_finalize : function( end ) {\n\n\t\t\t\t\t\tvar lastMultiMaterial = this.currentMaterial();\n\t\t\t\t\t\tif ( lastMultiMaterial && lastMultiMaterial.groupEnd === -1 ) {\n\n\t\t\t\t\t\t\tlastMultiMaterial.groupEnd = this.geometry.vertices.length / 3;\n\t\t\t\t\t\t\tlastMultiMaterial.groupCount = lastMultiMaterial.groupEnd - lastMultiMaterial.groupStart;\n\t\t\t\t\t\t\tlastMultiMaterial.inherited = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Guarantee at least one empty material, this makes the creation later more straight forward.\n\t\t\t\t\t\tif ( end !== false && this.materials.length === 0 ) {\n\t\t\t\t\t\t\tthis.materials.push({\n\t\t\t\t\t\t\t\tname   : '',\n\t\t\t\t\t\t\t\tsmooth : this.smooth\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn lastMultiMaterial;\n\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t// Inherit previous objects material.\n\t\t\t\t// Spec tells us that a declared material must be set to all objects until a new material is declared.\n\t\t\t\t// If a usemtl declaration is encountered while this new object is being parsed, it will\n\t\t\t\t// overwrite the inherited material. Exception being that there was already face declarations\n\t\t\t\t// to the inherited material, then it will be preserved for proper MultiMaterial continuation.\n\n\t\t\t\tif ( previousMaterial && previousMaterial.name && typeof previousMaterial.clone === \"function\" ) {\n\n\t\t\t\t\tvar declared = previousMaterial.clone( 0 );\n\t\t\t\t\tdeclared.inherited = true;\n\t\t\t\t\tthis.object.materials.push( declared );\n\n\t\t\t\t}\n\n\t\t\t\tthis.objects.push( this.object );\n\n\t\t\t},\n\n\t\t\tfinalize : function() {\n\n\t\t\t\tif ( this.object && typeof this.object._finalize === 'function' ) {\n\n\t\t\t\t\tthis.object._finalize();\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tparseVertexIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseNormalIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 3 ) * 3;\n\n\t\t\t},\n\n\t\t\tparseUVIndex: function ( value, len ) {\n\n\t\t\t\tvar index = parseInt( value, 10 );\n\t\t\t\treturn ( index >= 0 ? index - 1 : index + len / 2 ) * 2;\n\n\t\t\t},\n\n\t\t\taddVertex: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ] );\n\t\t\t\tdst.push( src[ b + 1 ] );\n\t\t\t\tdst.push( src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ] );\n\t\t\t\tdst.push( src[ c + 1 ] );\n\t\t\t\tdst.push( src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddVertexLine: function ( a ) {\n\n\t\t\t\tvar src = this.vertices;\n\t\t\t\tvar dst = this.object.geometry.vertices;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ a + 2 ] );\n\n\t\t\t},\n\n\t\t\taddNormal : function ( a, b, c ) {\n\n\t\t\t\tvar src = this.normals;\n\t\t\t\tvar dst = this.object.geometry.normals;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ a + 2 ] );\n\t\t\t\tdst.push( src[ b + 0 ] );\n\t\t\t\tdst.push( src[ b + 1 ] );\n\t\t\t\tdst.push( src[ b + 2 ] );\n\t\t\t\tdst.push( src[ c + 0 ] );\n\t\t\t\tdst.push( src[ c + 1 ] );\n\t\t\t\tdst.push( src[ c + 2 ] );\n\n\t\t\t},\n\n\t\t\taddUV: function ( a, b, c ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\t\t\t\tdst.push( src[ b + 0 ] );\n\t\t\t\tdst.push( src[ b + 1 ] );\n\t\t\t\tdst.push( src[ c + 0 ] );\n\t\t\t\tdst.push( src[ c + 1 ] );\n\n\t\t\t},\n\n\t\t\taddUVLine: function ( a ) {\n\n\t\t\t\tvar src = this.uvs;\n\t\t\t\tvar dst = this.object.geometry.uvs;\n\n\t\t\t\tdst.push( src[ a + 0 ] );\n\t\t\t\tdst.push( src[ a + 1 ] );\n\n\t\t\t},\n\n\t\t\taddFace: function ( a, b, c, d, ua, ub, uc, ud, na, nb, nc, nd ) {\n\n\t\t\t\tvar vLen = this.vertices.length;\n\n\t\t\t\tvar ia = this.parseVertexIndex( a, vLen );\n\t\t\t\tvar ib = this.parseVertexIndex( b, vLen );\n\t\t\t\tvar ic = this.parseVertexIndex( c, vLen );\n\t\t\t\tvar id;\n\n\t\t\t\tif ( d === undefined ) {\n\n\t\t\t\t\tthis.addVertex( ia, ib, ic );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tid = this.parseVertexIndex( d, vLen );\n\n\t\t\t\t\tthis.addVertex( ia, ib, id );\n\t\t\t\t\tthis.addVertex( ib, ic, id );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ua !== undefined ) {\n\n\t\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\t\tia = this.parseUVIndex( ua, uvLen );\n\t\t\t\t\tib = this.parseUVIndex( ub, uvLen );\n\t\t\t\t\tic = this.parseUVIndex( uc, uvLen );\n\n\t\t\t\t\tif ( d === undefined ) {\n\n\t\t\t\t\t\tthis.addUV( ia, ib, ic );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tid = this.parseUVIndex( ud, uvLen );\n\n\t\t\t\t\t\tthis.addUV( ia, ib, id );\n\t\t\t\t\t\tthis.addUV( ib, ic, id );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( na !== undefined ) {\n\n\t\t\t\t\t// Normals are many times the same. If so, skip function call and parseInt.\n\t\t\t\t\tvar nLen = this.normals.length;\n\t\t\t\t\tia = this.parseNormalIndex( na, nLen );\n\n\t\t\t\t\tib = na === nb ? ia : this.parseNormalIndex( nb, nLen );\n\t\t\t\t\tic = na === nc ? ia : this.parseNormalIndex( nc, nLen );\n\n\t\t\t\t\tif ( d === undefined ) {\n\n\t\t\t\t\t\tthis.addNormal( ia, ib, ic );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tid = this.parseNormalIndex( nd, nLen );\n\n\t\t\t\t\t\tthis.addNormal( ia, ib, id );\n\t\t\t\t\t\tthis.addNormal( ib, ic, id );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\taddLineGeometry: function ( vertices, uvs ) {\n\n\t\t\t\tthis.object.geometry.type = 'Line';\n\n\t\t\t\tvar vLen = this.vertices.length;\n\t\t\t\tvar uvLen = this.uvs.length;\n\n\t\t\t\tfor ( var vi = 0, l = vertices.length; vi < l; vi ++ ) {\n\n\t\t\t\t\tthis.addVertexLine( this.parseVertexIndex( vertices[ vi ], vLen ) );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var uvi = 0, l = uvs.length; uvi < l; uvi ++ ) {\n\n\t\t\t\t\tthis.addUVLine( this.parseUVIndex( uvs[ uvi ], uvLen ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tstate.startObject( '', false );\n\n\t\treturn state;\n\n\t},\n\n\tparse: function ( text ) {\n\n\t\tconsole.time( 'OBJLoader' );\n\n\t\tvar state = this._createParserState();\n\n\t\tif ( text.indexOf( '\\r\\n' ) !== - 1 ) {\n\n\t\t\t// This is faster than String.split with regex that splits on both\n\t\t\ttext = text.replace( '\\r\\n', '\\n' );\n\n\t\t}\n\n\t\tvar lines = text.split( '\\n' );\n\t\tvar line = '', lineFirstChar = '', lineSecondChar = '';\n\t\tvar lineLength = 0;\n\t\tvar result = [];\n\n\t\t// Faster to just trim left side of the line. Use if available.\n\t\tvar trimLeft = ( typeof ''.trimLeft === 'function' );\n\n\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\n\n\t\t\tline = lines[ i ];\n\n\t\t\tline = trimLeft ? line.trimLeft() : line.trim();\n\n\t\t\tlineLength = line.length;\n\n\t\t\tif ( lineLength === 0 ) continue;\n\n\t\t\tlineFirstChar = line.charAt( 0 );\n\n\t\t\t// @todo invoke passed in handler if any\n\t\t\tif ( lineFirstChar === '#' ) continue;\n\n\t\t\tif ( lineFirstChar === 'v' ) {\n\n\t\t\t\tlineSecondChar = line.charAt( 1 );\n\n\t\t\t\tif ( lineSecondChar === ' ' && ( result = this.regexp.vertex_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// 0                  1      2      3\n\t\t\t\t\t// [\"v 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\t\tstate.vertices.push(\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( lineSecondChar === 'n' && ( result = this.regexp.normal_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// 0                   1      2      3\n\t\t\t\t\t// [\"vn 1.0 2.0 3.0\", \"1.0\", \"2.0\", \"3.0\"]\n\n\t\t\t\t\tstate.normals.push(\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\t\tparseFloat( result[ 2 ] ),\n\t\t\t\t\t\tparseFloat( result[ 3 ] )\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( lineSecondChar === 't' && ( result = this.regexp.uv_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// 0               1      2\n\t\t\t\t\t// [\"vt 0.1 0.2\", \"0.1\", \"0.2\"]\n\n\t\t\t\t\tstate.uvs.push(\n\t\t\t\t\t\tparseFloat( result[ 1 ] ),\n\t\t\t\t\t\tparseFloat( result[ 2 ] )\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( \"Unexpected vertex/normal/uv line: '\" + line  + \"'\" );\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === \"f\" ) {\n\n\t\t\t\tif ( ( result = this.regexp.face_vertex_uv_normal.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex/uv/normal vertex/uv/normal vertex/uv/normal\n\t\t\t\t\t// 0                        1    2    3    4    5    6    7    8    9   10         11         12\n\t\t\t\t\t// [\"f 1/1/1 2/2/2 3/3/3\", \"1\", \"1\", \"1\", \"2\", \"2\", \"2\", \"3\", \"3\", \"3\", undefined, undefined, undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 4 ], result[ 7 ], result[ 10 ],\n\t\t\t\t\t\tresult[ 2 ], result[ 5 ], result[ 8 ], result[ 11 ],\n\t\t\t\t\t\tresult[ 3 ], result[ 6 ], result[ 9 ], result[ 12 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_uv.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex/uv vertex/uv vertex/uv\n\t\t\t\t\t// 0                  1    2    3    4    5    6   7          8\n\t\t\t\t\t// [\"f 1/1 2/2 3/3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex_normal.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex//normal vertex//normal vertex//normal\n\t\t\t\t\t// 0                     1    2    3    4    5    6   7          8\n\t\t\t\t\t// [\"f 1//1 2//2 3//3\", \"1\", \"1\", \"2\", \"2\", \"3\", \"3\", undefined, undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 3 ], result[ 5 ], result[ 7 ],\n\t\t\t\t\t\tundefined, undefined, undefined, undefined,\n\t\t\t\t\t\tresult[ 2 ], result[ 4 ], result[ 6 ], result[ 8 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else if ( ( result = this.regexp.face_vertex.exec( line ) ) !== null ) {\n\n\t\t\t\t\t// f vertex vertex vertex\n\t\t\t\t\t// 0            1    2    3   4\n\t\t\t\t\t// [\"f 1 2 3\", \"1\", \"2\", \"3\", undefined]\n\n\t\t\t\t\tstate.addFace(\n\t\t\t\t\t\tresult[ 1 ], result[ 2 ], result[ 3 ], result[ 4 ]\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( \"Unexpected face line: '\" + line  + \"'\" );\n\n\t\t\t\t}\n\n\t\t\t} else if ( lineFirstChar === \"l\" ) {\n\n\t\t\t\tvar lineParts = line.substring( 1 ).trim().split( \" \" );\n\t\t\t\tvar lineVertices = [], lineUVs = [];\n\n\t\t\t\tif ( line.indexOf( \"/\" ) === - 1 ) {\n\n\t\t\t\t\tlineVertices = lineParts;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var li = 0, llen = lineParts.length; li < llen; li ++ ) {\n\n\t\t\t\t\t\tvar parts = lineParts[ li ].split( \"/\" );\n\n\t\t\t\t\t\tif ( parts[ 0 ] !== \"\" ) lineVertices.push( parts[ 0 ] );\n\t\t\t\t\t\tif ( parts[ 1 ] !== \"\" ) lineUVs.push( parts[ 1 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tstate.addLineGeometry( lineVertices, lineUVs );\n\n\t\t\t} else if ( ( result = this.regexp.object_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// o object_name\n\t\t\t\t// or\n\t\t\t\t// g group_name\n\n\t\t\t\tvar name = result[ 0 ].substr( 1 ).trim();\n\t\t\t\tstate.startObject( name );\n\n\t\t\t} else if ( this.regexp.material_use_pattern.test( line ) ) {\n\n\t\t\t\t// material\n\n\t\t\t\tstate.object.startMaterial( line.substring( 7 ).trim(), state.materialLibraries );\n\n\t\t\t} else if ( this.regexp.material_library_pattern.test( line ) ) {\n\n\t\t\t\t// mtl file\n\n\t\t\t\tstate.materialLibraries.push( line.substring( 7 ).trim() );\n\n\t\t\t} else if ( ( result = this.regexp.smoothing_pattern.exec( line ) ) !== null ) {\n\n\t\t\t\t// smooth shading\n\n\t\t\t\t// @todo Handle files that have varying smooth values for a set of faces inside one geometry,\n\t\t\t\t// but does not define a usemtl for each face set.\n\t\t\t\t// This should be detected and a dummy material created (later MultiMaterial and geometry groups).\n\t\t\t\t// This requires some care to not create extra material on each smooth value for \"normal\" obj files.\n\t\t\t\t// where explicit usemtl defines geometry groups.\n\t\t\t\t// Example asset: examples/models/obj/cerberus/Cerberus.obj\n\n\t\t\t\tvar value = result[ 1 ].trim().toLowerCase();\n\t\t\t\tstate.object.smooth = ( value === '1' || value === 'on' );\n\n\t\t\t\tvar material = state.object.currentMaterial();\n\t\t\t\tif ( material ) {\n\n\t\t\t\t\tmaterial.smooth = state.object.smooth;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Handle null terminated files without exception\n\t\t\t\tif ( line === '\\0' ) continue;\n\n\t\t\t\tthrow new Error( \"Unexpected line: '\" + line  + \"'\" );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.finalize();\n\n\t\tvar container = new THREE.Group();\n\t\tcontainer.materialLibraries = [].concat( state.materialLibraries );\n\n\t\tfor ( var i = 0, l = state.objects.length; i < l; i ++ ) {\n\n\t\t\tvar object = state.objects[ i ];\n\t\t\tvar geometry = object.geometry;\n\t\t\tvar materials = object.materials;\n\t\t\tvar isLine = ( geometry.type === 'Line' );\n\n\t\t\t// Skip o/g line declarations that did not follow with any faces\n\t\t\tif ( geometry.vertices.length === 0 ) continue;\n\n\t\t\tvar buffergeometry = new THREE.BufferGeometry();\n\n\t\t\tbuffergeometry.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( geometry.vertices ), 3 ) );\n\n\t\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\t\tbuffergeometry.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( geometry.normals ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\tbuffergeometry.computeVertexNormals();\n\n\t\t\t}\n\n\t\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\t\tbuffergeometry.addAttribute( 'uv', new THREE.BufferAttribute( new Float32Array( geometry.uvs ), 2 ) );\n\n\t\t\t}\n\n\t\t\t// Create materials\n\n\t\t\tvar createdMaterials = [];\n\n\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\n\n\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\tvar material = undefined;\n\n\t\t\t\tif ( this.materials !== null ) {\n\n\t\t\t\t\tmaterial = this.materials.create( sourceMaterial.name );\n\n\t\t\t\t\t// mtl etc. loaders probably can't create line materials correctly, copy properties to a line material.\n\t\t\t\t\tif ( isLine && material && ! ( material instanceof THREE.LineBasicMaterial ) ) {\n\n\t\t\t\t\t\tvar materialLine = new THREE.LineBasicMaterial();\n\t\t\t\t\t\tmaterialLine.copy( material );\n\t\t\t\t\t\tmaterial = materialLine;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! material ) {\n\n\t\t\t\t\tmaterial = ( ! isLine ? new THREE.MeshPhongMaterial() : new THREE.LineBasicMaterial() );\n\t\t\t\t\tmaterial.name = sourceMaterial.name;\n\n\t\t\t\t}\n\n\t\t\t\tmaterial.shading = sourceMaterial.smooth ? THREE.SmoothShading : THREE.FlatShading;\n\n\t\t\t\tcreatedMaterials.push(material);\n\n\t\t\t}\n\n\t\t\t// Create mesh\n\n\t\t\tvar mesh;\n\n\t\t\tif ( createdMaterials.length > 1 ) {\n\n\t\t\t\tfor ( var mi = 0, miLen = materials.length; mi < miLen ; mi++ ) {\n\n\t\t\t\t\tvar sourceMaterial = materials[mi];\n\t\t\t\t\tbuffergeometry.addGroup( sourceMaterial.groupStart, sourceMaterial.groupCount, mi );\n\n\t\t\t\t}\n\n\t\t\t\tvar multiMaterial = new THREE.MultiMaterial( createdMaterials );\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, multiMaterial ) : new THREE.LineSegments( buffergeometry, multiMaterial ) );\n\n\t\t\t} else {\n\n\t\t\t\tmesh = ( ! isLine ? new THREE.Mesh( buffergeometry, createdMaterials[ 0 ] ) : new THREE.LineSegments( buffergeometry, createdMaterials[ 0 ] ) );\n\t\t\t}\n\n\t\t\tmesh.name = object.name;\n\n\t\t\tcontainer.add( mesh );\n\n\t\t}\n\n\t\tconsole.timeEnd( 'OBJLoader' );\n\n\t\treturn container;\n\n\t}\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/translators/utils/objLoader.js\n **/","import { get, find } from './modules/scene';\nimport { queueAnimation, removeAnimation } from './modules/animation';\n\nexport function startAutoRotate(store) {\n  const player = get(store, {scene: true, evalPlug: 'Player'});\n  const id = player && player.getIn(['autoRotateNode','id']);\n\n  if (!player || !player.get('autoRotate') || !id) return false;\n\n  const increment = player.get('autoRotateDirection') === '+' ? 360 : -360;\n  const path = find(store, {id, plug: 'Transform', property: 'rotation'});\n  const rotation = get(store, {id, evalPlug: 'Transform', property: 'rotation'});\n\n  if (path && rotation) {\n    store.dispatch(queueAnimation({\n      name: 'autoRotate',\n      autoplay: true,\n      iterations: Infinity,\n      easingDuration: 3000,\n      tracks: [{\n        path,\n        start: 0,\n        duration: player.get('autoRotateSpeed')*1000,\n        value: { x:rotation.x, y: rotation.y+increment, z:rotation.z}\n      }],\n    }));\n  }\n};\n\nexport function stopAutoRotate(store) {\n  store.dispatch(removeAnimation('autoRotate'));\n};\n\nexport function autoRotateTool(store) {\n  let startingTimeout;\n\n  const tool = {\n    start: (timeout=5000) => {\n      startingTimeout = setTimeout(() => {\n        startAutoRotate(store);\n      }, timeout);\n    },\n    stop: ()  => {\n      stopAutoRotate(store);\n      clearTimeout(startingTimeout);\n    },\n    mousedown: () => tool.stop(),\n    mouseup: () => tool.start()\n  };\n  return tool;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/autoRotate.js\n **/"],"sourceRoot":""}