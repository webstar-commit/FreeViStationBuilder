!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.claraplayer=t():e.claraplayer=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r=window.webpackJsonp_name_;window.webpackJsonp_name_=function(t,n,a){for(var o,s,u=0,l=[];u<t.length;u++)s=t[u],i[s]&&l.push(i[s][0]),i[s]=0;for(o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);for(r&&r(t,n,a);l.length;)l.shift()()};var n={},i={1:0};return t.e=function(e){function r(){s.onerror=s.onload=null,clearTimeout(u);var t=i[e];0!==t&&(t&&t[1](new Error("Loading chunk "+e+" failed.")),i[e]=void 0)}var n=i[e];if(0===n)return new Promise(function(e){e()});if(n)return n[2];var a=new Promise(function(t,r){n=i[e]=[t,r]});n[2]=a;var o=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,t.nc&&s.setAttribute("nonce",t.nc),s.src=t.p+""+({0:"configuratorui"}[e]||e)+"."+{0:"b580cbf4bdd33665192f"}[e]+".min.js";var u=setTimeout(r,12e4);return s.onerror=s.onload=r,o.appendChild(s),a},t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t.oe=function(e){throw console.error(e),e},t(t.s=720)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){this.x=e||0,this.y=t||0}function a(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function o(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}function s(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function u(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function l(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function c(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function f(e,t){this.start=void 0!==e?e:new s,this.end=void 0!==t?t:new s}function d(e,t){this.normal=void 0!==e?e:new s(1,0,0),this.constant=void 0!==t?t:0}function h(e,t,r){this.a=void 0!==e?e:new s,this.b=void 0!==t?t:new s,this.c=void 0!==r?r:new s}function p(e,t){this.center=void 0!==e?e:new s,this.radius=void 0!==t?t:0}function g(e,t){this.min=void 0!==e?e:new s(1/0,1/0,1/0),this.max=void 0!==t?t:new s(-1/0,-1/0,-1/0)}function m(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||m.DefaultOrder}function v(e,t){this.origin=void 0!==e?e:new s,this.direction=void 0!==t?t:new s}function y(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}var M=r(259),w=n(M),x=r(2),b=n(x);Object.defineProperty(t,"__esModule",{value:!0}),i.prototype={constructor:i,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new i,t=new i),e.set(r,r),t.set(n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*r-a*n+e.x,this.y=i*n+a*r+e.y,this}};var T={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),n=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?r[i]="-":14===i?r[i]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,r[i]=t[19===i?3&e|8:e]);return r.join("")}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*T.DEG2RAD},radToDeg:function(e){return e*T.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};a.prototype={constructor:a,isMatrix4:!0,set:function(e,t,r,n,i,a,o,s,u,l,c,f,d,h,p,g){var m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=n,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=f,m[3]=d,m[7]=h,m[11]=p,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new a).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new s);var r=this.elements,n=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[8]=n[8]*o,r[9]=n[9]*o,r[10]=n[10]*o,this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(n),u=Math.sin(n),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var f=a*l,d=a*c,h=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=d+h*u,t[5]=f-p*u,t[9]=-o*s,t[2]=p-f*u,t[6]=h+d*u,t[10]=a*s}else if("YXZ"===e.order){var g=s*l,m=s*c,v=u*l,y=u*c;t[0]=g+y*o,t[4]=v*o-m,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=m*o-v,t[6]=y+g*o,t[10]=a*s}else if("ZXY"===e.order){var g=s*l,m=s*c,v=u*l,y=u*c;t[0]=g-y*o,t[4]=-a*c,t[8]=v+m*o,t[1]=m+v*o,t[5]=a*l,t[9]=y-g*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var f=a*l,d=a*c,h=o*l,p=o*c;t[0]=s*l,t[4]=h*u-d,t[8]=f*u+p,t[1]=s*c,t[5]=p*u+f,t[9]=d*u-h,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var M=a*s,w=a*u,x=o*s,b=o*u;t[0]=s*l,t[4]=b-M*c,t[8]=x*c+w,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=w*c+x,t[10]=M-b*c}else if("XZY"===e.order){var M=a*s,w=a*u,x=o*s,b=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=M*c+b,t[5]=a*l,t[9]=w*c-x,t[2]=x*c-w,t[6]=o*l,t[10]=b*c+M}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z,a=e.w,o=r+r,s=n+n,u=i+i,l=r*o,c=r*s,f=r*u,d=n*s,h=n*u,p=i*u,g=a*o,m=a*s,v=a*u;return t[0]=1-(d+p),t[4]=c-v,t[8]=f+m,t[1]=c+v,t[5]=1-(l+p),t[9]=h-g,t[2]=f-m,t[6]=h+g,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,r;return function(n,i,a){void 0===e&&(e=new s,t=new s,r=new s);var o=this.elements;return r.subVectors(n,i).normalize(),0===r.lengthSq()&&(r.z=1),e.crossVectors(a,r).normalize(),0===e.lengthSq()&&(r.z+=1e-4,e.crossVectors(a,r).normalize()),t.crossVectors(r,e),o[0]=e.x,o[4]=t.x,o[8]=r.x,o[1]=e.y,o[5]=t.y,o[9]=r.y,o[2]=e.z,o[6]=t.z,o[10]=r.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[4],s=r[8],u=r[12],l=r[1],c=r[5],f=r[9],d=r[13],h=r[2],p=r[6],g=r[10],m=r[14],v=r[3],y=r[7],M=r[11],w=r[15],x=n[0],b=n[4],T=n[8],S=n[12],_=n[1],E=n[5],A=n[9],I=n[13],D=n[2],L=n[6],N=n[10],C=n[14],O=n[3],R=n[7],P=n[11],z=n[15];return i[0]=a*x+o*_+s*D+u*O,i[4]=a*b+o*E+s*L+u*R,i[8]=a*T+o*A+s*N+u*P,i[12]=a*S+o*I+s*C+u*z,i[1]=l*x+c*_+f*D+d*O,i[5]=l*b+c*E+f*L+d*R,i[9]=l*T+c*A+f*N+d*P,i[13]=l*S+c*I+f*C+d*z,i[2]=h*x+p*_+g*D+m*O,i[6]=h*b+p*E+g*L+m*R,i[10]=h*T+p*A+g*N+m*P,i[14]=h*S+p*I+g*C+m*z,i[3]=v*x+y*_+M*D+w*O,i[7]=v*b+y*E+M*L+w*R,i[11]=v*T+y*A+M*N+w*P,i[15]=v*S+y*I+M*C+w*z,this},multiplyToArray:function(e,t,r){var n=this.elements;return this.multiplyMatrices(e,t),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new s);for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],f=e[10],d=e[14];return e[3]*(+i*s*c-n*u*c-i*o*f+r*u*f+n*o*d-r*s*d)+e[7]*(+t*s*d-t*u*f+i*a*f-n*a*d+n*u*l-i*s*l)+e[11]*(+t*u*c-t*o*d-i*a*c+r*a*d+i*o*l-r*u*l)+e[15]*(-n*o*l-t*s*c+t*o*f+n*a*c-r*a*f+r*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],l=n[5],c=n[6],f=n[7],d=n[8],h=n[9],p=n[10],g=n[11],m=n[12],v=n[13],y=n[14],M=n[15],w=h*y*f-v*p*f+v*c*g-l*y*g-h*c*M+l*p*M,x=m*p*f-d*y*f-m*c*g+u*y*g+d*c*M-u*p*M,b=d*v*f-m*h*f+m*l*g-u*v*g-d*l*M+u*h*M,T=m*h*c-d*v*c-m*l*p+u*v*p+d*l*y-u*h*y,S=i*w+a*x+o*b+s*T;if(0===S){var _="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(_);return console.warn(_),this.identity()}var E=1/S;return r[0]=w*E,r[1]=(v*p*s-h*y*s-v*o*g+a*y*g+h*o*M-a*p*M)*E,r[2]=(l*y*s-v*c*s+v*o*f-a*y*f-l*o*M+a*c*M)*E,r[3]=(h*c*s-l*p*s-h*o*f+a*p*f+l*o*g-a*c*g)*E,r[4]=x*E,r[5]=(d*y*s-m*p*s+m*o*g-i*y*g-d*o*M+i*p*M)*E,r[6]=(m*c*s-u*y*s-m*o*f+i*y*f+u*o*M-i*c*M)*E,r[7]=(u*p*s-d*c*s+d*o*f-i*p*f-u*o*g+i*c*g)*E,r[8]=b*E,r[9]=(m*h*s-d*v*s-m*a*g+i*v*g+d*a*M-i*h*M)*E,r[10]=(u*v*s-m*l*s+m*a*f-i*v*f-u*a*M+i*l*M)*E,r[11]=(d*l*s-u*h*s-d*a*f+i*h*f+u*a*g-i*l*g)*E,r[12]=T*E,r[13]=(d*v*o-m*h*o+m*a*p-i*v*p-d*a*y+i*h*y)*E,r[14]=(m*l*o-u*v*o-m*a*c+i*v*c+u*a*y-i*l*y)*E,r[15]=(u*h*o-d*l*o+d*a*c-i*h*c-u*a*p+i*l*p)*E,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+r,u*o-n*s,u*s+n*o,0,u*o+n*s,l*o+r,l*s-n*a,0,u*s-n*o,l*s+n*a,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r,n){return this.set(1,e,t,0,0,1,r,0,0,0,1,0,0,0,0,1),n&&this.transpose(),this},compose:function(e,t,r,n){return this.makeRotationFromQuaternion(t),n&&this.multiply((new a).makeShear(n.x,n.y,n.z)),this.scale(r),this.setPosition(e),this},decompose:function(){var e,t;return function(r,n,i,o){if(o)return this.decompose2(r,n,i,o);void 0===e&&(e=new s,t=new a);var u=this.elements,l=e.set(u[0],u[1],u[2]).length(),c=e.set(u[4],u[5],u[6]).length(),f=e.set(u[8],u[9],u[10]).length();this.determinant()<0&&(l=-l),r.x=u[12],r.y=u[13],r.z=u[14],t.elements.set(this.elements);var d=1/l,h=1/c,p=1/f;return t.elements[0]*=d,t.elements[1]*=d,t.elements[2]*=d,t.elements[4]*=h,t.elements[5]*=h,t.elements[6]*=h,t.elements[8]*=p,t.elements[9]*=p,t.elements[10]*=p,n.setFromRotationMatrix(t),i.x=l,i.y=c,i.z=f,this}}(),decompose2:function(){return function(e,t,r,n){var i=this.clone();if(i[3]=0,i[7]=0,i[11]=0,i[15]=1,0===i.determinant())return console.error("THREE.Matrix4.decompose2(): Cannot apply decompose2 on singular matrix"),this;var o=(new a).copy(this),u=o.elements;e.set(u[12],u[13],u[14]),u[12]=u[13]=u[14]=0;var l=new s(u[0],u[1],u[2]),c=new s(u[4],u[5],u[6]),f=new s(u[8],u[9],u[10]);return r.setX(l.length()),l.divideScalar(r.x),n.setX(l.dot(c)),c.sub(l.clone().multiplyScalar(n.x)),r.setY(c.length()),c.divideScalar(r.y),n.setX(n.x/r.y),n.setY(l.dot(f)),f.sub(l.clone().multiplyScalar(n.y)),n.setZ(c.dot(f)),f.sub(c.clone().multiplyScalar(n.z)),r.setZ(f.length()),f.divideScalar(r.z),n.setY(n.y/r.z),n.setZ(n.z/r.z),u[0]=l.x,u[4]=c.x,u[8]=f.x,u[1]=l.y,u[5]=c.y,u[9]=f.y,u[2]=l.z,u[6]=c.z,u[10]=f.z,l.dot((new s).crossVectors(c,f))<0&&(r.multiplyScalar(-1),o.multiplyScalar(-1)),t.setFromRotationMatrix(o),this}}(),makePerspective:function(e,t,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),u=2*i/(r-n),l=(t+e)/(t-e),c=(r+n)/(r-n),f=-(a+i)/(a-i),d=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,r,n,i,a){var o=this.elements,s=1/(t-e),u=1/(r-n),l=1/(a-i),c=(t+e)*s,f=(r+n)*u,d=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},o.prototype={constructor:o,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=Math.cos(e._x/2),n=Math.cos(e._y/2),i=Math.cos(e._z/2),a=Math.sin(e._x/2),o=Math.sin(e._y/2),s=Math.sin(e._z/2),u=e.order;return"XYZ"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"YXZ"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"ZXY"===u?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"ZYX"===u?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"YZX"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i-a*o*s):"XZY"===u&&(this._x=a*n*i-r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i+a*o*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],u=r[9],l=r[2],c=r[6],f=r[10],d=n+s+f;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-u)*t,this._y=(a-l)*t,this._z=(o-i)*t):n>s&&n>f?(t=2*Math.sqrt(1+n-s-f),this._w=(c-u)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+l)/t):s>f?(t=2*Math.sqrt(1+s-n-f),this._w=(a-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+f-n-s),this._w=(o-i)/t,this._x=(a+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(r,n){return void 0===e&&(e=new s),t=r.dot(n)+1,t<1e-6?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=r*l+a*o+n*u-i*s,this._y=n*l+a*s+i*o-r*u,this._z=i*l+a*u+r*s-n*o,this._w=a*l-r*o-n*s-i*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,a=this._w,o=a*e._w+r*e._x+n*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,o),l=Math.sin((1-t)*u)/s,c=Math.sin(t*u)/s;return this._w=a*l+this._w*c,this._x=r*l+this._x*c,this._y=n*l+this._y*c,this._z=i*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},(0,b.default)(o,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,a,o){var s=r[n+0],u=r[n+1],l=r[n+2],c=r[n+3],f=i[a+0],d=i[a+1],h=i[a+2],p=i[a+3];if(c!==p||s!==f||u!==d||l!==h){var g=1-o,m=s*f+u*d+l*h+c*p,v=m>=0?1:-1,y=1-m*m;if(y>w.default){var M=Math.sqrt(y),x=Math.atan2(M,m*v);g=Math.sin(g*x)/M,o=Math.sin(o*x)/M}var b=o*v;if(s=s*g+f*b,u=u*g+d*b,l=l*g+h*b,c=c*g+p*b,g===1-o){var T=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=T,u*=T,l*=T,c*=T}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),s.prototype={constructor:s,isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return!1===(t&&t.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new o),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e;return function(t,r){return void 0===e&&(e=new o),this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;this.x=i[0]*t+i[4]*r+i[8]*n+i[12],this.y=i[1]*t+i[5]*r+i[9]*n+i[13],this.z=i[2]*t+i[6]*r+i[10]*n+i[14];var a=i[3]*t+i[7]*r+i[11]*n+i[15];return this.divideScalar(a)},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*n-o*r,l=s*r+o*t-i*n,c=s*n+i*r-a*t,f=-i*t-a*r-o*n;return this.x=u*s+f*-i+l*-o-c*-a,this.y=l*s+f*-a+c*-i-u*-o,this.z=c*s+f*-o+u*-a-l*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new a),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new a),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new s,t=new s),e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,n=this.y,i=this.z;return this.x=n*e.z-i*e.y,this.y=i*e.x-r*e.z,this.z=r*e.y-n*e.x,this},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new s),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new s),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(T.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var r=e;e=t,t=r}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},u.prototype={constructor:u,isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*t+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*t+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*t+a[7]*r+a[11]*n+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,a=e.elements,o=a[0],s=a[4],u=a[8],l=a[1],c=a[5],f=a[9],d=a[2],h=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(u-d)<.01&&Math.abs(f-h)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+d)<.1&&Math.abs(f+h)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var g=(o+1)/2,m=(c+1)/2,v=(p+1)/2,y=(s+l)/4,M=(u+d)/4,w=(f+h)/4;return g>m&&g>v?g<.01?(r=0,n=.707106781,i=.707106781):(r=Math.sqrt(g),n=y/r,i=M/r):m>v?m<.01?(r=.707106781,n=0,i=.707106781):(n=Math.sqrt(m),r=y/n,i=w/n):v<.01?(r=.707106781,n=.707106781,i=0):(i=Math.sqrt(v),r=M/i,n=w/i),this.set(r,n,i,t),this}var x=Math.sqrt((h-f)*(h-f)+(u-d)*(u-d)+(l-s)*(l-s));return Math.abs(x)<.001&&(x=1),this.x=(h-f)/x,this.y=(u-d)/x,this.z=(l-s)/x,this.w=Math.acos((o+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new u,t=new u),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},l.prototype={constructor:l,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,n){if(t=T.euclideanModulo(t,1),r=T.clamp(r,0,1),n=T.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,u=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(o,s,u)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=r[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&e.length>0){var l=S[e];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,n=e||{h:0,s:0,l:0},i=this.r,a=this.g,o=this.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)t=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:t=(a-o)/c+(a<o?6:0);break;case a:t=(o-i)/c+2;break;case o:t=(i-a)/c+4}t/=6}return n.h=t,n.s=r,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var S={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c.prototype={constructor:c,isMatrix3:!0,set:function(e,t,r,n,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=n,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=r,l[7]=a,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new s);for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-r*i*l+r*o*s+n*i*u-n*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=r[6],f=r[7],d=r[8],h=d*u-l*f,p=l*c-d*s,g=f*s-u*c,m=i*h+a*p+o*g;if(0===m){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/m;return n[0]=h*y,n[1]=(o*f-d*a)*y,n[2]=(l*a-o*u)*y,n[3]=p*y,n[4]=(d*i-o*c)*y,n[5]=(o*s-l*i)*y,n[6]=g*y,n[7]=(a*c-f*i)*y,n[8]=(u*i-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}},f.prototype={constructor:f,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new s).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new s).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new s;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new s,t=new s;return function(r,n){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),a=t.dot(e),o=a/i;return n&&(o=T.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t),i=r||new s;return this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},d.prototype={constructor:d,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new s,t=new s;return function(r,n,i){var a=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e);return(t||new s).copy(this.normal).multiplyScalar(r)},intersectLine:function(){var e=new s;return function(t,r){var n=r||new s,i=t.delta(e),a=this.normal.dot(i);if(0!==a){var o=-(t.start.dot(this.normal)+this.constant)/a;if(!(o<0||o>1))return n.copy(i).multiplyScalar(o).add(t.start)}else if(0===this.distanceToPoint(t.start))return n.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new s).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new s,t=new c;return function(r,n){var i=this.coplanarPoint(e).applyMatrix4(r),a=n||t.getNormalMatrix(r),o=this.normal.applyMatrix3(a).normalize();return this.constant=-i.dot(o),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},h.normal=function(){var e=new s;return function(t,r,n,i){var a=i||new s;a.subVectors(n,r),e.subVectors(t,r),a.cross(e);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}}(),h.barycoordFromPoint=function(){var e=new s,t=new s,r=new s;return function(n,i,a,o,u){e.subVectors(o,i),t.subVectors(a,i),r.subVectors(n,i);var l=e.dot(e),c=e.dot(t),f=e.dot(r),d=t.dot(t),h=t.dot(r),p=l*d-c*c,g=u||new s;if(0===p)return g.set(-2,-1,-1);var m=1/p,v=(d*f-c*h)*m,y=(l*h-c*f)*m;return g.set(1-v-y,y,v)}}(),h.containsPoint=function(){var e=new s;return function(t,r,n,i){var a=h.barycoordFromPoint(t,r,n,i,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),h.prototype={constructor:h,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new s,t=new s;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new s).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return h.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new d).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return h.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return h.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,r,n;return function(i,a){void 0===e&&(e=new d,t=[new f,new f,new f],r=new s,n=new s);var o=a||new s,u=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,r),!0===this.containsPoint(r))o.copy(r);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(r,!0,n);var c=r.distanceToSquared(n);c<u&&(u=c,o.copy(n))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},p.prototype={constructor:p,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new g;return function(t,r){var n=this.center;void 0!==r?n.copy(r):e.setFromPoints(t).getCenter(n);for(var i=0,a=0,o=t.length;a<o;a++)i=Math.max(i,n.distanceToSquared(t[a]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),n=t||new s;return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new g;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},g.prototype={constructor:g,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],f=e[s+2];l<t&&(t=l),c<r&&(r=c),f<n&&(n=f),l>i&&(i=l),c>a&&(a=c),f>o&&(o=f)}this.min.set(t,r,n),this.max.set(i,a,o)},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),f=e.getZ(s);l<t&&(t=l),c<r&&(r=c),f<n&&(n=f),l>i&&(i=l),c>a&&(a=c),f>o&&(o=f)}this.min.set(t,r,n),this.max.set(i,a,o)},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new s;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(){var e=new s;return function(t){var r=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var n,i,a=t.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(n=0,i=o.length;n<i;n++)e.copy(o[n]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++)e.fromBufferAttribute(s,n).applyMatrix4(t.matrixWorld),r.expandByPoint(e)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new s;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new s;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new s).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e;return function(t){return void 0===e&&(e=new s),this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},clampPoint:function(e,t){return(t||new s).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new s;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new s;return function(t){var r=t||new p;return this.getCenter(r.center),r.radius=.5*this.getSize(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new s,new s,new s,new s,new s,new s,new s,new s];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},m.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],m.DefaultOrder="XYZ",m.prototype={constructor:m,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=T.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],u=i[1],l=i[5],c=i[9],f=i[2],d=i[6],h=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,h),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-f,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===t?(this._y=Math.asin(-n(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(d,h),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(s,h))):"XZY"===t?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,h),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,r,n){return void 0===e&&(e=new a),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new o;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new s(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},v.prototype={constructor:v,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new s).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new s;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new s;r.subVectors(e,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new s;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new s,t=new s,r=new s;return function(n,i,a,o){e.copy(n).add(i).multiplyScalar(.5),t.copy(i).sub(n).normalize(),r.copy(this.origin).sub(e);var s,u,l,c,f=.5*n.distanceTo(i),d=-this.direction.dot(t),h=r.dot(this.direction),p=-r.dot(t),g=r.lengthSq(),m=Math.abs(1-d*d);if(m>0)if(s=d*p-h,u=d*h-p,c=f*m,s>=0)if(u>=-c)if(u<=c){var v=1/m;s*=v,u*=v,l=s*(s+d*u+2*h)+u*(d*s+u+2*p)+g}else u=f,s=Math.max(0,-(d*u+h)),l=-s*s+u*(u+2*p)+g;else u=-f,s=Math.max(0,-(d*u+h)),l=-s*s+u*(u+2*p)+g;else u<=-c?(s=Math.max(0,-(-d*f+h)),u=s>0?-f:Math.min(Math.max(-f,-p),f),l=-s*s+u*(u+2*p)+g):u<=c?(s=0,u=Math.min(Math.max(-f,-p),f),l=u*(u+2*p)+g):(s=Math.max(0,-(d*f+h)),u=s>0?f:Math.min(Math.max(-f,-p),f),l=-s*s+u*(u+2*p)+g);else u=d>0?-f:f,s=Math.max(0,-(d*u+h)),l=-s*s+u*(u+2*p)+g;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(t).multiplyScalar(u).add(e),l}}(),intersectSphere:function(){var e=new s;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,a=t.radius*t.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=n-o,u=n+o;return s<0&&u<0?null:s<0?this.at(u,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,n=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,n=(e.min.x-f.x)*u),l>=0?(i=(e.min.y-f.y)*l,a=(e.max.y-f.y)*l):(i=(e.max.y-f.y)*l,a=(e.min.y-f.y)*l),r>a||i>n?null:((i>r||r!==r)&&(r=i),(a<n||n!==n)&&(n=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),r>s||o>n?null:((o>r||r!==r)&&(r=o),(s<n||n!==n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:function(){var e=new s;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new s,t=new s,r=new s,n=new s;return function(i,a,o,s,u){t.subVectors(a,i),r.subVectors(o,i),n.crossVectors(t,r);var l,c=this.direction.dot(n);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,i);var f=l*this.direction.dot(r.crossVectors(e,r));if(f<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0)return null;if(f+d>c)return null;var h=-l*e.dot(n);return h<0?null:this.at(h/c,u)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},y.prototype={constructor:y,set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(T.clamp(e.y/this.radius,-1,1))),this}};var _={LEFT:0,MIDDLE:1,RIGHT:2};i.InstanceScalarSize=2,s.InstanceScalarSize=3,u.InstanceScalarSize=4,l.InstanceScalarSize=3,o.InstanceScalarSize=4,c.InstanceScalarSize=9,a.InstanceScalarSize=16,l.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},t.Matrix4=a,t.Matrix3=c,t.Vector2=i,t.Vector3=s,t.Vector4=u,t.Quaternion=o,t.Color=l,t.Triangle=h,t.Box3=g,t.Euler=m,t.Math=T,t.Ray=v,t.Spherical=y,t.Sphere=p,t.Plane=d,t.REVISION="84-threekit",t.MOUSE=_,t.CullFaceNone=0,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.FrontFaceDirectionCW=0,t.FrontFaceDirectionCCW=1,t.BasicShadowMap=0,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PCSSSoftShadowMap=3,t.FrontSide=0,t.BackSide=1,t.DoubleSide=2,t.FlatShading=1,t.SmoothShading=2,t.NoColors=0,t.FaceColors=1,t.VertexColors=2,t.NoBlending=0,t.NormalBlending=1,t.AdditiveBlending=2,t.SubtractiveBlending=3,t.MultiplyBlending=4,t.CustomBlending=5,t.AddEquation=100,t.SubtractEquation=101,t.ReverseSubtractEquation=102,t.MinEquation=103,t.MaxEquation=104,t.ZeroFactor=200,t.OneFactor=201,t.SrcColorFactor=202,t.OneMinusSrcColorFactor=203,t.SrcAlphaFactor=204,t.OneMinusSrcAlphaFactor=205,t.DstAlphaFactor=206,t.OneMinusDstAlphaFactor=207,t.DstColorFactor=208,t.OneMinusDstColorFactor=209,t.SrcAlphaSaturateFactor=210,t.NeverDepth=0,t.AlwaysDepth=1,t.LessDepth=2,t.LessEqualDepth=3,t.EqualDepth=4,t.GreaterEqualDepth=5,t.GreaterDepth=6,t.NotEqualDepth=7,t.MultiplyOperation=0,t.MixOperation=1,t.AddOperation=2,t.NoToneMapping=0,t.LinearToneMapping=1,t.ReinhardToneMapping=2,t.Uncharted2ToneMapping=3,t.CineonToneMapping=4,t.UVMapping=300,t.CubeReflectionMapping=301,t.CubeRefractionMapping=302,t.EquirectangularReflectionMapping=303,t.EquirectangularRefractionMapping=304,t.SphericalReflectionMapping=305,t.CubeUVReflectionMapping=306,t.CubeUVRefractionMapping=307,t.RepeatWrapping=1e3,t.ClampToEdgeWrapping=1001,t.MirroredRepeatWrapping=1002,t.NearestFilter=1003,t.NearestMipMapNearestFilter=1004,t.NearestMipMapLinearFilter=1005,t.LinearFilter=1006,t.LinearMipMapNearestFilter=1007,t.LinearMipMapLinearFilter=1008,t.UnsignedByteType=1009,t.ByteType=1010,t.ShortType=1011,t.UnsignedShortType=1012,t.IntType=1013,t.UnsignedIntType=1014,t.FloatType=1015,t.HalfFloatType=1016,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedInt248Type=1020,t.AlphaFormat=1021,t.RGBFormat=1022,t.RGBAFormat=1023,t.LuminanceFormat=1024,t.LuminanceAlphaFormat=1025,t.RGBEFormat=1023,t.DepthFormat=1026,t.DepthStencilFormat=1027,t.RGB_S3TC_DXT1_Format=2001,t.RGBA_S3TC_DXT1_Format=2002,t.RGBA_S3TC_DXT3_Format=2003,t.RGBA_S3TC_DXT5_Format=2004,t.RGB_PVRTC_4BPPV1_Format=2100,t.RGB_PVRTC_2BPPV1_Format=2101,t.RGBA_PVRTC_4BPPV1_Format=2102,t.RGBA_PVRTC_2BPPV1_Format=2103,t.RGB_ETC1_Format=2151,t.LoopOnce=2200,t.LoopRepeat=2201,t.LoopPingPong=2202,t.InterpolateDiscrete=2300,t.InterpolateLinear=2301,t.InterpolateSmooth=2302,t.ZeroCurvatureEnding=2400,t.ZeroSlopeEnding=2401,t.WrapAroundEnding=2402,t.TrianglesDrawMode=0,t.TriangleStripDrawMode=1,t.TriangleFanDrawMode=2,t.LinearEncoding=3e3,t.sRGBEncoding=3001,t.GammaEncoding=3007,t.RGBEEncoding=3002,t.LogLuvEncoding=3003,t.RGBM7Encoding=3004,t.RGBM16Encoding=3005,t.RGBDEncoding=3006,t.BasicDepthPacking=3200,t.RGBADepthPacking=3201,t.OrderIndependentTransperancy=3300,t.PaintersTransperancy=3301},function(e,t,r){var n=r(13),i=r(113),a=r(42),o=r(64),s=r(52),u=function(e,t,r){var l,c,f,d,h=e&u.F,p=e&u.G,g=e&u.S,m=e&u.P,v=e&u.B,y=p?n:g?n[t]||(n[t]={}):(n[t]||{}).prototype,M=p?i:i[t]||(i[t]={}),w=M.prototype||(M.prototype={});p&&(r=t);for(l in r)c=!h&&y&&void 0!==y[l],f=(c?y:r)[l],d=v&&c?s(f,n):m&&"function"==typeof f?s(Function.call,f):f,y&&o(y,l,f,e&u.U),M[l]!=f&&a(M,l,d),m&&w[l]!=f&&(w[l]=f)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,r){e.exports={default:r(519),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n){var i=e.InstanceScalarSize||n,a=n||i,o=null!==t?t*a:null;if(void 0===i||void 0===a)throw Error("Can't determine element size / stride!");var s=r||Float32Array,u=c.default.maybeCreate(s,o);d.default.call(this,u,t||(u.length+a-i)/a|0),this.type=e,this.stride=a,this.elementSize=i,this.tempBuffer=new Float32Array(i)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(48),o=n(a),s=r(2),u=n(s);t.default=i;var l=r(34),c=n(l),f=r(227),d=n(f),h=r(68),p=n(h);i.prototype=(0,u.default)((0,o.default)(d.default.prototype),{constructor:i,getAt:function(e,t){return(t||new this.type).fromArray(this.data,e*this.stride)},setAt:function(e,t){t.toArray(this.data,e*this.stride)},addAt:function(e,t){t.toArray(this.tempBuffer,0);for(var r=0,n=e*this.stride;r<this.elementSize;r++)this.data[n+r]+=this.tempBuffer[r]},multiplyScalarAt:function(e,t){for(var r=0,n=e*this.stride;r<this.elementSize;r++)this.data[n+r]*=t},newCompatibleView:function(e,t){return new i(this.type,t||null,e,this.stride)},newCompatibleBuffer:function(){return new p.default(this.type,this.data.constructor,this.stride)}}),i.fromObjects=function(e,t,r){var n=new i(e,t.length,r);return c.default.copyObjects(t,n.data),n}},function(e,t,r){e.exports={default:r(525),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){e?(e.colorMaps||console.error("Polymesh must have initialized colorMaps container."),e.uvMaps||console.error("Polymesh must have initialized uvMaps container."),this.faceRangeOffsets=e.faceRangeOffsets,this.positions=e.positions,this.normalMap=e.normalMap,this.uvMaps=c.default.shallowClone(e.uvMaps),e.tangentMap&&(this.tangentMap=e.tangentMap),e.skinning&&(this.skinning=e.skinning),e.edgeCreaseWeights&&(this.edgeCreaseWeights=e.edgeCreaseWeights),e.materialIds&&(this.materialIds=e.materialIds),e.blendShapes&&(this.blendShapes=e.blendShapes),this.colorMaps=c.default.shallowClone(e.colorMaps),t&&(0,o.default)(this,t)):(this.faceRangeOffsets=new Uint32Array(1),this.positions=new w.default,this.colorMaps=new c.default,this.uvMaps=new c.default),this._cachedVolume=null,this.boundingBox=(0,h.default)(this.positions),this._faceNormals=null}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a);t.default=i;var s=r(304),u=n(s),l=(r(0),r(18)),c=n(l),f=r(3),d=(n(f),r(430)),h=n(d),p=r(427),g=n(p),m=r(102),v=(n(m),r(31)),y=n(v),M=r(6),w=n(M),x=r(232),b=n(x),T=r(440),S=n(T),_=r(233);r(50);i.prototype={constructor:i,getNumFaces:function(){return this.faceRangeOffsets.length-1},getNumFaceVertices:function(){return this.positions.faceValueIndices.length},getNumVertices:function(){return this.positions.values.length},getMapById:function(e){return y.default.resolveMap(this,e)||null},topologyChanged:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.skinning&&(this.skinning=null),this.edgeCreaseWeights&&(this.edgeCreaseWeights=null),this.materialIds&&!e&&(this.materialIds=null),this},getVolume:function(){return null===this._cachedVolume&&(this._cachedVolume=(0,g.default)(this)),this._cachedVolume},get faceNormals(){return this._faceNormals||(this._faceNormals=new b.default(this.positions)),this._faceNormals}},i.fromData=function(e,t,r,n){var a=new i({faceRangeOffsets:e,positions:t.isPolyMap?t:w.default.fromData(e,r||null,t),uvMaps:new c.default,colorMaps:new c.default});return n&&(a.materialIds=n),a},i.fromShapeSet=function(e){for(var t=e.loopRangeOffsets.length-1,r=[0],n=[],a=[],o=0,s=e.loopRangeOffsets[0],l=0;l<t;++l){for(var f=e.loopRangeOffsets[l+1],d=(0,u.default)(e.positions.data.subarray(3*s,3*f),e.holeOffsets[l],3),h=s+e.backFaceOffsets,p=d.length,g=0;g<p;g+=3)o+=3,r.push(o),n.push(d[g]+s),n.push(d[g+1]+s),n.push(d[g+2]+s),a.push(_.SmoothingGroupIds.Front),o+=3,r.push(o),n.push(d[g]+h),n.push(d[g+2]+h),n.push(d[g+1]+h),a.push(_.SmoothingGroupIds.Back);s=f}for(var m=e.bevelSegments.length,v=0;v<m;v+=3)o+=3,r.push(o),n.push(e.bevelSegments[v]),n.push(e.bevelSegments[v+1]),n.push(e.bevelSegments[v+2]);a=a.concat(e.bevelSmoothingGroups);var y=new Uint32Array(r),M=new Uint32Array(n),x=w.default.fromData(y,M,e.positions),b={faceRangeOffsets:y,positions:x,normalMap:new c.default,uvMaps:new c.default,colorMaps:new c.default},T=new i(b);return T=(0,S.default)(T,a)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(e){this.faceRangeOffsets=e.faceRangeOffsets,this.faceValueIndices=e.faceValueIndices,this.values=e.values;var r=e.valueFaceIndices||null;this.valueFaceIndices=r,this.valueFaceIndexOffsets=r&&e.valueFaceIndexOffsets||null,this._edgeVertexAdjacency=null,this._faceEdgeAdjacency=null,this._valueAdjacency=null,this._valueValueAdjacency=null,this._faceFaceAdjacency=null,t&&(0,o.default)(this,t)}else this.faceRangeOffsets=new Uint32Array(1),this.faceValueIndices=new Uint32Array(0),this.values=new f.default(s.Vector3,0)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a);t.default=i;var s=r(0),u=r(124),l=n(u),c=r(3),f=n(c),d=r(34),h=n(d),p=r(422),g=n(p),m=r(423),v=n(m),y=r(425),M=n(y),w=r(424),x=n(w);i.fromData=function(e,t,r){var n=new i({faceRangeOffsets:e,faceValueIndices:t||l.default.identity(r.length,Uint32Array),values:r.repack(Float32Array)}),a=e[e.length-1];if(n.faceValueIndices.length!==a)throw Error("Number of postition indices or unindexed data values does not match the number of face vertices!");return n},i.prototype={constructor:i,isPolyMap:!0,findValueIndexOffset:function(e,t){for(var r=this.faceRangeOffsets,n=this.faceValueIndices,i=r[e],a=r[e+1],o=i;o!==a;++o)if(n[o]===t)return o;return-1},get edgeVertexAdjacency(){return this._edgeVertexAdjacency||(this._edgeVertexAdjacency=new g.default(this)),this._edgeVertexAdjacency},get faceEdgeAdjacency(){return this._faceEdgeAdjacency||(this._faceEdgeAdjacency=new v.default(this)),this._faceEdgeAdjacency},get valueAdjacency(){return this._valueAdjacency||(this._valueAdjacency=new M.default(this)),this._valueAdjacency},get valueValueAdjacency(){return this._valueValueAdjacency||(this._valueValueAdjacency=new ValueValueAdjacency(this)),this._valueValueAdjacency},get faceFaceAdjacency(){return this._faceFaceAdjacency||(this._faceFaceAdjacency=new x.default(this)),this._faceFaceAdjacency},updateInverseIndex:function(){if(null===this.valueFaceIndices){for(var e=this.faceRangeOffsets,t=-1,r=e[0],n=this.faceValueIndices,i=this._updateValueFaceIndexOffsets(),a=i.length,o=n.length,s=new Uint32Array(o),u=0;u!==o;++u)u===r&&(r=e[++t+1]),s[i[n[u]]++]=t;if(this.valueFaceIndices=s,0===i.byteOffset)throw Error("Invalid .valueFaceIndexOffsets != null!");this.valueFaceIndexOffsets=new Uint32Array(i.buffer,0,a)}return this},_updateValueFaceIndexOffsets:function(){var e=this.valueFaceIndexOffsets;if(null===e){var t=this.values.length,r=t+2,n=new Uint32Array(r),i=n.subarray(2);e=n.subarray(1),l.default.histogram(this.faceValueIndices,t,i),h.default.accumulate(i),this.valueFaceIndices=null,this.valueFaceIndexOffsets=e}return e},compactValues:function(){var e=this.values,t=e.length;if(0!==t){var r=new Uint32Array(t),n=this._compactFaceIndexOffsets(r);n!==t&&(this._compactData(r,n),this._compactIndices(r))}return this},_compactFaceIndexOffsets:function(e){for(var t=this._updateValueFaceIndexOffsets(),r=e.length,n=0,i=0,a=0;a!==r;++a){var o=t[a+1];e[a]=n,i!==o&&(n!==a&&(t[n]=i),i=o,++n)}if(t[n]=i,n!==r)if(0!==t.byteOffset){var s=new Uint32Array(t.buffer),u=h.default.slice(s,0,n+2);t=u.subarray(1)}else t=h.default.slice(t,0,n+1);return this.valueFaceIndexOffsets=t,n},_compactData:function(e,t){for(var r=this.values,n=r.length,i=new f.default(r.type,t),a=e[0],o=i.newRangeArray(),s=1;s!==n;++s){var u=e[s];a!==u&&(r.rangeToArray(s-1,1,o),i.arrayToRange(o,a,1),a=u)}r.rangeToArray(n-1,1,o),i.arrayToRange(o,a,1),this.values=i},_compactIndices:function(e){var t=this.faceValueIndices,r=t.length,n=new Uint32Array(r);l.default.apply(t,e,n),this.faceValueIndices=n}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=(0,F.buildQueryObject)(t),a=e.get("sceneGraph");if(n.id){var o=a.nodes[n.id];return o&&n.parent?o.parent||null:o&&n.child?(0,F.findChild)(e,o,{type:n.child,shallow:!0},!1,!0)||null:o?(0,F.getMatch)(o,n,r):null}if(n.from&&n.from.all){var s=void 0,u=!0,l=!1,c=void 0;try{for(var f,d=(0,j.default)((0,P.default)(a.nodes));!(u=(f=d.next()).done);u=!0){var h=f.value;if(s=(0,F.getMatch)(a.nodes[h],n))return s}}catch(e){l=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}return null}var p=n.from?i(e,n.from,!0):a.activeSceneId,g=p&&a.nodes[p];return g?(0,F.findChild)(e,g,n,n.includeParent&&g,r):null}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(0,F.buildQueryObject)(t),a=e.get("sceneGraph"),o=n.from?i(e,n.from):a.activeSceneId;if(!o)return[];var s=a.nodes[o];if(!s)throw new Error("Unknown node to filter from");return(0,F.matchChildren)(e,s,n,n.includeParent&&s,r.onlyNode)}function o(e,t){var r=Array.isArray(t)?t:i(e,t);if(r&&Array.isArray(r)){if(r.length>=2&&"eval"===r[1]){var n=(0,B.getEvalSceneGraph)(e).evaluatedNodes[r[0]],a=n&&n[r[2]];return a&&r[3]?a[r[3]]:a}return(0,B.get)(e,r)}}function s(e,t){var r=Array.isArray(t)?t:a(e,t);return r?r.reduce(function(t,r){return t[r[0]]=(0,B.get)(e,r),t},{}):void 0}function u(e,t,r,n){return o(e,n?[t,r,n]:[t,r])}function l(e,t){var r=o(e,{id:t,evalPlug:"Transform"});if(!r)return null;var n=r.transform,i=e.get("sceneGraph").nodes[t],a=i&&i.parent,s=a&&l(e,a);return s?(new U.Matrix4).copy(s).multiply(n):(new U.Matrix4).copy(n)}function c(e,t,r){var n=o(e,{id:t,evalPlug:"Transform"});if(!n||t===r)return null;var i=n.transform,a=e.get("sceneGraph").nodes[t],s=a&&a.parent,u=s&&c(e,s,r);return u?(new U.Matrix4).copy(u).multiply(i):(new U.Matrix4).copy(i)}function f(e){var t=e.translation,r=e.rotation,n=e.scale,i=e.rotateOrder,a=e.preRotation,o=e.rotatePivotOffset,s=e.localRotatePivot,u=e.scalePivotOffset,l=e.localScalePivot,c=e.shear;0===n.x&&(n.x=1e-7),0===n.y&&(n.y=1e-7),0===n.z&&(n.z=1e-7);var f=new U.Vector3(0,0,0),d=[],h=(new U.Matrix4).makeTranslation(t.x,t.y,t.z);d.push(h);var p=new U.Matrix4;o.equals(f)||(p.makeTranslation(o.x,o.y,o.z),d.push(p));var g=new U.Matrix4,m=new U.Matrix4,v=!1;s.equals(f)||(g.makeTranslation(s.x,s.y,s.z),d.push(g),m.getInverse(g,!0),v=!0);var y=new U.Matrix4;if(!a.equals(f)){var M=(new U.Vector3).copy(a).multiplyScalar(Math.PI/180);y.makeRotationFromEuler(new U.Euler(M.x,M.y,M.z,i)),d.push(y)}var w=(new U.Vector3).copy(r).multiplyScalar(Math.PI/180),x=(new U.Matrix4).makeRotationFromEuler(new U.Euler(w.x,w.y,w.z,i));d.push(x),v&&d.push(m);var b=new U.Matrix4;u.equals(f)||(b.makeTranslation(u.x,u.y,u.z),d.push(b));var T=new U.Matrix4,S=new U.Matrix4,_=!1;l.equals(f)||(T.makeTranslation(l.x,l.y,l.z),d.push(T),S.getInverse(T,!0),_=!0);var E=c.x,A=c.y,I=c.z,D=(new U.Matrix4).set(1,E,A,0,0,1,I,0,0,0,1,0,0,0,0,1);d.push(D);var L=(new U.Matrix4).makeScale(n.x,n.y,n.z);d.push(L),_&&d.push(S);for(var N=new U.Matrix4,C=0;C<d.length;C++)N.multiply(d[C]);return N}function d(e,t){return function(r){var n=Array.isArray(e)?e:i(r,e);if(!n)return console.warn("No matching query",e),O.default.resolve();if(3===n.length){if("object"!==(void 0===t?"undefined":(0,N.default)(t)))throw new Error("If no property is set, expect an object to merge into the operator");return r.dispatch((0,B.merge)(n,t))}if(4===n.length)return r.dispatch((0,B.set)(n,t));if(2===n.length){if("name"!==n[1])throw new Error("Can only set node name");return r.dispatch((0,B.set)(n,t))}}}function h(e,t){return function(r){var n=Array.isArray(e)?e:a(r,e);return O.default.all(n.map(function(e){return r.dispatch(d(e,t))}))}}function p(e){for(var t=e.get("sceneGraph"),r=(0,P.default)(t.nodes),n=void 0,i=[],a=0;a<r.length;a++)(n=t.nodes[r[a]])&&n.warnings&&n.warnings.length&&i.push(n);return i}function g(e){return function(t){e.type="Camera";var r=i(t,e);Array.isArray(r)&&(r=r[0]),t.dispatch(d({plug:"Player",property:"vrCamera"},r))}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===t.cloneDependencies&&(t.cloneDependencies=!0),function(r){var n,o=Array.isArray(e)?e:a(r,e),s=r.get("sceneGraph");if(!o.length)return console.warn("No match for clone: ",e),O.default.resolve(!0);var u=(0,B.findRoot)(r,o[0]),l=t.to||s.activeSceneId,c=i(r,{id:u,child:"Objects"}),f=i(r,{id:l,child:"Objects"}),d=(n={},(0,D.default)(n,c,f),(0,D.default)(n,i(r,{id:u,child:"MaterialLibrary"}),i(r,{id:l,child:"MaterialLibrary"})),n);return(t.withNull?r.dispatch((0,B.addNode)({name:t.withNull,parent:f,type:"Null",plugs:{Null:[["Null",{}]],Transform:[["Transform",{}]],Properties:[["Default",{}]]}})):O.default.resolve(null)).then(function(e){return e&&(d[c]=e),r.dispatch((0,B.clone)(o,d,{cloneDependencies:t.cloneDependencies})).then(function(r){return e&&(r[t.withNull]=e),r})})}}function v(e){var t=e.sceneId,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e){var n={from:{id:t},child:"Objects",type:["PolyMesh","Null"]},s=a(e,n),u=e.get("sceneGraph");if(!s.length)return console.warn("No match for clone: ",n),O.default.resolve(!0);var l=(0,B.findRoot)(e,s[0]),c=r.to||u.activeSceneId,f=i(e,{id:l,child:"Objects"}),d=i(e,{id:c,child:"Objects"}),h=i(e,{id:l,child:"MaterialLibrary"}),p=o(e,{id:l,plug:"Player",property:"configurator"}),g=(0,D.default)({},f,d),m=o(e,{id:l,property:"name"});return e.dispatch(E({name:m+" Model",parent:d,type:"Model"})).then(function(r){return e.dispatch((0,W.initializeConfiguration)({id:r,config:p,sceneId:t})),g[f]=r,g[h]=r,e.dispatch((0,B.clone)(s,g,{cloneDependencies:!0})).then(function(e){return r})})}}function y(){return function(e){function t(e){var t=r.nodes[e]&&r.nodes[e].plugs,i=!0,a=!1,o=void 0;try{for(var s,u=(0,j.default)((0,P.default)(t||{}));!(i=(s=u.next()).done);i=!0)!function(){var e=s.value;t[e].forEach(function(t,r){var i=(0,G.lookupOperator)(e,t.type,[]),a=!0,o=!1,s=void 0;try{for(var u,l=(0,j.default)(i.fileReferenceKeys);!(a=(u=l.next()).done);a=!0){var c=u.value;t[c]&&(n[t[c]]=!0)}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}})}()}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}}var r=e.get("sceneGraph"),n={};return a(e,{includeParent:!0}).forEach(t),O.default.all((0,k.filter)(e).map(function(t){return!n[t.get("id")]&&e.dispatch((0,k.removeFile)(t.get("id")))}))}}function M(e,t){var r=o(e,{id:t,evalPlug:"PolyMesh",property:"mesh"}),n=new U.Box3;return r&&n.copy(r.boundingBox),n}function w(e,t){var r=new U.Box3;(0,B.traverseHierarchy)(e,t,!0,function(n){var i=M(e,n),a=c(e,n,t);i.applyMatrix4(a),r.union(i)});var n=l(e,t)||new U.Matrix4,i=M(e,t);return r.union(i),r.applyMatrix4(n),r}function x(e,t){function r(t){var n=e.get("sceneGraph").nodes[t],i=n&&n.parent,a=o(e,{id:t,plug:"Properties",property:"visible"});return!i||void 0===a||a&&r(i)}return"Enable"!==o(e,{id:e.get("sceneGraph").activeSceneId,plug:"Properties",property:"hierarchyVisibility"})?o(e,{id:t,plug:"Properties",property:"visible"}):r(t)}function b(){return H.default}function T(e,t){if(!t)return null;var r=(0,V.getRect)(e),n=.5*r.width,i=.5*r.height,a=w(e,t),s=new U.Box3,u=new U.Vector3,c=(0,V.getCamera)(e),f=(0,V.getCameraWorldTransform)(e),d=o(e,{id:c,evalPlug:"Camera"}),h=(0,Q.default)(d),p={projectionMatrix:h,matrixWorld:f};if(a.isEmpty()){var g=l(e,t);if(!g)return null;var m=(new U.Vector3).setFromMatrixPosition(g);return m.project(p),{top:(m.y-1)*-i,left:(m.x+1)*n,width:0,height:0,x:(m.x+1)*n,y:(m.y-1)*-i}}for(var v=0;v<8;v++)u.set(a[Math.floor(v/4)?"max":"min"].x,a[Math.floor(v/2)%2?"max":"min"].y,a[v%2?"max":"min"].z),u.project(p),s.expandByPoint(u);var y={top:(s.max.y-1)*-i,left:(s.min.x+1)*n,width:(s.max.x-s.min.x)*n,height:(s.max.y-s.min.y)*i};return y.x=y.left+y.width/2,y.y=y.top+y.height/2,y}function S(e,t){return t?o(e,{name:t,evalPlug:"Pass"}):o(e,{id:o(e,{name:"Passes",plug:"GeneralRenderer",property:"curPass"}),evalPlug:"Pass"})||o(e,{type:"Pass",evalPlug:"Pass"})}function _(e,t){var r=t||e.get("sceneGraph").activeSceneId,n=a(e,{from:{id:r},includeParent:!0});return{sceneGraph:(0,B.exportJSON)(e,n),assets:(0,k.exportJSON)(e)}}function E(e){var t=e.name,r=e.type,n=e.parent,i=e.plugs;if(!n)throw new Error("addNode requires parent to be set");if(!r)throw new Error("addNode requires type to be set");if(!t)throw new Error("addNode requires name to be set");if(!q[r])throw new Error("invalid type: "+r+" for addNode");var a=i||{},o=!0,s=!1,u=void 0;try{for(var l,c=(0,j.default)((0,P.default)(q[r]));!(o=(l=c.next()).done);o=!0){var f=l.value;if(a[f]||(a[f]=[[q[r][f],{}]]),!a[f][0][0])throw new Error("Required operator for "+f)}}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}return(0,B.addNode)({name:t,type:r,plugs:a,parent:n})}function A(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments[4];if(!e)throw new Error("addOperator requires the id for the element receiving the operator");if(!t)throw new Error("addOperator requires the plug to be set");if(!r)throw new Error("addOperator requires the operator type to be set");var a=H.default[t];if(!a)throw new Error("Unknown plug: "+t);if(!a[r])throw new Error("Unknown operator: "+r);return(0,B.addOperator)(e,t,[r,n,i])}Object.defineProperty(t,"__esModule",{value:!0});var I=r(19),D=n(I),L=r(38),N=n(L),C=r(39),O=n(C),R=r(4),P=n(R),z=r(24),j=n(z);t.find=i,t.filter=a,t.get=o,t.getAll=s,t.getEval=u,t.getWorldTransform=l,t.getRelativeTransform=c,t.getLocalTransform=f,t.set=d,t.setAll=h,t.getWarnings=p,t.setVRCamera=g,t.clone=m,t.cloneModel=v,t.pruneAssets=y,t.getNodeBoundingBox=w,t.isVisible=x,t.getAvailableOperators=b,t.getScreenPosition=T,t.getCurrentPass=S,t.exportJSON=_,t.addNode=E,t.addOperator=A;var U=r(0),B=r(10),V=r(8),k=r(33),F=r(123),G=r(101),H=n(G),W=r(98),Y=r(105),Q=n(Y),q={PolyMesh:{PolyMesh:"Box",Transform:"Transform",Material:"Reference",Properties:"PolyMeshProperties"},Light:{Light:"PointLight",Transform:"Transform",Properties:"Default"},Camera:{Camera:"Camera",Transform:"Transform",Properties:"Default"},Null:{Null:"Null",Transform:"Transform",Properties:"Default"},Model:{Null:"Null",Transform:"Transform",Mixer:"Mixer",Properties:"ModelProperties"},Material:{Material:"Physical",Properties:"MaterialProperties"},Image:{Image:"Image",Properties:"ImageProperties"},Pass:{Pass:"Pass"},Renderer:{Renderer:"WebGLRenderer"},Bone:{Bone:"Bone",Transform:"BoneTransform",Properties:"Default"},Annotation:{Annotation:"Annotation",Transform:"Transform",Properties:"Default"}},X={actions:{set:d,setAll:h,clone:m,cloneModel:v,pruneAssets:y,setVRCamera:g,addOperator:A,addNode:E},selectors:{get:o,getAll:s,getWorldTransform:l,find:i,filter:a,getWarnings:p,exportJSON:_,getNodeBoundingBox:w,getCurrentPass:S,getAvailableOperators:b,getScreenPosition:T,isVisible:x}};t.default=X},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return{type:it,payload:e}}function a(e){return e.getIn(["player","activeManipulator"])}function o(e,t){return(0,et.addCommand)({tool:e,enabled:!0},t)}function s(e){return(0,et.removeCommand)(e)}function u(e){return(0,et.updateCommand)(e,{display:{playerTools:!0}})}function l(e){return(0,et.updateCommand)(e,{display:{playerTools:!1}})}function c(e,t){return{type:UPDATE_COMMAND_OPTIONS,payload:{name:e,options:t}}}function f(e){return e.getIn(["player","rect"])}function d(e){return{type:ut,payload:e}}function h(e){return function(t){t.dispatch({type:ot,payload:e});var r=S(t);if(r){var n=(0,ke.get)(t,{id:r,evalPlug:"Camera"});n&&(n.newAngleAttrs=e),t.dispatch((0,Ge.touch)(r))}}}function p(e){return e.getIn(["player","camera"])}function g(e){return(0,ke.getWorldTransform)(e,S(e))}function m(e){return function(t){return t.dispatch((0,ke.set)({scene:!0,plug:"Player",property:"camera"},e))}}function v(e){return function(t){if(e){var r=t.getIn(["player","activeCamera"]),n=(0,ke.get)(t,{plug:"Player",property:"vrCamera"})||Ge.virtualCameraId;t.dispatch(y(Ge.vrCameraId,r));var i=t.get("sceneGraph"),a=i.nodes[n],o=i.nodes[Ge.vrCameraId],s=(0,Ge.initNode)(a),u=(0,Le.default)({},s.plugs);return t.dispatch((0,Ge.replace)(Ge.vrCameraId,(0,Le.default)(o,{plugs:u})))}var l=t.getIn(["player","prevCamera"])||Ge.virtualCameraId;return t.dispatch(y(l,null))}}function y(e,t){return function(r){var n=(0,$e.default)(r,t),i=(0,ke.get)(r,{id:t,evalPlug:"Camera"}),a=(0,ke.get)(r,{id:t,evalPlug:"Transform"});a&&!a.target&&(i.targetWorldMatrix=n);var o=(0,ke.get)(r,{id:e,evalPlug:"Camera"});o.targetWorldMatrix&&(r.dispatch((0,Ge.merge)([Ge.virtualTargetId,"Transform",0],(0,Ke.default)(o.targetWorldMatrix))),o.targetWorldMatrix=null),r.dispatch({type:at,payload:{id:e,prevCameraId:t}})}}function M(e){return{type:Tt,payload:e}}function w(e){return e.getIn(["player","threeObjects"]).toJS()}function x(e){return e.getIn(["player","threeObjects","scene"])}function b(e){return e.getIn(["player","threeObjects","camera"])}function T(e){var t=x(e);return(0,Ye.default)(t)}function S(e){return e.getIn(["player","activeCamera"])||Ge.virtualCameraId}function _(e){return e.getIn(["player","tools"])}function E(e){return{type:st,payload:e}}function A(e){return{initialCameraWorldMatrix:e.getIn(["player","initialCameraWorldMatrix"]),initialTargetWorldMatrix:e.getIn(["player","initialTargetWorldMatrix"])}}function I(){return function(e){var t=e.getIn(["player","playerElement"]);["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(e){if(t[e])return t[e]()}),e.dispatch({type:pt})}}function D(){return function(e){return["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(e){if(document[e])return document[e]()}),e.dispatch({type:gt})}}function L(){return function(e){return e.dispatch(N(e)?D():I())}}function N(e){return e.getIn(["player","fullScreen"])}function C(e){return function(t){N(t)!==e&&t.dispatch({type:mt,payload:e}),!e&&P(t)&&t.dispatch((0,et.deactivateCommand)("vrSettings"))}}function O(e){return e.getIn(["player","renderingMode"])}function R(e){return e.getIn(["player","renderingMode"])===tt.normal}function P(e){return e.getIn(["player","renderingMode"])===tt.vr}function z(e){return e.getIn(["player","renderingMode"])===tt.lenticular}function j(e){return function(t){var r=t.getIn(["player","tools",e]);if(r){if(r.get("action"))return r.get("action")(t);var n=U(t,r);return r.get("activate")&&!n?r.get("activate")(t):r.get("deactivate")&&n?r.get("deactivate")(t):t.dispatch(i(e))}}}function U(e,t){return t.get("isActive")?t.get("isActive")(e):e.getIn(["player","activeManipulator"])===t.get("name")}function B(e,t){var r=e.getIn(["player","tools",t]);return r&&U(e,r)}function V(e){return e.getIn(["player","tools"]).filter(function(t){return U(e,t)})}function k(e){var t=e.fullscreen,r=e.trackDevice;return function(e){t&&e.dispatch(I());var n=S(e);e.dispatch({type:wt,payload:{trackDevice:r,cameraId:n}})}}function F(){return{type:Mt}}function G(e){return e.getIn(["player","prevCamera"])}function H(e){if(!tt[e])throw new Error("Invalid Render Mode: "+e);return{type:vt,payload:e}}function W(){return function(e){e.dispatch(z(e)?F():k({}))}}function Y(){return{type:xt,payload:!0}}function Q(){return{type:xt,payload:!1}}function q(){return function(e){console.log("toggle device tracking",!X(e)),e.dispatch(X(e)?Q():Y())}}function X(e){return e.getIn(["player","deviceTracking"])}function Z(e,t){return{type:ht,payload:{playerEl:e,canvasEl:t}}}function K(e){return{type:ft,payload:e}}function J(e){return{type:dt,payload:e}}function $(e){return{type:bt,payload:e}}function ee(e){return e.getIn(["player","activeColor"])}function te(e){return e.getIn(["player","hoverColor"])}function re(e){return e.getIn(["player","fullscreenBackgroundColor"])}function ne(e,t,r,n){var i=new Oe.Vector3,a=new Oe.Quaternion,o=new Oe.Vector3(1,1,1);e.decompose(i,a,o);var s=new Oe.Vector3,u=new Oe.Quaternion;t.decompose(s,u,o);var l=(new Oe.Vector3).setFromMatrixPosition(r),c=l.distanceTo(i),f=(new Oe.Vector3).setFromMatrixPosition(n),d=f.distanceTo(s),h=new Oe.Vector3,p=new Oe.Vector3,g=new Oe.Vector3,m=new Oe.Quaternion,v=new Oe.Matrix4;return function(e,t,r,n){var i=e/n;h.lerpVectors(l,f,i);var s=c*(1-i)+d*i;return Oe.Quaternion.slerp(a,u,m,i),p.set(0,0,1).applyQuaternion(m),g.copy(h).addScaledVector(p,s),v.compose(g,m,o),v}}function ie(e,t){return function(r){var n=S(r);if(n&&e){var i=Ie.default.resolve(),a=(0,ke.find)(r,{id:n,plug:"Transform",property:"target"}),o=!1;if(a&&(0,ke.get)(r,{id:n,plug:"Camera",property:"targeted"})){(0,ke.get)(r,a)&&(i=r.dispatch((0,ke.set)({id:n,plug:"Camera",property:"targeted"},!1)),o=!0)}var s=(0,ke.get)(r,{id:n,plug:"Camera",property:"fieldOfView"}),u=(0,ke.get)(r,{id:e,plug:"Camera",property:"fieldOfView"});return i.then(function(){var e=r.getIn(["animation","animations"]),t=e.filter(function(e){return"animateCameraTo"===e.name});return Ie.default.all(t.map(function(e){return r.dispatch((0,Fe.removeAnimation)(e.id))}))}).then(function(){return r.dispatch((0,et.updateCommands)(["zoom","pan","orbit","home"],{enabled:!1}))}).then(function(){var i=(0,ke.getWorldTransform)(r,n),a=(0,$e.default)(r,n),l=(0,Qe.initCamera)(r,!1,e),c=l.camera,f=l.target,d=t||300;return new Ie.default(function(t,l){r.dispatch((0,Fe.queueAnimation)({autoplay:!0,name:"animateCameraTo",iterations:1,tracks:[{path:{id:n,evalPlug:"Transform"},duration:d,value:c,startValue:i,tween:ne(i,c,a,f),set:function(e,t){(0,Xe.default)(r,n,t)}},{path:{id:n,plug:"Camera",property:"fieldOfView"},duration:d,value:u,startValue:s}],onEnd:function(){t(r.dispatch(m(e)).then(function(){return o?r.dispatch((0,ke.set)({id:n,plug:"Camera",property:"targeted"},!0)):null}))}}))})}).then(function(){return r.dispatch((0,et.updateCommands)(["zoom","pan","orbit","home"],{enabled:!0}))})}}}function ae(){return function(e){var t=e.getTranslator();t&&t.resize()}}function oe(e,t,r){var n=e.getTranslator();if(!n||!n.raycastSelect)return null;var i=t.clientX/(t.rect.width/2)-1,a=-(t.clientY/(t.rect.height/2)-1);return n.raycastSelect({x:i,y:a},r).map(function(e){return e.id})}function se(e,t){var r=e.getTranslator();return r&&r.raycastSelect?r.raycastSelect({x:0,y:0},t).map(function(e){return e.id}):null}function ue(e,t){var r=(0,ke.filter)(e,{plug:"Properties",properties:{interactive:!0}}),n=r.map(function(r){var n=r[0],i=(0,ke.getNodeBoundingBox)(e,n),a=t.intersectBox(i);return{hit:!!a,id:n,distance:a?a.distanceTo(t.origin):1/0}}).filter(function(e){return e.hit});return n.sort(function(e,t){return e.distance-t.distance}),n.map(function(e){return e.id})}function le(e,t){var r=((0,ke.filter)(e,{plug:"Properties",properties:{interactive:!0}}),e.getTranslator());if(!r||!r.getCameraMouseRay)return null;var n=t.clientX/(t.rect.width/2)-1,i=-(t.clientY/(t.rect.height/2)-1);return ue(e,r.getCameraMouseRay({x:n,y:i}).ray)}function ce(e){var t=e.getTranslator();return t&&t.getCameraMouseRay?ue(e,t.getCameraMouseRay({x:0,y:0}).ray):null}function fe(e){return function(t){var r=S(t);r&&t.dispatch((0,Ge.merge)([r,"Properties",0],{constrainCameraSphere:!0,maxZoom:e}))}}function de(e){return e.getIn(["player","canvasElement"])}function he(e){return e.getIn(["player","constrainCameraRadius"])}function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:lt,payload:{display:e,options:t}}}function ge(e){return e.getIn(["player","displayThumbnail"])}function me(e,t){var r=e.getIn(["player","thumbnailOptions"]);return"https://clara.io/api/scenes/"+t+"/"+((0,Re.is)(r,St)?"v2thumbnail":"render?"+ze.default.stringify(r.toJS()))}function ve(e){return{type:ct,payload:e}}function ye(e){return e.getIn(["player","displayVrSettings"])}function Me(e){return{type:yt,payload:e}}function we(e){return e.getIn(["player","progressBarOption"])}function xe(e){return function(t){var r=e||[(0,ke.find)(t,"Objects")],n=(new Oe.Box3).makeEmpty();r.forEach(function(e){return n.union((0,ke.getNodeBoundingBox)(t,e))}),n.isEmpty()||(0,Qe.frameSphere)(t,n.getBoundingSphere())}}function be(e){switch(e=e||"xyz"){case"xyz":case"xzy":case"yxz":case"yzx":case"zxy":case"zyx":default:e=0;break;case"xy":case"yx":e=1;break;case"xz":case"zx":e=2;break;case"yz":case"zy":e=3;break;case"x":e=4;break;case"y":e=5;break;case"z":e=6}return e}function Te(e,t,r,n,i,a){var o=e.getTranslator(),s=(0,ke.filter)(e,{type:"PolyMesh"}),u=o.getNodeListBoundingBox(s),l=u.getBoundingSphere(),c={id:(0,Ve.default)(),name:"Explode Clip",tracks:[]};return t.forEach(function(t,o){var s=t.id,u=t.boundingSphere,f=(0,ke.get)(e,{id:s,plug:"Transform",property:"translation"}),d=f.clone(),h=u.center.sub(l.center).normalize();switch(a){case 0:if(o<1)break;d.x+=h.x*(l.radius+u.radius)*i,d.y+=h.y*(l.radius+u.radius)*i,d.z+=h.z*(l.radius+u.radius)*i;break;case 1:if(o<1)break;d.x+=h.x*(l.radius+u.radius)*i,d.y+=h.y*(l.radius+u.radius)*i;break;case 2:if(o<1)break;d.x+=h.x*(l.radius+u.radius)*i,d.z+=h.z*(l.radius+u.radius)*i;break;case 3:if(o<1)break;d.y+=h.y*(l.radius+u.radius)*i,d.z+=h.z*(l.radius+u.radius)*i;break;case 4:r-=u.radius*i,d.x=r,r-=u.radius*i;break;case 5:r-=u.radius*i,d.y=r,r-=u.radius*i;break;case 6:r-=u.radius*i,d.z=r,r-=u.radius*i}var p=(0,ke.find)(e,{id:s,plug:"Transform",property:"translation"});c.tracks.push({easing:"linear",type:"Vec3",path:p,start:0,keyframes:{x:{ts:[0,n],vs:[f.x,d.x]},y:{ts:[0,n],vs:[f.y,d.y]},z:{ts:[0,n],vs:[f.z,d.z]}}})}),c}function Se(e,t,r,n){var i=e.getTranslator(),a=(0,ke.filter)(e,{type:"PolyMesh"}),o=i.getNodeListBoundingBox(a),s=o.getBoundingSphere(),u=S(e),l=(0,ke.getWorldTransform)(e,u);t=n<4?4*s.radius*r:2*t;var c=(0,ke.get)(e,{id:u,evalPlug:"Camera"}),f=c.aspectRatio>=1?Math.PI*c.fieldOfView/360:Math.atan(c.aspectRatio*Math.tan(Math.PI*c.fieldOfView/360)),d=t/2/Math.sin(f),h=(0,Ke.default)(l),p=h.translation,g=h.rotation,m=(0,ke.find)(e,{name:"Objects"}),v={Camera:[["Camera",{}]],Transform:[["Transform",{translation:p,rotation:g}]],Properties:[["CameraProperties",{}]]},y=p.clone().sub(s.center);y.normalize().multiplyScalar(d).add(s.center);var M={Camera:[["Camera",{}]],Transform:[["Transform",{translation:y,rotation:g}]],Properties:[["CameraProperties",{}]]};return e.dispatch((0,ke.addNode)({name:"srcCamera",type:"Camera",plugs:v,parent:m})).then(function(t){return e.dispatch((0,ke.addNode)({name:"dstCamera",type:"Camera",plugs:M,parent:m})).then(function(e){return{srcCamera:t,dstCamera:e}})})}function _e(e,t,r,n){return function(i){r=r>0?r:1,t="PolyMesh"==t?"PolyMesh":"Null",n=n||3e3;var a=be(e),o=i.get("sceneGraph"),s=i.getTranslator(),u=(0,ke.filter)(i,{type:t}),l=[],c=0;u.forEach(function(e){var r=o.nodes[e],n=!0;if(r.children&&r.children.forEach(function(e){"Null"!==(0,ke.get)(i,{id:e,property:"type"})&&(n=!1)}),!n||"Null"!==t){var a=s.getNodeListBoundingBox("Null"==t?r.children:[e]),u=a.getBoundingSphere();l.push({id:e,boundingSphere:u}),c+=u.radius}});var f=c*r;switch(a){case 0:case 1:case 2:case 3:l.sort(function(e,t){return t.boundingSphere.radius-e.boundingSphere.radius});break;case 4:l.sort(function(e,t){return t.boundingSphere.center.x-e.boundingSphere.center.x});break;case 5:l.sort(function(e,t){return t.boundingSphere.center.y-e.boundingSphere.center.y});break;case 6:l.sort(function(e,t){return t.boundingSphere.center.z-e.boundingSphere.center.z})}var d=Te(i,l,f,n,r,a);return i.dispatch((0,Fe.addClip)(d,d.id)),Se(i,f,r,a).then(function(e){return{explodeClipId:d.id,srcCamera:e.srcCamera,dstCamera:e.dstCamera}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.progressBarOptions=t.manipulators=t.RENDER_MODES=void 0;var Ee,Ae=r(39),Ie=n(Ae),De=r(2),Le=n(De),Ne=r(19),Ce=n(Ne);t.useManipulator=i,t.getActiveManipulator=a,t.addTool=o,t.removeTool=s,t.showTool=u,t.hideTool=l,t.updateToolOptions=c,t.getRect=f,t.setRect=d,t.setCameraAttrs=h,t.getCameraAttrs=p,t.getCameraWorldTransform=g,t.useCamera=m,t.useVrCamera=v,t.setCamera=y,t.setThree=M,t.getThree=w,t.getThreeScene=x,t.getThreeCamera=b,t.getBoundingBox=T,t.getCamera=S,t.getTools=_,t.setCameraPosition=E,t.getInitialCameraPosition=A,t.requestFullscreen=I,t.exitFullscreen=D,t.toggleFullscreen=L,t.isFullscreen=N,t.setFullscreen=C,t.getRenderingMode=O,t.isNormalRenderingMode=R,t.isVRMode=P,t.isLenticularMode=z,t.activateTool=j,t.isToolActive=B,t.getActiveTools=V,t.requestLenticularMode=k,t.requestNormalMode=F,t.getPrevCamera=G,t.setRenderMode=H,t.toggleLenticularMode=W,t.enableDeviceTracking=Y,t.disableDeviceTracking=Q,t.toggleDeviceTracking=q,t.isDeviceTracking=X,t.setPlayerElement=Z,t.setActiveColor=K,t.setHoverColor=J,t.setFullscreenBGColor=$,t.getActiveColor=ee,t.getHoverColor=te,t.getFullscreenBGColor=re,t.animateCameraTo=ie,t.resize=ae,t.filterNodesFromPosition=oe,t.filterNodesFromCenter=se,t.filterInteractiveBoxesFromPosition=le,t.filterInteractiveBoxesFromCenter=ce,t.setCameraRadiusConstraint=fe,t.getCanvasElement=de,t.getCameraRadiusConstraint=he,t.displayThumbnail=pe,t.shouldDisplayThumbnail=ge,t.getThumbnailURL=me,t.displayVrSettings=ve,t.shouldDisplayVrSettings=ye,t.setProgressBar=Me,t.getProgressBar=we,t.frameScene=xe,t.createExplode=_e;var Oe=r(0),Re=r(32),Pe=r(690),ze=n(Pe),je=r(46),Ue=n(je),Be=r(79),Ve=n(Be),ke=r(7),Fe=r(67),Ge=r(10),He=(r(20),r(71)),We=(n(He),r(252)),Ye=n(We),Qe=r(126),qe=r(127),Xe=n(qe),Ze=r(51),Ke=n(Ze),Je=r(59),$e=n(Je),et=r(43),tt=t.RENDER_MODES={normal:"normal",vr:"vr",lenticular:"lenticular"},rt=t.manipulators={orbit:"orbit",pan:"pan",zoom:"zoom",nodeRotate:"nodeRotate",nodeMove:"nodeMove",nodeScale:"nodeScale"},nt=t.progressBarOptions={default:"default",circle:"circle",line:"line",none:"none"},it="USE_MANIPULATOR",at="SET_CAMERA",ot="SET_CAMERA_ATTRS",st="SET_CAMERA_POSITION",ut="SET_RECT",lt="DISPLAY_THUMBNAIL",ct="DISPLAY_VR_SETTINGS",ft="SET_ACTIVE_COLOR",dt="SET_HOVER_COLOR",ht="SET_PLAYER_ELEMENT",pt="REQUEST_FULL_SCREEN",gt="EXIT_FULL_SCREEN",mt="SET_FULL_SCREEN",vt="SET_RENDER_MODE",yt="SET_PROGRESS_BAR",Mt="REQUEST_NORMAL_MODE",wt="REQUEST_LENTICULAR_MODE",xt="SET_DEVICE_TRACKING",bt="SET_BACKGROUND_COLOR",Tt="SET_THREE_OBJECTS",St=(0,Re.Map)({width:1280,height:960,cache:!0,renderer:"webgl"}),_t=(0,Re.Map)({activeColor:"#ffc85f",hoverColor:"#C08618",fullscreenBackgroundColor:"#FFF",activeManipulator:rt.orbit,fullScreen:!1,renderingMode:tt.normal,deviceTracking:!1,camera:(0,Re.Map)({polarAngle:null,azimuthAngle:null,boundingRadius:null,maxZoom:null}),rect:(0,Re.Map)({width:400,height:300}),initialCameraWorldMatrix:null,initialTargetWorldMatrix:null,cameraWorldMatrix:null,displayThumbnail:!0,playerElement:null,canvasElement:null,activeCamera:null,threeObjects:(0,Re.Map)(),displayVrSettings:!1,prevCamera:null,orientationHandler:null,constrainCameraRadius:null,progressBarOption:nt.default,thumbnailOptions:St}),Et=(0,Ue.default)(_t,(Ee={},(0,Ce.default)(Ee,it,function(e,t){return e.set("activeManipulator",t)}),(0,Ce.default)(Ee,at,function(e,t){var r=t.id,n=t.prevCameraId;return e.set("activeCamera",r).set("prevCamera",n)}),(0,Ce.default)(Ee,ot,function(e,t){return e.mergeIn(["camera"],t)}),(0,Ce.default)(Ee,ut,function(e,t){return e.set("rect",t)}),(0,Ce.default)(Ee,st,function(e,t){return e.merge(t)}),(0,Ce.default)(Ee,ht,function(e,t){var r=t.playerEl,n=t.canvasEl;return e.set("playerElement",r).set("canvasElement",n)}),(0,Ce.default)(Ee,lt,function(e,t){var r=t.display,n=t.options;return e.set("displayThumbnail",!!r).mergeIn(["thumbnailOptions"],(0,Re.Map)(n))}),(0,Ce.default)(Ee,ct,function(e,t){return e.set("displayVrSettings",!!t)}),(0,Ce.default)(Ee,ft,function(e,t){return e.set("activeColor",t)}),(0,Ce.default)(Ee,dt,function(e,t){return e.set("hoverColor",t)}),(0,Ce.default)(Ee,bt,function(e,t){return e.set("fullscreenBackgroundColor",t)}),(0,Ce.default)(Ee,yt,function(e,t){return nt[t]||(t=nt.default),e.set("progressBarOption",t)}),(0,Ce.default)(Ee,pt,function(e){return e.set("fullScreen",!0)}),(0,Ce.default)(Ee,gt,function(e){return e.set("fullScreen",!1)}),(0,Ce.default)(Ee,mt,function(e,t){return e.set("fullScreen",t)}),(0,Ce.default)(Ee,vt,function(e,t,r){var n=r.createEvent;return e.get("renderingMode")!==t&&n("renderingMode",t),e.set("renderingMode",t)}),(0,Ce.default)(Ee,wt,function(e,t){var r=t.trackDevice,n=t.cameraId;return e.merge({renderingMode:"lenticular",deviceTracking:r,prevCamera:n})}),(0,Ce.default)(Ee,Mt,function(e){return e.merge({renderingMode:"normal",deviceTracking:!1})}),(0,Ce.default)(Ee,xt,function(e,t){return e.set("deviceTracking",t)}),(0,Ce.default)(Ee,"SET_CONSTRAIN_CAMERA_RADIUS",function(e,t){return e.set("constrainCameraRadius",t)}),(0,Ce.default)(Ee,Tt,function(e,t,r){return(0,r.createEvent)("threeinitialized"),e.set("threeObjects",(0,Re.Map)(t))}),Ee)),At={reducer:Et,actions:{addTool:o,removeTool:s,showTool:u,hideTool:l,useManipulator:i,setCameraAttrs:h,useCamera:m,setCameraPosition:E,animateCameraTo:ie,resize:ae,displayThumbnail:pe,setActiveColor:K,requestFullscreen:I,exitFullscreen:D,setFullscreen:C,toggleFullscreen:L,setHoverColor:J,requestLenticularMode:k,enableDeviceTracking:Y,disableDeviceTracking:Q,toggleDeviceTracking:q,requestNormalMode:F,setFullscreenBGColor:$,setCameraRadiusConstraint:fe,updateToolOptions:c,setCamera:y,frameScene:xe,setProgressBar:Me,createExplode:_e},selectors:{getCamera:S,getCameraAttrs:p,getInitialCameraPosition:A,getCameraWorldTransform:g,getActiveColor:ee,getCanvasElement:de,isFullscreen:N,isVRMode:P,isLenticularMode:z,getFullscreenBGColor:re,isDeviceTracking:X,shouldDisplayThumbnail:ge,filterNodesFromPosition:oe,filterNodesFromCenter:se,getThreeScene:x,getThreeCamera:b,getProgressBar:we,getThree:w}};t.default=At},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={},r=e.warnings||[],n=e.id,i=e.children,a=e.name,o=e.type,s=e.parent;return(0,se.default)(e.plugs).forEach(function(n){t[n]=e.plugs[n].map(function(e){var t=e.type;return(0,Me.lookupOperator)(n,t,r).init(t,e,e.name)})}),{id:n,children:i,name:a,type:o,parent:s,plugs:t,warnings:r,_v:0}}function a(e){return e.hasOwnProperty("_v")||(e._v=0),e}function o(e,t,r){var n=void 0,i=void 0,a=void 0;if(Array.isArray(t)){var o=(0,ae.default)(t,3);n=o[0],i=o[1],a=o[2]}else n=t.type,a=t.name,i=t;return(0,Me.lookupOperator)(e,n,r).init(n,i,a)}function s(e){var t=e.id,r=e.name,n=e.type,i=e.children,a=e.parent,s=e.plugs,u=[];return{id:t,name:r,type:n,parent:a,warnings:u,_v:0,children:i||[],plugs:(0,pe.default)(function(e,t){return e.map(function(e){return o(t,e,u)})},s)}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.nodes[Fe]&&!t.force||(e.nodes[Fe]=s({id:Fe,name:"CAMERA",type:"Camera",plugs:{Camera:[["Camera",{}]],Transform:[["Transform",{}]],Properties:[["CameraProperties",{}]]}})),e.nodes[Ge]&&!t.force||(e.nodes[Ge]=s({id:Ge,name:"VR CAMERA",type:"Camera",plugs:{Camera:[["Camera",{fieldOfView:45}]],Transform:[["Transform",{translation:{x:0,y:1.6,z:1}}]],Properties:[["CameraProperties",{}]]}})),e.nodes[He]&&!t.force||(e.nodes[He]=s({id:He,name:"VIRTUAL TARGET NULL",type:"Null",plugs:{Transform:[["Transform",{}]]}})),e.nodes[We]&&!t.force||(e.nodes[We]=s({id:We,name:"CONTROLER ROOT NULL",type:"Null",plugs:{Transform:[["Transform",{}]]}})),e.nodes[Ye]&&!t.force||(e.nodes[Ye]=s({id:Ye,name:"VIRTUAL PIVOT NULL",type:"Null",plugs:{Transform:[["Transform",{}]]}}))}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,ne.default)(e,{_v:0,nodes:{},fileReferences:{to:{},from:{}},nodeReferences:{to:{},from:{}},cameraReferences:{},worldTransformReferences:{},evaluatedNodes:{},loaded:!1,activeSceneId:null,objects:{},refs:{},origin:{},commits:{},_ev:0,_sv:0})}function c(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t&&(t._changedPlug?t._changedPlug!==r&&(t._changedPlug=!0):t._changedPlug=r,t._v+=1),e._v+=1}function f(e,t){var r=t.path,n=t.value;if(!r.length||r.length<2)throw new Error("SET requires a path with length 2 or 4");var i=(0,ae.default)(r,4),a=i[0],o=i[1],s=i[2],u=i[3],l=e.nodes[a];if(2===r.length&&"name"===r[1])l.name=n,c(e,l);else{var f=l&&l.plugs[o],d=f&&f[s];if(!d)throw new Error("Setting data on unknown operator: "+r.join(","));we.default[o][d.type].set(d,u,n)&&c(e,l,o)}return e}function d(e){var t={},r=!0,n=!1,i=void 0;try{for(var a,o=(0,$.default)((0,se.default)(e.plugs));!(r=(a=o.next()).done);r=!0){var s=a.value;t[s]=e.plugs[s].map(function(e){return(0,ne.default)({},e)})}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return{id:(0,de.default)(),name:e.name,type:e.type,parent:e.parent,children:[].concat(e.children),plugs:t,_v:1}}function h(e){var t=e.id,r=e.name,n=e.type,i=e.plugs,a=e.parent;return t||(t=(0,de.default)()),r=r||t,{type:ye.ADD_NODE,payload:{id:t,name:r,type:n,plugs:i,parent:a},resolve:t}}function p(e){return{type:ye.DELETE_NODE,payload:e}}function g(e,t,r){return{type:Ue,payload:{id:e,plug:t,op:r}}}function m(e,t){if(!Array.isArray(t))throw new Error("Expect path to be an array");var r=e.get("sceneGraph"),n=r.nodes[t[0]];if(t.length>=2){if("name"===t[1]||"type"===t[1])return n&&n[t[1]];n=n&&n.plugs[t[1]]}if(t.length>=3&&(n=n&&n[t[2]]),t.length>=4&&n){n=(0,Me.lookupOperator)(t[1],n.type,[]).get(n,t[3])}return n}function v(e){return m(e,[(0,Ce.getSceneId)(e),"Player",0,"vrCamera"])}function y(e){return function(t){var r=[(0,Ce.getSceneId)(t),"Player",0,"vrCamera"];t.dispatch(M(r,e))}}function M(e,t){return{type:Oe,payload:{path:e,value:t},meta:{remote:!0}}}function w(e,t){return{type:Re,payload:{path:e,attrs:t}}}function x(e,t){return{type:Pe,payload:{id:e,node:t}}}function b(e){return{type:ze,payload:e}}function T(e){return{type:Be,payload:e}}function S(e,t){return{type:je,payload:{parentId:e,childIds:t}}}function _(e,t){var r=e.get("sceneGraph").nodes[t];return r&&r.parent}function E(e,t){var r=e.get("sceneGraph").nodes[t],n=r&&r.parent;return n?E(e,n):t}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.cloneDependencies,i=e.reduce(function(e,t){return e[t]=!0,e},{}),a={};return function(r){function o(e){var n=u.nodes[e];n&&n.name;if(n&&n.plugs){var s=!0,l=!1,c=void 0;try{for(var f,d=(0,$.default)((0,se.default)(n.plugs));!(s=(f=d.next()).done);s=!0){var h=f.value,p=n.plugs[h],g=!0,m=!1,v=void 0;try{for(var y,M=(0,$.default)(p);!(g=(y=M.next()).done);g=!0){var w=y.value,x=we.default[h][w.type];if(x){var b=!0,T=!1,S=void 0;try{for(var _,E=(0,$.default)(x.referenceKeys);!(b=(_=E.next()).done);b=!0){var A=_.value,I=w[A];!I||i[I]||t[I]||(i[I]=!0,o(I))}}catch(e){T=!0,S=e}finally{try{!b&&E.return&&E.return()}finally{if(T)throw S}}var D=!0,L=!1,N=void 0;try{for(var C,O=(0,$.default)(x.fileReferenceKeys);!(D=(C=O.next()).done);D=!0){var R=C.value,P=w[R];P&&r.getIn(["assets","assets",P])&&(a[P]=!0)}}catch(e){L=!0,N=e}finally{try{!D&&O.return&&O.return()}finally{if(L)throw N}}}}}catch(e){m=!0,v=e}finally{try{!g&&M.return&&M.return()}finally{if(m)throw v}}}}catch(e){l=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw c}}}}function s(e){var r=e,n=!0,o=!1,s=void 0;try{for(var u,l=(0,$.default)((0,se.default)(e.plugs));!(n=(u=l.next()).done);n=!0)!function(){var n=u.value;e.plugs[n].forEach(function(e,o){var s=we.default[n][e.type];if(s){var u=!0,l=!1,c=void 0;try{for(var f,d=(0,$.default)(s.referenceKeys);!(u=(f=d.next()).done);u=!0){var h=f.value,p=e[h],g=p&&(i[p]||t[p]);g&&(r.plugs[n][o][h]=g)}}catch(e){l=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}var m=!0,v=!1,y=void 0;try{for(var M,w=(0,$.default)(s.fileReferenceKeys);!(m=(M=w.next()).done);m=!0){var x=M.value,b=e[x];b&&a[b]&&(r.plugs[n][o][x]=a[b])}}catch(e){v=!0,y=e}finally{try{!m&&w.return&&w.return()}finally{if(v)throw y}}}})}()}catch(e){o=!0,s=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw s}}return r}var u=r.get("sceneGraph");n&&e.forEach(o),(0,se.default)(i).forEach(function(e){return i[e]=(0,de.default)()}),(0,se.default)(a).forEach(function(e){return a[e]=(0,de.default)()}),(0,se.default)(i).forEach(function(e){var n=u.nodes[e],a=d(n);a.id=i[e];var o=n.parent,l=o&&(i[o]||t[o]||o);a.parent=l,a.children=[];var c=!0,f=!1,h=void 0;try{for(var p,g=(0,$.default)(n.children);!(c=(p=g.next()).done);c=!0){var m=p.value;i[m]?a.children.push(i[m]):t[m]&&a.children.push(t[m])}}catch(e){f=!0,h=e}finally{try{!c&&g.return&&g.return()}finally{if(f)throw h}}r.dispatch({type:ye.ADD_NODE,payload:{id:i[e],parent:l,node:s(a)}})});var l=E(r,i[(0,se.default)(i)[0]]);return(0,se.default)(a).forEach(function(e){var t=r.getIn(["assets","assets",e]);t&&r.dispatch((0,ve.addFile)(t.set("id",a[e]).set("sceneId",l).toJS()))}),K.default.resolve(i)}}function I(e){var t=(0,se.default)(e.plugs).map(function(t){return{type:t,operators:e.plugs[t].map(function(e){return(0,Me.lookupOperator)(t,e.type,[]).export(e)})}});return{_id:e.id,name:e.name,type:e.type,plugs:t,nodes:[]}}function D(e,t){var r=void 0,n={},i=e.get("sceneGraph");return t.forEach(function(e){var t=i.nodes[e];if(t){var a=I(t);n[a._id]=a,r||(r=a),t.parent&&n[t.parent]&&n[t.parent].nodes.push(a)}}),r}function L(e,t,r){var n=_(e,t),i=(0,Ne.getWorldTransform)(e,n),a=new ce.Vector3,o=new ce.Quaternion,s=new ce.Vector3,u=new ce.Matrix4;if(u.copy(r),i){var l=new ce.Matrix4;l.getInverse(i,!0),u.multiplyMatrices(l,u)}u.decompose(a,o,s);var c=(new ce.Euler).setFromQuaternion(o,"ZYX");e.dispatch(M([t,"Transform",0,"translation"],{x:a.x,y:a.y,z:a.z})),e.dispatch(M([t,"Transform",0,"rotation"],{x:ce.Math.radToDeg(c.x),y:ce.Math.radToDeg(c.y),z:ce.Math.radToDeg(c.z)}))}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.get("sceneGraph");return r._v===r._ev?r:((0,xe.evaluateSceneGraph)(e,r,t),r)}function C(e){return{type:Ve,payload:e}}function O(e,t){var r=e.get("sceneGraph"),n=H(r,t);return r.objects[n.root]?K.default.resolve(!0):e.callApi({url:"/api/scene/"+r.activeSceneId+"/objects/"+r.refs.HEAD+"/"+t}).then(function(t){return e.dispatch(C(t))})}function R(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){var t=e.get("sceneGraph");if(!t.refs.HEAD&&!(0,se.default)(t.nodes).length)return K.default.resolve();var r=(0,Te.default)(e),n=r.objects,i=r.commit,a=r.commitHash,o=H(t,t.refs.HEAD);if(o&&i.root===o.root)return e.dispatch(C({refs:{INDEX:t.refs.HEAD}}));(0,ne.default)({},t.objects,n);return e.dispatch(C({objects:n,refs:{INDEX:a},commit:i}))}}function P(e){var t=e.toHEAD,r=e.secondHEAD,n=e.fromHEAD,a=e.options;return function(e){var o=e.get("sceneGraph");n||(n=o.refs.INDEX);var s=n&&H(o,n),u=H(o,t),l=r&&H(o,r);(0,_e.default)(o,u,s,l,{changeNode:function(t){var r=t.id,n=t.plugs,a=o.nodes[r];a.plugs=(0,ne.default)({},a.plugs,n),e.dispatch(x(r,i(a)))},addNode:function(t){return e.dispatch(h(t))},deleteNode:function(t){return e.dispatch(p(t))},addFile:function(t){return e.dispatch((0,ve.addFile)(t))}}),(0,Ae.default)(o,u,s,l,function(t,r){e.dispatch(M(t,r))}),e.dispatch({type:ke}),a.detached?e.dispatch({type:Ve,payload:{refs:{DETACHED_HEAD:t}}}):e.dispatch({type:Ve,payload:{refs:{HEAD:t,DETACHED_HEAD:null}}}),e.dispatch({type:Be})}}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){return r.dispatch(R()).then(function(){return O(r,e).then(function(){return r.dispatch(P({toHEAD:e,options:t}))})})}}function j(e){return function(t){var r=t.get("sceneGraph"),n=r.refs.HEAD;return t.dispatch(R()).then(function(){var i=r.refs.INDEX;return O(t,e).then(function(){return n===i?t.dispatch(P({toHEAD:e,options:{}})):(t.dispatch(P({toHEAD:n,options:{}})),t.dispatch(P({toHEAD:e,fromHEAD:n,secondHEAD:i,options:{}})))})})}}function U(e){return function(t){var r=t.get("sceneGraph"),n=r.history,i=e||n[1];if(!i)return console.log("Nothing to undo");t.dispatch(loadFromContent(i))}}function B(e){var t=e.get("sceneGraph"),r=t.history;return r&&r.length?t.commits[r[r.length-1]]:null}function V(e){for(var t=e.get("sceneGraph"),r=t.refs,n=r.HEAD,i=r.DETACHED_HEAD,a=n,o=[];a;){var s=H(t,a),u=i?a===i:a===n;s?(o.push([a,s,u]),a=1===s.parents.length&&s.parents[0]):a=null}return o}function k(e){return function(t){return t.callApi({url:"/api/scene/"+e+"/commits"}).then(function(e){return t.dispatch(C(e))})}}function F(e,t){return H(e.get("sceneGraph"),t)}function G(){return function(e){console.log("redo")}}function H(e,t){if(!e.commits[t]){if(!e.objects[t])return null;e.commits[t]=JSON.parse(e.objects[t]),e.commits[t].createdAt=new Date(e.commits[t].createdAt)}return e.commits[t]}function W(){return function(e){var t=e.get("sceneGraph"),r=t.activeSceneId;return e.dispatch(R()).then(function(n){var i=n.refs,a=n.commit,o=n.objects;if(a){var s=H(t,t.origin.HEAD),u=s?(0,De.default)(t,a,s):o;return u[i.INDEX]=o[i.INDEX],e.dispatch({type:Ve,payload:{refs:{HEAD:i.INDEX}}}),e.callApi({url:"https://clara.io/threehub/api/scene/"+r+"/commit",method:"POST",body:{objects:u,ref:i.INDEX}}).then(function(e){console.log("saved commit?",e)}).catch(function(e){console.log("handle api error",e)})}})}}function Y(){return function(e){var t=e.get("sceneGraph"),r=t.activeSceneId;return e.callApi({url:"/api/scene/"+r+"/sync/"+t.refs.HEAD}).then(function(r){var n=r.objects,i=r.HEAD;if(i!==t.refs.HEAD)return e.dispatch(C({objects:n,origin:{HEAD:i}})),e.dispatch(j(i))})}}function Q(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments[3];if(!n)return void console.error("traverseHierarchy: no callback provided");var i=e.get("sceneGraph"),a=i.activeSceneId,o=i.nodes,s=o[a]&&"Enable"===o[a].plugs.Properties[0].hierarchyVisibility,u=t||(0,Ne.find)(e,"Objects");if(!r||!s||(0,Ne.isVisible)(e,u)){var l=o[u];l&&l.children.forEach(function(t){var i=o[t].plugs.Properties,a=i&&i[0]&&i[0].visible;r&&!a||n(t),(!r||!s||s&&a)&&Q(e,t,r,n)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.virtualPivotId=t.controllerRootId=t.virtualTargetId=t.vrCameraId=t.virtualCameraId=t.deleteNode=t.addNode=t.virtualNodes=void 0;var q,X,Z=r(39),K=n(Z),J=r(24),$=n(J),ee=r(38),te=n(ee),re=r(2),ne=n(re),ie=r(49),ae=n(ie),oe=r(4),se=n(oe),ue=r(19),le=n(ue);t.initNode=i,t.addOperator=g,t.get=m,t.getVRCamera=v,t.setVRCamera=y,t.set=M,t.merge=w,t.replace=x,t.multi=b,t.touch=T,t.reparent=S,t.findParent=_,t.findRoot=E,t.clone=A,t.oldNodeJSON=I,t.exportJSON=D,t.updateNodeTransform=L,t.getEvalSceneGraph=N,t.setContentStore=C,t.saveIndex=R,t.checkout=z,t.rebase=j,t.undo=U,t.getLastCommit=B,t.getHistory=V,t.fetchCommits=k,t.getCommit=F,t.redo=G,t.commit=W,t.syncToLatest=Y,t.traverseHierarchy=Q;var ce=r(0),fe=r(79),de=n(fe),he=(r(32),r(106)),pe=n(he),ge=r(46),me=n(ge),ve=r(33),ye=r(58),Me=r(101),we=n(Me),xe=r(349),be=r(352),Te=n(be),Se=r(348),_e=n(Se),Ee=r(347),Ae=n(Ee),Ie=r(346),De=n(Ie),Le=r(128),Ne=r(7),Ce=r(20),Oe="SET",Re="MERGE",Pe="REPLACE",ze="MULTI",je="REPARENT",Ue="ADD_OPERATOR",Be="TOUCH",Ve="SET_CONTENT_STORE",ke="VERIFY",Fe="cccccccc-cccc-1ccc-accc-cccccccccccc",Ge="bbbbbbbb-bbbb-0bbb-zbbb-bbbbbbbbbbbb",He="dddddddd-dddd-0ddd-addd-dddddddddddd",We="eeeeeeee-eeee-4eee-feee-eeeeeeeeeeee",Ye="ffffffff-ffff-3fff-gfff-ffffffffffff",Qe=(t.virtualNodes=(q={},(0,le.default)(q,Fe,!0),(0,le.default)(q,Ge,!0),(0,le.default)(q,He,!0),(0,le.default)(q,Ye,!0),q),(0,me.default)({},(X={},(0,le.default)(X,Le.ActionTypes.INIT,function(e){return l()}),(0,le.default)(X,Be,function(e,t){return c(e,e.nodes[t]),e}),(0,le.default)(X,Oe,f),(0,le.default)(X,Re,function(e,t){var r=t.path,n=t.attrs;if(!r.length||3!==r.length)throw new Error("MERGE requires a path with length 3");if("object"!==(void 0===n?"undefined":(0,te.default)(n)))throw new Error("MERGE requires an object to merge in");var i=(0,ae.default)(r,3),a=i[0],o=i[1],s=i[2],u=e.nodes[a],l=u&&u.plugs[o],f=l&&l[s],d=f&&we.default[o][f.type];if(!d)throw new Error("Setting data on unknown operator: "+r.join(","));var h=!0,p=!1,g=void 0;try{for(var m,v=(0,$.default)((0,se.default)(n));!(h=(m=v.next()).done);h=!0){var y=m.value;d.set(f,y,n[y])}}catch(e){p=!0,g=e}finally{try{!h&&v.return&&v.return()}finally{if(p)throw g}}return c(e,u,o),e}),(0,le.default)(X,Pe,function(e,t){var r=t.id,n=t.node,i=e.nodes[r];if(i){var a=i._v;return e.nodes[r]=n,n._v=a,c(e,n),e}}),(0,le.default)(X,ye.ADD_NODE,function(e,t){var r=t.id,n=t.parent,i=n&&e.nodes[n];if(n&&!i)throw new Error("Unknown parent: '"+n+"'");if(e.nodes[r])throw new Error("Adding a node that already exists: "+r);return e.nodes[r]=t.node?a(t.node):s(t),n&&!i.children&&(i.children=[]),n&&-1===i.children.indexOf(r)&&i.children.push(r),c(e,i),e}),(0,le.default)(X,ye.DELETE_NODE,function(e,t){function r(t){var n=e.nodes[t];if(n){var i=!0,a=!1,o=void 0;try{for(var s,u=(0,$.default)(n.children||[]);!(i=(s=u.next()).done);i=!0){r(s.value)}}catch(e){a=!0,o=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw o}}var l=e.nodeReferences.from[t];(0,se.default)(l||{}).forEach(function(t){var r=JSON.parse(t);f(e,{path:r,value:null})}),e.cameraReferences[t]&&delete e.cameraReferences[t],e.worldTransformReferences[t]&&delete e.worldTransformReferences[t],delete e.nodes[t]}return n}var n=r(t);if(!n)return e;var i=n.parent&&e.nodes[n.parent];if(i){var a=i.children.indexOf(t);-1!==a&&i.children.splice(a,1)}return c(e,i),e}),(0,le.default)(X,Ue,function(e,t){var r=t.id,n=t.plug,i=t.op,a=e.nodes[r];if(!a)throw new Error("Unknown node: "+r);var o=a.plugs[n];if(!o)throw new Error("Unknown plug: "+n);if(!Array.isArray(i))throw new Error("Expect op to be an array of 2 or 3");var s=(0,ae.default)(i,3),u=s[0],l=s[1],f=s[2],d=(0,Me.lookupOperator)(n,u,a.warnings);return o.push(d.init(u,l,f)),c(e,a,n),e}),(0,le.default)(X,ze,function(e,t){var r=e._v;for(var n in t){var i=t[n];i.type===Oe&&f(e,i.payload)}return e._v=r+1,e}),(0,le.default)(X,je,function(e,t){var r=t.parentId,n=t.childIds,i=e.nodes[r];return i?(n.slice().forEach(function(t){var n=e.nodes[t];if(n){var a=n&&n.parent,o=a&&e.nodes[a],s=o&&o.children?o.children.indexOf(t):-1;-1!==s&&(o.children.splice(s,1),c(e,o)),i.children.push(t),n.parent=r,c(e,n)}}),c(e,i),e):(console.warn("Unknown parent for reparent: "+r),e)}),(0,le.default)(X,Ve,function(e,t){var r=t.objects,n=t.refs,i=t.origin;return r&&(0,ne.default)(e.objects,r),i&&(0,ne.default)(e.origin,i),n&&(0,ne.default)(e.refs,n),e}),(0,le.default)(X,ye.USE_SCENE,function(e,t){return e.activeSceneId=t,e}),(0,le.default)(X,ke,function(e){return initVirtualNodes(e),e}),(0,le.default)(X,ye.LOAD_SCENE,function(e,t){var r=t.scene,n=t.nodes;if(r)throw new Error("Loading incompatible scene format");var a=(0,pe.default)(i,JSON.parse(n));return(0,ne.default)(e.nodes,a),u(e),c(e),e}),(0,le.default)(X,ye.CLEAR_SCENE,function(e,t){return l(e),u(e,{force:!0}),e}),(0,le.default)(X,ye.LOADED_FILE,function(e,t){if(e.fileReferences.from[t]){var r=!0,n=!1,i=void 0;try{for(var a,o=(0,$.default)((0,se.default)(e.fileReferences.from[t]));!(r=(a=o.next()).done);r=!0){var s=a.value,u=JSON.parse(s),l=(0,ae.default)(u,3),f=l[0],d=l[1];l[2];c(e,e.nodes[f],d)}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}}return e}),X)));t.addNode=h,t.deleteNode=p;var qe={reducer:Qe,actions:{set:M,merge:w,multi:b,addNode:h,deleteNode:p,reparent:S,clone:A,addOperator:g,undo:U,redo:G,saveIndex:R,touch:T,setVRCamera:y},selectors:{get:m,exportJSON:D,getVRCamera:v}};t.default=qe,t.virtualCameraId=Fe,t.vrCameraId=Ge,t.virtualTargetId=He,t.controllerRootId=We,t.virtualPivotId=Ye},function(e,t,r){var n=r(29),i=r(9),a=r(57),o=r(62),s=function(e,t,r){var u,l,c,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,g=e&s.B,m=e&s.W,v=d?i:i[t]||(i[t]={}),y=v.prototype,M=d?n:h?n[t]:(n[t]||{}).prototype;d&&(r=t);for(u in r)(l=!f&&M&&void 0!==M[u])&&u in v||(c=l?M[u]:r[u],v[u]=d&&"function"!=typeof M[u]?r[u]:g&&l?a(c,n):m&&M[u]==c?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(c):p&&"function"==typeof c?a(Function.call,c):c,p&&((v.virtual||(v.virtual={}))[u]=c,e&s.R&&y&&!y[u]&&o(y,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var n=r(14);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i,a=r(19),o=n(a),s=r(39),u=n(s),l=r(261),c=n(l),f=r(48),d=n(f),h=r(2),p=n(h),g=r(330);g.PMREMGenerator=function(e,t,r){this.sourceTexture=e,this.resolution=void 0!==r?r:256,this.samplesPerLevel=void 0!==t?t:64,this.samplesPerLevel=Math.min(128,this.samplesPerLevel);var n=e.encoding===g.LinearEncoding||e.encoding===g.GammaEncoding||e.encoding===g.sRGBEncoding;this.sourceTexture.minFilter=n?g.LinearFilter:g.NearestFilter,this.sourceTexture.magFilter=n?g.LinearFilter:g.NearestFilter,this.sourceTexture.generateMipmaps=this.sourceTexture.generateMipmaps&&n,this.cubeLods=[];var i=this.resolution,a={format:this.sourceTexture.format,magFilter:this.sourceTexture.magFilter,minFilter:this.sourceTexture.minFilter,type:this.sourceTexture.type,generateMipmaps:this.sourceTexture.generateMipmaps,anisotropy:this.sourceTexture.anisotropy,encoding:this.sourceTexture.encoding};this.numLods=Math.log(i)/Math.log(2)-2;for(var o=0;o<this.numLods;o++){var s=new g.WebGLRenderTargetCube(i,i,a);s.texture.name="PMREMGenerator.cube"+o,this.cubeLods.push(s),i=Math.max(16,i/2)}this.camera=new g.OrthographicCamera(-1,1,1,-1,0,1e3),this.shader=this.getShader(),this.shader.defines.SAMPLES_PER_LEVEL=this.samplesPerLevel,this.planeMesh=new g.Mesh(new g.PlaneGeometry(2,2,0),this.shader),this.planeMesh.material.side=g.DoubleSide,this.scene=new g.Scene,this.scene.add(this.planeMesh),this.scene.add(this.camera),this.shader.uniforms.envMap.value=this.sourceTexture,this.shader.envMap=this.sourceTexture},g.PMREMGenerator.prototype={constructor:g.PMREMGenerator,update:function(e){this.shader.uniforms.envMap.value=this.sourceTexture,this.shader.envMap=this.sourceTexture;var t=e.gammaInput,r=e.gammaOutput,n=e.toneMapping,i=e.toneMappingExposure;e.toneMapping=g.LinearToneMapping,e.toneMappingExposure=1,e.gammaInput=!1,e.gammaOutput=!1;for(var a=0;a<this.numLods;a++){var o=a/(this.numLods-1);this.shader.uniforms.roughness.value=.95*o,this.shader.uniforms.queryScale.value.x=0==a?-1:1;var s=this.cubeLods[a].width;this.shader.uniforms.mapSize.value=s,this.renderToCubeMapTarget(e,this.cubeLods[a]),a<5&&(this.shader.uniforms.envMap.value=this.cubeLods[a].texture)}e.toneMapping=n,e.toneMappingExposure=i,e.gammaInput=t,e.gammaOutput=r},renderToCubeMapTarget:function(e,t){for(var r=0;r<6;r++)this.renderToCubeMapTargetFace(e,t,r)},renderToCubeMapTargetFace:function(e,t,r){t.activeCubeFace=r,this.shader.uniforms.faceIndex.value=r,this.shader.uniforms.seed.value=Math.random(),e.render(this.scene,this.camera,t,!0)},getShader:function(){return new g.ShaderMaterial({defines:{SAMPLES_PER_LEVEL:20},uniforms:{faceIndex:{value:0},roughness:{value:.5},mapSize:{value:.5},envMap:{value:null},queryScale:{value:new g.Vector3(1,1,1)},testColor:{value:new g.Vector3(1,1,1)},seed:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"precision highp float;\n\t\t\t\t#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform int faceIndex;\n\t\t\t\tuniform float roughness;\n\t\t\t\tuniform samplerCube envMap;\n\t\t\t\tuniform float mapSize;\n\t\t\t\tuniform vec3 testColor;\n\t\t\t\tuniform vec3 queryScale;\n\t\t\t\tuniform float seed;\n\t\t\t\tfloat poissonLine[128];\n\t\t\t\tvoid initPoissonTable()\t{\n\t\t\t\t\tpoissonLine[0] = 0.68999;\n\t\t\t\t\tpoissonLine[1] = 0.45883;\n\t\t\t\t\tpoissonLine[2] = 0.1408;\n\t\t\t\t\tpoissonLine[3] = 0.58453;\n\t\t\t\t\tpoissonLine[4] = 0.02776;\n\t\t\t\t\tpoissonLine[5] = 0.3657;\n\t\t\t\t\tpoissonLine[6] = 0.05616;\n\t\t\t\t\tpoissonLine[7] = 0.22111;\n\t\t\t\t\tpoissonLine[8] = 0.16301;\n\t\t\t\t\tpoissonLine[9] = 0.7939;\n\t\t\t\t\tpoissonLine[10] = 0.94334;\n\t\t\t\t\tpoissonLine[11] = 0.93425;\n\t\t\t\t\tpoissonLine[12] = 0.87263;\n\t\t\t\t\tpoissonLine[13] = 0.73582;\n\t\t\t\t\tpoissonLine[14] = 0.12286;\n\t\t\t\t\tpoissonLine[15] = 0.26529;\n\t\t\t\t\tpoissonLine[16] = 0.72647;\n\t\t\t\t\tpoissonLine[17] = 0.83657;\n\t\t\t\t\tpoissonLine[18] = 0.96543;\n\t\t\t\t\tpoissonLine[19] = 0.32305;\n\t\t\t\t\tpoissonLine[20] = 0.25021;\n\t\t\t\t\tpoissonLine[21] = 0.58689;\n\t\t\t\t\tpoissonLine[22] = 0.41629;\n\t\t\t\t\tpoissonLine[23] = 0.12616;\n\t\t\t\t\tpoissonLine[24] = 0.91421;\n\t\t\t\t\tpoissonLine[25] = 0.52287;\n\t\t\t\t\tpoissonLine[26] = 0.20964;\n\t\t\t\t\tpoissonLine[27] = 0.17271;\n\t\t\t\t\tpoissonLine[28] = 0.84766;\n\t\t\t\t\tpoissonLine[29] = 0.0022;\n\t\t\t\t\tpoissonLine[30] = 0.40568;\n\t\t\t\t\tpoissonLine[31] = 0.04687;\n\t\t\t\t\tpoissonLine[32] = 0.11933;\n\t\t\t\t\tpoissonLine[33] = 0.67212;\n\t\t\t\t\tpoissonLine[34] = 0.18933;\n\t\t\t\t\tpoissonLine[35] = 0.86945;\n\t\t\t\t\tpoissonLine[36] = 0.52297;\n\t\t\t\t\tpoissonLine[37] = 0.84475;\n\t\t\t\t\tpoissonLine[38] = 0.74494;\n\t\t\t\t\tpoissonLine[39] = 0.02533;\n\t\t\t\t\tpoissonLine[40] = 0.6232;\n\t\t\t\t\tpoissonLine[41] = 0.96762;\n\t\t\t\t\tpoissonLine[42] = 0.00449;\n\t\t\t\t\tpoissonLine[43] = 0.7535;\n\t\t\t\t\tpoissonLine[44] = 0.48421;\n\t\t\t\t\tpoissonLine[45] = 0.07936;\n\t\t\t\t\tpoissonLine[46] = 0.84871;\n\t\t\t\t\tpoissonLine[47] = 0.47694;\n\t\t\t\t\tpoissonLine[48] = 0.22845;\n\t\t\t\t\tpoissonLine[49] = 0.37711;\n\t\t\t\t\tpoissonLine[50] = 0.49824;\n\t\t\t\t\tpoissonLine[51] = 0.35694;\n\t\t\t\t\tpoissonLine[52] = 0.38277;\n\t\t\t\t\tpoissonLine[53] = 0.83666;\n\t\t\t\t\tpoissonLine[54] = 0.57835;\n\t\t\t\t\tpoissonLine[55] = 0.49536;\n\t\t\t\t\tpoissonLine[56] = 0.0132;\n\t\t\t\t\tpoissonLine[57] = 0.4593;\n\t\t\t\t\tpoissonLine[58] = 0.3938;\n\t\t\t\t\tpoissonLine[59] = 0.61267;\n\t\t\t\t\tpoissonLine[60] = 0.47573;\n\t\t\t\t\tpoissonLine[61] = 0.2202;\n\t\t\t\t\tpoissonLine[62] = 0.11283;\n\t\t\t\t\tpoissonLine[63] = 0.04534;\n\t\t\t\t\tpoissonLine[64] = 0.30502;\n\t\t\t\t\tpoissonLine[65] = 0.40026;\n\t\t\t\t\tpoissonLine[66] = 0.30118;\n\t\t\t\t\tpoissonLine[67] = 0.73927;\n\t\t\t\t\tpoissonLine[68] = 0.82648;\n\t\t\t\t\tpoissonLine[69] = 0.19517;\n\t\t\t\t\tpoissonLine[70] = 0.20144;\n\t\t\t\t\tpoissonLine[71] = 0.72373;\n\t\t\t\t\tpoissonLine[72] = 0.77945;\n\t\t\t\t\tpoissonLine[73] = 0.37953;\n\t\t\t\t\tpoissonLine[74] = 0.67661;\n\t\t\t\t\tpoissonLine[75] = 0.13671;\n\t\t\t\t\tpoissonLine[76] = 0.22514;\n\t\t\t\t\tpoissonLine[77] = 0.45704;\n\t\t\t\t\tpoissonLine[78] = 0.44605;\n\t\t\t\t\tpoissonLine[79] = 0.8856;\n\t\t\t\t\tpoissonLine[80] = 0.88545;\n\t\t\t\t\tpoissonLine[81] = 0.32133;\n\t\t\t\t\tpoissonLine[82] = 0.66175;\n\t\t\t\t\tpoissonLine[83] = 0.01964;\n\t\t\t\t\tpoissonLine[84] = 0.14848;\n\t\t\t\t\tpoissonLine[85] = 0.37481;\n\t\t\t\t\tpoissonLine[86] = 0.39741;\n\t\t\t\t\tpoissonLine[87] = 0.2039;\n\t\t\t\t\tpoissonLine[88] = 0.50282;\n\t\t\t\t\tpoissonLine[89] = 0.00156;\n\t\t\t\t\tpoissonLine[90] = 0.69715;\n\t\t\t\t\tpoissonLine[91] = 0.71233;\n\t\t\t\t\tpoissonLine[92] = 0.76777;\n\t\t\t\t\tpoissonLine[93] = 0.90509;\n\t\t\t\t\tpoissonLine[94] = 0.19425;\n\t\t\t\t\tpoissonLine[95] = 0.64406;\n\t\t\t\t\tpoissonLine[96] = 0.06155;\n\t\t\t\t\tpoissonLine[97] = 0.60422;\n\t\t\t\t\tpoissonLine[98] = 0.65107;\n\t\t\t\t\tpoissonLine[99] = 0.52872;\n\t\t\t\t\tpoissonLine[100] = 0.481;\n\t\t\t\t\tpoissonLine[101] = 0.95757;\n\t\t\t\t\tpoissonLine[102] = 0.53635;\n\t\t\t\t\tpoissonLine[103] = 0.42727;\n\t\t\t\t\tpoissonLine[104] = 0.91034;\n\t\t\t\t\tpoissonLine[105] = 0.24529;\n\t\t\t\t\tpoissonLine[106] = 0.75649;\n\t\t\t\t\tpoissonLine[107] = 0.13242;\n\t\t\t\t\tpoissonLine[108] = 0.75987;\n\t\t\t\t\tpoissonLine[109] = 0.62928;\n\t\t\t\t\tpoissonLine[110] = 0.84537;\n\t\t\t\t\tpoissonLine[111] = 0.95954;\n\t\t\t\t\tpoissonLine[112] = 0.47203;\n\t\t\t\t\tpoissonLine[113] = 0.6294;\n\t\t\t\t\tpoissonLine[114] = 0.67411;\n\t\t\t\t\tpoissonLine[115] = 0.89943;\n\t\t\t\t\tpoissonLine[116] = 0.77134;\n\t\t\t\t\tpoissonLine[117] = 0.77034;\n\t\t\t\t\tpoissonLine[118] = 0.46964;\n\t\t\t\t\tpoissonLine[119] = 0.78511;\n\t\t\t\t\tpoissonLine[120] = 0.74841;\n\t\t\t\t\tpoissonLine[121] = 0.51348;\n\t\t\t\t\tpoissonLine[122] = 0.58248;\n\t\t\t\t\tpoissonLine[123] = 0.00892;\n\t\t\t\t\tpoissonLine[124] = 0.89159;\n\t\t\t\t\tpoissonLine[125] = 0.14869;\n\t\t\t\t\tpoissonLine[126] = 0.39455;\n\t\t\t\t\tpoissonLine[127] = 0.75754;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvec3 ImportanceSampleGGX( float radians, float radius, mat3 vecSpace, float roughness )\n\t\t\t\t{\n\t\t\t\t\tfloat rad = radius * roughness;\n\t\t\t\t\tfloat up = sqrt( max( 1.0 - pow2( rad ), 0.0001 ) );\n\t\t\t\t\treturn vecSpace * vec3 (rad * cos( radians ), rad * sin( radians ), up );\n\t\t\t\t}\n\t\t\t\tmat3 matrixFromVector(vec3 n) {\n\t\t\t\t\tfloat a = 1.0 / (1.0 + n.z);\n\t\t\t\t\tfloat b = -n.x * n.y * a;\n\t\t\t\t\tvec3 b1 = vec3(1.0 - n.x * n.x * a, b, -n.x);\n\t\t\t\t\tvec3 b2 = vec3(b, 1.0 - n.y * n.y * a, -n.y);\n\t\t\t\t\treturn mat3(b1, b2, n);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfloat unitToRadians( float unit ) { return PI * 2.0 * unit; }\n\t\t\t\t\n\t\t\t\tvoid main() {\n\t\t\t\t\tinitPoissonTable();\n\t\t\t\t\tvec3 sampleDirection;\n\t\t\t\t\tvec2 uv = vUv*2.0 - 1.0;\n\t\t\t\t\tfloat offset = -1.0/mapSize;\n\t\t\t\t\tconst float a = -1.0;\n\t\t\t\t\tconst float b = 1.0;\n\t\t\t\t\tfloat c = -1.0 + offset;\n\t\t\t\t\tfloat d = 1.0 - offset;\n\t\t\t\t\tfloat bminusa = b - a;\n\t\t\t\t\tuv.x = (uv.x - a)/bminusa * d - (uv.x - b)/bminusa * c;\n\t\t\t\t\tuv.y = (uv.y - a)/bminusa * d - (uv.y - b)/bminusa * c;\n\t\t\t\t\tif (faceIndex==0) {\n\t\t\t\t\t\tsampleDirection = vec3(1.0, -uv.y, -uv.x);\n\t\t\t\t\t} else if (faceIndex==1) {\n\t\t\t\t\t\tsampleDirection = vec3(-1.0, -uv.y, uv.x);\n\t\t\t\t\t} else if (faceIndex==2) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, 1.0, uv.y);\n\t\t\t\t\t} else if (faceIndex==3) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -1.0, -uv.y);\n\t\t\t\t\t} else if (faceIndex==4) {\n\t\t\t\t\t\tsampleDirection = vec3(uv.x, -uv.y, 1.0);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsampleDirection = vec3(-uv.x, -uv.y, -1.0);\n\t\t\t\t\t}\n\t\t\t\t\tmat3 vecSpace = matrixFromVector(normalize(sampleDirection * queryScale));\n\t\t\t\t\tvec3 rgbColor = vec3(0.0);\n\t\t\t\t\tconst int NumSamples = SAMPLES_PER_LEVEL;\n\t\t\t\t\tvec3 direction;\n\t\t\t\t\tfloat invNumSamples = 1.0 / float(NumSamples);\n\t\t\t\t\tfor( int i = 0; i < NumSamples; i ++ ) {\n\t\t\t\t\t\tfloat unit = ( float(i) ) * invNumSamples;\n\t\t\t\t\t\tfloat angle = unitToRadians( unit + 0.5 );\n\t\t\t\t\t\tfloat radius = poissonLine[ i ];\n\t\t\t\t\t\tdirection = ImportanceSampleGGX( angle, radius, vecSpace, roughness);\n\t\t\t\t\t\tvec3 color = envMapTexelToLinear(textureCube(envMap,direction)).rgb;\n\t\t\t\t\t\trgbColor.rgb += color;\n\t\t\t\t\t}\n\t\t\t\t\trgbColor *= invNumSamples;\n\t\t\t\t\t//rgbColor = testColorMap( roughness ).rgb;\n\t\t\t\t\tgl_FragColor = linearToOutputTexel( vec4( rgbColor, 1.0 ) );\n\t\t\t\t}",blending:g.CustomBlending,blendSrc:g.OneFactor,blendDst:g.ZeroFactor,blendSrcAlpha:g.OneFactor,blendDstAlpha:g.ZeroFactor,blendEquation:g.AddEquation})}},g.PMREMCubeUVPacker=function(e,t){this.cubeLods=e,this.numLods=t;var r=4*e[0].width,n=e[0].texture,i={format:n.format,magFilter:n.magFilter,minFilter:n.minFilter,type:n.type,generateMipmaps:n.generateMipmaps,anisotropy:n.anisotropy,encoding:n.encoding===g.RGBEEncoding?g.RGBM16Encoding:n.encoding};i.encoding===g.RGBM16Encoding&&(i.magFilter=g.LinearFilter,i.minFilter=g.LinearFilter),this.CubeUVRenderTarget=new g.WebGLRenderTarget(r,r,i),this.CubeUVRenderTarget.texture.name="PMREMCubeUVPacker.cubeUv",this.CubeUVRenderTarget.texture.mapping=g.CubeUVReflectionMapping,this.camera=new g.OrthographicCamera(.5*-r,.5*r,.5*-r,.5*r,0,1e3),this.scene=new g.Scene,this.scene.add(this.camera),this.objects=[];var a=[];a.push(new g.Vector2(0,0)),a.push(new g.Vector2(1,0)),a.push(new g.Vector2(2,0)),a.push(new g.Vector2(0,1)),a.push(new g.Vector2(1,1)),a.push(new g.Vector2(2,1));var o=r;r=e[0].width;var s=0,u=4;this.numLods=Math.log(e[0].width)/Math.log(2)-2;for(var l=0;l<this.numLods;l++){var c=.5*(o-o/u);u*=2;for(var f=0,d=0,h=r,p=0;p<6;p++){for(var m=0;m<6;m++){var v=this.getShader();v.uniforms.envMap.value=this.cubeLods[l].texture,v.envMap=this.cubeLods[l].texture,v.uniforms.faceIndex.value=m,v.uniforms.mapSize.value=h;var y=(v.uniforms.testColor.value,new g.Mesh(new g.PlaneGeometry(h,h,0),v));y.position.x=a[m].x*h-c+f,y.position.y=a[m].y*h-c+s+d,y.material.side=g.DoubleSide,this.scene.add(y),this.objects.push(y)}d+=1.75*h,f+=1.25*h,h/=2}s+=2*r,r/=2}},g.PMREMCubeUVPacker.prototype={constructor:g.PMREMCubeUVPacker,update:function(e){var t=e.gammaInput,r=e.gammaOutput,n=e.toneMapping,i=e.toneMappingExposure;e.gammaInput=!1,e.gammaOutput=!1,e.toneMapping=g.LinearToneMapping,e.toneMappingExposure=1,e.render(this.scene,this.camera,this.CubeUVRenderTarget,!1),e.toneMapping=n,e.toneMappingExposure=i,e.gammaInput=t,e.gammaOutput=r},getShader:function(){return new g.ShaderMaterial({uniforms:{faceIndex:{value:0},mapSize:{value:0},envMap:{value:null},testColor:{value:new g.Vector3(1,1,1)}},vertexShader:"precision highp float;\t\t\t\tvarying vec2 vUv;\t\t\t\tvoid main() {\t\t\t\t\tvUv = uv;\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\t\t\t\t}",fragmentShader:"precision highp float;\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform samplerCube envMap;\t\t\t\tuniform float mapSize;\t\t\t\tuniform vec3 testColor;\t\t\t\tuniform int faceIndex;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec3 sampleDirection;\t\t\t\t\tvec2 uv = vUv;\t\t\t\t\tuv = uv * 2.0 - 1.0;\t\t\t\t\tuv.y *= -1.0;\t\t\t\t\tif(faceIndex == 0) {\t\t\t\t\t\tsampleDirection = normalize(vec3(1.0, uv.y, -uv.x));\t\t\t\t\t} else if(faceIndex == 1) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, 1.0, uv.y));\t\t\t\t\t} else if(faceIndex == 2) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, uv.y, 1.0));\t\t\t\t\t} else if(faceIndex == 3) {\t\t\t\t\t\tsampleDirection = normalize(vec3(-1.0, uv.y, uv.x));\t\t\t\t\t} else if(faceIndex == 4) {\t\t\t\t\t\tsampleDirection = normalize(vec3(uv.x, -1.0, -uv.y));\t\t\t\t\t} else {\t\t\t\t\t\tsampleDirection = normalize(vec3(-uv.x, uv.y, -1.0));\t\t\t\t\t}\t\t\t\t\tvec4 color = envMapTexelToLinear( textureCube( envMap, sampleDirection ) );\t\t\t\t\tgl_FragColor = linearToOutputTexel( color );\t\t\t\t}",blending:g.CustomBlending,premultipliedAlpha:!1,blendSrc:g.OneFactor,blendDst:g.ZeroFactor,blendSrcAlpha:g.OneFactor,blendDstAlpha:g.ZeroFactor,blendEquation:g.AddEquation})}},g.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")},g.CompositeShader={defines:{BLENDING:g.NoBlending},uniforms:{tSource:{type:"t",value:null},opacitySource:{type:"f",value:1},tDestination:{type:"t",value:null},opacityDestination:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tSource;","uniform float opacitySource;","uniform sampler2D tDestination;","uniform float opacityDestination;","varying vec2 vUv;","void main() {","vec4 d = opacityDestination * texture2D( tDestination, vUv );","vec4 s = opacitySource * texture2D( tSource, vUv );","#if (BLENDING == "+g.NormalBlending+")","gl_FragColor = d * ( 1.0 - s.a ) + s;","#elif (BLENDING == "+g.AdditiveBlending+")","gl_FragColor = d + s;","#elif (BLENDING == "+g.SubtractiveBlending+")","gl_FragColor = d - s;","#elif (BLENDING == "+g.MultiplyBlending+")","gl_FragColor = d * s;","#else","gl_FragColor = s;","#endif","}"].join("\n")},g.GlossyMirrorShader={defines:{SPECULAR_MAP:0,ROUGHNESS_MAP:0,GLOSSY_REFLECTIONS:1,REFLECTION_LOD_LEVELS:4,PERSPECTIVE_CAMERA:1},uniforms:{metalness:{type:"f",value:0},specularColor:{type:"c",value:new g.Color(16777215)},tSpecular:{type:"t",value:null},tReflection:{type:"t",value:null},tReflection1:{type:"t",value:null},tReflection2:{type:"t",value:null},tReflection3:{type:"t",value:null},tReflection4:{type:"t",value:null},tReflectionDepth:{type:"t",value:null},roughness:{type:"f",value:0},distanceFade:{type:"f",value:.01},fresnelStrength:{type:"f",value:1},reflectionTextureMatrix:{type:"m4",value:new g.Matrix4},mirrorCameraWorldMatrix:{type:"m4",value:new g.Matrix4},mirrorCameraProjectionMatrix:{type:"m4",value:new g.Matrix4},mirrorCameraInverseProjectionMatrix:{type:"m4",value:new g.Matrix4},mirrorCameraNear:{type:"f",value:0},mirrorCameraFar:{type:"f",value:0},screenSize:{type:"v2",value:new g.Vector2},mirrorNormal:{type:"v3",value:new g.Vector3},mirrorWorldPosition:{type:"v3",value:new g.Vector3}},vertexShader:["uniform mat4 reflectionTextureMatrix;","varying vec4 mirrorCoord;","varying vec3 vecPosition;","varying vec3 worldNormal;","varying vec2 vUv;","void main() {","vUv = uv;","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec4 worldPosition = modelMatrix * vec4( position, 1.0 );","vecPosition = cameraPosition - worldPosition.xyz;","worldNormal = (modelMatrix * vec4(normal,0.0)).xyz;","mirrorCoord = reflectionTextureMatrix * worldPosition;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"),blending:g.NormalBlending,transparent:!0,fragmentShader:["#include <common>","#include <packing>","#include <bsdfs>","uniform float roughness;","#if ROUGHNESS_MAP == 1","uniform sampler2D tRoughness;","#endif","uniform float metalness;","uniform float distanceFade;","uniform float fresnelStrength;","uniform vec3 specularColor;","#if SPECULAR_MAP == 1","uniform sampler2D tSpecular;","#endif","uniform sampler2D tReflection;","#if GLOSSY_REFLECTIONS == 1","uniform sampler2D tReflection1;","uniform sampler2D tReflection2;","uniform sampler2D tReflection3;","uniform sampler2D tReflection4;","uniform sampler2D tReflectionDepth;","#endif","varying vec3 vecPosition;","varying vec3 worldNormal;","varying vec2 vUv;","varying vec4 mirrorCoord;","uniform mat4 mirrorCameraProjectionMatrix;","uniform mat4 mirrorCameraInverseProjectionMatrix;","uniform mat4 mirrorCameraWorldMatrix;","uniform float mirrorCameraNear;","uniform float mirrorCameraFar;","uniform vec2 screenSize;","uniform vec3 mirrorNormal;","uniform vec3 mirrorWorldPosition;","#if GLOSSY_REFLECTIONS == 1","float getReflectionDepth() {","return unpackRGBAToDepth( texture2DProj( tReflectionDepth, mirrorCoord ) );","}","float getReflectionViewZ( const in float reflectionDepth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );","#else","return orthographicDepthToViewZ( reflectionDepth, mirrorCameraNear, mirrorCameraFar );","#endif","}","vec3 getReflectionViewPosition( const in vec2 screenPosition, const in float reflectionDepth, const in float reflectionViewZ ) {","float clipW = mirrorCameraProjectionMatrix[2][3] * reflectionViewZ + mirrorCameraProjectionMatrix[3][3];","vec4 clipPosition = vec4( ( vec3( screenPosition, reflectionDepth ) - 0.5 ) * 2.0, 1.0 );","clipPosition *= clipW;","return ( mirrorCameraInverseProjectionMatrix * clipPosition ).xyz;","}","#endif","vec4 getReflection( const in vec4 mirrorCoord, const in float lodLevel ) {","#if GLOSSY_REFLECTIONS == 0","return texture2DProj( tReflection, mirrorCoord );","#else","vec4 color0, color1;","float alpha;","if( lodLevel < 1.0 ) {","color0 = texture2DProj( tReflection, mirrorCoord );","color1 = texture2DProj( tReflection1, mirrorCoord );","alpha = lodLevel;","}","else if( lodLevel < 2.0) {","color0 = texture2DProj( tReflection1, mirrorCoord );","color1 = texture2DProj( tReflection2, mirrorCoord );","alpha = lodLevel - 1.0;","}","else if( lodLevel < 3.0 ) {","color0 = texture2DProj( tReflection2, mirrorCoord );","color1 = texture2DProj( tReflection3, mirrorCoord );","alpha = lodLevel - 2.0;","}","else {","color0 = texture2DProj( tReflection3, mirrorCoord );","color1 = color0;","alpha = 0.0;","}","return mix( color0, color1, alpha );","#endif","}","void main() {","vec3 specular = specularColor;","#if SPECULAR_MAP == 1","specular *= texture2D( tSpecular, vUv );","#endif","float fade = 1.0;","#if GLOSSY_REFLECTIONS == 1","float localRoughness = roughness;","#if ROUGHNESS_MAP == 1","localRoughness *= texture2D( tRoughness, vUv ).r;","#endif","vec2 screenPosition = gl_FragCoord.xy / screenSize;","float reflectionDepth = getReflectionDepth();","float reflectionViewZ = getReflectionViewZ( reflectionDepth );","vec3 reflectionViewPosition = getReflectionViewPosition( screenPosition, reflectionDepth, reflectionViewZ );","vec3 reflectionWorldPosition = ( mirrorCameraWorldMatrix * vec4( reflectionViewPosition, 1.0 ) ).xyz;","vec3 closestPointOnMirror = projectOnPlane( reflectionWorldPosition, mirrorWorldPosition, mirrorNormal );","vec3 pointOnMirror = linePlaneIntersect( cameraPosition, normalize( reflectionWorldPosition - cameraPosition ), mirrorWorldPosition, mirrorNormal );","float distance = length( closestPointOnMirror - reflectionWorldPosition );","localRoughness = localRoughness * distance * 0.2;","float lodLevel = localRoughness;","fade = 1.0 - smoothstep( 0.0, 1.0, distanceFade * distance * 0.2 );","#else","float lodLevel = 0.0;","#endif","vec4 reflection = getReflection( mirrorCoord, lodLevel );","float dotNV = clamp( dot( normalize( worldNormal ), normalize( vecPosition ) ), EPSILON, 1.0 );","specular = mix( vec3( 0.05 ), specular, metalness );","vec3 fresnel;","if( fresnelStrength < 0.0 ) {","fresnel = mix( specular, specular * pow( dotNV, 2.0 ), -fresnelStrength ) * pow( 1.0 - roughness, 2.0 );","} else {","fresnel = mix( specular, F_Schlick( specular, dotNV ), fresnelStrength ) * pow( 1.0 - roughness, 2.0 );","}","gl_FragColor = vec4( reflection.rgb, fresnel * fade * reflection.a );","}"].join("\n")},g.ShaderChunk.sao=["#include <packing>","float getDepth( const in vec2 screenPosition ) {","#if DEPTH_PACKING == 1","return unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );","#else","return texture2D( tDepth, screenPosition ).x;","#endif","}","vec4 setDepth( const in float depth ) {","#if DEPTH_PACKING == 1","return packDepthToRGBA( depth );","#else","return vec4( depth, 0, 0, 0 );","#endif","}","float getViewZ( const in float depth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","#else","return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","#endif","}"].join("\n"),g.SAOShader={blending:g.NoBlending,defines:{NUM_SAMPLES:13,NUM_RINGS:7,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:1,DEPTH_PACKING:1,DEPTH_MIPS:0,PERSPECTIVE_CAMERA:1},extensions:{derivatives:!0},uniforms:{tDepth:{type:"t",value:null},tDepth1:{type:"t",value:null},tDepth2:{type:"t",value:null},tDepth3:{type:"t",value:null},tDiffuse:{type:"t",value:null},tNormal:{type:"t",value:null},size:{type:"v2",value:new g.Vector2(512,512)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},cameraProjectionMatrix:{type:"m4",value:new g.Matrix4},cameraInverseProjectionMatrix:{type:"m4",value:new g.Matrix4},intensity:{type:"f",value:.1},occlusionSphereWorldRadius:{type:"f",value:100},worldToScreenRatio:{type:"v2",value:new g.Vector2(1,1)},randomSeed:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","#if DIFFUSE_TEXTURE == 1","uniform sampler2D tDiffuse;","#endif","#define MAX_MIP_LEVEL 3","uniform sampler2D tDepth;","#if DEPTH_MIPS == 1","uniform sampler2D tDepth1;","uniform sampler2D tDepth2;","uniform sampler2D tDepth3;","#endif","#if NORMAL_TEXTURE == 1","uniform sampler2D tNormal;","#endif","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float intensity;","uniform float occlusionSphereWorldRadius;","uniform vec2 size;","uniform vec2 worldToScreenRatio;","uniform float randomSeed;","#include <sao>","vec4 getDefaultColor( const in vec2 screenPosition ) {","#if DIFFUSE_TEXTURE == 1","return texture2D( tDiffuse, vUv );","#else","return vec4( 1.0 );","#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","float clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","vec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","clipPosition *= clipW;","return ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {","#if NORMAL_TEXTURE == 1","return -unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","#else","return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );","#endif","}","float getDepthMIP( const in vec2 screenPosition, const int mipLevel ) {","vec4 rawDepth;","#if DEPTH_MIPS == 0","rawDepth = texture2D( tDepth, screenPosition );","#else","if( mipLevel == 0 ) {","rawDepth = texture2D( tDepth, screenPosition );","}","else if( mipLevel == 1 ) {","rawDepth = texture2D( tDepth1, screenPosition );","}","else if( mipLevel == 2 ) {","rawDepth = texture2D( tDepth2, screenPosition );","}","else {","rawDepth = texture2D( tDepth3, screenPosition );","}","#endif","#if DEPTH_PACKING == 1","return unpackRGBAToDepth( rawDepth );","#else","return rawDepth.x;","#endif","}","float scaleDividedByCameraFar;","float minResolutionMultipliedByCameraFar;","float errorCorrectionFactor;","float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {","vec3 viewDelta = sampleViewPosition - centerViewPosition;","float viewDistance2 = dot( viewDelta, viewDelta );","return max( ( dot( centerViewNormal, viewDelta ) + centerViewPosition.z * 0.001 ) / ( viewDistance2 + 0.0001 ), 0.0 );// * smoothstep( pow2( occlusionSphereWorldRadius ), 0.0, viewDistance2 );","}","int getMipLevel( const in vec2 occlusionSphereScreenRadius ) {","return int( clamp( floor( log2( length( occlusionSphereScreenRadius * size ) ) - 4.0 ), 0.0, 3.0 ) );","}","const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );","const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );","float getAmbientOcclusion( const in vec3 centerViewPosition ) {","vec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );","vec2 invSize = 1.0 / size;","vec2 occlusionSphereScreenRadius = occlusionSphereWorldRadius * worldToScreenRatio / centerViewPosition.z;","float random = rand( vUv + randomSeed );","float angle = random * PI2;","float radiusStep = INV_NUM_SAMPLES;","float radius = radiusStep * ( 0.5 + random );","float occlusionSum = 0.0;","for( int i = 0; i < NUM_SAMPLES; i ++ ) {","radius = (float(i) + 0.5) * radiusStep;","vec2 sampleUvOffset = vec2( cos( angle ), sin( angle ) ) * radius * occlusionSphereScreenRadius * 1.0;","sampleUvOffset = floor( sampleUvOffset * size + vec2( 0.5 ) ) * invSize;","if( sampleUvOffset.x == 0.0 && sampleUvOffset.y == 0.0 ) continue;","angle += ANGLE_STEP;","vec2 sampleUv = vUv + sampleUvOffset;","if( sampleUv.x <= 0.0 || sampleUv.y <= 0.0 || sampleUv.x >= 1.0 || sampleUv.y >= 1.0 ) continue;","float sampleDepth = getDepthMIP( sampleUv, int( 4.0 * radius ) );","if( sampleDepth >= ( 1.0 - EPSILON ) ) {","continue;","}","float sampleViewZ = getViewZ( sampleDepth );","vec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );","occlusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );","}","return occlusionSum * intensity * 2.0 * occlusionSphereWorldRadius / ( float( NUM_SAMPLES ) );","}","void main() {","float centerDepth = getDepth( vUv );","if( centerDepth >= ( 1.0 - EPSILON ) ) {","discard;","}","float centerViewZ = getViewZ( centerDepth );","vec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );","float ambientOcclusion = getAmbientOcclusion( viewPosition );","gl_FragColor = packDepthToRGBA( centerDepth );","gl_FragColor.x = max( 1.0 - ambientOcclusion, 0.0 );","}"].join("\n")},g.SAODepthMinifyShader={blending:g.NoBlending,defines:{DEPTH_PACKING:1},uniforms:{tDepth:{type:"t",value:null},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},size:{type:"v2",value:new g.Vector2(256,256)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <packing>","varying vec2 vUv;","uniform sampler2D tDepth;","uniform vec2 size;","uniform float cameraNear;","uniform float cameraFar;","void main() {","vec2 uv = vUv;","vec2 invSize = 0.5 / size;","float depth = unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, -1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, 1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( -1.0, 1.0 ) ) );","depth += unpackRGBAToDepth( texture2D( tDepth, vUv + invSize * vec2( 1.0, -1.0 ) ) );","depth *= 0.25;","gl_FragColor = packDepthToRGBA( depth );","}"].join("\n")},g.SAOBilaterialFilterShader={blending:g.NoBlending,defines:{PERSPECTIVE_CAMERA:1,KERNEL_SAMPLE_RADIUS:4},uniforms:{tAODepth:{type:"t",value:null},tAONormal:{type:"t",value:null},size:{type:"v2",value:new g.Vector2(256,256)},kernelDirection:{type:"v2",value:new g.Vector2(1,0)},cameraNear:{type:"f",value:1},cameraFar:{type:"f",value:100},edgeSharpness:{type:"f",value:3},packOutput:{type:"f",value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","uniform sampler2D tAODepth;","uniform sampler2D tAONormal;","uniform vec2 size;","uniform float cameraNear;","uniform float cameraFar;","uniform float edgeSharpness;","uniform int packOutput;","uniform vec2 kernelDirection;","#include <packing>","float getViewZ( const in float depth ) {","#if PERSPECTIVE_CAMERA == 1","return perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","#else","return orthographicDepthToViewZ( depth, cameraNear, cameraFar );","#endif","}","void addTapInfluence( const in vec2 tapUv, const in vec3 centerNormal, const in float centerViewZ, const in float kernelWeight, inout float aoSum, inout float weightSum ) {","vec4 depthTexel = texture2D( tAODepth, tapUv );","float ao = depthTexel.r;","depthTexel.r = 1.0;","float depth = unpackRGBAToDepth( depthTexel );","if( depth >= ( 1.0 - EPSILON ) ) {","return;","}","float tapViewZ = -getViewZ( depth );","float depthWeight = max(0.0, 1.0 - (edgeSharpness * 20.0) * abs(tapViewZ - centerViewZ));","vec3 normal = unpackRGBToNormal(texture2D(tAONormal, tapUv).rgb);","float normalCloseness = dot(normal, centerNormal);","float k_normal = 4.0;","float normalError = (1.0 - pow4( normalCloseness )) * k_normal;","float normalWeight = max((1.0 - edgeSharpness * normalError), 0.00);","float tapWeight = kernelWeight * ( depthWeight + normalWeight );","aoSum += ao * tapWeight;","weightSum += tapWeight;","}","float normpdf(in float x, in float sigma) {","return 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;","}","void main() {","vec4 depthTexel = texture2D( tAODepth, vUv );","float ao = depthTexel.r;","depthTexel.r = 1.0;","float depth = unpackRGBAToDepth( depthTexel );","if( depth >= ( 1.0 - EPSILON ) ) {","discard;","}","float centerViewZ = -getViewZ( depth );","float weightSum = normpdf(0.0, 5.0) + 0.1;","float aoSum = ao * weightSum;","vec2 uvIncrement = ( kernelDirection / size );","vec2 rTapUv = vUv, lTapUv = vUv;","vec3 normalCenter = unpackRGBToNormal(texture2D(tAONormal, vUv).rgb);","for( int i = 1; i <= KERNEL_SAMPLE_RADIUS; i ++ ) {","float kernelWeight = normpdf(float(i), 5.0) + 0.1;","rTapUv += uvIncrement;","addTapInfluence( rTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );","lTapUv -= uvIncrement;","addTapInfluence( lTapUv, normalCenter, centerViewZ, kernelWeight, aoSum, weightSum );","}","ao = aoSum / weightSum;","if( packOutput == 1 ) {","gl_FragColor = depthTexel;","gl_FragColor.r = ao;","}","else {","gl_FragColor = vec4( vec3( ao ), 1.0 );","}","}"].join("\n")},g.BlurShader={defines:{KERNEL_RADIUS:4},uniforms:{tDiffuse:{type:"t",value:null},size:{type:"v2",value:new g.Vector2(512,512)},sampleUvOffsets:{type:"v2v",value:[new g.Vector2(0,0)]},sampleWeights:{type:"1fv",value:[1]}},vertexShader:["#include <common>","varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 size;","uniform vec2 sampleUvOffsets[ KERNEL_RADIUS + 1 ];","uniform float sampleWeights[ KERNEL_RADIUS + 1 ];","varying vec2 vUv;","void main() {","vec2 invSize = 1.0 / size;","float weightSum = sampleWeights[0];","vec4 diffuseSum = texture2D( tDiffuse, vUv ) * weightSum;","for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {","float weight = sampleWeights[i];","vec2 sampleUvOffset = sampleUvOffsets[i] * invSize;","diffuseSum += ( texture2D( tDiffuse, vUv + sampleUvOffset ) + texture2D( tDiffuse, vUv - sampleUvOffset ) ) * weight;","weightSum += 2.0 * weight;","}","gl_FragColor =diffuseSum / weightSum;","}"].join("\n")},g.BlurShaderUtils={createSampleWeights:function(e,t){for(var r=[],n=0;n<=e;n++)r.push(function(e,t){return Math.exp(-e*e/(t*t*2))/(Math.sqrt(2*Math.PI)*t)}(n,t));return r},createSampleOffsets:function(e,t){for(var r=[],n=0;n<=e;n++)r.push(t.clone().multiplyScalar(n));return r},configure:function(e,t,r,n){t|=0,e.defines.KERNEL_RADIUS===t&&e.stdDev==r||(e.defines.KERNEL_RADIUS=t,e.uniforms.sampleUvOffsets.value=g.BlurShaderUtils.createSampleOffsets(t,n),e.uniforms.sampleWeights.value=g.BlurShaderUtils.createSampleWeights(t,r),e.uvIncrement=n,e.stdDev=r,e.needsUpdate=!0)}},g.LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new g.Color(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},g.EffectComposer=function(e,t,r){if(this.renderer=e,this.cameraAware=t||!1,void 0===r){var n={minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat,stencilBuffer:!0},i=e.getSize();r=new g.WebGLRenderTarget(i.width,i.height,n),r.texture.name="EffectComposer.rt1",r.texture.generateMipmaps=!1}this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.renderTarget2.texture.generateMipmaps=!1,this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.cameraAware&&(this.writeBuffer2=this.renderTarget1.clone(),this.readBuffer2=this.renderTarget2.clone()),this.tempBufferMap={},this.passes=[],void 0===g.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new g.ShaderPass(g.CopyShader)},(0,p.default)(g.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},swapDualBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e,e=this.readBuffer2,this.readBuffer2=this.writeBuffer2,this.writeBuffer2=e},requestBuffer:function(e){if(!this.tempBufferMap[e]){var t=this.renderTarget1.clone();t.texture.name="EffectComposer.buffer["+e+"]",t.texture.generateMipmaps=!1,this.tempBufferMap[e]=t}return this.tempBufferMap[e]},addPass:function(e){this.passes.push(e);var t=this.renderer.getSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,r,n=!1,i=this.passes.length;for(r=0;r<i;r++)if(t=this.passes[r],!1!==t.enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==g.MaskPass&&(t instanceof g.MaskPass?n=!0:t instanceof g.ClearMaskPass&&(n=!1))}},vrRender:function(e,t,r,n,i){var a=e.getVRDisplay();if(a&&a.isPresenting){var o=t.autoUpdate;o&&(t.updateMatrixWorld(),t.autoUpdate=!1);var s=this.renderer.getSize(),u=a.getEyeParameters("left"),l=a.getEyeParameters("right"),c=(new g.Vector3).fromArray(u.offset),f=(new g.Vector3).fromArray(l.offset),d=[0,0,.5,1],h=[.5,0,.5,1],p=null;"VRFrameData"in window&&(p=new window.VRFrameData);var m=!1;Array.isArray(t)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),t=t[0]);var v,y,M=a.getLayers();if(M.length){var w=M[0];v=null!==w.leftBounds&&4===w.leftBounds.length?w.leftBounds:d,y=null!==w.rightBounds&&4===w.rightBounds.length?w.rightBounds:h}else v=d,y=h;var x={x:Math.round(s.width*v[0]),y:Math.round(s.height*v[1]),width:Math.round(s.width*v[2]),height:Math.round(s.height*v[3])},b={x:Math.round(s.width*y[0]),y:Math.round(s.height*y[1]),width:Math.round(s.width*y[2]),height:Math.round(s.height*y[3])};(this.renderer.autoClear||n)&&this.renderer.clear(),null===r.parent&&r.updateMatrixWorld();var T=e.getCameraL(),S=e.getCameraR();r.matrixWorld.decompose(T.position,T.quaternion,T.scale),r.matrixWorld.decompose(S.position,S.quaternion,S.scale);var _=e.scale;T.translateOnAxis(c,_),S.translateOnAxis(f,_),a.getFrameData?(a.depthNear=r.near,a.depthFar=r.far,a.getFrameData(p),T.projectionMatrix.elements=p.leftProjectionMatrix,S.projectionMatrix.elements=p.rightProjectionMatrix,T.updateMatrixWorld(),S.updateMatrixWorld()):(T.projectionMatrix=e.fovToProjection(u.fieldOfView,!0,r.near,r.far),S.projectionMatrix=e.fovToProjection(l.fieldOfView,!0,r.near,r.far));var E,A,I=this.passes.length;for(A=0;A<I;A++)if(E=this.passes[A],!1!==E.enabled&&!1!==E.cameraAware){if(this.renderer.setScissorTest(!0),this.renderer.setScissor(x.x,x.y,x.width,x.height),this.renderer.setViewport(x.x,x.y,x.width,x.height),E.camera&&E.camera.isPerspectiveCamera&&(E.camera=T),E.render(this.renderer,this.writeBuffer,this.readBuffer,i,m),this.renderer.setScissor(b.x,b.y,b.width,b.height),this.renderer.setViewport(b.x,b.y,b.width,b.height),E.camera&&E.camera.isPerspectiveCamera&&(E.camera=S),E.render(this.renderer,this.writeBuffer2,this.readBuffer2,i,m),E.needsSwap){if(m){var D=this.renderer.context;D.stencilFunc(D.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,i),D.stencilFunc(D.EQUAL,1,4294967295)}this.swapDualBuffers()}void 0!==g.MaskPass&&(E instanceof g.MaskPass?m=!0:E instanceof g.ClearMaskPass&&(m=!1)),E.camera&&E.camera.isPerspectiveCamera&&(E.camera=r)}this.renderer.setScissorTest(!1),this.renderer.setViewport(0,0,s.width,s.height),o&&(t.autoUpdate=!0),e.autoSubmitFrame&&e.submitFrame()}this.renderer.getContextAttributes().preserveDrawingBuffer||this.render()},stereoRender:function(e,t,r,n){r.updateMatrixWorld(),e.updateStereo(r);var i,a,o=!1,s=this.passes.length,u=this.renderer.getSize();for(a=0;a<s;a++)if(i=this.passes[a],!1!==i.enabled&&!1!==i.cameraAware){if(this.renderer.setScissorTest(!0),this.renderer.setScissor(0,0,u.width/2,u.height),this.renderer.setViewport(0,0,u.width/2,u.height),i.camera instanceof g.PerspectiveCamera&&(i.camera=e.getCameraL()),i.render(this.renderer,this.writeBuffer,this.readBuffer,n,o),this.renderer.setScissor(u.width/2,0,u.width/2,u.height),this.renderer.setViewport(u.width/2,0,u.width/2,u.height),i.camera instanceof g.PerspectiveCamera&&(i.camera=e.getCameraR()),i.render(this.renderer,this.writeBuffer2,this.readBuffer2,n,o),i.needsSwap){if(o){var l=this.renderer.context;l.stencilFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,n),l.stencilFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==g.MaskPass&&(i instanceof g.MaskPass?o=!0:i instanceof g.ClearMaskPass&&(o=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getSize();e=this.renderTarget1.clone(),e.setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.cameraAware&&(this.writeBuffer2=this.writeBuffer.clone(),this.readBuffer2=this.readBuffer.clone())},dispose:function(){for(var e in this.tempBufferMap)this.tempBufferMap.hasOwnProperty(e)&&this.tempBufferMap[e].dispose();for(var t=0;t<this.passes.length;t++)this.passes[t].dispose()},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t),this.cameraAware&&(this.writeBuffer2.setSize(e,t),this.readBuffer2.setSize(e,t));for(var r in this.tempBufferMap)this.tempBufferMap.hasOwnProperty(r)&&this.tempBufferMap[r].setSize(e,t);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(e,t)}}),g.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1,this.cameraAware=!1},(0,p.default)(g.Pass.prototype,{setSize:function(e,t){},dispose:function(){},render:function(e,t,r,n,i){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),g.RenderPass=function(e,t,r,n,i){g.Pass.call(this),this.scene=e,this.camera=t,this.renderOver=!1,this.overrideMaterial=r,this.clearColor=n,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,void 0===g.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader"),this.overMaterial=new g.ShaderMaterial(g.CopyShader),this.overMaterial.uniforms=g.UniformsUtils.clone(this.overMaterial.uniforms),this.overMaterial.blending=g.NormalBlending,this.overMaterial.premultipliedAlpha=!0,this.overMaterial.transparent=!0,this.overMaterial.depthTest=!1,this.overMaterial.depthWrite=!1,this.camera2=new g.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new g.Scene,this.quad2=new g.Mesh(new g.PlaneGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},g.RenderPass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.RenderPass,render:function(e,t,r,n,i){var a=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var o,s;o=e.getClearColor(),s=e.getClearAlpha(),this.clearDepth&&e.clearDepth(),this.renderOver?(e.setClearColor(0,0),e.renderOverride(this.overrideMaterial,this.scene,this.camera,t,!0),this.overMaterial.uniforms.tDiffuse.value=t.texture,void 0!==this.clearColor&&e.setClearColor(this.clearColor,this.clearAlpha),e.renderOverride(this.overMaterial,this.scene2,this.camera2,this.renderToScreen?null:r,this.clear)):(void 0!==this.clearColor&&e.setClearColor(this.clearColor,this.clearAlpha),e.renderOverride(this.overrideMaterial,this.scene,this.camera,this.renderToScreen?null:r,this.clear)),this.clearColor&&e.setClearColor(o,s),this.scene.overrideMaterial=null,e.autoClear=a}}),g.MaskPass=function(e,t){g.Pass.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1},g.MaskPass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.MaskPass,render:function(e,t,r,n,i){var a=e.context,o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);var s,u;this.inverse?(s=0,u=1):(s=1,u=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.buffers.stencil.setFunc(a.ALWAYS,s,4294967295),o.buffers.stencil.setClear(u),e.render(this.scene,this.camera,r,this.clear),e.render(this.scene,this.camera,t,this.clear),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setFunc(a.EQUAL,1,4294967295),o.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP)}}),g.ClearMaskPass=function(){g.Pass.call(this),this.needsSwap=!1},g.ClearMaskPass.prototype=(0,d.default)(g.Pass.prototype),(0,p.default)(g.ClearMaskPass.prototype,{render:function(e,t,r,n,i){e.state.buffers.stencil.setTest(!1)}}),g.ShaderPass=function(e,t){g.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof g.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=g.UniformsUtils.clone(e.uniforms),this.material=new g.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new g.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new g.Scene,this.quad=new g.Mesh(new g.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},g.ShaderPass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.ShaderPass,render:function(e,t,r,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.renderToScreen?e.renderPass(this.material):e.renderPass(this.material,t,this.clear)}}),g.SAOPass=function(e,t){g.Pass.call(this),this.scene=e,this.camera=t,this.intensity=.5,this.implicitNormals=!1,this.occlusionSphereWorldRadius=20,this.blurEnabled=!0,this.outputOverride=null,this.depthMIPs=!1,this.downSamplingRatio=2,this.blurKernelSize=1===this.downSamplingRatio?8:6,this.edgeSharpness=1,this.depthMaterial=new g.MeshDepthMaterial,this.depthMaterial.depthPacking=g.RGBADepthPacking,this.depthMaterial.blending=g.NoBlending,this.depthMaterial.side=g.DoubleSide,this.normalMaterial=new g.MeshNormalMaterial,this.normalMaterial.side=this.depthMaterial.side,void 0===g.SAOShader&&console.error("THREE.SAOPass relies on THREE.SAOShader"),void 0===g.CopyShader&&console.error("THREE.SAOPass relies on THREE.CopyShader"),this.depthMinifyMaterial=new g.ShaderMaterial(g.SAODepthMinifyShader),this.depthMinifyMaterial.uniforms=g.UniformsUtils.clone(this.depthMinifyMaterial.uniforms),this.depthMinifyMaterial.defines=(0,p.default)({},this.depthMinifyMaterial.defines),this.depthMinifyMaterial.blending=g.NoBlending,this.saoMaterial=new g.ShaderMaterial(g.SAOShader),this.saoMaterial.uniforms=g.UniformsUtils.clone(this.saoMaterial.uniforms),this.saoMaterial.defines=(0,p.default)({},this.saoMaterial.defines),this.saoMaterial.defines.DIFFUSE_TEXTURE=0,this.saoMaterial.defines.NORMAL_TEXTURE=this.implicitNormals?0:1,this.saoMaterial.defines.MODE=2,this.bilateralFilterMaterial=new g.ShaderMaterial(g.SAOBilaterialFilterShader),this.bilateralFilterMaterial.uniforms=g.UniformsUtils.clone(this.bilateralFilterMaterial.uniforms),this.bilateralFilterMaterial.defines=(0,p.default)({},this.bilateralFilterMaterial.defines),this.bilateralFilterMaterial.blending=g.NoBlending,this.bilateralFilterMaterial.premultipliedAlpha=!0,this.bilateralUpsamplerMaterial=this.getBilateralUpsamplerMaterial(),this.copyMaterial=new g.ShaderMaterial(g.CopyShader),this.copyMaterial.uniforms=g.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.uniforms.opacity.value=1,this.copyMaterial.blending=g.NoBlending,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.transparent=!0,this.copyMaterial.depthTest=!1,this.copyMaterial.depthWrite=!1},g.SAOPass.prototype={dispose:function(){this.saoRenderTarget&&(this.saoRenderTarget.dispose(),this.saoRenderTarget=null),this.blurIntermediateRenderTarget&&(this.blurIntermediateRenderTarget.dispose(),this.blurIntermediateRenderTarget=null),this.depthRenderTarget&&(this.depthRenderTarget.dispose(),this.depthRenderTarget=null),this.depth1RenderTarget&&(this.depth1RenderTarget.dispose(),this.depth1RenderTarget=null),this.depth2RenderTarget&&(this.depth2RenderTarget.dispose(),this.depth2RenderTarget=null),this.depth3RenderTarget&&(this.depth3RenderTarget.dispose(),this.depth3RenderTarget=null),this.normalRenderTarget&&(this.normalRenderTarget.dispose(),this.normalRenderTarget=null),this.normalRenderTargetFullRes&&(this.normalRenderTargetFullRes.dispose(),this.normalRenderTargetFullRes=null),this.depthRenderTargetFullRes&&(this.depthRenderTargetFullRes.dispose(),this.depthRenderTargetFullRes=null),this.saoRenderTargetFullRes&&(this.saoRenderTargetFullRes.dispose(),this.saoRenderTargetFullRes=null)},setSize:function(e,t){this.saoRenderTargetFullRes&&this.saoRenderTargetFullRes.setSize(e,t),this.depthRenderTargetFullRes&&this.depthRenderTargetFullRes.setSize(e,t),this.normalRenderTargetFullRes&&this.normalRenderTargetFullRes.setSize(e,t),e=Math.ceil(e/this.downSamplingRatio),t=Math.ceil(t/this.downSamplingRatio),this.saoRenderTarget&&this.saoRenderTarget.setSize(e,t),this.blurIntermediateRenderTarget&&this.blurIntermediateRenderTarget.setSize(e,t),this.depthRenderTarget&&this.depthRenderTarget.setSize(e,t),this.depth1RenderTarget&&this.depth1RenderTarget.setSize(Math.ceil(e/2),Math.ceil(t/2)),this.depth2RenderTarget&&this.depth2RenderTarget.setSize(Math.ceil(e/4),Math.ceil(t/4)),this.depth3RenderTarget&&this.depth3RenderTarget.setSize(Math.ceil(e/8),Math.ceil(t/8)),this.normalRenderTarget&&this.normalRenderTarget.setSize(e,t),this.saoMaterial.uniforms.size.value.set(e,t),this.bilateralFilterMaterial.uniforms.size.value.set(e,t)},updateParameters:function(e){var t=1/(2*Math.tan(g.Math.DEG2RAD*e.fov*.5)),r=new g.Vector2(t/e.aspect,t);this.saoMaterial.uniforms.worldToScreenRatio.value=r,this.saoMaterial.uniforms.intensity.value=this.intensity,this.saoMaterial.uniforms.occlusionSphereWorldRadius.value=this.occlusionSphereWorldRadius,this.depthMinifyMaterial.uniforms.cameraNear.value=e.near,this.depthMinifyMaterial.uniforms.cameraFar.value=e.far,this.saoMaterial.uniforms.cameraNear.value=e.near,this.saoMaterial.uniforms.cameraFar.value=e.far,this.saoMaterial.uniforms.cameraProjectionMatrix.value=e.projectionMatrix,this.saoMaterial.uniforms.cameraInverseProjectionMatrix.value.getInverse(e.projectionMatrix),this.bilateralFilterMaterial.uniforms.cameraNear.value=e.near,this.bilateralFilterMaterial.uniforms.cameraFar.value=e.far},render:function(e,t,r,n,i){var a=r.width,o=r.height;a=Math.ceil(a/this.downSamplingRatio),o=Math.ceil(o/this.downSamplingRatio);var s=r.depthBuffer&&r.depthTexture?r.depthTexture:null;this.saoRenderTarget||(this.saoRenderTarget=new g.WebGLRenderTarget(a,o,{minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat}),this.saoRenderTargetFullRes=new g.WebGLRenderTarget(r.width,r.height,{minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat}),this.blurIntermediateRenderTarget=new g.WebGLRenderTarget(a,o,{minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat}),this.depth1RenderTarget=new g.WebGLRenderTarget(Math.ceil(a/2),Math.ceil(o/2),{minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat}),this.depth2RenderTarget=new g.WebGLRenderTarget(Math.ceil(a/4),Math.ceil(o/4),{minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat}),this.depth3RenderTarget=new g.WebGLRenderTarget(Math.ceil(a/8),Math.ceil(o/8),{minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat}),this.normalRenderTarget=new g.WebGLRenderTarget(a,o,{minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat}),this.normalRenderTargetFullRes=new g.WebGLRenderTarget(r.width,r.height,{minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat})),s||this.depthRenderTarget||(this.depthRenderTarget=new g.WebGLRenderTarget(a,o,{minFilter:g.NearestFilter,magFilter:g.NearestFilter,format:g.RGBAFormat}),this.depthRenderTargetFullRes=new g.WebGLRenderTarget(r.width,r.height,{minFilter:g.NearestFilter,magFilter:g.NearestFilter,format:g.RGBAFormat})),this.updateParameters(this.camera);var u=e.getClearColor(),l=e.getClearAlpha(),c=e.autoClear;e.autoClear=!1,this.renderToScreen||(this.copyMaterial.uniforms.tDiffuse.value=r.texture,this.copyMaterial.blending=g.NoBlending,e.renderPass(this.copyMaterial,t,!0));var f=0;if(!s){var d=e.getClearColor(),h=e.getClearAlpha();e.setClearColor(16777215,1),e.renderOverride(this.depthMaterial,this.scene,this.camera,this.depthRenderTarget,!0,!1,!0),e.setClearColor(16777215,1),1!==this.downSamplingRatio&&(e.renderOverride(this.depthMaterial,this.scene,this.camera,this.depthRenderTargetFullRes,!0,!1,!0),e.setClearColor(d,h)),s=this.depthRenderTarget.texture,f=1}if(this.depthMIPs&&(this.depthMinifyMaterial.uniforms.tDepth.value=s,this.depthMinifyMaterial.uniforms.size.value.set(a,o),e.renderPass(this.depthMinifyMaterial,this.depth1RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth1RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(Math.ceil(a/2),Math.ceil(o/2)),e.renderPass(this.depthMinifyMaterial,this.depth2RenderTarget,!0),this.depthMinifyMaterial.uniforms.tDepth.value=this.depth2RenderTarget.texture,this.depthMinifyMaterial.uniforms.size.value.set(Math.ceil(a/4),Math.ceil(o/4)),e.renderPass(this.depthMinifyMaterial,this.depth3RenderTarget,!0)),"depth"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=s,this.copyMaterial.blending=g.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);if("depth1"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.depth1RenderTarget.texture,this.copyMaterial.blending=g.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);if("depth2"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.depth2RenderTarget.texture,this.copyMaterial.blending=g.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);if("depth3"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.depth3RenderTarget.texture,this.copyMaterial.blending=g.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);if(!this.implicitNormals){var d=e.getClearColor(),h=e.getClearAlpha();e.setClearColor(new g.Color(.5,.5,1),1),e.renderOverride(this.normalMaterial,this.scene,this.camera,this.normalRenderTarget,!0,!1,!0),1!==this.downSamplingRatio&&(e.setClearColor(new g.Color(.5,.5,1),1),e.renderOverride(this.normalMaterial,this.scene,this.camera,this.normalRenderTargetFullRes,!0,!1,!0)),e.setClearColor(d,h)}if("normal"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=g.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:this.renderToScreen?null:t,!0);this.saoMaterial.defines.DEPTH_PACKING=f,this.saoMaterial.defines.DEPTH_MIPS=this.depthMIPs?1:0,this.saoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.saoMaterial.uniforms.tDepth.value=s,this.depthMIPs&&(this.saoMaterial.uniforms.tDepth1.value=this.depth1RenderTarget.texture,this.saoMaterial.uniforms.tDepth2.value=this.depth2RenderTarget.texture,this.saoMaterial.uniforms.tDepth3.value=this.depth3RenderTarget.texture);var d=e.getClearColor(),h=e.getClearAlpha();if(e.setClearColor(16777215,1),e.renderPass(this.saoMaterial,this.saoRenderTarget,!0),this.blurEnabled&&(this.bilateralFilterMaterial.defines.KERNEL_SAMPLE_RADIUS=this.blurKernelSize,this.bilateralFilterMaterial.uniforms.tAODepth.value=this.saoRenderTarget.texture,this.bilateralFilterMaterial.uniforms.tAONormal.value=this.normalRenderTarget.texture,this.bilateralFilterMaterial.uniforms.kernelDirection.value=new g.Vector2(1,0),this.bilateralFilterMaterial.uniforms.packOutput.value=1,this.bilateralFilterMaterial.uniforms.edgeSharpness.value=this.edgeSharpness,e.renderPass(this.bilateralFilterMaterial,this.blurIntermediateRenderTarget,!0),this.bilateralFilterMaterial.uniforms.tAODepth.value=this.blurIntermediateRenderTarget.texture,this.bilateralFilterMaterial.uniforms.kernelDirection.value=new g.Vector2(0,1),this.bilateralFilterMaterial.uniforms.packOutput.value=0,e.renderPass(this.bilateralFilterMaterial,this.saoRenderTarget,!0)),this.downSamplingRatio>1&&(this.bilateralUpsamplerMaterial.uniforms.inputTexture.value=this.saoRenderTarget.texture,this.bilateralUpsamplerMaterial.uniforms.NormalTextureFullRes.value=this.normalRenderTargetFullRes.texture,this.bilateralUpsamplerMaterial.uniforms.DepthTextureFullRes.value=this.depthRenderTargetFullRes.texture,this.bilateralUpsamplerMaterial.uniforms.NormalTextureHalfRes.value=this.normalRenderTarget.texture,this.bilateralUpsamplerMaterial.uniforms.DepthTextureHalfRes.value=this.depthRenderTarget.texture,this.bilateralUpsamplerMaterial.uniforms.texSize.value=new g.Vector2(this.saoRenderTarget.width,this.saoRenderTarget.height),this.bilateralUpsamplerMaterial.uniforms.cameraNearFar.value=new g.Vector2(this.camera.near,this.camera.far),e.renderPass(this.bilateralUpsamplerMaterial,this.saoRenderTargetFullRes,!0)),e.setClearColor(d,h),"sao"===this.outputOverride)return this.copyMaterial.uniforms.tDiffuse.value=this.downSamplingRatio>1?this.saoRenderTargetFullRes.texture:this.saoRenderTarget.texture,this.copyMaterial.blending=g.NoBlending,void e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);e.autoClear=!1,this.copyMaterial.uniforms.tDiffuse.value=this.downSamplingRatio>1?this.saoRenderTargetFullRes.texture:this.saoRenderTarget.texture,this.copyMaterial.blending=g.MultiplyBlending,this.copyMaterial.premultipliedAlpha=!0,e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!1),e.autoClear=c,e.setClearColor(u),e.setClearAlpha(l)},getBilateralUpsamplerMaterial:function(e){return new g.ShaderMaterial({uniforms:{inputTexture:{value:null},NormalTextureFullRes:{value:null},DepthTextureFullRes:{value:null},NormalTextureHalfRes:{value:null},DepthTextureHalfRes:{value:null},texSize:{value:new g.Vector2(.5,.5)},cameraNearFar:{value:new g.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D inputTexture;\n\t\t\t\tuniform sampler2D NormalTextureFullRes;\n\t\t\t\tuniform sampler2D DepthTextureFullRes;\n\t\t\t\tuniform sampler2D NormalTextureHalfRes;\n\t\t\t\tuniform sampler2D DepthTextureHalfRes;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\t\t\t\tvoid main()\t\t\t\t{\t\t\t\t\tvec2 uvOffsets[4];\t\t\t\t\tuvOffsets[0] = vUv + vec2(0.0, 1.0)/texSize;\t\t\t\t\tuvOffsets[1] = vUv + vec2(1.0, 0.0)/texSize;\t\t\t\t\tuvOffsets[2] = vUv + vec2(-1.0, 0.0)/texSize;\t\t\t\t\tuvOffsets[3] = vUv + vec2(0.0, -1.0)/texSize;\t\t\t\t\t\t\t\t\t\tfloat depth_weights[4];\t\t\t\t\tfloat depth_hires = unpackRGBAToDepth(texture2D(DepthTextureFullRes, vUv));\t\t\t\t\tdepth_hires = -perspectiveDepthToViewZ(depth_hires, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tif(depth_hires == 1.0)\t\t\t\t\t\tdiscard;\t\t\t\t\tfloat depth_coarse1 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[0]));\t\t\t\t\tdepth_coarse1 = -perspectiveDepthToViewZ(depth_coarse1, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[0] = 1.0 / (0.001 + abs(depth_hires-depth_coarse1));\t\t\t\t\tfloat depth_coarse2 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[1]));\t\t\t\t\tdepth_coarse2 = -perspectiveDepthToViewZ(depth_coarse2, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[1] = 1.0 / (0.001 + abs(depth_hires-depth_coarse2));\t\t\t\t\tfloat depth_coarse3 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[2]));\t\t\t\t\tdepth_coarse3 = -perspectiveDepthToViewZ(depth_coarse3, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[2] = 1.0 / (0.001 + abs(depth_hires-depth_coarse3));\t\t\t\t\tfloat depth_coarse4 = unpackRGBAToDepth(texture2D(DepthTextureHalfRes, uvOffsets[3]));\t\t\t\t\tdepth_coarse4 = -perspectiveDepthToViewZ(depth_coarse4, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\tdepth_weights[3] = 1.0 / (0.001 + abs(depth_hires-depth_coarse4));\t\t\t\t\t\t\t\t\t\tfloat norm_weights[4];\t\t\t\t\tvec3 norm_fullRes = unpackRGBToNormal(texture2D(NormalTextureFullRes, vUv).rgb);\t\t\t\t\tvec3 norm_coarse1 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[0]).rgb);\t\t\t\t\tnorm_weights[0] = pow(abs(dot(norm_coarse1, norm_fullRes)), 32.0);\t\t\t\t\tvec3 norm_coarse2 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[1]).rgb);\t\t\t\t\tnorm_weights[1] = pow(abs(dot(norm_coarse2, norm_fullRes)), 32.0);\t\t\t\t\tvec3 norm_coarse3 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[2]).rgb);\t\t\t\t\tnorm_weights[2] = pow(abs(dot(norm_coarse3, norm_fullRes)), 32.0);\t\t\t\t\tvec3 norm_coarse4 = unpackRGBToNormal(texture2D(NormalTextureHalfRes, uvOffsets[3]).rgb);\t\t\t\t\tnorm_weights[3] = pow(abs(dot(norm_coarse4, norm_fullRes)), 32.0);\t\t\t\t\t\t\t\t\t\tvec3 colorOut = vec3(0.0);\t\t\t\t\tfloat weight_sum = 0.0;\t\t\t\t\tfloat weight = norm_weights[0] * depth_weights[0];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[0]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t  weight = norm_weights[1] * depth_weights[1];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[1]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t  weight = norm_weights[2] * depth_weights[2];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[2]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t  weight = norm_weights[3] * depth_weights[3];\t\t\t\t\tcolorOut += texture2D(inputTexture, uvOffsets[3]).rgb*weight;\t\t\t\t\tweight_sum += weight;\t\t\t\t\tcolorOut /= weight_sum;\t\t\t\t\tgl_FragColor = vec4(colorOut, 1.0);\t\t\t\t}"})}},g.SSAARenderPass=function(e,t,r,n){g.Pass.call(this),this.scene=e,this.camera=t,this.sampleLevel=4,this.unbiased=!0,this.needsSwap=!1,this.clearColor=void 0!==r?r:0,this.clearAlpha=void 0!==n?n:0,void 0===g.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader"),this.overMaterial=new g.ShaderMaterial(g.CopyShader),this.overMaterial.uniforms=g.UniformsUtils.clone(this.overMaterial.uniforms),this.overMaterial.blending=g.NormalBlending,this.overMaterial.premultipliedAlpha=!0,this.overMaterial.transparent=!0,this.overMaterial.depthTest=!1,this.overMaterial.depthWrite=!1,this.addMaterial=new g.ShaderMaterial(g.CopyShader),this.addMaterial.uniforms=g.UniformsUtils.clone(this.addMaterial.uniforms),this.addMaterial.blending=g.AdditiveBlending,this.addMaterial.premultipliedAlpha=!0,this.addMaterial.transparent=!0,this.addMaterial.depthTest=!1,this.addMaterial.depthWrite=!1,this.camera2=new g.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new g.Scene,this.quad2=new g.Mesh(new g.PlaneGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},g.SSAARenderPass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.SSAARenderPass,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)},render:function(e,t,r,n,i){this.sampleRenderTarget||(this.sampleRenderTarget=new g.WebGLRenderTarget(r.width,r.height,{minFilter:g.NearestFilter,magFilter:g.NearestFilter,format:g.RGBAFormat,type:g.UnsignedByteType,name:"SSAARenderPass.sample"}));var a=g.SSAARenderPass.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],o=e.autoClear;e.autoClear=!1;var s=e.getClearColor().getHex(),u=e.getClearAlpha(),l=1/a.length;this.addMaterial.uniforms.tDiffuse.value=this.sampleRenderTarget.texture;var c=r.width,f=r.height;e.setClearColor(0,0);var d=e.ditherScale;this.unbiased&&(e.ditherScale=a.length);for(var h=0;h<a.length;h++){var p=a[h];this.camera.setViewOffset&&this.camera.setViewOffset(c,f,.0625*p[0],.0625*p[1],c,f);var m=l;if(this.unbiased){m+=1/32*((h+.5)/a.length-.5)}this.addMaterial.uniforms.opacity.value=m,e.render(this.scene,this.camera,this.sampleRenderTarget,!0),e.renderPass(this.addMaterial,t,0===h)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.ditherScale=d,this.overMaterial.uniforms.tDiffuse.value=t.texture,e.setClearColor(this.clearColor,this.clearAlpha),e.renderPass(this.overMaterial,this.renderToScreen?null:r,this.clear),e.autoClear=o,e.setClearColor(s,u)}}),g.SSAARenderPass.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]],g.ClearPass=function(e,t){g.Pass.call(this),this.needsSwap=!1,this.clearColor=void 0!==e?e:0,this.clearAlpha=void 0!==t?t:0},g.ClearPass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.ClearPass,render:function(e,t,r,n,i){var a,o;void 0!==this.clearColor&&(a=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.setRenderTarget(this.renderToScreen?null:r),e.clear(),this.clearColor&&e.setClearColor(a,o)}}),g.TexturePass=function(e,t){g.Pass.call(this),void 0===g.CopyShader&&console.error("THREE.TexturePass relies on THREE.CopyShader");var r=g.CopyShader;this.map=e,this.opacity=void 0!==t?t:1,this.uniforms=g.UniformsUtils.clone(r.uniforms),this.material=new g.ShaderMaterial({uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,depthTest:!1,depthWrite:!1}),this.needsSwap=!1,this.camera=new g.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new g.Scene,this.quad=new g.Mesh(new g.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},g.TexturePass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.TexturePass,render:function(e,t,r,n,i){var a=e.autoClear;if(e.autoClear=!1,this.quad.material=this.material,this.uniforms.opacity.value=this.opacity,this.uniforms.tDiffuse.value=this.map,this.material.transparent=this.opacity<1,this.map){var o=e.getSize(),s=this.map.image.width/o.width||1,u=this.map.image.height/o.height||1,l=Math.min(s,u);s*=1/l,u*=1/l,this.quad.scale.set(s,u,1)}e.render(this.scene,this.camera,this.renderToScreen?null:r,this.clear),e.autoClear=a}}),g.CubeTexturePass=function(e,t,r){g.Pass.call(this),this.camera=e,this.needsSwap=!1,this.cubeMaterial=new g.MeshCubeMaterial,this.cubeMesh=new g.Mesh(new g.BoxBufferGeometry(10,10,10),this.cubeMaterial),this.envMap=t,this.envMapIntensity=1,this.opacity=void 0!==r?r:1,this.roughness=0,this.cubeScene=new g.Scene,this.cubeCamera=new g.PerspectiveCamera,this.cubeScene.add(this.cubeMesh)},g.CubeTexturePass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.CubeTexturePass,render:function(e,t,r,n,i){var a=e.autoClear;e.autoClear=!1,this.cubeCamera.projectionMatrix.copy(this.camera.projectionMatrix),this.cubeCamera.quaternion.setFromRotationMatrix(this.camera.matrixWorld),this.cubeMaterial.envMap!=this.envMap&&(this.cubeMaterial.envMap=this.envMap,this.cubeMaterial.needsUpdate=!0),this.cubeMaterial.envMapIntensity=this.envMapIntensity,this.cubeMaterial.roughness=this.roughness,this.cubeMaterial.opacity=this.opacity,this.cubeMaterial.transparent=this.opacity<1,e.render(this.cubeScene,this.cubeCamera,this.renderToScreen?null:r,this.clear),e.autoClear=a}}),g.DofPass=function(e,t,r){g.Pass.call(this);var e=void 0!==e?e:new g.Vector2(256,256);this.downSampleRes=new g.Vector2(Math.round(e.x/2),Math.round(e.y/2));var n={minFilter:g.NearestFilter,magFilter:g.NearestFilter,type:g.HalfFloatType,format:g.RGBAFormat};this.renderTargetColorDownSample=new g.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetColorDownSample.texture.generateMipmaps=!1,this.renderTargetCoCDownSample=new g.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetCoCDownSample.texture.generateMipmaps=!1,this.renderTargetBlurTemp=new g.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetBlurTemp.texture.generateMipmaps=!1;var n={minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat};this.renderTargetDofBlur=new g.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetDofBlur.texture.generateMipmaps=!1,this.renderTargetDofBlurTemp=new g.WebGLRenderTarget(this.downSampleRes.x,this.downSampleRes.y,n),this.renderTargetDofBlurTemp.texture.generateMipmaps=!1,this.renderTargetDofCombine=new g.WebGLRenderTarget(e.x,e.y,n),this.renderTargetDofCombine.texture.generateMipmaps=!1,this.needsSwap=!1,this.oldClearColor=new g.Color,this.oldClearAlpha=1,this.renderCamera=new g.OrthographicCamera(-1,1,1,-1,0,1),this.renderScene=new g.Scene,this.quad=new g.Mesh(new g.PlaneBufferGeometry(2,2),null),this.renderScene.add(this.quad),this.focalDistance=10,this.cameraNear=.1,this.cameraFar=100,this.NearFarBlurScale=new g.Vector2(.1,.5),this.downSamplingMaterial=this.getColorDownSamplingMaterial(),this.cocMaterial=this.getCoCMaterial(),this.cocMaterial.uniforms.NearFarBlurScale.value=this.NearFarBlurScale,this.cocMaterial.uniforms.cameraNearFar.value=new g.Vector2(r.near,r.far),this.cocMaterial.uniforms.focalDistance.value=this.focalDistance,this.dilateNearCocMaterial=this.getDilateNearCocMaterial(),this.dilateNearCocMaterial.uniforms.NearFarBlurScale.value=this.NearFarBlurScale,this.dofBlurType=1,this.dofBlurMaterial=0===this.dofBlurType?this.getDofBlurCircularMaterial():this.getDofBlurSeperableMaterial(),this.dofCombineMaterial=this.getDofCombineMaterial(),this.dofCombineMaterial.uniforms.NearFarBlurScale.value=this.NearFarBlurScale,this.dofCombineMaterial.uniforms.cameraNearFar.value=new g.Vector2(r.near,r.far),this.dofCombineMaterial.uniforms.focalDistance.value=this.focalDistance,void 0===g.CopyShader&&console.error("THREE.DofPass relies on THREE.CopyShader");var i=g.CopyShader;this.copyUniforms=g.UniformsUtils.clone(i.uniforms),this.materialCopy=new g.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),this.depthMaterial=new g.MeshDepthMaterial,this.depthMaterial.side=g.DoubleSide,this.depthMaterial.depthPacking=g.RGBADepthPacking,this.depthMaterial.blending=g.NoBlending,this.depthRenderTarget=new g.WebGLRenderTarget(e.x,e.y,{minFilter:g.NearesFilter,magFilter:g.NearesFilter,format:g.RGBAFormat}),this.scene=t,this.camera=r},g.DofPass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.DofPass,setSize:function(e,t){this.downSampleRes=new g.Vector2(Math.round(e/2),Math.round(t/2));var r=this.downSampleRes.x,n=this.downSampleRes.y;this.renderTargetColorDownSample.setSize(r,n),this.renderTargetCoCDownSample.setSize(r,n),this.renderTargetBlurTemp.setSize(r,n),this.renderTargetDofBlur.setSize(r,n),this.renderTargetDofBlurTemp.setSize(r,n),this.renderTargetDofCombine.setSize(e,t),this.depthRenderTarget.setSize(e,t)},changeBlurType:function(e){this.dofBlurType=e,this.dofBlurMaterial=0===this.dofBlurType?this.getDofBlurCircularMaterial():this.getDofBlurSeperableMaterial()},render:function(e,t,r,n,i){this.dilateNearCocMaterial.uniforms.texSize.value=this.downSampleRes,this.dofBlurMaterial.uniforms.texSize.value=this.downSampleRes,this.dofCombineMaterial.uniforms.texSize.value=this.downSampleRes,this.cocMaterial.uniforms.focalDistance.value=this.focalDistance,this.cocMaterial.uniforms.cameraNearFar.value.x=this.cameraNear,this.cocMaterial.uniforms.cameraNearFar.value.y=this.cameraFar,this.dofCombineMaterial.uniforms.focalDistance.value=this.focalDistance,this.dofCombineMaterial.uniforms.cameraNearFar.value.x=this.cameraNear,this.dofCombineMaterial.uniforms.cameraNearFar.value.y=this.cameraFar,this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var a=e.autoClear;e.autoClear=!0,i&&e.context.disable(e.context.STENCIL_TEST),this.scene.overrideMaterial=this.depthMaterial,e.setClearColor(16777215,1),e.render(this.scene,this.camera,this.depthRenderTarget),this.scene.overrideMaterial=null,this.quad.material=this.downSamplingMaterial,this.downSamplingMaterial.uniforms.colorTexture.value=r.texture,e.render(this.renderScene,this.renderCamera,this.renderTargetColorDownSample),this.quad.material=this.cocMaterial,this.cocMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,e.render(this.renderScene,this.renderCamera,this.renderTargetCoCDownSample),this.quad.material=this.dilateNearCocMaterial,this.dilateNearCocMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dilateNearCocMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,this.dilateNearCocMaterial.uniforms.direction.value=new g.Vector2(1,0),e.render(this.renderScene,this.renderCamera,this.renderTargetBlurTemp),this.dilateNearCocMaterial.uniforms.cocTexture.value=this.renderTargetBlurTemp.texture,this.dilateNearCocMaterial.uniforms.direction.value=new g.Vector2(0,1),e.render(this.renderScene,this.renderCamera,this.renderTargetCoCDownSample),0===this.dofBlurType?(this.quad.material=this.dofBlurMaterial,this.dofBlurMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dofBlurMaterial.uniforms.colorTexture.value=this.renderTargetDownSample.texture,this.dofBlurMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,e.render(this.renderScene,this.renderCamera,this.renderTargetDofBlurTemp)):(this.quad.material=this.dofBlurMaterial,this.dofBlurMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dofBlurMaterial.uniforms.colorTexture.value=this.renderTargetColorDownSample.texture,this.dofBlurMaterial.uniforms.direction.value=new g.Vector2(1,0),e.render(this.renderScene,this.renderCamera,this.renderTargetDofBlur),this.dofBlurMaterial.uniforms.colorTexture.value=this.renderTargetDofBlur.texture,this.dofBlurMaterial.uniforms.direction.value=new g.Vector2(0,1),e.render(this.renderScene,this.renderCamera,this.renderTargetDofBlurTemp)),this.quad.material=this.dofCombineMaterial,this.dofCombineMaterial.uniforms.cocTexture.value=this.renderTargetCoCDownSample.texture,this.dofCombineMaterial.uniforms.colorTexture.value=r.texture,this.dofCombineMaterial.uniforms.depthTexture.value=this.depthRenderTarget.texture,this.dofCombineMaterial.uniforms.blurTexture.value=this.renderTargetDofBlurTemp.texture,e.render(this.renderScene,this.renderCamera,this.renderTargetDofCombine),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetDofCombine.texture,i&&e.context.enable(e.context.STENCIL_TEST),e.render(this.renderScene,this.renderCamera,r),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=a},getColorDownSamplingMaterial:function(){return new g.ShaderMaterial({uniforms:{colorTexture:{value:null}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = texture2D(colorTexture, vUv);\n\t\t\t\t}"})},getCoCMaterial:function(){return new g.ShaderMaterial({uniforms:{depthTexture:{value:null},NearFarBlurScale:{value:new g.Vector2(.5,.5)},cameraNearFar:{value:new g.Vector2(.1,100)},focalDistance:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\tuniform float focalDistance;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tfloat computeCoc() {\t\t\t\t\tvec4 packDepth = texture2D(depthTexture, vUv).rgba;\t\t\t\t\tif(packDepth.x == 1.0) return max(NearFarBlurScale.x, NearFarBlurScale.y);\t\t\t\t\t\tfloat depth = unpackRGBAToDepth(packDepth);\t\t\t\t\t\tdepth = -perspectiveDepthToViewZ(depth, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tfloat coc = (depth - focalDistance)/depth;\t\t\t\t\treturn (coc > 0.0 ? coc * NearFarBlurScale.y : coc * NearFarBlurScale.x);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, computeCoc());\n\t\t\t\t}"})},getDilateNearCocMaterial:function(){return new g.ShaderMaterial({uniforms:{cocTexture:{value:null},depthTexture:{value:null},NearFarBlurScale:{value:new g.Vector2(.5,.5)},texSize:{value:new g.Vector2(.5,.5)},direction:{value:new g.Vector2(1,0)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 direction;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tfloat expandNear(const in vec2 offset, const in bool isBackground) {\t\t\t\t\tfloat coc = 0.0;\t\t\t\t\tvec2 sampleOffsets = MAXIMUM_BLUR_SIZE * offset / 5.0;\t\t\t\t\tfloat coc0 = texture2D(cocTexture, vUv).a;\t\t\t\t\tfloat coc1 = texture2D(cocTexture, vUv - 5.0 * sampleOffsets).a;\t\t\t\t\tfloat coc2 = texture2D(cocTexture, vUv - 4.0 * sampleOffsets).a;\t\t\t\t\tfloat coc3 = texture2D(cocTexture, vUv - 3.0 * sampleOffsets).a;\t\t\t\t\tfloat coc4 = texture2D(cocTexture, vUv - 2.0 * sampleOffsets).a;\t\t\t\t\tfloat coc5 = texture2D(cocTexture, vUv - 1.0 * sampleOffsets).a;\t\t\t\t\tfloat coc6 = texture2D(cocTexture, vUv + 1.0 * sampleOffsets).a;\t\t\t\t\tfloat coc7 = texture2D(cocTexture, vUv + 2.0 * sampleOffsets).a;\t\t\t\t\tfloat coc8 = texture2D(cocTexture, vUv + 3.0 * sampleOffsets).a;\t\t\t\t\tfloat coc9 = texture2D(cocTexture, vUv + 4.0 * sampleOffsets).a;\t\t\t\t\tfloat coc10 = texture2D(cocTexture, vUv + 5.0 * sampleOffsets).a;\t\t\t\t\t\t\t\t\t\t\tif(isBackground){\t\t\t\t\t\tcoc = abs(coc0) * 0.095474 + \t\t\t\t\t\t(abs(coc1) + abs(coc10)) * 0.084264 + \t\t\t\t\t\t(abs(coc2) + abs(coc9)) * 0.088139 + \t\t\t\t\t\t(abs(coc3) + abs(coc8)) * 0.091276 + \t\t\t\t\t\t(abs(coc4) + abs(coc7)) * 0.093585 + \t\t\t\t\t\t(abs(coc5) + abs(coc6)) * 0.094998;\t\t\t\t\t} else {\t\t\t\t\t\tcoc = min(coc0, 0.0);\t\t\t\t\t\tcoc = min(coc1 * 0.3, coc);\t\t\t\t\t\tcoc = min(coc2 * 0.5, coc);\t\t\t\t\t\tcoc = min(coc3 * 0.75, coc);\t\t\t\t\t\tcoc = min(coc4 * 0.8, coc);\t\t\t\t\t\tcoc = min(coc5 * 0.95, coc);\t\t\t\t\t\tcoc = min(coc6 * 0.95, coc);\t\t\t\t\t\tcoc = min(coc7 * 0.8, coc);\t\t\t\t\t\tcoc = min(coc8 * 0.75, coc);\t\t\t\t\t\tcoc = min(coc9 * 0.5, coc);\t\t\t\t\t\tcoc = min(coc10 * 0.3, coc);\t\t\t\t\t\tif(abs(coc0) > abs(coc))\t\t\t\t\t\t\tcoc = coc0;\t\t\t\t\t}\t\t\t\t\treturn coc;\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 offset = direction/texSize;\t\t\t\t\tfloat coc = expandNear(offset, texture2D(depthTexture, vUv).x == 1.0);\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, coc);\n\t\t\t\t}"})},getDofBlurCircularMaterial:function(){return new g.ShaderMaterial({uniforms:{colorTexture:{value:null},cocTexture:{value:null},depthTexture:{value:null},texSize:{value:new g.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tvec4 CircularBlur() {\t\t\t\t\t\t\t\t\t\tconst int NUM_SAMPLES = 16;\t\t\t\t\tvec2 poisson_disk_samples[NUM_SAMPLES];\t\t\t\t\tpoisson_disk_samples[0] = vec2(-0.399691779231, 0.728591545584);\t\t\t\t\tpoisson_disk_samples[1] = vec2(-0.48622557676, -0.84016533712);\t\t\t\t\tpoisson_disk_samples[2] = vec2(0.770309468987, -0.24906070432);\t\t\t\t\tpoisson_disk_samples[3] = vec2(0.556596796154, 0.820359876432);\t\t\t\t\tpoisson_disk_samples[4] = vec2(-0.933902004071, 0.0600539051593);\t\t\t\t\tpoisson_disk_samples[5] = vec2(0.330144964342, 0.207477293384);\t\t\t\t\tpoisson_disk_samples[6] = vec2(0.289013230975, -0.686749271417);\t\t\t\t\tpoisson_disk_samples[7] = vec2(-0.0832470893559, -0.187351643125);\t\t\t\t\tpoisson_disk_samples[8] = vec2(-0.296314525615, 0.254474834305);\t\t\t\t\tpoisson_disk_samples[9] = vec2(-0.850977666059, 0.484642744689);\t\t\t\t\tpoisson_disk_samples[10] = vec2(0.829287915319, 0.2345063545);\t\t\t\t\tpoisson_disk_samples[11] = vec2(-0.773042143899, -0.543741521254);\t\t\t\t\tpoisson_disk_samples[12] = vec2(0.0561133030864, 0.928419742597);\t\t\t\t\tpoisson_disk_samples[13] = vec2(-0.205799249508, -0.562072714492);\t\t\t\t\tpoisson_disk_samples[14] = vec2(-0.526991665882, -0.193690188118);\t\t\t\t\tpoisson_disk_samples[15] = vec2(-0.051789270667, -0.935374050821);\t\t\t\t\t\t\t\t\t\t\tvec4 cocr = texture2D(cocTexture, vUv);\t\t\t\t\t\t\t\t\t\t\tfloat blurDist = MAXIMUM_BLUR_SIZE * coc.a;\t\t\t\t\t\t\t\t\t\t\tfloat rnd = PI2 * rand( vUv );\t\t\t\t\tfloat costheta = cos(rnd);\t\t\t\t\tfloat sintheta = sin(rnd);\t\t\t\t\tvec4 rotationMatrix = vec4(costheta, -sintheta, sintheta, costheta);\t\t\t\t\t\t\t\t\t\t\tvec3 colorSum = vec3(0.0);\t\t\t\t\tfloat weightSum = 0.0;\t\t\t\t\t\t\t\t\t\t\tfor (int i = 0; i < NUM_SAMPLES; i++) {\t\t\t\t\t\tvec2 ofs = poisson_disk_samples[i];\t\t\t\t\t\tofs = vec2(dot(ofs, rotationMatrix.xy), dot(ofs, rotationMatrix.zw) );\t\t\t\t\t\tvec2 texcoord = vUv + blurDist * ofs / texSize.xy;\t\t\t\t\t\tvec4 sample = texture2D(colorTexture, texcoord);\t\t\t\t\t\tfloat cocWeight = abs(sample.a);\t\t\t\t\t\tcocWeight *= cocWeight * cocWeight;\t\t\t\t\t\tcolorSum += sample.rgb * cocWeight;\t\t\t\t\t\tweightSum += cocWeight;\t\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\tcolorSum /= weightSum;\t\t\t\t\t\t\t\t\t\t\treturn vec4(colorSum, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = CircularBlur();\n\t\t\t\t}"})},getDofBlurSeperableMaterial:function(){return new g.ShaderMaterial({uniforms:{cocTexture:{value:null},colorTexture:{value:null},texSize:{value:new g.Vector2(.5,.5)},direction:{value:new g.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tconst float MAXIMUM_BLUR_SIZE = 8.0;\t\t\t\t\t\t\t\tconst float SIGMA = 5.0;\t\t\t\tconst int NUM_SAMPLES = 4;\t\t\t\tfloat normpdf(in float x, in float sigma)\t\t\t\t{\t\t\t\t\treturn 0.39894*exp(-0.5*x*x/(sigma*sigma))/sigma;\t\t\t\t}\t\t\t\t\t\t\t\tvec4 weightedBlur() { \t\t\t\t\tfloat cocIn = texture2D(cocTexture, vUv).a;\t\t\t\t\tfloat kernelRadius = MAXIMUM_BLUR_SIZE * cocIn;\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tcocIn *= cocIn * cocIn;\t\t\t\t\tfloat centreSpaceWeight = normpdf(0.0, SIGMA) * abs(cocIn);\t\t\t\t\tfloat weightSum = centreSpaceWeight;\t\t\t\t\tvec4 centreSample = texture2D(colorTexture, vUv);\t\t\t\t\tvec4 diffuseSum = centreSample * weightSum;\t\t\t\t\tvec2 delta = invSize * kernelRadius/float(NUM_SAMPLES);\t\t\t\t\tfor( int i = 1; i <= NUM_SAMPLES; i ++ ) {\t\t\t\t\t\t\tfloat spaceWeight = normpdf(float(i), SIGMA);\t\t\t\t\t\t\tvec2 texcoord = direction * delta * float(i);\t\t\t\t\t\t\tvec4 rightSample = texture2D( colorTexture, vUv + texcoord);\t\t\t\t\t\t\tvec4 leftSample = texture2D( colorTexture, vUv - texcoord);\t\t\t\t\t\t\tfloat leftCocWeight = abs(texture2D( cocTexture, vUv - texcoord).a);\t\t\t\t\t\t\tfloat rightCocWeight = abs(texture2D( cocTexture, vUv + texcoord).a);\t\t\t\t\t\t\tleftCocWeight *= leftCocWeight * leftCocWeight;\t\t\t\t\t\t\trightCocWeight *= rightCocWeight * rightCocWeight;\t\t\t\t\t\t\tdiffuseSum += ( (leftSample * leftCocWeight) + (rightSample * rightCocWeight) ) * spaceWeight;\t\t\t\t\t\t\tweightSum += (spaceWeight * (leftCocWeight + rightCocWeight));\t\t\t\t\t}\t\t\t\t  return diffuseSum/weightSum;\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = weightedBlur();\n\t\t\t\t}"})},getDofCombineMaterial:function(){return new g.ShaderMaterial({uniforms:{colorTexture:{value:null},blurTexture:{value:null},cocTexture:{value:null},depthTexture:{value:null},NearFarBlurScale:{value:new g.Vector2(.5,.5)},texSize:{value:new g.Vector2(.5,.5)},cameraNearFar:{value:new g.Vector2(.1,100)},focalDistance:{value:20}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform sampler2D blurTexture;\n\t\t\t\tuniform sampler2D cocTexture;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 NearFarBlurScale;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\tuniform float focalDistance;\t\t\t\t\t\t\t\tfloat computeCoc() {\t\t\t\t\tvec4 packedDepth = texture2D(depthTexture, vUv);\t\t\t\t\tif(packedDepth.x == 1.0) return max(NearFarBlurScale.x, NearFarBlurScale.y);\t\t\t\t\t\tfloat depth = unpackRGBAToDepth(packedDepth);\t\t\t\t\t\tdepth = -perspectiveDepthToViewZ(depth, cameraNearFar.x, cameraNearFar.y);\t\t\t\t\t\tfloat coc = (depth - focalDistance)/depth;\t\t\t\t\treturn (coc > 0.0 ? coc * NearFarBlurScale.y : coc * NearFarBlurScale.x);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 blur = texture2D(blurTexture, vUv);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(1.5, 0.5) / texSize);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(-0.5, 1.5) / texSize);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(-1.5, -0.5) / texSize);\t\t\t\t\tblur += texture2D(blurTexture, vUv + vec2(0.5, -1.5) / texSize);\t\t\t\t\tblur /= 5.0;\t\t\t\t\tfloat coc = abs(min(texture2D(cocTexture, vUv).a, computeCoc()));\t\t\t\t\tcoc = clamp(coc * coc * 8.0, 0.0, 1.0);\t\t\t\t\tvec4 color = mix(texture2D(colorTexture, vUv), blur, vec4(coc));\t\t\t\t\tgl_FragColor = color;\n\t\t\t\t}"})}}),g.UnrealBloomPass=function(e,t,r,n){g.Pass.call(this),this.strength=void 0!==t?t:1,this.radius=r,this.threshold=n,this.resolution=void 0!==e?new g.Vector2(e.x,e.y):new g.Vector2(256,256);var i={minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var a=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new g.WebGLRenderTarget(a,o,i),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var u=new g.WebGLRenderTarget(a,o,i);u.texture.name="UnrealBloomPass.h"+s,u.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(u);var u=new g.WebGLRenderTarget(a,o,i);u.texture.name="UnrealBloomPass.v"+s,u.texture.generateMipmaps=!1,this.renderTargetsVertical.push(u),a=Math.round(a/2),o=Math.round(o/2)}void 0===g.LuminosityHighPassShader&&console.error("THREE.UnrealBloomPass relies on THREE.LuminosityHighPassShader");var l=g.LuminosityHighPassShader;this.highPassUniforms=g.UniformsUtils.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=n,this.highPassUniforms.smoothWidth.value=.05,this.materialHighPassFilter=new g.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];for(var c=[3,5,7,9,11],a=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(c[s])),this.separableBlurMaterials[s].uniforms.texSize.value=new g.Vector2(a,o),a=Math.round(a/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;var f=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=f,this.bloomTintColors=[new g.Vector3(1,1,1),new g.Vector3(1,1,1),new g.Vector3(1,1,1),new g.Vector3(1,1,1),new g.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===g.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var d=g.CopyShader;this.copyUniforms=g.UniformsUtils.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new g.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:g.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new g.Color,this.oldClearAlpha=1,this.camera=new g.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new g.Scene,this.quad=new g.Mesh(new g.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},g.UnrealBloomPass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.UnrealBloomPass,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length();e++)this.renderTargetsHorizontal[e].dispose();for(var e=0;e<this.renderTargetsVertical.length();e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var r=Math.round(e/2),n=Math.round(t/2);this.renderTargetBright.setSize(r,n);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(r,n),this.renderTargetsVertical[i].setSize(r,n),this.separableBlurMaterials[i].uniforms.texSize.value=new g.Vector2(r,n),r=Math.round(r/2),n=Math.round(n/2)},render:function(e,t,r,n,i){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var a=e.autoClear;e.autoClear=!1,e.setClearColor(new g.Color(0,0,0),0),i&&e.context.disable(e.context.STENCIL_TEST),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,e.render(this.scene,this.camera,this.renderTargetBright,!0);for(var o=this.renderTargetBright,s=0;s<this.nMips;s++)this.quad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[s].uniforms.direction.value=g.UnrealBloomPass.BlurDirectionX,e.render(this.scene,this.camera,this.renderTargetsHorizontal[s],!0),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=g.UnrealBloomPass.BlurDirectionY,e.render(this.scene,this.camera,this.renderTargetsVertical[s],!0),o=this.renderTargetsVertical[s];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,r),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=a},getSeperableBlurMaterial:function(e){return new g.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new g.Vector2(.5,.5)},direction:{value:new g.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new g.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t \t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),g.UnrealBloomPass.BlurDirectionX=new g.Vector2(1,0),g.UnrealBloomPass.BlurDirectionY=new g.Vector2(0,1),g.SparklePass=function(e,t,r,n){g.Pass.call(this),this.camera=e,this.worldSizeOfSparkle=r,this.sparkleTexture=n,this.sparkleScene=new g.Scene,this.sparkles=[],this.gems={},this.needsSwap=!0,this.noiseTexture=new g.WebGLRenderTarget(256,256,{minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat,name:"Sparkle Noise Texture"});var i=new g.ShaderMaterial(g.NoiseShader);i.uniforms=g.UniformsUtils.clone(i.uniforms),i.blending=g.NoBlending,i.premultipliedAlpha=!0,i.transparent=!0,i.depthTest=!1,i.depthWrite=!1,i.needsUpdate=!0,t.renderPass(i,this.noiseTexture,!0),this.copyMaterial=new g.ShaderMaterial(g.CopyShader),this.copyMaterial.uniforms=g.UniformsUtils.clone(this.copyMaterial.uniforms),this.copyMaterial.uniforms.opacity.value=1,this.copyMaterial.blending=g.NoBlending,this.copyMaterial.premultipliedAlpha=!0,this.copyMaterial.transparent=!0,this.copyMaterial.depthTest=!1,this.copyMaterial.depthWrite=!1},g.SparklePass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.SparklePass,setSparkleTexture:function(e){this.sparkleTexture=e},setWorldSizeOfSparkles:function(e){this.worldSizeOfSparkle=e},updateScene:function(e){},addGemstone:function(e,t,r){if(this.sparkleTexture&&!this.gems[t.uuid]){var n=[],i=new g.Object3D,a=new g.Sparkle(this.sparkleTexture);a.mesh.scale.set(1,1,1).divide(t.scale),a.setScale(this.worldSizeOfSparkle),this.noiseTexture&&(a.material.uniforms.noiseTexture.value=this.noiseTexture.texture);var o=new g.Vector3;if(e instanceof g.BufferGeometry)for(var s=e.attributes.position.array,u=s.length/3-1,l=0;l<r;++l){var c=3*Math.round(Math.random()*u);o.x=s[c],o.y=s[c+1],o.z=s[c+2];var f=a.shallowCopy();f.mesh.position.copy(o),f.setIntensity(1),n.push(f),i.add(f.mesh),f.mesh.updateMatrixWorld(!0)}else for(var d=e.vertices,u=d.length-1,l=0;l<r;++l){o.copy(d[Math.round(Math.random()*u)]);var f=a.shallowCopy();f.mesh.position.copy(o),f.setIntensity(1),n.push(f),i.add(f.mesh),f.mesh.updateMatrixWorld(!0)}this.sparkleScene.add(i),this.gems[t.uuid]={transform:i,originalMesh:t,sparkles:n},this.enabled=!0}},removeGemstone:function(e){this.gems[e.uuid]&&(this.sparkleScene.remove(this.gems[e.uuid].transform),this.gems[e.uuid]=null)},setScreenTexture:function(e){for(var t in this.gems){var r=this.gems[t]&&this.gems[t].sparkles;if(r)for(var n=0;n<r.length;++n)r[n].material.uniforms.screenTexture.value=e}},alignSparklesWithCamera:function(){for(var e in this.gems){var t=this.gems[e];if(t){var r=t&&t.sparkles;if(t.transform.visible=t.originalMesh.visible,t.transform.visible&&r)for(var n=r.length,i=0;i<n;++i)r[i].alignWithCamera(this.camera,t.originalMesh)}}},render:function(e,t,r,n,i){this.alignSparklesWithCamera(),this.setScreenTexture(r.texture),this.copyMaterial.uniforms.tDiffuse.value=r.texture,e.renderPass(this.copyMaterial,this.renderToScreen?null:t,!0);var a=e.autoClear;e.autoClear=!1,e.render(this.sparkleScene,this.camera,this.renderToScreen?null:t),e.autoClear=a}}),g.MirrorHelper=function(e){this.scene=new g.Scene,this.cameraOrtho=new g.OrthographicCamera(-1,1,1,-1,0,1),this.quad=new g.Mesh(new g.PlaneGeometry(2,2),null),this.scene.add(this.quad),this.mirror=e,this.numMipMaps=4,this.mirrorTextureMipMaps=[],this.tempRenderTargets=[];for(var t={minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat,stencilBuffer:!1},r=e.mirrorRenderTarget,n=r.width/2,i=r.height/2,a=0;a<this.numMipMaps;a++){var o=new g.WebGLRenderTarget(n,i,t);o.texture.generateMipmaps=!1,this.mirrorTextureMipMaps.push(o);var s=new g.WebGLRenderTarget(n,i,t);s.texture.generateMipmaps=!1,this.tempRenderTargets.push(s),n/=2,i/=2}this.vBlurMaterial=new g.ShaderMaterial(g.BlurShader),this.vBlurMaterial.side=g.DoubleSide,this.vBlurMaterial.uniforms.size.value.set(r.width/2,r.height/2),this.vBlurMaterial.blending=g.NoBlending,g.BlurShaderUtils.configure(this.vBlurMaterial,5,3,new g.Vector2(0,1)),this.hBlurMaterial=this.vBlurMaterial.clone(),this.hBlurMaterial.side=g.DoubleSide,this.hBlurMaterial.uniforms.size.value.set(r.width/2,r.height/2),this.hBlurMaterial.blending=g.NoBlending,g.BlurShaderUtils.configure(this.hBlurMaterial,5,3,new g.Vector2(1,0))},g.MirrorHelper.prototype={constructor:g.MirrorHelper,setSize:function(e,t){for(var r=0;r<this.numMipMaps;r++)e/=2,t/=2,this.mirrorTextureMipMaps[r].setSize(e,t),this.tempRenderTargets[r].setSize(e,t)},update:function(e){for(var t=this.mirror.mirrorRenderTarget,r=0;r<this.numMipMaps;r++){var n=this.mirrorTextureMipMaps[r],i=this.tempRenderTargets[r];this.hBlurMaterial.uniforms.size.value.set(t.width,t.height),this.hBlurMaterial.uniforms.tDiffuse.value=t.texture,this.quad.material=this.hBlurMaterial,e.render(this.scene,this.cameraOrtho,i,!0),this.vBlurMaterial.uniforms.size.value.set(i.width,i.height),this.vBlurMaterial.uniforms.tDiffuse.value=i.texture,this.quad.material=this.vBlurMaterial,e.render(this.scene,this.cameraOrtho,n,!0),t=n}}},g.GlossyMirror=function(e){g.Object3D.call(this),this.name="mirror_"+this.id,e=e||{},this.matrixNeedsUpdate=!0;var t=void 0!==e.textureWidth?e.textureWidth:512,r=void 0!==e.textureHeight?e.textureHeight:512;if(this.size=new g.Vector3(t,r),this.localMirrorNormal=void 0!==e.localMirrorNormal?e.localMirrorNormal:new g.Vector3(0,0,1),this.distanceFade=.1,this.metalness=0,this.specularColor=new g.Color(16777215),this.roughness=0,this.fresnelStrength=1,this.mirrorPlane=new g.Plane,this.mirrorWorldPosition=new g.Vector3,this.cameraWorldPosition=new g.Vector3,this.rotationMatrix=new g.Matrix4,this.lookAtPosition=new g.Vector3(0,0,-1),this.matrixNeedsUpdate=!0,void 0!==e.debugMode&&e.debugMode){var n=new g.ArrowHelper(new g.Vector3(0,0,1),new g.Vector3(0,0,0),10,16777088),i=new g.Geometry;i.vertices.push(new g.Vector3(-10,-10,0)),i.vertices.push(new g.Vector3(10,-10,0)),i.vertices.push(new g.Vector3(10,10,0)),i.vertices.push(new g.Vector3(-10,10,0)),i.vertices.push(i.vertices[0]);var a=new g.Line(i,new g.LineBasicMaterial({color:16777088}));this.add(n),this.add(a)}this.reflectionTextureMatrix=new g.Matrix4,this.mirrorNormal=new g.Vector3;var o={minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat,stencilBuffer:!1};this.mirrorRenderTarget=new g.WebGLRenderTarget(t,r,o),this.mirrorRenderTarget.texture.name="GlossyMirror.mirror",this.material=new g.ShaderMaterial(g.GlossyMirrorShader),this.material.defines=(0,p.default)({},this.material.defines),this.material.uniforms=g.UniformsUtils.clone(this.material.uniforms),this.material.uniforms.tReflection.value=this.mirrorRenderTarget.texture,this.material.uniforms.reflectionTextureMatrix.value=this.reflectionTextureMatrix,this.mirrorRenderTarget.texture.generateMipmaps=!1,this.clipPlane=new g.Plane(this.localMirrorNormal,0),this.originalClipPlane=this.clipPlane.clone(),this.falseClipPlane=this.clipPlane.clone(),this.falseClipPlane.constant=1e4,this.depthMaterial=new g.MeshDepthMaterial,this.depthMaterial.depthPacking=g.RGBADepthPacking,this.depthMaterial.blending=g.NoBlending,this.depthMaterial.side=g.FrontSide,this.depthRenderTarget=new g.WebGLRenderTarget(t,r,{minFilter:g.NearestFilter,magFilter:g.NearestFilter,format:g.RGBAFormat}),this.depthRenderTarget.texture.generateMipmaps=!1,this.depthRenderTarget.texture.name="GlossyMirror.depth",this.material.uniforms.tReflectionDepth.value=this.depthRenderTarget.texture,this.material.uniforms.screenSize.value=new g.Vector2(t,r),this.mirrorHelper=new g.MirrorHelper(this),this.material.uniforms.tReflection.value=this.mirrorRenderTarget.texture,this.material.uniforms.tReflection1.value=this.mirrorHelper.mirrorTextureMipMaps[0].texture,this.material.uniforms.tReflection2.value=this.mirrorHelper.mirrorTextureMipMaps[1].texture,this.material.uniforms.tReflection3.value=this.mirrorHelper.mirrorTextureMipMaps[2].texture,this.material.uniforms.tReflection4.value=this.mirrorHelper.mirrorTextureMipMaps[3].texture,this.setSize(t,r)},g.GlossyMirror.prototype=(0,p.default)((0,d.default)(g.Object3D.prototype),{constructor:g.GlossyMirror,setSize:function(e,t){this.size.x===e&&this.size.y===t||(this.mirrorRenderTarget.setSize(e,t),this.depthRenderTarget.setSize(e,t),this.mirrorHelper.setSize(e,t),this.material.uniforms.screenSize.value=new g.Vector2(e,t),this.size.set(e,t),this.matrixNeedsUpdate=!0),this.matrixNeedsUpdate=!0},updateReflectionTextureMatrix:function(e){this.updateMatrixWorld(),e.updateMatrixWorld(),this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(e.matrixWorld),this.rotationMatrix.extractRotation(this.matrixWorld),this.mirrorNormal.copy(this.localMirrorNormal),this.mirrorNormal.applyMatrix4(this.rotationMatrix);var t=this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);t.reflect(this.mirrorNormal).negate(),t.add(this.mirrorWorldPosition),this.rotationMatrix.extractRotation(e.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition);var r=this.mirrorWorldPosition.clone().sub(this.lookAtPosition);r.reflect(this.mirrorNormal).negate(),r.add(this.mirrorWorldPosition),this.up.set(0,-1,0),this.up.applyMatrix4(this.rotationMatrix),this.up.reflect(this.mirrorNormal).negate(),this.mirrorCamera.position.copy(t),this.mirrorCamera.up=this.up,this.mirrorCamera.lookAt(r),this.mirrorCamera.fov=e.fov,this.mirrorCamera.near=e.near,this.mirrorCamera.far=e.far,this.mirrorCamera.aspect=e.aspect,this.mirrorCamera.updateProjectionMatrix(),this.mirrorCamera.updateMatrixWorld(),this.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld),this.reflectionTextureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.reflectionTextureMatrix.multiply(this.mirrorCamera.projectionMatrix),this.reflectionTextureMatrix.multiply(this.mirrorCamera.matrixWorldInverse),this.mirrorPlane.setFromNormalAndCoplanarPoint(this.mirrorNormal,this.mirrorWorldPosition),this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse),this.material.uniforms.mirrorCameraProjectionMatrix.value.copy(this.mirrorCamera.projectionMatrix),this.material.uniforms.mirrorCameraInverseProjectionMatrix.value.getInverse(this.mirrorCamera.projectionMatrix),this.material.uniforms.mirrorCameraWorldMatrix.value.copy(e.matrixWorld),this.material.uniforms.mirrorCameraNear.value=this.mirrorCamera.near,this.material.uniforms.mirrorCameraFar.value=this.mirrorCamera.far,this.material.uniforms.mirrorNormal.value=this.mirrorNormal,this.material.uniforms.mirrorWorldPosition.value=this.mirrorWorldPosition,this.material.transparent=!0},render:function(e,t,r,n,i){if(!r instanceof g.PerspectiveCamera&&console.error("THREE.GlossyMirror: camera is not a Perspective Camera!"),this.setSize(n,i),this.mirrorCamera||(this.mirrorCamera=r.clone(),this.mirrorCamera.matrixAutoUpdate=!0),this.matrixNeedsUpdate&&this.updateReflectionTextureMatrix(r),this.matrixNeedsUpdate=!0,void 0!==this.clipPlane&&(this.clipPlane.copy(this.originalClipPlane),this.clipPlane.applyMatrix4(this.matrixWorld),this.clippingPlanes=[this.clipPlane]),e.clippingPlanes=this.clippingPlanes,void 0!==t&&t instanceof g.Scene){var a=this.material.visible;this.material.visible=!1,e.render(t,this.mirrorCamera,this.mirrorRenderTarget,!0),this.material.visible=a}t.overrideMaterial=this.depthMaterial;var a=this.material.visible,o=e.getClearColor(),s=e.getClearAlpha();e.setClearColor(16777215,1),this.material.visible=!1,e.render(t,this.mirrorCamera,this.depthRenderTarget,!0),t.overrideMaterial=null,e.setClearColor(o,s),this.material.visible=a,this.material.uniforms.distanceFade.value=this.distanceFade,this.material.uniforms.metalness.value=this.metalness,this.material.uniforms.fresnelStrength.value=this.fresnelStrength,this.material.uniforms.specularColor.value.copy(this.specularColor),this.material.uniforms.roughness.value=this.roughness,void 0!==this.clipPlane&&this.clipPlane.copy(this.falseClipPlane),void 0!==this.mirrorHelper&&this.mirrorHelper.update(e)}}),g.OrbitControls=function(e,t){function r(){return 2*Math.PI/60/60*R.autoRotateSpeed}function n(){return Math.pow(.95,R.zoomSpeed)}function i(e){F.theta-=e}function a(e){F.phi-=e}function o(e){R.object instanceof g.PerspectiveCamera?G/=e:R.object instanceof g.OrthographicCamera?(R.object.zoom=Math.max(R.minZoom,Math.min(R.maxZoom,R.object.zoom*e)),R.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),R.enableZoom=!1)}function s(e){R.object instanceof g.PerspectiveCamera?G*=e:R.object instanceof g.OrthographicCamera?(R.object.zoom=Math.max(R.minZoom,Math.min(R.maxZoom,R.object.zoom/e)),R.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),R.enableZoom=!1)}function u(e){Y.set(e.clientX,e.clientY)}function l(e){J.set(e.clientX,e.clientY)}function c(e){X.set(e.clientX,e.clientY)}function f(e){Q.set(e.clientX,e.clientY),q.subVectors(Q,Y);var t=R.domElement===document?R.domElement.body:R.domElement;i(2*Math.PI*q.x/t.clientWidth*R.rotateSpeed),a(2*Math.PI*q.y/t.clientHeight*R.rotateSpeed),Y.copy(Q),R.update()}function d(e){$.set(e.clientX,e.clientY),ee.subVectors($,J),ee.y>0?o(n()):ee.y<0&&s(n()),J.copy($),R.update()}function h(e){Z.set(e.clientX,e.clientY),K.subVectors(Z,X),ne(K.x,K.y),X.copy(Z),R.update()}function p(e){}function m(e){e.deltaY<0?s(n()):e.deltaY>0&&o(n()),R.update()}function v(e){switch(e.keyCode){case R.keys.UP:ne(0,R.keyPanSpeed),R.update();break;case R.keys.BOTTOM:ne(0,-R.keyPanSpeed),R.update();break;case R.keys.LEFT:ne(R.keyPanSpeed,0),R.update();break;case R.keys.RIGHT:ne(-R.keyPanSpeed,0),R.update()}}function y(e){Y.set(e.touches[0].pageX,e.touches[0].pageY)}function M(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);J.set(0,n)}function w(e){X.set(e.touches[0].pageX,e.touches[0].pageY)}function x(e){Q.set(e.touches[0].pageX,e.touches[0].pageY),q.subVectors(Q,Y);var t=R.domElement===document?R.domElement.body:R.domElement;i(2*Math.PI*q.x/t.clientWidth*R.rotateSpeed),a(2*Math.PI*q.y/t.clientHeight*R.rotateSpeed),Y.copy(Q),R.update()}function b(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);$.set(0,i),ee.subVectors($,J),ee.y>0?s(n()):ee.y<0&&o(n()),J.copy($),R.update()}function T(e){Z.set(e.touches[0].pageX,e.touches[0].pageY),K.subVectors(Z,X),ne(K.x,K.y),X.copy(Z),R.update()}function S(e){}function _(e){if(!1!==R.enabled){if(e.preventDefault(),e.button===R.mouseButtons.ORBIT){if(!1===R.enableRotate)return;u(e),B=U.ROTATE}else if(e.button===R.mouseButtons.ZOOM){if(!1===R.enableZoom)return;l(e),B=U.DOLLY}else if(e.button===R.mouseButtons.PAN){if(!1===R.enablePan)return;c(e),B=U.PAN}B!==U.NONE&&(document.addEventListener("mousemove",E,!1),document.addEventListener("mouseup",A,!1),R.dispatchEvent(z))}}function E(e){if(!1!==R.enabled)if(e.preventDefault(),B===U.ROTATE){if(!1===R.enableRotate)return;f(e)}else if(B===U.DOLLY){if(!1===R.enableZoom)return;d(e)}else if(B===U.PAN){if(!1===R.enablePan)return;h(e)}}function A(e){!1!==R.enabled&&(p(e),document.removeEventListener("mousemove",E,!1),document.removeEventListener("mouseup",A,!1),R.dispatchEvent(j),B=U.NONE)}function I(e){!1===R.enabled||!1===R.enableZoom||B!==U.NONE&&B!==U.ROTATE||(e.preventDefault(),e.stopPropagation(),m(e),R.dispatchEvent(z),R.dispatchEvent(j))}function D(e){!1!==R.enabled&&!1!==R.enableKeys&&!1!==R.enablePan&&v(e)}function L(e){if(!1!==R.enabled){switch(e.touches.length){case 1:if(!1===R.enableRotate)return;y(e),B=U.TOUCH_ROTATE;break;case 2:if(!1===R.enableZoom)return;M(e),B=U.TOUCH_DOLLY;break;case 3:if(!1===R.enablePan)return;w(e),B=U.TOUCH_PAN;break;default:B=U.NONE}B!==U.NONE&&R.dispatchEvent(z)}}function N(e){if(!1!==R.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===R.enableRotate)return;if(B!==U.TOUCH_ROTATE)return;x(e);break;case 2:if(!1===R.enableZoom)return;if(B!==U.TOUCH_DOLLY)return;b(e);break;case 3:if(!1===R.enablePan)return;if(B!==U.TOUCH_PAN)return;T(e);break;default:B=U.NONE}}function C(e){!1!==R.enabled&&(S(e),R.dispatchEvent(j),B=U.NONE)}function O(e){e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new g.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:g.MOUSE.LEFT,ZOOM:g.MOUSE.MIDDLE,PAN:g.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return k.phi},this.getAzimuthalAngle=function(){return k.theta},this.reset=function(){R.target.copy(R.target0),R.object.position.copy(R.position0),R.object.zoom=R.zoom0,R.object.updateProjectionMatrix(),R.dispatchEvent(P),R.update(),B=U.NONE},this.update=function(){var t=new g.Vector3,n=(new g.Quaternion).setFromUnitVectors(e.up,new g.Vector3(0,1,0)),a=n.clone().inverse(),o=new g.Vector3,s=new g.Quaternion;return function(){var e=R.object.position;return t.copy(e).sub(R.target),t.applyQuaternion(n),k.setFromVector3(t),R.autoRotate&&B===U.NONE&&i(r()),k.theta+=F.theta,k.phi+=F.phi,k.theta=Math.max(R.minAzimuthAngle,Math.min(R.maxAzimuthAngle,k.theta)),k.phi=Math.max(R.minPolarAngle,Math.min(R.maxPolarAngle,k.phi)),k.makeSafe(),k.radius*=G,k.radius=Math.max(R.minDistance,Math.min(R.maxDistance,k.radius)),R.target.add(H),t.setFromSpherical(k),t.applyQuaternion(a),e.copy(R.target).add(t),R.object.lookAt(R.target),!0===R.enableDamping?(F.theta*=1-R.dampingFactor,F.phi*=1-R.dampingFactor):F.set(0,0,0),G=1,H.set(0,0,0),!!(W||o.distanceToSquared(R.object.position)>V||8*(1-s.dot(R.object.quaternion))>V)&&(R.dispatchEvent(P),o.copy(R.object.position),s.copy(R.object.quaternion),W=!1,!0)}}(),this.dispose=function(){R.domElement.removeEventListener("contextmenu",O,!1),R.domElement.removeEventListener("mousedown",_,!1),R.domElement.removeEventListener("wheel",I,!1),R.domElement.removeEventListener("touchstart",L,!1),R.domElement.removeEventListener("touchend",C,!1),R.domElement.removeEventListener("touchmove",N,!1),document.removeEventListener("mousemove",E,!1),document.removeEventListener("mouseup",A,!1),window.removeEventListener("keydown",D,!1)};var R=this,P={type:"change"},z={type:"start"},j={type:"end"},U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},B=U.NONE,V=1e-6,k=new g.Spherical,F=new g.Spherical,G=1,H=new g.Vector3,W=!1,Y=new g.Vector2,Q=new g.Vector2,q=new g.Vector2,X=new g.Vector2,Z=new g.Vector2,K=new g.Vector2,J=new g.Vector2,$=new g.Vector2,ee=new g.Vector2,te=function(){var e=new g.Vector3;return function(t,r){e.setFromMatrixColumn(r,0),e.multiplyScalar(-t),H.add(e)}}(),re=function(){var e=new g.Vector3;return function(t,r){e.setFromMatrixColumn(r,1),e.multiplyScalar(t),H.add(e)}}(),ne=function(){var e=new g.Vector3;return function(t,r){var n=R.domElement===document?R.domElement.body:R.domElement;if(R.object instanceof g.PerspectiveCamera){var i=R.object.position;e.copy(i).sub(R.target);var a=e.length();a*=Math.tan(R.object.fov/2*Math.PI/180),te(2*t*a/n.clientHeight,R.object.matrix),re(2*r*a/n.clientHeight,R.object.matrix)}else R.object instanceof g.OrthographicCamera?(te(t*(R.object.right-R.object.left)/R.object.zoom/n.clientWidth,R.object.matrix),re(r*(R.object.top-R.object.bottom)/R.object.zoom/n.clientHeight,R.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),R.enablePan=!1)}}();R.domElement.addEventListener("contextmenu",O,!1),R.domElement.addEventListener("mousedown",_,!1),R.domElement.addEventListener("wheel",I,!1),R.domElement.addEventListener("touchstart",L,!1),R.domElement.addEventListener("touchend",C,!1),R.domElement.addEventListener("touchmove",N,!1),window.addEventListener("keydown",D,!1),this.update()},g.OrbitControls.prototype=(0,d.default)(g.EventDispatcher.prototype),g.OrbitControls.prototype.constructor=g.OrbitControls,(0,c.default)(g.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),g.Color.prototype.toJSON=function(){return{r:this.r,g:this.g,b:this.b}},g.HDRLoader=g.RGBELoader=function(e){this.manager=void 0!==e?e:g.DefaultLoadingManager},g.RGBELoader.prototype=(0,d.default)(g.DataTextureLoader.prototype),g.RGBELoader.prototype._parser=function(e){var t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},r=function(e,t,r){t=t||1024;for(var n=e.pos,i=-1,a=0,o="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));0>(i=s.indexOf("\n"))&&a<t&&n<e.byteLength;)o+=s,a+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<i&&(!1!==r&&(e.pos+=a+i+1),o+s.slice(0,i))},n=new Uint8Array(e);n.byteLength;n.pos=0;var i=function(e){var n,i,a=/^#\?(\S+)$/,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,u=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,c={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(n=r(e)))return t(1,"no header found");if(!(i=n.match(a)))return t(3,"bad initial token");for(c.valid|=1,c.programtype=i[1],c.string+=n+"\n";;){if(!1===(n=r(e)))break;if(c.string+=n+"\n","#"!==n.charAt(0)){if((i=n.match(o))&&(c.gamma=parseFloat(i[1],10)),(i=n.match(s))&&(c.exposure=parseFloat(i[1],10)),(i=n.match(u))&&(c.valid|=2,c.format=i[1]),(i=n.match(l))&&(c.valid|=4,c.height=parseInt(i[1],10),c.width=parseInt(i[2],10)),2&c.valid&&4&c.valid)break}else c.comments+=n+"\n"}return 2&c.valid?4&c.valid?c:t(3,"missing image size specifier"):t(3,"missing format specifier")}(n);if(-1!==i){var a=i.width,o=i.height,s=function(e,r,n){var i,a,o,s,u,l,c,f,d,h,p,g,m,v=r,y=n;if(v<8||v>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(v!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(i=new Uint8Array(4*r*n))||!i.length)return t(4,"unable to allocate buffer space");for(a=0,o=0,f=4*v,m=new Uint8Array(4),l=new Uint8Array(f);y>0&&o<e.byteLength;){if(o+4>e.byteLength)return t(1);if(m[0]=e[o++],m[1]=e[o++],m[2]=e[o++],m[3]=e[o++],2!=m[0]||2!=m[1]||(m[2]<<8|m[3])!=v)return t(3,"bad rgbe scanline format");for(c=0;c<f&&o<e.byteLength;){if(s=e[o++],g=s>128,g&&(s-=128),0===s||c+s>f)return t(3,"bad scanline data");if(g)for(u=e[o++],d=0;d<s;d++)l[c++]=u;else l.set(e.subarray(o,o+s),c),c+=s,o+=s}for(h=v,d=0;d<h;d++)p=0,i[a]=l[d+p],p+=v,i[a+1]=l[d+p],p+=v,i[a+2]=l[d+p],p+=v,i[a+3]=l[d+p],a+=4;y--}return i}(n.subarray(n.pos),a,o);if(-1!==s)return{width:a,height:o,data:s,header:i.string,gamma:i.gamma,exposure:i.exposure,format:g.RGBEFormat,type:g.UnsignedByteType}}return null},g.CombinedCamera=function(e,t,r,n,i){g.Camera.call(this),this.fov=r,this.far=i,this.near=n,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.aspect=e/t,this.zoom=1,this.focus=10,this.view=null,this.hyperfocusOffset=0,this.hyperfocusScale=.5,this.cameraO=new g.OrthographicCamera(this.left,this.right,this.top,this.bottom,this.near,this.far),this.cameraP=new g.PerspectiveCamera(this.fov,this.aspect,this.near,this.far),this.toPerspective()},g.CombinedCamera.prototype=(0,d.default)(g.Camera.prototype),g.CombinedCamera.prototype.constructor=g.CombinedCamera,g.CombinedCamera.prototype.toPerspective=function(){this.cameraP.near=this.near,this.cameraP.far=this.far,this.cameraP.aspect=this.aspect,this.cameraP.fov=this.fov,this.cameraP.zoom=this.zoom,this.cameraP.view=this.view,this.cameraP.focus=this.focus,this.cameraP.updateProjectionMatrix(),this.projectionMatrix=this.cameraP.projectionMatrix,this.inPerspectiveMode=!0,this.inOrthographicMode=!1},g.CombinedCamera.prototype.toOrthographic=function(){var e=this.fov,t=this.aspect,r=Math.tan(e*Math.PI/180/2)*(this.hyperfocusOffset+this.hyperfocusScale*(this.near+this.far)),n=r*t;this.cameraO.near=this.near,this.cameraO.far=this.far,this.cameraO.left=-n,this.cameraO.right=n,this.cameraO.top=r,this.cameraO.bottom=-r,this.cameraO.zoom=this.zoom,this.cameraO.view=this.view,this.cameraO.updateProjectionMatrix(),this.projectionMatrix=this.cameraO.projectionMatrix,this.inPerspectiveMode=!1,this.inOrthographicMode=!0},g.CombinedCamera.prototype.setSize=function(e,t){this.aspect=e/t,this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2},g.CombinedCamera.prototype.setFov=function(e){this.fov=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},g.CombinedCamera.prototype.copy=function(e){return g.Camera.prototype.copy.call(this,e),this.fov=e.fov,this.far=e.far,this.near=e.near,this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.zoom=e.zoom,this.view=null===e.view?null:(0,p.default)({},e.view),this.aspect=e.aspect,this.hyperfocusOffset=e.hyperfocusOffset,this.hyperfocusScale=e.hyperfocusScale,this.cameraO.copy(e.cameraO),this.cameraP.copy(e.cameraP),this.inOrthographicMode=e.inOrthographicMode,this.inPerspectiveMode=e.inPerspectiveMode,this},g.CombinedCamera.prototype.setViewOffset=function(e,t,r,n,i,a){this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:n,width:i,height:a},this.inPerspectiveMode?(this.aspect=e/t,this.toPerspective()):this.toOrthographic()},g.CombinedCamera.prototype.clearViewOffset=function(){this.view=null,this.updateProjectionMatrix()},g.CombinedCamera.prototype.updateProjectionMatrix=function(){this.inPerspectiveMode?this.toPerspective():(this.toPerspective(),this.toOrthographic())},g.CombinedCamera.prototype.setLens=function(e,t){void 0===t&&(t=35);var r=.5*t/(e*Math.max(this.cameraP.aspect,1)),n=2*g.Math.RAD2DEG*Math.atan(r);return this.setFov(n),n},g.CombinedCamera.prototype.setZoom=function(e){this.zoom=e,this.inPerspectiveMode?this.toPerspective():this.toOrthographic()},g.CombinedCamera.prototype.toFrontView=function(){this.rotation.x=0,this.rotation.y=0,this.rotation.z=0,this.position.x=0,this.position.y=0,this.position.z=-15},g.CombinedCamera.prototype.toBackView=function(){this.rotation.x=0,this.rotation.y=Math.PI,this.rotation.z=0,this.position.x=0,this.position.y=0,this.position.z=15},g.CombinedCamera.prototype.toLeftView=function(){this.rotation.x=0,this.rotation.y=-Math.PI/2,this.rotation.z=0,this.position.x=-15,this.position.y=0,this.position.z=0},g.CombinedCamera.prototype.toRightView=function(){this.rotation.x=0,this.rotation.y=Math.PI/2,this.rotation.z=0,this.position.x=15,this.position.y=0,this.position.z=0},g.CombinedCamera.prototype.toTopView=function(){this.rotation.x=-Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.position.x=0,this.position.y=15,this.position.z=0},g.CombinedCamera.prototype.toBottomView=function(){this.rotation.x=Math.PI/2,this.rotation.y=0,this.rotation.z=0,this.position.x=0,this.position.y=-15,this.position.z=0},g.CombinedCamera.prototype.toPerspectiveView=function(){this.rotation.x=-Math.PI/4,this.rotation.y=-Math.PI/4,this.rotation.z=0,this.position.x=4,this.position.y=4,this.position.z=4},g.ParallaxBarrierEffect=function(e){var t=new g.OrthographicCamera(-1,1,1,-1,0,1),r=new g.Scene,n=new g.StereoCamera,i={minFilter:g.LinearFilter,magFilter:g.NearestFilter,format:g.RGBAFormat},a=new g.WebGLRenderTarget(512,512,i),o=new g.WebGLRenderTarget(512,512,i),s=new g.ShaderMaterial({uniforms:{mapLeft:{value:a.texture},mapRight:{value:o.texture},resolution:{value:new g.Vector2(512,512)}},vertexShader:["varying vec2 vUv;","void main() {"," vUv = vec2( uv.x, uv.y );"," gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D mapLeft;","uniform sampler2D mapRight;","uniform vec2 resolution;","varying vec2 vUv;","void main() {"," vec2 uv = vUv;"," if ( ( mod( gl_FragCoord.x + 1.0, 2.0 ) ) > 1.00 ) {","   gl_FragColor = texture2D( mapLeft, uv );"," } else {","   gl_FragColor = texture2D( mapRight, uv - vec2( resolution.x, 0 ) );"," }","}"].join("\n")}),u=new g.Mesh(new g.PlaneBufferGeometry(2,2),s);r.add(u),this.setSize=function(t,r){e.setSize(t,r);var n=e.getPixelRatio();s.uniforms.resolution.value.set(1/t,1/r),a.setSize(t*n/2+1,r*n),o.setSize(t*n/2+1,r*n)},this.render=function(i,s){i.updateMatrixWorld(),null===s.parent&&s.updateMatrixWorld(),n.update(s),e.render(i,n.cameraL,a,!0),e.render(i,n.cameraR,o,!0),e.render(r,t)}},g.StereoEffect=function(e){var t=new g.StereoCamera;t.aspect=.5,this.setEyeSeparation=function(e){t.eyeSep=e},this.setSize=function(t,r){e.setSize(t,r)},this.updateStereo=function(e){t.update(e)},this.getCameraL=function(){return t.cameraL},this.getCameraR=function(){return t.cameraR},this.render=function(r,n){r.updateMatrixWorld(),null===n.parent&&n.updateMatrixWorld(),t.update(n);var i=e.getSize();e.autoClear&&e.clear(),e.setScissorTest(!0),e.setScissor(0,0,i.width/2,i.height),e.setViewport(0,0,i.width/2,i.height),e.render(r,t.cameraL),e.setScissor(i.width/2,0,i.width/2,i.height),e.setViewport(i.width/2,0,i.width/2,i.height),e.render(r,t.cameraR),e.setScissorTest(!1)}},g.FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new g.Vector2(1/1024,1/512)}},vertexShader:["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n")},g.OutlinePass=function(e,t,r,n){this.renderScene=t,this.camera=r,this.selectedObjects=void 0!==n?n:[],this.visibleEdgeColor=new g.Color(1,1,1),this.hiddenEdgeColor=new g.Color(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,g.Pass.call(this),this.resolution=void 0!==e?new g.Vector2(e.x,e.y):new g.Vector2(256,256);var i={minFilter:g.LinearFilter,magFilter:g.LinearFilter,format:g.RGBAFormat},a=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.maskBufferMaterial=new g.MeshBasicMaterial({color:16777215}),this.maskBufferMaterial.side=g.DoubleSide,this.renderTargetMaskBuffer=new g.WebGLRenderTarget(this.resolution.x,this.resolution.y,i),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new g.MeshDepthMaterial,this.depthMaterial.side=g.DoubleSide,this.depthMaterial.depthPacking=g.RGBADepthPacking,this.depthMaterial.blending=g.NoBlending,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=g.DoubleSide,this.renderTargetDepthBuffer=new g.WebGLRenderTarget(this.resolution.x,this.resolution.y,i),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new g.WebGLRenderTarget(a,o,i),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new g.WebGLRenderTarget(a,o,i),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new g.WebGLRenderTarget(Math.round(a/2),Math.round(o/2),i),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new g.WebGLRenderTarget(a,o,i),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new g.WebGLRenderTarget(Math.round(a/2),Math.round(o/2),i),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value=new g.Vector2(a,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value=new g.Vector2(Math.round(a/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial(),void 0===g.CopyShader&&console.error("THREE.OutlinePass relies on THREE.CopyShader");var s=g.CopyShader;this.copyUniforms=g.UniformsUtils.clone(s.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new g.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,blending:g.NoBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new g.Color,this.oldClearAlpha=1,this.orthoCamera=new g.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new g.Scene,this.quad=new g.Mesh(new g.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.tempPulseColor1=new g.Color,this.tempPulseColor2=new g.Color,this.textureMatrix=new g.Matrix4},g.OutlinePass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.OutlinePass,dispose:function(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose()},setSize:function(e,t){this.renderTargetMaskBuffer.setSize(e,t);var r=Math.round(e/this.downSampleRatio),n=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(r,n),this.renderTargetBlurBuffer1.setSize(r,n),this.renderTargetEdgeBuffer1.setSize(r,n),this.separableBlurMaterial1.uniforms.texSize.value=new g.Vector2(r,n),r=Math.round(r/2),n=Math.round(n/2),this.renderTargetBlurBuffer2.setSize(r,n),this.renderTargetEdgeBuffer2.setSize(r,n),this.separableBlurMaterial2.uniforms.texSize.value=new g.Vector2(r,n)},updateTextureMatrix:function(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.camera.projectionMatrix),this.textureMatrix.multiply(this.camera.matrixWorldInverse)},render:function(e,t,r,n,i){if(0!==this.selectedObjects.length){var a=this,o=function(e){for(var t=0;t<a.selectedObjects.length;t++){var r=a.selectedObjects[t];if(e.uuid===r.uuid)return!0}return!1},s=function(e){for(var t=0;t<a.selectedObjects.length;t++){var r=a.selectedObjects[t];if(e.uuid===r.uuid)return!1}return!0};this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var u=e.autoClear;if(e.autoClear=!1,i&&e.context.disable(e.context.STENCIL_TEST),e.setClearColor(16777215,1),this.renderScene.overrideMaterial=this.depthMaterial,e.render(this.renderScene,this.camera,this.renderTargetDepthBuffer,!0,s),this.updateTextureMatrix(),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value=new g.Vector2(this.camera.near,this.camera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.render(this.renderScene,this.camera,this.renderTargetMaskBuffer,!0,o),this.renderScene.overrideMaterial=null,this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.render(this.scene,this.orthoCamera,this.renderTargetMaskDownSampleBuffer,!0),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){var l=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.quad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value=new g.Vector2(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.render(this.scene,this.orthoCamera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=g.OutlinePass.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.render(this.scene,this.orthoCamera,this.renderTargetBlurBuffer1,!0),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=g.OutlinePass.BlurDirectionY,e.render(this.scene,this.orthoCamera,this.renderTargetEdgeBuffer1,!0),this.quad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=g.OutlinePass.BlurDirectionX,e.render(this.scene,this.orthoCamera,this.renderTargetBlurBuffer2,!0),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=g.OutlinePass.BlurDirectionY,e.render(this.scene,this.orthoCamera,this.renderTargetEdgeBuffer2,!0),this.quad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,i&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.orthoCamera,r,!1),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=u}},getPrepareMaskMaterial:function(){return new g.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new g.Vector2(.5,.5)},textureMatrix:{value:new g.Matrix4}},vertexShader:"varying vec2 vUv;\t\t\t\tvarying vec4 projTexCoord;\t\t\t\tvarying vec4 vPosition;\t\t\t\tuniform mat4 textureMatrix;\t\t\t\tvoid main() {\t\t\t\t\tvUv = uv;\t\t\t\t\tvPosition = modelViewMatrix * vec4( position, 1.0 );\t\t\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <packing>\t\t\t\tvarying vec2 vUv;\t\t\t\tvarying vec4 vPosition;\t\t\t\tvarying vec4 projTexCoord;\t\t\t\tuniform sampler2D depthTexture;\t\t\t\tuniform vec2 cameraNearFar;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\t\t\t\t\tfloat viewZ = -perspectiveDepthToViewZ( depth, cameraNearFar.x, cameraNearFar.y );\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\t\t\t\t}"})},getEdgeDetectionMaterial:function(){return new g.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new g.Vector2(.5,.5)},visibleEdgeColor:{value:new g.Vector3(1,1,1)},hiddenEdgeColor:{value:new g.Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec3 visibleEdgeColor;\t\t\t\tuniform vec3 hiddenEdgeColor;\t\t\t\t\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\t\t\t\t}"})},getSeperableBlurMaterial:function(e){return new g.ShaderMaterial({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new g.Vector2(.5,.5)},direction:{value:new g.Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\t\t\t\tuniform sampler2D colorTexture;\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\tuniform float kernelRadius;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, kernelRadius);\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv)* weightSum;\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\t\t\t\t\tvec2 uvOffset = delta;\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\t\t\t\t\t\tfloat w = gaussianPdf(uvOffset.x, kernelRadius);\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\t\t\t\t\t\tweightSum += (2.0 * w);\t\t\t\t\t\tuvOffset += delta;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\t\t\t\t}"})},getOverlayMaterial:function(){return new g.ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D maskTexture;\t\t\t\tuniform sampler2D edgeTexture1;\t\t\t\tuniform sampler2D edgeTexture2;\t\t\t\tuniform sampler2D patternTexture;\t\t\t\tuniform float edgeStrength;\t\t\t\tuniform float edgeGlow;\t\t\t\tuniform bool usePatternTexture;\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\t\t\t\t\tif(usePatternTexture)\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\t\t\t\t\tgl_FragColor = finalColor;\t\t\t\t}",depthTest:!1,depthWrite:!1,transparent:!0})}}),g.OutlinePass.BlurDirectionX=new g.Vector2(1,0),g.OutlinePass.BlurDirectionY=new g.Vector2(0,1),g.VREffect=function(e,t){function r(e){l=e,e.length>0?s=e[0]:t&&t("HMD not available")}function n(){var t=m.isPresenting;if(m.isPresenting=void 0!==s&&s.isPresenting,m.isPresenting){var r=s.getEyeParameters("left"),n=r.renderWidth,i=r.renderHeight;t||(M=e.getPixelRatio(),v=e.getSize(),e.setPixelRatio(1),e.setSize(2*n,i,!1))}else t&&(e.setPixelRatio(M),e.setSize(v.width,v.height,y))}function i(e){var t=2/(e.leftTan+e.rightTan),r=(e.leftTan-e.rightTan)*t*.5,n=2/(e.upTan+e.downTan);return{scale:[t,n],offset:[r,(e.upTan-e.downTan)*n*.5]}}function a(e,t,r,n){t=void 0===t||t,r=void 0===r?.01:r,n=void 0===n?1e4:n;var a=t?-1:1,o=new g.Matrix4,s=o.elements,u=i(e);return s[0]=u.scale[0],s[1]=0,s[2]=u.offset[0]*a,s[3]=0,s[4]=0,s[5]=u.scale[1],s[6]=-u.offset[1]*a,s[7]=0,s[8]=0,s[9]=0,s[10]=n/(r-n)*-a,s[11]=n*r/(r-n),s[12]=0,s[13]=0,s[14]=a,s[15]=0,o.transpose(),o}function o(e,t,r,n){var i=Math.PI/180;return a({upTan:Math.tan(e.upDegrees*i),downTan:Math.tan(e.downDegrees*i),leftTan:Math.tan(e.leftDegrees*i),rightTan:Math.tan(e.rightDegrees*i)},t,r,n)}var s,l,c,f,d=new g.Vector3,h=new g.Vector3,p=null;"VRFrameData"in window&&(p=new window.VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(r).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1,this.scale=1;var m=this,v=e.getSize(),y=!1,M=e.getPixelRatio();this.getVRDisplay=function(){return s},this.setVRDisplay=function(e){s=e},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),l},this.setSize=function(t,r,n){if(v={width:t,height:r},y=n,m.isPresenting){var i=s.getEyeParameters("left");e.setPixelRatio(1),e.setSize(2*i.renderWidth,i.renderHeight,!1)}else e.setPixelRatio(M),e.setSize(t,r,n)};var w=e.domElement,x=[0,0,.5,1],b=[.5,0,.5,1];window.addEventListener("vrdisplaypresentchange",n,!1),this.setFullScreen=function(e){return new u.default(function(t,r){return void 0===s?void r(new Error("No VR hardware found.")):m.isPresenting===e?void t():void t(e?s.requestPresent([{source:w}]):s.exitPresent())})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(e){return void 0!==s?s.requestAnimationFrame(e):window.requestAnimationFrame(e)},this.cancelAnimationFrame=function(e){void 0!==s?s.cancelAnimationFrame(e):window.cancelAnimationFrame(e)},this.submitFrame=function(){void 0!==s&&m.isPresenting&&s.submitFrame()},this.autoSubmitFrame=!0;var T=new g.PerspectiveCamera;T.layers.enable(1);var S=new g.PerspectiveCamera;S.layers.enable(2),this.getCameraL=function(){return T},this.getCameraR=function(){return S},this.render=function(t,r,n,i){if(s&&m.isPresenting){var a=t.autoUpdate;a&&(t.updateMatrixWorld(),t.autoUpdate=!1);var u=s.getEyeParameters("left"),l=s.getEyeParameters("right");d.fromArray(u.offset),h.fromArray(l.offset),Array.isArray(t)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),t=t[0]);var g,v,y=e.getSize(),M=s.getLayers();if(M.length){var w=M[0];g=null!==w.leftBounds&&4===w.leftBounds.length?w.leftBounds:x,v=null!==w.rightBounds&&4===w.rightBounds.length?w.rightBounds:b}else g=x,v=b;c={x:Math.round(y.width*g[0]),y:Math.round(y.height*g[1]),width:Math.round(y.width*g[2]),height:Math.round(y.height*g[3])},f={x:Math.round(y.width*v[0]),y:Math.round(y.height*v[1]),width:Math.round(y.width*v[2]),height:Math.round(y.height*v[3])},n?(e.setRenderTarget(n),n.scissorTest=!0):(e.setRenderTarget(null),e.setScissorTest(!0)),(e.autoClear||i)&&e.clear(),null===r.parent&&r.updateMatrixWorld(),r.matrixWorld.decompose(T.position,T.quaternion,T.scale),r.matrixWorld.decompose(S.position,S.quaternion,S.scale);var _=this.scale;return T.translateOnAxis(d,_),S.translateOnAxis(h,_),s.getFrameData?(s.depthNear=r.near,s.depthFar=r.far,s.getFrameData(p),T.projectionMatrix.elements=p.leftProjectionMatrix,S.projectionMatrix.elements=p.rightProjectionMatrix):(T.projectionMatrix=o(u.fieldOfView,!0,r.near,r.far),S.projectionMatrix=o(l.fieldOfView,!0,r.near,r.far)),n?(n.viewport.set(c.x,c.y,c.width,c.height),n.scissor.set(c.x,c.y,c.width,c.height)):(e.setViewport(c.x,c.y,c.width,c.height),e.setScissor(c.x,c.y,c.width,c.height)),e.render(t,T,n,i),n?(n.viewport.set(f.x,f.y,f.width,f.height),n.scissor.set(f.x,f.y,f.width,f.height)):(e.setViewport(f.x,f.y,f.width,f.height),e.setScissor(f.x,f.y,f.width,f.height)),e.render(t,S,n,i),n?(n.viewport.set(0,0,y.width,y.height),n.scissor.set(0,0,y.width,y.height),n.scissorTest=!1,e.setRenderTarget(null)):(e.setViewport(0,0,y.width,y.height),e.setScissorTest(!1)),a&&(t.autoUpdate=!0),void(m.autoSubmitFrame&&m.submitFrame())}e.render(t,r,n,i)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",n,!1)}},g.VRControls=function(e,t){function r(e){i=e,e.length>0?n=e[0]:t&&t("VR input not available.")}var n,i,a=this,o=new g.Matrix4,s=null;"VRFrameData"in window&&(s=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(r).catch(function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return n},this.setVRDisplay=function(e){n=e},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),i},this.getStandingMatrix=function(){return o},this.update=function(){if(n){var t;n.getImmediatePose?t=n.getImmediatePose():n.getFrameData?(n.getFrameData(s),t=s.pose):n.getPose&&(t=n.getPose()),null!==t.orientation?e.quaternion.fromArray(t.orientation):e.quaternion.set(0,0,0,1),null!==t.position?e.position.fromArray(t.position):e.position.set(0,0,0),this.standing&&(n.stageParameters?(e.updateMatrix(),o.fromArray(n.stageParameters.sittingToStandingTransform),e.applyMatrix(o)):e.position.setY(e.position.y+this.userHeight)),e.position.multiplyScalar(a.scale)}},this.resetPose=function(){n&&n.resetPose()},this.resetSensor=function(){console.warn("THREE.VRControls: .resetSensor() is now .resetPose()."),this.resetPose()},this.zeroSensor=function(){console.warn("THREE.VRControls: .zeroSensor() is now .resetPose()."),this.resetPose()},this.dispose=function(){n=null}},g.VRController=function(e,t){function r(e){for(var r=navigator.getGamepads(),n=0,i=0;n<4;n++){var a=r[n];if(a&&a.id===e){if(i===t)return a;i++}}}g.Object3D.call(this);var n,i=this,a=[0,0],o=!1,s=!1,u=!1,l=!1;void 0===t&&(t=0),this.matrixAutoUpdate=!1,this.standingMatrix=new g.Matrix4,this.getGamepad=function(){return n},this.getButtonState=function(e){return"thumbpad"===e?o:"trigger"===e?s:"grips"===e?u:"menu"===e?l:void 0},this.update=function(){if(void 0!==(n=r(e))&&n.pose){var t=n.pose;null!==n.pose.position?i.position.fromArray(t.position):i.position.fromArray([0,1,0]),null!==n.pose.orientation?i.quaternion.fromArray(t.orientation):i.quaternion.set(0,0,0,1),i.matrix.compose(i.position,i.quaternion,i.scale),i.matrix.multiplyMatrices(i.standingMatrix,i.matrix),i.matrix.decompose(i.position,i.quaternion,i.scale),i.matrixWorldNeedsUpdate=!0,i.visible=!0}else i.visible=!1;if(n){if(!n.axes||a[0]===n.axes[0]&&a[1]===n.axes[1]||(a[0]=n.axes[0],a[1]=n.axes[1],i.dispatchEvent({type:"axischanged",axes:a})),n.buttons[0]&&o!==n.buttons[0].pressed){o=n.buttons[0].pressed;var c=new Event(o?"thumbpaddown":"thumbpadup");window.dispatchEvent(c)}if(n.buttons[1]&&s!==n.buttons[1].pressed){s=n.buttons[1].pressed;var c=new Event(s?"triggerdown":"triggerup");window.dispatchEvent(c)}if(n.buttons[2]&&u!==n.buttons[2].pressed){u=n.buttons[2].pressed;var c=new Event(u?"gripsdown":"gripsup");window.dispatchEvent(c)}if(n.buttons[3]&&l!==n.buttons[3].pressed){l=n.buttons[3].pressed;var c=new Event(l?"menudown":"menuup");window.dispatchEvent(c)}}}},g.VRController.prototype=(0,d.default)(g.Object3D.prototype),g.VRController.prototype.constructor=g.VRController,g.GeometricRefractionShader={defines:{NUM_BOUNCES:4},extensions:{derivatives:!0},side:g.DoubleSide,uniforms:g.UniformsUtils.merge([g.UniformsLib.common,{normalCubeMap:{value:null},bDebugBounces:{value:!1},rIndexDelta:{value:.03},envMapIntensity:{value:1},gemIOR:{value:1},absorption:{value:new g.Vector3(0,.8,.8)},boostFactor:{value:1},boostColor:{value:new g.Vector3(1,1,1)},spectrumSpread:{value:0},sphereSquish:{value:new g.Vector3(1,1,1)},boundingSphere:{value:new g.Vector4(0,0,0,1)}}]),vertexShader:["varying vec3 vPosition;","varying vec3 vNormal;","void main() {","vPosition = position;","vNormal = normal;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","#include <bsdfs>","#include <packing>","varying vec3 vPosition;","varying vec3 vNormal;","uniform float gemIOR;","uniform float boostFactor;","uniform vec3 boostColor;","uniform float spectrumSpread;","uniform vec3 absorption;","uniform vec3 sphereSquish;","uniform vec4 boundingSphere;","uniform samplerCube normalCubeMap;","uniform mat4 modelMatrix;","uniform mat4 modelMatrixInverse;","const float airIOR = 1.0;","#include <envmap_pars_fragment>","#include <cube_uv_reflection_fragment>","struct Ray3 { vec3 origin; vec3 direction; };","void setRay( out Ray3 resultRay, in vec3 origin, in vec3 direction ) {","resultRay.origin = origin;","resultRay.direction = normalize( direction );","}","vec3 rayIntersectSquishedSphere( in Ray3 ray ) {","vec3 squishedDirection = ray.direction / sphereSquish;","float A = dot( squishedDirection, squishedDirection );","float B = 2.0 * dot( ray.origin, squishedDirection );","float C = dot( ray.origin, ray.origin ) - 1.0;","float disc = pow2( B ) - 4.0 * A * C;","if( disc > 0.0 ) {","disc = sqrt( disc );","float t1 = ( -B + disc ) * 0.5 / A;","float t2 = ( -B - disc ) * 0.5 / A;","float t = ( t1 > t2 ) ? t1 : t2;","return vec3( ray.origin + ray.direction * t );","}","return vec3( 0.0 );","}","vec3 queryEnvMapLocal( vec3 localNormal ) {","vec3 worldNormal = transformDirection( localNormal, modelMatrix );","vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.y, flipEnvMap * worldNormal.z );","#ifdef ENVMAP_TYPE_CUBE","vec3 envColor = envMapIntensity * envMapTexelToLinear( textureCube( envMap, queryVec ) ).rgb;","#elif defined( ENVMAP_TYPE_CUBE_UV )","vec3 envColor = envMapIntensity * textureCubeUV(queryVec, localNormal, 0.0).rgb;","#endif","return envColor;","}","float fresnelReflectance( float n0, float n1, vec3 incident, vec3 refracted, vec3 normal ) {","float cosI = dot( incident, normal );","float cosT = dot( refracted, normal );","float Rs = pow2( ( n0 * cosI - n1 * cosT ) / ( abs( n0 * cosI + n1 * cosT ) + 0.000001 ) );","float Rp = pow2( ( n0 * cosT - n1 * cosI ) / ( abs( n0 * cosT + n1 * cosI ) + 0.000001 ) );","return 0.5 * ( Rs + Rp );","}","vec3 traceRay( Ray3 incidentRay, vec3 diamondNormal ) {","float reflectance;","vec3 result = vec3( 0.0 );","vec3 transmittance = vec3( 1.0 );","Ray3 refractedRay, reflectedRay;","setRay( refractedRay, incidentRay.origin, refract( incidentRay.direction, diamondNormal, airIOR/gemIOR ) );","setRay( reflectedRay, incidentRay.origin, reflect( incidentRay.direction, diamondNormal ) );","reflectance = fresnelReflectance( airIOR, gemIOR, incidentRay.direction, refractedRay.direction, diamondNormal );","result += queryEnvMapLocal( reflectedRay.direction ) * reflectance;","transmittance *= ( 1.0 - reflectance );","incidentRay = refractedRay;","for( int bounce = 0; bounce < NUM_BOUNCES; bounce ++ ) {","vec3 pointOnUnitSphere = rayIntersectSquishedSphere( incidentRay );","vec4 gemstoneNormal = textureCube( normalCubeMap, pointOnUnitSphere );","vec3 inwardDiamondNormal = - normalize( unpackRGBToNormal( gemstoneNormal.rgb ) );","vec3 pointOnGemStone = pointOnUnitSphere;// * gemstoneNormal.a;","float raySegmentLength = length( pointOnGemStone - incidentRay.origin );","transmittance *= exp( -raySegmentLength * absorption );","setRay( refractedRay, pointOnGemStone, refract( incidentRay.direction, inwardDiamondNormal, gemIOR/airIOR ) );","setRay( reflectedRay, pointOnGemStone, reflect( incidentRay.direction, inwardDiamondNormal ) );","reflectance = fresnelReflectance( gemIOR, airIOR, -incidentRay.direction, refractedRay.direction, inwardDiamondNormal );","if( reflectance >= 0.0 && reflectance < 0.99 ) {","vec3 refractedColor = vec3( 0 );","refractedColor.g = queryEnvMapLocal( refractedRay.direction ).g;","setRay( refractedRay, pointOnGemStone, refract( incidentRay.direction, inwardDiamondNormal, (gemIOR+spectrumSpread*0.075)/airIOR ) );","refractedColor.r = queryEnvMapLocal( refractedRay.direction ).r;","setRay( refractedRay, pointOnGemStone, refract( incidentRay.direction, inwardDiamondNormal, (gemIOR-spectrumSpread*0.05)/airIOR ) );","refractedColor.b = queryEnvMapLocal( refractedRay.direction ).b;","result += refractedColor * transmittance * ( 1.0 - reflectance ) * boostFactor * boostColor;","}","else {","reflectance = 1.0;","if( bounce == NUM_BOUNCES - 1 ) {","result += queryEnvMapLocal( incidentRay.direction )* transmittance * boostFactor * boostColor;","}","}","transmittance *= reflectance;","incidentRay = reflectedRay;","}","return result;","}","void main() {","vec3 localCameraPosition = transformPosition( cameraPosition, modelMatrixInverse );","vec3 localRayDirection = normalize( vPosition - localCameraPosition );","vec3 unitPosition = ( vPosition - boundingSphere.xyz ) / boundingSphere.w;","Ray3 incidentRay;","setRay( incidentRay, unitPosition, localRayDirection );","vec3 color = traceRay( incidentRay, vNormal );","gl_FragColor = vec4( toneMapping( color.rgb ), 1.0 );","}"].join("\n\n")},g.GeometricNormalCaptureShader={side:g.DoubleSide,vertexShader:["varying vec3 vNormal;","varying vec3 vPosition;","void main() {","vNormal = normal;","vec4 tempPosition = modelViewMatrix * vec4( position, 1.0 );","gl_Position = projectionMatrix * tempPosition;","vPosition = tempPosition.xyz;","}"].join("\n"),fragmentShader:["#include <packing>","varying vec3 vNormal;","varying vec3 vPosition;","void main() {","float offsetDistance = max( length( vPosition ), 0.0 );","gl_FragColor = vec4( packNormalToRGB( vNormal ), offsetDistance );","}"].join("\n")},g.NoiseShader={uniforms:{},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n"),fragmentShader:["#include <common>","varying vec2 vUv;","void main() {","gl_FragColor = vec4(rand(vUv), vec3(0.0));","}"].join("\n")};var m=(i={blending:g.NormalBlending,side:g.DoubleSide,premultipliedAlpha:!0},(0,o.default)(i,"side",g.DoubleSide),(0,o.default)(i,"depthTest",!1),(0,o.default)(i,"depthWrite",!1),(0,o.default)(i,"transparent",!0),(0,o.default)(i,"uniforms",{ModelViewMatrix:{type:"m4",value:(new g.Matrix4).identity()},sparkleTexture:{type:"t",value:null},screenTexture:{type:"t",value:null},noiseTexture:{type:"t",value:null},scale:{type:"f",value:1},intensity:{type:"f",value:1}}),(0,o.default)(i,"vertexShader","varying vec2 vUv;\n      varying vec2 sparkleCentreUV;\n      uniform mat4 ModelViewMatrix;\n      uniform float scale;\n      \n      void main() {\n          vUv = uv;\n          vec2 alignedPosition = position.xy * scale;\n          vec4 finalPosition = ModelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n          finalPosition.xy += alignedPosition;\n          finalPosition = projectionMatrix * finalPosition;\n          vec4 sparkleProjectedCentre = projectionMatrix * ModelViewMatrix * vec4(0.0,0.0,0.0,1.0);\n          sparkleCentreUV = (sparkleProjectedCentre.xy/sparkleProjectedCentre.w + 1.0)*0.5;\n          gl_Position = finalPosition;\n      }"),(0,o.default)(i,"fragmentShader","#include <common>\n     varying vec2 vUv;\n     varying vec2 sparkleCentreUV;\n     uniform sampler2D sparkleTexture;\n     uniform sampler2D screenTexture;\n     uniform sampler2D noiseTexture;\n     uniform float intensity;\n     \n     void main() {\n          vec4 screenColor = texture2D( screenTexture, sparkleCentreUV );\n          float screenIntensity = pow( average( screenColor.xyz ), 3.0 );\n          float noise = texture2D( noiseTexture, sparkleCentreUV ).r;\n          gl_FragColor = vec4( texture2D( sparkleTexture, vUv ).a * screenIntensity * noise * intensity );\n    }"),i);g.Sparkle=function(e){this.texture=e,this.geometry=new g.PlaneGeometry(1,1,0),this.material=new g.ShaderMaterial(m),this.material.uniforms=g.UniformsUtils.clone(m.uniforms),void 0!==this.texture&&(this.material.uniforms.sparkleTexture.value=e),this.mesh=new g.Mesh(this.geometry,this.material),this.rotationSpeedFactor=5},g.Sparkle.prototype={constructor:g.Sparkle,shallowCopy:function(){var e=new g.Sparkle(this.texture);return e.mesh.position.copy(this.mesh.position),e.mesh.quaternion.copy(this.mesh.quaternion),e.mesh.scale.copy(this.mesh.scale),e.material.uniforms.scale.value=this.material.uniforms.scale.value,e.material.uniforms.intensity.value=this.material.uniforms.intensity.value,e.material.uniforms.screenTexture.value=this.material.uniforms.screenTexture.value,e.material.uniforms.noiseTexture.value=this.material.uniforms.noiseTexture.value,e.material.uniforms.ModelViewMatrix.value.copy(this.material.uniforms.ModelViewMatrix.value),e.rotationSpeedFactor=this.rotationSpeedFactor,e},setScale:function(e){this.material.uniforms.scale.value=e},setIntensity:function(e){this.material.uniforms.intensity.value=e},alignWithCamera:function(e,t){this.mesh.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,t.matrixWorld),this.mesh.modelViewMatrix.multiplyMatrices(this.mesh.modelViewMatrix,this.mesh.matrix),this.material.uniforms.ModelViewMatrix.value.copy(this.mesh.modelViewMatrix)}},g.NormalCubeMapBaker=function(e,t,r){var n=new g.ShaderMaterial(g.GeometricNormalCaptureShader);n.blending=g.NoBlending;var i=t;i.computeBoundingSphere();var a=(new g.Matrix4).setPosition(i.boundingSphere.center.clone().negate()),o=1/i.boundingSphere.radius,s=(new g.Matrix4).makeScale(o,o,o),u=(new g.Matrix4).multiplyMatrices(s,a),l=new g.Vector3,c=new g.Quaternion,f=new g.Vector3;u.decompose(l,c,f);var d=new g.Mesh(i,n);d.position.copy(l),d.scale.copy(f);var h=new g.Scene;h.add(d);var p=e.extensions.get("OES_texture_float")&&e.extensions.get("OES_texture_float_linear"),m=new g.CubeCamera(.01,100,512);m.renderTarget.texture.generateMipmaps=!1,m.renderTarget.texture.magFilter=r?g.NearestFilter:g.LinearFilter,m.renderTarget.texture.minFilter=r?g.NearestFilter:g.LinearFilter,m.renderTarget.texture.format=g.RGBAFormat,m.renderTarget.texture.type=p&&!r?g.FloatType:g.UnsignedByteType,m.updateCubeMap(e,h),this.texture=m.renderTarget.texture},g.OITRenderPass=function(e,t,r,n,i,a){var o=r.extensions,s={};!o.get("OES_texture_half_float")?o.get("OES_texture_float")?s.type=g.FloatType:console.log("OIT Needs either Float or Half Float texture support, using general render"):s.type=g.HalfFloatType;!!o.get("WEBGL_depth_texture")||console.warn("OIT Needs support of Depth Texture"),this.scene=e,this.camera=t,this.renderOver=!1,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==a?a:0,this.clear=!1,this.clearDepth=!1,this.needsSwap=!1,this.opaqueRT=new g.WebGLRenderTarget(0,0,{type:g.UnsignedByteType}),this.accumulateRT=new g.WebGLRenderTarget(0,0,s),this.revealageRT=new g.WebGLRenderTarget(0,0,{type:g.UnsignedByteType}),this.depthTexture=new g.DepthTexture,this.opaqueRT.depthTexture=this.depthTexture,this.accumulateRT.depthTexture=this.depthTexture,this.revealageRT.depthTexture=this.depthTexture,this.mergeMaterial=new g.ShaderMaterial({uniforms:{accumulationTexture:{value:null},revealageTexture:{value:null},opaqueTexture:{value:null}},vertexShader:"varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }",fragmentShader:"varying vec2 vUv;    uniform sampler2D opaqueTexture;    uniform sampler2D accumulationTexture;    uniform sampler2D revealageTexture;    void main() {       vec4 accumulationColor = texture2D( accumulationTexture, vUv );      vec4 revealage = texture2D( revealageTexture, vUv );      vec4 opaqueColor = texture2D( opaqueTexture, vUv );      vec3 transparentColor = pow(vec3(accumulationColor.rgb / max(accumulationColor.a, 1e-5)), vec3(1.0));      vec3 finalColor = opaqueColor.rgb * revealage.r + (1.0 - revealage.r) * transparentColor;      gl_FragColor = vec4( finalColor, opaqueColor.a + accumulationColor.a);    }    "}),this.mergeMaterial.uniforms.accumulationTexture.value=this.accumulateRT.texture,this.mergeMaterial.uniforms.revealageTexture.value=this.revealageRT.texture,this.mergeMaterial.uniforms.opaqueTexture.value=this.opaqueRT.texture,this.copyMaterial=new g.ShaderMaterial(g.CopyShader),this.copyMaterial.uniforms=g.UniformsUtils.clone(this.copyMaterial.uniforms),void 0===g.CopyShader&&console.error("THREE.OITRenderPass relies on THREE.CopyShader"),this.blendFactorsMap=[],this.PASS_TYPE_ACCUM=0,this.PASS_TYPE_REVEALAGE=1,this.BlendStates=[],this.BlendStates[this.PASS_TYPE_ACCUM]={blending:g.NormalBlending,premultipliedAlpha:!1},this.BlendStates[this.PASS_TYPE_REVEALAGE]={blending:g.CustomBlending,blendEquation:g.AddEquation,blendSrc:g.ZeroFactor,blendDst:g.OneMinusSrcAlphaFactor,blendEquationAlpha:g.AddEquation,blendSrcAlpha:g.OneFactor,blendDstAlpha:g.OneFactor,premultipliedAlpha:!1}},g.OITRenderPass.prototype={constructor:g.OITRenderPass,setSize:function(e,t){this.opaqueRT.setSize(e,t),this.accumulateRT.setSize(e,t),this.revealageRT.setSize(e,t)},render:function(e,t,r,n,i){var a=e.autoClear;e.autoClear=!1;var o=e.autoClearDepth,s=e.autoCleraColor,u=function(e){return e.material.transparent},l=function(e){return!e.material.transparent};if(e.projectObject(this.scene,this.camera),0===e.transparentObjects.length)return e.autoClearColor=!1,e.render(this.scene,this.camera,r,!0,!1,!0),void(e.autoClearColor=s);this.copyMaterial.uniforms.tDiffuse.value=r.texture,e.renderPass(this.copyMaterial,this.opaqueRT),e.autoClearColor=!1,e.render(this.scene,this.camera,this.opaqueRT,!0,l),e.autoClearColor=s,e.autoClearDepth=!1,this.changeBlendState(e.transparentObjects,this.PASS_TYPE_ACCUM),e.oitMode=0,e.setClearColor(16777215,0),e.render(this.scene,this.camera,this.accumulateRT,!0,u),this.changeBlendState(e.transparentObjects,this.PASS_TYPE_REVEALAGE),e.oitMode=1,e.setClearColor(16777215,1),e.render(this.scene,this.camera,this.revealageRT,!0,u),this.restoreBlendState(e.transparentObjects),e.autoClearDepth=o,e.renderPass(this.mergeMaterial,r,!1),e.autoClear=a,e.oitMode=2},changeBlendState:function(e,t){if(void 0===t||t!==this.PASS_TYPE_ACCUM&&t!==this.PASS_TYPE_REVEALAGE)return void console.log("WebGLOrderIndependentTransparency::Invalid passType");this.blendFactorsMap=[];for(var r=this.BlendStates[t],n=0,i=e.length;n<i;n++){var a=e[n],o=a.material,s={blending:o.blending,blendEquation:o.blendEquation,blendSrc:o.blendSrc,blendDst:o.blendDst,blendEquationAlpha:o.blendEquationAlpha,blendSrcAlpha:o.blendSrcAlpha,blendDstAlpha:o.blendDstAlpha,premultipliedAlpha:o.premultipliedAlpha,needsUpdate:o.needsUpdate,depthWrite:o.depthWrite,depthTest:o.depthTest};this.blendFactorsMap[o.uuid]=s,o.blending=r.blending,o.blendEquation=r.blendEquation,o.blendSrc=r.blendSrc,o.blendDst=r.blendDst,o.blendEquationAlpha=r.blendEquationAlpha,o.blendSrcAlpha=r.blendSrcAlpha,o.blendDstAlpha=r.blendDstAlpha,o.premultipliedAlpha=r.premultipliedAlpha,o.depthWrite=!1,o.depthTest=!0,o.needsUpdate=!0}},restoreBlendState:function(e){for(var t=0,r=e.length;t<r;t++){var n=e[t],i=n.material,a=this.blendFactorsMap[i.uuid];i.blending=a.blending,i.blendEquation=a.blendEquation,i.blendSrc=a.blendSrc,i.blendDst=a.blendDst,i.blendEquationAlpha=a.blendEquationAlpha,i.blendSrcAlpha=a.blendSrcAlpha,i.blendDstAlpha=a.blendDstAlpha,i.premultipliedAlpha=a.premultipliedAlpha,i.needsUpdate=a.needsUpdate,i.depthWrite=a.depthWrite,i.depthTest=a.depthTest,i.needsUpdate=!0}},isSupport:function(e){var t=e.extensions,r=!!t.get("OES_texture_half_float");return t.get("WEBGL_depth_texture")?!!r||(!!t.get("OES_texture_float")||(console.log("OIT Needs either Float or Half Float texture support, using general render"),!1)):(console.warn("OIT Needs support of Depth Texture"),!1)}},g.IndexPass=function(e,t,r){g.Pass.call(this),this.camera=t,this.idType=r||"uuid",this.meshMatMap={},this.indexColorScene=e},g.IndexPass.prototype=(0,p.default)((0,d.default)(g.Pass.prototype),{constructor:g.IndexPass,switchMaterial:function(){if(this.indexColorScene){var e=this.idType,t=this;this.indexColorScene.traverse(function(r){if("Mesh"===r.type&&r[e])if(t.meshMatMap[r[e]])r.material=t.enabled?t.meshMatMap[r[e]].index:t.meshMatMap[r[e]].original;else{var n={};n.original=r.material;var i=r[e],a=i.slice(0,6);n.index=new g.MeshBasicMaterial({color:"#"+a,side:g.DoubleSide}),t.meshMatMap[i]=n}})}},render:function(e,t,r,n,i){this.indexColorScene&&(e.toneMapping=g.NoToneMapping,e.gammaInput=!1,e.gammaOutput=!1,e.setClearColor(16777215,0),e.autoClear=!0,this.switchMaterial(),this.renderToScreen?e.render(this.indexColorScene,this.camera):e.render(this.indexColorScene,this.camera,t,this.clear))}}),e.exports=g},function(e,t,r){var n=r(197)("wks"),i=r(78),a=r(13).Symbol,o="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e.getUint8(t)}function a(e,t){return e.getUint16(t,!1)}function o(e,t){return e.getInt16(t,!1)}function s(e,t){return e.getUint32(t,!1)}function u(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}function l(e,t){for(var r="",n=t;n<t+4;n+=1)r+=String.fromCharCode(e.getInt8(n));return r}function c(e,t,r){for(var n=0,i=0;i<r;i+=1)n<<=8,n+=e.getUint8(t+i);return n}function f(e,t,r){for(var n=[],i=t;i<r;i+=1)n.push(e.getUint8(i));return n}function d(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t}function h(e,t){this.data=e,this.offset=t,this.relativeOffset=0}Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var p=r(4),g=n(p),m=r(22),v=n(m),y={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};h.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},h.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},h.prototype.parseCard8=h.prototype.parseByte,h.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},h.prototype.parseCard16=h.prototype.parseUShort,h.prototype.parseSID=h.prototype.parseUShort,h.prototype.parseOffset16=h.prototype.parseUShort,h.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},h.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},h.prototype.parseULong=function(){var e=s(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},h.prototype.parseFixed=function(){var e=u(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},h.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,n="";this.relativeOffset+=e;for(var i=0;i<e;i++)n+=String.fromCharCode(t.getUint8(r+i));return n},h.prototype.parseTag=function(){return this.parseString(4)},h.prototype.parseLongDateTime=function(){var e=s(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},h.prototype.parseVersion=function(){var e=a(this.data,this.offset+this.relativeOffset),t=a(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e+t/4096/10},h.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=y[e]*t},h.prototype.parseOffset16List=h.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=r.getUint16(n),n+=2;return this.relativeOffset+=2*e,t},h.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=r.getInt16(n),n+=2;return this.relativeOffset+=2*e,t},h.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,i=0;i<e;i++)t[i]=r.getUint8(n++);return this.relativeOffset+=e,t},h.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=0;n<e;n++)r[n]=t.call(this);return r},h.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=(0,g.default)(t),i=0;i<e;i++){for(var a={},o=0;o<n.length;o++){var s=n[o],u=t[s];a[s]=u.call(this)}r[i]=a}return r},h.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=(0,g.default)(e),r={},n=0;n<t.length;n++){var i=t[n],a=e[i];r[i]=a.call(this)}return r},h.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new h(this.data,this.offset+t).parseStruct(e)},h.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,n=this.relativeOffset,i=new Array(r),a=0;a<r;a++){var o=t[a];if(0!==o)if(this.relativeOffset=o,e){for(var s=this.parseOffset16List(),u=new Array(s.length),l=0;l<s.length;l++)this.relativeOffset=o+s[l],u[l]=e.call(this);i[a]=u}else i[a]=this.parseUShortList();else i[a]=void 0}return this.relativeOffset=n,i},h.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2===t){for(var n=new Array(r),i=0;i<r;i++)n[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},h.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:h.uShort,end:h.uShort,classId:h.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},h.list=function(e,t){return function(){return this.parseList(e,t)}},h.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},h.pointer=function(e){return function(){return this.parsePointer(e)}},h.tag=h.prototype.parseTag,h.byte=h.prototype.parseByte,h.uShort=h.offset16=h.prototype.parseUShort,h.uShortList=h.prototype.parseUShortList,h.struct=h.prototype.parseStruct,h.coverage=h.prototype.parseCoverage,h.classDef=h.prototype.parseClassDef;var M={reserved:h.uShort,reqFeatureIndex:h.uShort,featureIndexes:h.uShortList};h.prototype.parseScriptList=function(){return this.parsePointer(h.recordList({tag:h.tag,script:h.pointer({defaultLangSys:h.pointer(M),langSysRecords:h.recordList({tag:h.tag,langSys:h.pointer(M)})})}))},h.prototype.parseFeatureList=function(){return this.parsePointer(h.recordList({tag:h.tag,feature:h.pointer({featureParams:h.offset16,lookupListIndexes:h.uShortList})}))},h.prototype.parseLookupList=function(e){return this.parsePointer(h.list(h.pointer(function(){var t=this.parseUShort();v.default.argument(1<=t&&t<=8,"GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),n=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(h.pointer(e[t])),markFilteringSet:n?this.parseUShort():void 0}})))},t.default={getByte:i,getCard8:i,getUShort:a,getCard16:a,getShort:o,getULong:s,getFixed:u,getTag:l,getOffset:c,getBytes:f,bytesToString:d,Parser:h},t.Parser=h},function(e,t,r){"use strict";function n(){this.byName={},this.namesByIndex=[]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,get length(){return this.namesByIndex.length},set:function(e,t){var r=this.byName;e in r==!1&&this.namesByIndex.push(e),r[e]=t}},n.Iterator=function(e){this.reset(e||null)},n.Iterator.prototype={constructor:n.Iterator,reset:function(e){return void 0!==e&&(this.container=e),this.name=null,this.index=-1,this.element=null,this},next:function(){var e=this.container;if(null===e)return!1;var t=e.namesByIndex,r=++this.index;return r>=t.length?(this.name=null,!1):(this.element=e.byName[this.name=t[r]],!0)},add:function(e,t){var r=this.namesByIndex;if(-1!==r.indexOf(e))throw Error("ObjectsByName: Name '"+e+"' not unique!");return r.push(e),this.byName[e]=t,this}},n.shallowClone=function(){var e=new n.Iterator;return function(t){var r=new n;if(!t)return r;var i=r.byName,a=r.namesByIndex;for(a.length=t.namesByIndex.length,e.reset(t);e.next();){var o=e.name;i[o]=e.element,a[e.index]=o}return e.reset(null),r}}()},function(e,t,r){"use strict";t.__esModule=!0;var n=r(129),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,r){return t in e?(0,i.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(e.get("phase")!==be.RENDERING)return e;var r=e.get("loadingFiles").size,n=e.get("loadedFiles").size,i=r+n,a=0===i?1:(1+n/i)/2;return a<1?(t("loading",a),e.set("progress",a)):(t("loading",1),e.set("progress",1))}function a(e){return{type:ye,payload:e}}function o(e){return{type:le.USE_SCENE,payload:e}}function s(e){return e.getIn(["sceneIO","id"])}function u(e,t,r){return function(n){var i=n.read(t);n.trackEvent("SceneGraph Loaded","Load Time",r),n.trackEvent("SceneGraph Loaded","File Size",t.length);var a=Math.round(t.length/r);n.trackEvent("SceneGraph Loaded","Download Rate",a),n.logPageView("/player/v2/"+e,r);var o=i.meta&&i.meta.get("owner");return o&&n.trackEvent("Scene Owner",o),n.dispatch({type:le.LOAD_SCENE,payload:i}).then(n.dispatch({type:le.INITIALIZE_SCENE,payload:{id:e,store:n}})).then(function(){return e})}}function l(e){return a("Error Loading Scene")}function c(){return{type:pe}}function f(){return{type:ge}}function d(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.waitForPublish,i=r.ignoreErrorMessage;return function(a){function o(e){e.readyState>1&&(clearTimeout(l),clearTimeout(c))}if(a.getIn(["sceneGraph",e]))return X.default.resolve(!0);if(r.threehub)return a.dispatch(g(e,r));var s=t,u=t?(0,se.fetchText)(t)(a):a.callApi({contentType:"text",types:["IGN","IGN",he],url:"https://clara.io/api/scenes/"+e+"/published?wait="+(n?"true":"false"),queryKey:"SCENE"+e,payload:e,onReadyStateChange:o,ignoreCache:!0,ignoreErrorMessage:i,responseURL:function(e){var t=e.split("/");s=t[t.length-1]}}),l=setTimeout(function(){a.error(new Error("Slow Load"),null,{sceneId:e})},Ee),c=setTimeout(function(){a.error(new Error("Load Failure"),null,{sceneId:e})},Ae);return a.dispatch(D(e)),a.dispatch({type:fe,payload:e}),u.then(function(t){return clearTimeout(l),clearTimeout(c),a.dispatch({type:de,payload:e}),a.dispatch(L(e)),a.dispatch({type:we,payload:{sceneId:e,fetchedHash:s}}),t})}}function h(e,t){return e.getIn(["sceneIO","fetchedHashes",t])}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new Date;return function(i){return i.getIn(["sceneGraph",e])?X.default.resolve(!0):i.dispatch(d(e,t,r)).then(function(t,r){return i.dispatch(u(e,t,new Date-n))})}}function g(e,t){return function(t){return t.callApi({types:[fe,de,he],url:_e+"/scene/"+e,payload:e}).then(function(r){t.dispatch(o(e));var n=r.HEAD,i=r.objects;return t.dispatch((0,ae.setContentStore)({objects:i,origin:{HEAD:n}})),t.dispatch((0,ae.checkout)(n))})}}function m(){return function(e){var t=R(e),r=s(e);return e.callApi({contentType:"text",url:"https://clara.io/api/scenes/"+r+"/published",method:"PUT",body:(0,Q.default)({content:t})})}}function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){return n.dispatch(p(e,t,r)).then(function(){return n.dispatch(o(e))})}}function y(e,t,r){t.subscribe("notify:"+r).watch(function(t){console.log("notify scene: ",r,t);var n=t.origin;n&&n.HEAD!==sceneGraph.refs.HEAD&&(console.log("sync to latest: ",n.HEAD,"from",sceneGraph.refs.HEAD),e.dispatch((0,ae.syncToLatest)()))})}function M(e){return function(t){t.get("sceneGraph");return console.log("fetch for editing",e),t.dispatch(v(e,null,{threehub:!0})).then(function(){var r=t.getSocketApi();r&&y(t,r,e)})}}function w(e){var t=e.getIn;e.dispatch;return t(["sceneIO","progress"])}function x(e,t){return!!e.getIn(["sceneIO","loadingFiles",t])}function b(e){return e.getIn(["sceneIO","phase"])>=be.PRELOADED&&0===e.getIn(["sceneIO","loadingFiles"]).size}function T(e){return e.getIn(["sceneIO","phase"])>=be.RENDERING&&0===e.getIn(["sceneIO","loadingFiles"]).size}function S(e){return e.getIn(["sceneIO","loaded"])}function _(e){return e.getIn(["sceneIO","phase"])>=be.RENDERED}function E(){return function(e){var t=function(){return e.dispatch({type:le.PRELOADED_SCENE,payload:{id:s(e),store:e}})},r=e.getIn(["sceneIO","preloadCommands"]);if(!r.size)return t();e.dispatch({type:me}),X.default.all(r.map(function(e){return X.default.resolve(e())}).toArray()).then(function(){t()}).catch(function(e){console.log("Caught plugin error: ",e.message),console.log("Caught plugin error, stack: ",e.stack),t()})}}function A(e){return{type:Me,payload:e}}function I(){return{type:ve}}function D(e){return{type:le.LOADING_FILE,payload:e}}function L(e){return{type:le.LOADED_FILE,payload:e}}function N(e){var t={};return e.forEach(function(e){t[e.type]=e.operators.map(function(e){var t=e.name;return[e.type||t,(0,ie.default)(["_id","primitive","name","type"],e),t]})}),t}function C(e,t){t.forEach(function(t){e.dispatch((0,se.addFile)((0,W.default)({id:t._id},(0,ie.default)(["_id","__v"],t))))})}function O(e){return function(t){Ie(t,e,null)(e),C(t,e.files),t.dispatch(k(e._id,(0,J.Map)({owner:e.owner})));var r=(0,oe.get)(t,{plug:"Timeline",property:"useBufferClips"});(0,re.default)(function(e,n){r||t.dispatch((0,ue.addClip)(e,n)),t.dispatch((0,ue.makeReducedClip)(e,n))},e.clips)}}function R(e){var t=(0,ae.getEvalSceneGraph)(e),r=s(e);return e.write({id:r,meta:F(e),nodes:(0,Q.default)(t.nodes),assets:(0,se.getActiveAssets)(e),clips:e.getIn(["animation","clips"]),bufferClips:e.getIn(["animation","bufferClips"])})}function P(e){return{scene:e.get("sceneGraph").toJS(),assets:(0,se.getActiveAssets)(e).toJS()}}function z(e){return e.getIn(["sceneIO","errors"]).size}function j(e){return e.getIn(["sceneIO","errors"])}function U(e){return e.getIn(["sceneIO","phase"])}function B(e,t){var r=t||function(){},n=0;return new X.default(function(t,i){e.getEvaluatedTranslator();!function i(){if(!b(e)){var a=e.getIn(["sceneIO","loadingFiles"]).size;return a!==n&&(r(a),n=a),setTimeout(i,100)}e.getEvaluatedTranslator(),r(0),t()}()})}function V(){return function(e){var t=e.getTranslator();return t&&t.reset(),(0,ce.clearCache)(),e.dispatch({type:le.CLEAR_SCENE})}}function k(e,t){return{type:xe,payload:{id:e,meta:t}}}function F(e,t){var r=t||s(e);return e.getIn(["sceneIO","meta",r])}Object.defineProperty(t,"__esModule",{value:!0}),t.SCENE_PHASES=void 0;var G,H=r(2),W=n(H),Y=r(47),Q=n(Y),q=r(39),X=n(q),Z=r(19),K=n(Z);t.reportError=a,t.useScene=o,t.getSceneId=s,t.loadScene=u,t.errorLoadingScene=l,t.markRenderingScene=c,t.markRenderedScene=f,t.prefetch=d,t.getFetchedHash=h,t.fetch=p,t.savePublished=m,t.fetchAndUse=v,t.fetchForEditing=M,t.loadingProgress=w,t.isAssetLoading=x,t.areAssetsLoaded=b,t.areAssetsPreloaded=T,t.isSceneLoaded=S,t.isSceneRendered=_,t.markPreloaded=E,t.preloadCommand=A,t.markLoaded=I,t.markLoadingFile=D,t.markLoadedFile=L,t.convertFromJSON=O,t.writeScene=R,t.exportJSON=P,t.numErrors=z,t.getErrors=j,t.getScenePhase=U,t.whenLoaded=B,t.clearScene=V;var J=r(32),$=r(46),ee=n($),te=r(106),re=n(te),ne=r(485),ie=n(ne),ae=r(10),oe=r(7),se=r(33),ue=r(67),le=r(58),ce=r(254),fe="LOADING_SCENEGRAPH",de="LOADED_SCENEGRAPH",he="ERROR_LOADING_SCENEGRAPH",pe="RENDERING_SCENE",ge="RENDERED_SCENE",me="PRELOADING_SCENE",ve="LOADED_SCENE",ye="SCENE_ERROR",Me="PRELOAD_COMMAND",we="SET_FETCHED_HASH",xe="SET_META",be=t.SCENE_PHASES={FAILED:-1,UNKNOWN:0,LOADING_SCENEGRAPH:1,LOADED_SCENEGRAPH:2,RENDERING:3,PRELOADING:4,PRELOADED:5,LOADED:6,RENDERED:7},Te=(0,J.Map)({id:null,errors:(0,J.List)(),phase:be.UNKNOWN,progress:0,loadingFiles:(0,J.Map)(),loadedFiles:(0,J.Map)(),loaded:!1,preloadCommands:(0,J.List)(),fetchedHashes:(0,J.Map)(),meta:(0,J.Map)(),fetchAssetsStart:null}),Se=(0,ee.default)(Te,(G={},(0,K.default)(G,le.USE_SCENE,function(e,t){return e.set("id",t).set("fetchAssetsStart",new Date)}),(0,K.default)(G,fe,function(e,t){return e.get("loaded")||e.get("id")&&e.get("id")!==t?e:e.set("phase",be.LOADING_SCENEGRAPH).set("progress",.25)}),(0,K.default)(G,de,function(e,t){return e.get("loaded")||e.get("id")&&e.get("id")!==t?e:e.set("phase",be.LOADED_SCENEGRAPH).set("progress",.5)}),(0,K.default)(G,he,function(e,t,r){var n=r.action,i=n.error,a=n.ignoreErrorMessage,o="Error Loading Scene: "+i.status+" "+i.statusText;return a?e:e.updateIn(["errors"],(0,J.List)(),function(e){return e.push(o)})}),(0,K.default)(G,pe,function(e,t,r){var n=r.createEvent;return i(e.set("phase",be.RENDERING),n)}),(0,K.default)(G,le.LOADING_FILE,function(e,t){return e.setIn(["loadingFiles",t],!0)}),(0,K.default)(G,le.LOADED_FILE,function(e,t,r){var n=r.createEvent;return i(e.deleteIn(["loadingFiles",t]).setIn(["loadedFiles",t],!0),n)}),(0,K.default)(G,le.LOADING_FILE_ERROR,function(e,t,r){var n=r.createEvent;return i(e.deleteIn(["loadingFiles",t]),n)}),(0,K.default)(G,me,function(e,t,r){return(0,r.createEvent)("preloading"),e.set("phase",be.PRELOADING)}),(0,K.default)(G,le.PRELOADED_SCENE,function(e,t,r){return(0,r.createEvent)("preloaded"),e.set("phase",be.PRELOADED)}),(0,K.default)(G,Me,function(e,t){return e.updateIn(["preloadCommands"],(0,J.List)(),function(e){return e.push(t)})}),(0,K.default)(G,ve,function(e,t,r){var n=r.createEvent,i=r.trackEvent;n("loaded");var a=e.get("loadedFiles"),o=e.get("fetchAssetsStart");return i("Assets Loaded","Number of loaded assets",a.size),i("Assets Loaded","Assets loaded time",new Date-o),e.set("loaded",!0).set("phase",be.LOADED)}),(0,K.default)(G,ge,function(e,t,r){return(0,r.createEvent)("rendered"),e.set("phase",be.RENDERED)}),(0,K.default)(G,ye,function(e,t){return e.updateIn(["errors"],(0,J.List)(),function(e){return e.push(t)})}),(0,K.default)(G,le.CLEAR_SCENE,function(e){return Te}),(0,K.default)(G,we,function(e,t){var r=t.sceneId,n=t.fetchedHash;return e.setIn(["fetchedHashes",r],n)}),(0,K.default)(G,xe,function(e,t){var r=t.id,n=t.meta;return e.setIn(["meta",r],n)}),(0,K.default)(G,le.LOAD_SCENE,function(e,t){var r=t.id,n=t.meta;return r&&n?e.setIn(["meta",r],n):e}),G)),_e="/api/v2",Ee=1e4,Ae=3e4,Ie=function e(t,r,n){return function(i){var a=i._id,o=i.name,s=i.type,u=N(i.plugs);t.dispatch((0,ae.addNode)({id:a,name:o,type:s,plugs:u,parent:n})),i.nodes.forEach(e(t,r,a))}},De={reducer:Se,actions:{fetch:p,fetchAndUse:v,loadScene:u,useScene:o,reportError:a,prefetch:d,preloadCommand:A,savePublished:m,clearScene:V},selectors:{getFetchedHash:h,isSceneLoaded:S,isSceneRendered:_,loadingProgress:w,getErrors:j,numErrors:z,getSceneId:s,writeScene:R,whenLoaded:B}};t.default=De},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){"use strict";function n(e){throw new Error(e)}function i(e,t){e||n(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.fail=n,t.argument=i,t.assert=i,t.default={fail:n,argument:i,assert:i}},function(e,t){var r=window.Util||{};r.MIN_TIMESTEP=.001,r.MAX_TIMESTEP=1,r.base64=function(e,t){return"data:"+e+";base64,"+t},r.clamp=function(e,t,r){return Math.min(Math.max(t,e),r)},r.lerp=function(e,t,r){return e+(t-e)*r},r.race=function(e){return Promise.race?Promise.race(e):new Promise(function(t,r){for(var n=0;n<e.length;n++)e[n].then(t,r)})},r.isIOS=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),r.isWebViewAndroid=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),r.isSafari=function(){var e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return e}}(),r.isFirefoxAndroid=function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}(),r.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},r.isTimestampDeltaValid=function(e){return!isNaN(e)&&(!(e<=r.MIN_TIMESTEP)&&!(e>r.MAX_TIMESTEP))},r.getScreenWidth=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},r.getScreenHeight=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},r.requestFullscreen=function(e){if(r.isWebViewAndroid())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},r.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},r.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},r.linkProgram=function(e,t,r,n){var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,r),e.compileShader(a);var o=e.createProgram();e.attachShader(o,i),e.attachShader(o,a);for(var s in n)e.bindAttribLocation(o,n[s],s);return e.linkProgram(o),e.deleteShader(i),e.deleteShader(a),o},r.getProgramUniforms=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i="",a=0;a<n;a++){i=e.getActiveUniform(t,a).name.replace("[0]",""),r[i]=e.getUniformLocation(t,i)}return r},r.orthoMatrix=function(e,t,r,n,i,a,o){var s=1/(t-r),u=1/(n-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*u,e[14]=(o+a)*l,e[15]=1,e},r.copyArray=function(e,t){for(var r=0,n=e.length;r<n;r++)t[r]=e[r]},r.isMobile=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},r.extend=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},r.safariCssSizeWorkaround=function(e){if(r.isIOS()){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(n)+"px",setTimeout(function(){e.style.width=t,e.style.height=n},100)}window.Util=r,window.canvas=e},r.isDebug=function(){return r.getQueryParameter("debug")},r.getQueryParameter=function(e){var e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+e+"=([^&#]*)"),r=t.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},r.frameDataFromPose=function(){function e(e,t,r,n){var i=Math.tan(t?t.upDegrees*a:o),s=Math.tan(t?t.downDegrees*a:o),u=Math.tan(t?t.leftDegrees*a:o),l=Math.tan(t?t.rightDegrees*a:o),c=2/(u+l),f=2/(i+s);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=f,e[6]=0,e[7]=0,e[8]=-(u-l)*c*.5,e[9]=(i-s)*f*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function t(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=n+n,u=i+i,l=a+a,c=n*s,f=n*u,d=n*l,h=i*u,p=i*l,g=a*l,m=o*s,v=o*u,y=o*l;return e[0]=1-(h+g),e[1]=f+y,e[2]=d-v,e[3]=0,e[4]=f-y,e[5]=1-(c+g),e[6]=p+m,e[7]=0,e[8]=d+v,e[9]=p-m,e[10]=1-(c+h),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function r(e,t,r){var n,i,a,o,s,u,l,c,f,d,h,p,g=r[0],m=r[1],v=r[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*v+t[12],e[13]=t[1]*g+t[5]*m+t[9]*v+t[13],e[14]=t[2]*g+t[6]*m+t[10]*v+t[14],e[15]=t[3]*g+t[7]*m+t[11]*v+t[15]):(n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],f=t[8],d=t[9],h=t[10],p=t[11],e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=f,e[9]=d,e[10]=h,e[11]=p,e[12]=n*g+s*m+f*v+t[12],e[13]=i*g+u*m+d*v+t[13],e[14]=a*g+l*m+h*v+t[14],e[15]=o*g+c*m+p*v+t[15]),e}function n(e,t){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],f=t[9],d=t[10],h=t[11],p=t[12],g=t[13],m=t[14],v=t[15],y=r*s-n*o,M=r*u-i*o,w=r*l-a*o,x=n*u-i*s,b=n*l-a*s,T=i*l-a*u,S=c*g-f*p,_=c*m-d*p,E=c*v-h*p,A=f*m-d*g,I=f*v-h*g,D=d*v-h*m,L=y*D-M*I+w*A+x*E-b*_+T*S;return L?(L=1/L,e[0]=(s*D-u*I+l*A)*L,e[1]=(i*I-n*D-a*A)*L,e[2]=(g*T-m*b+v*x)*L,e[3]=(d*b-f*T-h*x)*L,e[4]=(u*E-o*D-l*_)*L,e[5]=(r*D-i*E+a*_)*L,e[6]=(m*w-p*T-v*M)*L,e[7]=(c*T-d*w+h*M)*L,e[8]=(o*I-s*E+l*S)*L,e[9]=(n*E-r*I-a*S)*L,e[10]=(p*b-g*w+v*y)*L,e[11]=(f*w-c*b-h*y)*L,e[12]=(s*_-o*A-u*S)*L,e[13]=(r*A-n*_+i*S)*L,e[14]=(g*M-p*x-m*y)*L,e[15]=(c*x-f*M+d*y)*L,e):null}function i(i,a,o,l,c){e(i,l?l.fieldOfView:null,c.depthNear,c.depthFar),t(a,o.orientation||s,o.position||u),l&&r(a,a,l.offset),n(a,a)}var a=Math.PI/180,o=.25*Math.PI,s=new Float32Array([0,0,0,1]),u=new Float32Array([0,0,0]);return function(e,t,r){return!(!e||!t)&&(e.pose=t,e.timestamp=t.timestamp,i(e.leftProjectionMatrix,e.leftViewMatrix,t,r.getEyeParameters("left"),r),i(e.rightProjectionMatrix,e.rightViewMatrix,t,r.getEyeParameters("right"),r),!0)}}(),r.isInsideCrossDomainIFrame=function(){var e=window.self!==window.top,t=r.getDomainFromUrl(document.referrer),n=r.getDomainFromUrl(window.location.href);return e&&t!==n},r.getDomainFromUrl=function(e){var t;return t=e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0],t=t.split(":")[0]},e.exports=r},function(e,t,r){e.exports={default:r(509),__esModule:!0}},function(e,t,r){var n=r(177)("wks"),i=r(137),a=r(29).Symbol,o="function"==typeof a;(e.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=n},function(e,t,r){var n=r(12),i=r(285),a=r(119),o=Object.defineProperty;t.f=r(35)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){for(var n=0;n<t.length;n+=1){var i=t[n];this[i.name]=i.value}if(this.tableName=e,this.fields=t,r)for(var a=(0,g.default)(r),o=0;o<a.length;o+=1){var s=a[o],u=r[s];void 0!==this[s]&&(this[s]=u)}}function a(e,t,r){void 0===r&&(r=t.length);var n=new Array(t.length+1);n[0]={name:e+"Count",type:"USHORT",value:r};for(var i=0;i<t.length;i++)n[i+1]={name:e+i,type:"USHORT",value:t[i]};return n}function o(e,t,r){var n=t.length,i=new Array(n+1);i[0]={name:e+"Count",type:"USHORT",value:n};for(var a=0;a<n;a++)i[a+1]={name:e+a,type:"TABLE",value:r(t[a],a)};return i}function s(e,t,r){var n=t.length,i=[];i[0]={name:e+"Count",type:"USHORT",value:n};for(var a=0;a<n;a++)i=i.concat(r(t[a],a));return i}function u(e){1===e.format?i.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(a("glyph",e.glyphs))):v.default.assert(!1,"Can't create coverage table format 2 yet.")}function l(e){i.call(this,"scriptListTable",s("scriptRecord",e,function(e,t){var r=e.script,n=r.defaultLangSys;return v.default.assert(!!n,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new i("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new i("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(a("featureIndex",n.featureIndexes)))}].concat(s("langSys",r.langSysRecords,function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new i("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(a("featureIndex",r.featureIndexes)))}]})))}]}))}function c(e){i.call(this,"featureListTable",s("featureRecord",e,function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new i("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(a("lookupListIndex",r.lookupListIndexes)))}]}))}function f(e,t){i.call(this,"lookupListTable",o("lookup",e,function(e){var r=t[e.lookupType];return v.default.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new i("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(o("subtable",e.subtables,r)))}))}Object.defineProperty(t,"__esModule",{value:!0});var d=r(48),h=n(d),p=r(4),g=n(p),m=r(22),v=n(m),y=r(151);i.prototype.encode=function(){return y.encode.TABLE(this)},i.prototype.sizeOf=function(){return y.sizeOf.TABLE(this)},u.prototype=(0,h.default)(i.prototype),u.prototype.constructor=u,l.prototype=(0,h.default)(i.prototype),l.prototype.constructor=l,c.prototype=(0,h.default)(i.prototype),c.prototype.constructor=c,f.prototype=(0,h.default)(i.prototype),f.prototype.constructor=f,t.default={Table:i,Record:i,Coverage:u,ScriptList:l,FeatureList:c,LookupList:f,ushortList:a,tableList:o,recordList:s}},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t,r){var n=r(76),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){c.default.call(this)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a),s=r(48),u=n(s);t.default=i;var l=r(18),c=n(l),f=r(0);i.prototype=(0,u.default)(c.default.prototype),i.prototype.constructor=i,(0,o.default)(i,{TypePosition:1,TypeNormal:2,TypeTangent:4,TypeUV:8,TypeColor:16,id:function(e,t){var r=i.TypeInfo[e].AnchorName;return null!=t?r+"."+t:r},checkId:function(e){var t=i.getAnchorName(e),r=i.getMapName(e,t);if(null===i.getTypeInfo(t)||""===r)throw Error("Invalid PolyMap ID '"+e+"'!");return e},getAnchorName:function(e){var t=e.indexOf(".");return-1===t?e:e.slice(0,t)},getMapName:function(e,t){return e===t?null:e.slice(t.length+1)},getTypeInfo:function(e){for(var t=i.TypeInfo,r=0,n=t.length;r!==n;++r){var a=t[r];if(null!==a&&a.AnchorName===e)return t[r]}return null},resolveMap:function(e,t){var r=i.getAnchorName(t);if(t===r)return e[r];var n=e[r];return n&&n.byName[t.slice(r.length+1)]},assignMap:function(e,t,r){var n=i.getAnchorName(t),a=i.getMapName(t,n);if(null===a)e[n]=r;else{var o=e[n];o||(o=new i,e[n]=o),o.set(a,r)}},Iterator:function(e){c.default.Iterator.call(this),this.reset(e||null)}}),i.TypeInfo=[null,{Type:i.TypePosition,AnchorName:"positions",ElementType:f.Vector3},{Type:i.TypeNormal,AnchorName:"normalMap",ElementType:f.Vector3},null,{Type:i.TypeTangent,AnchorName:"tangentMap",ElementType:f.Vector4},null,null,null,{Type:i.TypeUV,AnchorName:"uvMaps",ElementType:f.Vector2},null,null,null,null,null,null,null,{Type:i.TypeColor,AnchorName:"colorMaps",ElementType:f.Color}],(0,o.default)(i,{IdPositions:i.id(i.TypePosition),IdNormals:i.id(i.TypeNormal),IdTangents:i.id(i.TypeTangent)}),i.Iterator.prototype=(0,o.default)((0,u.default)(c.default.Iterator.prototype),{constructor:i.Iterator,_super:c.default.Iterator.prototype,reset:function(e){this._super.reset.call(this,null);var t=e||null;this.mesh=t,this.byName=t,this.typeId=0},getId:function(){return i.id(this.typeId,this.name)},next:function(){if(this._super.next.call(this))return!0;var e=this.mesh,t=this.typeId,r=null,n=null;switch(t<<=1){case 0:t=1;case i.TypePosition:r=e.positions;break;case i.TypeNormal:r=e.normalMap;break;case i.TypeTangent:r=e.tangentMap;break;case i.TypeUV:n=e.uvMaps;break;case i.TypeColor:n=e.colorMaps;break;default:return this.reset(null),!1}return this.typeId=t,null!==n&&void 0!==n?(this.byName=n.byName,this._super.reset.call(this,n).next()):null!==r&&void 0!==r?(this.element=r,this.index=t,this.name=null,!0):this.next()}})},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){"use strict";function e(e,t){t&&(e.prototype=Object.create(t.prototype)),e.prototype.constructor=e}function t(e){return a(e)?e:D(e)}function r(e){return o(e)?e:L(e)}function n(e){return s(e)?e:N(e)}function i(e){return a(e)&&!u(e)?e:C(e)}function a(e){return!(!e||!e[ur])}function o(e){return!(!e||!e[lr])}function s(e){return!(!e||!e[cr])}function u(e){return o(e)||s(e)}function l(e){return!(!e||!e[fr])}function c(e){return e.value=!1,e}function f(e){e&&(e.value=!0)}function d(){}function h(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),i=0;i<r;i++)n[i]=e[i+t];return n}function p(e){return void 0===e.size&&(e.size=e.__iterate(m)),e.size}function g(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return NaN;t=r}return t<0?p(e)+t:t}function m(){return!0}function v(e,t,r){return(0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function y(e,t){return w(e,t,0)}function M(e,t){return w(e,t,t)}function w(e,t,r){return void 0===e?r:e<0?Math.max(0,t+e):void 0===t?e:Math.min(t,e)}function x(e){this.next=e}function b(e,t,r,n){var i=0===e?t:1===e?r:[t,r];return n?n.value=i:n={value:i,done:!1},n}function T(){return{value:void 0,done:!0}}function S(e){return!!A(e)}function _(e){return e&&"function"==typeof e.next}function E(e){var t=A(e);return t&&t.call(e)}function A(e){var t=e&&(xr&&e[xr]||e[br]);if("function"==typeof t)return t}function I(e){return e&&"number"==typeof e.length}function D(e){return null===e||void 0===e?U():a(e)?e.toSeq():k(e)}function L(e){return null===e||void 0===e?U().toKeyedSeq():a(e)?o(e)?e.toSeq():e.fromEntrySeq():B(e)}function N(e){return null===e||void 0===e?U():a(e)?o(e)?e.entrySeq():e.toIndexedSeq():V(e)}function C(e){return(null===e||void 0===e?U():a(e)?o(e)?e.entrySeq():e:V(e)).toSetSeq()}function O(e){this._array=e,this.size=e.length}function R(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}function P(e){this._iterable=e,this.size=e.length||e.size}function z(e){this._iterator=e,this._iteratorCache=[]}function j(e){return!(!e||!e[Sr])}function U(){return _r||(_r=new O([]))}function B(e){var t=Array.isArray(e)?new O(e).fromEntrySeq():_(e)?new z(e).fromEntrySeq():S(e)?new P(e).fromEntrySeq():"object"==typeof e?new R(e):void 0;if(!t)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+e);return t}function V(e){var t=F(e);if(!t)throw new TypeError("Expected Array or iterable object of values: "+e);return t}function k(e){var t=F(e)||"object"==typeof e&&new R(e);if(!t)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+e);return t}function F(e){return I(e)?new O(e):_(e)?new z(e):S(e)?new P(e):void 0}function G(e,t,r,n){var i=e._cache;if(i){for(var a=i.length-1,o=0;o<=a;o++){var s=i[r?a-o:o];if(!1===t(s[1],n?s[0]:o,e))return o+1}return o}return e.__iterateUncached(t,r)}function H(e,t,r,n){var i=e._cache;if(i){var a=i.length-1,o=0;return new x(function(){var e=i[r?a-o:o];return o++>a?T():b(t,n?e[0]:o-1,e[1])})}return e.__iteratorUncached(t,r)}function W(e,t){return t?Y(t,e,"",{"":e}):Q(e)}function Y(e,t,r,n){return Array.isArray(t)?e.call(n,r,N(t).map(function(r,n){return Y(e,r,n,t)})):q(t)?e.call(n,r,L(t).map(function(r,n){return Y(e,r,n,t)})):t}function Q(e){return Array.isArray(e)?N(e).map(Q).toList():q(e)?L(e).map(Q).toMap():e}function q(e){return e&&(e.constructor===Object||void 0===e.constructor)}function X(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!("function"!=typeof e.equals||"function"!=typeof t.equals||!e.equals(t))}function Z(e,t){if(e===t)return!0;if(!a(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||o(e)!==o(t)||s(e)!==s(t)||l(e)!==l(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!u(e);if(l(e)){var n=e.entries();return t.every(function(e,t){var i=n.next().value;return i&&X(i[1],e)&&(r||X(i[0],t))})&&n.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var c=e;e=t,t=c}var f=!0,d=t.__iterate(function(t,n){if(r?!e.has(t):i?!X(t,e.get(n,gr)):!X(e.get(n,gr),t))return f=!1,!1});return f&&e.size===d}function K(e,t){if(!(this instanceof K))return new K(e,t);if(this._value=e,this.size=void 0===t?1/0:Math.max(0,t),0===this.size){if(Er)return Er;Er=this}}function J(e,t){if(!e)throw new Error(t)}function $(e,t,r){if(!(this instanceof $))return new $(e,t,r);if(J(0!==r,"Cannot step a Range by 0"),e=e||0,void 0===t&&(t=1/0),r=void 0===r?1:Math.abs(r),t<e&&(r=-r),this._start=e,this._end=t,this._step=r,this.size=Math.max(0,Math.ceil((t-e)/r-1)+1),0===this.size){if(Ar)return Ar;Ar=this}}function ee(){throw TypeError("Abstract")}function te(){}function re(){}function ne(){}function ie(e){return e>>>1&1073741824|3221225471&e}function ae(e){if(!1===e||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&(!1===(e=e.valueOf())||null===e||void 0===e))return 0;if(!0===e)return 1;var t=typeof e;if("number"===t){if(e!==e||e===1/0)return 0;var r=0|e;for(r!==e&&(r^=4294967295*e);e>4294967295;)e/=4294967295,r^=e;return ie(r)}if("string"===t)return e.length>Pr?oe(e):se(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return ue(e);if("function"==typeof e.toString)return se(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function oe(e){var t=Ur[e];return void 0===t&&(t=se(e),jr===zr&&(jr=0,Ur={}),jr++,Ur[e]=t),t}function se(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return ie(t)}function ue(e){var t;if(Cr&&void 0!==(t=Ir.get(e)))return t;if(void 0!==(t=e[Rr]))return t;if(!Nr){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[Rr]))return t;if(void 0!==(t=le(e)))return t}if(t=++Or,1073741824&Or&&(Or=0),Cr)Ir.set(e,t);else{if(void 0!==Lr&&!1===Lr(e))throw new Error("Non-extensible objects are not allowed as keys.");if(Nr)Object.defineProperty(e,Rr,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[Rr]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[Rr]=t}}return t}function le(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function ce(e){J(e!==1/0,"Cannot perform this action with an infinite size.")}function fe(e){return null===e||void 0===e?be():de(e)&&!l(e)?e:be().withMutations(function(t){var n=r(e);ce(n.size),n.forEach(function(e,r){return t.set(r,e)})})}function de(e){return!(!e||!e[Br])}function he(e,t){this.ownerID=e,this.entries=t}function pe(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r}function ge(e,t,r){this.ownerID=e,this.count=t,this.nodes=r}function me(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r}function ve(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r}function ye(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&we(e._root)}function Me(e,t){return b(e,t[0],t[1])}function we(e,t){return{node:e,index:0,__prev:t}}function xe(e,t,r,n){var i=Object.create(Vr);return i.size=e,i._root=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function be(){return kr||(kr=xe(0))}function Te(e,t,r){var n,i;if(e._root){var a=c(mr),o=c(vr);if(n=Se(e._root,e.__ownerID,0,void 0,t,r,a,o),!o.value)return e;i=e.size+(a.value?r===gr?-1:1:0)}else{if(r===gr)return e;i=1,n=new he(e.__ownerID,[[t,r]])}return e.__ownerID?(e.size=i,e._root=n,e.__hash=void 0,e.__altered=!0,e):n?xe(i,n):be()}function Se(e,t,r,n,i,a,o,s){return e?e.update(t,r,n,i,a,o,s):a===gr?e:(f(s),f(o),new ve(t,n,[i,a]))}function _e(e){return e.constructor===ve||e.constructor===me}function Ee(e,t,r,n,i){if(e.keyHash===n)return new me(t,n,[e.entry,i]);var a,o=(0===r?e.keyHash:e.keyHash>>>r)&pr,s=(0===r?n:n>>>r)&pr;return new pe(t,1<<o|1<<s,o===s?[Ee(e,t,r+dr,n,i)]:(a=new ve(t,n,i),o<s?[e,a]:[a,e]))}function Ae(e,t,r,n){e||(e=new d);for(var i=new ve(e,ae(r),[r,n]),a=0;a<t.length;a++){var o=t[a];i=i.update(e,0,void 0,o[0],o[1])}return i}function Ie(e,t,r,n){for(var i=0,a=0,o=new Array(r),s=0,u=1,l=t.length;s<l;s++,u<<=1){var c=t[s];void 0!==c&&s!==n&&(i|=u,o[a++]=c)}return new pe(e,i,o)}function De(e,t,r,n,i){for(var a=0,o=new Array(hr),s=0;0!==r;s++,r>>>=1)o[s]=1&r?t[a++]:void 0;return o[n]=i,new ge(e,a+1,o)}function Le(e,t,n){for(var i=[],o=0;o<n.length;o++){var s=n[o],u=r(s);a(s)||(u=u.map(function(e){return W(e)})),i.push(u)}return Oe(e,t,i)}function Ne(e,t,r){return e&&e.mergeDeep&&a(t)?e.mergeDeep(t):X(e,t)?e:t}function Ce(e){return function(t,r,n){if(t&&t.mergeDeepWith&&a(r))return t.mergeDeepWith(e,r);var i=e(t,r,n);return X(t,i)?t:i}}function Oe(e,t,r){return r=r.filter(function(e){return 0!==e.size}),0===r.length?e:0!==e.size||e.__ownerID||1!==r.length?e.withMutations(function(e){for(var n=t?function(r,n){e.update(n,gr,function(e){return e===gr?r:t(e,r,n)})}:function(t,r){e.set(r,t)},i=0;i<r.length;i++)r[i].forEach(n)}):e.constructor(r[0])}function Re(e,t,r,n){var i=e===gr,a=t.next();if(a.done){var o=i?r:e,s=n(o);return s===o?e:s}J(i||e&&e.set,"invalid keyPath");var u=a.value,l=i?gr:e.get(u,gr),c=Re(l,t,r,n);return c===l?e:c===gr?e.remove(u):(i?be():e).set(u,c)}function Pe(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function ze(e,t,r,n){var i=n?e:h(e);return i[t]=r,i}function je(e,t,r,n){var i=e.length+1;if(n&&t+1===i)return e[t]=r,e;for(var a=new Array(i),o=0,s=0;s<i;s++)s===t?(a[s]=r,o=-1):a[s]=e[s+o];return a}function Ue(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var i=new Array(n),a=0,o=0;o<n;o++)o===t&&(a=1),i[o]=e[o+a];return i}function Be(e){var t=He();if(null===e||void 0===e)return t;if(Ve(e))return e;var r=n(e),i=r.size;return 0===i?t:(ce(i),i>0&&i<hr?Ge(0,i,dr,null,new ke(r.toArray())):t.withMutations(function(e){e.setSize(i),r.forEach(function(t,r){return e.set(r,t)})}))}function Ve(e){return!(!e||!e[Wr])}function ke(e,t){this.array=e,this.ownerID=t}function Fe(e,t){function r(e,t,r){return 0===t?n(e,r):i(e,t,r)}function n(e,r){var n=r===s?u&&u.array:e&&e.array,i=r>a?0:a-r,l=o-r;return l>hr&&(l=hr),function(){if(i===l)return qr;var e=t?--l:i++;return n&&n[e]}}function i(e,n,i){var s,u=e&&e.array,l=i>a?0:a-i>>n,c=1+(o-i>>n);return c>hr&&(c=hr),function(){for(;;){if(s){var e=s();if(e!==qr)return e;s=null}if(l===c)return qr;var a=t?--c:l++;s=r(u&&u[a],n-dr,i+(a<<n))}}}var a=e._origin,o=e._capacity,s=Ke(o),u=e._tail;return r(e._root,e._level,0)}function Ge(e,t,r,n,i,a,o){var s=Object.create(Yr);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=i,s.__ownerID=a,s.__hash=o,s.__altered=!1,s}function He(){return Qr||(Qr=Ge(0,0,dr))}function We(e,t,r){if((t=g(e,t))!==t)return e;if(t>=e.size||t<0)return e.withMutations(function(e){t<0?Xe(e,t).set(0,r):Xe(e,0,t+1).set(t,r)});t+=e._origin;var n=e._tail,i=e._root,a=c(vr);return t>=Ke(e._capacity)?n=Ye(n,e.__ownerID,0,t,r,a):i=Ye(i,e.__ownerID,e._level,t,r,a),a.value?e.__ownerID?(e._root=i,e._tail=n,e.__hash=void 0,e.__altered=!0,e):Ge(e._origin,e._capacity,e._level,i,n):e}function Ye(e,t,r,n,i,a){var o=n>>>r&pr,s=e&&o<e.array.length;if(!s&&void 0===i)return e;var u;if(r>0){var l=e&&e.array[o],c=Ye(l,t,r-dr,n,i,a);return c===l?e:(u=Qe(e,t),u.array[o]=c,u)}return s&&e.array[o]===i?e:(f(a),u=Qe(e,t),void 0===i&&o===u.array.length-1?u.array.pop():u.array[o]=i,u)}function Qe(e,t){return t&&e&&t===e.ownerID?e:new ke(e?e.array.slice():[],t)}function qe(e,t){if(t>=Ke(e._capacity))return e._tail;if(t<1<<e._level+dr){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&pr],n-=dr;return r}}function Xe(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var n=e.__ownerID||new d,i=e._origin,a=e._capacity,o=i+t,s=void 0===r?a:r<0?a+r:i+r;if(o===i&&s===a)return e;if(o>=s)return e.clear();for(var u=e._level,l=e._root,c=0;o+c<0;)l=new ke(l&&l.array.length?[void 0,l]:[],n),u+=dr,c+=1<<u;c&&(o+=c,i+=c,s+=c,a+=c);for(var f=Ke(a),h=Ke(s);h>=1<<u+dr;)l=new ke(l&&l.array.length?[l]:[],n),u+=dr;var p=e._tail,g=h<f?qe(e,s-1):h>f?new ke([],n):p;if(p&&h>f&&o<a&&p.array.length){l=Qe(l,n);for(var m=l,v=u;v>dr;v-=dr){var y=f>>>v&pr;m=m.array[y]=Qe(m.array[y],n)}m.array[f>>>dr&pr]=p}if(s<a&&(g=g&&g.removeAfter(n,0,s)),o>=h)o-=h,s-=h,u=dr,l=null,g=g&&g.removeBefore(n,0,o);else if(o>i||h<f){for(c=0;l;){var M=o>>>u&pr;if(M!==h>>>u&pr)break;M&&(c+=(1<<u)*M),u-=dr,l=l.array[M]}l&&o>i&&(l=l.removeBefore(n,u,o-c)),l&&h<f&&(l=l.removeAfter(n,u,h-c)),c&&(o-=c,s-=c)}return e.__ownerID?(e.size=s-o,e._origin=o,e._capacity=s,e._level=u,e._root=l,e._tail=g,e.__hash=void 0,e.__altered=!0,e):Ge(o,s,u,l,g)}function Ze(e,t,r){for(var i=[],o=0,s=0;s<r.length;s++){var u=r[s],l=n(u);l.size>o&&(o=l.size),a(u)||(l=l.map(function(e){return W(e)})),i.push(l)}return o>e.size&&(e=e.setSize(o)),Oe(e,t,i)}function Ke(e){return e<hr?0:e-1>>>dr<<dr}function Je(e){return null===e||void 0===e?tt():$e(e)?e:tt().withMutations(function(t){var n=r(e);ce(n.size),n.forEach(function(e,r){return t.set(r,e)})})}function $e(e){return de(e)&&l(e)}function et(e,t,r,n){var i=Object.create(Je.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=r,i.__hash=n,i}function tt(){return Xr||(Xr=et(be(),He()))}function rt(e,t,r){var n,i,a=e._map,o=e._list,s=a.get(t),u=void 0!==s;if(r===gr){if(!u)return e;o.size>=hr&&o.size>=2*a.size?(i=o.filter(function(e,t){return void 0!==e&&s!==t}),n=i.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(n.__ownerID=i.__ownerID=e.__ownerID)):(n=a.remove(t),i=s===o.size-1?o.pop():o.set(s,void 0))}else if(u){if(r===o.get(s)[1])return e;n=a,i=o.set(s,[t,r])}else n=a.set(t,o.size),i=o.set(o.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=i,e.__hash=void 0,e):et(n,i)}function nt(e,t){this._iter=e,this._useKeys=t,this.size=e.size}function it(e){this._iter=e,this.size=e.size}function at(e){this._iter=e,this.size=e.size}function ot(e){this._iter=e,this.size=e.size}function st(e){var t=It(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=Dt,t.__iterateUncached=function(t,r){var n=this;return e.__iterate(function(e,r){return!1!==t(r,e,n)},r)},t.__iteratorUncached=function(t,r){if(t===wr){var n=e.__iterator(t,r);return new x(function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===Mr?yr:Mr,r)},t}function ut(e,t,r){var n=It(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,i){var a=e.get(n,gr);return a===gr?i:t.call(r,a,n,e)},n.__iterateUncached=function(n,i){var a=this;return e.__iterate(function(e,i,o){return!1!==n(t.call(r,e,i,o),i,a)},i)},n.__iteratorUncached=function(n,i){var a=e.__iterator(wr,i);return new x(function(){var i=a.next();if(i.done)return i;var o=i.value,s=o[0];return b(n,s,t.call(r,o[1],s,e),i)})},n}function lt(e,t){var r=It(e);return r._iter=e,r.size=e.size,r.reverse=function(){return e},e.flip&&(r.flip=function(){var t=st(e);return t.reverse=function(){return e.flip()},t}),r.get=function(r,n){return e.get(t?r:-1-r,n)},r.has=function(r){return e.has(t?r:-1-r)},r.includes=function(t){return e.includes(t)},r.cacheResult=Dt,r.__iterate=function(t,r){var n=this;return e.__iterate(function(e,r){return t(e,r,n)},!r)},r.__iterator=function(t,r){return e.__iterator(t,!r)},r}function ct(e,t,r,n){var i=It(e);return n&&(i.has=function(n){var i=e.get(n,gr);return i!==gr&&!!t.call(r,i,n,e)},i.get=function(n,i){var a=e.get(n,gr);return a!==gr&&t.call(r,a,n,e)?a:i}),i.__iterateUncached=function(i,a){var o=this,s=0;return e.__iterate(function(e,a,u){if(t.call(r,e,a,u))return s++,i(e,n?a:s-1,o)},a),s},i.__iteratorUncached=function(i,a){var o=e.__iterator(wr,a),s=0;return new x(function(){for(;;){var a=o.next();if(a.done)return a;var u=a.value,l=u[0],c=u[1];if(t.call(r,c,l,e))return b(i,n?l:s++,c,a)}})},i}function ft(e,t,r){var n=fe().asMutable();return e.__iterate(function(i,a){n.update(t.call(r,i,a,e),0,function(e){return e+1})}),n.asImmutable()}function dt(e,t,r){var n=o(e),i=(l(e)?Je():fe()).asMutable();e.__iterate(function(a,o){i.update(t.call(r,a,o,e),function(e){return e=e||[],e.push(n?[o,a]:a),e})});var a=At(e);return i.map(function(t){return St(e,a(t))})}function ht(e,t,r,n){var i=e.size;if(void 0!==t&&(t|=0),void 0!==r&&(r===1/0?r=i:r|=0),v(t,r,i))return e;var a=y(t,i),o=M(r,i);if(a!==a||o!==o)return ht(e.toSeq().cacheResult(),t,r,n);var s,u=o-a;u===u&&(s=u<0?0:u);var l=It(e);return l.size=0===s?s:e.size&&s||void 0,!n&&j(e)&&s>=0&&(l.get=function(t,r){return t=g(this,t),t>=0&&t<s?e.get(t+a,r):r}),l.__iterateUncached=function(t,r){var i=this;if(0===s)return 0;if(r)return this.cacheResult().__iterate(t,r);var o=0,u=!0,l=0;return e.__iterate(function(e,r){if(!u||!(u=o++<a))return l++,!1!==t(e,n?r:l-1,i)&&l!==s}),l},l.__iteratorUncached=function(t,r){if(0!==s&&r)return this.cacheResult().__iterator(t,r);var i=0!==s&&e.__iterator(t,r),o=0,u=0;return new x(function(){for(;o++<a;)i.next();if(++u>s)return T();var e=i.next();return n||t===Mr?e:t===yr?b(t,u-1,void 0,e):b(t,u-1,e.value[1],e)})},l}function pt(e,t,r){var n=It(e);return n.__iterateUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterate(n,i);var o=0;return e.__iterate(function(e,i,s){return t.call(r,e,i,s)&&++o&&n(e,i,a)}),o},n.__iteratorUncached=function(n,i){var a=this;if(i)return this.cacheResult().__iterator(n,i);var o=e.__iterator(wr,i),s=!0;return new x(function(){if(!s)return T();var e=o.next();if(e.done)return e;var i=e.value,u=i[0],l=i[1];return t.call(r,l,u,a)?n===wr?e:b(n,u,l,e):(s=!1,T())})},n}function gt(e,t,r,n){var i=It(e);return i.__iterateUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterate(i,a);var s=!0,u=0;return e.__iterate(function(e,a,l){if(!s||!(s=t.call(r,e,a,l)))return u++,i(e,n?a:u-1,o)}),u},i.__iteratorUncached=function(i,a){var o=this;if(a)return this.cacheResult().__iterator(i,a);var s=e.__iterator(wr,a),u=!0,l=0;return new x(function(){var e,a,c;do{if(e=s.next(),e.done)return n||i===Mr?e:i===yr?b(i,l++,void 0,e):b(i,l++,e.value[1],e);var f=e.value;a=f[0],c=f[1],u&&(u=t.call(r,c,a,o))}while(u);return i===wr?e:b(i,a,c,e)})},i}function mt(e,t){var n=o(e),i=[e].concat(t).map(function(e){return a(e)?n&&(e=r(e)):e=n?B(e):V(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===i.length)return e;if(1===i.length){var u=i[0];if(u===e||n&&o(u)||s(e)&&s(u))return u}var l=new O(i);return n?l=l.toKeyedSeq():s(e)||(l=l.toSetSeq()),l=l.flatten(!0),l.size=i.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}},0),l}function vt(e,t,r){var n=It(e);return n.__iterateUncached=function(n,i){function o(e,l){var c=this;e.__iterate(function(e,i){return(!t||l<t)&&a(e)?o(e,l+1):!1===n(e,r?i:s++,c)&&(u=!0),!u},i)}var s=0,u=!1;return o(e,0),s},n.__iteratorUncached=function(n,i){var o=e.__iterator(n,i),s=[],u=0;return new x(function(){for(;o;){var e=o.next();if(!1===e.done){var l=e.value;if(n===wr&&(l=l[1]),t&&!(s.length<t)||!a(l))return r?e:b(n,u++,l,e);s.push(o),o=l.__iterator(n,i)}else o=s.pop()}return T()})},n}function yt(e,t,r){var n=At(e);return e.toSeq().map(function(i,a){return n(t.call(r,i,a,e))}).flatten(!0)}function Mt(e,t){var r=It(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var i=this,a=0;return e.__iterate(function(e,n){return(!a||!1!==r(t,a++,i))&&!1!==r(e,a++,i)},n),a},r.__iteratorUncached=function(r,n){var i,a=e.__iterator(Mr,n),o=0;return new x(function(){return(!i||o%2)&&(i=a.next(),i.done)?i:o%2?b(r,o++,t):b(r,o++,i.value,i)})},r}function wt(e,t,r){t||(t=Lt);var n=o(e),i=0,a=e.toSeq().map(function(t,n){return[n,t,i++,r?r(t,n,e):t]}).toArray();return a.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2]}).forEach(n?function(e,t){a[t].length=2}:function(e,t){a[t]=e[1]}),n?L(a):s(e)?N(a):C(a)}function xt(e,t,r){if(t||(t=Lt),r){var n=e.toSeq().map(function(t,n){return[t,r(t,n,e)]}).reduce(function(e,r){return bt(t,e[1],r[1])?r:e});return n&&n[0]}return e.reduce(function(e,r){return bt(t,e,r)?r:e})}function bt(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(void 0===r||null===r||r!==r)||n>0}function Tt(e,r,n){var i=It(e);return i.size=new O(n).map(function(e){return e.size}).min(),i.__iterate=function(e,t){for(var r,n=this.__iterator(Mr,t),i=0;!(r=n.next()).done&&!1!==e(r.value,i++,this););return i},i.__iteratorUncached=function(e,i){var a=n.map(function(e){return e=t(e),E(i?e.reverse():e)}),o=0,s=!1;return new x(function(){var t;return s||(t=a.map(function(e){return e.next()}),s=t.some(function(e){return e.done})),s?T():b(e,o++,r.apply(null,t.map(function(e){return e.value})))})},i}function St(e,t){return j(e)?t:e.constructor(t)}function _t(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function Et(e){return ce(e.size),p(e)}function At(e){return o(e)?r:s(e)?n:i}function It(e){return Object.create((o(e)?L:s(e)?N:C).prototype)}function Dt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):D.prototype.cacheResult.call(this)}function Lt(e,t){return e>t?1:e<t?-1:0}function Nt(e){var r=E(e);if(!r){if(!I(e))throw new TypeError("Expected iterable or array-like: "+e);r=E(t(e))}return r}function Ct(e,t){var r,n=function(a){if(a instanceof n)return a;if(!(this instanceof n))return new n(a);if(!r){r=!0;var o=Object.keys(e);Pt(i,o),i.size=o.length,i._name=t,i._keys=o,i._defaultValues=e}this._map=fe(a)},i=n.prototype=Object.create(Zr);return i.constructor=n,n}function Ot(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._map=t,n.__ownerID=r,n}function Rt(e){return e._name||e.constructor.name||"Record"}function Pt(e,t){try{t.forEach(zt.bind(void 0,e))}catch(e){}}function zt(e,t){Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){J(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}function jt(e){return null===e||void 0===e?kt():Ut(e)&&!l(e)?e:kt().withMutations(function(t){var r=i(e);ce(r.size),r.forEach(function(e){return t.add(e)})})}function Ut(e){return!(!e||!e[Kr])}function Bt(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function Vt(e,t){var r=Object.create(Jr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function kt(){return $r||($r=Vt(be()))}function Ft(e){return null===e||void 0===e?Wt():Gt(e)?e:Wt().withMutations(function(t){var r=i(e);ce(r.size),r.forEach(function(e){return t.add(e)})})}function Gt(e){return Ut(e)&&l(e)}function Ht(e,t){var r=Object.create(en);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function Wt(){return tn||(tn=Ht(tt()))}function Yt(e){return null===e||void 0===e?Xt():Qt(e)?e:Xt().unshiftAll(e)}function Qt(e){return!(!e||!e[rn])}function qt(e,t,r,n){var i=Object.create(nn);return i.size=e,i._head=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function Xt(){return an||(an=qt(0))}function Zt(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}function Kt(e,t){return t}function Jt(e,t){return[t,e]}function $t(e){return function(){return!e.apply(this,arguments)}}function er(e){return function(){return-e.apply(this,arguments)}}function tr(e){return"string"==typeof e?JSON.stringify(e):String(e)}function rr(){return h(arguments)}function nr(e,t){return e<t?1:e>t?-1:0}function ir(e){if(e.size===1/0)return 0;var t=l(e),r=o(e),n=t?1:0;return ar(e.__iterate(r?t?function(e,t){n=31*n+or(ae(e),ae(t))|0}:function(e,t){n=n+or(ae(e),ae(t))|0}:t?function(e){n=31*n+ae(e)|0}:function(e){n=n+ae(e)|0}),n)}function ar(e,t){return t=Dr(t,3432918353),t=Dr(t<<15|t>>>-15,461845907),t=Dr(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=Dr(t^t>>>16,2246822507),t=Dr(t^t>>>13,3266489909),t=ie(t^t>>>16)}function or(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}var sr=Array.prototype.slice;e(r,t),e(n,t),e(i,t),t.isIterable=a,t.isKeyed=o,t.isIndexed=s,t.isAssociative=u,t.isOrdered=l,t.Keyed=r,t.Indexed=n,t.Set=i;var ur="@@__IMMUTABLE_ITERABLE__@@",lr="@@__IMMUTABLE_KEYED__@@",cr="@@__IMMUTABLE_INDEXED__@@",fr="@@__IMMUTABLE_ORDERED__@@",dr=5,hr=1<<dr,pr=hr-1,gr={},mr={value:!1},vr={value:!1},yr=0,Mr=1,wr=2,xr="function"==typeof Symbol&&Symbol.iterator,br="@@iterator",Tr=xr||br;x.prototype.toString=function(){return"[Iterator]"},x.KEYS=yr,x.VALUES=Mr,x.ENTRIES=wr,x.prototype.inspect=x.prototype.toSource=function(){return this.toString()},x.prototype[Tr]=function(){return this},e(D,t),D.of=function(){return D(arguments)},D.prototype.toSeq=function(){return this},D.prototype.toString=function(){return this.__toString("Seq {","}")},D.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},D.prototype.__iterate=function(e,t){return G(this,e,t,!0)},D.prototype.__iterator=function(e,t){return H(this,e,t,!0)},e(L,D),L.prototype.toKeyedSeq=function(){return this},e(N,D),N.of=function(){return N(arguments)},N.prototype.toIndexedSeq=function(){return this},N.prototype.toString=function(){return this.__toString("Seq [","]")},N.prototype.__iterate=function(e,t){return G(this,e,t,!1)},N.prototype.__iterator=function(e,t){return H(this,e,t,!1)},e(C,D),C.of=function(){return C(arguments)},C.prototype.toSetSeq=function(){return this},D.isSeq=j,D.Keyed=L,D.Set=C,D.Indexed=N;var Sr="@@__IMMUTABLE_SEQ__@@";D.prototype[Sr]=!0,e(O,N),O.prototype.get=function(e,t){return this.has(e)?this._array[g(this,e)]:t},O.prototype.__iterate=function(e,t){for(var r=this._array,n=r.length-1,i=0;i<=n;i++)if(!1===e(r[t?n-i:i],i,this))return i+1;return i},O.prototype.__iterator=function(e,t){var r=this._array,n=r.length-1,i=0;return new x(function(){return i>n?T():b(e,i,r[t?n-i++:i++])})},e(R,L),R.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},R.prototype.has=function(e){return this._object.hasOwnProperty(e)},R.prototype.__iterate=function(e,t){for(var r=this._object,n=this._keys,i=n.length-1,a=0;a<=i;a++){var o=n[t?i-a:a];if(!1===e(r[o],o,this))return a+1}return a},R.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,i=n.length-1,a=0;return new x(function(){var o=n[t?i-a:a];return a++>i?T():b(e,o,r[o])})},R.prototype[fr]=!0,e(P,N),P.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);var r=this._iterable,n=E(r),i=0;if(_(n))for(var a;!(a=n.next()).done&&!1!==e(a.value,i++,this););return i},P.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterable,n=E(r);if(!_(n))return new x(T);var i=0;return new x(function(){var t=n.next();return t.done?t:b(e,i++,t.value)})},e(z,N),z.prototype.__iterateUncached=function(e,t){if(t)return this.cacheResult().__iterate(e,t);for(var r=this._iterator,n=this._iteratorCache,i=0;i<n.length;)if(!1===e(n[i],i++,this))return i;for(var a;!(a=r.next()).done;){var o=a.value;if(n[i]=o,!1===e(o,i++,this))break}return i},z.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,i=0;return new x(function(){if(i>=n.length){var t=r.next();if(t.done)return t;n[i]=t.value}return b(e,i,n[i++])})};var _r;e(K,N),K.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},K.prototype.get=function(e,t){return this.has(e)?this._value:t},K.prototype.includes=function(e){return X(this._value,e)},K.prototype.slice=function(e,t){var r=this.size;return v(e,t,r)?this:new K(this._value,M(t,r)-y(e,r))},K.prototype.reverse=function(){return this},K.prototype.indexOf=function(e){return X(this._value,e)?0:-1},K.prototype.lastIndexOf=function(e){return X(this._value,e)?this.size:-1},K.prototype.__iterate=function(e,t){for(var r=0;r<this.size;r++)if(!1===e(this._value,r,this))return r+1;return r},K.prototype.__iterator=function(e,t){var r=this,n=0;return new x(function(){return n<r.size?b(e,n++,r._value):T()})},K.prototype.equals=function(e){return e instanceof K?X(this._value,e._value):Z(e)};var Er;e($,N),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},$.prototype.get=function(e,t){return this.has(e)?this._start+g(this,e)*this._step:t},$.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},$.prototype.slice=function(e,t){return v(e,t,this.size)?this:(e=y(e,this.size),t=M(t,this.size),t<=e?new $(0,0):new $(this.get(e,this._end),this.get(t,this._end),this._step))},$.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},$.prototype.lastIndexOf=function(e){return this.indexOf(e)},$.prototype.__iterate=function(e,t){for(var r=this.size-1,n=this._step,i=t?this._start+r*n:this._start,a=0;a<=r;a++){if(!1===e(i,a,this))return a+1;i+=t?-n:n}return a},$.prototype.__iterator=function(e,t){var r=this.size-1,n=this._step,i=t?this._start+r*n:this._start,a=0;return new x(function(){var o=i;return i+=t?-n:n,a>r?T():b(e,a++,o)})},$.prototype.equals=function(e){return e instanceof $?this._start===e._start&&this._end===e._end&&this._step===e._step:Z(this,e)};var Ar;e(ee,t),e(te,ee),e(re,ee),e(ne,ee),ee.Keyed=te,ee.Indexed=re,ee.Set=ne;var Ir,Dr="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(e,t){e|=0,t|=0;var r=65535&e,n=65535&t;return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0},Lr=Object.isExtensible,Nr=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),Cr="function"==typeof WeakMap;Cr&&(Ir=new WeakMap);var Or=0,Rr="__immutablehash__";"function"==typeof Symbol&&(Rr=Symbol(Rr));var Pr=16,zr=255,jr=0,Ur={};e(fe,te),fe.of=function(){var e=sr.call(arguments,0);return be().withMutations(function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}})},fe.prototype.toString=function(){return this.__toString("Map {","}")},fe.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},fe.prototype.set=function(e,t){return Te(this,e,t)},fe.prototype.setIn=function(e,t){return this.updateIn(e,gr,function(){return t})},fe.prototype.remove=function(e){return Te(this,e,gr)},fe.prototype.deleteIn=function(e){return this.updateIn(e,function(){return gr})},fe.prototype.update=function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},fe.prototype.updateIn=function(e,t,r){r||(r=t,t=void 0);var n=Re(this,Nt(e),t,r);return n===gr?void 0:n},fe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):be()},fe.prototype.merge=function(){return Le(this,void 0,arguments)},fe.prototype.mergeWith=function(e){return Le(this,e,sr.call(arguments,1))},fe.prototype.mergeIn=function(e){var t=sr.call(arguments,1);return this.updateIn(e,be(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},fe.prototype.mergeDeep=function(){return Le(this,Ne,arguments)},fe.prototype.mergeDeepWith=function(e){var t=sr.call(arguments,1);return Le(this,Ce(e),t)},fe.prototype.mergeDeepIn=function(e){var t=sr.call(arguments,1);return this.updateIn(e,be(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},fe.prototype.sort=function(e){return Je(wt(this,e))},fe.prototype.sortBy=function(e,t){return Je(wt(this,t,e))},fe.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},fe.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new d)},fe.prototype.asImmutable=function(){return this.__ensureOwner()},fe.prototype.wasAltered=function(){return this.__altered},fe.prototype.__iterator=function(e,t){return new ye(this,e,t)},fe.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},fe.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?xe(this.size,this._root,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},fe.isMap=de;var Br="@@__IMMUTABLE_MAP__@@",Vr=fe.prototype;Vr[Br]=!0,Vr.delete=Vr.remove,Vr.removeIn=Vr.deleteIn,he.prototype.get=function(e,t,r,n){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(X(r,i[a][0]))return i[a][1];return n},he.prototype.update=function(e,t,r,n,i,a,o){for(var s=i===gr,u=this.entries,l=0,c=u.length;l<c&&!X(n,u[l][0]);l++);var d=l<c;if(d?u[l][1]===i:s)return this;if(f(o),(s||!d)&&f(a),!s||1!==u.length){if(!d&&!s&&u.length>=Fr)return Ae(e,u,n,i);var p=e&&e===this.ownerID,g=p?u:h(u);return d?s?l===c-1?g.pop():g[l]=g.pop():g[l]=[n,i]:g.push([n,i]),p?(this.entries=g,this):new he(e,g)}},pe.prototype.get=function(e,t,r,n){void 0===t&&(t=ae(r));var i=1<<((0===e?t:t>>>e)&pr),a=this.bitmap;return 0==(a&i)?n:this.nodes[Pe(a&i-1)].get(e+dr,t,r,n)},pe.prototype.update=function(e,t,r,n,i,a,o){void 0===r&&(r=ae(n));var s=(0===t?r:r>>>t)&pr,u=1<<s,l=this.bitmap,c=0!=(l&u);if(!c&&i===gr)return this;var f=Pe(l&u-1),d=this.nodes,h=c?d[f]:void 0,p=Se(h,e,t+dr,r,n,i,a,o);if(p===h)return this;if(!c&&p&&d.length>=Gr)return De(e,d,l,s,p);if(c&&!p&&2===d.length&&_e(d[1^f]))return d[1^f];if(c&&p&&1===d.length&&_e(p))return p;var g=e&&e===this.ownerID,m=c?p?l:l^u:l|u,v=c?p?ze(d,f,p,g):Ue(d,f,g):je(d,f,p,g);return g?(this.bitmap=m,this.nodes=v,this):new pe(e,m,v)},ge.prototype.get=function(e,t,r,n){void 0===t&&(t=ae(r));var i=(0===e?t:t>>>e)&pr,a=this.nodes[i];return a?a.get(e+dr,t,r,n):n},ge.prototype.update=function(e,t,r,n,i,a,o){void 0===r&&(r=ae(n));var s=(0===t?r:r>>>t)&pr,u=i===gr,l=this.nodes,c=l[s];if(u&&!c)return this;var f=Se(c,e,t+dr,r,n,i,a,o);if(f===c)return this;var d=this.count;if(c){if(!f&&--d<Hr)return Ie(e,l,d,s)}else d++;var h=e&&e===this.ownerID,p=ze(l,s,f,h);return h?(this.count=d,this.nodes=p,this):new ge(e,d,p)},me.prototype.get=function(e,t,r,n){for(var i=this.entries,a=0,o=i.length;a<o;a++)if(X(r,i[a][0]))return i[a][1];return n},me.prototype.update=function(e,t,r,n,i,a,o){void 0===r&&(r=ae(n));var s=i===gr;if(r!==this.keyHash)return s?this:(f(o),f(a),Ee(this,e,t,r,[n,i]));for(var u=this.entries,l=0,c=u.length;l<c&&!X(n,u[l][0]);l++);var d=l<c;if(d?u[l][1]===i:s)return this;if(f(o),(s||!d)&&f(a),s&&2===c)return new ve(e,this.keyHash,u[1^l]);var p=e&&e===this.ownerID,g=p?u:h(u);return d?s?l===c-1?g.pop():g[l]=g.pop():g[l]=[n,i]:g.push([n,i]),p?(this.entries=g,this):new me(e,this.keyHash,g)},ve.prototype.get=function(e,t,r,n){return X(r,this.entry[0])?this.entry[1]:n},ve.prototype.update=function(e,t,r,n,i,a,o){var s=i===gr,u=X(n,this.entry[0]);return(u?i===this.entry[1]:s)?this:(f(o),s?void f(a):u?e&&e===this.ownerID?(this.entry[1]=i,this):new ve(e,this.keyHash,[n,i]):(f(a),Ee(this,e,t,ae(n),[n,i])))},he.prototype.iterate=me.prototype.iterate=function(e,t){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(!1===e(r[t?i-n:n]))return!1},pe.prototype.iterate=ge.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var a=r[t?i-n:n];if(a&&!1===a.iterate(e,t))return!1}},ve.prototype.iterate=function(e,t){return e(this.entry)},e(ye,x),ye.prototype.next=function(){for(var e=this._type,t=this._stack;t;){var r,n=t.node,i=t.index++;if(n.entry){if(0===i)return Me(e,n.entry)}else if(n.entries){if(r=n.entries.length-1,i<=r)return Me(e,n.entries[this._reverse?r-i:i])}else if(r=n.nodes.length-1,i<=r){var a=n.nodes[this._reverse?r-i:i];if(a){if(a.entry)return Me(e,a.entry);t=this._stack=we(a,t)}continue}t=this._stack=this._stack.__prev}return T()};var kr,Fr=hr/4,Gr=hr/2,Hr=hr/4;e(Be,re),Be.of=function(){return this(arguments)},Be.prototype.toString=function(){return this.__toString("List [","]")},Be.prototype.get=function(e,t){if((e=g(this,e))>=0&&e<this.size){e+=this._origin;var r=qe(this,e);return r&&r.array[e&pr]}return t},Be.prototype.set=function(e,t){return We(this,e,t)},Be.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},Be.prototype.insert=function(e,t){return this.splice(e,0,t)},Be.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=dr,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):He()},Be.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(r){Xe(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])})},Be.prototype.pop=function(){return Xe(this,0,-1)},Be.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){Xe(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])})},Be.prototype.shift=function(){return Xe(this,1)},Be.prototype.merge=function(){return Ze(this,void 0,arguments)},Be.prototype.mergeWith=function(e){return Ze(this,e,sr.call(arguments,1))},Be.prototype.mergeDeep=function(){return Ze(this,Ne,arguments)},Be.prototype.mergeDeepWith=function(e){var t=sr.call(arguments,1);return Ze(this,Ce(e),t)},Be.prototype.setSize=function(e){return Xe(this,0,e)},Be.prototype.slice=function(e,t){var r=this.size;return v(e,t,r)?this:Xe(this,y(e,r),M(t,r))},Be.prototype.__iterator=function(e,t){var r=0,n=Fe(this,t);return new x(function(){var t=n();return t===qr?T():b(e,r++,t)})},Be.prototype.__iterate=function(e,t){for(var r,n=0,i=Fe(this,t);(r=i())!==qr&&!1!==e(r,n++,this););return n},Be.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Ge(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):(this.__ownerID=e,this)},Be.isList=Ve;var Wr="@@__IMMUTABLE_LIST__@@",Yr=Be.prototype;Yr[Wr]=!0,Yr.delete=Yr.remove,Yr.setIn=Vr.setIn,Yr.deleteIn=Yr.removeIn=Vr.removeIn,Yr.update=Vr.update,Yr.updateIn=Vr.updateIn,Yr.mergeIn=Vr.mergeIn,Yr.mergeDeepIn=Vr.mergeDeepIn,Yr.withMutations=Vr.withMutations,Yr.asMutable=Vr.asMutable,Yr.asImmutable=Vr.asImmutable,Yr.wasAltered=Vr.wasAltered,ke.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&pr;if(n>=this.array.length)return new ke([],e);var i,a=0===n;if(t>0){var o=this.array[n];if((i=o&&o.removeBefore(e,t-dr,r))===o&&a)return this}if(a&&!i)return this;var s=Qe(this,e);if(!a)for(var u=0;u<n;u++)s.array[u]=void 0;return i&&(s.array[n]=i),s},ke.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n=r-1>>>t&pr;if(n>=this.array.length)return this;var i;if(t>0){var a=this.array[n];if((i=a&&a.removeAfter(e,t-dr,r))===a&&n===this.array.length-1)return this}var o=Qe(this,e);return o.array.splice(n+1),i&&(o.array[n]=i),o};var Qr,qr={};e(Je,fe),Je.of=function(){return this(arguments)},Je.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Je.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},Je.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):tt()},Je.prototype.set=function(e,t){return rt(this,e,t)},Je.prototype.remove=function(e){return rt(this,e,gr)},Je.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Je.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},Je.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},Je.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?et(t,r,e,this.__hash):(this.__ownerID=e,this._map=t,this._list=r,this)},Je.isOrderedMap=$e,Je.prototype[fr]=!0,Je.prototype.delete=Je.prototype.remove;var Xr;e(nt,L),nt.prototype.get=function(e,t){return this._iter.get(e,t)},nt.prototype.has=function(e){return this._iter.has(e)},nt.prototype.valueSeq=function(){return this._iter.valueSeq()},nt.prototype.reverse=function(){var e=this,t=lt(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},nt.prototype.map=function(e,t){var r=this,n=ut(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},nt.prototype.__iterate=function(e,t){var r,n=this;return this._iter.__iterate(this._useKeys?function(t,r){return e(t,r,n)}:(r=t?Et(this):0,function(i){return e(i,t?--r:r++,n)}),t)},nt.prototype.__iterator=function(e,t){if(this._useKeys)return this._iter.__iterator(e,t);var r=this._iter.__iterator(Mr,t),n=t?Et(this):0;return new x(function(){var i=r.next();return i.done?i:b(e,t?--n:n++,i.value,i)})},nt.prototype[fr]=!0,e(it,N),it.prototype.includes=function(e){return this._iter.includes(e)},it.prototype.__iterate=function(e,t){var r=this,n=0;return this._iter.__iterate(function(t){return e(t,n++,r)},t)},it.prototype.__iterator=function(e,t){var r=this._iter.__iterator(Mr,t),n=0;return new x(function(){var t=r.next();return t.done?t:b(e,n++,t.value,t)})},e(at,C),at.prototype.has=function(e){return this._iter.includes(e)},at.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},at.prototype.__iterator=function(e,t){var r=this._iter.__iterator(Mr,t);return new x(function(){var t=r.next();return t.done?t:b(e,t.value,t.value,t)})},e(ot,L),ot.prototype.entrySeq=function(){return this._iter.toSeq()},ot.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){if(t){_t(t);var n=a(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}},t)},ot.prototype.__iterator=function(e,t){var r=this._iter.__iterator(Mr,t);return new x(function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){_t(n);var i=a(n);return b(e,i?n.get(0):n[0],i?n.get(1):n[1],t)}}})},it.prototype.cacheResult=nt.prototype.cacheResult=at.prototype.cacheResult=ot.prototype.cacheResult=Dt,e(Ct,te),Ct.prototype.toString=function(){return this.__toString(Rt(this)+" {","}")},Ct.prototype.has=function(e){return this._defaultValues.hasOwnProperty(e)},Ct.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._defaultValues[e];return this._map?this._map.get(e,r):r},Ct.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var e=this.constructor;return e._empty||(e._empty=Ot(this,be()))},Ct.prototype.set=function(e,t){if(!this.has(e))throw new Error('Cannot set unknown key "'+e+'" on '+Rt(this));if(this._map&&!this._map.has(e)){if(t===this._defaultValues[e])return this}var r=this._map&&this._map.set(e,t);return this.__ownerID||r===this._map?this:Ot(this,r)},Ct.prototype.remove=function(e){if(!this.has(e))return this;var t=this._map&&this._map.remove(e);return this.__ownerID||t===this._map?this:Ot(this,t)},Ct.prototype.wasAltered=function(){return this._map.wasAltered()},Ct.prototype.__iterator=function(e,t){var n=this;return r(this._defaultValues).map(function(e,t){return n.get(t)}).__iterator(e,t)},Ct.prototype.__iterate=function(e,t){var n=this;return r(this._defaultValues).map(function(e,t){return n.get(t)}).__iterate(e,t)},Ct.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map&&this._map.__ensureOwner(e);return e?Ot(this,t,e):(this.__ownerID=e,this._map=t,this)};var Zr=Ct.prototype;Zr.delete=Zr.remove,Zr.deleteIn=Zr.removeIn=Vr.removeIn,Zr.merge=Vr.merge,Zr.mergeWith=Vr.mergeWith,Zr.mergeIn=Vr.mergeIn,Zr.mergeDeep=Vr.mergeDeep,Zr.mergeDeepWith=Vr.mergeDeepWith,Zr.mergeDeepIn=Vr.mergeDeepIn,Zr.setIn=Vr.setIn,Zr.update=Vr.update,Zr.updateIn=Vr.updateIn,Zr.withMutations=Vr.withMutations,Zr.asMutable=Vr.asMutable,Zr.asImmutable=Vr.asImmutable,e(jt,ne),jt.of=function(){return this(arguments)},jt.fromKeys=function(e){return this(r(e).keySeq())},jt.prototype.toString=function(){return this.__toString("Set {","}")},jt.prototype.has=function(e){return this._map.has(e)},jt.prototype.add=function(e){return Bt(this,this._map.set(e,!0))},jt.prototype.remove=function(e){return Bt(this,this._map.remove(e))},jt.prototype.clear=function(){return Bt(this,this._map.clear())},jt.prototype.union=function(){var e=sr.call(arguments,0);return e=e.filter(function(e){return 0!==e.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(t){for(var r=0;r<e.length;r++)i(e[r]).forEach(function(e){return t.add(e)})}):this.constructor(e[0])},jt.prototype.intersect=function(){var e=sr.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(r){t.forEach(function(t){e.every(function(e){return e.includes(t)})||r.remove(t)})})},jt.prototype.subtract=function(){var e=sr.call(arguments,0);if(0===e.length)return this;e=e.map(function(e){return i(e)});var t=this;return this.withMutations(function(r){t.forEach(function(t){e.some(function(e){return e.includes(t)})&&r.remove(t)})})},jt.prototype.merge=function(){return this.union.apply(this,arguments)},jt.prototype.mergeWith=function(e){var t=sr.call(arguments,1);return this.union.apply(this,t)},jt.prototype.sort=function(e){return Ft(wt(this,e))},jt.prototype.sortBy=function(e,t){return Ft(wt(this,t,e))},jt.prototype.wasAltered=function(){return this._map.wasAltered()},jt.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate(function(t,n){return e(n,n,r)},t)},jt.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},jt.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):(this.__ownerID=e,this._map=t,this)},jt.isSet=Ut;var Kr="@@__IMMUTABLE_SET__@@",Jr=jt.prototype;Jr[Kr]=!0,Jr.delete=Jr.remove,Jr.mergeDeep=Jr.merge,Jr.mergeDeepWith=Jr.mergeWith,Jr.withMutations=Vr.withMutations,Jr.asMutable=Vr.asMutable,Jr.asImmutable=Vr.asImmutable,Jr.__empty=kt,Jr.__make=Vt;var $r;e(Ft,jt),Ft.of=function(){return this(arguments)},Ft.fromKeys=function(e){return this(r(e).keySeq())},Ft.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Ft.isOrderedSet=Gt;var en=Ft.prototype;en[fr]=!0,en.__empty=Wt,en.__make=Ht;var tn;e(Yt,re),Yt.of=function(){return this(arguments)},Yt.prototype.toString=function(){return this.__toString("Stack [","]")},Yt.prototype.get=function(e,t){var r=this._head;for(e=g(this,e);r&&e--;)r=r.next;return r?r.value:t},Yt.prototype.peek=function(){return this._head&&this._head.value},Yt.prototype.push=function(){if(0===arguments.length)return this;for(var e=this.size+arguments.length,t=this._head,r=arguments.length-1;r>=0;r--)t={value:arguments[r],next:t};return this.__ownerID?(this.size=e,this._head=t,this.__hash=void 0,this.__altered=!0,this):qt(e,t)},Yt.prototype.pushAll=function(e){if(e=n(e),0===e.size)return this;ce(e.size);var t=this.size,r=this._head;return e.reverse().forEach(function(e){t++,r={value:e,next:r}}),this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):qt(t,r)},Yt.prototype.pop=function(){return this.slice(1)},Yt.prototype.unshift=function(){return this.push.apply(this,arguments)},Yt.prototype.unshiftAll=function(e){return this.pushAll(e)},Yt.prototype.shift=function(){return this.pop.apply(this,arguments)},Yt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Xt()},Yt.prototype.slice=function(e,t){if(v(e,t,this.size))return this;var r=y(e,this.size);if(M(t,this.size)!==this.size)return re.prototype.slice.call(this,e,t);for(var n=this.size-r,i=this._head;r--;)i=i.next;return this.__ownerID?(this.size=n,this._head=i,this.__hash=void 0,this.__altered=!0,this):qt(n,i)},Yt.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?qt(this.size,this._head,e,this.__hash):(this.__ownerID=e,this.__altered=!1,this)},Yt.prototype.__iterate=function(e,t){if(t)return this.reverse().__iterate(e);for(var r=0,n=this._head;n&&!1!==e(n.value,r++,this);)n=n.next;return r},Yt.prototype.__iterator=function(e,t){if(t)return this.reverse().__iterator(e);var r=0,n=this._head;return new x(function(){if(n){var t=n.value;return n=n.next,b(e,r++,t)}return T()})},Yt.isStack=Qt;var rn="@@__IMMUTABLE_STACK__@@",nn=Yt.prototype;nn[rn]=!0,nn.withMutations=Vr.withMutations,nn.asMutable=Vr.asMutable,nn.asImmutable=Vr.asImmutable,nn.wasAltered=Vr.wasAltered;var an;t.Iterator=x,Zt(t,{toArray:function(){ce(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,r){e[r]=t}),e},toIndexedSeq:function(){return new it(this)},toJS:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJS?e.toJS():e}).__toJS()},toJSON:function(){return this.toSeq().map(function(e){return e&&"function"==typeof e.toJSON?e.toJSON():e}).__toJS()},toKeyedSeq:function(){return new nt(this,!0)},toMap:function(){return fe(this.toKeyedSeq())},toObject:function(){ce(this.size);var e={};return this.__iterate(function(t,r){e[r]=t}),e},toOrderedMap:function(){return Je(this.toKeyedSeq())},toOrderedSet:function(){return Ft(o(this)?this.valueSeq():this)},toSet:function(){return jt(o(this)?this.valueSeq():this)},toSetSeq:function(){return new at(this)},toSeq:function(){return s(this)?this.toIndexedSeq():o(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Yt(o(this)?this.valueSeq():this)},toList:function(){return Be(o(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){return St(this,mt(this,sr.call(arguments,0)))},includes:function(e){return this.some(function(t){return X(t,e)})},entries:function(){return this.__iterator(wr)},every:function(e,t){ce(this.size);var r=!0;return this.__iterate(function(n,i,a){if(!e.call(t,n,i,a))return r=!1,!1}),r},filter:function(e,t){return St(this,ct(this,e,t,!0))},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return ce(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){ce(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate(function(n){r?r=!1:t+=e,t+=null!==n&&void 0!==n?n.toString():""}),t},keys:function(){return this.__iterator(yr)},map:function(e,t){return St(this,ut(this,e,t))},reduce:function(e,t,r){ce(this.size);var n,i;return arguments.length<2?i=!0:n=t,this.__iterate(function(t,a,o){i?(i=!1,n=t):n=e.call(r,n,t,a,o)}),n},reduceRight:function(e,t,r){var n=this.toKeyedSeq().reverse();return n.reduce.apply(n,arguments)},reverse:function(){return St(this,lt(this,!0))},slice:function(e,t){return St(this,ht(this,e,t,!0))},some:function(e,t){return!this.every($t(e),t)},sort:function(e){return St(this,wt(this,e))},values:function(){return this.__iterator(Mr)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return p(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return ft(this,e,t)},equals:function(e){return Z(this,e)},entrySeq:function(){var e=this;if(e._cache)return new O(e._cache);var t=e.toSeq().map(Jt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t},filterNot:function(e,t){return this.filter($t(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate(function(r,i,a){if(e.call(t,r,i,a))return n=[i,r],!1}),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(m)},flatMap:function(e,t){return St(this,yt(this,e,t))},flatten:function(e){return St(this,vt(this,e,!0))},fromEntrySeq:function(){return new ot(this)},get:function(e,t){return this.find(function(t,r){return X(r,e)},void 0,t)},getIn:function(e,t){for(var r,n=this,i=Nt(e);!(r=i.next()).done;){var a=r.value;if((n=n&&n.get?n.get(a,gr):gr)===gr)return t}return n},groupBy:function(e,t){return dt(this,e,t)},has:function(e){return this.get(e,gr)!==gr},hasIn:function(e){return this.getIn(e,gr)!==gr},isSubset:function(e){return e="function"==typeof e.includes?e:t(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:t(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(t){return X(t,e)})},keySeq:function(){return this.toSeq().map(Kt).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return xt(this,e)},maxBy:function(e,t){return xt(this,t,e)},min:function(e){return xt(this,e?er(e):nr)},minBy:function(e,t){return xt(this,t?er(t):nr,e)},rest:function(){return this.slice(1)},skip:function(e){return this.slice(Math.max(0,e))},skipLast:function(e){return St(this,this.toSeq().reverse().skip(e).reverse())},skipWhile:function(e,t){return St(this,gt(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile($t(e),t)},sortBy:function(e,t){return St(this,wt(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return St(this,this.toSeq().reverse().take(e).reverse())},takeWhile:function(e,t){return St(this,pt(this,e,t))},takeUntil:function(e,t){return this.takeWhile($t(e),t)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ir(this))}});var on=t.prototype;on[ur]=!0,on[Tr]=on.values,on.__toJS=on.toArray,on.__toStringMapper=tr,on.inspect=on.toSource=function(){return this.toString()},on.chain=on.flatMap,on.contains=on.includes,Zt(r,{flip:function(){return St(this,st(this))},mapEntries:function(e,t){var r=this,n=0;return St(this,this.toSeq().map(function(i,a){return e.call(t,[a,i],n++,r)}).fromEntrySeq())},mapKeys:function(e,t){var r=this;return St(this,this.toSeq().flip().map(function(n,i){return e.call(t,n,i,r)}).flip())}});var sn=r.prototype;return sn[lr]=!0,sn[Tr]=on.entries,sn.__toJS=on.toObject,sn.__toStringMapper=function(e,t){return JSON.stringify(t)+": "+tr(e)},Zt(n,{toKeyedSeq:function(){return new nt(this,!1)},filter:function(e,t){return St(this,ct(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return St(this,lt(this,!1))},slice:function(e,t){return St(this,ht(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(0|t,0),0===r||2===r&&!t)return this;e=y(e,e<0?this.count():this.size);var n=this.slice(0,e);return St(this,1===r?n:n.concat(h(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(e){return St(this,vt(this,e,!1))},get:function(e,t){return e=g(this,e),e<0||this.size===1/0||void 0!==this.size&&e>this.size?t:this.find(function(t,r){return r===e},void 0,t)},has:function(e){return(e=g(this,e))>=0&&(void 0!==this.size?this.size===1/0||e<this.size:-1!==this.indexOf(e))},interpose:function(e){return St(this,Mt(this,e))},interleave:function(){var e=[this].concat(h(arguments)),t=Tt(this.toSeq(),N.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),St(this,r)},keySeq:function(){return $(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return St(this,gt(this,e,t,!1))},zip:function(){return St(this,Tt(this,rr,[this].concat(h(arguments))))},zipWith:function(e){var t=h(arguments);return t[0]=this,St(this,Tt(this,e,t))}}),n.prototype[cr]=!0,n.prototype[fr]=!0,Zt(i,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=on.includes,i.prototype.contains=i.prototype.includes,Zt(L,r.prototype),Zt(N,n.prototype),Zt(C,i.prototype),Zt(te,r.prototype),Zt(re,n.prototype),Zt(ne,i.prototype),{Iterable:t,Seq:D,Collection:ee,Map:fe,OrderedMap:Je,List:Be,Stack:Yt,Set:jt,OrderedSet:Ft,Record:Ct,Range:$,Repeat:K,is:X,fromJS:W}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return!!e.getIn(["assets","assets",t])}function a(e,t){var r=e.getIn(["assets","assets",t]);return r?r.toJS():{}}function o(e){return{type:te,payload:e}}function s(e){return{type:re,payload:e}}function u(e,t,r){var n=r.resizeImage,i=r.resizeWidth,a=r.resizeHeight,o=r.optimizeFormat;if(!n&&""===o)return l(e,t);var s=n?i+"x"+a+"/":"",u=""!==o?"filters:format("+o+")/":"";return["https://d313sr52mgc0rk.cloudfront.net","https://clara.io/resources"].map(function(e){return e+"/images/"+s+u+t.get("hash")+"?filename="+t.get("name")})}function l(e,t){return e.getIn(["assets","fileRoots"]).map(function(e){return e+"/"+t.get("hash")+t.get("suffix")+"?filename="+t.get("name")})}function c(e){return function(t){return(0,t.getIn)(["sceneIO","loadingFiles",e])}}function f(e){return images[e]}function d(e,t,r){if(le[t])return le[t];e.dispatch((0,$.markLoadingFile)(t));var n=new Image,i=new FileReader;return i.addEventListener("load",function(){n.src=i.result,le[t]=n,e.dispatch((0,$.markLoadedFile)(t))}),i.readAsDataURL(r),null}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=n.getIn(["assets","assets",e]);if(i){var a=i.get("localFile");if(a)return d(n,e,a);var o=r.optimizeImage?u(n,i,r):[];return o.push.apply(o,(0,F.default)(l(n,i))),n.callApi((0,V.default)({types:[J.LOADING_FILE,J.LOADED_FILE,J.LOADING_FILE_ERROR],url:o,contentType:"img",payload:e,queryKey:"IMAGE"+i.get("hash"),fireAndForget:void 0===t.fireAndForget},t))}}}function p(e,t){return t&&h(t,{fireAndForget:!1})(e)}function g(e,t,r){return t&&m(t,(0,V.default)({fireAndForget:!1},r))(e)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=r.getIn(["assets","assets",e]);if(!n)return r.error(new Error("target file not found"),null,{fileId:e}),null;if(n.get("content"))return n.get("content");var i=r.getTranslator(),a=n.get("lzma")&&!(i&&i.externals.isMobile)&&n.get("size")>=ce,o=a?n.set("suffix","lzma1"):n,s=void 0===t.decompress&&a;return r.callApi((0,V.default)({types:[J.LOADING_FILE,J.LOADED_FILE,J.LOADING_FILE_ERROR],url:l(r,o),contentType:"binary",payload:e,queryKey:"FILE"+o.get("hash")+s,decompress:s,fireAndForget:void 0===t.fireAndForget},t))}}function v(e){return function(t){var r=t.getIn(["assets","assets",e]);return r?t.callApi({types:[J.LOADING_FILE,J.LOADED_FILE,J.LOADING_FILE_ERROR],url:l(t,r),contentType:"font",payload:e,queryKey:"FILE"+r.get("hash"),fireAndForget:!0}):(t.error(new Error("target file not found"),null,{fileId:e}),null)}}function y(e,t){return e.getIn(["assets","assets",t,"hash"])}function M(e,t){var r=e.getIn(["assets","assets",t]);if(r){var n=l(e,r);return n[n.length-1]}return r}function w(e,t,r){var n=e.getIn(["assets","assets",t]);if(n){return u(e,n,r)[0]}return n}function x(e){return function(t){return t.callApi({contentType:"text",url:t.getIn(["assets","fileRoots"]).map(function(t){return t+"/"+e})})}}function b(e){return function(t){return t.callApi({contentType:"text",url:"/api/scenes/"+e})}}function T(e,t){return e.getIn(["assets","assets"]).find(t)}function S(e,t){return e.getIn(["assets","assets"]).filter(t||function(){return!0})}function _(e){return e.getIn(["assets","assets"]).map(function(e){var t=e.toJS();return t._id=t.id,delete t.id,t}).toArray()}function E(e){var t=(0,Z.getEvalSceneGraph)(e);return S(e,function(e,r){return!!t.fileReferences.from[r]})}function A(e,t){return Math.log(e)/Math.log(t)}function I(e){return Math.pow(2,Math.ceil(A(e,2)))}function D(e,t,r){return Math.max(t,Math.min(e,r))}function L(e,t){var r={};return r.width=D(I(e.width),1,t.width),r.height=D(I(e.height),1,t.height),r}function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){function n(e,n){var i=new FormData,a="boolean"!=typeof t.keepAspectRatio||!t.keepAspectRatio;return i.append("file",e),i.append("name",e.name),i.append("sceneId",de),i.append("type",e.type),i.append("targetFormat",t.targetFormat||"png"),i.append("quality",t.quality||60),i.append("maxSize",t.resizeTo),i.append("density",t.dpi),i.append("scale",t.scale),n&&i.append("convertToFileId",n),i.append("resize",a),C(r,{body:i,type:e.type})}function i(e){return r.dispatch(o((0,V.default)({id:e._id},e)))}function a(n){var i={name:n.name||e.name,type:"Image",parent:(0,K.find)(r,{name:"Material Library"}),plugs:{Image:[["Image",{glBitmapFile:n.id,glOption:1}]],Properties:[["ImageProperties",{}]]}};return t.imageNodeId&&(i.id=t.imageNodeId),r.dispatch((0,Z.addNode)(i)).then(function(e){return{id:e,imageNodeId:e,assetId:n.id,imageSize:{width:n.height,height:n.width,originalWidth:n.originalWidth,originalHeight:n.originalHeight},url:n.original}})}if("string"==typeof e)return(0,ee.isUuid)(e)?function(e){return r.callApi({types:[J.LOADING_FILE,J.LOADED_FILE,J.LOADING_FILE_ERROR],url:"https://clara.io/api/files/"+e+"/asset",payload:e})}(e).then(i).then(a):function(e){var n=(0,z.default)((0,V.default)({url:e,maxSize:t.resizeTo||fe,sceneId:de},t));return r.callApi({types:[ne,ie,ae],method:"POST",url:"https://clara.io/api/files/image",body:n})}(e).then(i).then(a).catch(function(e){var t=void 0;return t=e.status&&e.status<500?"Image not imported, bad url":e.status&&e.status>=500?"Image not imported, internal error":e,U.default.reject(t)});if(!e.type)return U.default.reject("Expect a File");if(!he[e.type])return U.default.reject("File format not supported");return e.type.match(/image\/(jpeg|png)/)&&e.size<5e6?function(e){return r.dispatch(o({id:(0,Q.default)(),name:e.name,localFile:e,size:e.size,type:e.type}))}(e).then(a).then(function(t){return n(e,t.assetId).then(function(e){}),t}):n(e).then(i).then(a)}}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="https://clara.io/api/files";return he[t.type]&&(r+="/image"),e.callApi((0,V.default)({types:[ne,ie,ae],method:"POST",url:r},t))}function O(e){return{type:oe,payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NULL_SCENE_ID=void 0;var R,P=r(47),z=n(P),j=r(39),U=n(j),B=r(2),V=n(B),k=r(149),F=n(k),G=r(19),H=n(G);t.hasFile=i,t.getFile=a,t.addFile=o,t.removeFile=s,t.urlsFor=l,t.isLoading=c,t.getImage=f,t.getOrFetchImage=h,t.fetchImage=p,t.fetchBinary=g,t.getOrFetchBinary=m,t.getOrFetchFont=v,t.getHash=y,t.getUrl=M,t.getImageUrl=w,t.fetchText=x,t.fetchTransit=b,t.find=T,t.filter=S,t.exportJSON=_,t.getActiveAssets=E,t.importImage=N,t.importFile=C,t.addRoot=O;var W=r(32),Y=r(79),Q=n(Y),q=r(46),X=n(q),Z=r(10),K=r(7),J=r(58),$=r(20),ee=r(123),te="ADD_FILE",re="REMOVE_FILE",ne="IMPORTING_FILE",ie="IMPORTED_FILE",ae="IMPORT_FILE_ERROR",oe="ADD_ROOT",se=(0,W.Map)({fileRoots:["https://d1mly9lp7y5o9.cloudfront.net","https://d313sr52mgc0rk.cloudfront.net","https://clara.io/resources"],assets:(0,W.Map)()}),ue=(0,X.default)(se,(R={},(0,H.default)(R,te,function(e,t){var r=t.id;return e.setIn(["assets",r],(0,W.Map)(t))}),(0,H.default)(R,re,function(e,t){return e.deleteIn(["assets",t])}),(0,H.default)(R,J.LOAD_SCENE,function(e,t){var r=t.assets;return e.set("assets",e.get("assets").merge(r))}),(0,H.default)(R,J.CLEAR_SCENE,function(e){return e.set("assets",(0,W.Map)())}),(0,H.default)(R,oe,function(e,t){var r=e.get("fileRoots").slice();return r.unshift(t),e.set("fileRoots",r)}),R)),le={},ce=1e5,fe=4096,de=t.NULL_SCENE_ID="00000000-0000-0000-0000-000000000000",he={"image/jpeg":!0,"image/png":!0,"application/pdf":!0,"image/svg+xml":!0},pe={reducer:ue,actions:{addFile:o,removeFile:s,importImage:N,addRoot:O},selectors:{_getHash:y,getUrl:M,filter:S,find:T,getActiveAssets:E,exportJSON:_,fetchImage:p,fetchBinary:g}};t.default=pe},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(166),a=n(i),o=r(229),s=n(o),u={Empty:(0,a.default)({Array:(0,a.default)(new Array(0)),Float64Array:new Float64Array(0),Float32Array:new Float32Array(0),Uint32Array:new Uint32Array(0),Int32Array:new Int32Array(0)}),rangeCopy:function(e,t,r,n,i){for(var a=0;a!==i;++a)r[n+a]=e[t+a];return r},rangeEquals:function(e,t,r,n,i){for(var a=0;a!==i;++a)if(e[t+a]!==r[n+a])return!1;return!0},stridedCopy:function(e,t,r,n,i,a,o,s){for(var u=0;u!==s;++u)for(var l=0;l!==o;++l)n[i+u*a+l]=e[t+u*r+l];return n},accumulate:function(e){for(var t=1,r=e.length;t<r;++t)e[t]+=e[t-1];return e},slice:function(e,t,r){return void 0!==e.slice?e.slice(t,r):new e.constructor(e.subarray(t,r))},clone:function(e){return null!==e?void 0!==e.slice?e.slice(0):new e.constructor(e):null},binarySearch:function(e,t,r,n){for(var i=void 0===r?0:r,a=void 0===n?e.length-i:n,o=a;i<a;){var s=i+a>>>1;e[s]<t?i=s+1:a=s}return i<o&&e[i]===t?i:~i},sort:function(e,t){return void 0!==e.sort?e.sort(t||s.default.Numeric):Array.prototype.sort.call(e,t||s.default.Numeric)},unique:function(e,t){var r=e.length;if(r<=1)return e.length;var n=0,i=e[0];if(void 0===t)for(var a=1;a!==r;++a){var o=e[a];o!==i&&(i=o,++n!==a&&(e[n]=o))}else{var s=t;if(!optionallyBuiltMap)for(var u=1;u!==r;++u){var l=e[u];0!==s(l,i)&&(i=l,++n!==u&&(e[n]=l))}}return n+1},maybeCreate:function(e,t){if(!e)throw Error("Missing array!");var r=null!==t&&!isNaN(t);if("function"==typeof e||e instanceof Function){if(!r)throw Error("Missing or invalid length!");return new e(t)}if(r&&e.length<t)throw Error("Array too short: "+e.length+" < "+t);return e},copyObjects:function(e,t,r){if(!e)return null;var n=e.length;if(0===n)return t;var i=e[0].constructor.InstanceScalarSize||r;if(void 0===i)throw Error("Arrays.fromObjects: Cannot determine stride!");for(var a=(u.maybeCreate(arrayOrType,n*i),0),o=0;a!==n;++a,o+=i){var s=e[a];void 0!==s?s.toArray(t,o):(console.warn("Arrays.fromObjects: Undefined object."),t.fill(0,o,o+i))}return t}};t.default=u},function(e,t,r){e.exports=!r(21)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){function n(e,t){if(e.ns="http://www.w3.org/2000/svg",void 0!==t)for(var r=0;r<t.length;++r)n(t[r].data,t[r].children)}var i=r(311),a=r(205);e.exports=function(e,t,r){var o,s,u,l={};if(3===arguments.length?(l=t,a.array(r)?o=r:a.primitive(r)&&(s=r)):2===arguments.length&&(a.array(t)?o=t:a.primitive(t)?s=t:l=t),a.array(o))for(u=0;u<o.length;++u)a.primitive(o[u])&&(o[u]=i(void 0,void 0,void 0,o[u]));return"s"===e[0]&&"v"===e[1]&&"g"===e[2]&&n(l,o),i(e,l,o,s,void 0)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(504),a=n(i),o=r(503),s=n(o),u="function"==typeof s.default&&"symbol"==typeof a.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(a.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,r){e.exports={default:r(528),__esModule:!0}},function(e,t,r){e.exports=!r(60)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(44),i=r(264),a=r(180),o=Object.defineProperty;t.f=r(40)?Object.defineProperty:function(e,t,r){if(n(e),t=a(t,!0),n(r),i)try{return o(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(26),i=r(75);e.exports=r(35)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return(0,L.Map)({all:{},prev:{},allCommands:(0,L.List)(),tools:(0,L.List)(),activeCommand:null,removedCommands:(0,L.Map)()})}function a(e,t){var r=(0,D.default)({},B,e,{name:t});return!0===r.display&&(r.display={playerTools:!0}),r}function o(e,t){return{type:R,payload:{command:e,name:t}}}function s(e){return{type:P,payload:e}}function u(e,t){return{type:z,payload:{name:e,opts:t}}}function l(e){return{type:j,payload:{name:e}}}function c(e,t){return{type:U,payload:{name:e,opts:t}}}function f(e){return e.getIn(["commands","tools"])}function d(e,t){var r=e.getIn(["commands","all"]);return t?(0,_.default)(r).reduce(function(e,n){var i=r[n];return i.enabled&&i.display[t]&&(e[n]=i),e},{}):r}function h(e,t){return!!t.active||!!t.isActive&&t.isActive(e)}function p(e,t){var r=e.getIn(["commands","all"])[t];return r&&h(e,r)}function g(e){var t=d(e),r={};return(0,T.default)(t).forEach(function(t){t.widget&&h(e,t)&&(r[t.name]=t)}),r}function m(e){return function(t){var r=f(t),n=d(t),i=n[e];i.activate?h(t,i)||(i.activate.call(i),t.dispatch(u(e,{active:!0}))):r.forEach(function(r){var i=n[r];i.active&&i.name!==e&&t.dispatch(u(i.name,{active:!1})),i.name===e&&t.dispatch(u(i.name,{active:!0}))})}}function v(e){return function(t){var r=d(t),n=r[e];n&&(n.active&&t.dispatch(u(n.name,{active:!1})),n.deactivate&&n.deactivate.call(n))}}function y(e){return function(t){var r=t.getIn(["commands","all"])[e];if(r&&r.enabled){if(t.trackEvent("Execute Command","Run "+e),r.execute)return r.execute(t);var n=h(t,r);return r.deactivate&&n?t.dispatch(v(e)):t.dispatch(m(e))}}}function M(e,t){return function(r){e.forEach(function(e){r.dispatch(u(e,t))})}}function w(e){return function(t){e.forEach(function(e){t.dispatch(l(e))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.MOUSE_CONTROLS=void 0;var x,b=r(130),T=n(b),S=r(4),_=n(S),E=r(19),A=n(E),I=r(2),D=n(I);t.addCommand=o,t.removeCommand=s,t.updateCommand=u,t.undoUpdateCommand=l,t.setCommandOptions=c,t.getTools=f,t.getCommands=d,t.isCommandActive=p,t.getActiveCommandsWithWidgets=g,t.activateCommand=m,t.deactivateCommand=v,t.runCommand=y,t.updateCommands=M,t.undoUpdateCommands=w;var L=r(32),N=r(46),C=n(N),O=(r(8),r(128)),R=(t.MOUSE_CONTROLS=["orbit","pan","zoom","home","fullscreen","configurator"],"ADD_COMMAND"),P="REMOVE_COMMAND",z="UPDATE_COMMAND",j="UNDO_UPDATE_COMMAND",U="UPDATE_COMMAND_OPTIONS;",B={enabled:!0,display:{},options:{},isEnabled:function(e,t){return t.enabled},isVisible:function(e,t){return t.display},command:null,widget:null},V=(0,C.default)({},(x={},(0,A.default)(x,O.ActionTypes.INIT,function(e){return i()}),(0,A.default)(x,R,function(e,t){var r=t.command,n=t.name;if(e.getIn(["removedCommands",n]))return e;var i=e.get("all");i[n]=(0,D.default)(a(r,n),i[n]||{});var o=e.updateIn(["allCommands"],(0,L.List)(),function(e){return e.push(n)});return i[n].tool&&(o=o.updateIn(["tools"],(0,L.List)(),function(e){return e.push(n)})),o}),(0,A.default)(x,P,function(e,t){delete e.get("all")[t];var r=e.getIn(["tools"]).indexOf(t),n=e.getIn(["allCommands"]).indexOf(t),i=e;return r>=0&&(i=i.deleteIn(["tools",r])),n>=0&&(i=i.deleteIn(["allCommands",n])),i=i.setIn(["removedCommands",t],!0)}),(0,A.default)(x,z,function(e,t){var r=t.name,n=t.opts,i=e.get("all");i[r]||(i[r]=a(n,r));var o=i[r];return e.get("prev")[r]=(0,D.default)({},o),(0,D.default)(o,n),e}),(0,A.default)(x,U,function(e,t){var r=t.name,n=t.opts,i=e.get("all")[r];return e.get("prev")[r]=(0,D.default)({},i),i&&(0,D.default)(i.options,n),e}),(0,A.default)(x,j,function(e,t){var r=t.name,n=e.get("prev")[r];if(n){var i=e.get("all")[r];i&&(0,D.default)(i,n)}return e}),x)),k={reducer:V,actions:{activateCommand:m,addCommand:o,deactivateCommand:v,runCommand:y,setCommandOptions:c,updateCommand:u,undoUpdateCommand:l,updateCommands:M,removeCommand:s},selectors:{}};t.default=k},function(e,t,r){var n=r(27);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return function(r){var n=new D.default(r,e,t);return r.dispatch({type:"ADD_SELECTION_SET",payload:n}),n}}function a(e){return{type:z,payload:e}}function o(e){return{type:"TOUCH_SELECTION_SET",payload:e}}function s(e){return e.getIn(["selection","selectionSets"]).toArray().map(function(e){return e.get("set")})}function u(e){return{type:C,payload:e}}function l(e,t){return e.getIn(["selection","nodes"]).includes(t)}function c(e){return e.getIn(["selection","nodes"]).last()}function f(e){return e.getIn(["selection","nodes"]).toArray()}function d(){return{type:O}}function h(e){var t=e.getIn(["selection","highlighters"]);return(0,S.List)(t.toArray().map(function(e){return e.get("hl")}))}function p(e){return{type:"TOUCH_HIGHLIGHTER",payload:e}}function g(e){return function(t){var r=h(t).first();if(e)return r||(r=new N.default(t,{thickness:M(t),color:v(t)}),t.dispatch({type:j,payload:r})),r;e||r&&t.dispatch({type:U,payload:r.id})}}function m(e){return function(t){var r=h(t).first();return r&&r.setColor(e),t.dispatch({type:R,payload:e})}}function v(e){return e.getIn(["selection","highlightColor"])}function y(e){return function(t){e>5&&(e=5),e<=0&&(e=.1);var r=h(t).first();return r&&r.setThickness(e),{type:P,payload:e}}}function M(e){return e.getIn(["selection","highlightThickness"])}function w(e){return e.getIn(["selection","highlightNodes"])}Object.defineProperty(t,"__esModule",{value:!0});var x,b=r(19),T=n(b);t.createSelectionSet=i,t.removeSelectionSet=a,t.touchSelectionSet=o,t.getSelectionSets=s,t.selectNode=u,t.isSelected=l,t.lastSelectedNode=c,t.getSelectedNodes=f,t.deselectAll=d,t.getHighlighters=h,t.touchHighlighter=p,t.setHighlighting=g,t.setHighlightColor=m,t.getHighlightColor=v,t.setHighlightThickness=y,t.getHighlightThickness=M,t.isHighlighting=w;var S=r(32),_=r(46),E=n(_),A=r(58),I=r(344),D=n(I),L=r(343),N=n(L),C="SELECT_NODE",O="DESELECT_ALL",R="SET_HIGHLIGHT_COLOR",P="SET_HIGHLIGHT_THICKNESS",z="REMOVE_SELECTION_SET",j="ADD_HIGHLIGHTER",U="REMOVE_HIGHLIGHTER",B=(0,S.Map)({nodes:(0,S.List)(),highlightNodes:!1,highlightColor:"#00ff00",highlightThickness:1,highlighters:(0,S.Map)(),selectionSets:(0,S.Map)()}),V=(0,E.default)(B,(x={},(0,T.default)(x,C,function(e,t){var r=e.get("nodes");return e.set("nodes",r.includes(t)?r:r.clear().push(t))}),(0,T.default)(x,A.DELETE_NODE,function(e,t){var r=e.get("nodes").indexOf(t);return-1===r?e:e.deleteIn(["nodes",r])}),(0,T.default)(x,A.CLEAR_SCENE,function(e){return e.set("nodes",e.get("nodes").clear())}),(0,T.default)(x,O,function(e){return e.set("nodes",e.get("nodes").clear())}),(0,T.default)(x,"SET_HIGHLIGHTING",function(e,t){return e.set("highlightNodes",t)}),(0,T.default)(x,R,function(e,t){return e.set("highlightColor",t)}),(0,T.default)(x,P,function(e,t){return e.set("highlightThickness",t)}),(0,T.default)(x,"ADD_SELECTION_SET",function(e,t){return e.setIn(["selectionSets",t.id],(0,S.Map)({set:t,v:0}))}),(0,T.default)(x,z,function(e,t){return e.deleteIn(["selectionSets",t])}),(0,T.default)(x,"TOUCH_SELECTION_SET",function(e,t){var r=e.getIn(["selectionSets",t.id,"v"]);return console.log("ss version",t.id,r+1),e.setIn(["selectionSets",t.id,"v"],r+1)}),(0,T.default)(x,j,function(e,t){return e.setIn(["highlighters",t.id],(0,S.Map)({hl:t,v:0}))}),(0,T.default)(x,U,function(e,t){return e.deleteIn(["highlighters",t])}),(0,T.default)(x,"TOUCH_HIGHLIGHTER",function(e,t){var r=e.getIn(["highlighters",t.id,"v"]);return console.log("hl version",t.id,r+1),e.setIn(["highlighters",t.id,"v"],r+1)}),x)),k={reducer:V,actions:{selectNode:u,deselectAll:d,setHighlighting:g,setHighlightColor:m,setHighlightThickness:y,createSelectionSet:i},selectors:{isSelected:l,lastSelectedNode:c,getHighlightColor:v,getHighlightThickness:M,getSelectionSets:s}};t.default=k},function(e,t,r){"use strict";function n(e,t){return function(r,n,i,a,o){return n&&t.hasOwnProperty(n.type)?t[n.type](r,n.payload,{action:n,createEvent:a,trackEvent:o,state:i}):r||e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){e.exports={default:r(511),__esModule:!0}},function(e,t,r){e.exports={default:r(520),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(498),a=n(i),o=r(24),s=n(o);t.default=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var o,u=(0,s.default)(e);!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,a.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=e.positions.faceRangeOffsets,r=e.positions.faceValueIndices,n=e.positions.values,i=e.positions.valueAdjacency,a=new Uint32Array(r.length),o=new v.default(f.Vector3,r.length),s=new f.Vector3,u=new f.Vector3,l=new f.Vector3,c=0;c<t.length;c++)for(var d=t[c];d<t[c+1];d++){var p=i.getAdjacentFaceValuesIndicesOnFace(d,c);n.getAt(r[d],l),s.multiplyScalar(0),u.multiplyScalar(0),2===p.length&&(n.getAt(r[p[0]],s),n.getAt(r[p[1]],u),s.subVectors(l,s),u.subVectors(l,u),l.copy(u.cross(s))),l.normalize(),a[d]=d,o.setAt(d,l)}var m=new g.default({faceRangeOffsets:e.positions.faceRangeOffsets,faceValueIndices:a,values:o}),y=new h.default(e);return y.normalMap=m,(0,M.default)(y)}function a(e){for(var t=e.positions.faceValueIndices,r=e.positions.values,n=e.positions.valueAdjacency,i=new f.Vector3,a=new f.Vector3,o=new f.Vector3,u=new f.Vector3,l=new v.default(f.Vector3,r.length),c=0;c<r.length;c++){for(var d=n.getNumFacesForVertex(c),p=[],m=0;m<d;m++)p.push(n.getFaceForVertexId(c,m));r.getAt(c,u),o.multiplyScalar(0),i.multiplyScalar(0),a.multiplyScalar(0);for(var y=0;y<p.length;y++){var M=n.getAdjacentFaceValuesIndicesOnFace(s(e,c,p[y]),p[y]);2===M.length&&(r.getAt(t[M[0]],i),r.getAt(t[M[1]],a),i.subVectors(u,i),a.subVectors(u,a),o.add(a.cross(i)))}o.normalize(),l.setAt(c,o)}var w=new g.default({faceRangeOffsets:e.positions.faceRangeOffsets,faceValueIndices:e.positions.faceValueIndices,values:l}),x=new h.default(e);return x.normalMap=w,x}function o(e,t){t=t||30;for(var r=e,n=t*f.Math.DEG2RAD,i=r.faceRangeOffsets,a=r.positions.faceValueIndices,o=r.positions.values,u=new Uint32Array(r.positions.faceValueIndices.length),l=[],c=new f.Vector3,d=new f.Vector3,p=new f.Vector3,m=r.positions.valueAdjacency,y=r.positions.faceFaceAdjacency,M=0,w=0;w<o.length;w++){var x=m.getNumFacesForVertex(w),b=[],T=[];o.getAt(w,p);for(var S=0;S<x;S++)b.push(m.getFaceForVertexId(w,S)),T.push(-1);for(var _=0;_<b.length;_++)if(!(T[_]>-1)){var E=b[_],A=y.adjacentFacesOnVertex(b[_],w),I=[];I.push(E);for(var D=E,L=A[0],N=-1,C=0;C<A.length;C++){for(var O=0;O<b.length;O++){var R=m.getAdjacentFaceValuesIndicesOnFace(s(r,w,D),D);o.getAt(a[R[0]],c),o.getAt(a[R[1]],d),c.subVectors(p,c),d.subVectors(p,d);var P=(new f.Vector3).copy(d.cross(c));P.normalize();var z=m.getAdjacentFaceValuesIndicesOnFace(s(r,w,L),L);o.getAt(a[z[0]],c),o.getAt(a[z[1]],d),c.subVectors(p,c),d.subVectors(p,d);var j=(new f.Vector3).copy(d.cross(c));j.normalize();var U=P.dot(j);if(L===E||T[b.indexOf(L)]>-1||Math.acos(U)>n)break;I.push(L);var B=y.adjacentFacesOnVertex(L,w);if(B.length<2)break;N=B[0]===D?B[1]:B[0],D=L,L=N}D=E,L=A[1],N=-1}for(var V=new f.Vector3,k=0;k<I.length;k++){!function(e,t,r){for(var n=[],o=i[t];o<i[t+1];o++)if(n.push(a[o]),a[o]===e)return void(u[o]=r);console.error("index "+e+" is not on face "+t,n)}(w,I[k],M),T[b.indexOf(I[k])]=M;var F=m.getAdjacentFaceValuesIndicesOnFace(s(r,w,I[k]),I[k]);2===F.length&&(o.getAt(a[F[0]],c),o.getAt(a[F[1]],d),c.subVectors(p,c),d.subVectors(p,d),V.add(d.cross(c)))}V.normalize(),l.push(V),I.length>0&&M++}}for(var G=new v.default(f.Vector3,l.length),H=0;H<l.length;H++)G.setAt(H,l[H]);var W=new g.default({faceRangeOffsets:r.faceRangeOffsets,faceValueIndices:u,values:G}),Y=new h.default(r);return Y.normalMap=W,Y}function s(e,t,r){for(var n=e.faceRangeOffsets,i=e.positions.faceValueIndices,a=n[r];a<n[r+1];a++)if(i[a]===t)return a;return-1}function u(e){if(!e||!e.normalMap||!e.normalMap.faceValueIndices)return e;for(var t=e.faceRangeOffsets,r=e.positions.faceValueIndices,n=e.normalMap.faceValueIndices,i=e.positions.values,a=new v.default(f.Vector3,e.normalMap.values.length),o=new f.Vector3,s=new f.Vector3,u=new f.Vector3,l=0;l<t.length-1;l++){i.getAt(r[t[l]],s),i.getAt(r[t[l]+1],o),i.getAt(r[t[l]+2],u),s.subVectors(o,s),u.subVectors(o,u),o.copy(u.cross(s));for(var c=t[l];c<t[l+1];c++)a.getAt(n[c],s),a.setAt(n[c],s.add(o))}for(var d=0;d<a.length;d++)a.getAt(d,o),o.normalize(),a.setAt(d,o);var p=new h.default(e);return p.normalMap.values=a,p}Object.defineProperty(t,"__esModule",{value:!0});var l=r(2),c=n(l);t.flatNormalMap=i,t.areaWeightedNormalMap=a,t.autoSmooth=o,t.recalculateNormalsFromConnectivity=u;var f=r(0),d=r(5),h=n(d),p=r(6),g=n(p),m=r(3),v=n(m),y=r(159),M=n(y),w={Default:-1,Average:0,Flat:1,AutoSmooth:2,NoNormals:3,FromConnectivity:4},x={schema:{normalTypes:{label:"Normal Type",type:"Number",defaultValue:w.Default},smoothingAngle:{label:"Smooth Angle",type:"Number",defaultValue:30,step:1,minValue:0,maxValue:180},flipfaces:{label:"Flip Faces",type:"Boolean",defaultValue:!1}},update:function(e,t){var r=e.normalTypes,n=(e.flipfaces,e.smoothingAngle),s=t.mesh;if(!s)return t;switch(r){case w.NoNormals:s=(0,c.default)({},s),s.normalMap=null,s=new h.default(s);break;case w.Flat:s=i(s);break;case w.Average:s=a(s);break;case w.AutoSmooth:s=o(s,n);break;case w.FromConnectivity:s=u(s);break;case w.Default:default:return t}return t.mesh=s,t}};t.default=x},function(e,t,r){"use strict";function n(e){var t=new i.Vector3,r=new i.Quaternion,n=new i.Vector3;e.decompose(t,r,n);var a=(new i.Vector3).copy((new i.Euler).setFromQuaternion(r,"ZYX"));return a.multiplyScalar(180/Math.PI),{translation:t,rotation:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0)},function(e,t,r){var n=r(73);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(191),i=r(74);e.exports=function(e){return n(i(e))}},function(e,t,r){"use strict";if(r(35)){var n=r(90),i=r(13),a=r(21),o=r(1),s=r(201),u=r(302),l=r(52),c=r(87),f=r(75),d=r(42),h=r(92),p=r(76),g=r(30),m=r(301),v=r(94),y=r(119),M=r(36),w=r(186),x=r(14),b=r(77),T=r(192),S=r(115),_=r(117),E=r(116).f,A=r(202),I=r(78),D=r(16),L=r(112),N=r(185),C=r(198),O=r(203),R=r(89),P=r(143),z=r(145),j=r(184),U=r(281),B=r(26),V=r(63),k=B.f,F=V.f,G=i.RangeError,H=i.TypeError,W=i.Uint8Array,Y=Array.prototype,Q=u.ArrayBuffer,q=u.DataView,X=L(0),Z=L(2),K=L(3),J=L(4),$=L(5),ee=L(6),te=N(!0),re=N(!1),ne=O.values,ie=O.keys,ae=O.entries,oe=Y.lastIndexOf,se=Y.reduce,ue=Y.reduceRight,le=Y.join,ce=Y.sort,fe=Y.slice,de=Y.toString,he=Y.toLocaleString,pe=D("iterator"),ge=D("toStringTag"),me=I("typed_constructor"),ve=I("def_constructor"),ye=s.CONSTR,Me=s.TYPED,we=s.VIEW,xe=L(1,function(e,t){return Ee(C(e,e[ve]),t)}),be=a(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),Te=!!W&&!!W.prototype.set&&a(function(){new W(1).set({})}),Se=function(e,t){var r=p(e);if(r<0||r%t)throw G("Wrong offset!");return r},_e=function(e){if(x(e)&&Me in e)return e;throw H(e+" is not a typed array!")},Ee=function(e,t){if(!(x(e)&&me in e))throw H("It is not a typed array constructor!");return new e(t)},Ae=function(e,t){return Ie(C(e,e[ve]),t)},Ie=function(e,t){for(var r=0,n=t.length,i=Ee(e,n);n>r;)i[r]=t[r++];return i},De=function(e,t,r){k(e,t,{get:function(){return this._d[r]}})},Le=function(e){var t,r,n,i,a,o,s=b(e),u=arguments.length,c=u>1?arguments[1]:void 0,f=void 0!==c,d=A(s);if(void 0!=d&&!T(d)){for(o=d.call(s),n=[],t=0;!(a=o.next()).done;t++)n.push(a.value);s=n}for(f&&u>2&&(c=l(c,arguments[2],2)),t=0,r=g(s.length),i=Ee(this,r);r>t;t++)i[t]=f?c(s[t],t):s[t];return i},Ne=function(){for(var e=0,t=arguments.length,r=Ee(this,t);t>e;)r[e]=arguments[e++];return r},Ce=!!W&&a(function(){he.call(new W(1))}),Oe=function(){return he.apply(Ce?fe.call(_e(this)):_e(this),arguments)},Re={copyWithin:function(e,t){return U.call(_e(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return J(_e(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return j.apply(_e(this),arguments)},filter:function(e){return Ae(this,Z(_e(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return $(_e(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(_e(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){X(_e(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return re(_e(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(_e(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(_e(this),arguments)},lastIndexOf:function(e){return oe.apply(_e(this),arguments)},map:function(e){return xe(_e(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return se.apply(_e(this),arguments)},reduceRight:function(e){return ue.apply(_e(this),arguments)},reverse:function(){for(var e,t=this,r=_e(t).length,n=Math.floor(r/2),i=0;i<n;)e=t[i],t[i++]=t[--r],t[r]=e;return t},some:function(e){return K(_e(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ce.call(_e(this),e)},subarray:function(e,t){var r=_e(this),n=r.length,i=v(e,n);return new(C(r,r[ve]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,g((void 0===t?n:v(t,n))-i))}},Pe=function(e,t){return Ae(this,fe.call(_e(this),e,t))},ze=function(e){_e(this);var t=Se(arguments[1],1),r=this.length,n=b(e),i=g(n.length),a=0;if(i+t>r)throw G("Wrong length!");for(;a<i;)this[t+a]=n[a++]},je={entries:function(){return ae.call(_e(this))},keys:function(){return ie.call(_e(this))},values:function(){return ne.call(_e(this))}},Ue=function(e,t){return x(e)&&e[Me]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Be=function(e,t){return Ue(e,t=y(t,!0))?f(2,e[t]):F(e,t)},Ve=function(e,t,r){return!(Ue(e,t=y(t,!0))&&x(r)&&M(r,"value"))||M(r,"get")||M(r,"set")||r.configurable||M(r,"writable")&&!r.writable||M(r,"enumerable")&&!r.enumerable?k(e,t,r):(e[t]=r.value,e)};ye||(V.f=Be,B.f=Ve),o(o.S+o.F*!ye,"Object",{getOwnPropertyDescriptor:Be,defineProperty:Ve}),a(function(){de.call({})})&&(de=he=function(){return le.call(this)});var ke=h({},Re);h(ke,je),d(ke,pe,je.values),h(ke,{slice:Pe,set:ze,constructor:function(){},toString:de,toLocaleString:Oe}),De(ke,"buffer","b"),De(ke,"byteOffset","o"),De(ke,"byteLength","l"),De(ke,"length","e"),k(ke,ge,{get:function(){return this[Me]}}),e.exports=function(e,t,r,u){u=!!u;var l=e+(u?"Clamped":"")+"Array",f="get"+e,h="set"+e,p=i[l],v=p||{},y=p&&_(p),M=!p||!s.ABV,b={},T=p&&p.prototype,A=function(e,r){var n=e._d;return n.v[f](r*t+n.o,be)},I=function(e,r,n){var i=e._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[h](r*t+i.o,n,be)},D=function(e,t){k(e,t,{get:function(){return A(this,t)},set:function(e){return I(this,t,e)},enumerable:!0})};M?(p=r(function(e,r,n,i){c(e,p,l,"_d");var a,o,s,u,f=0,h=0;if(x(r)){if(!(r instanceof Q||"ArrayBuffer"==(u=w(r))||"SharedArrayBuffer"==u))return Me in r?Ie(p,r):Le.call(p,r);a=r,h=Se(n,t);var v=r.byteLength;if(void 0===i){if(v%t)throw G("Wrong length!");if((o=v-h)<0)throw G("Wrong length!")}else if((o=g(i)*t)+h>v)throw G("Wrong length!");s=o/t}else s=m(r),o=s*t,a=new Q(o);for(d(e,"_d",{b:a,o:h,l:o,e:s,v:new q(a)});f<s;)D(e,f++)}),T=p.prototype=S(ke),d(T,"constructor",p)):a(function(){p(1)})&&a(function(){new p(-1)})&&P(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=r(function(e,r,n,i){c(e,p,l);var a;return x(r)?r instanceof Q||"ArrayBuffer"==(a=w(r))||"SharedArrayBuffer"==a?void 0!==i?new v(r,Se(n,t),i):void 0!==n?new v(r,Se(n,t)):new v(r):Me in r?Ie(p,r):Le.call(p,r):new v(m(r))}),X(y!==Function.prototype?E(v).concat(E(y)):E(v),function(e){e in p||d(p,e,v[e])}),p.prototype=T,n||(T.constructor=p));var L=T[pe],N=!!L&&("values"==L.name||void 0==L.name),C=je.values;d(p,me,!0),d(T,Me,l),d(T,we,!0),d(T,ve,p),(u?new p(1)[ge]==l:ge in T)||k(T,ge,{get:function(){return l}}),b[l]=p,o(o.G+o.W+o.F*(p!=v),b),o(o.S,l,{BYTES_PER_ELEMENT:t}),o(o.S+o.F*a(function(){v.of.call(p,1)}),l,{from:Le,of:Ne}),"BYTES_PER_ELEMENT"in T||d(T,"BYTES_PER_ELEMENT",t),o(o.P,l,Re),z(l),o(o.P+o.F*Te,l,{set:ze}),o(o.P+o.F*!N,l,je),n||T.toString==de||(T.toString=de),o(o.P+o.F*a(function(){new p(1).slice()}),l,{slice:Pe}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!a(function(){T.toLocaleString.call([1,2])})),l,{toLocaleString:Oe}),R[l]=N?L:C,n||N||d(T,pe,C)}}else e.exports=function(){}},function(e,t,r){function n(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function i(){this.isPolyfilled=!0,this.displayId=c++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new l}function a(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function o(){}function s(){}var u=r(23),l=r(717),c=1e3,f=!1,d=[0,0,.5,1],h=[.5,0,.5,1];i.prototype.getFrameData=function(e){return u.frameDataFromPose(e,this.getPose(),this)},i.prototype.getPose=function(){return this.getImmediatePose()},i.prototype.requestAnimationFrame=function(e){return window.requestAnimationFrame(e)},i.prototype.cancelAnimationFrame=function(e){return window.cancelAnimationFrame(e)},i.prototype.wrapForFullscreen=function(e){if(u.isIOS())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=e;var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},i.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),t.insertBefore(e,this.fullscreenWrapper_),t.removeChild(this.fullscreenWrapper_),e}},i.prototype.requestPresent=function(e){var t=this.isPresenting,r=this;return e instanceof Array||(f||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),f=!0),e=[e]),new Promise(function(n,i){if(!r.capabilities.canPresent)return void i(new Error("VRDisplay is not capable of presenting."));if(0==e.length||e.length>r.capabilities.maxLayers)return void i(new Error("Invalid number of layers."));var a=e[0];if(!a.source)return void n();var o=a.leftBounds||d,s=a.rightBounds||h;if(t){var l=r.layer_;l.source!==a.source&&(l.source=a.source);for(var c=0;c<4;c++)l.leftBounds[c]=o[c],l.rightBounds[c]=s[c];return void n()}if(r.layer_={predistorted:a.predistorted,source:a.source,leftBounds:o.slice(0),rightBounds:s.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var f=r.wrapForFullscreen(r.layer_.source),p=function(){var e=u.getFullscreenElement();r.isPresenting=f===e,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),r.waitingForPresent_=!1,r.beginPresent_(),n()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.wakelock_.release(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()},g=function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.wakelock_.release(),r.waitingForPresent_=!1,r.isPresenting=!1,i(new Error("Unable to present.")))};r.addFullscreenListeners_(f,p,g),u.requestFullscreen(f)?(r.wakelock_.request(),r.waitingForPresent_=!0):(u.isIOS()||u.isWebViewAndroid())&&(r.wakelock_.request(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),n())}r.waitingForPresent_||u.isIOS()||(u.exitFullscreen(),i(new Error("Unable to present.")))})},i.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(r,n){e?(!u.exitFullscreen()&&u.isIOS()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),u.isWebViewAndroid()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),r()):n(new Error("Was not presenting to VRDisplay."))})},i.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},i.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},i.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},i.prototype.addFullscreenListeners_=function(e,t,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=r,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),r&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",r,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",r,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",r,!1))},i.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",r,!1),e.removeEventListener("webkitfullscreenerror",r,!1),document.removeEventListener("mozfullscreenerror",r,!1),e.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},i.prototype.beginPresent_=function(){},i.prototype.endPresent_=function(){},i.prototype.submitFrame=function(e){},i.prototype.getEyeParameters=function(e){return null},o.prototype=new a,s.prototype=new a,e.exports.VRFrameData=n,e.exports.VRDisplay=i,e.exports.VRDevice=a,e.exports.HMDVRDevice=o,e.exports.PositionSensorVRDevice=s},function(e,t,r){const n=r(685),i=n||{name:"unknown",version:"0"};if(i.isIE="ie"===i.name,i.isMobile=!1,i.isIOS=!1,i.isAndroid=!1,i.isAndroidTablet=!1,window.navigator){const a=window.navigator.userAgent;i.isIOS=/iPad|iPhone|iPod/.test(a),i.isAndroid=/Android/i.test(a);const o=/IEMobile|Windows Phone|Lumia/i.test(a),s=/CrOS/i.test(a),u=/Blackberry|webOS/i.test(a);i.isMobile=i.isIOS||i.isAndroid||o||s||u,i.isAndroidTablet=i.isAndroid&&/^(?!.*Mobile).*$/.test(a)}e.exports=i},function(e,t,r){var n=r(107);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LOAD_SCENE="LOAD_SCENE",t.ADD_NODE="ADDNODE",t.ADD_VR_CAMERA="ADD_VR_CAMERA",t.DELETE_NODE="DELETE_NODE",t.LOADING_FILE="LOADING_FILE",t.LOADED_FILE="LOADED_FILE",t.LOADING_FILE_ERROR="LOADING_FILE_ERROR",t.USE_SCENE="USE_SCENE",t.INITIALIZE_SCENE="INITIALIZE_SCENE",t.CLEAR_SCENE="CLEAR_SCENE",t.PRELOADED_SCENE="PRELOADED_SCENE"},function(e,t,r){"use strict";function n(e,t,r){var n=r||(0,a.get)(e,{id:t,evalPlug:"Transform"}),i=(0,a.get)(e,{id:t,evalPlug:"Camera"});if(n&&n.target){var f=(0,a.getWorldTransform)(e,n.target.nodeId),d=i.offset;return f.decompose(u,l,c),d?f.compose(u.add(d),l,c):f}if(t===(0,s.getCamera)(e))return(0,a.getWorldTransform)(e,o.virtualTargetId);var h=(0,a.get)(e,{scene:!0,evalPlug:"Player"}),p=(0,a.get)(e,{id:t,evalPlug:"Properties"})||{orbitTarget:o.virtualTargetId},g=h.overrideNavigation?h.orbitTarget:p.orbitTarget;return(0,a.getWorldTransform)(e,g||o.virtualTargetId)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0),a=r(7),o=r(10),s=r(8),u=new i.Vector3,l=new i.Quaternion,c=new i.Vector3},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(41),i=r(110);e.exports=r(40)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(118),i=r(75),a=r(53),o=r(119),s=r(36),u=r(285),l=Object.getOwnPropertyDescriptor;t.f=r(35)?l:function(e,t){if(e=a(e),t=o(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){var n=r(13),i=r(42),a=r(36),o=r(78)("src"),s=Function.toString,u=(""+s).split("toString");r(113).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,r,s){var l="function"==typeof r;l&&(a(r,"name")||i(r,"name",t)),e[t]!==r&&(l&&(a(r,o)||i(r,o,e[t]?""+e[t]:u.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:i(e,t,r):(delete e[t],i(e,t,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(e,t,r){var n=r(171),i=r(168);e.exports=function(e){return n(i(e))}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(t){return t.id===e||t.name===e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,W.Map)();return(0,W.Map)({time:0,startTime:null,playing:!1,autoplay:!1,frameTime:0,animations:(0,W.List)(),clips:e,timelineAnimationIndex:-1,dynamicsWorld:null,dynamicBodies:{},kinematicBodies:{},bufferClips:(0,W.Map)()})}function o(e){return{type:re,payload:e}}function s(e){return e.getIn(["animation","time"])}function u(e){return function(t){var r=new Date,n=e-t.getIn(["animation","time"]),i=t.getIn(["animation","dynamicsWorld"]);if(t.getIn(["animation","animations"]).size){var a=0;t.getIn(["animation","animations"]).forEach(function(r,i){f(t,n,e,r,i-a)||a++})}else t.getIn(["animation","autoplay"])&&t.dispatch(m());i&&(0,ee.updatePhysics)(t,n,e,i,t.getIn(["animation","dynamicBodies"]),t.getIn(["animation","kinematicBodies"])),t.dispatch({type:te,payload:{time:e,startTime:r}})}}function l(e,t,r,n){var i=t.vs,a=t.ts;if(!a.length)return n;var o=a.findIndex(function(t){return e<=t});return-1===o?i[i.length-1]:0===o?i[0]:r(e-a[o-1],i[o-1],i[o],a[o]-a[o-1])}function c(e,t,r,n){if(t.ts)return l(e,t,r,n);for(var i={},a=(0,U.default)(t),o=0;o<a.length;o++)i[a[o]]=l(e,t[a[o]],r,n[a[o]]);return i}function f(e,t,r,n,i){var a=n.tracks,o=n.first,s=n.iterations,u=n.duration,l=n.easingFn,f=n.easingDuration,d=n.playSpeed,h=n.easingTime,p=n.start,g=(n.set,r),v=o&&r<p+f&&r>p;v?(h+=t*l(r-p,0,1,f),g=p+h):h&&(g=r-f+h);var y=d<0;1!==d&&(g=(g-p)*d+p,y&&(g+=u));for(var M=!1,w=[],x=(new Date,void 0),b=0;b<a.length;b++){x=a[b];var T=x.start+p,S=x.end+p;if(y?g>S:g<T)M=!0;else{var _=x.value,E=x,A=E.tween,I=E.path,D=E.keyframes,L=E.duration,N=E.currentValue,C=E.trackSet,O=x.startValue;null!=O||D||(O=(0,q.get)(e,I),e.dispatch({type:ae,payload:{path:[i,b],attrs:{startValue:O}}}));var R=D?c(g-T,D,A,N):g>S?_:A(g-T,O,_,L),P=C(I,R);P&&w.push(P),(y?g>=T:g<=S)&&(M=!0)}}if(w.length&&e.dispatch((0,q.multi)(w)),M)v&&e.dispatch({type:oe,payload:{index:i,attrs:{easingTime:h}}});else if(s>1)e.dispatch({type:oe,payload:{index:i,attrs:{first:!1,easingTime:0,start:r,iterations:s-1}}});else{if(n.onEnd&&n.onEnd(),i!==e.getIn(["animation","timelineAnimationIndex"]))return e.dispatch({type:se,payload:i}),!1;e.dispatch({type:oe,payload:{index:i,attrs:{start:r}}}),e.dispatch(m())}return!0}function d(e){return e.getIn(["animation","playing"])}function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){t.dispatch({type:ne,payload:e.autoplay}),"undefined"==typeof Ammo||t.getIn(["animation","dynamicsWorld"])||t.dispatch({type:de,payload:(0,ee.initPhysics)(t)}),t.dispatch(u(t.getIn(["animation","time"])))}}function p(){return function(e){if(e.getIn(["animation","playing"])){var t=e.getIn(["animation","startTime"]),r=e.getIn(["animation","time"]),n=t?new Date-t:0;e.dispatch(u(r+n))}}}function g(e){if(e.ts)return e.ts.length?e.ts[e.ts.length-1]:0;for(var t=0,r=void 0,n=(0,U.default)(e),i=0;i<n.length;i++)r=e[n[i]].ts,t=r.length?Math.max(r[r.length-1],t):t;return t}function m(){return{type:ie}}function v(e,t,r){var n=Array.isArray(r.path)?r.path:r.path&&(0,$.find)(e,r.path);if(!n&&r.path&&r.path.id&&(delete r.path.id,n=(0,$.find)(e,r.path)),!n&&!r.set)return console.log("path is not defined for track",r),null;var i=r.start||0,a=r.value,o=r.tween||I(a,r.easing||"linear"),s=r.set||q.set,u=r.keyframes,l=u?g(u):r.duration||0;return{path:n,start:i,end:l+i,value:a,duration:l,tween:o,startValue:0===l?a:r.startValue,keyframes:u,currentValue:n&&(0,q.get)(e,n),trackSet:s}}function y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=n.getIn(["animation","bufferClips",e])||n.getIn(["animation","clips",e]);i&&(n.dispatch(w((0,F.default)({},i.toJS(),t))),r.useTimeline&&n.dispatch({type:le}))}}function M(e,t){return e.getIn(["animation","clips",t])}function w(e){return function(t){var r=t.getIn(["animation","time"]),n=(0,H.default)(),i=e.name||"Animation",a=e.iterations||1,o=e.start||r,s=e.easing||"linear",u=I(1,s),l=e.easingDuration||0,c=void 0!==e.playSpeed?e.playSpeed:1,f=e.tracks.map(function(e){return v(t,r,e)}).filter(function(e){return!!e}),p=f.reduce(function(e,t){return Math.max(e,t.end)},0),g=e.onEnd||null;return t.dispatch({type:ue,payload:{id:n,name:i,start:o,easingTime:0,first:!0,easing:s,easingFn:u,easingDuration:l,iterations:a,tracks:f,onEnd:g,playSpeed:c,duration:p}}),e.autoplay&&!d(t)&&t.dispatch(h({autoplay:!0})),z.default.resolve(n)}}function x(e,t){return function(r){var n=T(r,e);if(-1!==n)return r.dispatch({type:oe,payload:{index:n,attrs:t}})}}function b(e,t){return e.getIn(["animation","animations"]).find(i(t))}function T(e,t){return e.getIn(["animation","animations"]).findIndex(i(t))}function S(e){return function(t){var r=T(t,e);if(-1!==r)return t.dispatch({type:se,payload:r})}}function _(e,t){return{type:ce,payload:{clip:e,id:t}}}function E(e,t){return function(r){var n=e.tracks.map(function(e){var t={};if(e.keyframes){var r=e.keyframes;if(r.ts){t={ts:Float32Array.from(r.ts),vs:Float32Array.from(r.vs)}}else t=(0,U.default)(r).reduce(function(e,t){var n=Float32Array.from(r[t].ts),i=Float32Array.from(r[t].vs);return e[t]={ts:n,vs:i},e},{});return(0,F.default)({},e,{keyframes:t})}return e}),i=(0,F.default)({},e,{tracks:n});return r.dispatch({type:fe,payload:{clip:i,id:t}})}}function A(e){return(0,R.default)(e.getIn(["animation","clips"]).toJS())}function I(e,t){var r=Z.default[t];if(!r)throw new Error("Unknown easing function: "+t);if("object"!==(void 0===e?"undefined":(0,C.default)(e)))return r;var n=(0,U.default)(e);return function(e,t,i,a){for(var o={},s=0;s<n.length;s++){var u=n[s];o[u]=r(e,t[u],i[u],a)}return o}}function D(e){var t=e.getIn(["animation","timelineAnimationIndex"]);return t<0?null:e.getIn(["animation","animations",t])}Object.defineProperty(t,"__esModule",{value:!0});var L,N=r(38),C=n(N),O=r(130),R=n(O),P=r(39),z=n(P),j=r(4),U=n(j),B=r(19),V=n(B),k=r(2),F=n(k);t.setFrameTime=o,t.getTime=s,t.setTime=u,t.isPlaying=d,t.startPlaying=h,t.incrementTime=p,t.stopPlaying=m,t.queueClip=y,t.findClip=M,t.queueAnimation=w,t.updateAnimationAttrs=x,t.findAnimation=b,t.findAnimationIndex=T,t.removeAnimation=S,t.addClip=_,t.makeReducedClip=E,t.getClips=A,t.getTimelineAnimation=D;var G=r(79),H=n(G),W=r(32),Y=r(46),Q=n(Y),q=r(10),X=r(353),Z=n(X),K=r(58),J=r(128),$=r(7),ee=r(350),te="SET_TIME",re="SET_FRAME_TIME",ne="START_PLAYING",ie="STOP_PLAYING",ae="UPDATE_TRACK",oe="UPDATE_ANIMATION",se="REMOVE_ANIMATION",ue="QUEUE_ANIMATION",le="QUEUE_TIMELINE_ANIMATION",ce="ADD_CLIP",fe="ADD_BUFFER_CLIP",de="INIT_PHYSICS",he=(0,Q.default)(a(),(L={},(0,V.default)(L,J.ActionTypes.INIT,function(e){return a()}),(0,V.default)(L,te,function(e,t){var r=t.time,n=t.startTime;return e.set("time",r).set("startTime",n)}),(0,V.default)(L,re,function(e,t){var r=e.get("frameTime");return e.set("frameTime",r+.1*(t-r))}),(0,V.default)(L,ne,function(e,t){return e.merge({playing:!0,autoplay:!!t})}),(0,V.default)(L,ie,function(e){return e.set("playing",!1)}),(0,V.default)(L,ae,function(e,t){var r=t.path,n=t.attrs,i=e.getIn(["animations",r[0]]),a=i&&i.tracks[r[1]];return a&&(0,F.default)(a,n),e}),(0,V.default)(L,oe,function(e,t){var r=t.index,n=t.attrs,i=e.getIn(["animations",r]);return i&&(0,F.default)(i,n),e}),(0,V.default)(L,se,function(e,t){var r=e;return t===e.get("timelineAnimationIndex")&&(r=r.set("timelineAnimationIndex",-1)),r.deleteIn(["animations",t])}),(0,V.default)(L,ue,function(e,t){return e.updateIn(["animations"],(0,W.List)(),function(e){return e.push(t)})}),(0,V.default)(L,le,function(e,t){return e.set("timelineAnimationIndex",e.get("animations").size-1)}),(0,V.default)(L,ce,function(e,t){var r=t.clip,n=t.id;return e.setIn(["clips",n],(0,W.Map)(r).set("id",n))}),(0,V.default)(L,fe,function(e,t){var r=t.clip,n=t.id;return e.setIn(["bufferClips",n],(0,W.Map)(r).set("id",n))}),(0,V.default)(L,K.LOAD_SCENE,function(e,t){var r=t.clips,n=t.bufferClips;return r?e.mergeIn(["clips"],r).mergeIn(["bufferClips"],n):e}),(0,V.default)(L,K.CLEAR_SCENE,function(e){return a()}),(0,V.default)(L,de,function(e,t){var r=t.dynamicsWorld,n=t.dynamicBodies,i=t.kinematicBodies;return e.set("dynamicsWorld",r).set("dynamicBodies",n).set("kinematicBodies",i)}),L)),pe={reducer:he,actions:{setTime:u,startPlaying:h,stopPlaying:m,removeAnimation:S,queueAnimation:w,addClip:_,queueClip:y,findClip:M,updateAnimationAttrs:x},selectors:{findAnimation:b,getTime:s,getClips:A,getTimelineAnimation:D,isPlaying:d}};t.default=pe},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){c.default.call(this,t||Float32Array),this.elementSize=r||e.InstanceScalarSize,this.type=e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(48),o=n(a),s=r(2),u=n(s);t.default=i;var l=r(226),c=n(l),f=r(3),d=n(f);i.prototype=(0,u.default)((0,o.default)(c.default.prototype),{constructor:i,toObjectArrayViewAndClear:function(){return new d.default(this.type,null,this.toArrayAndClear())},getAt:function(e,t){var r=t||new this.type,n=e>>this.intraBlockIndexBits,i=e&this.intraBlockIndexMask;return r.fromArray(this.blocks[n],i*this.elementSize)},setAt:function(e,t){var r=e>>this.intraBlockIndexBits,n=e&this.intraBlockIndexMask;t.toArray(this.blocks[r],n*this.elementSize)},push:function(e){var t=this.length++,r=this.lastBlock,n=t&this.intraBlockIndexMask;if(0===n){var i=this.intraBlockIndexMask+1;r=new this.arrayType(i*this.elementSize),this.lastBlock=r,this.blocks.push(r)}return e.toArray(r,n*this.elementSize),t+1}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e.length)return[];for(var t=e.split(","),r=void 0,n=void 0,i=void 0,a=new u.default,s=0;s<t.length;s++){if(i=t[s],-1!==i.indexOf("-")){var l=i.split("-"),c=(0,o.default)(l,2);r=c[0],n=c[1],r=Number(r),n=Number(n)}else r=Number(i),n=r;a.add(r,n)}return a.expanded()}Object.defineProperty(t,"__esModule",{value:!0});var a=r(49),o=n(a);t.default=i;var s=r(416),u=n(s)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){this.indices=e,this.meaning=t,this.mapId=r||u.default.IdPositions}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(34),o=n(a),s=r(31),u=n(s),l=r(228),c=n(l),f=r(155),d=n(f),h=r(124),p=n(h);i.Faces=0,i.Vertices=1,i.Edges=2,i.prototype={constructor:i,getIndices:function(e,t,r){var n=this.indices,a=i.ConversionTable,o=a[this.meaning][t];return null!==o&&(n=o.call(null,e,n,this.mapId,r||u.default.IdPositions)),n}},i.newRandomSelection=function(e,t,r,n,a){for(var o=i.getNumElements(r,n,a),s=t*o|0,u=new d.default(o).fill(0,s),l=e,c=0,f=o-1;c<f;++c)l=22695477*l+1>>>0,u.swap(c,c+(1073741823&l)%(o-c));return new i(u.toIndexArray(),n,a)},i.getIndices=function(e,t,r,n){var a=u.default.IdPositions,o=n;return"string"==typeof r?a=r:o=r,o?o.getIndices(e,t,a):p.default.identityForReading(i.getNumElements(e,t,a))},i.getNumElements=function(e,t,r){switch(t){case i.Faces:return e.getNumFaces();case i.Vertices:return u.default.resolveMap(e,r||u.default.IdPositions).values.length;case i.Edges:return u.default.resolveMap(e,r||u.default.IdPositions).edgeVertexAdjacency.getNumEdges();default:throw Error("Bad meaning argument!")}},i.convFacesToVertices=function(e,t,r,n){for(var i=u.default.resolveMap(e,n),a=new d.default(i.values.length),o=e.faceRangeOffsets,s=i.faceValueIndices,l=0,c=t.length;l!==c;++l){var f=t[l],h=o[f],p=o[f+1];a.includeFromArray(s,h,p)}return a.toIndexArray()},i.convFacesToEdges=function(e,t,r,n){for(var i=u.default.resolveMap(e,n),a=new d.default(i.edgeVertexAdjacency.getNumEdges()),o=e.faceRangeOffsets,s=i.faceValueIndices,l=0,c=t.length;l!==c;++l){var f=t[l],h=o[f],p=o[f+1];if(h!==p)for(var g=s[p-1],m=h;m!==p;++m){var v=s[m];a.include(i.findEdgeId(g,v)),g=v}}return a.toIndexArray()},i.convVerticesToFaces=function(e,t,r,n){for(var i=new c.default(Uint32Array),a=e.faceRangeOffsets,s=u.default.resolveMap(e,r).faceValueIndices,l=e.getNumFaces(),f=0;f!==l;++f){for(var d=a[f],h=a[f+1],p=!0,g=d;g!==h&&p;++g)p=-1<o.default.binarySearch(t,s[g]);p&&i.push(f)}return i.toArrayAndClear()},i.convVerticesToVertices=function(e,t,r,n){if(r===n)return t;for(var i=u.default.resolveMap(e,n),a=new d.default(i.values.length),o=i.faceValueIndices,s=u.default.resolveMap(e,r).updateInverseIndex(),l=s.valueFaceIndexOffsets,c=s.valueFaceIndices,f=0,h=t.length;f!==h;++f)for(var p=t[f],g=l[p],m=l[p+1],v=g;v!==m;++v){var y=s.findValueIndexOffset(c[v],p);a.include(o[y])}return a.toIndexArray()},i.convVerticesToEdges=function(e,t,r,n){for(var i=u.default.resolveMap(e,n),a=new d.default(i.edgeVertexAdjacency.getNumEdges()),s=e.faceRangeOffsets,l=u.default.resolveMap(e,r).faceValueIndices,c=e.getNumFaces(),f=0;f!==c;++f){var h=s[f],p=s[f+1];if(h!==p){for(var g=l[--p],m=-1<o.default.binarySearch(t,g),v=g,y=m,M=h;M!==p;++M){var w=l[M],x=-1<o.default.binarySearch(t,w);y&&x&&a.include(i.findEdgeId(v,w)),v=w,y=x}y&&m&&a.include(i.findEdgeId(v,g))}}return a.toIndexArray()},i.convEdgesToFaces=function(e,t,r,n){var a=i.convEdgesToVertices(e,t,r,r);return i.convVerticesToFaces(e,a,r,"")},i.convEdgesToVertices=function(e,t,r,n){var a=i.convEdgesToVerticesOfSameMap(e,t,r);return i.convVerticesToVertices(e,a,r,n)},i.convEdgesToEdges=function(e,t,r,n){if(r===n)return t;i.convEdgesToVerticesOfSameMap(e,t,r);return i.convVerticesToEdges(e,t,r,n)},i.convEdgesToVerticesOfSameMap=function(e,t,r){for(var n=u.default.resolveMap(e,r).updateEdgeMap(),i=n.edgePivotRangeOffsets,a=n.edgeHighVertexIndices,s=new d.default(n.values.length),l=0,c=t.length;l!==c;++l){var f=t[l],h=a[f],p=o.default.binarySearch(i,f+1);p<0&&(p=~p);var g=p-1;s.include(h),s.include(g)}return s.toIndexArray()},i.ConversionTable=[[null,i.convFacesToVertices,i.convFacesToEdges],[i.convVerticesToFaces,i.convVerticesToVertices,i.convVerticesToEdges],[i.convEdgesToFaces,i.convEdgesToVertices,i.convEdgesToEdges]]},function(e,t,r){"use strict";function n(e,t,r){o.setFromMatrixPosition(e),a.setFromMatrixPosition(t),u.makeTranslation(o.x,o.y,o.z),u.lookAt(o,a,r||s),u.decompose(l,f,c),e.decompose(o,h,d),e.compose(o,f,d)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0),a=new i.Vector3,o=new i.Vector3,s=new i.Vector3(0,1,1),u=new i.Matrix4,l=new i.Vector3,c=new i.Vector3,f=new i.Quaternion,d=new i.Vector3,h=new i.Quaternion},function(e,t,r){var n=r(137)("meta"),i=r(27),a=r(61),o=r(41).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(60)(function(){return u(Object.preventExtensions({}))}),c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},d=function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},h=function(e){return l&&p.NEED&&u(e)&&!a(e,n)&&c(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(74);e.exports=function(e){return Object(n(e))}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){function n(e,t,r){var n=t&&r||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[n+s]=o[s];return t||a(o)}var i=r(700),a=r(699);e.exports=n},function(e,t,r){var n=r(57),i=r(267),a=r(265),o=r(44),s=r(136),u=r(183),l={},c={},t=e.exports=function(e,t,r,f,d){var h,p,g,m,v=d?function(){return e}:u(e),y=n(r,f,t?2:1),M=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(h=s(e.length);h>M;M++)if((m=t?y(o(p=e[M])[0],p[1]):y(e[M]))===l||m===c)return m}else for(g=v.call(e);!(p=g.next()).done;)if((m=i(g,y,p.value,t))===l||m===c)return m};t.BREAK=l,t.RETURN=c},function(e,t){e.exports={}},function(e,t,r){var n=r(274),i=r(170);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(168);e.exports=function(e){return Object(n(e))}},function(e,t,r){"use strict";var n=r(550)(!0);r(172)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){r(555);for(var n=r(29),i=r(62),a=r(81),o=r(25)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=n[l],f=c&&c.prototype;f&&!f[o]&&i(f,o,l),a[l]=a.Array}},function(e,t,r){var n=r(16)("unscopables"),i=Array.prototype;void 0==i[n]&&r(42)(i,n,{}),e.exports=function(e){i[n][e]=!0}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports={}},function(e,t){e.exports=!1},function(e,t,r){var n=r(296),i=r(189);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(64);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},function(e,t,r){var n=r(26).f,i=r(36),a=r(16)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){var n=r(76),i=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(14);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t){var r=window.MathUtil||{};r.degToRad=Math.PI/180,r.radToDeg=180/Math.PI,r.Vector2=function(e,t){this.x=e||0,this.y=t||0},r.Vector2.prototype={constructor:r.Vector2,set:function(e,t){return this.x=e,this.y=t,this},copy:function(e){return this.x=e.x,this.y=e.y,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},r.Vector3=function(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0},r.Vector3.prototype={constructor:r.Vector3,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*n-o*r,l=s*r+o*t-i*n,c=s*n+i*r-a*t,f=-i*t-a*r-o*n;return this.x=u*s+f*-i+l*-o-c*-a,this.y=l*s+f*-a+c*-i-u*-o,this.z=c*s+f*-o+u*-a-l*-i,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this}},r.Quaternion=function(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1},r.Quaternion.prototype={constructor:r.Quaternion,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),a=Math.cos(r/2),o=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(r/2);return this.x=o*i*a+n*s*u,this.y=n*s*a-o*i*u,this.z=n*i*u+o*s*a,this.w=n*i*a-o*s*u,this},setFromEulerYXZ:function(e,t,r){var n=Math.cos(e/2),i=Math.cos(t/2),a=Math.cos(r/2),o=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(r/2);return this.x=o*i*a+n*s*u,this.y=n*s*a-o*i*u,this.z=n*i*u-o*s*a,this.w=n*i*a+o*s*u,this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(r),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var r=e.x,n=e.y,i=e.z,a=e.w,o=t.x,s=t.y,u=t.z,l=t.w;return this.x=r*l+a*o+n*u-i*s,this.y=n*l+a*s+i*o-r*u,this.z=i*l+a*u+r*s-n*o,this.w=a*l-r*o-n*s-i*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this.x,n=this.y,i=this.z,a=this.w,o=a*e.w+r*e.x+n*e.y+i*e.z;if(o<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,o=-o):this.copy(e),o>=1)return this.w=a,this.x=r,this.y=n,this.z=i,this;var s=Math.acos(o),u=Math.sqrt(1-o*o);if(Math.abs(u)<.001)return this.w=.5*(a+this.w),this.x=.5*(r+this.x),this.y=.5*(n+this.y),this.z=.5*(i+this.z),this;var l=Math.sin((1-t)*s)/u,c=Math.sin(t*s)/u;return this.w=a*l+this.w*c,this.x=r*l+this.x*c,this.y=n*l+this.y*c,this.z=i*l+this.z*c,this},setFromUnitVectors:function(){var e,t;return function(n,i){return void 0===e&&(e=new r.Vector3),t=n.dot(i)+1,t<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,i),this.x=e.x,this.y=e.y,this.z=e.z,this.w=t,this.normalize(),this}}()},e.exports=r},function(e,t,r){"use strict";t.__esModule=!0;var n=r(2),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(t){return t.id===e||t.name===e}}function a(e){return function(t){var r=e.skipModels,n=e.form,i=e.preset,a=e.el,s=e.panel,u=e.productTour,l=e.configuration,c=e.configurations,f=e.id||(0,nt.getSceneId)(t),d=n&&("object"===(void 0===n?"undefined":(0,Fe.default)(n))?I(n,{attributes:z(t,{id:f})}):k(t,n,{id:f}));return t.dispatch({type:"INIT_CONFIGURATOR",payload:{id:f,skipModels:void 0===r||r,form:"object"===(void 0===n?"undefined":(0,Fe.default)(n))?d:n,el:a,panel:s,productTour:u}}),i&&t.dispatch(M(i,{id:f})),c&&t.dispatch(Le(c,{id:f})),d&&t.dispatch(o({id:f,form:d})),l&&t.dispatch(w(l,{id:f})),t.dispatch(q({id:f}))}}function o(e){return function(t){var r=e.id||(0,nt.getSceneId)(t),n=ne(t,{id:r,all:!0}),i=e.form&&("object"===(0,Fe.default)(e.form)?I(e.form,{attributes:z(t,{id:r})}):k(t,e.form,{id:r}));if(!i)return Ve.default.resolve(!1);i.meta&&"all"!==i.meta.displayAs&&(i.steps||[]).forEach(function(e){var n=e.formId;n&&t.dispatch(o({id:r,form:n}))});var a=i.fields.reduce(function(e,t){return void 0===n[t.attribute.name]&&void 0!==t.attribute.defaultValue&&(e[t.attribute.name]=t.attribute.defaultValue),e},{});return t.dispatch(w(a,{id:r})),t.dispatch(q({id:r}))}}function s(e,t,r,n){var i=[];if("string"==typeof t)i=(0,Je.filter)(e,(0,it.buildQueryObject)(t,{from:r,skipModels:n}));else if(Array.isArray(t)){var a=t.map(function(t){return""===t?[]:(0,it.isUuid)(t)?[(0,Je.find)(e,{id:t})]:(0,Je.filter)(e,(0,it.buildQueryObject)(t,{from:r,skipModels:n}))});a.forEach(function(e){return i=i.concat(e)})}return i=i.filter(function(e){return!!e})}function u(e,t){var r=e.tags,n=e.value,i=t.id,a=t.skipModels;return function(e){var t=s(e,r,i,a);return Ve.default.all(t.map(function(t){return e.dispatch((0,Je.set)({id:t,plug:"Properties",property:"visible",skipModels:a},Boolean(n)))}))}}function l(e,t){var r=e.tags,n=e.value,i=t.id;return function(e){var t=(0,it.isUuid)(r)?(0,Je.find)(e,{id:r}):(0,Je.find)(e,{from:i,name:r,type:"Annotation"});return t?e.dispatch(n?(0,et.openAnnotation)(t):(0,et.closeAnnotation)(t)):Ve.default.resolve(!0)}}function c(e,t){var r=e.tags,n=e.value,i=void 0===n?500:n,a=t.id;return function(e){var t=(0,it.isUuid)(r)?(0,Je.find)(e,{id:r}):(0,Je.find)(e,{from:a,name:r,type:"Camera"});return t?e.dispatch((0,tt.animateCameraTo)(t,Number(i))):Ve.default.resolve(!0)}}function f(e,t){var r=e.tags,n=e.value,i=t.id,a=t.skipModels;return function(e){var t=(0,it.isUuid)(n)?n:(0,Je.find)(e,{from:i,type:"Material",name:n});if(!t)return Ve.default.resolve(!0);var o=s(e,r,i,a);return Ve.default.all(o.map(function(r){return e.dispatch((0,Je.set)({id:r,plug:"Material",property:"reference"},t))}))}}function d(e,t){var r=e.tags;t.id;return function(e){var t=(0,rt.getClips)(e),n=(Array.isArray(r)?r:[r]).map(function(e){return t.find(function(t){return t.name===e})}).filter(function(e){return!!e});return Ve.default.all(n.map(function(t){return e.dispatch((0,rt.queueClip)(t.id,{autoplay:!0}))}))}}function h(e,t){var r=e.tags,n=e.value,i=t.id,a=t.skipModels;return function(e){if(r&&3===r.split("[").length){var t=(0,it.buildQueryObject)(r,{from:i,skipModels:a});e.dispatch((0,Je.setAll)(t,n))}}}function p(e,t){var r=e.tags,n=e.value;return w((0,He.default)({},r,n),t)}function g(e,t){var r=e.tags,n=e.value;return ve({hidden:(0,He.default)({},r,!n)},t)}function m(e,t){var r=e.tags,n=e.value;return function(e){var i=j(e,r,t);if("object"!==(void 0===n?"undefined":(0,Fe.default)(n))||!i)return Ve.default.resolve(!0);var a=ne(e,{all:!0})[i.name];if(a&&!n[a]){var o=i.values.find(function(e){return n[e]});o&&e.dispatch(w((0,He.default)({},r,o)))}return e.dispatch(ve({optionsVisible:(0,He.default)({},r,n)}))}}function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=j(n,e,r);return i?n.dispatch(ve({hidden:(0,He.default)({},i.id,!t)},r)):Ve.default.resolve(!1)}}function y(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,Ye.default)({},n,{all:!0}),a=void 0==r?ne(e,i)[t.name]:r;if("Image"===t.type){if(!a||!a.id)return a;var o=(0,$e.hasFile)(e,a.assetId);return o||(0,nt.isAssetLoading)(e,a.assetId)||e.dispatch((0,$e.importImage)(a.assetId,{imageNodeId:a.id})).then(function(n){e.dispatch(w((0,He.default)({},t.name,r)))}),o?a.id:null}return t.prop.set(a)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=W(r,e,t);z(r,t);if(!n)return Ve.default.resolve(!1);var i=n.fields.reduce(function(e,n){return e[j(r,n.attributeId,t).name]=n.value,e},{});r.dispatch(w(i,t))}}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r),a=z(r,{id:n}),o=F(r),s=!o||o.skipModels,u=t.form,l=r.getIn(["configuration","changeListeners"]);return Ve.default.all((0,Ue.default)(e).map(function(t){var o=a.find(i(t));if(!o)return Ve.default.reject(new Error("Attribute: "+t+" does not exist"));var c=y(r,o,e[t],{id:n}),f=u&&u.fields.find(function(e){return e.attributeId===o.id});r.dispatch({type:pt,payload:{id:n,attribute:o,value:"Image"===o.type?e[t]:c}}),r.createEvent("configurationChange",o,c,{field:f,id:n});var d=(o.actions||[]).concat(o.valueActions&&o.valueActions[c]||[]);return Ve.default.all(d.map(function(e){var t=e.action,i=e.tags,a=e.value,u=e.variable,l=u&&(o.id===o?o:j(r,u,{id:n})),c=l?y(r,l,null,{id:n}):a,f=Ct[t];return f&&""!==i&&r.dispatch(f({tags:i,value:c},{id:n,skipModels:s}))})).then(function(){l.forEach(function(e){return e(o,c,{field:f,id:n})})})}))}}function x(e){return{type:wt,payload:e}}function b(e){return e.getIn(["configuration","configsState"]).toJS()}function T(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w((0,He.default)({},e,t),r)}function S(e,t){return console.log("DEPRECATED, use `executeAttribute`"),w((0,He.default)({},e,t))}function _(e){return{Number:0,Boolean:!1,Color:{a:1,b:0,g:0,r:0}}[e]}function E(e){var t=("Option"===e.type?"Options":e.type)||"Options",r={id:e.id||(0,qe.default)(),name:e.name,type:t},n="";"Options"===t?(r.values=(e.values||[]).map(function(e){return e.name}),n=r.values[0],r.valueActions={},(e.values||[]).forEach(function(e){r.valueActions[e.name]=e.actions||[]})):"Boolean"===t&&(r.values=[!0,!1],r.valueActions=e.valueActions||{true:[],false:[]}),n=n||_(t),r.defaultValue=void 0===e.value?n:e.value,r.actions=e.actions||[];var i=st.default[t];if(!i)throw new Error("Invalid attribute type for configuration: "+t);return r.prop=i(r),r}function A(e){var t=e.type,r={id:e.id||(0,qe.default)(),name:e.name,type:t,metadata:e.metadata},n="";"Options"===t?(r.values=e.values||[],n=r.values[0],r.valueActions=e.valueActions||{},(e.values||[]).forEach(function(e){r.valueActions[e.name]=e.actions||[]})):"Boolean"===t?(r.values=[!0,!1],r.valueActions=e.valueActions||{true:[],false:[]}):"Number"===t&&(r.minValue=e.minValue||0,r.maxValue=e.maxValue||100,r.step=e.step||1),n=n||_(t),r.defaultValue=void 0===e.defaultValue?n:e.defaultValue,r.actions=e.actions||[];var i=st.default[t];if(!i)throw new Error("Invalid attribute type for configuration: "+t);return r.prop=i(r),r}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.meta||{},n={id:e.id||(0,qe.default)(),name:e.name||"Form1",type:"Form",meta:{displayAs:r.displayAs||"all"}},a={title:"Step",description:"",formId:""};return n.steps=(e.steps||[]).map(function(t){return t.formId===e.id?a:{title:t.title||a.title,description:t.description||a.description,formId:t.formId||a.formId}}),n.fields=(e.fields||e.values||[]).map(function(e){var r=e.bom,n=e.displayAs,a=e.optionId,o=e.attributeId,s=e.metadata,u={bom:r,displayAs:n,attributeId:o,metadata:s};return a&&(u.attributeId=a),t.attributes&&(u.attribute=t.attributes.find(i(u.attributeId))),u}),n}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.fields;return{id:e.id||(0,qe.default)(),name:t||"",fields:r||[]}}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.title,r=e.handle,n=e.price,i=e.options,a=e.variants;return{title:t||r,handle:r,price:n||0,options:i||[],variants:a&&a.length?a:[{}]}}function N(){return{attributes:[],forms:[],presets:[],script:""}}function C(e,t){var r=(0,Je.get)(e,{id:t,plug:"Player",property:"configurator"});try{r=JSON.parse(r)}catch(e){r=N()}return r}function O(e){var t=e.id,r=e.config,n=e.sceneId;return function(e){return e.dispatch({type:_t,payload:{id:t,config:r,sceneId:n}})}}function R(e){e&&Array.isArray(e)&&(e={options:e}),e.options||e.attributes||(e=N());var t=function(e){return"Display"!==e.type&&"Preset"!==e.type&&"ProductTour"!==e.type},r=e.attributes?e.attributes.map(A):e.options.filter(t).map(E),n=(e.forms||e.options.filter(function(e){return"Display"===e.type})).map(I),i=e.presets||[],a=e.script||"";return(0,Xe.Map)({attributes:r,forms:n,presets:i,script:a})}function P(e){return e.getIn(["configuration","configs"])}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||(0,nt.getSceneId)(e);return e.getIn(["configuration","configs",r,"attributes"])||[]}function j(e,t){return z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).find(i(t))}function U(e,t){return z(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).filter(function(e){return e.type===t})}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||(0,nt.getSceneId)(e),n=e.getIn(["configuration","configs",r,"forms"])||[];if(t.all)return n;var i={};return n.forEach(function(e){"all"!==(e.meta||{}).displayAs&&e.steps&&e.steps.forEach(function(e){return i[e.formId]=!0})}),n.filter(function(e){return!i[e.id]})}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||(0,nt.getSceneId)(e),n=e.getIn(["configuration","formState",r]);return n?n.toJS():{}}function k(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.id||(0,nt.getSceneId)(e),a=t&&B(e,{id:n,all:!0}).find(i(t)),o=z(e,{id:n});return(a?a.fields:[]).forEach(function(e){e.attribute=o.find(i(e.attributeId))}),a||!0!==t||(a={id:(0,qe.default)(),name:"All",type:"Form",fields:o.map(function(e){return{name:e.name,attributeId:e.id,attribute:e}}),steps:[],meta:{displayAs:"all"}}),a&&(a.nodeId=n),a}function F(e,t){var r=t||(0,nt.getSceneId)(e),n=e.getIn(["configuration","configurators",r]);return n&&n.toJS()}function G(e){return(0,ze.default)(e.getIn(["configuration","configurators"]).toJS())}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||(0,nt.getSceneId)(e);return e.getIn(["configuration","configs",r,"presets"])||[]}function W(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.id||(0,nt.getSceneId)(e);return t&&H(e,{id:n}).find(i(t))}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||(0,nt.getSceneId)(e);return e.getIn(["configuration","configs",r,"script"])||""}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||(0,nt.getSceneId)(e);return e.getIn(["configuration","configsState",r,"scriptError"])}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var r=e.id||(0,nt.getSceneId)(t),n=Y(t,{id:r});return n?t.dispatch(Z(n,{id:r})):Ve.default.resolve(!0)}}function X(e,t){return e.getIn(["configuration","configsState",t,"scriptActivated"])}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r),i=t.reinitialize;if(X(r,n)&&!i)return Ve.default.resolve(!0);r.dispatch(K(n)),i&&(r.api.off("configurationChange"),r.dispatch({type:Dt}));try{var a=new Function("api",e||"");return Ve.default.resolve(a(r.api)).then(function(){return r.dispatch({type:Et,payload:{id:n,scriptError:!1}})})}catch(e){return r.dispatch({type:Et,payload:{id:n,scriptError:e}})}}}function K(e){return{type:At,payload:e}}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r);return r.dispatch({type:ht,payload:{id:n,script:e,key:"script"}}),r.dispatch(Z(e,{id:n,reinitialize:!0})),Ve.default.resolve(e)}}function $(e){var t=e.getIn(["configuration","productTour"]);if(!1===t)return!1;var r=t&&j(e,t);return r&&"Options"===r.type?r:null}function ee(e){return e.getIn(["configuration","products"]).toList().toArray()}function te(e,t){return e.getIn(["configuration","products",t])}function re(e){return e.getIn(["configuration","externalEl"])}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id||(0,nt.getSceneId)(e),n=e.getIn(["configuration","configuration",r]);if(t.all||!n)return n?n.toJS():{};var i=e.getIn(["configuration","formState",r,"hidden"])||{},a=(0,Ue.default)(i).reduce(function(r,n){return i[n]&&(r[j(e,n,t).name]=!0),r},{});return n.filter(function(e,t){return!a[t]}).toJS()}function ie(e){var t=(0,nt.getSceneId)(e),r=e.getIn(["configuration","configsState"]).toJS(),n=e.getIn(["configuration","configuration"]).toJS(),i={sceneId:t,publishedHash:(0,nt.getFetchedHash)(e,t),configuration:n[t],models:[]};return(0,Ue.default)(n).forEach(function(a){if(a!==t){var o=r[a].sceneId,s=(0,Je.get)(e,{id:a,plug:"Transform",operatorIndex:0}),u=(0,ut.lookupOperator)("Transform","Transform");i.models.push({sceneId:o,publishedHash:(0,nt.getFetchedHash)(e,o),transform:u.export(s,{onlyChanged:!0}),configuration:n[a],models:[]})}}),i}function ae(e){return{type:gt,payload:e}}function oe(e){return e.getIn(["configuration","history"]).size>0}function se(){return{type:mt}}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r),i=A(e);return r.dispatch({type:ft,payload:{id:n,attrs:i,key:"attributes"}}),Ve.default.resolve(i.id)}}function le(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=j(n,e,r),a=st.default[i.type];t.prop=a(t);var o=r.id||(0,nt.getSceneId)(n);return n.dispatch({type:ht,payload:{attrId:e,id:o,attrs:t,key:"attributes"}})}}function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r);return r.dispatch({type:dt,payload:{id:n,attrId:e,key:"attributes"}})}}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r),i=I(e);return r.dispatch({type:ft,payload:{id:n,attrs:i,key:"forms"}}),Ve.default.resolve(i.id)}}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r);return r.dispatch({type:dt,payload:{id:n,attrId:e,key:"forms"}})}}function he(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=r.id||(0,nt.getSceneId)(n);return n.dispatch({type:ht,payload:{id:i,attrId:e,attrs:t,key:"forms"}})}}function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r),i=D(e);return r.dispatch({type:ft,payload:{id:n,attrs:i,key:"presets"}}),Ve.default.resolve(i.id)}}function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r);return r.dispatch({type:dt,payload:{id:n,attrId:e,key:"presets"}})}}function me(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n){var i=r.id||(0,nt.getSceneId)(n);return n.dispatch({type:ht,payload:{id:i,attrId:e,attrs:t,key:"presets"}})}}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r);return r.dispatch({type:xt,payload:{attrs:e,id:n}})}}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.handle?{type:bt,payload:L(e)}:Ve.default.reject("Required product handle")}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:St,payload:L(e)}}function we(e){return{type:Tt,payload:e}}function xe(e){var t=e.getIn(["configuration","savingSceneId"]);if(!t)return!0;var r=e.getIn(["configuration","configs",t]),n=e.getIn(["configuration","savedConfig"]);return(0,Xe.is)(r,n)}function be(e){return e.getIn(["configuration","saving"])}function Te(e){return!be(e)&&!xe(e)&&e.getIn(["configuration","savingSceneId"])}function Se(e){var t=e.toJS();return delete t.scriptInitialized,delete t.scriptError,t.attributes=t.attributes.map(function(e){var t=(0,Ye.default)({},e);return delete t.prop,t}),t.forms=t.forms.map(function(e){return e.fields=e.fields.map(function(e){return e.attribute=void 0,e}),e}),JSON.parse((0,Re.default)(t))}function _e(){return function(e){var t=Te(e);if(t){var r=e.getIn(["configuration","numSaveErrors"]);e.dispatch({type:vt}),setTimeout(function(){var r=e.getIn(["configuration","configs",t]),n=Se(r);e.callApi({types:[vt,yt,Mt],url:"https://clara.io/api/scenes/"+t+"/configuration",method:"POST",payload:r,fireAndForget:!0,body:{configuration:n}})},1e3*r*r)}}}function Ee(e,t){function r(t){var r=e.find(function(e){return e.handle===t});return r||e.push(L({handle:t})),r||e[e.length-1]}function n(e,r){var n=t[t.length-1];return n&&n.handle===e.handle||(t.push({handle:e.handle,quantity:r,options:[],product:e}),n=t[t.length-1]),n.properties||(n.properties={}),n.variant||(n.variant=e.variants[0]),n.options||(n.options=[]),n}return{"set-product":function(e){var n=e.tags;if(n){var i=e.value,a=r(n);t.push({handle:n,quantity:i,variant:a.variants[0],product:a,properties:{}})}},"select-variant":function(e,t,i){var a=e.tags;if(a){var o=r(a),s=n(o,1),u=o.options.findIndex(function(e){return e.name===t.name});u>=0&&(s.options[u]=i);var l=o.variants.find(function(e){for(var t=!0,r=0;r<o.options.length;r++)t=t&&e.options[r]===s.options[r];return t});s.variant=l}},"select-quantity":function(e,t,i){var a=e.tags;if(a){var o=r(a),s=n(o,1);"Boolean"===t.type?s.quantity=i?1:0:"Number"===t.type?s.quantity=Number(i):s.quantity=Number(e.value)}}}}function Ae(e,t){var r=t.id,n=F(e,r),i=n&&k(e,n.form,{id:r}),a=[];return i&&(a=i.fields,"all"!==i.meta.displayAs&&i.steps.forEach(function(t){var n=k(e,t.formId,{id:r});n&&(a=a.concat(n.fields))})),a}function Ie(e){return e.items.reduce(function(e,t){var r=t.variant,n=t.quantity,i=t.product,a=t.price,o=void 0;return o=void 0!==a?a:r&&void 0!==r.price?r.price:i.price,"number"==typeof o?e+o*n:e},0)}function De(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t.id||(0,nt.getSceneId)(e),G(e)),n=ee(e),i=r.reduce(function(t,r){var n=r.id;return t[n]=Ae(e,{id:n}),t},{}),a={products:n,items:[]},o=Ee(n,a.items);return r.forEach(function(t){var r=t.id,n=ne(e,{id:r,all:!0});i[r].forEach(function(e){var t=e.attribute,r=t.name,i=n[r];(t.actions||[]).concat(t.valueActions&&t.valueActions[i]||[]).forEach(function(e){o[e.action]&&o[e.action](e,t,i)});var s=a.items[a.items.length-1];s&&(s.properties[r]=i)})}),a.price=Ie(a),a}function Le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){var n=t.id||(0,nt.getSceneId)(r),i=e.sceneId,o=e.publishedHash,s=e.models,u=e.configuration;if(n&&n!==i)throw new Error("Invalid base scene for configurations: "+i+", is "+n);return(n?Ve.default.resolve(!0):r.dispatch((0,nt.fetchAndUse)(i,o))).then(function(){var e=s.reduce(function(e,t){var r=t.sceneId,n=t.publishedHash;return e[r]||(e[r]=n),e},{});return Ve.default.all((0,Ue.default)(e).map(function(t){return r.dispatch((0,nt.fetch)(t,e[t]))})).then(function(){return r.dispatch(a({configuration:u}))}).then(function(){return Ve.default.all(s.map(function(e){var t=e.sceneId,n=e.transform,i=e.configuration;return r.dispatch((0,Je.cloneModel)({sceneId:t})).then(function(e){r.dispatch(a({id:e,configuration:i}));var t={id:e,plug:"Transform",operatorIndex:0};return r.dispatch((0,Je.set)(t,n))})}))})})}}function Ne(e){return{type:It,payload:e}}Object.defineProperty(t,"__esModule",{value:!0});var Ce,Oe=r(47),Re=n(Oe),Pe=r(130),ze=n(Pe),je=r(4),Ue=n(je),Be=r(39),Ve=n(Be),ke=r(38),Fe=n(ke),Ge=r(19),He=n(Ge),We=r(2),Ye=n(We);t.initConfigurator=a,t.initConfiguration=o,t.setAttributeVisibility=v,t.applyPreset=M,t.setConfiguration=w,t.removeConfigurator=x,t.getConfigurationState=b,t.executeAttribute=T,t.executeVariant=S,t.initializeAttribute=A,t.initializePreset=D,t.initializeConfiguration=O,t.initializeConfig=R,t.getConfigs=P,t.getAttributes=z,t.getAttribute=j,t.getAttributesByType=U,t.getForms=B,t.getFormState=V,t.getForm=k,t.getConfigurator=F,t.getConfigurators=G,t.getPresets=H,t.getPreset=W,t.getScript=Y,t.getScriptError=Q,t.setScript=J,t.getProductTour=$,t.getProducts=ee,t.getProduct=te,t.getExternalEl=re,t.getConfiguration=ne,t.getConfigurations=ie,t.setSavingSceneId=ae,t.canUndo=oe,t.undo=se,t.addAttribute=ue,t.setAttribute=le,t.deleteAttribute=ce,t.addForm=fe,t.deleteForm=de,t.setForm=he,t.addPreset=pe,t.deletePreset=ge,t.setPreset=me,t.setFormState=ve,t.addProduct=ye,t.setProduct=Me,t.deleteProduct=we,t.isSaved=xe,t.isSaving=be,t.shouldSave=Te,t.save=_e,t.getBOM=De,t.loadConfigurations=Le,t.onChange=Ne;var Qe=r(79),qe=n(Qe),Xe=r(32),Ze=r(46),Ke=n(Ze),Je=r(7),$e=r(33),et=r(122),tt=r(8),rt=r(67),nt=r(20),it=(r(43),r(123)),at=r(58),ot=r(207),st=n(ot),ut=r(101),lt=(0,Xe.Map)({configuration:(0,Xe.Map)(),configs:(0,Xe.Map)(),configsState:(0,Xe.Map)(),savingSceneId:null,history:(0,Xe.List)(),savedConfig:(0,Xe.Map)(),configurators:(0,Xe.Map)(),formState:(0,Xe.Map)(),productTour:null,products:(0,Xe.Map)(),saving:!1,numSaveErrors:0,changeListeners:(0,Xe.List)()}),ct=function(){return(0,Xe.Map)({hidden:{},optionsVisible:{}})},ft="ADD_CONFIG",dt="DEL_CONFIG",ht="SET_CONFIG",pt="SET_CONFIGURATION",gt="SET_SAVING_SCENE_ID",mt="CONFIG_UNDO",vt="CONFIG_SAVING",yt="CONFIG_SAVED",Mt="CONFIG_SAVE_ERROR",wt="REMOVE_CONFIGURATOR",xt="SET_CONFIGURATOR_FORM_STATE",bt="ADD_PRODUCT",Tt="DEL_PRODUCT",St="SET_PRODUCT",_t="INITIALIZE_CONFIGURATION",Et="SET_SCRIPT_ERROR",At="SET_SCRIPT_ACTIVATED",It="ADD_CHANGE_LISTENER",Dt="RESET_CHANGE_LISTENERS",Lt=(0,Xe.Map)({scriptError:"",scriptActivated:!1}),Nt=(0,Ke.default)(lt,(Ce={},(0,He.default)(Ce,at.INITIALIZE_SCENE,function(e,t){var r=t.id,n=t.store,i=R(C(n,r));return e.setIn(["configs",r],i).setIn(["configsState",r],Lt.set("sceneId",r))}),(0,He.default)(Ce,_t,function(e,t){var r=t.id,n=t.config,i=t.sceneId,a=n;try{"string"==typeof n&&(a=JSON.parse(n))}catch(e){a={}}var o=R(a);return e.setIn(["configs",r],o).setIn(["configsState",r],Lt.set("sceneId",i))}),(0,He.default)(Ce,Et,function(e,t){var r=t.id,n=t.scriptError;return e.setIn(["configsState",r,"scriptError"],n)}),(0,He.default)(Ce,pt,function(e,t){var r=t.id,n=t.attribute,i=t.value,a=e.getIn(["configuration",r])||(0,Xe.Map)();return e.setIn(["configuration",r],a.set(n.name,i))}),(0,He.default)(Ce,at.CLEAR_SCENE,function(e){return lt}),(0,He.default)(Ce,ft,function(e,t){var r=t.id,n=t.key,i=t.attrs,a=e.getIn(["configs",r]),o=e.get("savingSceneId")!==r?e:e.set("history",e.get("history").push(a)),s=[].concat(a.get(n));return s.push(i),o.setIn(["configs",r],a.set(n,s))}),(0,He.default)(Ce,ht,function(e,t){var r=t.attrId,n=t.key,a=t.id,o=t.attrs,s=t.script,u=t.scriptError,l=e.getIn(["configs",a]),c=e.get("savingSceneId")!==a?e:e.set("history",e.get("history").push(l));if("script"===n)return c.setIn(["configs",a],l.set(n,s)).setIn(["configsState",a,"scriptError"],u||"");var f=[].concat(l.get(n)),d=f.findIndex(i(r));return f[d]=(0,Ye.default)({},f[d],o),c.setIn(["configs",a],l.set(n,f))}),(0,He.default)(Ce,dt,function(e,t){var r=t.id,n=t.attrId,a=t.key,o=e.getIn(["configs",r]),s=e.get("savingSceneId")!==r?e:e.set("history",e.get("history").push(o)),u=[].concat(o.get(a)),l=u.findIndex(i(n));u.splice(l,1);var c=o.set(a,u);return"attributes"===a&&(c=c.set("forms",o.get("forms").map(function(e){var t=(0,Ye.default)({},e);return t.fields=[].concat((e.fields||[]).filter(function(e){return e.attributeId!==n})),t}))),s.setIn(["configs",r],c)}),(0,He.default)(Ce,gt,function(e,t){var r=e.getIn(["configs",t]);return e.set("savingSceneId",t).set("history",(0,Xe.List)([])).set("savedConfig",r)}),(0,He.default)(Ce,mt,function(e){var t=e.get("savingSceneId"),r=e.get("history");return t&&0!==r.size?e.setIn(["configs",t],r.last()).set("history",r.butLast()):e}),(0,He.default)(Ce,vt,function(e){return e.set("saving",!0)}),(0,He.default)(Ce,Mt,function(e){return e.set("saving",!1).set("numSaveErrors",e.get("numSaveErrors")+1)}),(0,He.default)(Ce,yt,function(e,t){return e.set("saving",!1).set("savedConfig",t).set("numSaveErrors",0)}),(0,He.default)(Ce,"INIT_CONFIGURATOR",function(e,t){var r=t.id,n=t.productTour,i=e.getIn(["configurators",r])||(0,Xe.Map)({id:r});["form","el","panel","skipModels"].forEach(function(e){void 0!==t[e]&&(i=i.set(e,t[e]))});var a=e.getIn(["formState",r])||ct();return e.setIn(["configurators",r],i).set("productTour",n).setIn(["formState",r],a)}),(0,He.default)(Ce,wt,function(e,t){var r=e.getIn(["configurators",t,"el"]);return r&&(r.innerHTML=""),e.deleteIn(["configurators",t]).deleteIn(["configuration",t])}),(0,He.default)(Ce,xt,function(e,t){var r=t.attrs,n=t.id,i=e.getIn(["formState",n])||ct(),a=r.hidden,o=r.optionsVisible;return e.setIn(["formState",n],(0,Xe.Map)({hidden:(0,Ye.default)({},i.get("hidden"),a),optionsVisible:(0,Ye.default)({},i.get("optionsVisible"),o)}))}),(0,He.default)(Ce,bt,function(e,t){return e.setIn(["products",t.handle],t)}),(0,He.default)(Ce,St,function(e,t){var r=e.getIn(["products",t.handle]);return e.setIn(["products",t.handle],(0,Ye.default)({},r,t))}),(0,He.default)(Ce,Tt,function(e,t){return e.deleteIn(["products",t])}),(0,He.default)(Ce,At,function(e,t){return e.setIn(["configsState",t,"scriptActivated"],!0)}),(0,He.default)(Ce,It,function(e,t){return e.updateIn(["changeListeners"],(0,Xe.List)(),function(e){return e.push(t)})}),(0,He.default)(Ce,Dt,function(e){return e.set("changeListeners",(0,Xe.List)())}),Ce)),Ct={"set-visibility":u,"annotation-visibility":l,"set-property":h,"assign-material":f,"move-camera":c,"play-clip":d,"set-variable":p,"set-form-field-visibility":g,"set-attribute-options-visibility":m},Ot={reducer:Nt,actions:{applyPreset:M,executeAttribute:T,executeVariant:S,initConfiguration:o,initConfigurator:a,addProduct:ye,setAttribute:le,setProduct:Me,deleteProduct:we,setConfiguration:w,setAttributeVisibility:v,loadConfigurations:Le,removeConfigurator:x,onChange:Ne},selectors:{getConfigurationState:b,getAttribute:j,getAttributes:z,getAttributesByType:U,getForm:k,getForms:B,getConfiguration:ne,getBOM:De,getExternalEl:re,getPresets:H,getProduct:te,getProducts:ee,getProductTour:$,getFormState:V,getConfigurations:ie}};t.default=Ot},function(e,t,r){"use strict";(function(e){function n(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,r){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return o(this,e,t,r)}function o(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,r,n):"string"==typeof t?c(e,t,r):h(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return s(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function l(e,t){if(s(t),e=i(e,t<0?0:0|p(t)),!a.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function c(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!a.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|m(t,r);e=i(e,n);var o=e.write(t,r);return o!==n&&(e=e.slice(0,o)),e}function f(e,t){var r=t.length<0?0:0|p(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=f(e,t),e}function h(e,t){if(a.isBuffer(t)){var r=0|p(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&J(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),a.alloc(+e)}function m(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(e).length;default:if(n)return H(e).length;t=(""+t).toLowerCase(),n=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return L(this,t,r);case"latin1":case"binary":return N(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function M(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,r/=2}var l;if(i){var c=-1;for(l=r;l<s;l++)if(a(e,l)===a(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===u)return c*o}else-1!==c&&(l-=l-c),c=-1}else for(r+u>s&&(r=s-u),l=r;l>=0;l--){for(var f=!0,d=0;d<u;d++)if(a(e,l+d)!==a(t,d)){f=!1;break}if(f)return l}return-1}function x(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[r+o]=s}return o}function b(e,t,r,n){return q(H(t,e.length-r),e,r,n)}function T(e,t,r,n){return q(W(t),e,r,n)}function S(e,t,r,n){return T(e,t,r,n)}function _(e,t,r,n){return q(Q(t),e,r,n)}function E(e,t,r,n){return q(Y(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=r){var u,l,c,f;switch(s){case 1:a<128&&(o=a);break;case 2:u=e[i+1],128==(192&u)&&(f=(31&a)<<6|63&u)>127&&(o=f);break;case 3:u=e[i+1],l=e[i+2],128==(192&u)&&128==(192&l)&&(f=(15&a)<<12|(63&u)<<6|63&l)>2047&&(f<55296||f>57343)&&(o=f);break;case 4:u=e[i+1],l=e[i+2],c=e[i+3],128==(192&u)&&128==(192&l)&&128==(192&c)&&(f=(15&a)<<18|(63&u)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(o=f)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return D(n)}function D(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=$));return r}function L(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function N(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=G(e[a]);return i}function O(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function z(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-r,2);i<a;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function j(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-r,4);i<a;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function U(e,t,r,n,i,a){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,i){return i||U(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function V(e,t,r,n,i){return i||U(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function k(e){if(e=F(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function F(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function W(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function Y(e,t){for(var r,n,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,a.push(i),a.push(n);return a}function Q(e){return Z.toByteArray(k(e))}function q(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function X(e){return e!==e}var Z=r(506),K=r(687),J=r(688);t.Buffer=a,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,r){return o(null,e,t,r)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,r){return u(null,e,t,r)},a.allocUnsafe=function(e){return l(null,e)},a.allocUnsafeSlow=function(e){return l(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=a.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var o=e[r];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},a.byteLength=m,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):v.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,r,n,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,s=r-t,u=Math.min(o,s),l=this.slice(n,i),c=e.slice(t,r),f=0;f<u;++f)if(l[f]!==c[f]){o=l[f],s=c[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return M(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return M(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return x(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return T(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;a.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(a.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=a.prototype;else{var i=t-e;n=new a(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},a.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},a.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},a.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},a.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),K.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),K.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),K.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),K.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){P(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,a=0;for(this[t]=255&e;++a<r&&(i*=256);)this[t+a]=e/i&255;return t+r},a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){P(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+r},a.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);P(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):z(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):z(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return V(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return V(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=a.isBuffer(e)?e:H(new a(e,n).toString()),u=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(66))},function(e,t,r){"use strict";function n(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}Object.defineProperty(t,"__esModule",{value:!0});var i=r(208),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},n.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},n.prototype.curveTo=n.prototype.bezierCurveTo=function(e,t,r,n,i,a){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:n,x:i,y:a})},n.prototype.quadTo=n.prototype.quadraticCurveTo=function(e,t,r,n){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:n})},n.prototype.close=n.prototype.closePath=function(){this.commands.push({type:"Z"})},n.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof a.default){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},n.prototype.getBoundingBox=function(){for(var e=new a.default,t=0,r=0,n=0,i=0,o=0;o<this.commands.length;o++){var s=this.commands[o];switch(s.type){case"M":e.addPoint(s.x,s.y),t=n=s.x,r=i=s.y;break;case"L":e.addPoint(s.x,s.y),n=s.x,i=s.y;break;case"Q":e.addQuad(n,i,s.x1,s.y1,s.x,s.y),n=s.x,i=s.y;break;case"C":e.addBezier(n,i,s.x1,s.y1,s.x2,s.y2,s.x,s.y),n=s.x,i=s.y;break;case"Z":n=t,i=r;break;default:throw new Error("Unexpected path command "+s.type)}}return e.isEmpty()&&e.addPoint(0,0),e},n.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},n.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){for(var e="",r=0;r<arguments.length;r+=1){var n=arguments[r];n>=0&&r>0&&(e+=" "),e+=t(n)}return e}e=void 0!==e?e:2;for(var n="",i=0;i<this.commands.length;i+=1){var a=this.commands[i];"M"===a.type?n+="M"+r(a.x,a.y):"L"===a.type?n+="L"+r(a.x,a.y):"C"===a.type?n+="C"+r(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?n+="Q"+r(a.x1,a.y1,a.x,a.y):"Z"===a.type&&(n+="Z")}return n},n.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},n.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r},t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=G[e];if(!n)return r.push("Unknown plug: "+e),G.None.NoOp;var i=n[t];return i||(r.push("Unknown Operator: "+e+", "+t),G.None.NoOp)}Object.defineProperty(t,"__esModule",{value:!0}),t.lookupOperator=i;var a=r(412),o=n(a),s=r(354),u=n(s),l=r(355),c=n(l),f=r(356),d=n(f),h=r(358),p=n(h),g=r(359),m=n(g),v=r(360),y=n(v),M=r(361),w=n(M),x=r(362),b=n(x),T=r(363),S=n(T),_=r(398),E=n(_),A=r(408),I=n(A),D=r(409),L=n(D),N=r(411),C=n(N),O=r(357),R=n(O),P=r(410),z=n(P),j={schema:{}},U={Bone:j},B={Null:j},V={Action:j,Mixer:j};L.default["vray/create"]=j;var k={Viewport:j},F={Clip:j},G=(0,o.default)({Annotation:u.default,Bone:U,Camera:c.default,Environment:d.default,GeneralRenderer:p.default,Light:y.default,Material:w.default,Mixer:V,Null:B,Pass:b.default,Player:S.default,PolyMesh:E.default,Properties:I.default,Renderer:L.default,Timeline:z.default,Transform:C.default,Image:m.default,Viewport:k,Font:R.default,Clip:F},{withNone:!0});t.default=G},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,c.default)((0,u.default)((0,o.default)(e)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(160),o=n(a),s=r(438),u=n(s),l=r(439),c=n(l),f=r(159);n(f)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e.length<=0)){for(var r=t.faceRangeOffsets,n=t.transforms,i=t.applyTransform,a=t.defaultValue,o=t.respectivePositions,s=0,l=0,c=0,f=!1,d=a&&a.constructor,p=0;p<e.length;++p){if((f=null==e[p])&&(!a||!o))throw new Error("If any polymap does not exist, the defaultValue and respectivePositions must be passed");f?(l+=o[p].faceRangeOffsets.length-1,c+=o[p].faceValueIndices.length,s+=o[p].faceValueIndices.length):(d||(d=e[p].values.type),l+=e[p].faceRangeOffsets.length-1,c+=e[p].faceValueIndices.length,s+=e[p].values.length)}l++;for(var g=new u.default(d,s),m=new Uint32Array(c),v=r||new Uint32Array(l),y=new d,M=0,w=0,x=0,b=0;b<e.length;++b){f=null==e[b];var T=e[b]?e[b].faceRangeOffsets:o[b].faceRangeOffsets;if(!r)for(var S=1;S<T.length;++S)v[S+M]=T[S]+v[M];M+=T.length-1;for(var _=e[b]?e[b].faceValueIndices:o[b].faceValueIndices,E=0;E<_.length;++E)m[E+w]=f?E+x:_[E]+x;w+=_.length;for(var A=f?o[b].faceValueIndices:e[b].values,I=void 0,D=0;D<A.length;++D)if(f)g.setAt(D+x,a);else{if(e[b].values.getAt(D,y),n){if(I=n[b],!I.isMatrix4&&!I.isMatrix3&&!i)throw new Error("Requires Matrix3 or Matrix4 with a applyTransform function to perform transform.");i.call(y,I)}g.setAt(D+x,y)}x+=A.length}var L=new h.default({faceRangeOffsets:v,faceValueIndices:m,values:g});if(s!==g.length)throw new Error("mismatch between number of input and output values");return L}}function a(e,t,r){if(!Array.isArray(e))return e;if(1===e.length)return e[0];var n=r||!1,a=function(t){for(var r=0;r<e.length;++r)if(void 0!==e[r][t])return!0;return!1},s=function(t){for(var r=[],n=0;n<e.length;++n)r.push(e[n][t]);return r},u=function(e,t){if(a(e))return n&&console.log("Merging "+e+"s..."),i(s(e),t)},l={},c={transforms:t,applyTransform:o.Vector3.prototype.applyMatrix4};if(l.positions=u("positions",c),l.faceRangeOffsets=l.positions.faceRangeOffsets,t)for(var d=0;d<t.length;++d)t[d]=(new o.Matrix3).getNormalMatrix(t[d]);c.faceRangeOffsets=l.faceRangeOffsets,c.applyTransform=o.Vector3.prototype.applyMatrix3,c.defaultValue=new o.Vector3(1,0,0),c.respectivePositions=s("positions"),l.normalMap=u("normalMap",c),c.defaultValue=new o.Vector4(1,0,0,1),l.tangentMap=u("tangentMap",c);var h=function(e){for(var t={},r=void 0,n=0;n<e.length;++n){var i=e[n];if(i)for(var a=0;a<i.namesByIndex.length;++a)r=i.namesByIndex[a],t[r]=!0}var o={};for(var s in t)if(t.hasOwnProperty(s))for(var u=0;u<e.length;++u){var l=e[u];o[s]||(o[s]=[]),o[s].push(l.byName[s])}return o},p=function(e,t){var r=new g.default;n&&console.log("Merging "+e);var a=h(s(e));for(var o in a)a.hasOwnProperty(o)&&r.set(o,i(a[o],t));return r};if(c.transforms=null,c.defaultValue=new o.Vector2(0,0),l.uvMaps=p("uvMaps",c),c.defaultValue=new o.Color(0,0,0),l.colorMaps=p("colorMaps",c),a("materialIds")){n&&console.log("Merging Material Ids......");var m=s("materialIds"),y=0,M=void 0;l.materialIds=new Float32Array(l.faceRangeOffsets.length-1);for(var w=0;w<m.length;++w)M=m[w],M&&l.materialIds.set(M,y),y+=e[w].faceRangeOffsets.length-1}var x=new f.default(l);return(0,v.default)(x,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=r(0),s=r(3),u=n(s),l=r(68),c=(n(l),r(5)),f=n(c),d=r(6),h=n(d),p=r(18),g=n(p),m=r(160),v=n(m)},function(e,t,r){"use strict";function n(e,t){var r=(0,s.get)(e,{scene:!0,evalPlug:"Player"}),n=(0,s.get)(e,{id:t,evalPlug:"Properties"});return r.overrideNavigation?r.orbitMode:n.orbitMode}function i(e,t){var r=(0,s.get)(e,{scene:!0,evalPlug:"Player"}),n=(0,s.get)(e,{id:t,evalPlug:"Properties"});return r.overrideNavigation?r.constraintCameraY:n.constraintCameraY}function a(e,t,r){var n={scene:!0,plug:"Player"},i={id:t,plug:"Properties"},a=(0,s.get)(e,{scene:!0,plug:"Player",property:"overrideNavigation"}),o=a?n:i;return(0,s.set)(o,r)}function o(e,t){var r=(0,s.get)(e,{scene:!0,evalPlug:"Player"}),n=(0,s.get)(e,{id:t,evalPlug:"Properties"});return r.overrideNavigation?r.orbitTarget:n.orbitTarget}Object.defineProperty(t,"__esModule",{value:!0}),t.getOrbitMode=n,t.getConstrainCameraY=i,t.setOrbitMode=a,t.getOrbitTarget=o;var s=r(7)},function(e,t,r){"use strict";function n(e){var t=new a.Matrix4;if(!e)return t;if("Orthographic"!==e.projection){var r=e.nearClip*Math.tan(a.Math.DEG2RAD*e.fieldOfView*.5),n=-r,o=n*e.aspectRatio,s=r*e.aspectRatio;return t.makePerspective(o,s,r,n,e.nearClip,e.farClip)}var u=i(!0,e)||{width:1,height:1};return t.makeOrthographic(-u.width,u.width,u.height,-u.height,e.nearClip,e.farClip),t}function i(e,t){if(!(t&&t.fieldOfView&&t.orthoZoom&&t.aspectRatio))return!1;var r=Math.tan(a.Math.degToRad(t.fieldOfView/2)),n=r*t.orthoZoom,i=n*t.aspectRatio;return!0===e?{width:i,height:n}:{width:2*i,height:2*n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var a=r(0)},function(e,t,r){"use strict";function n(e,t){var r={};return(0,a.default)(t).forEach(function(n,i){r[n]=e(t[n],n,i)}),r}Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(41).f,i=r(61),a=r(25)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,r){var n=r(52),i=r(191),a=r(77),o=r(30),s=r(586);e.exports=function(e,t){var r=1==e,u=2==e,l=3==e,c=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var g,m,v=a(t),y=i(v),M=n(s,p,3),w=o(y.length),x=0,b=r?h(t,w):u?h(t,0):void 0;w>x;x++)if((d||x in y)&&(g=y[x],m=M(g,x,v),e))if(r)b[x]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return x;case 2:b.push(g)}else if(c)return!1;return f?-1:l||c?c:b}}},function(e,t){var r=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(78)("meta"),i=r(14),a=r(36),o=r(26).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(21)(function(){return u(Object.preventExtensions({}))}),c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},d=function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},h=function(e){return l&&p.NEED&&u(e)&&!a(e,n)&&c(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,r){var n=r(12),i=r(594),a=r(189),o=r(196)("IE_PROTO"),s=function(){},u=function(){var e,t=r(188)("iframe"),n=a.length;for(t.style.display="none",r(284).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[a[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[o]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(296),i=r(189).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(36),i=r(77),a=r(196)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(14);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(11),i=r(9),a=r(60);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*a(function(){r(1)}),"Object",o)}},function(e,t,r){"use strict";function n(e){this.font=e}function i(e){this.cmap=e}function a(e,t){this.encoding=e,this.charset=t}function o(e){switch(e.version){case 1:this.names=h.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<h.length?this.names[t]=h[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-h.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=h[r+e.glyphNameIndex[r]];break;case 3:default:this.names=[]}}function s(e){for(var t=void 0,r=e.tables.cmap.glyphIndexMap,n=(0,l.default)(r),i=0;i<n.length;i+=1){var a=n[i],o=r[a];t=e.glyphs.get(o),t.addUnicode(parseInt(a))}for(var s=0;s<e.glyphs.length;s+=1)t=e.glyphs.get(s),e.cffEncoding?e.isCIDFont?t.name="gid"+s:t.name=e.cffEncoding.charset[s]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(s))}Object.defineProperty(t,"__esModule",{value:!0}),t.addGlyphNames=t.GlyphNames=t.CffEncoding=t.CmapEncoding=t.DefaultEncoding=t.standardNames=t.cffExpertEncoding=t.cffStandardEncoding=t.cffStandardStrings=void 0;var u=r(4),l=function(e){return e&&e.__esModule?e:{default:e}}(u),c=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],f=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],d=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],h=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];n.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),r=this.font.glyphs;if(r)for(var n=0;n<r.length;n+=1)for(var i=r.get(n),a=0;a<i.unicodes.length;a+=1)if(i.unicodes[a]===t)return n;return null},i.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0},a.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),r=this.encoding[t];return this.charset.indexOf(r)},o.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},o.prototype.glyphIndexToName=function(e){return this.names[e]},t.cffStandardStrings=c,t.cffStandardEncoding=f,t.cffExpertEncoding=d,t.standardNames=h,t.DefaultEncoding=n,t.CmapEncoding=i,t.CffEncoding=a,t.GlyphNames=o,t.addGlyphNames=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return{type:v,payload:{id:e,attrs:t}}}function a(e){return{type:v,payload:{id:e,attrs:{pinned:!0,open:!0}}}}function o(e){return{type:v,payload:{id:e,attrs:{pinned:!1,open:!1}}}}function s(e){return{type:y,payload:e}}function u(e){return{type:M,payload:e}}function l(e){return e.getIn(["annotations","customAnnotationFn"])}function c(e){return e.getIn(["annotations","customOverlayFn"])}Object.defineProperty(t,"__esModule",{value:!0});var f,d=r(19),h=n(d);t.setAnnotationProperties=i,t.openAnnotation=a,t.closeAnnotation=o,t.useCustomAnnotationFunction=s,t.useCustomOverlayFunction=u,t.getCustomAnnotationFunction=l,t.getCustomOverlayFunction=c;var p=r(32),g=r(46),m=n(g),v=(r(58),"SET_ANNOTATION_PROPERTIES"),y="USE_CUSTOM_ANNOTATION_FUNCTION",M="USE_CUSTOM_OVERLAY_FUNCTION",w=(0,p.Map)({customAnnotationFn:null,customOverlayFn:null}),x=(0,m.default)(w,(f={},(0,h.default)(f,v,function(e,t){var r=t.id,n=t.attrs,i=e.get("id")||(0,p.Map)();return e.set(r,i.merge(n))}),(0,h.default)(f,y,function(e,t){return e.set("customAnnotationFn",t)}),(0,h.default)(f,M,function(e,t){return e.set("customOverlayFn",t)}),f)),b={reducer:x,actions:{setAnnotationProperties:i,openAnnotation:a,closeAnnotation:o,useCustomAnnotationFunction:s,useCustomOverlayFunction:u},selectors:{getCustomAnnotationFunction:l}};t.default=b},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return x.test(e)}function a(e){return e instanceof RegExp?e:(e=e.replace(/\*/g,"(.*)").replace(/^\"|\"$/g,""),new RegExp("^"+e+"$","i"))}function o(e){for(var t,r,n=void 0,i=void 0;null!==(r=_.exec(e));)t=r[1].split("="),2===t.length?(i||(i={}),i[t[0]]=t[1]):n=t[0];return{property:n,properties:i}}function s(e,t){var r="~"===e[0],n=!r&&'"'===e[0]&&e.slice(1).indexOf('"'),s=n&&-1!==n,u=s||r?S.exec(e.slice(r?1:n+2)):T.exec(e),l=s?e.slice(1,n+1):!r&&u[1],c=u[2],f=u[3],d=u[4],h=u[5],p=u[6],g=i(l)?l:void 0,m=(0,w.default)({scene:r,id:g,name:g||!l?void 0:a(l),type:c,filter:f,evalPlug:d,plug:h},o(p),{includeParent:!0});return m.name&&(m._name=l),(0,w.default)(m,t),m}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e?s(e,t):"object"===(void 0===e?"undefined":(0,y.default)(e))?(0,w.default)({},e,{name:e.name?a(e.name):void 0,names:e.names&&Array.isArray(e.names)?e.names.map(a):void 0,includeParent:void 0===e.includeParent?!e.from:e.includeParent},t):{}}function l(e,t,r){var n=c(e,t);return n?r?n.id:d(e,t):null}function c(e,t){if(void 0!==t.id&&t.id!==e.id)return null;if(void 0!==t.name&&!t.name.test(e.name))return null;if(void 0!==t.type)if("string"==typeof t.type){if(t.type!==e.type)return null}else if(Array.isArray(t.type)&&-1===t.type.indexOf(e.type))return null;return void 0===t.hasPlug||e.plugs[t.hasPlug]?e:null}function f(e,t){for(var r=(0,m.default)(e),n=0;n<r.length;n++)if(t[r[n]]!==e[r[n]])return!1;return!0}function d(e,t){var r=t.properties,n=t.property,i=t.operator,a=t.operatorIndex;if(t.evalPlug)return n?[e.id,"eval",t.evalPlug,n]:[e.id,"eval",t.evalPlug];if(!t.plug)return"name"===n||"type"===n?[e.id,n]:e.id;var o=e.plugs[t.plug];if(!o)return null;if(!r&&!n&&!i&&void 0===a)return e.id;var s=void 0!==t.operatorIndex?t.operatorIndex:o.findIndex(function(e){return(!n||"active"===n||e.hasOwnProperty(n))&&(!r||f(r,e))});return-1===s?null:n?[e.id,t.plug,s,n]:[e.id,t.plug,s]}function h(e,t,r,n,i){var a=[],o=e.get("sceneGraph"),s=n&&l(n,r,i);return s&&a.push(s),(t.children||[]).forEach(function(n){var s=o.nodes[n];if(!s)throw new Error("Invalid child for '"+t.get("name")+"' - "+n);var u=l(s,r,i);u&&a.push(u),r.shallow||r.skipModels&&"Model"===s.type||(a=a.concat(h(e,s,r,null,i)))}),a}function p(e,t,r,n,i){var a=void 0;if(n&&(a=l(n,r,i)))return a;var o=e.get("sceneGraph"),s=(0,w.default)({},r);return s.names&&(s.name=s.names[0],s.names=s.names.slice(1)),(t.children||[]).find(function(t){var r=o.nodes[t];if(a=l(r,s,i||s.names&&s.names.length),s.names){if(!a||!s.names.length)return!!a;if(a=p(e,r,s,null,i))return!0}else{if(a)return!0;if(a=!s.shallow&&p(e,r,s,null,i))return!0}})?a:null}Object.defineProperty(t,"__esModule",{value:!0});var g=r(4),m=n(g),v=r(38),y=n(v),M=r(2),w=n(M);t.isUuid=i,t.buildQueryObject=u,t.getMatch=l,t.matchChildren=h,t.findChild=p;var x=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,b={bareName:"^([^!%[#:]*)*",type:"(?:%([^#!:]*))*",filter:"(?::([^#:]*))*",evalPlug:"(?:!([^#[]*))*",plugName:"(?:#([^[]*))*",attrs:"(.*)"},T=new RegExp(b.bareName+b.type+b.filter+b.evalPlug+b.plugName+b.attrs),S=new RegExp("()"+b.type+b.filter+b.evalPlug+b.plugName+b.attrs),_=/(?:\[([^\]]*)\])/g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={identity:function(e,t){for(var r=i.default.maybeCreate(t||Uint32Array,e),n=0;n!==e;++n)r[n]=n;return r},identityForReading:function(e){var t=a._identityProto;return e>t.length&&(t=a.identity(5*e/4|0),a._identityProto=t),t.subarray(0,e)},_identityProto:i.default.Empty.Uint32Array,inverse:function(e,t,r){for(var n=i.default.maybeCreate(r||Uint32Array,t),a=0,o=e.length;a!==o;++a)n[e[a]]=a;return n},apply:function(e,t,r){for(var n=r||e,i=0,a=e.length;i!==a;++i)n[i]=t[e[i]];return e},histogram:function(e,t,r){for(var n=i.default.maybeCreate(r||Uint32Array,t),a=0,o=e.length;a!==o;++a)++n[e[a]];return n}};t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i){r=r||12,n=n||0,i=i||2*Math.PI;var o=new s.default(a.Vector3,(r+1)*e.length),u=new s.default(a.Vector3,(r+1)*t.length),c=new s.default(a.Vector2,(r+1)*e.length),d=new Uint32Array(r*(e.length-1)*4),p=new Uint32Array(r*(e.length-1)+1),m=1/(e.length-1),v=1/r;p[0]=0;for(var y=1,M=new a.Vector2,w=new a.Vector3,x=new a.Vector3,b=new a.Matrix4,T=new a.Matrix3,S=0,_=0,E=r;_<=E;_++){var A=n+_*v*i;b.makeRotationY(A),T.getNormalMatrix(b);for(var I=_*v,D=0,L=e.length;D<L;D++){e.getAt(D,w),t.getAt(D,x),w.applyMatrix4(b),x.applyMatrix3(T),o.setAt(S,w),u.setAt(S,x);var N=D*m;M.set(I,N),c.setAt(S++,M)}}for(var C=e.length,O=0,R=0,P=r;R<P;R++)for(var z=0,j=e.length-1;z<j;z++){var U=z+C*R,B=U,V=U+C,k=U+1+C,F=U+1;d[O++]=B,d[O++]=V,d[O++]=k,d[O++]=F,p[y++]=O}var G=new h.default({faceRangeOffsets:p,faceValueIndices:d,values:o}),H=new h.default({faceRangeOffsets:p,faceValueIndices:d,values:u}),W=new h.default({faceRangeOffsets:p,faceValueIndices:d,values:c}),Y=new l.default;Y.set("default",W);var Q=new f.default;return Q.faceRangeOffsets=G.faceRangeOffsets,Q.positions=G,Q.normalMap=H,Q.uvMaps=Y,(0,g.default)(new f.default(Q))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(18),l=n(u),c=r(5),f=n(c),d=r(6),h=n(d),p=r(102),g=n(p)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=r.x/r.y;e.dispatch((0,m.setRect)(r)),(0,v.get)(e,[t,"name"])&&e.dispatch((0,f.set)({id:t,plug:"Camera",property:"aspectRatio"},n))}function a(e,t,r,n){var i=((0,f.get)(e,{scene:!0,evalPlug:"Player"}),(0,f.getWorldTransform)(e,t)),a=(0,h.default)(e,t),o=(0,f.getWorldTransform)(e,v.virtualPivotId);return"trackball"===(0,S.getOrbitMode)(e,t)&&(C.setFromMatrixPosition(i),O.set(0,0,-1).transformDirection(i),R.setFromMatrixPosition(a).sub(C).normalize(),j.setFromUnitVectors(R,O),n.upPosition.applyQuaternion(j)),R.setFromMatrixPosition(a),o.setPosition(R.sub(n.offset)),(0,T.default)(e,v.virtualPivotId,o),(0,g.default)(i,a,n.upPosition),i}function o(e,t,r,n,a){var o=n||v.virtualCameraId,l=r||v.virtualCameraId,d=(0,m.getBoundingBox)(e),p=a||(0,m.getRect)(e),y=(0,f.getWorldTransform)(e,l),M=(0,h.default)(e,l),w=(0,f.getWorldTransform)(e,v.virtualPivotId),x=(new c.Vector3).setFromMatrixPosition(y),b=(new c.Vector3).setFromMatrixPosition(M);i(e,o,p);var E=((0,f.get)(e,{scene:!0,evalPlug:"Player"}),(0,f.get)(e,{id:l,evalPlug:"Camera"})),A=(0,f.get)(e,{id:l,evalPlug:"Transform"}),I=(0,f.get)(e,{id:l,evalPlug:"Properties"}),D=l===o?E:(0,f.get)(e,{id:o,evalPlug:"Camera"}),L=(0,S.getOrbitMode)(e,l),N=(0,S.getConstrainCameraY)(e,l),C=!A.target,O=l!==v.virtualCameraId,R=(0,m.getCameraAttrs)(e).toJS(),z=null==R.azimuthAngle&&null==R.polarAngle;if(C&&O&&z){var j=new c.Ray(new c.Vector3(0,0,0),new c.Vector3(0,0,-1)).applyMatrix4(y);b=j.closestPointToPoint(b),b.equals(x)&&b.addScaledVector(j.direction,.01),M.setPosition(b),(0,T.default)(e,v.virtualTargetId,M)}else C||(0,T.default)(e,v.virtualPivotId,M);x.setFromMatrixPosition(y);var U=new c.Vector3(0,1,0);if("trackball"===L){U.transformDirection(y);var B=(new c.Vector3).subVectors(x,M).normalize(),V=new c.Plane(B,0);U.copy(V.projectPoint(U).normalize())}(new c.Vector3).setFromMatrixPosition(w);x.sub(b);var k=M.elements[13];k+x.length()<0&&N&&x.normalize().multiplyScalar(k),y.setPosition(x.add(b)),D.upPosition=U,D.offset=new c.Vector3(0,0,0),u(e,l,y,M,E,d),N&&(0,_.updateSphericalRotation)(e,o,y,M,new c.Vector2(0,0));var F=(0,m.getCameraAttrs)(e).get("maxZoom");I.constrainCameraSphere||F?s(e,o,D,I.constrainCameraSphere?I.maxZoom:F,y,M):D.radiusConstraint=null;var G=void 0,H=void 0;if(!O){var W=new c.Sphere;d.getBoundingSphere(W),G=Math.min(.25*(P.radius-W.radius),.1),H=Math.max(10*(P.radius-W.radius),5e4)}return(0,g.default)(y,M,U),t&&(0,T.default)(e,o,y),{camera:y,target:M,upPosition:U,newNear:G,newFar:H}}function s(e,t,r,n,i,a){var o=(0,m.getBoundingBox)(e),s=new c.Sphere,u=i||(0,f.getWorldTransform)(e,t),l=a||(0,h.default)(e,t);(0,f.get)(e,{scene:!0,evalPlug:"Player"});if(o.getBoundingSphere(s),!(n<=1)){var d=new c.Sphere(s.center,s.radius*n);R.setFromMatrixPosition(l),C.setFromMatrixPosition(u);var p=(new c.Vector3).subVectors(C,R),g=(new c.Vector3).crossVectors(p,r.upPosition).normalize(),v=s.clampPoint(R),y=d.clampPoint(C);if(u.setPosition(y),l.setPosition(v),"trackball"===(0,S.getOrbitMode)(e,t)){var M=(new c.Vector3).subVectors(y,v);r.upPosition.crossVectors(g,M).normalize()}r.radiusConstraint={outerRadius:n,maxBoundingSphere:d,minBoundingSphere:s},r.newRadiusConstraint=null,(0,E.updateZoom)(e,0,t,u),i||(0,T.default)(e,t,u)}}function u(e,t,r,n,i,a){var o=(0,m.getCameraAttrs)(e).toJS(),s=o.azimuthAngle,u=o.polarAngle,l=o.boundingRadius,c=N,f=0,d=N;if(t===v.virtualCameraId&&(null==s&&(s=45),null==u&&(u=20),null==l&&(l=1)),null!=s||null!=u){if(z.getInverse(n,!0),C.setFromMatrixPosition(r).applyMatrix4(z),P.setFromVector3(C),P.theta=A(s),P.phi=A(90-u),f=L(f||0,0),d=D(d||N,c),P.phi=(0,M.default)(P.phi,f,d),null!=l){var h=l*a.getBoundingSphere().radius;P.radius=(h<=0?1:h)/I(A(.5*i.fieldOfView)),P.radius=(h<=0||h===1/0?1:h)/I(A(.5*i.fieldOfView))}P.makeSafe(),C.setFromSpherical(P),P.setFromVector3(C),C.applyMatrix4(n),r.setPosition(C)}}function l(e,t){var r=(0,m.getCamera)(e),n=(0,f.get)(e,{id:r,evalPlug:"Camera"}),i=((0,f.get)(e,{evalPlug:"Player"}),(0,f.getWorldTransform)(e,r)),a=(0,h.default)(e,r),o=new c.Vector3,s=new c.Quaternion,u=new c.Vector3,l=new c.Vector3;if(i.decompose(o,s,l),u.setFromMatrixPosition(a),n.offset.add(t.center).sub(u),a.setPosition(t.center),"Perspective"===n.projection){var d=n.aspectRatio>=1?Math.PI*n.fieldOfView/360:Math.atan(n.aspectRatio*Math.tan(Math.PI*n.fieldOfView/360)),p=t.radius/Math.sin(d);o.sub(t.center),o.normalize().multiplyScalar(p).add(t.center)}else{var y=n.orthoHeight/2,M=y*Math.min(n.aspectRatio,1),w=t.radius/M;e.dispatch((0,f.set)({id:r,plug:"Camera",property:"orthoZoom"},w))}if("trackball"===(0,S.getOrbitMode)(e,r)){var b=new c.Vector3(0,0,-1).applyQuaternion(s).normalize(),T=(new c.Vector3).subVectors(t.center,o).normalize(),_=(new c.Quaternion).setFromUnitVectors(b,T);n.upPosition.applyQuaternion(_)}i.compose(o,s,l),(0,g.default)(i,a,n.upPosition),e.dispatch((0,v.merge)([r,"Transform",0],(0,x.default)(i))),e.dispatch((0,v.merge)([v.virtualTargetId,"Transform",0],(0,x.default)(a)))}Object.defineProperty(t,"__esModule",{value:!0}),t.resizeCamera=i,t.updateLookatTarget=a,t.initCamera=o,t.initCameraRadiusConstraint=s,t.frameSphere=l;var c=r(0),f=r(7),d=r(59),h=n(d),p=r(71),g=n(p),m=r(8),v=r(10),y=r(164),M=n(y),w=r(51),x=n(w),b=r(127),T=n(b),S=r(104),_=r(248),E=r(251),A=c.Math.degToRad,I=(c.Math.radToDeg,Math.tan),D=(Math.cos,Math.atan,Math.acos,Math.min),L=Math.max,N=(Math.pow,Math.PI),C=(Math.sqrt,new c.Vector3),O=new c.Vector3,R=new c.Vector3,P=new c.Spherical,z=(new c.Spherical,new c.Matrix4),j=(new c.Matrix4,new c.Quaternion)},function(e,t,r){"use strict";function n(e,t,r){e.dispatch((0,i.merge)([t,"Transform",0],(0,o.default)(r)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(10),a=r(51),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){e?(p=e,g=t):(p=requestAnimationFrame,g=window)}function a(e,t){function r(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];z.push({type:e,args:r})}function n(){return R}function a(e){return R.getIn(e)}function o(e){return R.get(e)}function u(){return B}function l(){return B&&B.update(),B}function d(e,t){B="function"==typeof e?e(t):e}function v(e){V=e}function y(){return!!V}function M(){if(!V)throw new Error("No api function defined");for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return V.apply(void 0,[this].concat(t))}function w(e){k=e}function x(){return k}function b(e,t){window&&window.ga&&ga("playerv2.send","pageview",""+encodeURI(e))}function T(e,t,r){window&&window.ga&&ga("playerv2.send","event","v2player",e,t,r)}function S(e){return(0,f.fromJSON)(e)}function _(e){return(0,f.toJSON)(e)}function E(e){U=e}function A(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&console.error(t),U?(U.error(e,r),e.message?(console.error(e.message),e.stack&&console.log(e.stack)):console.error(e)):console.error(e)}function I(e){P.push(e);var t=!0;return function(){if(t){t=!1;var r=P.indexOf(e);P.splice(r,1)}}}function D(e){if(!(0,c.default)(e))throw console.log("Invalid action",e),new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw console.error("Invalid action: ",e),new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(j)throw new Error("Reducers may not dispatch actions.");try{j=!0,R=O(R,e,r,T)}catch(e){A(e)}finally{j=!1}return F(),h.default.Promise.resolve(e.resolve?e.resolve:e.payload)}function L(e){this.createCanvas=e}function N(e){O=e,D({type:m.INIT})}var C,O=e,R=t,P=[],z=[],j=!1,U=!1,B=null,V=null,k=null;h.default.on("error",A);var F=function(){function e(){t?r=!0:(t=!0,r=!1,p.call(g,function(){try{var n=z.splice(0,z.length);P.slice().forEach(function(e){return e(n,r)})}catch(e){A(e)}t=!1,r&&e()}))}var t=!1,r=!1;return e}(),G=function(e,t){var r=document.createElement("Canvas");return r.width=e,r.height=t,r};return D({type:m.INIT}),C={dispatch:D,subscribe:I,getState:n,getIn:a,get:o,replaceReducer:N,setTranslator:d,getTranslator:u,getEvaluatedTranslator:l,read:S,write:_,useRollbar:E,error:A,setApi:v,hasApi:y,callApi:M,createEvent:r,setRequestAnimationFrame:i,logPageView:b,setSocketApi:w,getSocketApi:x,createCanvas:G,setCreateCanvas:L},(0,s.default)(C,"createEvent",r),(0,s.default)(C,"trackEvent",T),C}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0;var o=r(19),s=n(o),u=r(502);n(u);t.default=a;var l=r(256),c=n(l),f=r(495),d=r(204),h=n(d),p=void 0,g=void 0;i();var m=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t,r){e.exports={default:r(522),__esModule:!0}},function(e,t,r){e.exports={default:r(527),__esModule:!0}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(108),i=r(25)("toStringTag"),a="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),i))?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){e.exports=!0},function(e,t,r){var n=r(44),i=r(271),a=r(170),o=r(176)("IE_PROTO"),s=function(){},u=function(){var e,t=r(169)("iframe"),n=a.length;for(t.style.display="none",r(263).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;n--;)delete u.prototype[a[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[o]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(62);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},function(e,t,r){var n=r(179),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){var n=r(27);e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t){},function(e,t,r){"use strict";var n=r(13),i=r(1),a=r(64),o=r(92),s=r(114),u=r(142),l=r(87),c=r(14),f=r(21),d=r(143),h=r(93),p=r(590);e.exports=function(e,t,r,g,m,v){var y=n[e],M=y,w=m?"set":"add",x=M&&M.prototype,b={},T=function(e){var t=x[e];a(x,e,"delete"==e?function(e){return!(v&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(v&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return v&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,r){return t.call(this,0===e?0:e,r),this})};if("function"==typeof M&&(v||x.forEach&&!f(function(){(new M).entries().next()}))){var S=new M,_=S[w](v?{}:-0,1)!=S,E=f(function(){S.has(1)}),A=d(function(e){new M(e)}),I=!v&&f(function(){for(var e=new M,t=5;t--;)e[w](t,t);return!e.has(-0)});A||(M=t(function(t,r){l(t,M,e);var n=p(new y,t,M);return void 0!=r&&u(r,m,n[w],n),n}),M.prototype=x,x.constructor=M),(E||I)&&(T("delete"),T("has"),m&&T("get")),(I||_)&&T(w),v&&x.clear&&delete x.clear}else M=g.getConstructor(t,e,m,w),o(M.prototype,r),s.NEED=!0;return h(M,e),b[e]=M,i(i.G+i.W+i.F*(M!=y),b),v||g.setStrong(M,e,m),M}},function(e,t,r){"use strict";var n=r(42),i=r(64),a=r(21),o=r(74),s=r(16);e.exports=function(e,t,r){var u=s(e),l=r(o,u,""[e]),c=l[0],f=l[1];a(function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})&&(i(String.prototype,e,c),n(RegExp.prototype,u,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,r){var n=r(52),i=r(290),a=r(192),o=r(12),s=r(30),u=r(202),l={},c={},t=e.exports=function(e,t,r,f,d){var h,p,g,m,v=d?function(){return e}:u(e),y=n(r,f,t?2:1),M=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(a(v)){for(h=s(e.length);h>M;M++)if((m=t?y(o(p=e[M])[0],p[1]):y(e[M]))===l||m===c)return m}else for(g=v.call(e);!(p=g.next()).done;)if((m=i(g,y,p.value,t))===l||m===c)return m};t.BREAK=l,t.RETURN=c},function(e,t,r){var n=r(16)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},e(a)}catch(e){}return r}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){"use strict";var n=r(13),i=r(26),a=r(35),o=r(16)("species");e.exports=function(e){var t=n[e];a&&t&&!t[o]&&i.f(t,o,{configurable:!0,get:function(){return this}})}},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){g&&h&&(g=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!g){var e=i(o);g=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,g=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var h,p=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new u(e,t)),1!==p.length||g||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(129),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){"use strict";t.__esModule=!0;var n=r(497),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,i.default)(e)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){(0,c.default)(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function a(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++)this.glyphs[r]=t[r];this.length=t&&t.length||0}function o(e,t){return new d.default({index:t,font:e})}function s(e,t,r,n,a,o){return function(){var s=new d.default({index:t,font:e});return s.path=function(){r(s,n,a);var t=o(e.glyphs,s);return t.unitsPerEm=e.unitsPerEm,t},i(s,"xMin","_xMin"),i(s,"xMax","_xMax"),i(s,"yMin","_yMin"),i(s,"yMax","_yMax"),s}}function u(e,t,r,n){return function(){var i=new d.default({index:t,font:e});return i.path=function(){var t=r(e,i,n);return t.unitsPerEm=e.unitsPerEm,t},i}}Object.defineProperty(t,"__esModule",{value:!0});var l=r(129),c=n(l),f=r(209),d=n(f);a.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},a.prototype.push=function(e,t){this.glyphs[e]=t,this.length++},t.default={GlyphSet:a,glyphLoader:o,ttfGlyphLoader:s,cffGlyphLoader:u}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){return e}}function a(e){return e>=-128&&e<=127}function o(e,t,r){for(var n=0,i=e.length;t<i&&n<64&&0===e[t];)++t,++n;return r.push(128|n-1),t}function s(e,t,r){for(var n=0,i=e.length,o=t;o<i&&n<64;){var s=e[o];if(!a(s))break;if(0===s&&o+1<i&&0===e[o+1])break;++o,++n}r.push(n-1);for(var u=t;u<o;++u)r.push(e[u]+256&255);return o}function u(e,t,r){for(var n=0,i=e.length,o=t;o<i&&n<64;){var s=e[o];if(0===s)break;if(a(s)&&o+1<i&&a(e[o+1]))break;++o,++n}r.push(64|n-1);for(var u=t;u<o;++u){var l=e[u];r.push(l+65536>>8&255,l+256&255)}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.sizeOf=t.encode=t.decode=void 0;var l=r(4),c=n(l),f=r(505),d=n(f),h=r(22),p=n(h),g={},m={},v={};m.BYTE=function(e){return p.default.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},v.BYTE=i(1),m.CHAR=function(e){return[e.charCodeAt(0)]},v.CHAR=i(1),m.CHARARRAY=function(e){for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},v.CHARARRAY=function(e){return e.length},m.USHORT=function(e){return[e>>8&255,255&e]},v.USHORT=i(2),m.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},v.SHORT=i(2),m.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},v.UINT24=i(3),m.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},v.ULONG=i(4),m.LONG=function(e){return e>=2147483648&&(e=-(4294967296-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},v.LONG=i(4),m.FIXED=m.ULONG,v.FIXED=v.ULONG,m.FWORD=m.SHORT,v.FWORD=v.SHORT,m.UFWORD=m.USHORT,v.UFWORD=v.USHORT,m.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},v.LONGDATETIME=i(8),m.TAG=function(e){return p.default.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},v.TAG=i(4),m.Card8=m.BYTE,v.Card8=v.BYTE,m.Card16=m.USHORT,v.Card16=v.USHORT,m.OffSize=m.BYTE,v.OffSize=v.BYTE,m.SID=m.USHORT,v.SID=v.USHORT,m.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?(e-=108,[247+(e>>8),255&e]):e>=-1131&&e<=-108?(e=-e-108,[251+(e>>8),255&e]):e>=-32768&&e<=32767?m.NUMBER16(e):m.NUMBER32(e)},v.NUMBER=function(e){return m.NUMBER(e).length},m.NUMBER16=function(e){return[28,e>>8&255,255&e]},v.NUMBER16=i(3),m.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},v.NUMBER32=i(5),m.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*n)/n).toString()}for(var i="",a=0,o=t.length;a<o;a+=1){var s=t[a];i+="e"===s?"-"===t[++a]?"c":"b":"."===s?"a":"-"===s?"e":s}i+=1&i.length?"f":"ff";for(var u=[30],l=0,c=i.length;l<c;l+=2)u.push(parseInt(i.substr(l,2),16));return u},v.REAL=function(e){return m.REAL(e).length},m.NAME=m.CHARARRAY,v.NAME=v.CHARARRAY,m.STRING=m.CHARARRAY,v.STRING=v.CHARARRAY,g.UTF8=function(e,t,r){for(var n=[],i=r,a=0;a<i;a++,t+=1)n[a]=e.getUint8(t);return String.fromCharCode.apply(null,n)},g.UTF16=function(e,t,r){for(var n=[],i=r/2,a=0;a<i;a++,t+=2)n[a]=e.getUint16(t);return String.fromCharCode.apply(null,n)},m.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e.charCodeAt(r);t[t.length]=n>>8&255,t[t.length]=255&n}return t},v.UTF16=function(e){return 2*e.length};var y={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};g.MACSTRING=function(e,t,r,n){var i=y[n];if(void 0!==i){for(var a="",o=0;o<r;o++){var s=e.getUint8(t+o);a+=s<=127?String.fromCharCode(s):i[127&s]}return a}};var M="function"==typeof d.default&&new d.default,w=void 0,x=function(e){if(!w){w={};for(var t in y)w[t]=new String(t)}var r=w[e];if(void 0!==r){if(M){var n=M.get(r);if(void 0!==n)return n}var i=y[e];if(void 0!==i){for(var a={},o=0;o<i.length;o++)a[i.charCodeAt(o)]=o+128;return M&&M.set(r,a),a}}};m.MACSTRING=function(e,t){var r=x(t);if(void 0!==r){for(var n=[],i=0;i<e.length;i++){var a=e.charCodeAt(i);if(a>=128&&void 0===(a=r[a]))return;n[i]=a}return n}},v.MACSTRING=function(e,t){var r=m.MACSTRING(e,t);return void 0!==r?r.length:0},m.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;){var n=e[t];t=0===n?o(e,t,r):n>=-128&&n<=127?s(e,t,r):u(e,t,r)}return r},m.INDEX=function(e){for(var t=1,r=[t],n=[],i=0;i<e.length;i+=1){var a=m.OBJECT(e[i]);Array.prototype.push.apply(n,a),t+=a.length,r.push(t)}if(0===n.length)return[0,0];for(var o=[],s=1+Math.floor(Math.log(t)/Math.log(2))/8|0,u=[void 0,m.BYTE,m.USHORT,m.UINT24,m.ULONG][s],l=0;l<r.length;l+=1){var c=u(r[l]);Array.prototype.push.apply(o,c)}return Array.prototype.concat(m.Card16(e.length),m.OffSize(s),o,n)},v.INDEX=function(e){return m.INDEX(e).length},m.DICT=function(e){for(var t=[],r=(0,c.default)(e),n=r.length,i=0;i<n;i+=1){var a=parseInt(r[i],0),o=e[a];t=t.concat(m.OPERAND(o.value,o.type)),t=t.concat(m.OPERATOR(a))}return t},v.DICT=function(e){return m.DICT(e).length},m.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},m.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var n=0;n<t.length;n+=1)p.default.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(m.OPERAND(e[n],t[n]));else if("SID"===t)r=r.concat(m.NUMBER(e));else if("offset"===t)r=r.concat(m.NUMBER32(e));else if("number"===t)r=r.concat(m.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(m.REAL(e))}return r},m.OP=m.BYTE,v.OP=v.BYTE;var b="function"==typeof d.default&&new d.default;m.CHARSTRING=function(e){if(b){var t=b.get(e);if(void 0!==t)return t}for(var r=[],n=e.length,i=0;i<n;i+=1){var a=e[i];r=r.concat(m[a.type](a.value))}return b&&b.set(e,r),r},v.CHARSTRING=function(e){return m.CHARSTRING(e).length},m.OBJECT=function(e){var t=m[e.type];return p.default.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},v.OBJECT=function(e){var t=v[e.type];return p.default.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},m.TABLE=function(e){for(var t=[],r=e.fields.length,n=[],i=[],a=0;a<r;a+=1){var o=e.fields[a],s=m[o.type];p.default.argument(void 0!==s,"No encoding function for field type "+o.type+" ("+o.name+")");var u=e[o.name];void 0===u&&(u=o.value);var l=s(u);"TABLE"===o.type?(i.push(t.length),t=t.concat([0,0]),n.push(l)):t=t.concat(l)}for(var c=0;c<n.length;c+=1){var f=i[c],d=t.length;p.default.argument(d<65536,"Table "+e.tableName+" too big."),t[f]=d>>8,t[f+1]=255&d,t=t.concat(n[c])}return t},v.TABLE=function(e){for(var t=0,r=e.fields.length,n=0;n<r;n+=1){var i=e.fields[n],a=v[i.type];p.default.argument(void 0!==a,"No sizeOf function for field type "+i.type+" ("+i.name+")");var o=e[i.name];void 0===o&&(o=i.value),t+=a(o),"TABLE"===i.type&&(t+=2)}return t},m.RECORD=m.TABLE,v.RECORD=v.TABLE,m.LITERAL=function(e){return e},v.LITERAL=function(e){return e.length},t.decode=g,t.encode=m,t.sizeOf=v},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return(0,L.default)("svg",{attrs:{width:0,height:0}},[(0,L.default)("filter",{attrs:{id:"glowfilter"}},[(0,L.default)("feGaussianBlur",{attrs:{in:"SourceAlpha",stdDeviation:50,result:"blur"}}),(0,L.default)("feOffset",{attrs:{in:"blur",dx:0,dy:0,result:"offsetBlur"}}),(0,L.default)("feFlood",{attrs:{"flood-color":C,"flood-opacity":1,result:"offsetColor"}}),(0,L.default)("feComposite",{attrs:{in:"offsetColor",in2:"offsetBlur",operator:"in",result:"offsetBlurComposed"}}),(0,L.default)("feMerge",[(0,L.default)("feMergeNode",{attrs:{in:"offsetBlurComposed"}}),(0,L.default)("feMergeNode",{attrs:{in:"SourceGraphic"}})])])])}function a(e,t){return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:O,filter:N,d:"M744.25 70.953c-64.735-46.677-146.050-70.016-243.947-70.016-74.445 0-137.306 16.411-188.355 49.29-81.031 51.447-124.075 138.839-129.298 262.062h187.787c0-35.945 10.505-70.413 31.402-103.803 20.954-33.276 56.501-49.914 106.642-49.914 50.993 0 86.142 13.515 105.279 40.488 19.25 27.086 28.847 57.012 28.847 89.833 0 28.62-14.309 54.797-31.629 78.534-9.483 13.856-21.975 26.632-37.535 38.273 0 0-101.816 65.302-146.505 117.772-25.894 30.38-28.222 75.978-30.551 141.281-0.113 4.656 1.647 14.309 17.887 14.309 16.297 0 131.513 0 145.993 0 14.537 0 17.547-10.733 17.716-15.559 1.023-23.736 3.634-35.945 8.006-49.687 8.177-25.95 30.551-48.551 55.592-68.085l51.674-35.604c46.677-36.399 83.871-66.211 100.338-89.607 28.052-38.386 47.812-85.745 47.812-141.962-0.057-91.707-32.424-160.814-97.158-207.605zM497.293 791.608c-64.678-1.987-118.056 42.816-120.1 113.002-1.987 70.073 48.722 116.465 113.456 118.34 67.517 1.987 119.475-41.282 121.576-111.469 1.931-70.186-47.359-117.885-114.933-119.872z"}})])}function o(e,t){return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:O,filter:N,d:"M896 256h-190.016c0 0-1.984-3.808-1.984-48s-35.808-80-80-80h-256c-44.192 0-80 35.808-80 80s1.984 48 1.984 48h-193.984c-35.328 0-64 28.672-64 64v512c0 35.328 28.672 64 64 64h800c35.328 0 64-28.672 64-64v-512c0-35.328-28.672-64-64-64zM497.44 767.136c-106.048 0-192-85.952-192-192 0-106.016 85.952-192 192-192 106.016 0 192 85.952 192 192s-85.984 192-192 192z"}})])}function s(e,t){return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:O,filter:N,d:"M1024 608l-192-192v-288h-128v160l-192-192-512 512v32h128v320h320v-192h128v192h320v-320h128z"}})])}function u(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M286.547 465.016c16.843 16.812 81.716 85.279 81.716 85.279l35.968-37.093-56.373-58.248 108.214-114.934c0 0-48.842-47.623-27.468-28.655 20.438-75.903 1.812-160.589-55.842-220.243-57.154-59.186-138.37-78.592-211.337-58.218l123.653 127.715-32.53 125.309-121.060 33.438-123.59-127.748c-19.718 75.436-0.969 159.339 56.311 218.556 60.093 62.123 146.621 80.373 222.338 54.842zM698.815 589.231l-149.121 147.308 245.932 254.805c20.062 20.812 46.498 31.188 72.872 31.188 26.25 0 52.624-10.375 72.811-31.188 40.249-41.624 40.249-108.997 0-150.62l-242.494-251.493zM1023.681 161.838l-156.621-161.839-461.673 477.298 56.373 58.248-276.335 285.616-63.154 33.749-89.217 145.559 22.719 23.562 140.839-92.247 32.655-65.312 276.336-285.554 56.404 58.248 461.674-477.328z"}})])}function l(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z"}})])}function c(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:j},e),style:{padding:R,boxSizing:P}},[(0,L.default)("g",{attrs:{transform:"matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)"}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z"}})])])}function f(e,t){return(0,L.default)("svg",{style:t,attrs:(0,I.default)({viewBox:"0 0 800.000000 800.000000",preserveAspectRatio:"xMidYMid meet"},e)},[(0,L.default)("g",{attrs:{transform:"translate(0.000000,800.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"}},[(0,L.default)("path",{attrs:{d:"M4450 7334 c-651 -47 -1223 -245 -1740 -602 -177 -122 -473 -355 -655 -516 -113 -100 -433 -415 -487 -479 l-40 -47 337 2 336 3 33 100 c81 249 197 406 443 602 460 366 982 588 1578 669 184 25 610 26 785 1 180 -25 352 -62 482 -103 232 -74 538 -233 746 -388 147 -110 332 -297 410 -416 171 -259 278 -575 313 -924 21 -209 1 -665 -37 -848 l-6 -28 -504 0 -503 0 -42 83 c-158 316 -444 517 -794 557 -49 5 -96 10 -102 10 -10 0 -13 25 -13 93 0 213 -90 375 -249 451 l-66 31 -1640 0 -1640 0 -57 -27 c-106 -49 -192 -151 -229 -269 -34 -109 -65 -99 304 -99 287 0 326 -2 356 -18 100 -50 106 -186 12 -249 -34 -23 -37 -23 -368 -23 l-334 0 3 -387 c4 -362 5 -392 25 -450 42 -126 135 -232 241 -275 l57 -23 1310 -3 1310 -2 30 -86 c112 -331 400 -579 760 -655 77 -17 293 -17 370 0 328 69 600 284 729 574 l25 57 411 0 411 0 -7 -22 c-16 -54 -80 -167 -174 -307 -166 -248 -223 -394 -250 -640 -37 -331 42 -762 226 -1240 25 -63 43 -115 42 -116 -9 -7 -453 -121 -618 -159 -600 -137 -1072 -188 -1317 -141 -164 31 -240 99 -349 310 -110 213 -183 304 -279 346 -40 18 -74 24 -173 27 -149 5 -240 -5 -587 -70 -395 -74 -471 -72 -702 24 -65 27 -73 33 -78 61 -3 18 -16 169 -30 337 -62 758 -105 990 -198 1088 -37 39 -96 71 -221 119 -50 19 -106 44 -125 55 -32 20 -33 23 -27 69 4 27 20 93 36 148 17 55 30 105 30 111 0 6 -36 10 -94 10 l-93 0 -29 -102 c-39 -141 -40 -258 -4 -311 33 -49 108 -100 195 -132 39 -15 100 -40 137 -57 64 -29 69 -34 87 -82 45 -122 76 -352 126 -946 19 -234 39 -435 44 -446 10 -24 196 -107 317 -143 190 -55 273 -53 638 14 322 59 432 75 536 75 163 0 200 -27 301 -225 149 -289 255 -395 446 -447 98 -26 409 -36 589 -19 289 28 646 94 1039 191 237 58 616 164 640 178 10 5 -2 42 -47 146 -208 487 -315 980 -279 1296 25 217 78 358 208 547 102 150 169 266 209 369 28 69 42 94 58 98 46 11 74 57 104 171 65 241 113 484 144 735 20 163 17 645 -5 795 -38 254 -103 475 -203 683 -255 534 -713 915 -1369 1139 -184 62 -389 106 -625 133 -101 11 -487 21 -580 14z"}})])])}function d(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z"}})])}function h(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:P}},[t.active?(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M448 576v416l-160-160-192 192-96-96 192-192-160-160zM1024 96l-192 192 160 160h-416v-416l160 160 192-192z"}}):(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M1024 0v416l-160-160-192 192-96-96 192-192-160-160zM448 672l-192 192 160 160h-416v-416l160 160 192-192z"}})])}function p(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M884.907 256h-748.373c-27.733 0-51.2 24.32-51.2 54.187v446.293c0 29.867 23.467 54.187 52.48 54.187h203.52c23.040 0 42.667-13.653 49.493-33.707l59.307-148.053c10.24-24.747 34.133-42.24 61.867-42.24s51.627 17.493 61.867 42.24l59.307 148.053c8.107 20.053 26.453 33.707 47.36 33.707h204.373c30.293 0 53.76-24.32 53.76-54.187v-446.293c0-29.867-23.467-54.187-53.76-54.187zM308.053 622.080c-52.053 0-94.72-43.947-94.72-97.707 0-55.040 42.667-97.707 94.72-97.707s94.293 42.667 94.293 97.707c0 53.76-42.24 97.707-94.293 97.707zM715.947 622.080c-52.053 0-94.293-43.947-94.293-97.707s42.24-97.707 94.293-97.707c52.053 0 94.72 43.947 94.72 97.707s-42.667 97.707-94.72 97.707z"}})])}function g(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:P}},[t.active?(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M317.143 762.857l44.571-80.571q-49.714-36-77.714-90.857t-28-116q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 95.429 147.429 244 214.286zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM746.857 220q0 4-0.571 5.143-60 107.429-180 323.429t-180.571 324l-28 50.857q-5.714 9.143-16 9.143-6.857 0-76.571-40-9.143-5.714-9.143-16 0-6.857 25.143-49.714-81.714-37.143-150.571-98.857t-119.143-140q-11.429-17.714-11.429-39.429t11.429-39.429q87.429-134.286 217.143-212t283.429-77.714q50.857 0 102.857 9.714l30.857-55.429q5.714-9.143 16-9.143 2.857 0 10.286 3.429t17.714 8.857 18.857 10.571 18 10.571 11.143 6.571q9.143 5.714 9.143 15.429zM768 475.429q0 79.429-45.143 144.857t-119.429 94l160-286.857q4.571 25.714 4.571 48zM1024 548.571q0 20-11.429 39.429-22.286 36.571-62.286 82.857-85.714 98.286-198.571 152.571t-239.714 54.286l42.286-75.429q121.143-10.286 224.286-78.286t172.286-175.429q-65.714-102.286-161.143-168l36-64q54.286 36.571 104.286 87.429t82.571 105.143q11.429 19.429 11.429 39.429z"}}):(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M950.857 548.571q-86.857-134.857-217.714-201.714 34.857 59.429 34.857 128.571 0 105.714-75.143 180.857t-180.857 75.143-180.857-75.143-75.143-180.857q0-69.143 34.857-128.571-130.857 66.857-217.714 201.714 76 117.143 190.571 186.571t248.286 69.429 248.286-69.429 190.571-186.571zM539.429 329.143q0-11.429-8-19.429t-19.429-8q-71.429 0-122.571 51.143t-51.143 122.571q0 11.429 8 19.429t19.429 8 19.429-8 8-19.429q0-49.143 34.857-84t84-34.857q11.429 0 19.429-8t8-19.429zM1024 548.571q0 19.429-11.429 39.429-80 131.429-215.143 210.571t-285.429 79.143-285.429-79.429-215.143-210.286q-11.429-20-11.429-39.429t11.429-39.429q80-130.857 215.143-210.286t285.429-79.429 285.429 79.429 215.143 210.286q11.429 20 11.429 39.429z"}})])}function m(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M395 37.2c-24.2 1.4-50.2 3.6-57.8 4.8-28.2 4.4-60.2 22.8-77.4 44.4-7.8 9.8-23.4 39-21.6 40.4 1.2 1 26.4 9.2 26.6 8.6 0.2-0.2 3.2-6.4 7-13.8 11.6-23.6 38.8-44 65.4-49.6 9.2-1.8 59.8-6 74.4-6h6.4v85.6l-16.4 1.2c-9.2 0.6-38.2 2-64.6 3.2-52.8 2.4-92.6 6.4-108 11-13 3.8-24.6 11.4-31.4 20.8-5 7-15.6 38.6-21.6 64l-2.6 10.6-8.2-1.2c-4.4-0.8-11.4-1.8-15.2-2.4l-7-1.2-17.6 88.4c-12.8 63.6-17 89-15.4 90 1.2 0.8 8.4 2.4 15.8 3.8l13.4 2.4-1.8 13.4c-1 7.4-1.8 31-2 52.4-0.2 34.6 0.2 40.4 4 51.4 15.2 45.6 59.8 72 133 78.6 24 2.2 25.2 2.2 42.6-3 62.8-18.2 121.4-24.2 219-22.4 79 1.6 130.2 8 175.6 22.4 15 4.8 17 5 38.6 3.2 73.4-6.2 118.6-32.2 134.8-77.2 4.6-13.2 6.4-64.6 3.2-95.2-1.4-12.2-2-22.6-1.6-23s6.8-2 14.2-3.6c7.4-1.4 13.8-3.2 14.4-3.6 0.4-0.6-7-40.4-16.8-88.8l-17.6-87.8-5.8 0.2c-3.4 0-10.2 0.8-15.2 1.6l-9.2 1.6-6.2-25c-9-35.4-13.2-45.8-22.2-54-8.8-8-30-18.4-43.6-21.6-15.4-3.4-63.8-7.4-120-10.2l-52.6-2.4v-85.6l5.6 1.2c3 0.6 18 1.6 33.4 2.2 15.4 0.8 34 2.6 41.6 4 28.2 5.8 54.4 26 67 51.6 3.8 7.6 7.8 13.2 9 12.8 1.4-0.4 7.2-2.4 13-4.2 5.6-2 10.4-4.6 10.4-6 0-1.6-3.4-9.4-7.4-17.4-10.6-21.4-32.6-43-54.4-53.6-9.2-4.4-23-9.4-31-11-38.2-8.2-203.8-11.6-296.2-6zM592 186c68.4 3.2 106 9 132.2 20.2 12 5.2 16.8 11.8 34.2 46.8 37.6 75 76.8 210.6 72.6 250.6-0.8 7.4-2.6 15.6-4 18.6-3.6 6.8-18.4 20.2-32.4 29.2-12.4 7.8-61.8 32-76.6 37.4-8.6 3-8.8 3-4-0.4 49.6-35 63.4-45.6 76.6-58.4 17.8-17.6 17.4-16 12.4-56-4.8-39-20-94.8-40.4-149-11-29.4-36.4-82.4-42.4-88.4-7.4-7.8-43.2-16.4-86.2-20.6-34.4-3.4-158.2-4.8-206.8-2.2-60.4 3.2-89.4 7.4-112.2 16.4-12 4.6-16.8 11.6-33.6 49.8-38 86.6-61.4 172.2-61.4 224.4v15.4l13.2 13.2c12.8 12.6 43.4 35.6 67.4 50.4 6.2 4 11.2 7.6 10.6 8-1.2 1.4-40.4-15-62.8-26.2-24.8-12.4-45-26.6-49-34.6-1.6-3-4-15.6-5.4-27.6-2.2-20-2-24.2 1.8-46.4 8-46.4 22.4-94.6 45.6-153.6 13.4-34 32-73 40.2-84.2 7.8-10.6 21.2-17 46.4-22.4 19.2-4.2 70.6-10 98-11 38.6-1.6 127.2-1.2 166 0.6zM194 656.8c0 6.4 6 33 10 45.2 21.6 63.6 98.4 169.8 171 236.8 28 25.8 44 37.4 60.8 44.2 25.2 10.4 69 15 103.6 11.2 52.2-6 69.8-16 125.6-71 90-89.2 156-193 163.8-257.8l1.4-11.4h-30.2v7.6c0 19.8-18 63.4-41.8 101.4-38 60.2-102 134.8-150 174.8-25.4 21-49.8 28.2-96.2 28.2-41.2 0-63.6-5.4-85.6-20.4-15.8-10.8-56-49.2-79-75.6-73.4-83.8-117.8-157.2-124.4-205.6l-1.4-10.4h-13.8c-10.6 0-13.8 0.6-13.8 2.8zM407.2 770.6c-1.8 7.4-3.2 13.6-3.2 14.2 0 1.6 28 7.4 55 11.4 43.2 6.4 79.6 4.6 136-6.2 12.2-2.4 22.2-4.6 22.6-5 0.4-0.2-1-6.6-2.8-14l-3.4-13.4-7.2 1c-4 0.6-17.6 3.2-30.2 5.6-33.6 6.6-93.2 6.6-126 0.2-12.6-2.6-26.2-5.2-30.2-5.8l-7.2-1-3.4 13z"}})])}function v(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M1024 384h-384l143.53-143.53c-72.53-72.526-168.96-112.47-271.53-112.47s-199 39.944-271.53 112.47c-72.526 72.53-112.47 168.96-112.47 271.53s39.944 199 112.47 271.53c72.53 72.526 168.96 112.47 271.53 112.47s199-39.944 271.528-112.472c6.056-6.054 11.86-12.292 17.456-18.668l96.32 84.282c-93.846 107.166-231.664 174.858-385.304 174.858-282.77 0-512-229.23-512-512s229.23-512 512-512c141.386 0 269.368 57.326 362.016 149.984l149.984-149.984v384z"}}),(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M512 250l262 262-262 262-262-262z"}})])}function y(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:j},e),style:{padding:R,boxSizing:P}},[(0,L.default)("g",{attrs:{transform:"matrix(0.49680763,0.49680763,-0.49680763,0.49680763,255.01217,2.6223229)"}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M -0.49680099,-1.4900844 -0.49680795,206.9137 79.659562,126.75733 207.90699,255.00476 79.657586,383.25416 -0.49680795,303.09977 l 4.41e-6,208.40379 208.40379354,0 -80.15637,-80.15637 128.2494,-128.2494 c 43.4197,43.41971 90.25956,90.25956 128.2494,128.2494 l -80.15637,80.15637 208.4038,0 0,-208.40379 -80.1544,80.15439 -128.2494,-128.2494 c 42.74914,-42.74914 85.49828,-85.49828 128.24743,-128.24743 l 80.15637,80.15637 -10e-6,-208.4037813 -208.40379,-1e-5 80.1544,80.1543943 C 341.4983,121.41344 298.74916,164.16259 256.00002,206.91173 L 127.75259,78.664303 207.90699,-1.4900913 Z"}}),(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M256 0l256 256-256 256-256-256z"}})])])}function M(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M992.262 871.396l-242.552-206.294c-25.074-22.566-51.89-32.926-73.552-31.926 57.256-67.068 91.842-154.078 91.842-249.176 0-212.078-171.922-384-384-384-212.076 0-384 171.922-384 384s171.922 384 384 384c95.098 0 182.108-34.586 249.176-91.844-1 21.662 9.36 48.478 31.926 73.552l206.294 242.552c35.322 39.246 93.022 42.554 128.22 7.356s31.892-92.898-7.354-128.22zM384 640c-141.384 0-256-114.616-256-256s114.616-256 256-256 256 114.616 256 256-114.614 256-256 256z"}}),(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M375 181l200 200-200 200-200-200z"}})])}function w(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M64 0h384v1024h-384z"}}),(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M576 0h384v1024h-384z"}})])}function x(e,t){var r=t.active?t.activeColor:O;return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:z},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M138 0L1024 512L138 1024z"}})])}function b(e,t){var r=t.active?t.activeColor:"#000";return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:"0 0 32 32"},e),style:{padding:R,boxSizing:P}},[(0,L.default)("path",{attrs:{fill:r,filter:N,d:"M16 0c-8.837 0-16 7.163-16 16s7.163 16 16 16 16-7.163 16-16-7.163-16-16-16zM16 28c-6.627 0-12-5.373-12-12s5.373-12 12-12c6.627 0 12 5.373 12 12s-5.373 12-12 12zM10 16c0-3.314 2.686-6 6-6s6 2.686 6 6c0 3.314-2.686 6-6 6s-6-2.686-6-6z"}})])}function T(e,t){t.active&&t.activeColor;return(0,L.default)("svg",{attrs:{}},[(0,L.default)("g",[(0,L.default)("line",{attrs:{x1:2,y1:2,x2:30,y2:30},style:{stroke:"black",strokeWidth:3}}),(0,L.default)("line",{attrs:{x1:30,y1:2,x2:2,y2:30},style:{stroke:"black",strokeWidth:3}})]),(0,L.default)("g",[(0,L.default)("line",{attrs:{x1:2.4,y1:2.4,x2:29.6,y2:29.6},style:{stroke:"white",strokeWidth:2}}),(0,L.default)("line",{attrs:{x1:29.6,y1:2.4,x2:2.4,y2:29.6},style:{stroke:"white",strokeWidth:2}})])])}function S(e,t){var r=t.active?t.activeColor:"#000";return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:"0 0 32 32"},e),style:{padding:R,boxSizing:P}},[(0,L.default)("rect",{attrs:{fill:r,filter:N,x:2,y:2,width:28,height:28}})])}function _(e,t){var r=t.active?t.activeColor:"#000";return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:"0 0 32 32"},e),style:{padding:R,boxSizing:P}},[(0,L.default)("circle",{attrs:{fill:r,filter:N,r:14,cx:16,cy:16}})])}function E(e,t){var r=t.active?t.activeColor:"#000";return(0,L.default)("svg",{attrs:(0,I.default)({viewBox:"0 0 32 32"},e),style:{padding:R,boxSizing:P}},[(0,L.default)("polygon",{attrs:{fill:r,filter:N,points:"16,2 28,28 2,28"}})])}Object.defineProperty(t,"__esModule",{value:!0});var A=r(97),I=n(A);t.glowFilter=i,t.help=a,t.snapshot=o,t.home=s,t.configurator=u,t.orbit=l,t.pan=c,t.vrHeadSet=f,t.zoom=d,t.fullscreen=h,t.vrSettings=p,t.lenticularMode=g,t.deviceTracking=m,t.nodeRotate=v,t.nodeMove=y,t.nodeScale=M,t.pause=w,t.play=x,t.select=b,t.exit=T,t.box=S,t.sphere=_,t.cone=E;var D=r(37),L=n(D),N="url(#glowfilter)",C="#000",O="#fff",R="0",P="border-box",z="-300 -300 1624 1624",j="-150 -150 812 812"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={gray:"#999",black:"#333",lightBg:"#eee",border:"#ccc",white:"#fff"};t.default={root:{height:"100%",fontSize:"14px",fontFamily:"'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Verdana, Tahoma, sans-serif",position:"absolute",top:0,left:0,right:0,bottom:0},absoluteMaxCentered:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},header:{display:"flex",flex:"0 0 auto",justifyContent:"center",margin:"0",backgroundColor:n.lightBg,fontFamily:'-apple-system,".SFNSDisplay-Bold","Helvetica Neue","Roboto","Segoe UI",sans-serif'},mainRow:{display:"flex",flex:"1 1 100px",justifyContent:"center"},statsRow:{flex:"0 0 auto",backgroundColor:n.gray,color:n.lightBg,padding:"5px"},player:{position:"relative",top:0,left:0,right:0,bottom:0,height:"100%",width:"100%"},maxRow:{flex:"1 1 auto"},leftCol:{flex:"1 1 200px",maxWidth:"300px",overflow:"scroll"},centerCol:{flex:"2 2 500px",border:"1px solid "+n.border},rightCol:{flex:"1 1 200px",maxWidth:"300px",overflow:"scroll"},footer:{flex:"0 0 auto",padding:"5px",backgroundColor:n.lightBg,margin:"0"},explorerSelected:{backgroundColor:n.gray},explorerNotSelected:{backgroundColor:n.white,cursor:"pointer"}}},function(e,t,r){"use strict";function n(e){return function(t){var r=e[t];if(!r)throw new Error("Unknown content hash: "+t);try{return JSON.parse(r)}catch(e){throw console.log("Error parsing hash: "+t),new Error(e)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){this.data=new Uint32Array(e+31>>>5),this.length=e,this.byteView=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,clear:function(){return this.data.fill(0),this},fill:function(e,t){var r=this.data,n=void 0!==e?e:0,i=void 0!==t?n+t:this.length,a=n>>>5,o=i>>>5,s=-2147483648>>~n,u=(1<<i)-1;return a===o?r[a]|=s&u:(r[a]|=s,++a!==o&&r.fill(-1,a,o),r[o]|=u),this},include:function(e){this.data[e>>>5]|=1<<e},exclude:function(e){this.data[e>>>5]&=~(1<<e)},contains:function(e){return 0!=(this.data[e>>>5]&1<<e)},swap:function(e,t){var r=this.data,n=e>>>5,i=1<<e,a=t>>>5,o=1<<t,s=0!=(r[n]&i);s!==(0!=(r[a]&o))&&(s?(r[n]&=~i,r[a]|=o):(r[n]|=i,r[a]&=~o))},testAndInclude:function(e){var t=this.data,r=e>>>5,n=1<<e,i=t[r];return t[r]=i|n,0!=(i&n)},includeFromArray:function(e,t,r){for(var n=this.data,i=t||0,a=r||e.length;i<a;++i){var o=e[i];n[o>>>5]|=1<<o}return this},containsAnyIn:function(e,t,r){for(var n=!1,i=this.data,a=t||0,o=r||e.length;a<o&&!n;++a){var s=e[a];n=0!=(i[s>>>5]&1<<s)}return n},countSetBits:function(e,t){var r=0,i=void 0!==e?e:0,a=void 0!==t?t:this.length;if(0==(a-i&-16384))r=this.countSetBitsInShortRange(i,a);else if(i<a){var o=this.byteView,s=n._ByteBitCount;null===o&&(o=new Uint8Array(this.data.buffer),this.byteView=o);var u=i>>>3,l=a>>>3,c=-2147483648>>31-(7&i),f=(1<<(7&a))-1;r=s[o[u]&c];for(var d=u+1;d!==l;++d)r+=s[o[d]];r+=s[o[l]&f]}return r},countSetBitsInShortRange:function(e,t){var r=0,n=this.data,i=e,a=i>>>5,o=n[a]>>i;for(r=1&o;++i!==t;)0!=(31&i)?o>>=1:o=0|n[++a],r+=1&o;return r},toIndexArray:function(e){for(var t=new Uint32Array(void 0===e?this.countSetBits():e),r=0,n=0,i=this.data,a=0,o=i.length;a!==o;++a){for(var s=i[a],u=r;0!==s;s>>>=1,++u)0!=(1&s)&&(t[n++]=u);r+=32}return t}},n._ByteBitCount=function(){for(var e=new Uint8Array(256),t=0;256!==t;++t){for(var r=0,n=t;0!==n;n>>>=1)0!=(1&n)&&++r;e[t]=r}return e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n){var i=void 0===r?0:r,a=void 0===n?1:n,o=(i+a-1)/a|0,s=null!==e?(o+e)*a:null,u=c.default.maybeCreate(t||Uint32Array,s);d.default.call(this,u,null!==e?e:(u.length-i+a-1)/a|0),this.offset=i,this.stride=a}Object.defineProperty(t,"__esModule",{value:!0});var a=r(48),o=n(a),s=r(2),u=n(s);t.default=i;var l=r(34),c=n(l),f=r(227),d=n(f),h=r(228),p=n(h);i.prototype=(0,u.default)((0,o.default)(d.default.prototype),{constructor:i,getAt:function(e){return this.array[this.offset+e*this.stride]},setAt:function(e,t){this.array[this.offset+e*this.stride]=t},newCompatibleView:function(e,t){return new i(t||null,e,0)},newCompatibleBuffer:function(){return new p.default(this.data.constructor)}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=r||{},i=new o.default(e);i.positions=t(i.positions,"positions",n),i.normalMap&&(i.normalMap=t(i.normalMap,"normalMap",n));for(var a=new u.default,s=0;s<e.uvMaps.length;s++){var l=e.uvMaps.namesByIndex[s],c=t(e.uvMaps.byName[l],l,n);a.set(l,c)}return i.uvMaps=a,i.faceRangeOffsets=i.positions.faceRangeOffsets,new o.default(i)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(5),o=n(a),s=r(18),u=n(s)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,a){var l=Math.PI/180,c=(new u.Matrix4).makeTranslation(i.x,i.y,i.z);n.multiplyScalar(l);for(var f=(new u.Matrix4).makeRotationFromEuler((new u.Euler).setFromVector3(n)).multiply(s(t)),d=(new u.Matrix4).multiplyMatrices(f,c),h=(new u.Matrix4).getInverse(d),p=new u.Vector3,g=0;g<e.length;++g)e.getAt(g,p),p.applyMatrix4(d),e.setAt(g,p);var m=-r*l,v=o(e.data);if(v<1e-6)return!1;var y=v/m,M=0;a&&(y=.5*v/Math.sin(m/2),M=Math.tan(m/4)*v*.5);for(var w=void 0,x=void 0,b=void 0,T=0;T<e.length;++T)e.getAt(T,p),w=p.y*m/v,x=Math.sin(w),b=Math.cos(w),p.y=p.x*x+x*y,p.x=p.x*b+b*y-y,p.x+=M,p.applyMatrix4(h),e.setAt(T,p);return!0}function a(e,t,r,n,a,o){if(0===r)return e;Math.PI;e=new d.default(e);var s=p.default.IdPositions,u=new c.default(p.default.resolveMap(e,s)),l=u.values.clone();return u.values=l,p.default.assignMap(e,s,u),s=p.default.IdNormals,u=new c.default(p.default.resolveMap(e,s)),l=u.values.clone(),u.values=l,p.default.assignMap(e,s,u),i(e.positions.values,t,r,n,a,o)&&(e=(0,g.recalculateNormalsFromConnectivity)(e)),e}function o(e){for(var t=e[1],r=e[1],n=4;n<e.length;n+=3)e[n]<t&&(t=e[n]),e[n]>r&&(r=e[n]);return r-t}function s(e){var t=new u.Matrix4;switch(e){case a.AxisTypes.X:t.makeRotationY(-Math.PI/2);break;case a.AxisTypes.Y:t.makeRotationX(Math.PI/2)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.bendVertices=i,t.default=a;var u=r(0),l=r(6),c=n(l),f=r(5),d=n(f),h=r(31),p=n(h),g=r(50);a.AxisTypes={X:1,Y:2,Z:3}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){if(!e.normalMap)return e;for(var n=t||!0,i=r||!1,o=e.positions.faceValueIndices,u=e.positions.values,c=new Uint32Array(e.normalMap.faceValueIndices),d=e.normalMap.values,p=0,g=void 0,m=void 0,v=[],y=0;y<u.length;y++)v[y]=[];for(var M=0;M<o.length;M++)v[o[M]].push(M);for(var w=0;w<v.length;w++)for(var x=0;x<v[w].length;x++){g=c[v[w][x]];for(var b=0;b<v[w].length;b++)m=c[v[w][x+b]],g!==m&&d.getAt(g).dot(d.getAt(m))>.99&&(c[v[w][x+b]]=g,p++)}i&&console.log("Normal Duplicates Found: "+p);var T=d;if(n&&p){var S=new l.default(a.Vector3),_=new Int32Array(d.length);_.fill(-1);for(var E=0,A=0;A<c.length;A++)-1===_[c[A]]&&(S.push(d.getAt(c[A])),_[c[A]]=E++),c[A]=_[c[A]];var I=new s.default(a.Vector3,E);I.fromArray(S.toArray()),T=I,i&&console.log(d.length+" normal values reduced to "+I.length+", duplicates removed: "+(d.length-I.length))}var D=new h.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:c,values:T}),L=new f.default(e);return L.normalMap=D,L}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(68),l=n(u),c=r(5),f=n(c),d=r(6),h=n(d)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=t||!1,n=new Uint32Array(e.positions.faceValueIndices),i=e.positions.values,a=new g.default(f.Vector3),s=new c.default,l=0,d=0,p=0,m=new f.Vector3,y=new f.Vector3,w=new f.Box3;w.setFromArray(new Float32Array(i.data));for(var x=Math.pow(2,16)/w.getSize().length(),b=0;b<n.length;b++)i.getAt(n[b],m),y.subVectors(m,w.min).multiplyScalar(x),y.x=(0,u.default)(y.x)*Math.pow(2,32),y.y=(0,u.default)(y.y)*Math.pow(2,16),y.z=(0,u.default)(y.z),d=y.x+y.y+y.z,s.has(d)?p=s.get(d):(s.set(d,l),p=l,a.push(m),l++),n[b]=p;if(r&&console.log(i.length+" values reduced to "+l+", duplicates removed: "+(i.length-l)),i.length===l)return e;var T=new h.default(f.Vector3,l);T.fromArray(a.toArray());var S=new M.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:n,values:T}),_=(0,o.default)({},e,{positions:S}),E=new v.default(_);return E.topologyChanged(!0),E}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a),s=r(258),u=n(s),l=r(257),c=n(l);t.default=i;var f=r(0),d=r(3),h=n(d),p=r(68),g=n(p),m=r(5),v=n(m),y=r(6),M=n(y)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=t.PolyMesh=t.PolyMaps=t.PolyMap=t.Importer=void 0,r(417);var i=r(459),a=n(i),o=r(5),s=n(o),u=r(6),l=n(u),c=r(31),f=n(c),d=r(70),h=n(d);t.Importer=a.default,t.PolyMap=l.default,t.PolyMaps=f.default,t.PolyMesh=s.default,t.Selection=h.default},function(e,t,r){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function i(t){if(t instanceof Uint32Array)return t;if(t instanceof ArrayBuffer)return new Uint32Array(t);if(void 0!==e&&t instanceof e)return new Uint32Array(new Uint8Array(t).buffer);throw new Error("Invalid bingeom type: "+(void 0===t?"undefined":(0,S.default)(t)))}function a(e){var t=e[e.length-2];if(!t)throw new Error("No footer in bingeom");var r=new Uint8Array(e.buffer),n=r.byteLength-8;return r=r.subarray(n-t,n),JSON.parse(String.fromCharCode.apply(null,r))}function o(e){return void 0!==e&&"number"==typeof e.o&&"number"==typeof e.l}function s(e){return e&&o(e.faceCount)&&o(e.faces)&&o(e.positions)}function u(e,t){if(!e)throw new Error(t)}function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return r?new A[r].arr(0):[];var n=A[r||E[t.b||4]];return new n.arr(e,t.o,t.l>>n.shift)}function c(e,t){return e}function f(e,t){if(e.length%t!=0)throw new Error("Invalid face index array");for(var r=t-2,n=e.length*r*3/t,i=new e.constructor(n),a=0,o=0,s=e.length;o<s;)for(var u=e[o++],l=e[o++],c=r;c>0;--c)i[a++]=u,i[a++]=l,l=e[o++],i[a++]=l;return i}function d(e,t){for(var r=t.length,n=-(r<<1),i=r-1;i>=0;--i)n+=t[i];for(var a=new e.constructor(3*n),o=0,s=0,u=0,l=t.length;u<l;++u)for(var c=e[s++],f=e[s++],d=t[u]-2;d>0;--d)a[o++]=c,a[o++]=f,f=e[s++],a[o++]=f;return a}function h(e){return I[e]}function p(){I={},D={}}function g(e,t){return I[e]=t,t}function m(e){var t=i(e),r=a(t),n=t.buffer;u(s(r),"Invalid Polymesh Data?");var o=l(n,r.positions,"RawFloat32"),h=l(n,r.faceCount),p=h;1===h.length&&(p=h[0]);var g=1===h.length?3!==h[0]?f:c:d,m=g(l(n,r.faces),p),v=r.normalMap&&{faces:g(l(n,r.normalMap.faces),p),values:l(n,r.normalMap.values,"RawFloat32")},y=null;if(r.uvMaps&&(0,b.default)(r.uvMaps).length){y={};for(var M in r.uvMaps)if(r.uvMaps.hasOwnProperty(M)){var w=r.uvMaps[M];y[M]={faces:g(l(n,w.faces),p),values:l(n,w.values,"RawFloat32")}}}return{positions:o,faces:m,normalMap:v,uvs:y}}function v(e){function t(e,t,n,i){var u=i?new i(t):t,l=new Uint8Array(u.buffer,u.byteOffset,t.byteLength),c=l.byteLength%4,f=0;if(c){f=4-c;var d=new Uint8Array(l.byteLength+f);d.set(l),l=d}for(var h=null,p=0;p<o.length;p++)if(r(l,o[p])){h=s[p];break}if(null!==h)n[e]=h;else{var g=i?i.BYTES_PER_ELEMENT:t.BYTES_PER_ELEMENT;n[e]={b:g,l:l.byteLength-f,o:a},a+=l.byteLength,o.push(l),s.push(n[e])}}function r(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={blendShapes:{},colorMaps:{}},a=0,o=[],s=[];if(t("faces",e.positions.faceValueIndices,i),t("faceCount",function(e){for(var t=new Uint32Array(e.length-1),r=0;r<e.length-1;r++)t[r]=e[r+1]-e[r];return t}(e.faceRangeOffsets),i),t("positions",e.positions.values.data,i,Float32Array),e.normalMap&&(i.normalMap={},t("faces",e.normalMap.faceValueIndices,i.normalMap),t("values",e.normalMap.values.data,i.normalMap,Float32Array)),e.tangentMap&&e.tangentMap.length&&(i.tangentMap={},t("faces",e.tangentMap.faceValueIndices,i.tangentMap),t("values",e.tangentMap.values.data,i.tangentMap,Float32Array)),e.uvMaps&&e.uvMaps.length&&(i.uvMaps={},e.uvMaps.namesByIndex.forEach(function(r){var n=e.uvMaps.byName[r];i.uvMaps[r]={},t("faces",n.faceValueIndices,i.uvMaps[r]),t("values",n.values.data,i.uvMaps[r],Float32Array)})),e.edgeCreaseWeights&&e.edgeCreaseWeights.length&&t("edgeCreaseWeights",e.edgeCreaseWeights,i,Float32Array),e.skinning&&(i.skinning={},t("positionSkinRange",e.skinning.positionSkinRange,i.skinning),t("skinWeights",e.skinning.skinWeights,i.skinning),t("poseSkinToPoseBoneTransform",e.skinning.poseSkinToPoseBoneTransform.data,i.skinning,Float32Array),t("skinBoneIndices",e.skinning.skinBoneIndices,i.skinning)),e.materialIds&&t("materialIds",e.materialIds,i,Uint32Array),e.blendShapes)for(var u in e.blendShapes)i.blendShapes[u]={},t("positions",e.blendShapes[u].positions.data,i.blendShapes[u],Float32Array),e.blendShapes[u].normals&&t("normals",e.blendShapes[u].normals.data,i.blendShapes[u],Float32Array),e.blendShapes[u].weights&&t("weights",e.blendShapes[u].weights.data,i.blendShapes[u],Float32Array);var l=(0,w.default)(i);l+={0:"",1:"   ",2:"  ",3:" "}[l.length%4];for(var c=0,f=new Uint8Array(a+l.length+8),d=0;d<o.length;d++)f.set(o[d],c),c+=o[d].byteLength;for(var h=0;h<l.length;h++)f[c++]=l.charCodeAt(h);var p=c>>2,g=new Uint32Array(f.buffer);return g[p]=l.length,g[p+1]=L,n.fbx?new Uint8Array(f.buffer):new Uint32Array(f.buffer)}function y(e,t){if(t&&D[t])return D[t];var r=i(e),n=a(r),o=r.buffer,c=Object.prototype.hasOwnProperty;if(n&&!n.faceCount&&!n.faces&&!n.positions)return console.warn("Warning: PolyMesh is empty."),new _.PolyMesh;u(s(n),"Invalid Polymesh Data?");var f=l(o,n.faceCount),d=new _.Importer;1===f.length?d.defaultFaceArity=f[0]:d.setFaceArities(f),d.collapsePositions=!1,d.collapseMapValues=!1;var h=l(o,n.faces),p=l(o,n.positions,"RawFloat32"),g=_.PolyMaps.id(_.PolyMaps.TypePosition);if(d.setMapIndices(g,h),d.setMapValues(g,p),n.normalMap){var m=l(o,n.normalMap.faces),v=l(o,n.normalMap.values,"RawFloat32"),y=_.PolyMaps.id(_.PolyMaps.TypeNormal);d.setMapIndices(y,m),d.setMapValues(y,v)}if(n.uvMaps&&(0,b.default)(n.uvMaps).length)for(var M in n.uvMaps)if(c.call(n.uvMaps,M)){var w=n.uvMaps[M],x=l(o,w.faces),T=l(o,w.values,"RawFloat32"),S=_.PolyMaps.id(_.PolyMaps.TypeUV,M);d.setMapIndices(S,x),d.setMapValues(S,T)}if(n.tangentMap){var E=l(o,n.tangentMap.faces),A=l(o,n.tangentMap.values,"RawFloat32"),I=_.PolyMaps.id(_.PolyMaps.TypeTangent);d.setMapIndices(I,E),d.setMapValues(I,A)}if(n.blendShapes){d.initializeBlendShape();for(var L in n.blendShapes)if(c.call(n.blendShapes,L)){var N=n.blendShapes[L],C=l(o,N.positions,"RawFloat32"),O=N.normals?l(o,N.normals,"RawFloat32"):null,R=N.weights?l(o,N.weights,"RawFloat32"):null;d.setBlendShapes(L,C,O,R)}}if(n.skinning&&d.setSkinning(l(o,n.skinning.positionSkinRange,"RawUint32"),l(o,n.skinning.skinWeights,"RawFloat32"),l(o,n.skinning.skinBoneIndices,"RawUint16"),l(o,n.skinning.poseSkinToPoseBoneTransform,"RawFloat32")),n.edgeCreaseWeights)d.setCreases(l(o,n.edgeCreaseWeights,"RawFloat32"));else if(n.creases){var P=l(o,n.creases.weights,"RawFloat32"),z=l(o,n.creases.edgeVertexIndices,"RawUint32");d.setCreases(P,z)}n.materialIds&&d.setMaterialIds(l(o,n.materialIds,"RawUint32"));var j=d.toMeshAndClear();return t&&(D[t]=j),j}Object.defineProperty(t,"__esModule",{value:!0});var M=r(47),w=n(M),x=r(4),b=n(x),T=r(38),S=n(T);t.validatePolymeshData=s,t.checkGeometryCache=h,t.clearGeometryCache=p,t.cacheGeometry=g,t.convertToPolyMesh=m,t.convertToBingeom=v,t.convertToCNSPolyMesh=y;var _=r(161),E={1:"RawUint8",2:"RawUint16",4:"RawUint32"},A={RawUint8:{shift:0,arr:Uint8Array},RawUint16:{shift:1,arr:Uint16Array},RawUint32:{shift:2,arr:Uint32Array},RawFloat32:{shift:2,arr:Float32Array}},I={},D={},L=1e3}).call(t,r(99).Buffer)},function(e,t,r){"use strict";function n(e){m[e].color=new f.Color(g[e]),m[e].needsUpdate=!0}function i(){["x","y","z"].forEach(n)}function a(e){var t=(0,d.getRect)(e),r=(new f.Vector3).copy(t.height<t.width?{x:0,y:.4,z:0}:{x:.4,y:0,z:0}),n=(0,h.getSelectedNodes)(e)[0];if(!n)return 0;var i=(new f.Vector3).setFromMatrixPosition((0,p.getWorldTransform)(e,n)),a=(0,d.getThreeCamera)(e),o=((new f.Vector3).setFromMatrixPosition(a.matrix),(new f.Matrix4).getInverse(a.projectionMatrix,!0)),s=(new f.Vector3).copy(i).applyMatrix4(a.matrixWorldInverse).applyMatrix4(a.projectionMatrix);return s.add(r).applyMatrix4(o).applyMatrix4(a.matrix),s.sub(i).length()}function o(){i();var e=new f.ConeGeometry(.08,.25,25),t=new f.CylinderGeometry(v,v,2,32),r=e.clone();e.translate(0,1,0),r.rotateX(Math.PI),r.translate(0,-1,0),t.merge(e),t.merge(r);var n=t.clone(),a=t.clone(),o=new f.Mesh(t,m.y);o.axis="y",n.rotateX(Math.PI/2);var s=new f.Mesh(n,m.z);s.axis="z",a.rotateZ(Math.PI/2);var u=new f.Mesh(a,m.x);u.axis="x";var l=new f.Object3D;return l.add(u),l.add(o),l.add(s),l}function s(){i();var e=new f.TorusGeometry(1,v,16,100),t=e.clone(),r=e.clone();e.rotateY(Math.PI/2),t.rotateX(Math.PI/2);var n=new f.Object3D,a=new f.Mesh(e,m.x);a.axis="x";var o=new f.Mesh(t,m.y);o.axis="y";var s=new f.Mesh(r,m.z);return s.axis="z",n.add(a),n.add(o),n.add(s),n}function u(){i();var e=new f.BoxGeometry(.2,.2,.2),t=new f.CylinderGeometry(v,v,1,32);t.translate(0,.5,0),e.translate(0,1,0),t.merge(e);var r=t.clone(),n=t.clone(),a=new f.Mesh(t,m.y);a.axis="y",r.rotateX(Math.PI/2);var o=new f.Mesh(r,m.z);o.axis="z",n.rotateZ(-Math.PI/2);var s=new f.Mesh(n,m.x);s.axis="x";var u=new f.Object3D;return u.add(s),u.add(a),u.add(o),u}function l(e,t,r){var i=null,a=t.clientX/(t.rect.width/2)-1,o=-(t.clientY/(t.rect.height/2)-1),s=e.raycastSelect({x:a,y:o},"Widgets");return s&&s[0]&&s[0].node&&s[0].node.axis?(r&&n(r),i=s[0].node.axis,m[i].color=new f.Color(1,1,0),m[i].needsUpdate=!0,e.postTranslate("normal",!0)):r&&(n(r),e.postTranslate("normal",!0)),i}Object.defineProperty(t,"__esModule",{value:!0}),t.getViewScale=a,t.drawMoveGizmo=o,t.drawRotateGizmo=s,t.drawScaleGizmo=u,t.highlightAxis=l;var c=r(15),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=r(8),h=r(45),p=r(7),g={x:16711680,y:65280,z:255},m={x:new f.MeshStandardMaterial({color:g.x,depthTest:!1}),y:new f.MeshStandardMaterial({color:g.y,depthTest:!1}),z:new f.MeshStandardMaterial({color:g.z,depthTest:!1})},v=.02},function(e,t,r){"use strict";function n(e,t,r){return Math.max(Math.min(e,r),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){e.exports={default:r(514),__esModule:!0}},function(e,t,r){e.exports={default:r(523),__esModule:!0}},function(e,t,r){var n=r(57),i=r(171),a=r(83),o=r(136),s=r(537);e.exports=function(e,t){var r=1==e,u=2==e,l=3==e,c=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var g,m,v=a(t),y=i(v),M=n(s,p,3),w=o(y.length),x=0,b=r?h(t,w):u?h(t,0):void 0;w>x;x++)if((d||x in y)&&(g=y[x],m=M(g,x,v),e))if(r)b[x]=m;else if(m)switch(e){case 3:return!0;case 5:return g;case 6:return x;case 2:b.push(g)}else if(c)return!1;return f?-1:l||c?c:b}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(27),i=r(29).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(108);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){"use strict";var n=r(133),i=r(11),a=r(175),o=r(62),s=r(61),u=r(81),l=r(545),c=r(111),f=r(273),d=r(25)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,g,m,v,y){l(r,t,g);var M,w,x,b=function(e){if(!h&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},T=t+" Iterator",S="values"==m,_=!1,E=e.prototype,A=E[d]||E["@@iterator"]||m&&E[m],I=A||b(m),D=m?S?b("entries"):I:void 0,L="Array"==t?E.entries||A:A;if(L&&(x=f(L.call(new e)))!==Object.prototype&&x.next&&(c(x,T,!0),n||s(x,d)||o(x,d,p)),S&&A&&"values"!==A.name&&(_=!0,I=function(){return A.call(this)}),n&&!y||!h&&!_&&E[d]||o(E,d,I),u[t]=I,u[T]=p,m)if(M={values:S?I:b("values"),keys:v?I:b("keys"),entries:D},y)for(w in M)w in E||a(E,w,M[w]);else i(i.P+i.F*(h||_),t,M);return M}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=i(t),this.reject=i(r)}var i=r(107);e.exports.f=function(e){return new n(e)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){e.exports=r(62)},function(e,t,r){var n=r(177)("keys"),i=r(137);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(29),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,r){var n,i,a,o=r(57),s=r(543),u=r(263),l=r(169),c=r(29),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,g=c.Dispatch,m=0,v={},y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},M=function(e){y.call(e.data)};d&&h||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},n(m),m},h=function(e){delete v[e]},"process"==r(108)(f)?n=function(e){f.nextTick(o(y,e,1))}:g&&g.now?n=function(e){g.now(o(y,e,1))}:p?(i=new p,a=i.port2,i.port1.onmessage=M,n=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",M,!1)):n="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(27);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(29),i=r(9),a=r(133),o=r(182),s=r(41).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,r){t.f=r(25)},function(e,t,r){var n=r(132),i=r(25)("iterator"),a=r(81);e.exports=r(9).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){"use strict";var n=r(77),i=r(94),a=r(30);e.exports=function(e){for(var t=n(this),r=a(t.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,r),u=o>2?arguments[2]:void 0,l=void 0===u?r:i(u,r);l>s;)t[s++]=e;return t}},function(e,t,r){var n=r(53),i=r(30),a=r(94);e.exports=function(e){return function(t,r,o){var s,u=n(t),l=i(u.length),c=a(o,l);if(e&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(88),i=r(16)("toStringTag"),a="Arguments"==n(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=o(t=Object(e),i))?r:a?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,r){"use strict";var n=r(26),i=r(75);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(14),i=r(13).document,a=n(i)&&n(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(16)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,r){var n=r(88);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){var n=r(89),i=r(16)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:r},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,r){var n=r(14),i=r(12),a=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(52)(Function.call,r(63).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return a(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:a}},function(e,t,r){var n=r(197)("keys"),i=r(78);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(13),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,r){var n=r(12),i=r(73),a=r(16)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[a])?t:i(r)}},function(e,t,r){var n=r(289),i=r(74);e.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(e))}},function(e,t,r){var n,i,a,o=r(52),s=r(286),u=r(284),l=r(188),c=r(13),f=c.process,d=c.setImmediate,h=c.clearImmediate,p=c.MessageChannel,g=c.Dispatch,m=0,v={},y=function(){var e=+this;if(v.hasOwnProperty(e)){var t=v[e];delete v[e],t()}},M=function(e){y.call(e.data)};d&&h||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return v[++m]=function(){s("function"==typeof e?e:Function(e),t)},n(m),m},h=function(e){delete v[e]},"process"==r(88)(f)?n=function(e){f.nextTick(o(y,e,1))}:g&&g.now?n=function(e){g.now(o(y,e,1))}:p?(i=new p,a=i.port2,i.port1.onmessage=M,n=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(e){c.postMessage(e+"","*")},c.addEventListener("message",M,!1)):n="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(o(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,r){for(var n,i=r(13),a=r(42),o=r(78),s=o("typed_array"),u=o("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,f=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(n=i[d[f++]])?(a(n.prototype,s,!0),a(n.prototype,u,!0)):c=!1;e.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(e,t,r){var n=r(186),i=r(16)("iterator"),a=r(89);e.exports=r(113).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[n(e)]}},function(e,t,r){"use strict";var n=r(86),i=r(292),a=r(89),o=r(53);e.exports=r(291)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,n,i){function a(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function o(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}function s(e,t){if(2!==arguments.length)return be[e];be[e]=t}function u(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function l(e){return"function"==typeof e}function c(e){return null!==e&&"object"==typeof e}function f(e){return null!==e&&"object"==typeof e}function d(){setTimeout(function(){for(var e=0;e<Ee.length;e++){var t=Ee[e],r=t.payload;r.guid=r.key+r.id,r.childGuid=r.key+r.childId,r.error&&(r.stack=r.error.stack),be.trigger(t.name,t.payload)}Ee.length=0},50)}function h(e,t,r){1===Ee.push({name:e,payload:{key:t._guidKey,id:t._id,eventName:e,detail:t._result,childId:r&&r._id,label:t._label,timeStamp:_e(),error:be["instrument-with-stack"]?new Error(t._label):null}})&&d()}function p(e,t){var r=this;if(e&&"object"==typeof e&&e.constructor===r)return e;var n=new r(m,t);return b(n,e),n}function g(){return new TypeError("A promises callback cannot return that same promise.")}function m(){}function v(e){try{return e.then}catch(e){return Le.error=e,Le}}function y(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function M(e,t,r){be.async(function(e){var n=!1,i=y(r,t,function(r){n||(n=!0,t!==r?b(e,r,void 0):S(e,r))},function(t){n||(n=!0,_(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,_(e,i))},e)}function w(e,t){t._state===Ie?S(e,t._result):t._state===De?(t._onError=null,_(e,t._result)):E(t,void 0,function(r){t!==r?b(e,r,void 0):S(e,r)},function(t){return _(e,t)})}function x(e,t,r){t.constructor===e.constructor&&r===C&&e.constructor.resolve===p?w(e,t):r===Le?(_(e,Le.error),Le.error=null):l(r)?M(e,t,r):S(e,t)}function b(e,t){e===t?S(e,t):u(t)?x(e,t,v(t)):S(e,t)}function T(e){e._onError&&e._onError(e._result),A(e)}function S(e,t){e._state===Ae&&(e._result=t,e._state=Ie,0===e._subscribers.length?be.instrument&&h("fulfilled",e):be.async(A,e))}function _(e,t){e._state===Ae&&(e._state=De,e._result=t,be.async(T,e))}function E(e,t,r,n){var i=e._subscribers,a=i.length;e._onError=null,i[a]=t,i[a+Ie]=r,i[a+De]=n,0===a&&e._state&&be.async(A,e)}function A(e){var t=e._subscribers,r=e._state;if(be.instrument&&h(r===Ie?"fulfilled":"rejected",e),0!==t.length){for(var n=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?L(r,n,i,a):i(a);e._subscribers.length=0}}function I(){this.error=null}function D(e,t){try{return e(t)}catch(e){return Ne.error=e,Ne}}function L(e,t,r,n){var i=l(r),a=void 0,o=void 0;if(i){if((a=D(r,n))===Ne)o=a.error,a.error=null;else if(a===t)return void _(t,g())}else a=n;t._state!==Ae||(i&&void 0===o?b(t,a):void 0!==o?_(t,o):e===Ie?S(t,a):e===De&&_(t,a))}function N(e,t){var r=!1;try{t(function(t){r||(r=!0,b(e,t))},function(t){r||(r=!0,_(e,t))})}catch(t){_(e,t)}}function C(e,t,r){var n=this,i=n._state;if(i===Ie&&!e||i===De&&!t)return be.instrument&&h("chained",n,n),n;n._onError=null;var a=new n.constructor(m,r),o=n._result;if(be.instrument&&h("chained",n,a),i===Ae)E(n,a,e,t);else{var s=i===Ie?e:t;be.async(function(){return L(i,a,s,o)})}return a}function O(e,t,r){return e===Ie?{state:"fulfilled",value:r}:{state:"rejected",reason:r}}function R(e,t){return Se(e)?new Ce(this,e,!0,t).promise:this.reject(new TypeError("Promise.all must be called with an array"),t)}function P(e,t){var r=this,n=new r(m,t);if(!Se(e))return _(n,new TypeError("Promise.race must be called with an array")),n;for(var i=0;n._state===Ae&&i<e.length;i++)E(r.resolve(e[i]),void 0,function(e){return b(n,e)},function(e){return _(n,e)});return n}function z(e,t){var r=this,n=new r(m,t);return _(n,e),n}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function B(){this.value=void 0}function V(e){try{return e.then}catch(e){return ze.value=e,ze}}function k(e,t,r){try{e.apply(t,r)}catch(e){return ze.value=e,ze}}function F(e,t){for(var r={},n=e.length,i=new Array(n),a=0;a<n;a++)i[a]=e[a];for(var o=0;o<t.length;o++){r[t[o]]=i[o+1]}return r}function G(e){for(var t=e.length,r=new Array(t-1),n=1;n<t;n++)r[n-1]=e[n];return r}function H(e,t){return{then:function(r,n){return e.call(t,r,n)}}}function W(e,t){var r=function(){for(var r=this,n=arguments.length,i=new Array(n+1),a=!1,o=0;o<n;++o){var s=arguments[o];if(!a){if((a=q(s))===je){var u=new Pe(m);return _(u,je.value),u}a&&!0!==a&&(s=H(a,s))}i[o]=s}var l=new Pe(m);return i[n]=function(e,r){e?_(l,e):void 0===t?b(l,r):!0===t?b(l,G(arguments)):Se(t)?b(l,F(arguments,t)):b(l,r)},a?Q(l,i,e,r):Y(l,i,e,r)};return r.__proto__=e,r}function Y(e,t,r,n){var i=k(r,n,t);return i===ze&&_(e,i.value),e}function Q(e,t,r,n){return Pe.all(t).then(function(t){var i=k(r,n,t);return i===ze&&_(e,i.value),e})}function q(e){return!(!e||"object"!=typeof e)&&(e.constructor===Pe||V(e))}function X(e,t){return Pe.all(e,t)}function Z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function K(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function J(e,t){return Se(e)?new Ue(Pe,e,t).promise:Pe.reject(new TypeError("Promise.allSettled must be called with an array"),t)}function $(e,t){return Pe.race(e,t)}function ee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function re(e,t){return c(e)?new Ve(Pe,e,t).promise:Pe.reject(new TypeError("Promise.hash must be called with an object"),t)}function ne(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ie(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ae(e,t){return c(e)?new ke(Pe,e,!1,t).promise:Pe.reject(new TypeError("RSVP.hashSettled must be called with an object"),t)}function oe(e){throw setTimeout(function(){throw e}),e}function se(e){var t={resolve:void 0,reject:void 0};return t.promise=new Pe(function(e,r){t.resolve=e,t.reject=r},e),t}function ue(e,t,r){return Se(e)?l(t)?Pe.all(e,r).then(function(e){for(var n=e.length,i=new Array(n),a=0;a<n;a++)i[a]=t(e[a]);return Pe.all(i,r)}):Pe.reject(new TypeError("RSVP.map expects a function as a second argument"),r):Pe.reject(new TypeError("RSVP.map must be called with an array"),r)}function le(e,t){return Pe.resolve(e,t)}function ce(e,t){return Pe.reject(e,t)}function fe(e,t){return Pe.all(e,t)}function de(e,t){return Pe.resolve(e,t).then(function(e){return fe(e,t)})}function he(e,t,r){return Se(e)||c(e)&&void 0!==e.then?l(t)?(Se(e)?fe(e,r):de(e,r)).then(function(e){for(var n=e.length,i=new Array(n),a=0;a<n;a++)i[a]=t(e[a]);return fe(i,r).then(function(t){for(var r=new Array(n),i=0,a=0;a<n;a++)t[a]&&(r[i]=e[a],i++);return r.length=i,r})}):Pe.reject(new TypeError("RSVP.filter expects function as a second argument"),r):Pe.reject(new TypeError("RSVP.filter must be called with an array or promise"),r)}function pe(e,t){Xe[Fe]=e,Xe[Fe+1]=t,2===(Fe+=2)&&Ze()}function ge(){return void 0!==Ge?function(){Ge(ve)}:me()}function me(){return function(){return setTimeout(ve,1)}}function ve(){for(var e=0;e<Fe;e+=2){(0,Xe[e])(Xe[e+1]),Xe[e]=void 0,Xe[e+1]=void 0}Fe=0}function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Me(){be.on.apply(be,arguments)}function we(){be.off.apply(be,arguments)}r.d(t,"asap",function(){return pe}),r.d(t,"cast",function(){return Je}),r.d(t,"Promise",function(){return Pe}),r.d(t,"EventTarget",function(){return xe}),r.d(t,"all",function(){return X}),r.d(t,"allSettled",function(){return J}),r.d(t,"race",function(){return $}),r.d(t,"hash",function(){return re}),r.d(t,"hashSettled",function(){return ae}),r.d(t,"rethrow",function(){return oe}),r.d(t,"defer",function(){return se}),r.d(t,"denodeify",function(){return W}),r.d(t,"configure",function(){return s}),r.d(t,"on",function(){return Me}),r.d(t,"off",function(){return we}),r.d(t,"resolve",function(){return le}),r.d(t,"reject",function(){return ce}),r.d(t,"map",function(){return ue}),r.d(t,"async",function(){return $e}),r.d(t,"filter",function(){return he});var xe={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(e,t){if("function"!=typeof t)throw new TypeError("Callback must be a function");var r=o(this),n=void 0;n=r[e],n||(n=r[e]=[]),-1===a(n,t)&&n.push(t)},off:function(e,t){var r=o(this),n=void 0,i=void 0;if(!t)return void(r[e]=[]);n=r[e],-1!==(i=a(n,t))&&n.splice(i,1)},trigger:function(e,t,r){var n=o(this),i=void 0;if(i=n[e])for(var a=0;a<i.length;a++)(0,i[a])(t,r)}},be={instrument:!1};xe.mixin(be);var Te=void 0;Te=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Se=Te,_e=Date.now||function(){return(new Date).getTime()},Ee=[],Ae=void 0,Ie=1,De=2,Le=new I,Ne=new I,Ce=function(){function e(e,t,r,n){this._instanceConstructor=e,this.promise=new e(m,n),this._abortOnReject=r,this._init.apply(this,arguments)}return e.prototype._init=function(e,t){var r=t.length||0;this.length=r,this._remaining=r,this._result=new Array(r),this._enumerate(t),0===this._remaining&&S(this.promise,this._result)},e.prototype._enumerate=function(e){for(var t=this.length,r=this.promise,n=0;r._state===Ae&&n<t;n++)this._eachEntry(e[n],n)},e.prototype._settleMaybeThenable=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===p){var i=v(e);if(i===C&&e._state!==Ae)e._onError=null,this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=this._makeResult(Ie,t,e);else if(r===Pe){var a=new r(m);x(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new r(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},e.prototype._eachEntry=function(e,t){f(e)?this._settleMaybeThenable(e,t):(this._remaining--,this._result[t]=this._makeResult(Ie,t,e))},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===Ae&&(this._abortOnReject&&e===De?_(n,r):(this._remaining--,this._result[t]=this._makeResult(e,t,r),0===this._remaining&&S(n,this._result)))},e.prototype._makeResult=function(e,t,r){return r},e.prototype._willSettleAt=function(e,t){var r=this;E(e,void 0,function(e){return r._settledAt(Ie,t,e)},function(e){return r._settledAt(De,t,e)})},e}(),Oe="rsvp_"+_e()+"-",Re=0,Pe=function(){function e(t,r){this._id=Re++,this._label=r,this._state=void 0,this._result=void 0,this._subscribers=[],be.instrument&&h("created",this),m!==t&&("function"!=typeof t&&j(),this instanceof e?N(this,t):U())}return e.prototype._onError=function(e){var t=this;be.after(function(){t._onError&&be.trigger("error",e,t._label)})},e.prototype.catch=function(e,t){return this.then(void 0,e,t)},e.prototype.finally=function(e,t){var r=this,n=r.constructor;return r.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})},t)},e}();Pe.cast=p,Pe.all=R,Pe.race=P,Pe.resolve=p,Pe.reject=z,Pe.prototype._guidKey=Oe,Pe.prototype.then=C;var ze=new B,je=new B,Ue=function(e){function t(t,r,n){return Z(this,e.call(this,t,r,!1,n))}return K(t,e),t}(Ce);Ue.prototype._makeResult=O;var Be=Object.prototype.hasOwnProperty,Ve=function(e){function t(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return ee(this,e.call(this,t,r,n,i))}return te(t,e),t.prototype._init=function(e,t){this._result={},this._enumerate(t),0===this._remaining&&S(this.promise,this._result)},t.prototype._enumerate=function(e){var t=this.promise,r=[];for(var n in e)Be.call(e,n)&&r.push({position:n,entry:e[n]});var i=r.length;this._remaining=i;for(var a=void 0,o=0;t._state===Ae&&o<i;o++)a=r[o],this._eachEntry(a.entry,a.position)},t}(Ce),ke=function(e){function t(t,r,n){return ne(this,e.call(this,t,r,!1,n))}return ie(t,e),t}(Ve);ke.prototype._makeResult=O;var Fe=0,Ge=void 0,He="undefined"!=typeof window?window:void 0,We=He||{},Ye=We.MutationObserver||We.WebKitMutationObserver,Qe="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),qe="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Xe=new Array(1e3),Ze=void 0;Ze=Qe?function(){var t=e.nextTick,r=e.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(r)&&"0"===r[1]&&"10"===r[2]&&(t=n),function(){return t(ve)}}():Ye?function(){var e=0,t=new Ye(ve),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){return r.data=e=++e%2}}():qe?function(){var e=new MessageChannel;return e.port1.onmessage=ve,function(){return e.port2.postMessage(0)}}():void 0===He?function(){try{var e=r(719);return Ge=e.runOnLoop||e.runOnContext,ge()}catch(e){return me()}}():me();if("object"==typeof self)self;else{if("object"!=typeof i)throw new Error("no global: `self` or `global` found");i}var Ke;be.async=pe,be.after=function(e){return setTimeout(e,0)};var Je=le,$e=function(e,t){return be.async(e,t)};if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var et=window.__PROMISE_INSTRUMENTATION__;s("instrument",!0);for(var tt in et)et.hasOwnProperty(tt)&&Me(tt,et[tt])}var rt=(Ke={asap:pe,cast:Je,Promise:Pe,EventTarget:xe,all:X,allSettled:J,race:$,hash:re,hashSettled:ae,rethrow:oe,defer:se,denodeify:W,configure:s,on:Me,off:we,resolve:le,reject:ce,map:ue},ye(Ke,"async",$e),ye(Ke,"filter",he),Ke);t.default=rt}.call(t,r(146),r(696).setImmediate,r(66))},function(e,t){e.exports={array:Array.isArray,primitive:function(e){return"string"==typeof e||"number"==typeof e}}},function(e,t){},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return e?e.isVector3?e:e.hasOwnProperty("x")?new f.Vector3(e.x,e.y,e.z):Array.isArray(e)?new f.Vector3(e[0],e[1],e[2]):new f.Vector3:new f.Vector3}function a(e){return e?e.isVector2?e:e.hasOwnProperty("x")?new f.Vector2(e.x,e.y):Array.isArray(e)?new f.Vector2(e[0],e[1]):new f.Vector2:new f.Vector2}function o(e){if((0,c.default)(e))return new f.Color(e);if(!e)return new f.Color;if("string"==typeof e){var t=new f.Color;return t.setHex(parseInt("0x"+e.replace("#",""))),t}return Array.isArray(e)?new f.Color(e[0],e[1],e[2]):e.hasOwnProperty("r")?new f.Color(e.r,e.g,e.b):new f.Color}Object.defineProperty(t,"__esModule",{value:!0});var s=r(47),u=n(s),l=r(260),c=n(l),f=r(0),d={Boolean:function(e){var t=e.defaultValue||!1;return{defaultValue:t,set:function(e){return null==e?t:!!e}}},Label:function(e){return{set:function(e){return"string"==typeof e?e:""}}},Number:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=e.minValue,r=e.maxValue,n=e.defaultValue||0,i=void 0;return i=void 0!==t&&void 0!==r?function(e){return Math.min(Math.max(t,e),r)}:void 0!==t?function(e){return Math.max(e,t)}:void 0!==r?function(e){return Math.min(e,r)}:function(e){return e},{defaultValue:n,set:function(e){var t=Number(e);return isNaN(t)?n:Math.round(1e4*i(t))/1e4}}}),Integer:function(e){var t=e.minValue,r=e.maxValue,n=e.defaultValue||0,i=void 0;return i=void 0!==t&&void 0!==r?function(e){return Math.min(Math.max(t,e),r)}:void 0!==t?function(e){return Math.max(e,t)}:void 0!==r?function(e){return Math.min(e,r)}:function(e){return e},{defaultValue:n,set:function(e){var t=Number(e);return isNaN(t)?n:Math.round(i(t))}}},Plug:function(e){if(!e.plug)throw new Error("plug property expects a `plug` property");return{isPlugReference:e.plug,set:function(e){return e&&e.id?e.id:e}}},Options:function(e){var t=e.defaultValue;return{defaultValue:t,set:function(e){return null==e?t:e}}},Image:function(e){return{isFileReference:!0,set:function(e){return e&&e.id?e.id:e}}},Binary:function(e){return{isFileReference:!0,set:function(e){return e&&e.id?e.id:e}}},File:function(e){return{isFileReference:!0,set:function(e){return e&&e.id?e.id:e}}},Object:function(e){var t=e.defaultValue||{};return{set:function(e){return e||t},equals:function(e,t){return(0,u.default)(e)===(0,u.default)(t)}}},String:function(e){var t=e.defaultValue||"";return{defaultValue:t,set:function(e){return"string"==typeof e?e:t}}},TextArea:function(e){var t=e.defaultValue||"";return{defaultValue:t,set:function(e){return"string"==typeof e?e:t}}},Node:function(e){return{isNodeReference:!0,set:function(e){return e&&e.id?e.id:e}}},NodeList:function(e){return{isReferenceList:!0,set:function(e){return Array.isArray(e)?e.map(function(e){return e&&e.id?e.id:e}):[]},equals:function(e,t){return(0,u.default)(e)===(0,u.default)(t)}}},Vec2:function(e){var t=a(e.defaultValue);return{defaultValue:t,set:function(e){return a(e||t)},get:function(e){return e.clone()},equals:function(e,t){return e&&t&&e.equals(t)}}},Color:function(e){var t=o(e.defaultValue);return{defaultValue:t,set:function(e){return o(void 0!==e?e:t)},get:function(e){return e.clone()},equals:function(e,t){return e&&t&&e.equals(t)}}},Vec3:function(e){var t=i(e.defaultValue);return{defaultValue:t,set:function(e){return i(e||t)},get:function(e){return e.clone()},equals:function(e,t){return e&&t&&e.equals(t)}}}};t.default=d},function(e,t,r){"use strict";function n(e,t,r,n,i){return Math.pow(1-i,3)*e+3*Math.pow(1-i,2)*i*t+3*(1-i)*Math.pow(i,2)*r+Math.pow(i,3)*n}function i(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},i.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},i.prototype.addX=function(e){this.addPoint(e,null)},i.prototype.addY=function(e){this.addPoint(null,e)},i.prototype.addBezier=function(e,t,r,i,a,o,s,u){var l=[e,t],c=[r,i],f=[a,o],d=[s,u];this.addPoint(e,t),this.addPoint(s,u);for(var h=0;h<=1;h++){var p=6*l[h]-12*c[h]+6*f[h],g=-3*l[h]+9*c[h]-9*f[h]+3*d[h],m=3*c[h]-3*l[h];if(0!==g){var v=Math.pow(p,2)-4*m*g;if(!(v<0)){var y=(-p+Math.sqrt(v))/(2*g);0<y&&y<1&&(0===h&&this.addX(n(l[h],c[h],f[h],d[h],y)),1===h&&this.addY(n(l[h],c[h],f[h],d[h],y)));var M=(-p-Math.sqrt(v))/(2*g);0<M&&M<1&&(0===h&&this.addX(n(l[h],c[h],f[h],d[h],M)),1===h&&this.addY(n(l[h],c[h],f[h],d[h],M)))}}else{if(0===p)continue;var w=-m/p;0<w&&w<1&&(0===h&&this.addX(n(l[h],c[h],f[h],d[h],w)),1===h&&this.addY(n(l[h],c[h],f[h],d[h],w)))}}},i.prototype.addQuad=function(e,t,r,n,i,a){var o=e+2/3*(r-e),s=t+2/3*(n-t),u=o+1/3*(i-e),l=s+1/3*(a-t);this.addBezier(e,t,o,s,u,l,i,a)},t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=t||{commands:[]};return{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}}function a(e){this.bindConstructorValues(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(22),s=n(o),u=r(320),l=n(u),c=r(100),f=n(c),d=r(213),h=n(d);a.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",i(this,e.path))},a.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},a.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},a.prototype.getPath=function(e,t,r,n,i){e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72;var a=void 0,o=void 0;n||(n={});var s=n.xScale,u=n.yScale;if(n.hinting&&i&&i.hinting&&(o=this.path&&i.hinting.exec(this,r)),o)a=h.default.getPath(o).commands,e=Math.round(e),t=Math.round(t),s=u=1;else{a=this.path.commands;var l=1/this.path.unitsPerEm*r;void 0===s&&(s=l),void 0===u&&(u=l)}for(var c=new f.default,d=0;d<a.length;d+=1){var p=a[d];"M"===p.type?c.moveTo(e+p.x*s,t+-p.y*u):"L"===p.type?c.lineTo(e+p.x*s,t+-p.y*u):"Q"===p.type?c.quadraticCurveTo(e+p.x1*s,t+-p.y1*u,e+p.x*s,t+-p.y*u):"C"===p.type?c.curveTo(e+p.x1*s,t+-p.y1*u,e+p.x2*s,t+-p.y2*u,e+p.x*s,t+-p.y*u):"Z"===p.type&&c.closePath()}return c},a.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var n=this.points[r];t.push(n),n.lastPointOfContour&&(e.push(t),t=[])}return s.default.argument(0===t.length,"There are still points left in the current contour."),e},a.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],n=0;n<e.length;n+=1){var i=e[n];"Z"!==i.type&&(t.push(i.x),r.push(i.y)),"Q"!==i.type&&"C"!==i.type||(t.push(i.x1),r.push(i.y1)),"C"===i.type&&(t.push(i.x2),r.push(i.y2))}var a={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(a.xMin)||(a.xMin=0),isFinite(a.xMax)||(a.xMax=this.advanceWidth),isFinite(a.yMin)||(a.yMin=0),isFinite(a.yMax)||(a.yMax=0),a.rightSideBearing=this.advanceWidth-a.leftSideBearing-(a.xMax-a.xMin),a},a.prototype.draw=function(e,t,r,n,i){this.getPath(t,r,n,i).draw(e)},a.prototype.drawPoints=function(e,t,r,n){function i(t,r,n,i){var a=2*Math.PI;e.beginPath();for(var o=0;o<t.length;o+=1)e.moveTo(r+t[o].x*i,n+t[o].y*i),e.arc(r+t[o].x*i,n+t[o].y*i,2,0,a,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24;for(var a=1/this.path.unitsPerEm*n,o=[],s=[],u=this.path,l=0;l<u.commands.length;l+=1){var c=u.commands[l];void 0!==c.x&&o.push({x:c.x,y:-c.y}),void 0!==c.x1&&s.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&s.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",i(o,t,r,a),e.fillStyle="red",i(s,t,r,a)},a.prototype.drawMetrics=function(e,t,r,n){var i=void 0;t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24,i=1/this.path.unitsPerEm*n,e.lineWidth=1,e.strokeStyle="black",l.default.line(e,t,-1e4,t,1e4),l.default.line(e,-1e4,r,1e4,r);var a=this.xMin||0,o=this.yMin||0,s=this.xMax||0,u=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",l.default.line(e,t+a*i,-1e4,t+a*i,1e4),l.default.line(e,t+s*i,-1e4,t+s*i,1e4),l.default.line(e,-1e4,r+-o*i,1e4,r+-o*i),l.default.line(e,-1e4,r+-u*i,1e4,r+-u*i),e.strokeStyle="green",l.default.line(e,t+c*i,-1e4,t+c*i,1e4)},t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){r(206).readFile(e,function(e,r){if(e)return t(e.message);t(null,(0,_.nodeBufferToArrayBuffer)(r))})}function a(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return 200!==r.status?t("Font could not be loaded: "+r.statusText):t(null,r.response)},r.onerror=function(){t("Font could not be loaded")},r.send()}function o(e,t){for(var r=[],n=12,i=0;i<t;i+=1){var a=w.default.getTag(e,n),o=w.default.getULong(e,n+4),s=w.default.getULong(e,n+8),u=w.default.getULong(e,n+12);r.push({tag:a,checksum:o,offset:s,length:u,compression:!1}),n+=16}return r}function s(e,t){for(var r=[],n=44,i=0;i<t;i+=1){var a=w.default.getTag(e,n),o=w.default.getULong(e,n+4),s=w.default.getULong(e,n+8),u=w.default.getULong(e,n+12),l=void 0;l=s<u&&"WOFF",r.push({tag:a,offset:o,compression:l,compressedLength:s,length:u}),n+=20}return r}function u(e,t){if("WOFF"===t.compression){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),n=new Uint8Array(t.length);if((0,h.default)(r,n),n.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(n.buffer,0),offset:0}}return{data:e,offset:t.offset}}function l(e){var t=void 0,r=void 0,n=new g.default({empty:!0}),i=new DataView(e,0),a=void 0,l=[],c=w.default.getTag(i,0);if(c===String.fromCharCode(0,1,0,0)||"true"===c||"typ1"===c)n.outlinesFormat="truetype",a=w.default.getUShort(i,4),l=o(i,a);else if("OTTO"===c)n.outlinesFormat="cff",a=w.default.getUShort(i,4),l=o(i,a);else{if("wOFF"!==c)throw new Error("Unsupported OpenType signature "+c);var f=w.default.getTag(i,4);if(f===String.fromCharCode(0,1,0,0))n.outlinesFormat="truetype";else{if("OTTO"!==f)throw new Error("Unsupported OpenType flavor "+c);n.outlinesFormat="cff"}a=w.default.getUShort(i,12),l=s(i,a)}for(var d=void 0,h=void 0,p=void 0,m=void 0,v=void 0,M=void 0,x=void 0,b=void 0,T=void 0,S=void 0,_=void 0,E=0;E<a;E+=1){var I=l[E],L=void 0;switch(I.tag){case"cmap":L=u(i,I),n.tables.cmap=A.default.parse(L.data,L.offset),n.encoding=new y.CmapEncoding(n.tables.cmap);break;case"cvt ":L=u(i,I),_=new w.default.Parser(L.data,L.offset),n.tables.cvt=_.parseShortList(I.length/2);break;case"fvar":h=I;break;case"fpgm":L=u(i,I),_=new w.default.Parser(L.data,L.offset),n.tables.fpgm=_.parseByteList(I.length);break;case"head":L=u(i,I),n.tables.head=B.default.parse(L.data,L.offset),n.unitsPerEm=n.tables.head.unitsPerEm,t=n.tables.head.indexToLocFormat;break;case"hhea":L=u(i,I),n.tables.hhea=k.default.parse(L.data,L.offset),n.ascender=n.tables.hhea.ascender,n.descender=n.tables.hhea.descender,n.numberOfHMetrics=n.tables.hhea.numberOfHMetrics;break;case"hmtx":M=I;break;case"ltag":L=u(i,I),r=Q.default.parse(L.data,L.offset);break;case"maxp":L=u(i,I),n.tables.maxp=K.default.parse(L.data,L.offset),n.numGlyphs=n.tables.maxp.numGlyphs;break;case"name":T=I;break;case"OS/2":L=u(i,I),n.tables.os2=te.default.parse(L.data,L.offset);break;case"post":L=u(i,I),n.tables.post=ne.default.parse(L.data,L.offset),n.glyphNames=new y.GlyphNames(n.tables.post);break;case"prep":L=u(i,I),_=new w.default.Parser(L.data,L.offset),n.tables.prep=_.parseByteList(I.length);break;case"glyf":p=I;break;case"loca":b=I;break;case"CFF ":d=I;break;case"kern":x=I;break;case"GPOS":m=I;break;case"GSUB":v=I;break;case"meta":S=I}}var C=u(i,T);if(n.tables.name=$.default.parse(C.data,C.offset,r),n.names=n.tables.name,p&&b){var R=0===t,z=u(i,b),U=X.default.parse(z.data,z.offset,n.numGlyphs,R),V=u(i,p);n.glyphs=O.default.parse(V.data,V.offset,U,n)}else{if(!d)throw new Error("Font doesn't contain TrueType or CFF outlines.");var F=u(i,d);D.default.parse(F.data,F.offset,n)}var H=u(i,M);if(G.default.parse(H.data,H.offset,n.numberOfHMetrics,n.numGlyphs,n.glyphs),(0,y.addGlyphNames)(n),x){var Y=u(i,x);n.kerningPairs=W.default.parse(Y.data,Y.offset)}else n.kerningPairs={};if(m){var q=u(i,m);P.default.parse(q.data,q.offset,n)}if(v){var Z=u(i,v);n.tables.gsub=j.default.parse(Z.data,Z.offset)}if(h){var J=u(i,h);n.tables.fvar=N.default.parse(J.data,J.offset,n.names)}if(S){var ee=u(i,S);n.tables.meta=ae.default.parse(ee.data,ee.offset),n.metas=n.tables.meta}return n}function c(e,t){("undefined"==typeof window?i:a)(e,function(e,r){if(e)return t(e);var n=void 0;try{n=l(r)}catch(e){return t(e,null)}return t(null,n)})}function f(e){var t=r(206),n=t.readFileSync(e);return l((0,_.nodeBufferToArrayBuffer)(n))}Object.defineProperty(t,"__esModule",{value:!0}),t.loadSync=t.load=t.parse=t._parse=t.BoundingBox=t.Path=t.Glyph=t.Font=void 0;var d=r(697),h=n(d),p=r(321),g=n(p),m=r(209),v=n(m),y=r(121),M=r(17),w=n(M),x=r(208),b=n(x),T=r(100),S=n(T),_=r(224),E=r(212),A=n(E),I=r(211),D=n(I),L=r(325),N=n(L),C=r(213),O=n(C),R=r(326),P=n(R),z=r(214),j=n(z),U=r(215),B=n(U),V=r(216),k=n(V),F=r(217),G=n(F),H=r(327),W=n(H),Y=r(218),Q=n(Y),q=r(328),X=n(q),Z=r(219),K=n(Z),J=r(221),$=n(J),ee=r(222),te=n(ee),re=r(223),ne=n(re),ie=r(220),ae=n(ie);t.Font=g.default,t.Glyph=v.default,t.Path=S.default,t.BoundingBox=b.default,t._parse=w.default,t.parse=l,t.load=c,t.loadSync=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!i(e[r],t[r]))return!1;return!0}return!1}function a(e){return e.length<1240?107:e.length<33900?1131:32768}function o(e,t,r){var n=[],i=[],a=B.default.getCard16(e,t),o=void 0,s=void 0;if(0!==a){var u=B.default.getByte(e,t+2);o=t+(a+1)*u+2;for(var l=t+3,c=0;c<a+1;c+=1)n.push(B.default.getOffset(e,l,u)),l+=u;s=o+n[a]}else s=t+2;for(var f=0;f<n.length-1;f+=1){var d=B.default.getBytes(e,o+n[f],o+n[f+1]);r&&(d=r(d)),i.push(d)}return{objects:i,startOffset:t,endOffset:s}}function s(e){for(var t="",r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var n=e.parseByte(),i=n>>4,a=15&n;if(15===i)break;if(t+=r[i],15===a)break;t+=r[a]}return parseFloat(t)}function u(e,t){var r=void 0,n=void 0,i=void 0,a=void 0;if(28===t)return r=e.parseByte(),n=e.parseByte(),r<<8|n;if(29===t)return r=e.parseByte(),n=e.parseByte(),i=e.parseByte(),a=e.parseByte(),r<<24|n<<16|i<<8|a;if(30===t)return s(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return r=e.parseByte(),256*(t-247)+r+108;if(t>=251&&t<=254)return r=e.parseByte(),256*-(t-251)-r-108;throw new Error("Invalid b0 "+t)}function l(e){for(var t={},r=0;r<e.length;r+=1){var n=e[r][0],i=e[r][1],a=void 0;if(a=1===i.length?i[0]:i,t.hasOwnProperty(n)&&!isNaN(t[n]))throw new Error("Object "+t+" already has key "+n);t[n]=a}return t}function c(e,t,r){t=void 0!==t?t:0;var n=new B.default.Parser(e,t),i=[],a=[];for(r=void 0!==r?r:e.length;n.relativeOffset<r;){var o=n.parseByte();o<=21?(12===o&&(o=1200+n.parseByte()),i.push([o,a]),a=[]):a.push(u(n,o))}return l(i)}function f(e,t){return t=t<=390?P.cffStandardStrings[t]:e[t-391]}function d(e,t,r){for(var n={},i=void 0,a=0;a<t.length;a+=1){var o=t[a];if(Array.isArray(o.type)){var s=[];s.length=o.type.length;for(var u=0;u<o.type.length;u++)i=void 0!==e[o.op]?e[o.op][u]:void 0,void 0===i&&(i=void 0!==o.value&&void 0!==o.value[u]?o.value[u]:null),"SID"===o.type[u]&&(i=f(r,i)),s[u]=i;n[o.name]=s}else i=e[o.op],void 0===i&&(i=void 0!==o.value?o.value:null),"SID"===o.type&&(i=f(r,i)),n[o.name]=i}return n}function h(e,t){var r={};return r.formatMajor=B.default.getCard8(e,t),r.formatMinor=B.default.getCard8(e,t+1),r.size=B.default.getCard8(e,t+2),r.offsetSize=B.default.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}function p(e,t){return d(c(e,0,e.byteLength),H,t)}function g(e,t,r,n){return d(c(e,t,r),W,n)}function m(e,t,r,n){for(var i=[],s=0;s<r.length;s+=1){var u=new DataView(new Uint8Array(r[s]).buffer),l=p(u,n);l._subrs=[],l._subrsBias=0;var c=l.private[0],f=l.private[1];if(0!==c&&0!==f){var d=g(e,f+t,c,n);if(l._defaultWidthX=d.defaultWidthX,l._nominalWidthX=d.nominalWidthX,0!==d.subrs){var h=f+d.subrs,m=o(e,h+t);l._subrs=m.objects,l._subrsBias=a(l._subrs)}l._privateDict=d}i.push(l)}return i}function v(e,t,r,n){var i=void 0,a=void 0,o=new B.default.Parser(e,t);r-=1;var s=[".notdef"],u=o.parseCard8();if(0===u)for(var l=0;l<r;l+=1)i=o.parseSID(),s.push(f(n,i));else if(1===u)for(;s.length<=r;){i=o.parseSID(),a=o.parseCard8();for(var c=0;c<=a;c+=1)s.push(f(n,i)),i+=1}else{if(2!==u)throw new Error("Unknown charset format "+u);for(;s.length<=r;){i=o.parseSID(),a=o.parseCard16();for(var d=0;d<=a;d+=1)s.push(f(n,i)),i+=1}}return s}function y(e,t,r){var n=void 0,i={},a=new B.default.Parser(e,t),o=a.parseCard8();if(0===o)for(var s=a.parseCard8(),u=0;u<s;u+=1)n=a.parseCard8(),i[n]=u;else{if(1!==o)throw new Error("Unknown encoding format "+o);var l=a.parseCard8();n=1;for(var c=0;c<l;c+=1)for(var f=a.parseCard8(),d=a.parseCard8(),h=f;h<=f+d;h+=1)i[h]=n,n+=1}return new P.CffEncoding(i,r)}function M(e,t,r){function n(e,t){p&&c.closePath(),c.moveTo(e,t),p=!0}function i(){var e=void 0;e=f.length%2!=0,e&&!h&&(T=f.shift()+w),d+=f.length>>1,f.length=0,h=!0}function a(r){for(var M=void 0,x=void 0,b=void 0,S=void 0,_=void 0,E=void 0,A=void 0,I=void 0,D=void 0,L=void 0,N=void 0,C=void 0,O=0;O<r.length;){var R=r[O];switch(O+=1,R){case 1:case 3:i();break;case 4:f.length>1&&!h&&(T=f.shift()+w,h=!0),m+=f.pop(),n(g,m);break;case 5:for(;f.length>0;)g+=f.shift(),m+=f.shift(),c.lineTo(g,m);break;case 6:for(;f.length>0&&(g+=f.shift(),c.lineTo(g,m),0!==f.length);)m+=f.shift(),c.lineTo(g,m);break;case 7:for(;f.length>0&&(m+=f.shift(),c.lineTo(g,m),0!==f.length);)g+=f.shift(),c.lineTo(g,m);break;case 8:for(;f.length>0;)o=g+f.shift(),s=m+f.shift(),u=o+f.shift(),l=s+f.shift(),g=u+f.shift(),m=l+f.shift(),c.curveTo(o,s,u,l,g,m);break;case 10:_=f.pop()+y,E=v[_],E&&a(E);break;case 11:return;case 12:switch(R=r[O],O+=1,R){case 35:o=g+f.shift(),s=m+f.shift(),u=o+f.shift(),l=s+f.shift(),A=u+f.shift(),I=l+f.shift(),D=A+f.shift(),L=I+f.shift(),N=D+f.shift(),C=L+f.shift(),g=N+f.shift(),m=C+f.shift(),f.shift(),c.curveTo(o,s,u,l,A,I),c.curveTo(D,L,N,C,g,m);break;case 34:o=g+f.shift(),s=m,u=o+f.shift(),l=s+f.shift(),A=u+f.shift(),I=l,D=A+f.shift(),L=l,N=D+f.shift(),C=m,g=N+f.shift(),c.curveTo(o,s,u,l,A,I),c.curveTo(D,L,N,C,g,m);break;case 36:o=g+f.shift(),s=m+f.shift(),u=o+f.shift(),l=s+f.shift(),A=u+f.shift(),I=l,D=A+f.shift(),L=l,N=D+f.shift(),C=L+f.shift(),g=N+f.shift(),c.curveTo(o,s,u,l,A,I),c.curveTo(D,L,N,C,g,m);break;case 37:o=g+f.shift(),s=m+f.shift(),u=o+f.shift(),l=s+f.shift(),A=u+f.shift(),I=l+f.shift(),D=A+f.shift(),L=I+f.shift(),N=D+f.shift(),C=L+f.shift(),Math.abs(N-g)>Math.abs(C-m)?g=N+f.shift():m=C+f.shift(),c.curveTo(o,s,u,l,A,I),c.curveTo(D,L,N,C,g,m);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+R),f.length=0}break;case 14:f.length>0&&!h&&(T=f.shift()+w,h=!0),p&&(c.closePath(),p=!1);break;case 18:i();break;case 19:case 20:i(),O+=d+7>>3;break;case 21:f.length>2&&!h&&(T=f.shift()+w,h=!0),m+=f.pop(),g+=f.pop(),n(g,m);break;case 22:f.length>1&&!h&&(T=f.shift()+w,h=!0),g+=f.pop(),n(g,m);break;case 23:i();break;case 24:for(;f.length>2;)o=g+f.shift(),s=m+f.shift(),u=o+f.shift(),l=s+f.shift(),g=u+f.shift(),m=l+f.shift(),c.curveTo(o,s,u,l,g,m);g+=f.shift(),m+=f.shift(),c.lineTo(g,m);break;case 25:for(;f.length>6;)g+=f.shift(),m+=f.shift(),c.lineTo(g,m);o=g+f.shift(),s=m+f.shift(),u=o+f.shift(),l=s+f.shift(),g=u+f.shift(),m=l+f.shift(),c.curveTo(o,s,u,l,g,m);break;case 26:for(f.length%2&&(g+=f.shift());f.length>0;)o=g,s=m+f.shift(),u=o+f.shift(),l=s+f.shift(),g=u,m=l+f.shift(),c.curveTo(o,s,u,l,g,m);break;case 27:for(f.length%2&&(m+=f.shift());f.length>0;)o=g+f.shift(),s=m,u=o+f.shift(),l=s+f.shift(),g=u+f.shift(),m=l,c.curveTo(o,s,u,l,g,m);break;case 28:M=r[O],x=r[O+1],f.push((M<<24|x<<16)>>16),O+=2;break;case 29:_=f.pop()+e.gsubrsBias,E=e.gsubrs[_],E&&a(E);break;case 30:for(;f.length>0&&(o=g,s=m+f.shift(),u=o+f.shift(),l=s+f.shift(),g=u+f.shift(),m=l+(1===f.length?f.shift():0),c.curveTo(o,s,u,l,g,m),0!==f.length);)o=g+f.shift(),s=m,u=o+f.shift(),l=s+f.shift(),m=l+f.shift(),g=u+(1===f.length?f.shift():0),c.curveTo(o,s,u,l,g,m);break;case 31:for(;f.length>0&&(o=g+f.shift(),s=m,u=o+f.shift(),l=s+f.shift(),m=l+f.shift(),g=u+(1===f.length?f.shift():0),c.curveTo(o,s,u,l,g,m),0!==f.length);)o=g,s=m+f.shift(),u=o+f.shift(),l=s+f.shift(),g=u+f.shift(),m=l+(1===f.length?f.shift():0),c.curveTo(o,s,u,l,g,m);break;default:R<32?console.log("Glyph "+t.index+": unknown operator "+R):R<247?f.push(R-139):R<251?(M=r[O],O+=1,f.push(256*(R-247)+M+108)):R<255?(M=r[O],O+=1,f.push(256*-(R-251)-M-108)):(M=r[O],x=r[O+1],b=r[O+2],S=r[O+3],O+=4,f.push((M<<24|x<<16|b<<8|S)/65536))}}}var o=void 0,s=void 0,u=void 0,l=void 0,c=new k.default,f=[],d=0,h=!1,p=!1,g=0,m=0,v=void 0,y=void 0,M=void 0,w=void 0;if(e.isCIDFont){var x=e.tables.cff.topDict._fdSelect[t.index],b=e.tables.cff.topDict._fdArray[x];v=b._subrs,y=b._subrsBias,M=b._defaultWidthX,w=b._nominalWidthX}else v=e.tables.cff.topDict._subrs,y=e.tables.cff.topDict._subrsBias,M=e.tables.cff.topDict._defaultWidthX,w=e.tables.cff.topDict._nominalWidthX;var T=M;return a(r),t.advanceWidth=T,c}function w(e,t,r,n){var i=[],a=void 0,o=new B.default.Parser(e,t),s=o.parseCard8();if(0===s)for(var u=0;u<r;u++){if((a=o.parseCard8())>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+n+")");i.push(a)}else{if(3!==s)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+s);var l=o.parseCard16(),c=o.parseCard16();if(0!==c)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+c);for(var f=void 0,d=0;d<l;d++){if(a=o.parseCard8(),f=o.parseCard16(),a>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+n+")");if(f>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+f);for(;c<f;c++)i.push(a);c=f}if(f!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+f)}return i}function x(e,t,r){r.tables.cff={};var n=h(e,t),i=o(e,n.endOffset,B.default.bytesToString),s=o(e,i.endOffset),u=o(e,s.endOffset,B.default.bytesToString),l=o(e,u.endOffset);r.gsubrs=l.objects,r.gsubrsBias=a(r.gsubrs);var c=m(e,t,s.objects,u.objects);if(1!==c.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+c.length);var f=c[0];if(r.tables.cff.topDict=f,f._privateDict&&(r.defaultWidthX=f._privateDict.defaultWidthX,r.nominalWidthX=f._privateDict.nominalWidthX),void 0!==f.ros[0]&&void 0!==f.ros[1]&&(r.isCIDFont=!0),r.isCIDFont){var d=f.fdArray,p=f.fdSelect;if(0===d||0===p)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");d+=t;var x=o(e,d),b=m(e,t,x.objects,u.objects);f._fdArray=b,p+=t,f._fdSelect=w(e,p,r.numGlyphs,b.length)}var T=t+f.private[1],S=g(e,T,f.private[0],u.objects);if(r.defaultWidthX=S.defaultWidthX,r.nominalWidthX=S.nominalWidthX,0!==S.subrs){var _=T+S.subrs,E=o(e,_);r.subrs=E.objects,r.subrsBias=a(r.subrs)}else r.subrs=[],r.subrsBias=0;var A=o(e,t+f.charStrings);r.nGlyphs=A.objects.length;var I=v(e,t+f.charset,r.nGlyphs,u.objects);0===f.encoding?r.cffEncoding=new P.CffEncoding(P.cffStandardEncoding,I):1===f.encoding?r.cffEncoding=new P.CffEncoding(P.cffExpertEncoding,I):r.cffEncoding=y(e,t+f.encoding,I),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new j.default.GlyphSet(r);for(var D=0;D<r.nGlyphs;D+=1){var L=A.objects[D];r.glyphs.push(D,j.default.cffGlyphLoader(r,D,M,L))}}function b(e,t){var r=void 0,n=P.cffStandardStrings.indexOf(e);return n>=0&&(r=n),n=t.indexOf(e),n>=0?r=n+P.cffStandardStrings.length:(r=P.cffStandardStrings.length+t.length,t.push(e)),r}function T(){return new G.default.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function S(e){var t=new G.default.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}function _(e,t,r){for(var n={},a=0;a<e.length;a+=1){var o=e[a],s=t[o.name];void 0===s||i(s,o.value)||("SID"===o.type&&(s=b(s,r)),n[o.op]={name:o.name,type:o.type,value:s})}return n}function E(e,t){var r=new G.default.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=_(H,e,t),r}function A(e){var t=new G.default.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function I(e){var t=new G.default.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}function D(){return new G.default.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function L(e,t){for(var r=new G.default.Record("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<e.length;n+=1){var i=e[n],a=b(i,t);r.fields.push({name:"glyph_"+n,type:"SID",value:a})}return r}function N(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var n=0,i=0,a=0;a<r.commands.length;a+=1){var o=void 0,s=void 0,u=r.commands[a];if("Q"===u.type){u={type:"C",x:u.x,y:u.y,x1:1/3*n+2/3*u.x1,y1:1/3*i+2/3*u.y1,x2:1/3*u.x+2/3*u.x1,y2:1/3*u.y+2/3*u.y1}}if("M"===u.type)o=Math.round(u.x-n),s=Math.round(u.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(u.x),i=Math.round(u.y);else if("L"===u.type)o=Math.round(u.x-n),s=Math.round(u.y-i),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),n=Math.round(u.x),i=Math.round(u.y);else if("C"===u.type){var l=Math.round(u.x1-n),c=Math.round(u.y1-i),f=Math.round(u.x2-u.x1),d=Math.round(u.y2-u.y1);o=Math.round(u.x-u.x2),s=Math.round(u.y-u.y2),t.push({name:"dx1",type:"NUMBER",value:l}),t.push({name:"dy1",type:"NUMBER",value:c}),t.push({name:"dx2",type:"NUMBER",value:f}),t.push({name:"dy2",type:"NUMBER",value:d}),t.push({name:"dx",type:"NUMBER",value:o}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(u.x),i=Math.round(u.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function C(e){for(var t=new G.default.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var n=e.get(r),i=N(n);t.charStrings.push({name:n.name,type:"CHARSTRING",value:i})}return t}function O(e,t){var r=new G.default.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=_(W,e,t),r}function R(e,t){for(var r=new G.default.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),n=1/t.unitsPerEm,i={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[n,0,0,n,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},a={},o=[],s=void 0,u=1;u<e.length;u+=1)s=e.get(u),o.push(s.name);var l=[];r.header=T(),r.nameIndex=S([t.postScriptName]);var c=E(i,l);r.topDictIndex=A(c),r.globalSubrIndex=D(),r.charsets=L(o,l),r.charStringsIndex=C(e),r.privateDict=O(a,l),r.stringIndex=I(l);var f=r.header.sizeOf()+r.nameIndex.sizeOf()+r.topDictIndex.sizeOf()+r.stringIndex.sizeOf()+r.globalSubrIndex.sizeOf();return i.charset=f,i.encoding=0,i.charStrings=i.charset+r.charsets.sizeOf(),i.private[1]=i.charStrings+r.charStringsIndex.sizeOf(),c=E(i,l),r.topDictIndex=A(c),r}Object.defineProperty(t,"__esModule",{value:!0});var P=r(121),z=r(150),j=n(z),U=r(17),B=n(U),V=r(100),k=n(V),F=r(28),G=n(F),H=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],W=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];t.default={parse:x,make:R}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong();var r=void 0;e.groupCount=r=t.parseULong(),e.glyphIndexMap={};for(var n=0;n<r;n+=1)for(var i=t.parseULong(),a=t.parseULong(),o=t.parseULong(),s=i;s<=a;s+=1)e.glyphIndexMap[s]=o,o++}function a(e,t,r,n,i){e.length=t.parseUShort(),e.language=t.parseUShort();var a=void 0;e.segCount=a=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var o=new h.default.Parser(r,n+i+14),s=new h.default.Parser(r,n+i+16+2*a),u=new h.default.Parser(r,n+i+16+4*a),l=new h.default.Parser(r,n+i+16+6*a),c=n+i+16+8*a,f=0;f<a-1;f+=1)for(var d=void 0,p=o.parseUShort(),g=s.parseUShort(),m=u.parseShort(),v=l.parseUShort(),y=g;y<=p;y+=1)0!==v?(c=l.offset+l.relativeOffset-2,c+=v,c+=2*(y-g),0!==(d=h.default.getUShort(r,c))&&(d=d+m&65535)):d=y+m&65535,e.glyphIndexMap[y]=d}function o(e,t){var r={};r.version=h.default.getUShort(e,t),f.default.argument(0===r.version,"cmap table version should be 0."),r.numTables=h.default.getUShort(e,t+2);for(var n=-1,o=r.numTables-1;o>=0;o-=1){var s=h.default.getUShort(e,t+4+8*o),u=h.default.getUShort(e,t+4+8*o+2);if(3===s&&(0===u||1===u||10===u)){n=h.default.getULong(e,t+4+8*o+4);break}}if(-1===n)throw new Error("No valid cmap sub-tables found.");var l=new h.default.Parser(e,t+n);if(r.format=l.parseUShort(),12===r.format)i(r,l);else{if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");a(r,l,e,t,n)}return r}function s(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0})}function u(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function l(e){var t=new g.default.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.segments=[];for(var r=0;r<e.length;r+=1){for(var n=e.get(r),i=0;i<n.unicodes.length;i+=1)s(t,n.unicodes[i],r);t.segments=t.segments.sort(function(e,t){return e.start-t.start})}u(t);var a=void 0;a=t.segments.length,t.segCountX2=2*a,t.searchRange=2*Math.pow(2,Math.floor(Math.log(a)/Math.log(2))),t.entrySelector=Math.log(t.searchRange/2)/Math.log(2),t.rangeShift=t.segCountX2-t.searchRange;for(var o=[],l=[],c=[],f=[],d=[],h=0;h<a;h+=1){var p=t.segments[h];o=o.concat({name:"end_"+h,type:"USHORT",value:p.end}),l=l.concat({name:"start_"+h,type:"USHORT",value:p.start}),c=c.concat({name:"idDelta_"+h,type:"SHORT",value:p.delta}),f=f.concat({name:"idRangeOffset_"+h,type:"USHORT",value:p.offset}),void 0!==p.glyphId&&(d=d.concat({name:"glyph_"+h,type:"USHORT",value:p.glyphId}))}return t.fields=t.fields.concat(o),t.fields.push({name:"reservedPad",type:"USHORT",value:0}),t.fields=t.fields.concat(l),t.fields=t.fields.concat(c),t.fields=t.fields.concat(f),t.fields=t.fields.concat(d),t.length=14+2*o.length+2+2*l.length+2*c.length+2*f.length+2*d.length,t}Object.defineProperty(t,"__esModule",{value:!0});var c=r(22),f=n(c),d=r(17),h=n(d),p=r(28),g=n(p);t.default={parse:o,make:l}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i){var a=void 0;return(t&n)>0?(a=e.parseByte(),0==(t&i)&&(a=-a),a=r+a):a=(t&i)>0?r:r+e.parseShort(),a}function a(e,t,r){var n=new m.default.Parser(t,r);e.numberOfContours=n.parseShort(),e._xMin=n.parseShort(),e._yMin=n.parseShort(),e._xMax=n.parseShort(),e._yMax=n.parseShort();var a=void 0,o=void 0;if(e.numberOfContours>0){for(var s=e.endPointIndices=[],u=0;u<e.numberOfContours;u+=1)s.push(n.parseUShort());e.instructionLength=n.parseUShort(),e.instructions=[];for(var l=0;l<e.instructionLength;l+=1)e.instructions.push(n.parseByte());var c=s[s.length-1]+1;a=[];for(var f=0;f<c;f+=1)if(o=n.parseByte(),a.push(o),(8&o)>0)for(var h=n.parseByte(),p=0;p<h;p+=1)a.push(o),f+=1;if(d.default.argument(a.length===c,"Bad flags."),s.length>0){var g=[],v=void 0;if(c>0){for(var y=0;y<c;y+=1)o=a[y],v={},v.onCurve=!!(1&o),v.lastPointOfContour=s.indexOf(y)>=0,g.push(v);for(var M=0,w=0;w<c;w+=1)o=a[w],v=g[w],v.x=i(n,o,M,2,16),M=v.x;for(var x=0,b=0;b<c;b+=1)o=a[b],v=g[b],v.y=i(n,o,x,4,32),x=v.y}e.points=g}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var T=!0;T;){a=n.parseUShort();var S={glyphIndex:n.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&a)>0?(2&a)>0?(S.dx=n.parseShort(),S.dy=n.parseShort()):S.matchedPoints=[n.parseUShort(),n.parseUShort()]:(2&a)>0?(S.dx=n.parseChar(),S.dy=n.parseChar()):S.matchedPoints=[n.parseByte(),n.parseByte()],(8&a)>0?S.xScale=S.yScale=n.parseF2Dot14():(64&a)>0?(S.xScale=n.parseF2Dot14(),S.yScale=n.parseF2Dot14()):(128&a)>0&&(S.xScale=n.parseF2Dot14(),S.scale01=n.parseF2Dot14(),S.scale10=n.parseF2Dot14(),S.yScale=n.parseF2Dot14()),e.components.push(S),T=!!(32&a)}if(256&a){e.instructionLength=n.parseUShort(),e.instructions=[];for(var _=0;_<e.instructionLength;_+=1)e.instructions.push(n.parseByte())}}}function o(e,t){for(var r=[],n=0;n<e.length;n+=1){var i=e[n],a={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};r.push(a)}return r}function s(e){for(var t=[],r=[],n=0;n<e.length;n+=1){var i=e[n];r.push(i),i.lastPointOfContour&&(t.push(r),r=[])}return d.default.argument(0===r.length,"There are still points left in the current contour."),t}function u(e){var t=new y.default;if(!e)return t;for(var r=s(e),n=0;n<r.length;++n){var i=r[n],a=null,o=i[i.length-1],u=i[0];if(o.onCurve)t.moveTo(o.x,o.y);else if(u.onCurve)t.moveTo(u.x,u.y);else{var l={x:.5*(o.x+u.x),y:.5*(o.y+u.y)};t.moveTo(l.x,l.y)}for(var c=0;c<i.length;++c)if(a=o,o=u,u=i[(c+1)%i.length],o.onCurve)t.lineTo(o.x,o.y);else{var f=a,d=u;a.onCurve||(f={x:.5*(o.x+a.x),y:.5*(o.y+a.y)},t.lineTo(f.x,f.y)),u.onCurve||(d={x:.5*(o.x+u.x),y:.5*(o.y+u.y)}),t.lineTo(f.x,f.y),t.quadraticCurveTo(o.x,o.y,d.x,d.y)}t.closePath()}return t}function l(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var n=t.components[r],i=e.get(n.glyphIndex);if(i.getPath(),i.points){var a=void 0;if(void 0===n.matchedPoints)a=o(i.points,n);else{if(n.matchedPoints[0]>t.points.length-1||n.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+t.name);var s=t.points[n.matchedPoints[0]],l=i.points[n.matchedPoints[1]],c={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};l=o([l],c)[0],c.dx=s.x-l.x,c.dy=s.y-l.y,a=o(i.points,c)}t.points=t.points.concat(a)}}return u(t.points)}function c(e,t,r,n){for(var i=new p.default.GlyphSet(n),o=0;o<r.length-1;o+=1){var s=r[o];s!==r[o+1]?i.push(o,p.default.ttfGlyphLoader(n,o,a,e,t+s,l)):i.push(o,p.default.glyphLoader(n,o))}return i}Object.defineProperty(t,"__esModule",{value:!0});var f=r(22),d=n(f),h=r(150),p=n(h),g=r(17),m=n(g),v=r(100),y=n(v);t.default={getPath:u,parse:c}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){t=t||0;var r=new u.Parser(e,t),n=r.parseVersion();return s.default.argument(1===n,"Unsupported GSUB table version."),{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(f)}}function a(e){return new c.default.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new c.default.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new c.default.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new c.default.LookupList(e.lookups,h)}])}Object.defineProperty(t,"__esModule",{value:!0});var o=r(22),s=n(o),u=r(17),l=r(28),c=n(l),f=new Array(9);f[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(u.Parser.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(u.Parser.coverage),substitute:this.parseOffset16List()}:void s.default.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},f[2]=function(){var e=this.parseUShort();return s.default.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(u.Parser.coverage),sequences:this.parseListOfLists()}},f[3]=function(){var e=this.parseUShort();return s.default.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(u.Parser.coverage),alternateSets:this.parseListOfLists()}},f[4]=function(){var e=this.parseUShort();return s.default.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(u.Parser.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var d={sequenceIndex:u.Parser.uShort,lookupListIndex:u.Parser.uShort};f[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(u.Parser.coverage),ruleSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,d)}})};if(2===t)return{substFormat:t,coverage:this.parsePointer(u.Parser.coverage),classDef:this.parsePointer(u.Parser.classDef),classSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,d)}})};if(3===t){var r=this.parseUShort(),n=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,u.Parser.pointer(u.Parser.coverage)),lookupRecords:this.parseRecordList(n,d)}}s.default.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},f[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(u.Parser.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(d)}})}:2===t?{substFormat:2,coverage:this.parsePointer(u.Parser.coverage),backtrackClassDef:this.parsePointer(u.Parser.classDef),inputClassDef:this.parsePointer(u.Parser.classDef),lookaheadClassDef:this.parsePointer(u.Parser.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(d)}})}:3===t?{substFormat:3,backtrackCoverage:this.parseList(u.Parser.pointer(u.Parser.coverage)),inputCoverage:this.parseList(u.Parser.pointer(u.Parser.coverage)),lookaheadCoverage:this.parseList(u.Parser.pointer(u.Parser.coverage)),lookupRecords:this.parseRecordList(d)}:void s.default.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},f[7]=function(){var e=this.parseUShort();s.default.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new u.Parser(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:f[t].call(r)}},f[8]=function(){var e=this.parseUShort();return s.default.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(u.Parser.coverage),backtrackCoverage:this.parseList(u.Parser.pointer(u.Parser.coverage)),lookaheadCoverage:this.parseList(u.Parser.pointer(u.Parser.coverage)),substitutes:this.parseUShortList()}};var h=new Array(9);h[1]=function(e){return 1===e.substFormat?new c.default.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new c.default.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new c.default.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new c.default.Coverage(e.coverage)}].concat(c.default.ushortList("substitute",e.substitute)))},h[3]=function(e){return s.default.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new c.default.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new c.default.Coverage(e.coverage)}].concat(c.default.tableList("altSet",e.alternateSets,function(e){return new c.default.Table("alternateSetTable",c.default.ushortList("alternate",e))})))},h[4]=function(e){return s.default.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new c.default.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new c.default.Coverage(e.coverage)}].concat(c.default.tableList("ligSet",e.ligatureSets,function(e){return new c.default.Table("ligatureSetTable",c.default.tableList("ligature",e,function(e){return new c.default.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(c.default.ushortList("component",e.components,e.components.length+1)))}))})))},t.default={parse:i,make:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={},n=new l.default.Parser(e,t);return r.version=n.parseVersion(),r.fontRevision=Math.round(1e3*n.parseFixed())/1e3,r.checkSumAdjustment=n.parseULong(),r.magicNumber=n.parseULong(),s.default.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=n.parseUShort(),r.unitsPerEm=n.parseUShort(),r.created=n.parseLongDateTime(),r.modified=n.parseLongDateTime(),r.xMin=n.parseShort(),r.yMin=n.parseShort(),r.xMax=n.parseShort(),r.yMax=n.parseShort(),r.macStyle=n.parseUShort(),r.lowestRecPPEM=n.parseUShort(),r.fontDirectionHint=n.parseShort(),r.indexToLocFormat=n.parseShort(),r.glyphDataFormat=n.parseShort(),r}function a(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new f.default.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(22),s=n(o),u=r(17),l=n(u),c=r(28),f=n(c);t.default={parse:i,make:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={},n=new s.default.Parser(e,t);return r.version=n.parseVersion(),r.ascender=n.parseShort(),r.descender=n.parseShort(),r.lineGap=n.parseShort(),r.advanceWidthMax=n.parseUShort(),r.minLeftSideBearing=n.parseShort(),r.minRightSideBearing=n.parseShort(),r.xMaxExtent=n.parseShort(),r.caretSlopeRise=n.parseShort(),r.caretSlopeRun=n.parseShort(),r.caretOffset=n.parseShort(),n.relativeOffset+=8,r.metricDataFormat=n.parseShort(),r.numberOfHMetrics=n.parseUShort(),r}function a(e){return new l.default.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(17),s=n(o),u=r(28),l=n(u);t.default={parse:i,make:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i){for(var a=void 0,o=void 0,u=new s.default.Parser(e,t),l=0;l<n;l+=1){l<r&&(a=u.parseUShort(),o=u.parseShort());var c=i.get(l);c.advanceWidth=a,c.leftSideBearing=o}}function a(e){for(var t=new l.default.Table("hmtx",[]),r=0;r<e.length;r+=1){var n=e.get(r),i=n.advanceWidth||0,a=n.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:i}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:a})}return t}Object.defineProperty(t,"__esModule",{value:!0});var o=r(17),s=n(o),u=r(28),l=n(u);t.default={parse:i,make:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=new f.default.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",n=12+4*e.length,i=0;i<e.length;++i){var a=r.indexOf(e[i]);a<0&&(a=r.length,r+=e[i]),t.fields.push({name:"offset "+i,type:"USHORT",value:n+a}),t.fields.push({name:"length "+i,type:"USHORT",value:e[i].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t}function a(e,t){var r=new l.default.Parser(e,t),n=r.parseULong();s.default.argument(1===n,"Unsupported ltag table version."),r.skip("uLong",1);for(var i=r.parseULong(),a=[],o=0;o<i;o++){for(var u="",c=t+r.parseUShort(),f=r.parseUShort(),d=c;d<c+f;++d)u+=String.fromCharCode(e.getInt8(d));a.push(u)}return a}Object.defineProperty(t,"__esModule",{value:!0});var o=r(22),s=n(o),u=r(17),l=n(u),c=r(28),f=n(c);t.default={make:i,parse:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={},n=new s.default.Parser(e,t);return r.version=n.parseVersion(),r.numGlyphs=n.parseUShort(),1===r.version&&(r.maxPoints=n.parseUShort(),r.maxContours=n.parseUShort(),r.maxCompositePoints=n.parseUShort(),r.maxCompositeContours=n.parseUShort(),r.maxZones=n.parseUShort(),r.maxTwilightPoints=n.parseUShort(),r.maxStorage=n.parseUShort(),r.maxFunctionDefs=n.parseUShort(),r.maxInstructionDefs=n.parseUShort(),r.maxStackElements=n.parseUShort(),r.maxSizeOfInstructions=n.parseUShort(),r.maxComponentElements=n.parseUShort(),r.maxComponentDepth=n.parseUShort()),r}function a(e){return new l.default.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}Object.defineProperty(t,"__esModule",{value:!0});var o=r(17),s=n(o),u=r(28),l=n(u);t.default={parse:i,make:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=new d.default.Parser(e,t),n=r.parseULong();l.default.argument(1===n,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var i=r.parseULong(),a={},o=0;o<i;o++){var s=r.parseTag(),u=r.parseULong(),f=r.parseULong(),h=c.decode.UTF8(e,t+u,f);a[s]=h}return a}function a(e){var t=(0,s.default)(e).length,r="",n=16+12*t,i=new p.default.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:t}]);for(var a in e){var o=r.length;r+=e[a],i.fields.push({name:"tag "+a,type:"TAG",value:a}),i.fields.push({name:"offset "+a,type:"ULONG",value:n+o}),i.fields.push({name:"length "+a,type:"ULONG",value:e[a].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),i}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),s=n(o),u=r(22),l=n(u),c=r(151),f=r(17),d=n(f),h=r(28),p=n(h);t.default={parse:i,make:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return y[t];case 3:return w[t]}}function a(e,t,r){switch(e){case 0:return x;case 1:return T[r]||b[t];case 3:if(1===t||10===t)return x}}function o(e,t,r){for(var n={},o=new p.default.Parser(e,t),s=o.parseUShort(),u=o.parseUShort(),l=o.offset+o.parseUShort(),c=0;c<u;c++){var f=o.parseUShort(),h=o.parseUShort(),g=o.parseUShort(),m=o.parseUShort(),y=v[m]||m,M=o.parseUShort(),w=o.parseUShort(),b=i(f,g,r),T=a(f,h,g);if(void 0!==T&&void 0!==b){var S=void 0;if(S=T===x?d.decode.UTF16(e,l+w,M):d.decode.MACSTRING(e,l+w,M,T)){var _=n[y];void 0===_&&(_=n[y]={}),_[b]=S}}}return 1===s&&o.parseUShort(),n}function s(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function u(e,t,r,n,i,a){return new m.default.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:a}])}function l(e,t){var r=e.length,n=t.length-r+1;e:for(var i=0;i<n;i++)for(;i<n;i++){for(var a=0;a<r;a++)if(t[i+a]!==e[a])continue e;return i}return-1}function c(e,t){var r=l(e,t);if(r<0){r=t.length;for(var n=0,i=e.length;n<i;++n)t.push(e[n])}return r}function f(e,t){var r=void 0,n=[],i={},o=s(v);for(var l in e){var f=o[l];if(void 0===f&&(f=l),r=parseInt(f),isNaN(r))throw new Error('Name table entry "'+l+'" does not exist, see nameTableNames for complete list.');i[r]=e[l],n.push(r)}for(var h=s(y),p=s(w),g=[],x=[],b=0;b<n.length;b++){r=n[b];var T=i[r];for(var S in T){var _=T[S],E=1,A=h[S],I=M[A],D=a(E,I,A),L=d.encode.MACSTRING(_,D);void 0===L&&(E=0,A=t.indexOf(S),A<0&&(A=t.length,t.push(S)),I=4,L=d.encode.UTF16(_));var N=c(L,x);g.push(u(E,I,A,r,L.length,N));var C=p[S];if(void 0!==C){var O=d.encode.UTF16(_),R=c(O,x);g.push(u(3,1,C,r,O.length,R))}}}g.sort(function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID});for(var P=new m.default.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:g.length},{name:"stringOffset",type:"USHORT",value:6+12*g.length}]),z=0;z<g.length;z++)P.fields.push({name:"record_"+z,type:"RECORD",value:g[z]});return P.fields.push({name:"strings",type:"LITERAL",value:x}),P}Object.defineProperty(t,"__esModule",{value:!0});var d=r(151),h=r(17),p=n(h),g=r(28),m=n(g),v=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],y={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},M={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},w={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},x="utf-16",b={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},T={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};t.default={parse:o,make:f}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=0;t<f.length;t+=1){var r=f[t];if(e>=r.begin&&e<r.end)return t}return-1}function a(e,t){var r={},n=new u.default.Parser(e,t);r.version=n.parseUShort(),r.xAvgCharWidth=n.parseShort(),r.usWeightClass=n.parseUShort(),r.usWidthClass=n.parseUShort(),r.fsType=n.parseUShort(),r.ySubscriptXSize=n.parseShort(),r.ySubscriptYSize=n.parseShort(),r.ySubscriptXOffset=n.parseShort(),r.ySubscriptYOffset=n.parseShort(),r.ySuperscriptXSize=n.parseShort(),r.ySuperscriptYSize=n.parseShort(),r.ySuperscriptXOffset=n.parseShort(),r.ySuperscriptYOffset=n.parseShort(),r.yStrikeoutSize=n.parseShort(),r.yStrikeoutPosition=n.parseShort(),r.sFamilyClass=n.parseShort(),r.panose=[];for(var i=0;i<10;i++)r.panose[i]=n.parseByte();return r.ulUnicodeRange1=n.parseULong(),r.ulUnicodeRange2=n.parseULong(),r.ulUnicodeRange3=n.parseULong(),r.ulUnicodeRange4=n.parseULong(),r.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),r.fsSelection=n.parseUShort(),r.usFirstCharIndex=n.parseUShort(),r.usLastCharIndex=n.parseUShort(),r.sTypoAscender=n.parseShort(),r.sTypoDescender=n.parseShort(),r.sTypoLineGap=n.parseShort(),r.usWinAscent=n.parseUShort(),r.usWinDescent=n.parseUShort(),r.version>=1&&(r.ulCodePageRange1=n.parseULong(),r.ulCodePageRange2=n.parseULong()),r.version>=2&&(r.sxHeight=n.parseShort(),r.sCapHeight=n.parseShort(),r.usDefaultChar=n.parseUShort(),r.usBreakChar=n.parseUShort(),r.usMaxContent=n.parseUShort()),r}function o(e){return new c.default.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(17),u=n(s),l=r(28),c=n(l),f=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];t.default={parse:a,make:o,unicodeRanges:f,getUnicodeRange:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r={},n=new u.default.Parser(e,t);switch(r.version=n.parseVersion(),r.italicAngle=n.parseFixed(),r.underlinePosition=n.parseShort(),r.underlineThickness=n.parseShort(),r.isFixedPitch=n.parseULong(),r.minMemType42=n.parseULong(),r.maxMemType42=n.parseULong(),r.minMemType1=n.parseULong(),r.maxMemType1=n.parseULong(),r.version){case 1:r.names=o.standardNames.slice();break;case 2:r.numberOfGlyphs=n.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var i=0;i<r.numberOfGlyphs;i++)r.glyphNameIndex[i]=n.parseUShort();r.names=[];for(var a=0;a<r.numberOfGlyphs;a++)if(r.glyphNameIndex[a]>=o.standardNames.length){var s=n.parseChar();r.names.push(n.parseString(s))}break;case 2.5:r.numberOfGlyphs=n.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var l=0;l<r.numberOfGlyphs;l++)r.offset[l]=n.parseChar()}return r}function a(){return new c.default.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}Object.defineProperty(t,"__esModule",{value:!0});var o=r(121),s=r(17),u=n(s),l=r(28),c=n(l);t.default={parse:i,make:a}},function(e,t,r){"use strict";(function(e){function r(){return"undefined"!=typeof window}function n(){return"undefined"==typeof window}function i(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t}function a(t){for(var r=new e(t.byteLength),n=new Uint8Array(t),i=0;i<r.length;++i)r[i]=n[i];return r}function o(e,t){if(!e)throw t}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=r,t.isNode=n,t.nodeBufferToArrayBuffer=i,t.arrayBufferToNodeBuffer=a,t.checkArgument=o}).call(t,r(99).Buffer)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TessellateConstants=t.TessellationTypes=void 0;var i=r(69),a=n(i),o=r(446),s=n(o),u=r(70),l=n(u),c=t.TessellationTypes={edge:1,vertex:2},f=t.TessellateConstants={UNPROCESSED:0,SELECTED:1},d={name:"Tessellate",schema:{iterations:{label:"iterations",type:"Number",step:1,defaultValue:1,animatable:!0},tessellationType:{label:"Tessellation Type",type:"Options",display:"Dropdown",labels:["Edge - Quadrilaterals","Vertex - Triangles"],values:[c.edge,c.vertex],defaultValue:1},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(e,t){var r=t.mesh;if(!r)return t;var n=e.iterations,i=e.tessellationType,o=e.indices,u=new l.default((0,a.default)(o),l.default.Faces),c=u?u.indices:[],d=new Uint8Array(r.faceRangeOffsets.length);if(u&&0!==c.length)for(var h=0;h<c.length;++h){var p=c[h];p>=0&&p<d.length&&(d[p]=f.SELECTED)}else d.fill(f.SELECTED);return t.mesh=(0,s.default)(r,d,i,n),t}};t.default=d},function(e,t,r){"use strict";function n(e,t){this.blocks=[],this.lastBlock=null,this.arrayType=e;var r=t||12;this.intraBlockIndexBits=r,this.intraBlockIndexMask=(1<<r)-1,this.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(34),a=function(e){return e&&e.__esModule?e:{default:e}}(i);n.prototype={constructor:n,elementSize:1,toArrayAndClear:function(){var e=this.toArray();return this.clear(),e},newRangeArray:function(e){var t=e||1;return new this.arrayType(t*this.elementSize)},rangeToArray:function(e,t,r,n){for(var i=this.intraBlockIndexMask,a=this.elementSize,o=e>>this.intraBlockIndexBits,s=e&i,u=this.blocks[o],l=r||new this.arrayType(t*a),c=void 0===n?0:n,f=0;f<t;++f){for(var d=s*a,h=d+a;d!==h;++d)l[c++]=u[d];0==(++s&i)&&(u=this.blocks[++o])}return l},arrayToRange:function(e,t,r,n){for(var i=this.intraBlockIndexMask,a=this.elementSize,o=t>>this.intraBlockIndexBits,s=t&i,u=this.blocks[o],l=void 0===n?0:n,c=0;c<r;++c){for(var f=s*a,d=f+a;f!==d;++f)u[f]=e[l++];0==(++s&i)&&(u=this.blocks[++o])}return this},pushArrayRange:function(e,t,r){for(var n=this.intraBlockIndexMask,i=this.elementSize,a=this.length,o=this.lastBlock,s=void 0===r?0:r,u=0;u<t;++u){if(0==(a&=n)){var l=n+1;o=new this.arrayType(l*i),this.lastBlock=o,this.blocks.push(o)}for(var c=a++*i,f=c+i;c!==f;++c)o[c]=e[s++]}return this.length+=t},clear:function(){return this.blocks=[],this.length=0,this.lastBlock=null,this},toArray:function(e,t){for(var r=void 0===t?0:t,n=this.elementSize,i=this.length*n+r,o=a.default.maybeCreate(e||this.arrayType,i),s=this.blocks,u=(1<<this.intraBlockIndexBits)*n,l=Math.max(s.length-1,0),c=0;c!==l;++c)o.set(s[c],r),r+=u;var f=i-r;return 0!==f&&o.set(s[l].subarray(0,f),r),o}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){this.data=e,this.length=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(34),o=n(a),s=r(229),u=n(s);i.prototype={constructor:i,offset:0,stride:1,elementSize:1,newRangeArray:function(e){var t=e||1;return new this.data.constructor(t*this.elementSize)},rangeToArray:function(e,t,r,n){for(var i=this.data,a=this.stride,o=this.elementSize,s=r||new this.data.constructor(t*this.elementSize),u=n||0,l=this.offset+e*a,c=l+t*a;l<c;l+=a)for(var f=l,d=l+o;f!==d;++f)s[u++]=i[f];return s},arrayToRange:function(e,t,r,n){for(var i=this.data,a=this.stride,o=this.elementSize,s=n||0,u=this.offset+t*a,l=u+r*a;u<l;u+=a)for(var c=u,f=u+o;c!==f;++c)i[c]=e[s++];return this},toArray:function(e,t){var r=this.stride,n=this.length,i=this.elementSize,a=void 0===t?0:t,s=a+n*i;if(r===i){var u=this.data,l=this.offset,c=l+n*i;if(0===a&&(void 0===e||e===this.data.constructor))return o.default.slice(u,l,c);var f=o.default.maybeCreate(e,s);return f.set(u.subarray(l,c),a),f}var d=o.default.maybeCreate(e,s);return this.rangeToArray(0,n,d,t)},fromArray:function(e,t){var r=this.stride,n=this.length,i=this.elementSize,a=void 0===t?0:t,o=a+n*i;if(r!==i)return this.arrayToRange(e,0,n,a);var s=0===a&&e.length===o?e:e.subarray(a,o);return this.data.set(s,this.offset),this},repack:function(e){var t=this.data.constructor,r=e||t;return this.stride===this.elementSize&&r===t||this.forceRepack(e),this},forceRepack:function(e){return this.data=this.toArray(e),this.offset=0,this.stride=this.elementSize,this},clone:function(){return this.newCompatibleView(this.toArray(),this.length)},newCompatibleView:function(e,t){throw Error("not implemented")},newCompatibleBuffer:function(){throw Error("not implemented")},newCompareAtIndices:function(){return u.default.derefedTuplesIn(this.data,this.elementSize,this.stride)},newCompareAtIndicesStable:function(){return u.default.derefedTuplesStableIn(this.data,this.elementSize,this.stride)}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){c.default.call(this,e||Uint32Array)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(48),o=n(a),s=r(2),u=n(s);t.default=i;var l=r(226),c=n(l);i.prototype=(0,u.default)((0,o.default)(c.default.prototype),{constructor:i,getAt:function(e){var t=e>>this.intraBlockIndexBits,r=e&this.intraBlockIndexMask;return this.blocks[t][r]},setAt:function(e,t){var r=e>>this.intraBlockIndexBits,n=e&this.intraBlockIndexMask;return this.blocks[r][n]=t,this},push:function(e){var t=this.length++,r=this.lastBlock,n=t&this.intraBlockIndexMask;if(0===n){var i=this.intraBlockIndexMask+1;r=new this.arrayType(i),this.lastBlock=r,this.blocks.push(r)}return r[n]=e,t+1}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={Numeric:function(e,t){return e-t},Natural:function(e,t){return e<t?-1:t<e?1:0},derefedNumbersIn:function(e){return function(t,r){return e[t]-e[r]}},derefedTuplesIn:function(e,t,r){if(!t)throw Error("Invalid element size!");var i=r||t;return 1===i&&1===t?n.derefNumbersIn(e):function(r,n){for(var a=r*i,o=n*i,s=e[a]-e[o],u=1;u!==t&&0===s;++u)s=e[a+u]-e[o+u];return s}},derefedNumbersStableIn:function(e){return function(t,r){var n=e[t]-e[r];return 0!==n?n:t-r}},derefedTuplesStableIn:function(e,t,r){if(!t)throw Error("Invalid element size!");var i=r||t;return 1===i&&1===t?n.derefNumbersStableIn(e):function(r,n){for(var a=r*i,o=n*i,s=e[a]-e[o],u=1;u!==t&&0===s;++u)s=e[a+u]-e[o+u];return 0!==s?s:r-n}}};t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,a,o){var s=-1,u=0,l=g[0],c=g[1],f=void 0;e.getAt(t[r+i],l),e.getAt(t[r+(i+1)%n],c),c.sub(l);var d={x:c.dot(a.xAxis),y:c.dot(a.yAxis)};e.getAt(t[r+(i+2)%n],c),c.sub(l);for(var h={x:c.dot(a.xAxis),y:c.dot(a.yAxis)},p=d.x*h.y-d.y*h.x,m=h.x*h.x+h.y*h.y,v=p,y=i+3,M=3;M<n;++M,++y){f=d,d=h,h=f,e.getAt(t[r+y%n],c),c.sub(l),h.x=c.dot(a.xAxis),h.y=c.dot(a.yAxis);var w=d.x*h.y-d.y*h.x;if(-1===s){var x=h.x*h.x+h.y*h.y;if(w*p<0&&(s=x<m?y%n:(y-1)%n,!o))break;m=x}v+=w}return u=v<0?-1:1,{result:s,orientation:u}}function a(e,t){for(var r=t-2,n=new Array(r),i=e+1,a=i%t,o=0,s=0;o<r;++o,s+=3){++i;var u=i%t;n[s]=e,n[s+1]=a,n[s+2]=u,a=u}return n}function o(e){for(var t=e.mesh.faceRangeOffsets,r=e.mesh.positions.faceValueIndices,n=e.mesh.positions.values,o=t.length-1,s=new Array(o),u=g[0],l=g[1],c=g[2],f=g[3],h=g[4],p=-2*o,m=t[0],v=0;v<o;++v){var y=t[v+1],M=y-m;if(M<3)p+=2;else if(3===M)p+=3,s[v]=null;else{p+=M;var w=0;n.getAt(r[y-1],l),n.getAt(r[m],u),f.copy(l).sub(u).normalize();do{if(n.getAt(r[m+(w+1)%M],l),c.copy(l).sub(u).normalize(),Math.abs(c.dot(f))<1)break;++w,f.copy(c).multiplyScalar(-1),u.copy(l)}while(w<M);h.copy(c).cross(f).normalize(),f.copy(h).cross(c).normalize();var x={xAxis:c,yAxis:f},b=i(n,r,m,M,w,x,!1);if(-1!==b.result&&(w=b.result,b=i(n,r,m,M,w,x,!0)),-1===b.result)s[v]=a(w,M);else{var T=2*M,S=new Array(T);x.xAxis.multiplyScalar(b.orientation);for(var _=m,E=0;_<y;++_,E+=2)n.getAt(r[_],u),S[E]=u.dot(x.xAxis),S[E+1]=u.dot(x.yAxis);s[v]=(0,d.default)(S)}}m=y}e.numTriangles=p,e.mapFaceIdToLocalTriangulation=s}function s(e){var t=e.mesh.materialIds;if(t){for(var r=e.mesh.faceRangeOffsets,n=r.length-1,i=new Uint32Array(n),a=0;a<i.length;a++)i[a]=a;i.sort(function(e,r){return t[e]-t[r]}),e.polygonOrder=i;var o=new Uint32Array(p),s=0,u=0,l=r[0],f=!0,d=!1,h=void 0;try{for(var g,m=(0,c.default)(t);!(f=(g=m.next()).done);f=!0){var v=g.value;v>=p?(v=p-1,s=v):v>s&&(s=v);var y=r[u+1];o[v]+=y-l-2,l=y,++u}}catch(e){d=!0,h=e}finally{try{!f&&m.return&&m.return()}finally{if(d)throw h}}for(var M=s+1===p?o:new Uint32Array(o.buffer,0,s+1),w=new Uint32Array(s+1),x=0,b=0;b<=s;++b)w[b]=x,x+=M[b]*=3;e.groups={groupStarts:w,groupCounts:M}}}function u(e){if(0===g.length)for(var t=0;t<5;++t)g.push(new h.Vector3);this.mesh=e,this.groups=null,this.polygonOrder=null,this.numTriangles=-1,o(this),s(this)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(24),c=n(l);t.default=u;var f=r(304),d=n(f),h=r(0),p=30,g=[];u.prototype={constructor:u,translateIndices:function(e,t){for(var r=this.mesh.faceRangeOffsets,n=r.length-1,i=t.data,a=t.stride,o=t.offset,s=this.polygonOrder,u=0;u<n;++u){var l=s?s[u]:u,f=r[l],d=this.mapFaceIdToLocalTriangulation[l];if(d){var h=!0,p=!1,g=void 0;try{for(var m,v=(0,c.default)(d);!(h=(m=v.next()).done);h=!0){var y=m.value;i[o]=e[f+y],o+=a}}catch(e){p=!0,g=e}finally{try{!h&&v.return&&v.return()}finally{if(p)throw g}}}else for(var M=r[l+1],w=f;w<M;++w)i[o]=e[w],o+=a}},translateMaterialIds:function(e){},translateToUnindexedValues:function(e,t,r){for(var n=this.mesh.faceRangeOffsets,i=n.length-1,a=e.newRangeArray(1),o=this.polygonOrder,s=0,u=0;u<i;++u){var l=o?o[u]:u,f=n[l],d=this.mapFaceIdToLocalTriangulation[l];if(d){var h=!0,p=!1,g=void 0;try{for(var m,v=(0,c.default)(d);!(h=(m=v.next()).done);h=!0){var y=m.value;t.arrayToRange(e.rangeToArray(r[f+y],1,a),s,1),++s}}catch(e){p=!0,g=e}finally{try{!h&&v.return&&v.return()}finally{if(p)throw g}}}else for(var M=n[l+1],w=f;w<M;++w,++s)t.arrayToRange(e.rangeToArray(r[w],1,a),s,1)}}}},function(e,t,r){"use strict";function n(e,t,r,n){this.positions=e||new o.default(i.Vector3,0),this.normals=t,this.weights=r,this.weight=n||1}Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.prototype={constructor:n,isEmpty:function(){return!this.positions.length},setWeight:function(e){this.weight=e}},t.default=n},function(e,t,r){"use strict";function n(e,t,r,n,i,o,s,u,l,c){var f=s||new a.Vector3,d=u||new a.Vector3,h=l||new a.Vector3,p=c||new a.Vector3,g=o||new a.Vector3;o&&g.set(0,0,0);var m=void 0,v=void 0;v=t[r],e.getAt(v,f),v=t[r+1],e.getAt(v,d),d.sub(f);for(var y=r+2;y<n;++y)v=t[y],e.getAt(v,h),h.sub(f),p.crossVectors(d,h),g.add(p),m=d,d=h,h=m;return i||g.normalize(),g}function i(e){this.polyMap=e,this._compute()}Object.defineProperty(t,"__esModule",{value:!0}),t.computeFaceNormal=n,t.default=i;var a=r(0),o=r(3),s=function(e){return e&&e.__esModule?e:{default:e}}(o);i.prototype={constructor:i,getNormalForFaceId:function(e,t){var r=t||new a.Vector3;return this.faceNormalValues.getAt(e,r),r},_compute:function(){for(var e=this.polyMap,t=e.faceRangeOffsets,r=e.faceValueIndices,i=e.values,o=t.length-1,u=new s.default(a.Vector3,o),l=new a.Vector3,c=new a.Vector3,f=new a.Vector3,d=new a.Vector3,h=new a.Vector3,p=0;p<o;++p){n(i,r,t[p],t[p+1],!1,h,l,c,f,d),u.setAt(p,h)}this.faceNormalValues=u}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=e.holeOffsets[r];return 0===n.length?e.loopRangeOffsets[r+1]:t+n[0]}function a(e){var t=Math.PI/e;return function(e){var r=e*t;return{offset:Math.sin(r),height:.5-.5*Math.cos(r)}}}function o(e){var t=1/e;return function(e){var r=e*t;return{offset:Math.sqrt(r),height:r}}}function s(e,t,r){if(0!==t.deltaY){var n=(e.y-t.y)/t.deltaY;if(n>=0&&n<=1){var i=Math.abs(e.x-t.x-n*t.deltaX);r=Math.min(r,i)}}return r}function u(e){for(var t=void 0,r=new x.Vector3,n=new x.Vector3,a=e.loopRangeOffsets.length-1,o=[],s=0;s<a;++s){var u=e.loopRangeOffsets[s],l=i(e,u,s);e.positions.getAt(l-1,n);for(var c=u;c<l;++c){e.positions.getAt(c,r);var f=r.x,d=n.x,h=r.y,p=n.y;h>p&&(t=f,f=d,d=t,t=h,h=p,p=t),o.push({x:f,y:h,deltaX:d-f,deltaY:p-h}),t=r,r=n,n=t}}return o}function l(e){e?(this.loopRangeOffsets=e.loopRangeOffsets,this.loopValueIndices=e.loopValueIndices,this.positions=e.positions,this.holeOffsets=e.holeOffsets,this.bevelSegments=e.bevelSegments,this.bevelSmoothingGroups=e.bevelSmoothingGroups||[],this.backFaceOffsets=e.backFaceOffsets,this.ringOffsets=e.ringOffsets):(this.loopRangeOffsets=new Uint32Array(1),this.loopValueIndices=new Uint32Array(0),this.positions=new T.default(x.Vector3,0),this.holeOffsets=[],this.bevelSegments=[],this.backFaceOffsets=0,this.bevelSmoothingGroups=[],this.ringOffsets=[])}function c(e,t,r,n){var i=1-n,a=i*i,o=2*i*n,s=n*n;return{x:a*e.x+o*t.x+s*r.x,y:a*e.y+o*t.y+s*r.y}}function f(e){for(var t=e.loopRangeOffsets.length-1,r=new Array(t),n=new x.Vector3,i=new x.Vector3,a=new x.Vector3,o=new x.Vector3,s=new x.Vector3,u=e.loopRangeOffsets[0],l=0;l<t;++l){var c=e.loopRangeOffsets[l+1];(0,_.computeFaceNormal)(e.positions,e.loopValueIndices,u,c,!0,s,n,i,a,o),r[l]=s.z>0,u=c}return r}function d(e,t,r,n){for(var i=new x.Vector3,a=t.length,o=0;o<a;++o)if(t[o]){for(var s=n[o],u=-1,l=-1,c=0;c<a;++c)if(!t[c]){var f=n[c];if(f.containsBox(s)){f.getSize(i);var d=i.x*i.y;(-1===u||d<l)&&(u=c,l=d)}}r[o]=u}}function h(e,t,r){for(var n=t.length,i=new x.Vector3,a=[0],o=[],s=new T.default(x.Vector3,e.positions.length),u=[],l=0,c=0,f=r[0].min.y,d=0;d<n;++d)if(-1===t[d]){for(var h=[],p=l,g=e.loopRangeOffsets[d],m=e.loopRangeOffsets[d+1],v=g;v<m;++v)e.positions.getAt(v,i),s.setAt(l,i),o.push(l),++l;for(var y=0;y<n;++y)if(t[y]===d){h.push(l-p);for(var M=e.loopRangeOffsets[y],w=e.loopRangeOffsets[y+1],b=M;b<w;++b)e.positions.getAt(b,i),s.setAt(l,i),o.push(l),++l}var S=r[d];u.push(S);var _=S.min.y;_<f&&(f=_,c=a.length-1),a.push(l),e.holeOffsets.push(h)}e.loopRangeOffsets=new Uint32Array(a),e.loopValueIndices=new Uint32Array(o),e.positions=s;for(var E=0;E<u.length;++E)r[E]=u[E];return c}function p(e,t,r,n,a){var o=e.loopRangeOffsets[t],s=i(e,o,t),u=new x.Vector3,l=new x.Vector3,c=null,f=null;f=a?function(){var e=u.distanceToSquared(l),t=0;return u.y<c.min.y?t=c.min.y-u.y:u.y>c.max.y&&(t=u.y-c.max.y),e+t*t}:function(){var e=u.distanceToSquared(l),t=0;return u.x<c.min.x?t=c.min.x-u.x:u.x>c.max.x&&(t=u.x-c.max.x),e+t*t};for(var d=e.loopRangeOffsets.length-1,h=0;h<d;++h)if(h!==t){var p=e.loopRangeOffsets[h],g=i(e,p,h);c=n[h];for(var m=1e9,v={anchorIndex:-1,testIndex:-1},y=o;y<s;++y){e.positions.getAt(y,u);for(var M=p;M<g;++M){e.positions.getAt(M,l);var w=f();w<m&&(v.anchorIndex=y,v.testIndex=M,m=w)}}e.positions.getAt(v.anchorIndex,u),e.positions.getAt(v.testIndex,l);var b=u.sub(l).length();u.multiplyScalar((b+r)/b),g=e.loopRangeOffsets[h+1];for(var T=p;T<g;++T)e.positions.getAt(T,l),l.add(u),e.positions.setAt(T,l)}}Object.defineProperty(t,"__esModule",{value:!0}),t.SmoothingGroupIds=t.ShapeSetBevelStyles=void 0;var g=r(149),m=n(g),v=r(499),y=n(v),M=r(24),w=n(M);t.ShapeSet=l;var x=r(0),b=r(3),T=n(b),S=r(158),_=r(232),E=t.ShapeSetBevelStyles={Round:0,Extended:1},A=t.SmoothingGroupIds={Front:1,Back:2,Bevel:4};l.prototype={constructor:l,getHorizontalDistance:function(e,t,r,n){var i=t,a=(e.loopRangeOffsets.length,n&&n.thisEdges||u(this)),o=u(e),l=!0,c=!1,f=void 0;try{for(var d,h=(0,w.default)(o);!(l=(d=h.next()).done);l=!0){var p=d.value,g={x:p.x+t,y:p.y,deltaX:p.deltaX,deltaY:p.deltaY},m=(p.y,p.y+p.deltaY),v={x:g.x,y:m},y=!0,M=!1,x=void 0;try{for(var b,T=(0,w.default)(a);!(y=(b=T.next()).done);y=!0){var S=b.value;v.y>=S.y&&g.y<=S.y+S.deltaY&&(i=s(S,g,i),i=s(v,S,i),i=s(g,S,i))}}catch(e){M=!0,x=e}finally{try{!y&&T.return&&T.return()}finally{if(M)throw x}}}}catch(e){c=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw f}}return n&&(n.thisEdges=o),t-(1.01*i+r)},translateShape:function(e){for(var t=this.positions.length,r=new x.Vector3,n=0;n<t;++n)this.positions.getAt(n,r),r.add(e),this.positions.setAt(n,r)},bevelShapeSet:function(e,t,r,n,i,s){function u(t){H=M.dot(m);var n=e/(1+H),i=-n*(m.y+M.y),a=n*(m.x+M.x),o=i*i+a*a;if(o>d){var s=Math.sqrt(d/o);i*=s,a*=s}for(var u=0;u<=r;++u){var l=C[u];w.x=g.x+l*i,w.y=g.y+l*a,w.z=N[u],B.setAt(t,w),t+=U}}function l(){f.positions.getAt(f.loopValueIndices[F-1],p);var e=f.loopValueIndices[k];f.positions.getAt(e,g),m.subVectors(g,p).normalize();var t=[],r=!1,n=!0;b=A.Bevel;for(var i=0,a=k+1;a<F;++a){var o=f.loopValueIndices[a];f.positions.getAt(o,v),M.subVectors(v,g).normalize(),u(e),H<h?(i===D&&(i=1),b=A.Bevel<<i++,n=!1):(a===k+1&&(r=!0),n&&t.push(o-1)),_[o-1]=b,G=m,m=M,M=G,G=g,g=v,v=G,e=o}if(f.positions.getAt(k,v),M.subVectors(v,g).normalize(),u(e),H<h?(i===D&&(i=1),b=A.Bevel<<i++):n&&t.push(e),_[e]=b,r&&b!==A.Bevel)for(var s=0;s<t.length;s++)_[t[s]]=b}function c(){for(var e=f.loopValueIndices[F-1],t=f.loopValueIndices[k],n=k;n<F;){for(var i=0,a=U,o=0;o<r;++o)V.push(e+i),V.push(t+i),V.push(t+a),S.push(_[e]),V.push(e+i),V.push(t+a),V.push(e+a),S.push(_[e]),i=a,a+=U;e=t,++n,t=f.loopValueIndices[n]}}var f=this,d=e*e*i*i,h=Math.cos(s*x.Math.DEG2RAD),p=new x.Vector3,g=new x.Vector3,m=new x.Vector3,v=new x.Vector3,M=new x.Vector3,w=new x.Vector3,b=void 0,S=f.bevelSmoothingGroups,_=[],I=(0,y.default)(A.Bevel),D=30-I,L=this.loopRangeOffsets.length-1,N=[],C=[],O=null;O=n===E.Extended?o(r):a(r);for(var R=0;R<=r;++R){var P=O(R),z=P.offset,j=P.height;N.push(-j*t),C.push(z)}for(var U=this.positions.length,B=new T.default(x.Vector3,U*(r+1)),V=[],k=this.loopRangeOffsets[0],F=k,G=void 0,H=void 0,W=0;W<L;++W){var Y=this.holeOffsets[W],Q=k,q=this.loopRangeOffsets[W+1];q-k;for(var X=0;X<Y.length;++X)F=Q+Y[X],l(),c(),k=F;F=q,l(),c(),k=F}this.positions=B,this.bevelSegments=V,this.backFaceOffsets=r*U},bend:function(e){var t=new x.Vector3,r=(new x.Vector3).set(0,0,-90),n=this,i=0,a=function(e,r){for(var i=e;i<r;++i)n.positions.getAt(i,t),t.x<o?o=t.x:t.x>s&&(s=t.x)};this.positions.getAt(0,t);var o=t.x,s=t.x;this.ringOffsets.length?(a(1,this.ringOffsets[0].start),a(this.ringOffsets[0].until+1,this.ringOffsets[1].start),a(this.ringOffsets[1].until+1,this.positions.length)):a(1,this.positions.length),i=-.5*(s-o),t.set(i,0,0),(0,S.bendVertices)(this.positions,"Z",e,r,t,!0);var u=!0,l=!1,c=void 0;try{for(var f,d=(0,w.default)(this.ringOffsets);!(u=(f=d.next()).done);u=!0){for(var h=f.value,p=0,g=0,m=h.start;m<h.middle;++m)this.positions.getAt(m,t),p+=t.x,g+=t.y;var v=1/(h.middle-h.start);p*=v,g*=v,t.z=0;for(var y=h.start,M=2*Math.PI/(h.middle-h.start),b=0;y<h.middle;++y,b+=M)t.x=p+Math.cos(b)*h.outerRadius,t.y=g-Math.sin(b)*h.outerRadius,this.positions.setAt(y,t);for(var T=2*Math.PI/(h.until-h.middle),_=0;y<h.until;++y,_+=T)t.x=p+Math.cos(_)*h.innerRadius,t.y=g+Math.sin(_)*h.innerRadius,this.positions.setAt(y,t)}}catch(e){l=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw c}}}},l.fromPath=function(e,t,r,n,i){for(var a=[0],o=[],s=[],u=[],g=Math.max(Math.floor(.25*t),2),m=0,v=0,y=new x.Box3,M=null,w=0;w<e.commands.length;++w){var b=e.commands[w];if("Q"===b.type){m+=t;for(var S=e.commands[w-1],_={x:b.x1,y:b.y1},E=b,A=1;A<=t;++A){var I=c(S,_,E,A/t),D=new x.Vector3(I.x,r-I.y,0).multiplyScalar(1/72);M&&M.x===D.x&&M.y===D.y?--m:(M=D,o.push(v),y.expandByPoint(D),s.push(D),++v)}}else if("L"===b.type){m+=g;for(var L=e.commands[w-1],N={x:.5*(b.x+L.x),y:.5*(b.y+L.y)},C=b,O=1;O<=g;++O){var R=c(L,N,C,O/g),P=new x.Vector3(R.x,r-R.y,0).multiplyScalar(1/72);M&&M.x===P.x&&M.y===P.y?--m:(M=P,o.push(v),y.expandByPoint(P),s.push(P),++v)}}else if("Z"!==b.type){var z=new x.Vector3(b.x,r-b.y,0).multiplyScalar(1/72);M&&M.x===z.x&&M.y===z.y||(++m,M=z,o.push(v),y.expandByPoint(z),s.push(z),++v)}else--m,--v,s.pop(),o.pop(),a.push(m),u.push(y),y=new x.Box3}var j=[];if(i){i.innerRadius/=72,i.outerRadius/=72,i.innerRadius>=i.outerRadius&&(i.innerRadius=i.outerRadius);for(var U=(new x.Box3).copy(u[0]),B=1;B<u.length;++B)U.union(u[B]);var V=U.getSize(),k=Math.min(V.x,V.y),F=i.xPosition<0?U.min.x-k:U.max.x+k,G=.5*((U.min.y-k)*(1-i.yPosition)+(U.max.y+k)*(1+i.yPosition)),H=Math.round(t*(i.outerRadius/i.innerRadius)),W={};j.push(W);var Y=4*H;W.start=m,W.middle=m+Y,W.outerRadius=i.outerRadius,m+=Y;for(var Q=Math.PI/(2*H),q=0,X=0;X<Y;++X)s.push(new x.Vector3(F+Math.cos(q)*i.outerRadius,G-Math.sin(q)*i.outerRadius,0)),o.push(v),++v,q+=Q;a.push(m),u.push(new x.Box3(new x.Vector3(F-i.outerRadius,G-i.outerRadius,0),new x.Vector3(F+i.outerRadius,G+i.outerRadius,0)));var Z=4*t;W.until=m+Z,W.innerRadius=i.innerRadius,m+=Z;for(var K=Math.PI/(2*t),J=0,$=0;$<Z;++$)s.push(new x.Vector3(F+Math.cos(J)*i.innerRadius,G+Math.sin(J)*i.innerRadius,0)),o.push(v),++v,J+=K;a.push(m),u.push(new x.Box3(new x.Vector3(F-i.innerRadius,G-i.innerRadius,0),new x.Vector3(F+i.innerRadius,G+i.innerRadius,0)))}for(var ee={loopRangeOffsets:new Uint32Array(a),loopValueIndices:new Uint32Array(o),positions:new T.default(x.Vector3,s.length),holeOffsets:[],bevelSegments:[],backFaceOffsets:0,bevelSmoothingGroups:[],ringOffsets:j},te=0;te<s.length;++te)ee.positions.setAt(te,s[te]);var re=new Array(a.length-1).fill(-1);d(ee,f(ee),re,u);var ne=h(ee,re,u);return void 0!==n&&ee.loopRangeOffsets.length>2&&p(ee,ne,n,u,!1),new l(ee)},l.mergeShapeSets=function(e,t){var r=1,n=0,i=[],a=!0,o=!1,s=void 0;try{for(var u,c=(0,w.default)(e);!(a=(u=c.next()).done);a=!0){var f=u.value;r+=f.loopRangeOffsets.length-1,n+=f.loopValueIndices.length}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}for(var d={loopRangeOffsets:new Uint32Array(r),loopValueIndices:new Uint32Array(n),positions:new T.default(x.Vector3,n),holeOffsets:[],bevelSegments:[],backFaceOffsets:0,bevelSmoothingGroups:[],ringOffsets:i},h=0,p=0,g=0,v=0,y=new x.Vector3,M=0;M<e.length;++M){for(var b,S=e[M],_=t[M],E=S.loopValueIndices.length,A=S.loopRangeOffsets.length-1,I=0;I<A;++I,++g)d.loopRangeOffsets[g]=S.loopRangeOffsets[I]+h;var D=!0,L=!1,N=void 0;try{for(var C,O=(0,w.default)(S.ringOffsets);!(D=(C=O.next()).done);D=!0){var R=C.value;i.push({start:R.start+p,middle:R.middle+p,until:R.until+p,outerRadius:R.outerRadius,innerRadius:R.innerRadius})}}catch(e){L=!0,N=e}finally{try{!D&&O.return&&O.return()}finally{if(L)throw N}}for(var P=0;P<E;++P,++v)d.loopValueIndices[v]=S.loopValueIndices[P]+p,S.positions.getAt(P,y),y.add(_),d.positions.setAt(v,y);(b=d.holeOffsets).push.apply(b,(0,m.default)(S.holeOffsets)),p+=E,h+=E}return d.loopRangeOffsets[g]=n,new l(d)}},function(e,t,r){"use strict";function n(e,t,r){for(var n=r.length,i=0;i<n;++i){var a=e[i];r[i]=e[i]<=t?1-a*a/(t*t)*(3-2*a/t):0}}function i(e,t,r){for(var n=r.length,i=0;i<n;++i){var a=e[i];r[i]=a<=t?1-a/t:0}}function a(e,t,r){var n=new Float32Array(e.length);return c[r](e,t,n),n}Object.defineProperty(t,"__esModule",{value:!0}),t.falloffFunctionPresets=void 0;var o,s=r(19),u=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default=a;var l=t.falloffFunctionPresets={sinusoidal:0,linear:1},c=(o={},(0,u.default)(o,l.sinusoidal,n),(0,u.default)(o,l.linear,i),o)},function(e,t,r){"use strict";function n(e,t,r,n,a,o){var s=[e],u=[new i.Matrix4];if(t<=1)return{meshArray:s,transforms:u};for(var l=1;l<t;++l)s.push(e);var c=(new i.Matrix4).makeRotationFromQuaternion(n),f=(new i.Matrix4).makeScale(a.x,a.y,a.z),d=f.multiply(c),h=new i.Matrix4;o&&o.isMatrix4?h.getInverse(o):o=new i.Matrix4;for(var p=new i.Vector3,g=new i.Matrix4,m=new i.Matrix4,v=1;v<t;++v){p.add(r),g.makeTranslation(p.x,p.y,p.z),m.multiply(d);var y=new i.Matrix4;y.multiply(h),y.multiply(g),y.multiply(m),y.multiply(o),u.push(y)}return{meshArray:s,transforms:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0)},function(e,t,r){"use strict";function n(e,t,r,n,i){var o=(new a.Vector3).copy(i),s=(new a.Vector3).copy(e).multiplyScalar(Math.PI/180),u=(new a.Euler).setFromVector3(s,t),l=(new a.Matrix4).makeRotationFromEuler(u),c=void 0;return 1===r&&(c=(new a.Matrix4).makeRotationY(Math.PI/2),l.multiply(c)),2===r&&(c=(new a.Matrix4).makeRotationX(Math.PI/2),l.multiply(c)),o.applyMatrix4(l).normalize(),Math.abs(o.x)<1e-4&&(o.x=0),Math.abs(o.y)<1e-4&&(o.y=0),Math.abs(o.z)<1e-4&&(o.z=0),(new a.Plane).setFromNormalAndCoplanarPoint(o,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(15),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.positions.faceValueIndices),n=r.length,i=e.positions.values,o=i.length,u=new s.default(a.Vector3,o),c=0,d=new Uint32Array(o),h=0;h<n;h++)d[r[h]]=1;for(var p=0,g=new a.Vector3,m=0;m<o;++m)1===d[m]&&(!function(e,t){d[e]=p,i.getAt(e,g),t.setAt(p,g),p++}(m,u),c++);for(var v=0;v<n;v++)r[v]=d[r[v]];if(t&&console.log(o+" values reduced to "+c+", unused values removed: "+(o-c)),o===c)return e;var y=new s.default(a.Vector3,c);y.fromArray(u.toArray());var M=new f.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:r,values:y});return e.positions=M,new l.default(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(5),l=n(u),c=r(6),f=n(c)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=e.length,n=new M.Vector3,i=new Float32Array(r),a=0;a<r;++a)e.getAt(a,n),i[a]=(0,l.default)(t.distanceToPoint(n));return i}function a(e,t,r,n){for(var i=e.getNumEdges(),a=new Uint32Array(2),o=new Float32Array(i),s=new M.Line3,u=0;u<i;++u){e.getVerticesForEdge(u,a);var l=a[0],c=a[1],f=r[l],d=r[c];0===f||0===d?o[u]=0:f===d?o[u]=f:(n.getAt(l,s.start),n.getAt(c,s.end),o[u]=T(t,s))}return o}function o(e,t,r,n,i,a,o){for(var s=i.faceValueIndices,u=e.edgeVertexAdjacency,l=u.getNumEdges(),c=e.values,d=c.type,h=c.length,p=e.faceRangeOffsets,m=p.length-1,v=e.faceValueIndices,y=v.length,M=new Float32Array(l),w=new Float32Array(2*h),x=new Uint32Array(m+1),b=new Uint32Array(m+1),T=new Uint32Array(2*y),S=new f.default(d,2*h),_=0,E=0,A=0,I=0,D=new d,L=new d,N=new d,C=new d,O=0;O<m;++O){var R=p[O],P=p[O+1],z=P-R;if(a&&1!==a[O]){for(var j=v[R],U=v[R+1%z],B=0;B<z;++B){var V=j;j=U,U=v[R+(B+2)%z],0===w[V]?(c.getAt(V,D),S.setAt(A,D),T[E]=A,w[V]=A+1,++E,++A):(T[E]=w[V]-1,++E)}++I,x[++_]=E}else{for(var k=s[R],F=s[R+1%z],G=A,H=E,W=new Uint32Array(z),Y=0;Y<z;++Y){var Q=k;k=F,F=s[R+(Y+2)%z];var q=n.findEdgeId(Q,k),X=t[q],Z=r[Q];if(1===Z&&(b[O]=1|b[O]),-1===Z&&(b[O]=2|b[O]),X>=0){var K=v[R+Y%z];if(c.getAt(K,D),Z>=0&&(0===w[K]?(S.setAt(A,D),T[E]=A,w[K]=A+1,W[Y]=K,++E,++A):(T[E]=w[K]-1,++E)),X>0&&X<1){var J=v[R+(Y+1)%z],$=0;if($=o?u.findEdgeId(K,J):q,0===M[$]){var ee=K,te=J;if(k<Q){var re=te;te=ee,ee=re}c.getAt(ee,L),c.getAt(te,N);var ne=t[q],ie=1-ne;L.multiplyScalar(ie),N.multiplyScalar(ne),C.addVectors(L,N),S.setAt(A,C),T[E]=A,M[$]=A+1,++E,++A}else T[E]=M[$]-1,++E}}}if(2===b[O]){A=G,E=H;for(var ae=0;ae<z;++ae)w[W[ae]]=0}else++I;x[++_]=E}}var oe=new Uint32Array(I+1),se=new Uint32Array(E),ue=new f.default(d,A);w.fill(-1);for(var le=0,ce=0,fe=0,de=0;de<_;++de){var he=x[de],pe=x[de+1],ge=pe-he;if(2!==b[de]){o||(oe[++le]=oe[le-1]+ge);for(var me=T[he],ve=T[he+1%ge],ye=0;ye<ge;++ye){var Me=me;me=ve,ve=T[he+(ye+2)%ge],-1===w[Me]?(w[Me]=ce,se[fe]=ce,S.getAt(Me,D),ue.setAt(ce,D),++ce,++fe):(se[fe]=w[Me],++fe)}}}o||(o=oe);var we={faceRangeOffsets:o,faceValueIndices:se,values:ue};return new g.default(we)}function s(e,t,r,n,s){var u=s?new Uint32Array(e.faceRangeOffsets.length-1):null;if(s){var l=s.indices,c=l.length;if(0===c)return e;for(var f=0;f<c;++f){u[l[f]]=1}}var d=e.positions.edgeVertexAdjacency,p=e.positions,g=p.values,m=i(g,t),y=a(d,t,m,g),M=new v.default;if(!n||r){if(M.positions=o(p,y,m,d,p,u),M.faceRangeOffsets=M.positions.faceRangeOffsets,e.normalMap){var w=e.normalMap;M.normalMap=o(w,y,m,d,p,u,M.faceRangeOffsets)}if(e.uvMaps){for(var b=new h.default,T=0;T<e.uvMaps.length;T++){var S=e.uvMaps.namesByIndex[T];b.set(S,o(e.uvMaps.byName[S],y,m,d,p,u,M.faceRangeOffsets))}M.uvMaps=b}if(!r){return new v.default(M)}}var _=new v.default;if(r||n){for(var E=0;E<y.length;++E)(y[E]>=1||y[E]<0)&&(y[E]=-1*y[E]);for(var A=0;A<m.length;++A)m[A]=-1*m[A];if(_.positions=o(p,y,m,d,p,u),_.faceRangeOffsets=_.positions.faceRangeOffsets,e.normalMap){var I=e.normalMap;_.normalMap=o(I,y,m,d,p,u,_.faceRangeOffsets)}if(e.uvMaps){for(var D=new h.default,L=0;L<e.uvMaps.length;L++){var N=e.uvMaps.namesByIndex[L];D.set(N,o(e.uvMaps.byName[N],y,m,d,p,u,_.faceRangeOffsets))}_.uvMaps=D}if(r){var C=[M,_];return(0,x.default)(C,null,null)}if(n){return new v.default(_)}}return new v.default(M)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(165),l=n(u);t.default=s;var c=r(3),f=n(c),d=r(18),h=n(d),p=r(6),g=n(p),m=r(5),v=n(m),y=r(15),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(y),w=r(103),x=n(w),b=r(70),T=(n(b),function(){var e=new M.Vector3;return function(t,r){var n=r.delta(e),i=t.normal.dot(n);if(0===i)return 0===t.distanceToPoint(r.start)?0:-1;var a=-(r.start.dot(t.normal)+t.constant)/i;return a>=1||a<=0?-2:a}}())},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i){function a(e){h.getAt(e,y).lerp(v,i[e]),v.copy(y)}var s=new d.default(e),l=n||u.default.IdPositions,f=new c.default(u.default.resolveMap(e,l)),h=f.values.clone();f.values=h,u.default.assignMap(s,l,f);var g=o.default.getIndices(e,o.default.Vertices,l,r),m=h.type,v=new m,y=new m,M=!!r;if(t.constructor===m)for(var w=t,x=0,b=g.length;x!==b;++x){var T=g[x];h.getAt(T,v),v.add(w),i&&a(T),h.setAt(T,v)}else if("function"==typeof t){var S=t;M=!0;for(var x=0,b=g.length;x!==b;++x){var T=g[x];h.getAt(T,v),S(v,f,T),i&&a(T),h.setAt(T,v)}}else if(t.isMatrix4){var _=t;M=!0;for(var x=0,b=g.length;x!==b;++x){var T=g[x];h.getAt(T,v),v.applyMatrix4(_),i&&a(T),h.setAt(T,v)}}else{if(!t.isMatrix3)throw Error("Invalid argument!");var E=t;M=!0;for(var x=0,b=g.length;x!==b;++x){var T=g[x];h.getAt(T,v),v.applyMatrix3(E),i&&a(T),h.setAt(T,v)}}if(M&&l===u.default.IdPositions&&null!==s.normalMap){var A=new p.default(s);r?A.markPositionsDirty(g):A.dirtyFaces.fill(),A.updateMesh()}return new d.default(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(70),o=n(a),s=r(31),u=n(s),l=r(6),c=n(l),f=r(5),d=n(f),h=r(460),p=n(h)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e,t,r){var n=r.newFaceRangeOffsets,i=r.triangulation,a=new u.default(3*i.numTriangles);i.translateIndices(e.faceValueIndices,a);var s=a.data;return new o.default({faceRangeOffsets:n,faceValueIndices:s,values:e.values})}for(var r=new c.default(e),n=new Uint32Array(r.numTriangles+1),i=1;i<n.length;i++)n[i]=n[i-1]+3;var a={newFaceRangeOffsets:n,triangulation:r};return(0,d.default)(e,t,a).topologyChanged()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(6),o=n(a),s=r(156),u=n(s),l=r(230),c=n(l),f=r(157),d=n(f)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o,u,c){e=void 0!==e?e:20,t=void 0!==t?t:20,r=void 0!==r?r:100,o=o||!1,n=Math.max(1,Math.floor(n||8)),i=Math.max(1,Math.floor(i||8)),u=a.Math.clamp(u||0,0,2*Math.PI),c=a.Math.clamp(c||2*Math.PI,0,2*Math.PI-u);var f=r/i,d=r/2,h=(e-t)/r,p=void 0,g=void 0;o?(p=new s.default(a.Vector3,i+1),g=new s.default(a.Vector3,i+1)):(p=new s.default(a.Vector3,i+1+4),g=new s.default(a.Vector3,i+1+4));var m=new a.Vector3,v=new a.Vector3(0,-1,0);o||(m.set(0,-1*d,0),p.setAt(0,m),g.setAt(0,v),m.set(0,-1*d,t),p.setAt(1,m),g.setAt(1,v));for(var y=0,M=i;y<=M;y++){m.set(0,y*f-d,h*y*f+t),0===e&&y===M?v.set(0,1,0):0===t&&0===y?v.set(0,-1,0):v.set(0,0,1).applyAxisAngle(new a.Vector3(1,0,0),Math.atan(h));var w=o?y:y+2;p.setAt(w,m),g.setAt(w,v)}o||(v.set(0,1,0),m.set(0,1*d,e),p.setAt(i+1+2,m),g.setAt(i+1+2,v),m.set(0,1*d,0),p.setAt(i+1+3,m),g.setAt(i+1+3,v));var x=n<3?3:n;return(0,l.default)(p,g,x,u,c,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(451),l=n(u)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(31),a=n(i),o=r(458),s=n(o),u=r(15),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),c={NoIndices:0,SimpleIndices:1,CompactIndices:2,exportBufferGeometry:function(e,t,r,n,i,o,s,u){var f=new l.BufferGeometry,d=[],h=c._prepare(e,d,t,r,n,i,o,s),p=h.exporter,g=h.triangulationChanged,m=a.default.IdPositions,v={};if(t!==c.NoIndices){var y=t===c.SimpleIndices?p.getTriangulatingIndices():p.getMapIndices(m);f.setIndex(new l.BufferAttribute(y,1,!1))}if(r){for(var M=0,w=0;w!==d.length;++w)M+=d[w].itemSize;var x=0;switch(t){case c.NoIndices:x=p.getNumFaceVertices();break;case c.SimpleIndices:x=p.mesh.getNumFaceVertices();break;case c.CompactIndices:x=p.getNumMapValues(a.default.IdPositions)}for(var b=new Float32Array(M*x),T=new l.InterleavedBuffer(b,M),S=0,w=0;w!==d.length;++w){var _=d[w],E=_.itemSize,A=_.mapId;t!==c.CompactIndices?p.getUnindexedMapValues(A,t===c.NoIndices,b,S,M):p.getMapValues(A,b,S,M),f.addAttribute(_.threeName,new l.InterleavedBufferAttribute(T,E,S)),S+=E}}else for(var w=0;w!==d.length;++w){var b,_=d[w],I=t===c.NoIndices,D=a.default.resolveMap(e,_.mapId),L=i&&a.default.resolveMap(i,_.mapId);b=L===D&&u?u[_.mapId]:t!==c.CompactIndices?p.getUnindexedMapValues(_.mapId,I):p.getMapValues(_.mapId),v[_.mapId]=b,f.addAttribute(_.threeName,new l.BufferAttribute(b,_.itemSize,_.normalized))}var N=p.getGroups();if(e.materialIds&&N)for(var w=0;w<N.groupCounts.length;w++)N.groupCounts[w]>0&&f.addGroup(N.groupStarts[w],N.groupCounts[w],w);else f.addGroup(0,3*p.triangulation.numTriangles,0);return{geometry:f,triangulation:p.triangulation,renderIndexing:p.renderIndexing,triangulationChanged:g,valueMap:v}},_prepare:function(e,t,r,n,i,o,u,l){for(var f=new s.default(e),d=[],h=!o||!u||o.positions.faceValueIndices!==e.positions.faceValueIndices,p=!o||!l,g=0,m=new a.default.Iterator(e);m.next();){var v="",y=3,M=!1;switch(m.typeId){case a.default.TypePosition:v="position";break;case a.default.TypeTangent:if(!i)break;y=4,v="tangent";break;case a.default.TypeNormal:v="normal";break;case a.default.TypeUV:if(m.index>=2)break;v="uv"+(0!==m.index?m.index+1:""),y=2;break;case a.default.TypeColor:if(m.index>=1)break;v="color",M=!0}if(!(!v||n&&M)){var w=m.getId();d.push(w),t.push({mapId:w,threeName:v,itemSize:y,normalized:M}),++g}}for(var x=0;x<t.length&&!p;x++){var b=a.default.resolveMap(o,t[x].mapId),T=a.default.resolveMap(e,t[x].mapId);b.faceValueIndices!==T.faceValueIndices&&(p=!0)}r!==c.CompactIndices||p?r===c.CompactIndices&&p&&f.reindexForRendering(d):(l.mesh=e,f.renderIndexing=l);var S=!1;return h?(f.triangulate(),S=!0):f.triangulation=u,{exporter:f,triangulationChanged:S}}};t.default=c},function(e,t,r){"use strict";function n(e,t,r){var n=t.asset,i=t.hdr;return r&&t.preferHDR&&i?i:n}function i(e,t,r){var i=n(e,t,r),o=["optimizeImage","resizeImage","resizeWidth","resizeHeight","optimizeFormat"].reduce(function(e,r){return e[r]=t[r],e},{});return i&&(0,a.getOrFetchImage)(i,{},o)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getAssetIdFromImage=n,t.fetchTextureImage=i;var a=r(33);r(58)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){function n(){return fe.getContext()}function i(t,r){var n=(0,N.getRenderingMode)(e);if(de=window.devicePixelRatio,he&&n!==N.RENDER_MODES.vr){var i=he.parentNode.getBoundingClientRect();t=i.width,r=i.height,fe.setPixelRatio(de)}else n===N.RENDER_MODES.vr&&(t=window.innerWidth,r=window.innerHeight,Ne.vrEffect.setSize(t,r));t<10||r<10||(ye.set(t,r),n!==N.RENDER_MODES.vr&&((0,T.resizeCamera)(e,xe,ye),fe.setSize(ye.width,ye.height)),null!==Ee&&Ee.setSize(ye.width,ye.height),ze.setSize(ye.width*de,ye.height*de),we&&we.resize(ye),r&&0!==r&&(ue.aspect=t/r,ue.updateProjectionMatrix()),Ze.uniforms.resolution.value.set(1/(ye.width*de),1/(ye.height*de)))}function a(t){he!==t&&(he=t,he.insertBefore(fe.domElement,he.firstChild),fe.domElement.tabIndex=1,pe=he.parentElement,e.dispatch((0,N.setPlayerElement)(pe,fe.domElement)),i())}function o(t){t?Le=(0,U.default)(e,Ne):(window.removeEventListener("deviceorientation",Le),Le=null)}function u(){!function(t,r){var n=e.getIn(["player",t]);Oe[t]!==n&&(r(n,Oe[t]),Oe[t]=n)}("deviceTracking",o)}function c(){var e=Date.now();rt=tt>0?e-tt:-1,tt=e}function d(e){Ae&&(Xe.enabled?se.remove(Ae):se.add(Ae)),e===q.HIGH?(Ve.enabled=!0,Ze.enabled=!1,ke.enabled=!1,Fe.enabled=!1,He.enabled=$e.saoPass,We.enabled=$e.dofPass,Ye.enabled=$e.bloomPass):(Ve.enabled=!1,Ze.enabled=!0,"oitRenderPass"===Ge&&Fe.isSupport(fe)&&!G?(Fe.enabled=!0,ke.enabled=!1):(Fe.enabled=!1,ke.enabled=!0),He.enabled=$e.saoPass,G&&(He.enabled=!1,We.enabled=!1,Ye.enabled=!1,Ae&&(Ae.visible=!1)))}function p(){var t=(0,N.getRenderingMode)(e);et&&clearTimeout(et),c();var r=(0,N.getCamera)(e);xe!==r&&(xe=r,be=xe,Te=xe,j(),J(xe,oe.evaluatedNodes[xe],oe.nodes[xe],!0)),be!==Te&&J(xe,oe.evaluatedNodes[xe],oe.nodes[xe],!0),le.visible=!Ie,u(),we&&(m(),P(),we.frameUpdate(t));var n=(0,O.getHighlighters)(e);if(n.size?n.forEach(function(e){qe.visibleEdgeColor=e.color,qe.hiddenEdgeColor=e.color,qe.edgeThickness=e.thickness,qe.enabled=!0,qe.selectedObjects=e.selectedIds.map(function(e){return ge[e]}).filter(function(e){return!!e})}):(qe.enabled=!1,qe.selectedObjects=[]),Ae&&Ae.data.reflectiveFloor&&!G&&(Ee.distanceFade=Ae.data.reflectiveFloorFade,Ee.roughness=Ae.data.reflectiveFloorRoughness,Ee.metalness=Ae.data.reflectiveFloorMetallic,Ee.opacity=Ae.data.reflectiveFloorOpacity,Ee.fresnelStrength=Ae.data.reflectiveFloorFresnel,Ee.reflectivity=.5,fe.setClearColor(ke.clearColor,ke.clearAlpha),Ee.render(fe,se,ue,ye.width,ye.height)),Be.camera=ue,t===N.RENDER_MODES.normal)fe.setClearColor(16777215),Pe=Re?q.HIGH:q.LOW,d(Pe),ze.render();else if(t===N.RENDER_MODES.vr){if(Pe=q.LOW,d(Pe),He.enabled=!1,ke.enabled=!0,Fe.enabled=!1,!Ne.vrEffect)throw new Error("Expect vr mode to initialize vrEffect");ze.vrRender(Ne.vrEffect,se,ue,!0)}else t===N.RENDER_MODES.lenticular&&Je.render(se,ue);t===N.RENDER_MODES.normal&&(!Re||rt>0)&&(et=setTimeout(function(){c(),Ve.sampleLevel=2,Pe=q.HIGH,d(Pe),ze.render(),Ve.sampleLevel=1,Pe=q.LOW,d(Pe),tt=-1},4*Math.max(rt,100)))}function m(){var t=(0,C.getCommands)(e);Me!==(0,C.getTools)(e)&&(Me=(0,C.getTools)(e),we.updateTools(Me.map(function(e){return t[e]}).toArray()))}function y(e,t,r){ge[r]=new v.Object3D,ge[r].name=t,ge.widgets.add(ge[r]),!1!==e.options.displayGizmo&&e.widget.draw.call(e,ge[r])}function _(e,t,r,n){var i=e.widget;i&&i.remove&&i.remove.call(e,t),ge.widgets.remove(t),delete ge[n]}function P(){var t=(0,C.getCommands)(e),r=(0,C.getActiveCommandsWithWidgets)(e);ge.widgets.children.forEach(function(e){r[e.name]||_(t[e.name],e,e.name,"widgetsRoot-"+e.name)}),(0,f.default)(r).forEach(function(e){var t=e.name,r=e.widget,n="widgetsRoot-"+t;ge[n]||y(e,t,n),r&&r.position&&r.position.call(e,ge[n])})}function j(){(0,E.default)(e,D.virtualTargetId,(0,L.getWorldTransform)(e,D.virtualPivotId))}function B(){var t=oe.evaluatedNodes[(0,I.getSceneId)(e)].Player,r=oe.evaluatedNodes[(0,N.getCamera)(e)].Properties;if(!t.orbitTarget&&!r.orbitTarget){var n=(0,z.default)(se).getCenter();(isNaN(n.x)||isNaN(n.y)||isNaN(n.z))&&n.set(0,0,0),(0,E.default)(e,D.virtualPivotId,(new v.Matrix4).makeTranslation(n.x,n.y,n.z))}}function k(){return!!pe&&(_e=!0,B(),j(),t||(we=(0,S.initManipulators)(e,this,fe.domElement),we.resize(ye)),ge.widgets=new v.Object3D,ge.widgets.name="Widgets",se.add(ge.widgets),se.nodeId=(0,I.getSceneId)(e),(0,x.initAutoShadow)(se),!0)}function X(e){fe.toneMapping=e?v.NoToneMapping:De,fe.gammaInput=!e,fe.gammaOutput=!e,fe.autoClear=!e,Xe.enabled=e,Xe.switchMaterial(),p()}function Z(){return ve}function K(t,r,n){var i=r&&r.parent,a=i&&ge[i]||se;n.name=r.name,n.nodeId=t;var o=ge[t];if(o){for(var s=[].concat(o.children),u=0;u<s.length;u++)o.remove(s[u]),n.add(s[u]);var l=o.parent&&ge[o.parent.nodeId]||o.parent&&o.parent.nodeId===(0,I.getSceneId)(e)&&se;l&&l.remove(o),o.geometry&&o.geometry.dispose()}ge[t]=n,a.add(ge[t])}function J(e,t,r,n){var i=r.type,a=it[i]||[];me[e]||(me[e]={});var o={},u=void 0,c=void 0,f=void 0,d=!0,h=!1,p=void 0;try{for(var g,m=(0,l.default)(a);!(d=(g=m.next()).done);d=!0){var v=g.value,y=Array.isArray(v)?v:[v,v],M=(0,s.default)(y,2);u=M[0],c=M[1];var w=t[u];f=w&&w.id+"--"+w._v,(n||!w||f!==me[e][u]||o[u])&&(at[u]&&(o=at[u]),nt[c]?(nt[c](e,w,r,t.Properties,t),me[e][u]=f):console.warn("Unknown plug translator for: ",u,r.name))}}catch(e){h=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(h)throw p}}}function $(e){var t=ge[e],r=ve[e];(t||r)&&delete me[e],t?(delete ge[e],t.parent.remove(t),t.geometry&&t.geometry.dispose(),t.material&&(t.material.dispose?t.material.dispose():t.material.materials.forEach(function(e){e.dispose()}))):r&&delete ve[e],delete me[e]}function ee(t){var r=t===(0,I.getSceneId)(e)?se:ge[t];return(0,z.default)(r)}function te(t){var r=(new v.Box3).makeEmpty();return t.forEach(function(t){var n=t===(0,I.getSceneId)(e)?(0,z.default)(se):ee(t);r.union(n)}),r}function re(e){return ge[e]}function ne(e){var t=new v.Raycaster;return t.setFromCamera(e,ue),t}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Objects",r=arguments[2],n=arguments[3],i=[],a=r&&n?new v.Raycaster(r,n):ne(e),o=se;return o=(0,R.isUuid)(t)&&ge[t]?ge[t]:se.children.find(function(e){return"Object3D"===e.type&&e.name===t}),o.traverse(function(e){if(e.visible&&e.geometry){null===e.geometry.boundingBox&&e.geometry.computeBoundingBox();var t=e.geometry,r=t.isBufferGeometry?!!t.attributes.position.array:!!t.vertices;if(!1===t.boundingBox.isEmpty()&&r){e.matrix.compose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0);var n=a.intersectObject(e);n.length>0&&i.push({id:e.nodeId,node:e,data:n})}}}),i.sort(function(e,t){return e.data[0].distance-t.data[0].distance}),i}function ae(){(0,M.clearGeometryCache)(),_e=!1,xe=D.virtualCameraId,be=D.virtualCameraId,Te=null,Se=null,me={},ge={},(0,h.default)(Ce).forEach(function(e){return delete Ce[e]}),se.nodeId=(0,I.getSceneId)(e)}var oe=e.get("sceneGraph"),se=new v.Scene,ue=new v.CombinedCamera(1,1,75,.1,1e3);se.add(ue);var le=new v.DirectionalLight(16777215,1);ue.add(le);var ce={antialias:!1,precision:"highp",alpha:!0,preserveDrawingBuffer:!0};t&&(ce.canvas={style:{},addEventListener:function(){}},ce.context=t);var fe=new v.WebGLRenderer(ce);fe.setClearColor(16777215),fe.autoResizeTextures=!1,fe.gammaInput=!0,fe.gammaOutput=!0,fe.toneMapping=v.ReinhardToneMapping,fe.physicallyCorrectLights=!0,fe.shadowMap.enabled=!0,fe.shadowMap.type=v.BasicShadowMap;var de=window.devicePixelRatio;fe.setPixelRatio(de),fe.isMobile=G;var he=null,pe=null,ge={},me={},ve={},ye=new v.Vector2(400,300),Me=[],we=null,xe=D.virtualCameraId,be=D.virtualCameraId,Te=null,Se=null,_e=!1,Ee=null,Ae=null,Ie=!1,De=fe.toneMapping,Le=void 0,Ne=(0,g.default)({},F.default),Ce={},Oe={},Re=!!t,Pe=void 0,ze=new v.EffectComposer(fe,!0),je=new v.ClearPass;je.enabled=!0,je.cameraAware=!0,ze.addPass(je);var Ue=new v.TexturePass;Ue.clear=!1,Ue.enabled=!1,Ue.cameraAware=!0,ze.addPass(Ue);var Be=new v.CubeTexturePass(se,ue);Be.clear=!1,Be.enabled=!1,Be.cameraAware=!0,ze.addPass(Be);var Ve=new v.SSAARenderPass(se,ue);Ve.clear=!1,Ve.unbiased=!0,Ve.sampleRenderTarget=ze.requestBuffer("temp"),Ve.enabled=Re,Ve.cameraAware=!0,ze.addPass(Ve);var ke=new v.RenderPass(se,ue);ke.clear=!1,ke.renderOver=!0,ke.enabled=!Re,ke.cameraAware=!0,ze.addPass(ke);var Fe=new v.OITRenderPass(se,ue,fe,null,268435455);Fe.clear=!1,Fe.enabled=!1,Fe.cameraAware=!0,ze.addPass(Fe);var Ge="renderPass",He=new v.SAOPass(se,ue);He.downSamplingRatio=1,He.intensity=3,He.occlusionSphereWorldRadius=2,He.blurEnabled=!0,He.outputOverride="default",He.manualCompositing=!1,He.blurKernelSize=(He.downSamplingRatio,6+(Re?2:0)),He.enabled=!1,He.cameraAware=!0,G||ze.addPass(He);var We=new v.DofPass(new v.Vector2(256,256),se,ue);We.enabled=!1,We.cameraAware=!0,ze.addPass(We);var Ye=new v.UnrealBloomPass(new v.Vector2(256,256),1.5,1,1);Ye.enabled=!1,Ye.cameraAware=!0,ze.addPass(Ye);var Qe=new v.SparklePass(ue,fe,null,null);Qe.enabled=!1,Qe.cameraAware=!0,ze.addPass(Qe);var qe=new v.OutlinePass(new v.Vector2(256,256),se,ue);qe.edgeStrength=10,qe.edgeGlow=0,qe.edgeThickness=1,qe.pulsePeriod=0,qe.visibleEdgeColor=new v.Color(0,1,0),qe.hiddenEdgeColor=new v.Color(0,1,0),qe.enabled=!1,qe.cameraAware=!0,ze.addPass(qe);var Xe=new v.IndexPass(se,ue,"nodeId");Xe.enabled=!1,ze.addPass(Xe);var Ze=new v.ShaderPass(v.FXAAShader);Ze.uniforms.resolution.value.set(1/256,1/256),Ze.enabled=!Re,Ze.cameraAware=!0,ze.addPass(Ze);var Ke=new v.ShaderPass(v.CopyShader);Ke.renderToScreen=!0,Ke.cameraAware=!0,ze.addPass(Ke);var Je=new v.ParallaxBarrierEffect(fe);Je.setSize(256,256);var $e={saoPass:!1,dofPass:!1,bloomPass:!1,reflectiveFloorMesh:!1};e.dispatch((0,N.setThree)({scene:se,camera:ue,renderer:fe,THREE:v,composer:ze}));var et=null,tt=-1,rt=-1,nt={PolyMesh:function(t,r,n,i){var a=i.castShadow,o=i.receiveShadow,s=i.discardable,u=i.visible,l=i.doubleSided,c=r.mesh,f=r.previousMesh,d=fe.extensions.get("OES_element_index_uint")?V.default.CompactIndices:V.default.NoIndices,p=ge[t],g=p&&p.userData.triangulation,m=p&&p.userData.renderIndexing,y=p&&p.userData.valueMap,M=c&&V.default.exportBufferGeometry(c,d,!1,c.tangentMap,f,g,m,y),x=void 0,b=void 0,T=void 0,S=void 0,_=void 0;M&&(x=M.geometry,b=M.triangulation,T=M.triangulationChanged,S=M.renderIndexing,_=M.valueMap);var E=void 0;T||!p?E=x&&new v.Mesh(x,(0,w.primitiveToMaterial)(e)):(E=p,x&&(E.geometry.dispose(),E.geometry=x)),x&&s&&(0,h.default)(x.attributes).forEach(function(e){x.attributes[e].onUploadCallback=function(){this.array=null}}),s&&(r.mesh=null,r.previousMesh=null),E&&(E.castShadow=a,E.receiveShadow=o,E.visible=u,s||(E.userData.triangulation=b),s||(E.userData.renderIndexing=S),s||(E.userData.valueMap=_),E.material.side=l?v.DoubleSide:v.FrontSide),K(t,n,E||new v.Object3D)},Light:function(e,t,r,n){var i=ge[e];if(i){var a=se.getObjectByName("Objects");(0,x.updateLight)(t,i,a)}else i=(0,x.createLight)(t,se,n.visible),Ie=!0,i&&K(e,r,i)},Bone:function(e,t,r){K(e,r,new v.Object3D)},Null:function(e,t,r,n){K(e,r,new v.Object3D)},PrefetchMaterialNull:function(e,t,r,n){_e&&n.prefetch&&!ge[e]&&K(e,r,new v.Object3D)},Properties:function(e,t){ge[e]&&t&&(ge[e].visible=t.visible)},Transform:function(e,t,r){t&&t.transform&&ge[e]&&(0,b.setMatrixOn)(ge[e],t.transform)},Material:function(t,r){ge[t]&&(ge[t].material=(0,w.primitiveToMaterial)(e,fe,r,ge[t].material,{sparklePass:Qe,nodeInfo:ge[t]}))},Image:function(t,r,n,i){_e&&i.prefetch&&(0,w.getTextureImage)(e,r)},Environment:function(t,r){var n=r.backgroundStyle;switch(je.enabled=!1,Be.enabled=!1,r.environmentMap&&(Ie=!0),n){case H:je.enabled=!0,je.clearColor=r.backgroundColor,je.clearAlpha=r.backgroundOpacity;break;case W:Ue.enabled=!0,Ue.map=(0,w.assignTexture)(e,fe,r.background);break;case Y:case Q:je.enabled=!0,je.clearColor=0,je.clearAlpha=0,Be.enabled=!0;var i=void 0;n===Q?(i=r.environmentMap,i&&(i=i.specularCubeMap),r.environmentMapBlurring):(i=r.cubeMap,r.cubeMapBlurring),i?(Be.envMap=(0,w.getCubeMapTexture)(e,fe,i,!0,!0),Be.envMapIntensity=1,Be.opacity=r.backgroundOpacity,Be.roughness=r.cubeMapBlurring):Be.enabled=!1;break;default:je.enabled=!0,je.clearColor=new v.Color(1,1,1),je.clearAlpha=0}},Player:function(t,r,n){if(r.camera&&r.camera!==be&&oe.nodes[r.camera]){var i=oe.nodes[r.camera],a=oe.nodes[xe],o=(0,D.initNode)(i);o.plugs.Transform.find(function(e){return e.target})&&(o.plugs.Camera[0].targeted=!0),e.dispatch((0,D.replace)(xe,(0,g.default)(a,{plugs:o.plugs}))),be=r.camera}r.overrideNavigation&&r.orbitTarget&&r.orbitTarget!==Se?(Se=r.orbitTarget,(0,E.default)(e,D.virtualPivotId,(0,L.getWorldTransform)(e,Se))):r.overrideNavigation&&!r.orbitTarget&&r.orbitTarget!==Se&&(Se=null,B()),Ge={0:"renderPass",1:"oitRenderPass"}[r.renderPassType];var s={Linear:v.LinearToneMapping,Reinhard:v.ReinhardToneMapping,Cineon:v.CineonToneMapping,Filmic:v.Uncharted2ToneMapping},u={Basic:v.BasicShadowMap,PCF:v.PCFShadowMap,PCFSoft:v.PCFSoftShadowMap,PCSSSoft:v.PCSSSoftShadowMap,0:v.BasicShadowMap,1:v.PCFShadowMap,2:v.PCFSoftShadowMap,3:v.PCSSSoftShadowMap};if(De=s[r.toneMapStyle],fe.toneMapping=s[r.toneMapStyle],fe.toneMappingExposure=r.toneMapExposureGain,fe.toneMappingWhitePoint=r.toneMapWhitePoint,fe.gammaInput=!0,fe.gammaOutput=!0,fe.autoClear=!1,fe.shadowMap.type=(G?u[0]:u[r.shadowType])||u[0],He.enabled=r.saoPass,He.intensity=r.saoIntensity,He.occlusionSphereWorldRadius=r.saoScale,$e.saoPass=r.saoPass,Ye.enabled=r.bloomPass,Ye.threshold=r.bloomThreshold,$e.bloomPass=r.bloomPass,r.sparkleTexture&&(Qe.setSparkleTexture((0,w.assignTexture)(e,fe,r.sparkleTexture)),Qe.setWorldSizeOfSparkles(r.sparkleSize)),We.enabled=r.dofPass,$e.dofPass=r.dofPass,!r.reflectiveFloor||(r.reflectiveFloorExcludeServer,0)||G)Ae&&Ae.parent&&(Ae.visible=!1);else{if(!Ee){var l=new v.PlaneBufferGeometry(1,1);Ee=new v.GlossyMirror({clipBias:.003,textureWidth:1024,textureHeight:1024,color:7829367,localMirrorNormal:new v.Vector3(0,1,0)}),Ae=new v.Mesh(l,Ee.material)}Ee.specularColor=new v.Color(16777215),Ae.scale.x=r.reflectiveFloorWidth,Ae.scale.y=r.reflectiveFloorWidth,Ae.rotation.x=.5*-Math.PI,Ae.position.y=r.reflectiveFloorHeight,Ae.data=r,Ae.parent||se.add(Ae),$e.reflectiveFloorMesh=!0}},Camera:function(t,r,n,i){if(t===xe&&_e){!oe.evaluatedNodes[(0,I.getSceneId)(e)].Player.overrideNavigation&&i.orbitTarget&&i.orbitTarget!==Se&&(Se=i.orbitTarget,(0,E.default)(e,D.virtualPivotId,(0,L.getWorldTransform)(e,Se))),ue.aspect=r.aspectRatio,ue.near=r.nearClip,ue.far=r.farClip,"Orthographic"===r.projection?(He.enabled=!1,Ve.enabled=!0,We.enabled=!1,Ae&&(Ae.visible=!1),ue.zoom=1/r.orthoZoom,ue.hyperfocusOffset=1,ue.hyperfocusScale=0,ue.inPerspectiveMode=!1,ue.inOrthographicMode=!0,ue.fov=360*Math.atan(r.orthoHeight/2)/Math.PI,ue.isOrthographicCamera=!0,ue.isPerspectiveCamera=!1):(ue.isOrthographicCamera=!1,ue.isPerspectiveCamera=!0,ue.inPerspectiveMode=!0,ue.inOrthographicMode=!1,ue.fov=r.fieldOfView,We.focalDistance=r.focalDepthEnabled?r.focalDepth:r.targetDistance),!i.constrainCameraSphere||r.radiusConstraint&&i.maxZoom===r.radiusConstraint.outerRadius||!r.upPosition||(0,T.initCameraRadiusConstraint)(e,t,r,i.maxZoom),ue.updateProjectionMatrix()}},CameraTransform:function(t,r,n,i,a){if(t===xe&&_e){var o=void 0;if(Te!==be||!a.Camera.upPosition||a.Camera.newAngleAttrs){B(),j();var s=(0,T.initCamera)(e,!0,be,t,ye);o=s.camera,s.newNear&&(ue.near=s.newNear),s.newFar&&(ue.far=s.newFar),Te=be,delete a.Camera.newAngleAttrs}var u=a.Camera,l=(0,N.getRenderingMode)(e),c=r.target&&u.targeted&&u.upPosition&&l!==N.RENDER_MODES.vr&&!Oe.deviceTracking?(0,T.updateLookatTarget)(e,t,r,u):r.transform;(0,b.setMatrixOn)(ue,o||c)}},Annotation:function(e,t,r,n){var i="awayFromOrigin"===t.directionMode;ve[e]={id:e,annotation:t,position:(0,A.getScreenPositionNormalAlpha)(e,i,t.directionAxis,t.directionTarget),visible:n.visible}},AnnotationProperties:function(e,t){ve[e].visible=t.visible}},it={Scene:["Player","Environment"],PolyMesh:["PolyMesh","Transform","Material","Properties"],Camera:["Camera",["Transform","CameraTransform"]],Null:["Null","Transform","Properties"],Model:["Null","Transform","Properties"],Objects:["Null"],Light:["Light","Transform","Properties"],MaterialLibrary:["Null"],Material:["PrefetchMaterialNull","Material"],Image:["Image"],Renderers:[],Passes:[],Pass:[],Renderer:[],Bone:["Bone","Transform","Properties"],Annotation:["Annotation",["Properties","AnnotationProperties"]]},at={PolyMesh:{Material:!0,Transform:!0}};return{attach:a,resize:i,translate:J,deleteNode:$,raycastSelect:ie,getCameraMouseRay:ne,getNodeBoundingBox:ee,getNodeListBoundingBox:te,getThreeObject:re,postTranslate:p,onLoad:k,getAnnotations:Z,getContext:n,reset:ae,scene:se,camera:ue,renderer:fe,composer:ze,externals:Ne,textureCache:Ce,renderQualityControl:d,indexRender:X}}function a(e,t){return(0,y.createTranslator)(e,i,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.QUALITY_MODE=void 0;var o=r(49),s=n(o),u=r(24),l=n(u),c=r(130),f=n(c),d=r(4),h=n(d),p=r(2),g=n(p);t.default=a;var m=r(15),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(m),y=r(480),M=r(162),w=r(464),x=(r(465),r(462)),b=r(479),T=r(126),S=r(463),_=r(127),E=n(_),A=r(461),I=r(20),D=r(10),L=r(7),N=r(8),C=r(43),O=r(45),R=r(123),P=r(252),z=n(P),j=r(481),U=n(j),B=r(242),V=n(B),k=r(56),F=n(k),G=F.default.isMobile,H=1,W=2,Y=3,Q=4,q=t.QUALITY_MODE={LOW:"LOW",HIGH:"HIGH"}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=!1;return{label:"Move Node",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{displayGizmo:!0,mode:"free",plane:{normal:{x:0,y:1,z:0},constant:0},surfaceNodeIds:[],onChange:void 0,onEnd:void 0},tool:{hover:function(e){this.active&&(r=(0,d.highlightAxis)(t,e,r))},drag:function(t){if(1!==t.which||!this.active||t.metaKey)return!1;for(var n=(0,l.filterNodesFromPosition)(e,t),i=(0,f.getSelectedNodes)(e)[0],s=!1,u=0;u<n.length&&!s;u+=1)s=o(e,n[u],i);if(!r&&!s)return!1;var c=this;return{momentum:!1,handle:function(t){switch(c.options.mode){case"plane":T(e,t.deltaX,t.deltaY,c.options.plane,t,c.options.onChange);break;case"surface":b(e,t.clientX,t.clientY,c.options.surfaceNodeIds,t,c.options.onChange);break;default:a(e,t.deltaX,t.deltaY,r,t,c.options.onChange)}},end:function(){"function"==typeof c.options.onEnd&&c.options.onEnd(t)}}}},widget:{draw:function(t){t.add((0,d.drawMoveGizmo)());var r=(0,d.getViewScale)(e);t.scale.set(r,r,r)},position:function(t){var r=(0,f.getSelectedNodes)(e);if(!r.length)return void(t.visible=!1);t.visible=!0;var n=r[0],i=(0,c.getWorldTransform)(e,n),a=new s.Vector3;a.setFromMatrixPosition(i),t.position.set(a.x,a.y,a.z);var o=(0,d.getViewScale)(e);t.scale.set(o,o,o)}}}}function a(e,t,r,n,i,a){var o=(0,f.getSelectedNodes)(e);if(o.length){var u=o[0],d=(0,l.getCameraWorldTransform)(e),h=(0,c.getWorldTransform)(e,u);if(h){var M=(0,c.getWorldTransform)(e,(0,c.find)(e,{id:u,parent:!0})),w=(new s.Vector3).setFromMatrixPosition(h);if(y.copy((0,p.default)(e,u,t,r)),n){var x=new s.Vector3(0,0,0);x[n]=1;var b=(new s.Vector3).setFromMatrixPosition(d).sub(w),T=new s.Vector3(0,0,0),S=(new s.Plane).setFromCoplanarPoints(b,x,T);y.projectOnPlane(S.normal);var _=(new s.Vector3).subVectors(y,b);y.projectOnVector(x).normalize();var E=b.angleTo(y),A=g-b.angleTo(_),I=g-E-A,D=b.length()*m(A)/m(I);y.multiplyScalar(D)}w.add(y),h.setPosition(w),M&&h.premultiply(v.getInverse(M)),w.setFromMatrixPosition(h),e.dispatch((0,c.set)({id:u,plug:"Transform",property:"translation"},w)),"function"==typeof a&&a(i)}}}function o(e,t,r){if(!t||!r)return!1;for(;t;){if(t===r)return!0;t=(0,c.find)(e,{id:t,parent:!0})}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.moveNodeOnPlane=t.moveNodeOnObjects=void 0,t.default=i,t.moveNodeFree=a;var s=r(0),u=r(105),l=(n(u),r(8)),c=r(7),f=(r(10),r(45)),d=r(163),h=r(250),p=n(h),g=Math.PI,m=Math.sin,v=(new s.Matrix4,new s.Matrix4,new s.Matrix4,new s.Matrix4),y=(new s.Vector3,new s.Vector3),M=(new s.Vector3(0,1,0),function(){var e=new s.Matrix4,t=new s.Matrix4;return function(r,n,i,a,o){e.compose(i,a,o);var s=(0,c.find)(r,{id:n,parent:!0}),u=(0,c.getWorldTransform)(r,s);u&&(t.getInverse(u,!0),e.premultiply(t),e.decompose(i,a,o))}}()),w=function(){var e=new s.Vector3,t=new s.Quaternion,r=new s.Euler;return function(n,i,a){var o=(0,c.get)(n,{id:i,plug:"Transform",property:"scale"}),s=(0,c.get)(n,{id:i,plug:"Transform",property:"rotation"}),u=(0,c.get)(n,{id:i,plug:"Transform",property:"rotateOrder"});e.set(o.x,o.y,o.z),r.set(s,u),t.setFromEuler(r),M(n,i,a,t,e),n.dispatch((0,c.set)({id:i,plug:"Transform",property:"translation"},a))}}(),x=function(){var e=new s.Vector3,t=new s.Matrix4;return function(r,n){e.setFromMatrixPosition((0,c.getWorldTransform)(r,n));var i=(0,l.getThreeCamera)(r);return t.getInverse(i.matrix,!0).premultiply(i.projectionMatrix),e.applyMatrix4(t),e}}(),b=t.moveNodeOnObjects=function(){new s.Quaternion;return function(e,t,r,n,i,a){var o=(0,l.getRect)(e),s=(0,f.getSelectedNodes)(e)[0];if(s){var u={x:2*t/o.width-1,y:-2*r/o.height+1},d=e.getTranslator().raycastSelect(u),h=(0,c.filter)(e,{from:{id:s}}),p=d.find(function(e){return n.findIndex(function(t){return t===e.id&&t!==s&&h.indexOf(t)<0})>=0});if(p){var g=p.data[0].point;w(e,s,g),"function"==typeof a&&a(i,p.data)}}}}(),T=t.moveNodeOnPlane=function(){var e=new s.Vector3,t=(new s.Quaternion,new s.Plane),r=new s.Vector3;return function(n,i,a,o,s,u){var d=(0,l.getRect)(n),h=(0,f.getSelectedNodes)(n)[0];if(h){var p=x(n,h),g=o.normal;r.set(g.x,g.y,g.z),t.set(r,o.constant);var m={x:p.x+2*i/d.width,y:p.y-2*a/d.height},v=n.getTranslator().getCameraMouseRay(m).ray;v.intersectsPlane(t)&&(v.intersectPlane(t,e),n.dispatch((0,c.set)({id:h})),w(n,h,e),"function"==typeof u&&u(s))}}}()},function(e,t,r){"use strict";function n(e,t){var r=!1;return{label:"Rotate Node",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{onChange:void 0,onEnd:void 0},tool:{hover:function(e){this.active&&(r=(0,l.highlightAxis)(t,e,r))},drag:function(t){if(1!==t.which||!this.active||t.metaKey)return!1;var n=this;return{momentum:!1,handle:function(t){i(e,t.deltaX,t.deltaY,r),"function"==typeof n.options.onChange&&n.options.onChange(t)},end:function(){"function"==typeof n.options.onEnd&&n.options.onEnd(t)}}}},widget:{draw:function(t){t.add((0,l.drawRotateGizmo)());var r=(0,l.getViewScale)(e);t.scale.set(r,r,r)},position:function(t){var r=(0,u.getSelectedNodes)(e);if(!r.length)return void(t.visible=!1);t.visible=!0;var n=r[0],i=(0,s.getWorldTransform)(e,n),o=new a.Vector3;o.setFromMatrixPosition(i),t.position.set(o.x,o.y,o.z);var c=(0,l.getViewScale)(e);t.scale.set(c,c,c)}}}}function i(e,t,r,n){var i=(0,o.getRect)(e),l=(0,u.getSelectedNodes)(e);if(l.length){var c=l[0],w=(0,s.getWorldTransform)(e,c);if(w){var x=(0,o.getCameraWorldTransform)(e);w.decompose(m,g,v),M.setFromMatrixPosition(x);var b=(0,f.default)(e,c),T=(new a.Vector3).set(2*t/i.x/b,-2*r/i.y/b,0);if(T.length()>1)T.normalize();else if(0===T.length())return;var S=T.length();T.transformDirection(x).multiplyScalar(S);var _=(new a.Vector3).subVectors(M,m).normalize();if(n){var E=new a.Vector3(0,0,0);E[n]=1,T.projectOnPlane(E),_.projectOnPlane(E)}var A=h(1-T.lengthSq());T.addScaledVector(_,A).normalize();var I=(new a.Quaternion).setFromUnitVectors(_,T);g.premultiply(I),w.compose(m,g,v);var D=(0,s.getWorldTransform)(e,(0,s.find)(e,{id:c,parent:!0}));D&&(p.getInverse(D,!0),w.premultiply(p)),w.decompose(m,g,v),y.setFromQuaternion(g,"ZYX"),e.dispatch((0,s.set)({id:c,plug:"Transform",property:"rotation"},y.toVector3().multiplyScalar(180/d)))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,t.rotateNode=i;var a=r(0),o=r(8),s=r(7),u=(r(10),r(45)),l=r(163),c=r(249),f=function(e){return e&&e.__esModule?e:{default:e}}(c),d=(Math.min,Math.PI),h=Math.sqrt,p=new a.Matrix4,g=new a.Quaternion,m=new a.Vector3,v=new a.Vector3,y=new a.Euler,M=new a.Vector3},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=!1;return{label:"Scale Node",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{onChange:void 0,onEnd:void 0},tool:{hover:function(e){this.active&&(r=(0,c.highlightAxis)(t,e,r))},drag:function(t){if(1!==t.which||!this.active||t.metaKey)return!1;var n=this;return{momentum:!1,handle:function(t){a(e,t,r),"function"==typeof n.options.onChange&&n.options.onChange(t)},end:function(){"function"==typeof n.options.onEnd&&n.options.onEnd(t)}}}},widget:{draw:function(t){t.add((0,c.drawScaleGizmo)());var r=(0,c.getViewScale)(e);t.scale.set(r,r,r)},position:function(t){var r=(0,l.getSelectedNodes)(e);if(!r.length)return void(t.visible=!1);t.visible=!0;var n=r[0],i=(0,u.getWorldTransform)(e,n),a=new o.Vector3;a.setFromMatrixPosition(i),t.position.set(a.x,a.y,a.z);var s=(0,c.getViewScale)(e);t.scale.set(s,s,s)}}}}function a(e,t,r){var n=(0,s.getRect)(e),i=(0,l.getSelectedNodes)(e);if(i.length){var a=i[0],c=(0,u.get)(e,{id:a,plug:"Transform",property:"scale"});if(c){var f=g((0,p.default)(e,a),w)||w,h=t.delta||t.deltaX/30-t.deltaY/30,x=g(M(2*h/n.y/f,.001),-.001),b=m(2,100*x),T=(0,u.getWorldTransform)(e,a),S=(new o.Vector3).setFromMatrixPosition(T),_=(new o.Vector3).copy(c),E=(0,s.getCameraWorldTransform)(e);if(r){var A=new o.Vector3(0,0,0);A[r]=1;var I=(0,d.default)(e,a,t.deltaX,t.deltaY);I.projectOnVector(A);var D=(new o.Vector3).setFromMatrixPosition(E).sub(S),L=new o.Vector3(0,0,0),N=(new o.Plane).setFromCoplanarPoints(D,A,L);I.projectOnPlane(N.normal);var C=(new o.Vector3).subVectors(I,D);I.projectOnVector(A).normalize();var O=D.angleTo(I),R=v-D.angleTo(C),P=v-O-R,z=D.length()*y(R)/y(P);I.multiplyScalar(z),A.set(1,1,1),A[r]=1+2*I[r]/_[r],_.multiply(A)}else{var j=g(_.length(),w);_.setLength(j*b)}e.dispatch((0,u.set)({id:a,plug:"Transform",property:"scale"},_))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.scaleNode=a;var o=r(0),s=r(8),u=r(7),l=(r(10),r(45)),c=r(163),f=r(250),d=n(f),h=r(249),p=n(h),g=Math.max,m=Math.pow,v=Math.PI,y=Math.sin,M=Math.min,w=(Math.sqrt,1e-6)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i){var a=(0,g.get)(e,{scene:!0,evalPlug:"Player"}),l=(0,g.get)(e,{id:t,evalPlug:"Camera"}),c=(0,p.getRect)(e);(({trackball:s,firstPerson:u})[(0,x.getOrbitMode)(e,t)]||o)(e,a,t,l,n,r,c,i)}function a(e,t){return{label:"Orbit",active:!0,enabled:!0,display:{playerTools:!0},options:{touchVerticalDefault:!1,turnTable:!1,mobileOnly:!1},tool:{drag:function(t){if(1!==t.which||!this.active&&!t.metaKey)return!1;var r=this.options.touchVerticalDefault,n=this.options.turnTable,a=this.options.mobileOnly;return{momentum:!0,allowDefault:!0,handle:function(t){var o=t.deltaX,s=t.deltaY,u=t.isTouch,c=t.originalEvent;if(!(u&&r&&Math.abs(s)>Math.abs(o))){c&&c.preventDefault();var f=(0,p.getCamera)(e),d=(0,p.getCameraWorldTransform)(e),v=(0,w.default)(e,f);n&&(s=a?b.isMobile?0:s:0),i(e,f,d,v,new l.Vector2(o,s)),e.dispatch((0,m.merge)([f,"Transform",0],(0,h.default)(d))),(0,g.get)(e,{id:f,evalPlug:"Transform"}).target||e.dispatch((0,m.merge)([m.virtualTargetId,"Transform",0],(0,h.default)(v)))}}}}}}}function o(e,t,r,n,i,a,o,s){var u=s.x,c=s.y,d=(0,g.getWorldTransform)(e,m.virtualPivotId);D.setFromMatrixPosition(d);var h=(0,x.getConstrainCameraY)(e,r);I.setFromMatrixPosition(i).sub(D),A.setFromMatrixPosition(a).sub(D);var p=(new l.Spherical).setFromVector3(A),v=(new l.Spherical).setFromVector3(I),M=(new l.Spherical).setFromVector3(n.offset),w=2*_*(-u/o.x);p.theta+=w,v.theta+=w,M.theta+=w,p.makeSafe(),v.makeSafe(),M.makeSafe(),I.setFromSpherical(v).add(D),A.setFromSpherical(p).add(D).sub(I),n.offset.setFromSpherical(M),p.setFromVector3(A);var b=2*_*(-c/o.y);p.phi+=b;var S=void 0;if(S=I.y/A.length()<=1&&h?T(-I.y/A.length()):_,p.phi=(0,f.default)(p.phi,.001,S-.001),p.makeSafe(),A.setFromSpherical(p).add(I),n.radiusConstraint){var E=n.radiusConstraint,L=E.maxBoundingSphere,N=E.minBoundingSphere,C=(new l.Vector3).subVectors(I,A);if(N.containsPoint(A)){var O=new l.Ray(A,C.multiplyScalar(-1)),R=O.intersectSphere(N).addScaledVector(C,.001);A.copy(R)}else if(!L.containsPoint(A)){var P=new l.Ray(A,C),z=P.intersectSphere(L).addScaledVector(C,.001);A.copy(z)}}a.setPosition(A),i.setPosition(I),(0,y.default)(a,i,n.upPosition)}function s(e,t,r,n,i,a,o,s){var u=s.x,c=s.y,f=S(o.x,o.y),d=(0,g.getWorldTransform)(e,m.virtualPivotId),h=(new l.Vector3).setFromMatrixPosition(d),p=(new l.Vector3).set(-2*u/f,2*c/f,0);if(p.length()>1&&p.normalize(),0!==p.x||0!==p.y){var v=p.length();p.transformDirection(a).multiplyScalar(v),A.setFromMatrixPosition(a).sub(h),I.setFromMatrixPosition(i).sub(h);var M=(new l.Vector3).copy(A).normalize(),w=E(1-p.lengthSq());p.addScaledVector(M,w).normalize();var x=(new l.Vector3).crossVectors(M,p).normalize(),b=M.angleTo(p),T=(new l.Quaternion).setFromAxisAngle(x,b);if(A.applyQuaternion(T).add(h),I.applyQuaternion(T).add(h),n.upPosition.applyQuaternion(T),n.offset.applyQuaternion(T),n.radiusConstraint){var _=n.radiusConstraint,D=_.maxBoundingSphere,L=_.minBoundingSphere,N=(new l.Vector3).subVectors(I,A);if(L.containsPoint(A)){var C=new l.Ray(A,(new l.Vector3).copy(N).multiplyScalar(-1)),O=C.intersectSphere(L).addScaledVector(N,-.001);A.copy(O)}else if(!D.containsPoint(A)){var R=new l.Ray(A,N),P=R.intersectSphere(D).addScaledVector(N,.001);A.copy(P)}if(!L.containsPoint(I)){var z=(new l.Vector3).crossVectors(N,n.upPosition),j=L.clampPoint(I),U=(new l.Vector3).subVectors(j,I);j.addScaledVector(U,.001),n.upPosition.crossVectors(z,N.subVectors(j,A)).normalize(),I.copy(j)}}a.setPosition(A),i.setPosition(I),(0,y.default)(a,i,n.upPosition)}}function u(e,t,r,n,i,a,o,s){var u=s.x,c=s.y;A.setFromMatrixPosition(a),I.setFromMatrixPosition(i).sub(A);var f=(new l.Spherical).setFromVector3(I),d=2*_*(-u/o.x);f.theta+=d;var h=2*_*(c/o.y);f.phi+=h,f.makeSafe(),I.setFromSpherical(f).add(A),i.setPosition(I),(0,y.default)(a,i,n.upPosition)}Object.defineProperty(t,"__esModule",{value:!0}),t.updateSphericalRotation=i,t.default=a;var l=r(0),c=r(164),f=n(c),d=r(51),h=n(d),p=r(8),g=r(7),m=r(10),v=r(71),y=n(v),M=r(59),w=n(M),x=r(104),b=r(56),T=(Math.tan,Math.cos,Math.atan,Math.acos),S=Math.min,_=(Math.max,Math.pow,Math.PI),E=Math.sqrt,A=new l.Vector3,I=new l.Vector3,D=new l.Vector3;new l.Spherical,new l.Spherical,new l.Matrix4,new l.Matrix4},function(e,t,r){"use strict";function n(e,t){var r=(0,o.getThreeCamera)(e);(0,a.getWorldTransform)(e,t);s.setFromMatrixPosition(r.matrix);var n=e.getTranslator().getNodeBoundingBox(t).getBoundingSphere(c).radius;return l.subVectors(s,u),l.z=-l.length(),l.y=n,l.x=0,l.applyMatrix4(r.projectionMatrix),l.z=0,l.length()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0),a=r(7),o=r(8),s=new i.Vector3,u=new i.Vector3,l=new i.Vector3,c=new i.Sphere},function(e,t,r){"use strict";function n(e,t,r,n){var i=(0,s.getCamera)(e),a=(0,s.getCameraWorldTransform)(e),m=(0,o.default)((0,u.get)(e,{id:i,evalPlug:"Camera"}));l.getInverse(a,!0),c.copy(m).multiply(l);var v=(0,u.getWorldTransform)(e,t);if(v){var y=(0,s.getRect)(e);(0,u.getWorldTransform)(e,(0,u.find)(e,{id:t,parent:!0}));return d.setFromMatrixPosition(v),p.set(r,-n).divide(y).multiplyScalar(2),h.copy(d).applyMatrix4(c),h.x=0,h.y=0,g.set(p.x,p.y,h.z),f.getInverse(c,!0),h.applyMatrix4(f),g.applyMatrix4(f).sub(h),g}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0),a=r(105),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=r(8),u=r(7),l=new i.Matrix4,c=new i.Matrix4,f=new i.Matrix4,d=new i.Vector3,h=new i.Vector3,p=new i.Vector2,g=new i.Vector3},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(t){var r=t.delta,n=t.deltaX,i=t.deltaY,o=void 0!==r?r:n/30+-i/30,s=(0,f.getCamera)(e),u=(0,d.getWorldTransform)(e,s);a(e,-o,s,u),e.dispatch((0,h.merge)([s,"Transform",0],(0,c.default)(u)))}return{label:"Zoom",enabled:!0,display:{playerTools:!0},options:{},tool:{drag:function(e){return!(!this.active&&!e.ctrlKey)&&{momentum:!0,handle:function(e){r({delta:void 0!==e.delta?e.delta:e.deltaX/30+-e.deltaY/30})}}},pinch:function(e){r(e)},scroll:function(t){(0,M.default)(e)&&r(t)}}}}function a(e,t,r,n){var i=(0,d.get)(e,{id:r,evalPlug:"Camera"}),a=((0,d.get)(e,{scene:!0,evalPlug:"Player"}),(0,v.default)(e,r)),s=(0,f.getRect)(e),l=t/s.y,c=b(2,100*l);if("Perspective"===i.projection){S.setFromMatrixPosition(n),_.setFromMatrixPosition(a),E.copy(S).sub(_);var h=x(E.length(),T),p=h*c;if(i.radiusConstraint){var m=i.radiusConstraint,y=m.maxBoundingSphere,M=m.minBoundingSphere,A=(new o.Vector3).copy(E).normalize(),I=(new o.Vector3).copy(A).multiplyScalar(-1),D=new o.Ray(S,I),L=new o.Ray(S,A),N=new o.Vector3,C=new o.Vector3;D.intersectSphere(M,N),L.intersectSphere(y,C);var O=N.sub(_).length(),R=y.radius===1/0?1/0:C.sub(_).length();p=(0,u.default)(p,O+.001,R-.001)}if(E.multiplyScalar(p/h),S.copy(_).add(E),S.y<0&&(0,w.getConstrainCameraY)(e,r)&&"trackball"!==(0,w.getOrbitMode)(e,r)){(new o.Vector3).crossVectors(E,i.upPosition).normalize();S.y=0,E.copy(S).sub(_)}n.setPosition(S),(0,g.default)(n,a,i.upPosition)}else if("Orthographic"===i.projection){var P=(0,d.get)(e,{id:r,plug:"Camera",property:"orthoZoom"});e.dispatch((0,d.set)({id:r,plug:"Camera",property:"orthoZoom"},P*c))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.updateZoom=a;var o=r(0),s=r(164),u=n(s),l=r(51),c=n(l),f=r(8),d=r(7),h=r(10),p=r(71),g=n(p),m=r(59),v=n(m),y=r(476),M=n(y),w=r(104),x=(Math.tan,Math.cos,Math.atan,Math.acos,Math.min,Math.max),b=Math.pow,T=(Math.PI,Math.sqrt,1e-6),S=new o.Vector3,_=new o.Vector3,E=new o.Vector3},function(e,t,r){"use strict";function n(e){var t=new i.Box3,r=new i.Box3;if(!e)return r;var n=e;return e.children.forEach(function(e){"Object3D"===e.type&&"Objects"===e.name&&(n=e)}),r.makeEmpty(),e.updateMatrixWorld(!0),n.traverseVisible(function(e){if(e.geometry&&!e.isDirectionalLightHelper&&!e.isCameraHelper){var n=e.geometry;null===n.boundingBox&&n.computeBoundingBox(),!1===n.boundingBox.isEmpty()&&(t.copy(n.boundingBox),e.matrix.compose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),t.applyMatrix4(e.matrixWorld),r.union(t))}}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0)},function(e,t,r){"use strict";function n(e,t){this.offset=new a.Vector3(0,0,0),this.rotationalOffset=new a.Quaternion(0,0,0,1),this.threeVRControls=new a.VRControls(e,t),this.setOffset=function(e){this.offset.copy(e)},this.setRotationalOffset=function(e){this.rotationalOffset.copy(e)},this.update=function(){this.threeVRControls.update(),e.quaternion.premultiply(this.rotationalOffset),e.position.applyQuaternion(this.rotationalOffset),e.position.add(this.offset)},this.setStanding=function(e){this.threeVRControls.standing=e},this.resetPose=function(){var e=this.threeVRControls.getVRDisplay();e&&e.resetPose&&this.threeVRControls.resetPose()},this.getStandingMatrix=function(){return this.threeVRControls.getStandingMatrix()},this.setUserHeight=function(e){this.threeVRControls.userHeight=Number(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(15),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){g={}}function a(e){y++,M>=v?w.push(e):(M+=1,e())}function o(){M-=1,w.length&&M<v&&(M+=1,w.shift()())}function s(e){return function(t,r){var n=r.types,i=r.url,s=r.fireAndForget,u=r.payload,c=r.queryKey,h=(r.requestPayload,r.ignoreCache),v=r.method,y=r.contentType,M=r.body,w=r.files,x=r.success,b=r.failure,T=r.decompress,S=r.onReadyStateChange,_=r.withCredentials,E=r.ignoreErrorMessage,A=r.responseURL,I=Array.isArray(i)?i:[i];y||(y="json");var D=n||["IGN","IGN","IGN"],L=(0,f.default)(D,3),N=L[0],C=L[1],O=L[2];if(c){if(g[c])return s?g[c]:l.default.resolve(g[c]);if(m[c])return s?(m[c].push({payload:u,store:t}),void t.dispatch({type:N,payload:u})):new p.default.Promise(function(e,r){m[c].push({payload:u,store:t,resolve:e,reject:r}),t.dispatch({type:N,payload:u})});m[c]=[{payload:u,store:t}]}t.dispatch({type:N,payload:u});var R=new p.default.Promise(function(r,n){function i(e,r){o();var i=r||p,a=i.failureType,s=i.failure,u=i.queryKey,l=i.payload;u?(m[u].forEach(function(t){var r=t.payload,n=t.store,i=t.reject;n.dispatch({type:a,payload:r,error:e,ignoreErrorMessage:E}),i&&i(e)}),delete m[u]):t.dispatch({type:a,payload:l,error:e,ignoreErrorMessage:E}),s&&s(e),n(e)}function l(e,n){var i=n||p,a=i.successType,o=(i.sucess,i.queryKey),u=i.payload;o?(h||(g[o]=e),m[o].forEach(function(t){var r=t.payload,n=t.store,i=t.resolve;n.dispatch({type:a,payload:s?r:e,response:e}),i&&i(e)}),delete m[o]):t.dispatch({type:a,payload:s?u:e,response:e}),x&&x(e),r(e)}function f(e){o(),T?(0,d.lzmaDecompressor)(e,p,l,i):l(e)}var p={queryKey:c,payload:u,successType:C,success:x,failureType:O,failure:b};a(function(){return e(I[0],I.slice(1),f,i,{contentType:y,method:v,body:M,files:w,onReadyStateChange:S,withCredentials:_,responseURL:A})})});return s&&R.catch(function(e){console.error(e)}),s?null:R}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(39),l=n(u),c=r(49),f=n(c);t.clearCache=i,t.default=s;var d=r(496),h=r(204),p=n(h),g={},m={},v=15,y=0,M=0,w=[]},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,l.default)(e)&&void 0!==e.type}function a(e){var t=e.dispatch;return function(r){if("function"==typeof r)return r(e);if(!i(r)||!(0,s.default)(r.payload)||r.error)return t(r);var n=r.type,a=r.payload,o=r.meta;return t({type:n+"_"+c,meta:o}),a.then(function(e){return t({type:n+"_"+f,payload:e,meta:o})},function(e){return t({type:n+"_"+d,payload:a,error:e,meta:o})})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=r(494),s=n(o),u=r(256),l=n(u),c="PENDING",f="FULFILLED",d="REJECTED"},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!e||"object"!==(void 0===e?"undefined":(0,u.default)(e)))return!1;var t="function"==typeof e.constructor?(0,o.default)(e):Object.prototype;if(null===t)return!0;var r=t.constructor;return"function"==typeof r&&r instanceof r&&l(r)===c}Object.defineProperty(t,"__esModule",{value:!0});var a=r(317),o=n(a),s=r(38),u=n(s);t.default=i;var l=function(e){return Function.prototype.toString.call(e)},c=l(Object)},function(e,t,r){e.exports={default:r(512),__esModule:!0}},function(e,t,r){e.exports={default:r(515),__esModule:!0}},function(e,t,r){e.exports={default:r(516),__esModule:!0}},function(e,t,r){e.exports={default:r(517),__esModule:!0}},function(e,t,r){e.exports={default:r(521),__esModule:!0}},function(e,t,r){"use strict";var n=r(29),i=r(11),a=r(72),o=r(60),s=r(62),u=r(135),l=r(80),c=r(131),f=r(27),d=r(111),h=r(41).f,p=r(167)(0),g=r(40);e.exports=function(e,t,r,m,v,y){var M=n[e],w=M,x=v?"set":"add",b=w&&w.prototype,T={};return g&&"function"==typeof w&&(y||b.forEach&&!o(function(){(new w).entries().next()}))?(w=t(function(t,r){c(t,w,e,"_c"),t._c=new M,void 0!=r&&l(r,v,t[x],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in b&&(!y||"clear"!=e)&&s(w.prototype,e,function(r,n){if(c(this,w,e),!t&&y&&!f(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i})}),y||h(w.prototype,"size",{get:function(){return this._c.size}})):(w=m.getConstructor(t,e,v,x),u(w.prototype,r),a.NEED=!0),d(w,e),T[e]=w,i(i.G+i.W+i.F,T),y||m.setStrong(w,e,v),w}},function(e,t,r){var n=r(29).document;e.exports=n&&n.documentElement},function(e,t,r){e.exports=!r(40)&&!r(60)(function(){return 7!=Object.defineProperty(r(169)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(81),i=r(25)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[i]===e)}},function(e,t,r){var n=r(108);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(44);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){var n=r(25)("iterator"),i=!1;try{var a=[7][n]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],o=a[n]();o.next=function(){return{done:r=!0}},a[n]=function(){return o},e(a)}catch(e){}return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){"use strict";var n=r(82),i=r(174),a=r(109),o=r(83),s=r(171),u=Object.assign;e.exports=!u||r(60)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=o(e),u=arguments.length,l=1,c=i.f,f=a.f;u>l;)for(var d,h=s(arguments[l++]),p=c?n(h).concat(c(h)):n(h),g=p.length,m=0;g>m;)f.call(h,d=p[m++])&&(r[d]=h[d]);return r}:u},function(e,t,r){var n=r(41),i=r(44),a=r(82);e.exports=r(40)?Object.defineProperties:function(e,t){i(e);for(var r,o=a(t),s=o.length,u=0;s>u;)n.f(e,r=o[u++],t[r]);return e}},function(e,t,r){var n=r(274),i=r(170).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(61),i=r(83),a=r(176)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,r){var n=r(61),i=r(65),a=r(535)(!1),o=r(176)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,l=[];for(r in s)r!=o&&n(s,r)&&l.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~a(l,r)||l.push(r));return l}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(44),i=r(27),a=r(173);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},function(e,t,r){"use strict";var n=r(11),i=r(107),a=r(57),o=r(80);e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(r=[],t?(n=0,s=a(u,arguments[2],2),o(e,!1,function(e){r.push(s(e,n++))})):o(e,!1,r.push,r),new this(r))}})}},function(e,t,r){"use strict";var n=r(11);e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,r){"use strict";var n=r(29),i=r(9),a=r(41),o=r(40),s=r(25)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];o&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n=r(44),i=r(107),a=r(25)("species");e.exports=function(e,t){var r,o=n(e).constructor;return void 0===o||void 0==(r=n(o)[a])?t:i(r)}},function(e,t,r){"use strict";var n=r(77),i=r(94),a=r(30);e.exports=[].copyWithin||function(e,t){var r=n(this),o=a(r.length),s=i(e,o),u=i(t,o),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?o:i(l,o))-u,o-s),f=1;for(u<s&&s<u+c&&(f=-1,u+=c-1,s+=c-1);c-- >0;)u in r?r[s]=r[u]:delete r[s],s+=f,u+=f;return r}},function(e,t,r){"use strict";var n=r(26).f,i=r(115),a=r(92),o=r(52),s=r(87),u=r(142),l=r(291),c=r(292),f=r(145),d=r(35),h=r(114).fastKey,p=r(95),g=d?"_s":"size",m=function(e,t){var r,n=h(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,l){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=n&&u(n,r,e[l],e)});return a(c.prototype,{clear:function(){for(var e=p(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var r=p(this,t),n=m(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[g]--}return!!n},forEach:function(e){p(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!m(p(this,t),e)}}),d&&n(c.prototype,"size",{get:function(){return p(this,t)[g]}}),c},def:function(e,t,r){var n,i,a=m(e,t);return a?a.v=r:(e._l=a={i:i=h(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[g]++,"F"!==i&&(e._i[i]=a)),e},getEntry:m,setStrong:function(e,t,r){l(e,t,function(e,r){this._t=p(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?c(0,r.k):"values"==t?c(0,r.v):c(0,[r.k,r.v]):(e._t=void 0,c(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){"use strict";var n=r(92),i=r(114).getWeak,a=r(12),o=r(14),s=r(87),u=r(142),l=r(112),c=r(36),f=r(95),d=l(5),h=l(6),p=0,g=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},v=function(e,t){return d(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var r=v(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,a){var l=e(function(e,n){s(e,l,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=n&&u(n,r,e[a],e)});return n(l.prototype,{delete:function(e){if(!o(e))return!1;var r=i(e);return!0===r?g(f(this,t)).delete(e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!o(e))return!1;var r=i(e);return!0===r?g(f(this,t)).has(e):r&&c(r,this._i)}}),l},def:function(e,t,r){var n=i(a(t),!0);return!0===n?g(e).set(t,r):n[e._i]=r,e},ufstore:g}},function(e,t,r){var n=r(13).document;e.exports=n&&n.documentElement},function(e,t,r){e.exports=!r(35)&&!r(21)(function(){return 7!=Object.defineProperty(r(188)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(88);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(14),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t,r){var n=r(14),i=r(88),a=r(16)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==i(e))}},function(e,t,r){var n=r(12);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var a=e.return;throw void 0!==a&&n(a.call(e)),t}}},function(e,t,r){"use strict";var n=r(90),i=r(1),a=r(64),o=r(42),s=r(36),u=r(89),l=r(591),c=r(93),f=r(117),d=r(16)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,g,m,v,y){l(r,t,g);var M,w,x,b=function(e){if(!h&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},T=t+" Iterator",S="values"==m,_=!1,E=e.prototype,A=E[d]||E["@@iterator"]||m&&E[m],I=A||b(m),D=m?S?b("entries"):I:void 0,L="Array"==t?E.entries||A:A;if(L&&(x=f(L.call(new e)))!==Object.prototype&&x.next&&(c(x,T,!0),n||s(x,d)||o(x,d,p)),S&&A&&"values"!==A.name&&(_=!0,I=function(){return A.call(this)}),n&&!y||!h&&!_&&E[d]||o(E,d,I),u[t]=I,u[T]=p,m)if(M={values:S?I:b("values"),keys:v?I:b("keys"),entries:D},y)for(w in M)w in E||a(E,w,M[w]);else i(i.P+i.F*(h||_),t,M);return M}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=i(t),this.reject=i(r)}var i=r(73);e.exports.f=function(e){return new n(e)}},function(e,t,r){"use strict";var n=r(91),i=r(144),a=r(118),o=r(77),s=r(191),u=Object.assign;e.exports=!u||r(21)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=o(e),u=arguments.length,l=1,c=i.f,f=a.f;u>l;)for(var d,h=s(arguments[l++]),p=c?n(h).concat(c(h)):n(h),g=p.length,m=0;g>m;)f.call(h,d=p[m++])&&(r[d]=h[d]);return r}:u},function(e,t,r){var n=r(36),i=r(53),a=r(185)(!1),o=r(196)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,l=[];for(r in s)r!=o&&n(s,r)&&l.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~a(l,r)||l.push(r));return l}},function(e,t,r){var n=r(91),i=r(53),a=r(118).f;e.exports=function(e){return function(t){for(var r,o=i(t),s=n(o),u=s.length,l=0,c=[];u>l;)a.call(o,r=s[l++])&&c.push(e?[r,o[r]]:o[r]);return c}}},function(e,t,r){var n=r(116),i=r(144),a=r(12),o=r(13).Reflect;e.exports=o&&o.ownKeys||function(e){var t=n.f(a(e)),r=i.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(30),i=r(300),a=r(74);e.exports=function(e,t,r,o){var s=String(a(e)),u=s.length,l=void 0===r?" ":String(r),c=n(t);if(c<=u||""==l)return s;var f=c-u,d=i.call(l,Math.ceil(f/l.length));return d.length>f&&(d=d.slice(0,f)),o?d+s:s+d}},function(e,t,r){"use strict";var n=r(76),i=r(74);e.exports=function(e){var t=String(i(this)),r="",a=n(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},function(e,t,r){var n=r(76),i=r(30);e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=i(t);if(t!==r)throw RangeError("Wrong length!");return r}},function(e,t,r){"use strict";function n(e,t,r){var n,i,a,o=Array(r),s=8*r-t-1,u=(1<<s)-1,l=u>>1,c=23===t?U(2,-24)-U(2,-77):0,f=0,d=e<0||0===e&&1/e<0?1:0;for(e=j(e),e!=e||e===P?(i=e!=e?1:0,n=u):(n=B(V(e)/k),e*(a=U(2,-n))<1&&(n--,a*=2),e+=n+l>=1?c/a:c*U(2,1-l),e*a>=2&&(n++,a/=2),n+l>=u?(i=0,n=u):n+l>=1?(i=(e*a-1)*U(2,t),n+=l):(i=e*U(2,l-1)*U(2,t),n=0));t>=8;o[f++]=255&i,i/=256,t-=8);for(n=n<<t|i,s+=t;s>0;o[f++]=255&n,n/=256,s-=8);return o[--f]|=128*d,o}function i(e,t,r){var n,i=8*r-t-1,a=(1<<i)-1,o=a>>1,s=i-7,u=r-1,l=e[u--],c=127&l;for(l>>=7;s>0;c=256*c+e[u],u--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===c)c=1-o;else{if(c===a)return n?NaN:l?-P:P;n+=U(2,t),c-=o}return(l?-1:1)*n*U(2,c-t)}function a(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function o(e){return[255&e]}function s(e){return[255&e,e>>8&255]}function u(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function l(e){return n(e,52,8)}function c(e){return n(e,23,4)}function f(e,t,r){E(e[D],t,{get:function(){return this[r]}})}function d(e,t,r,n){var i=+r,a=S(i);if(a+t>e[G])throw R(L);var o=e[F]._b,s=a+e[H],u=o.slice(s,s+t);return n?u:u.reverse()}function h(e,t,r,n,i,a){var o=+r,s=S(o);if(s+t>e[G])throw R(L);for(var u=e[F]._b,l=s+e[H],c=n(+i),f=0;f<t;f++)u[l+f]=c[a?f:t-f-1]}var p=r(13),g=r(35),m=r(90),v=r(201),y=r(42),M=r(92),w=r(21),x=r(87),b=r(76),T=r(30),S=r(301),_=r(116).f,E=r(26).f,A=r(184),I=r(93),D="prototype",L="Wrong index!",N=p.ArrayBuffer,C=p.DataView,O=p.Math,R=p.RangeError,P=p.Infinity,z=N,j=O.abs,U=O.pow,B=O.floor,V=O.log,k=O.LN2,F=g?"_b":"buffer",G=g?"_l":"byteLength",H=g?"_o":"byteOffset";if(v.ABV){if(!w(function(){N(1)})||!w(function(){new N(-1)})||w(function(){return new N,new N(1.5),new N(NaN),"ArrayBuffer"!=N.name})){N=function(e){return x(this,N),new z(S(e))};for(var W,Y=N[D]=z[D],Q=_(z),q=0;Q.length>q;)(W=Q[q++])in N||y(N,W,z[W]);m||(Y.constructor=N)}var X=new C(new N(2)),Z=C[D].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||M(C[D],{setInt8:function(e,t){Z.call(this,e,t<<24>>24)},setUint8:function(e,t){Z.call(this,e,t<<24>>24)}},!0)}else N=function(e){x(this,N,"ArrayBuffer");var t=S(e);this._b=A.call(Array(t),0),this[G]=t},C=function(e,t,r){x(this,C,"DataView"),x(e,N,"DataView");var n=e[G],i=b(t);if(i<0||i>n)throw R("Wrong offset!");if(r=void 0===r?n-i:T(r),i+r>n)throw R("Wrong length!");this[F]=e,this[H]=i,this[G]=r},g&&(f(N,"byteLength","_l"),f(C,"buffer","_b"),f(C,"byteLength","_l"),f(C,"byteOffset","_o")),M(C[D],{getInt8:function(e){return d(this,1,e)[0]<<24>>24},getUint8:function(e){return d(this,1,e)[0]},getInt16:function(e){var t=d(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=d(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return a(d(this,4,e,arguments[1]))},getUint32:function(e){return a(d(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return i(d(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return i(d(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){h(this,1,e,o,t)},setUint8:function(e,t){h(this,1,e,o,t)},setInt16:function(e,t){h(this,2,e,s,t,arguments[2])},setUint16:function(e,t){h(this,2,e,s,t,arguments[2])},setInt32:function(e,t){h(this,4,e,u,t,arguments[2])},setUint32:function(e,t){h(this,4,e,u,t,arguments[2])},setFloat32:function(e,t){h(this,4,e,c,t,arguments[2])},setFloat64:function(e,t){h(this,8,e,l,t,arguments[2])}});I(N,"ArrayBuffer"),I(C,"DataView"),y(C[D],v.VIEW,!0),t.ArrayBuffer=N,t.DataView=C},function(e,t,r){t.f=r(16)},function(e,t,r){"use strict";function n(e,t,r){r=r||2;var n=t&&t.length,a=n?t[0]*r:e.length,s=i(e,0,a,r,!0),u=[];if(!s)return u;var l,c,d,h,p,g,m;if(n&&(s=f(e,t,s,r)),e.length>80*r){l=d=e[0],c=h=e[1];for(var v=r;v<a;v+=r)p=e[v],g=e[v+1],p<l&&(l=p),g<c&&(c=g),p>d&&(d=p),g>h&&(h=g);m=Math.max(d-l,h-c)}return o(s,u,r,l,c,m),u}function i(e,t,r,n,i){var a,o;if(i===N(e,t,r,n)>0)for(a=t;a<r;a+=n)o=I(a,e[a],e[a+1],o);else for(a=r-n;a>=t;a-=n)o=I(a,e[a],e[a+1],o);return o&&b(o,o.next)&&(D(o),o=o.next),o}function a(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!b(n,n.next)&&0!==x(n.prev,n,n.next))n=n.next;else{if(D(n),(n=t=n.prev)===n.next)return null;r=!0}}while(r||n!==t);return t}function o(e,t,r,n,i,f,d){if(e){!d&&f&&g(e,n,i,f);for(var h,p,m=e;e.prev!==e.next;)if(h=e.prev,p=e.next,f?u(e,n,i,f):s(e))t.push(h.i/r),t.push(e.i/r),t.push(p.i/r),D(e),e=p.next,m=p.next;else if((e=p)===m){d?1===d?(e=l(e,t,r),o(e,t,r,n,i,f,2)):2===d&&c(e,t,r,n,i,f):o(a(e),t,r,n,i,f,1);break}}}function s(e){var t=e.prev,r=e,n=e.next;if(x(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(M(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(e,t,r,n){var i=e.prev,a=e,o=e.next;if(x(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,f=v(s,u,t,r,n),d=v(l,c,t,r,n),h=e.nextZ;h&&h.z<=d;){if(h!==e.prev&&h!==e.next&&M(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(h=e.prevZ;h&&h.z>=f;){if(h!==e.prev&&h!==e.next&&M(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;h=h.prevZ}return!0}function l(e,t,r){var n=e;do{var i=n.prev,a=n.next.next;!b(i,a)&&T(i,n,n.next,a)&&_(i,a)&&_(a,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(a.i/r),D(n),D(n.next),n=e=a),n=n.next}while(n!==e);return n}function c(e,t,r,n,i,s){var u=e;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&w(u,l)){var c=A(u,l);return u=a(u,u.next),c=a(c,c.next),o(u,t,r,n,i,s),void o(c,t,r,n,i,s)}l=l.next}u=u.next}while(u!==e)}function f(e,t,r,n){var o,s,u,l,c,f=[];for(o=0,s=t.length;o<s;o++)u=t[o]*n,l=o<s-1?t[o+1]*n:e.length,c=i(e,u,l,n,!1),c===c.next&&(c.steiner=!0),f.push(y(c));for(f.sort(d),o=0;o<f.length;o++)h(f[o],r),r=a(r,r.next);return r}function d(e,t){return e.x-t.x}function h(e,t){if(t=p(e,t)){var r=A(t,e);a(r,r.next)}}function p(e,t){var r,n=t,i=e.x,a=e.y,o=-1/0;do{if(a<=n.y&&a>=n.next.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>o){if(o=s,s===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===o)return r.prev;var u,l=r,c=r.x,f=r.y,d=1/0;for(n=r.next;n!==l;)i>=n.x&&n.x>=c&&M(a<f?i:o,a,c,f,a<f?o:i,a,n.x,n.y)&&((u=Math.abs(a-n.y)/(i-n.x))<d||u===d&&n.x>r.x)&&_(n,e)&&(r=n,d=u),n=n.next;return r}function g(e,t,r,n){var i=e;do{null===i.z&&(i.z=v(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,m(i)}function m(e){var t,r,n,i,a,o,s,u,l=1;do{for(r=e,e=null,a=null,o=0;r;){for(o++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ);t++);for(u=l;s>0||u>0&&n;)0===s?(i=n,n=n.nextZ,u--):0!==u&&n?r.z<=n.z?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,u--):(i=r,r=r.nextZ,s--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,l*=2}while(o>1);return e}function v(e,t,r,n,i){return e=32767*(e-r)/i,t=32767*(t-n)/i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function y(e){var t=e,r=e;do{t.x<r.x&&(r=t),t=t.next}while(t!==e);return r}function M(e,t,r,n,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(n-s)-(r-o)*(t-s)>=0&&(r-o)*(a-s)-(i-o)*(n-s)>=0}function w(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!S(e,t)&&_(e,t)&&_(t,e)&&E(e,t)}function x(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function b(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,r,n){return!!(b(e,t)&&b(r,n)||b(e,n)&&b(r,t))||x(e,t,r)>0!=x(e,t,n)>0&&x(r,n,e)>0!=x(r,n,t)>0}function S(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&T(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function _(e,t){return x(e.prev,e,e.next)<0?x(e,t,e.next)>=0&&x(e,e.prev,t)>=0:x(e,t,e.prev)<0||x(e,e.next,t)<0}function E(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}function A(e,t){var r=new L(e.i,e.x,e.y),n=new L(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function I(e,t,r,n){var i=new L(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function D(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function L(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function N(e,t,r,n){for(var i=0,a=t,o=r-n;a<r;a+=n)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}e.exports=n,n.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,o=Math.abs(N(e,0,a,r));if(i)for(var s=0,u=t.length;s<u;s++){var l=t[s]*r,c=s<u-1?t[s+1]*r:e.length;o-=Math.abs(N(e,l,c,r))}var f=0;for(s=0;s<n.length;s+=3){var d=n[s]*r,h=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[d]-e[p])*(e[h+1]-e[d+1])-(e[d]-e[h])*(e[p+1]-e[d+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},n.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)r.vertices.push(e[i][a][o]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r}},function(e,t){function r(e,t){var r,n,a=t.elm,o=e.data.attrs||{},s=t.data.attrs||{};for(r in s)n=s[r],o[r]!==n&&(!n&&i[r]?a.removeAttribute(r):a.setAttribute(r,n));for(r in o)r in s||a.removeAttribute(r)}for(var n=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","draggable","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","spellcheck","translate","truespeed","typemustmatch","visible"],i={},a=0,o=n.length;a<o;a++)i[n[a]]=!0;e.exports={create:r,update:r}},function(e,t){function r(e,t){var r,n,i=t.elm,a=e.data.class||{},o=t.data.class||{};for(n in o)(r=o[n])!==a[n]&&i.classList[r?"add":"remove"](n)}e.exports={create:r,update:r}},function(e,t,r){function n(e){return function(){2===e.length?e[0](e[1]):e[0].apply(void 0,e.slice(1))}}function i(e){return function(t){e.fn(t)}}function a(e,t){var r,a,s,u=t.elm,l=e.data.on||{},c=t.data.on;if(c)for(r in c)if(a=c[r],void 0===(s=l[r]))o.array(a)?u.addEventListener(r,n(a)):(a={fn:a},c[r]=a,u.addEventListener(r,i(a)));else if(o.array(s)){s.length=a.length;for(var f=0;f<s.length;++f)s[f]=a[f];c[r]=s}else s.fn=a,c[r]=s}var o=r(205);e.exports={create:a,update:a}},function(e,t){function r(e,t){var r,n,i=t.elm,a=e.data.props||{},o=t.data.props||{};for(r in o)n=o[r],a[r]!==n&&(i[r]=n)}e.exports={create:r,update:r}},function(e,t){function r(e,t,r){s(function(){e[t]=r})}function n(e,t){var n,i,a=t.elm,o=e.data.style||{},s=t.data.style||{},u="delayed"in o;for(i in s)if(n=s[i],"delayed"===i)for(i in s.delayed)n=s.delayed[i],u&&n===o.delayed[i]||r(a.style,i,n);else"remove"!==i&&n!==o[i]&&(a.style[i]=n)}function i(e){var t,r,n=e.elm,i=e.data.style;if(i&&(t=i.destroy))for(r in t)n.style[r]=t[r]}function a(e,t){var r=e.data.style;if(!r||!r.remove)return void t();var n,i,a=e.elm,o=0,s=r.remove,u=0,l=[];for(n in s)l.push(n),a.style[n]=s[n];i=getComputedStyle(a);for(var c=i["transition-property"].split(", ");o<c.length;++o)-1!==l.indexOf(c[o])&&u++;a.addEventListener("transitionend",function(e){e.target===a&&--u,0===u&&t()})}var o=requestAnimationFrame||setTimeout,s=function(e){o(function(){o(e)})};e.exports={create:n,update:n,destroy:i,remove:a}},function(e,t,r){"use strict";function n(e){return void 0===e}function i(e){return void 0!==e}function a(e){return c(e.tagName,{},[],void 0,e)}function o(e,t){return e.key===t.key&&e.sel===t.sel}function s(e,t,r){var n,a,o={};for(n=t;n<=r;++n)a=e[n].key,i(a)&&(o[a]=n);return o}function u(e,t){return function(){0==--t&&e.parentElement.removeChild(e)}}function l(e){function t(e,r){var n,a=e.data;i(a)&&(i(n=a.hook)&&i(n=n.init)&&n(e),i(n=a.vnode)&&(e=n));var o,s=e.children,u=e.sel;if(i(u)){var l=u.indexOf("#"),c=u.indexOf(".",l),h=l>0?l:u.length,p=c>0?c:u.length,g=-1!==l||-1!==c?u.slice(0,Math.min(h,p)):u;if(o=e.elm=i(a)&&i(n=a.ns)?document.createElementNS(n,g):document.createElement(g),h<p&&(o.id=u.slice(h+1,p)),c>0&&(o.className=u.slice(p+1).replace(/\./g," ")),f.array(s))for(n=0;n<s.length;++n)o.appendChild(t(s[n],r));else f.primitive(e.text)&&o.appendChild(document.createTextNode(e.text));for(n=0;n<y.create.length;++n)y.create[n](d,e);n=e.data.hook,i(n)&&(n.create&&n.create(d,e),n.insert&&r.push(e))}else o=e.elm=document.createTextNode(e.text);return e.elm}function r(e,r,n,i,a,o){for(;i<=a;++i)e.insertBefore(t(n[i],o),r)}function l(e){var t,r=e.data;if(i(r)){for(i(r=r.hook)&&i(r=r.destroy)&&r(e),r=0;r<y.destroy.length;++r)y.destroy[r](e);if(i(r=e.children))for(t=0;t<e.children.length;++t)l(e.children[t])}}function c(e,t,r,n){for(;r<=n;++r){var a,o,s,c=t[r];if(i(c))if(i(c.sel)){for(l(c),o=y.remove.length+1,s=u(c.elm,o),a=0;a<y.remove.length;++a)y.remove[a](c,s);i(a=c.data)&&i(a=a.hook)&&i(a=a.remove)?a(c,s):s()}else e.removeChild(c.elm)}}function p(e,i,a,u){for(var l,f,d,h,p=0,m=0,v=i.length-1,y=i[0],M=i[v],w=a.length-1,x=a[0],b=a[w];p<=v&&m<=w;)n(y)?y=i[++p]:n(M)?M=i[--v]:o(y,x)?(g(y,x,u),y=i[++p],x=a[++m]):o(M,b)?(g(M,b,u),M=i[--v],b=a[--w]):o(y,b)?(g(y,b,u),e.insertBefore(y.elm,M.elm.nextSibling),y=i[++p],b=a[--w]):o(M,x)?(g(M,x,u),e.insertBefore(M.elm,y.elm),M=i[--v],x=a[++m]):(n(l)&&(l=s(i,p,v)),f=l[x.key],n(f)?(e.insertBefore(t(x,u),y.elm),x=a[++m]):(d=i[f],g(d,x,u),i[f]=void 0,e.insertBefore(d.elm,y.elm),x=a[++m]));p>v?(h=n(a[w+1])?null:a[w+1].elm,r(e,h,a,m,w,u)):m>w&&c(e,i,p,v)}function g(e,t,a){var o,s;i(o=t.data)&&i(s=o.hook)&&i(o=s.prepatch)&&o(e,t),i(o=e.data)&&i(o=o.vnode)&&(e=o),i(o=t.data)&&i(o=o.vnode)&&(t=o);var u=t.elm=e.elm,l=e.children,f=t.children;if(e!==t){if(i(t.data)){for(o=0;o<y.update.length;++o)y.update[o](e,t);o=t.data.hook,i(o)&&i(o=o.update)&&o(e,t)}n(t.text)?i(l)&&i(f)?l!==f&&p(u,l,f,a):i(f)?r(u,null,f,0,f.length-1,a):i(l)&&c(u,l,0,l.length-1):e.text!==t.text&&(u.textContent=t.text),i(s)&&i(o=s.postpatch)&&o(e,t)}}var m,v,y={};for(m=0;m<h.length;++m)for(y[h[m]]=[],v=0;v<e.length;++v)void 0!==e[v][h[m]]&&y[h[m]].push(e[v][h[m]]);return function(e,r){var n,i=[];for(n=0;n<y.pre.length;++n)y.pre[n]();for(e instanceof Element?null!==e.parentElement?(t(r,i),e.parentElement.replaceChild(r.elm,e)):(e=a(e),g(e,r,i)):g(e,r,i),n=0;n<i.length;++n)i[n].data.hook.insert(i[n]);for(n=0;n<y.post.length;++n)y.post[n]();return r}}var c=r(311),f=r(205),d=c("",{},[],void 0,void 0),h=["create","update","remove","destroy","pre","post"];e.exports={init:l}},function(e,t){e.exports=function(e,t,r,n,i){return{sel:e,data:t,children:r,text:n,elm:i,key:void 0===t?void 0:t.key}}},function(e,t,r){function n(e){this.gl=e,this.attribs={position:0},this.program=i.linkProgram(e,o,s,this.attribs),this.uniforms=i.getProgramUniforms(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var i=r(23),a=r(313),o=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),s=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),u=Math.PI/180,l=.3125;n.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},n.prototype.listen=function(e,t){var r=this.gl.canvas;this.listener=function(n){var i=r.clientWidth/2;n.clientX>i-42&&n.clientX<i+42&&n.clientY>r.clientHeight-42?e(n):n.clientX<42&&n.clientY<42&&t(n)},r.addEventListener("click",this.listener,!1)},n.prototype.onResize=function(){var e=this.gl,t=this,r=[e.ARRAY_BUFFER_BINDING];a(e,r,function(e){function r(e,t){var r=(90-e)*u,n=Math.cos(r),o=Math.sin(r);i.push(l*n*h+a,l*o*h+h),i.push(t*n*h+a,t*o*h+h)}function n(t,r){i.push(p+t,e.drawingBufferHeight-p-r)}var i=[],a=e.drawingBufferWidth/2,o=Math.max(screen.width,screen.height)*window.devicePixelRatio,s=e.drawingBufferWidth/o,c=s*window.devicePixelRatio,f=4*c/2,d=42*c,h=28*c/2,p=14*c;i.push(a-f,d),i.push(a-f,e.drawingBufferHeight),i.push(a+f,d),i.push(a+f,e.drawingBufferHeight),t.gearOffset=i.length/2;for(var g=0;g<=6;g++){var m=60*g;r(m,1),r(m+12,1),r(m+20,.75),r(m+40,.75),r(m+48,1)}t.gearVertexCount=i.length/2-t.gearOffset,t.arrowOffset=i.length/2;var v=f/Math.sin(45*u);n(0,h),n(h,0),n(h+v,v),n(v,h+v),n(v,h-v),n(0,h),n(h,2*h),n(h+v,2*h-v),n(v,h-v),n(0,h),n(v,h-f),n(28*c,h-f),n(v,h+f),n(28*c,h+f),t.arrowVertexCount=i.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW)})},n.prototype.render=function(){var e=this.gl,t=this,r=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];a(e,r,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},n.prototype.renderNoState=function(){var e=this.gl;e.useProgram(this.program),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.enableVertexAttribArray(this.attribs.position),e.vertexAttribPointer(this.attribs.position,2,e.FLOAT,!1,8,0),e.uniform4f(this.uniforms.color,1,1,1,1),i.orthoMatrix(this.projMat,0,e.drawingBufferWidth,0,e.drawingBufferHeight,.1,1024),e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.drawArrays(e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),e.drawArrays(e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},e.exports=n},function(e,t){function r(e,t,r){if(!t)return void r(e);for(var n=[],i=null,a=0;a<t.length;++a){var o=t[a];switch(o){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++a];if(s<e.TEXTURE0||s>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),n.push(null,null);break}i||(i=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(s),n.push(e.getParameter(o),null);break;case e.ACTIVE_TEXTURE:i=e.getParameter(e.ACTIVE_TEXTURE),n.push(null);break;default:n.push(e.getParameter(o))}}r(e);for(var a=0;a<t.length;++a){var o=t[a],u=n[a];switch(o){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,u);break;case e.COLOR_CLEAR_VALUE:e.clearColor(u[0],u[1],u[2],u[3]);break;case e.COLOR_WRITEMASK:e.colorMask(u[0],u[1],u[2],u[3]);break;case e.CURRENT_PROGRAM:e.useProgram(u);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,u);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,u);break;case e.TEXTURE_BINDING_2D:var s=t[++a];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_2D,u);break;case e.TEXTURE_BINDING_CUBE_MAP:var s=t[++a];if(s<e.TEXTURE0||s>e.TEXTURE31)break;e.activeTexture(s),e.bindTexture(e.TEXTURE_CUBE_MAP,u);break;case e.VIEWPORT:e.viewport(u[0],u[1],u[2],u[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:u?e.enable(o):e.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}i&&e.activeTexture(i)}}e.exports=r},function(e,t,r){function n(e){this.width=e.width||u.getScreenWidth(),this.height=e.height||u.getScreenHeight(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}function i(e){this.viewer=f.CardboardV2,this.updateDeviceParams(e),this.distortion=new o(this.viewer.distortionCoefficients)}function a(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}var o=r(704),s=r(96),u=r(23),l=new n({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),c=new n({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),f={CardboardV1:new a({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new a({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};i.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},i.prototype.getDevice=function(){return this.device},i.prototype.setViewer=function(e){this.viewer=e,this.distortion=new o(this.viewer.distortionCoefficients)},i.prototype.determineDevice_=function(e){if(!e)return u.isIOS()?(console.warn("Using fallback iOS device measurements."),c):(console.warn("Using fallback Android device measurements."),l);var t=.0254/e.xdpi,r=.0254/e.ydpi;return new n({widthMeters:t*u.getScreenWidth(),heightMeters:r*u.getScreenHeight(),bevelMeters:.001*e.bevelMm})},i.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,r=this.distortion,n=e.screenLensDistance,i=(t.widthMeters-e.interLensDistance)/2,a=e.interLensDistance/2,o=e.baselineLensDistance-t.bevelMeters,u=t.heightMeters-o,l=s.radToDeg*Math.atan(r.distort(i/n)),c=s.radToDeg*Math.atan(r.distort(a/n)),f=s.radToDeg*Math.atan(r.distort(o/n)),d=s.radToDeg*Math.atan(r.distort(u/n));return{leftDegrees:Math.min(l,e.fov),rightDegrees:Math.min(c,e.fov),downDegrees:Math.min(f,e.fov),upDegrees:Math.min(d,e.fov)}},i.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,n=Math.tan(-s.degToRad*e.fov),i=Math.tan(s.degToRad*e.fov),a=Math.tan(s.degToRad*e.fov),o=Math.tan(-s.degToRad*e.fov),u=t.widthMeters/4,l=t.heightMeters/2,c=e.baselineLensDistance-t.bevelMeters-l,f=e.interLensDistance/2-u,d=-c,h=e.screenLensDistance,p=r.distort((f-u)/h),g=r.distort((d+l)/h),m=r.distort((f+u)/h),v=r.distort((d-l)/h),y=new Float32Array(4);return y[0]=Math.max(n,p),y[1]=Math.min(i,g),y[2]=Math.min(a,m),y[3]=Math.max(o,v),y},i.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,r=this.distortion,n=new Float32Array(4),i=r.distortInverse(Math.tan(-s.degToRad*e.fov)),a=r.distortInverse(Math.tan(s.degToRad*e.fov)),o=r.distortInverse(Math.tan(s.degToRad*e.fov)),u=r.distortInverse(Math.tan(-s.degToRad*e.fov)),l=t.widthMeters/4,c=t.heightMeters/2,f=e.baselineLensDistance-t.bevelMeters-c,d=e.interLensDistance/2-l,h=-f,p=e.screenLensDistance,g=(d-l)/p,m=(h+c)/p,v=(d+l)/p,y=(h-c)/p;return n[0]=Math.max(i,g),n[1]=Math.min(a,m),n[2]=Math.min(o,v),n[3]=Math.max(u,y),n},i.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,r=this.device,n=t.screenLensDistance,i=(r.widthMeters-t.interLensDistance)/2,a=t.baselineLensDistance-r.bevelMeters,o=(e[0]*n+i)/r.widthMeters,s=(e[1]*n+a)/r.heightMeters,u=(e[2]*n+i)/r.widthMeters,l=(e[3]*n+a)/r.heightMeters;return{x:o,y:l,width:u-o,height:s-l}},i.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},i.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},i.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:s.radToDeg*Math.atan(e.outerDist),rightDegrees:s.radToDeg*Math.atan(e.innerDist),downDegrees:s.radToDeg*Math.atan(e.bottomDist),upDegrees:s.radToDeg*Math.atan(e.topDist)}},i.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,r=this.device,n=t.screenLensDistance,i=r.widthMeters/n,a=r.heightMeters/n,o=r.width/i,s=r.height/a,u=Math.round((e.eyePosX-e.outerDist)*o),l=Math.round((e.eyePosY-e.bottomDist)*s);return{x:u,y:l,width:Math.round((e.eyePosX+e.innerDist)*o)-u,height:Math.round((e.eyePosY+e.topDist)*s)-l}},i.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,r=this.distortion,n=e.screenLensDistance,i=e.interLensDistance/2/n,a=t.widthMeters/n,o=t.heightMeters/n,u=a/2-i,l=(e.baselineLensDistance-t.bevelMeters)/n,c=e.fov,f=r.distortInverse(Math.tan(s.degToRad*c)),d=Math.min(u,f),h=Math.min(i,f),p=Math.min(l,f);return{outerDist:d,innerDist:h,topDist:Math.min(o-l,f),bottomDist:p,eyePosX:u,eyePosY:l}},i.Viewers=f,e.exports=i},function(e,t,r){function n(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:HMD:"+e.displayId,this.deviceName=e.displayName+" (HMD)"}function i(e){this.display=e,this.hardwareUnitId=e.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+e.displayId,this.deviceName=e.displayName+" (PositionSensor)"}var a=(r(55).VRDisplay,r(55).HMDVRDevice),o=r(55).PositionSensorVRDevice;n.prototype=new a,n.prototype.getEyeParameters=function(e){var t=this.display.getEyeParameters(e);return{currentFieldOfView:t.fieldOfView,maximumFieldOfView:t.fieldOfView,minimumFieldOfView:t.fieldOfView,recommendedFieldOfView:t.fieldOfView,eyeTranslation:{x:t.offset[0],y:t.offset[1],z:t.offset[2]},renderRect:{x:"right"==e?t.renderWidth:0,y:0,width:t.renderWidth,height:t.renderHeight}}},n.prototype.setFieldOfView=function(e,t,r,n){},i.prototype=new o,i.prototype.getState=function(){var e=this.display.getPose();return{position:e.position?{x:e.position[0],y:e.position[1],z:e.position[2]}:null,orientation:e.orientation?{x:e.orientation[0],y:e.orientation[1],z:e.orientation[2],w:e.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},i.prototype.resetState=function(){return this.positionDevice.resetPose()},e.exports.VRDisplayHMDDevice=n,e.exports.VRDisplayPositionSensorDevice=i},function(e,t,r){"use strict";e.exports=r(413).default},function(e,t,r){e.exports={default:r(524),__esModule:!0}},function(e,t,r){var n=r(109),i=r(110),a=r(65),o=r(180),s=r(61),u=r(264),l=Object.getOwnPropertyDescriptor;t.f=r(40)?l:function(e,t){if(e=a(e),t=o(t,!0),u)try{return l(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t,r){(function(t){!function(r){"use strict";function n(e){if("function"==typeof i)return i(e);if("function"==typeof t)return new t(e,"base64").toString("binary");if("object"==typeof r.base64js){var n=r.base64js.b64ToByteArray(e);return Array.prototype.map.call(n,function(e){return String.fromCharCode(e)}).join("")}throw new Error("you're probably in an ios webworker. please include use beatgammit's base64-js")}var i=r.atob;r.atob=n,e.exports=n}(window)}).call(t,r(99).Buffer)},function(e,t,r){"use strict";function n(e,t,r,n,i){e.beginPath(),e.moveTo(t,r),e.lineTo(n,i),e.stroke()}Object.defineProperty(t,"__esModule",{value:!0}),t.default={line:n}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){e=e||{},e.empty||((0,p.checkArgument)(e.familyName,"When creating a new Font object, familyName is required."),(0,p.checkArgument)(e.styleName,"When creating a new Font object, styleName is required."),(0,p.checkArgument)(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),(0,p.checkArgument)(e.ascender,"When creating a new Font object, ascender is required."),(0,p.checkArgument)(e.descender,"When creating a new Font object, descender is required."),(0,p.checkArgument)(e.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||e.familyName+e.styleName},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new f.default.GlyphSet(this,e.glyphs||[]),this.encoding=new l.DefaultEncoding(this),this.substitution=new h.default(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new m.default(this):void 0}})}Object.defineProperty(t,"__esModule",{value:!0});var a=r(100),o=n(a),s=r(329),u=n(s),l=r(121),c=r(150),f=n(c),d=r(324),h=n(d),p=r(224),g=r(322),m=n(g);i.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},i.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},i.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},i.prototype.stringToGlyphs=function(e,t){t=t||this.defaultRenderOptions;for(var r=[],n=0;n<e.length;n+=1){var i=e[n];r.push(this.charToGlyphIndex(i))}var a=r.length;if(t.features){var o=t.script||this.substitution.getDefaultScriptName(),s=[];t.features.liga&&(s=s.concat(this.substitution.getFeature("liga",o,t.language))),t.features.rlig&&(s=s.concat(this.substitution.getFeature("rlig",o,t.language)));for(var u=0;u<a;u+=1)for(var l=0;l<s.length;l++){for(var c=s[l],f=c.sub,d=f.length,h=0;h<d&&f[h]===r[u+h];)h++;h===d&&(r.splice(u,d,c.by),a=a-d+1)}}for(var p=new Array(a),g=this.glyphs.get(0),m=0;m<a;m+=1)p[m]=this.glyphs.get(r[m])||g;return p},i.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},i.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},i.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},i.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.getGposKerningValue;return r?r(e,t):this.kerningPairs[e+","+t]||0},i.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},i.prototype.forEachGlyph=function(e,t,r,n,i,a){t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:72,i=i||this.defaultRenderOptions;for(var o=1/this.unitsPerEm*n,s=this.stringToGlyphs(e,i),u=0;u<s.length;u+=1){var l=s[u];if(a.call(this,l,t,r,n,i),l.advanceWidth&&(t+=l.advanceWidth*o),i.kerning&&u<s.length-1){t+=this.getKerningValue(l,s[u+1])*o}i.letterSpacing?t+=i.letterSpacing*n:i.tracking&&(t+=i.tracking/1e3*n)}return t},i.prototype.getPath=function(e,t,r,n,i){var a=new o.default;return this.forEachGlyph(e,t,r,n,i,function(e,t,r,n){var o=e.getPath(t,r,n,i,this);a.extend(o)}),a},i.prototype.getPaths=function(e,t,r,n,i){var a=[];return this.forEachGlyph(e,t,r,n,i,function(e,t,r,n){var o=e.getPath(t,r,n,i,this);a.push(o)}),a},i.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,function(){})},i.prototype.draw=function(e,t,r,n,i,a){this.getPath(t,r,n,i,a).draw(e)},i.prototype.drawPoints=function(e,t,r,n,i,a){this.forEachGlyph(t,r,n,i,a,function(t,r,n,i){t.drawPoints(e,r,n,i)})},i.prototype.drawMetrics=function(e,t,r,n,i,a){this.forEachGlyph(t,r,n,i,a,function(t,r,n,i){t.drawMetrics(e,r,n,i)})},i.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},i.prototype.validate=function(){function e(e,t){e||r.push(t)}function t(t){var r=n.getEnglishName(t);e(r&&r.trim().length>0,"No English "+t+" specified.")}var r=[],n=this;t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),e(this.unitsPerEm>0,"No unitsPerEm specified.")},i.prototype.toTables=function(){return u.default.fontToTable(this)},i.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},i.prototype.toArrayBuffer=function(){for(var e=this.toTables(),t=e.encode(),r=new ArrayBuffer(t.length),n=new Uint8Array(r),i=0;i<t.length;i++)n[i]=t[i];return r},i.prototype.download=function(e){var t=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");e=e||t.replace(/\s/g,"")+"-"+n+".otf";var i=this.toArrayBuffer();if((0,p.isBrowser)())window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,function(t){t.root.getFile(e,{create:!0},function(e){e.createWriter(function(t){var r=new DataView(i),n=new Blob([r],{type:"font/opentype"});t.write(n),t.addEventListener("writeend",function(){location.href=e.toURL()},!1)})})},function(e){throw new Error(e.name+": "+e.message)});else{var a=r(206),o=(0,p.arrayBufferToNodeBuffer)(i);a.writeFileSync(e,o)}},i.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},i.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},i.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900},t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){this.font=e,this._fpgmState=this._prepState=void 0,this._errorState=0}function a(e){return e}function o(e){return(0,gt.default)(e)*Math.round(Math.abs(e))}function s(e){return(0,gt.default)(e)*Math.round(Math.abs(2*e))/2}function u(e){return(0,gt.default)(e)*(Math.round(Math.abs(e)+.5)-.5)}function l(e){return(0,gt.default)(e)*Math.ceil(Math.abs(e))}function c(e){return(0,gt.default)(e)*Math.floor(Math.abs(e))}function f(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,(0,ft.default)(this)}function d(e,t){var r=Math.sqrt(e*e+t*t);return e/=r,t/=r,1===e&&0===t?xt:0===e&&1===t?bt:new f(e,t)}function h(e,t,r,n){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=r,this.onCurve=n,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,(0,lt.default)(this)}function p(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=xt,this.round=o}}function g(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new h(0,0)}function m(e,t){var r=e.prog,n=e.ip,i=1,a=void 0;do{if(88===(a=r[++n]))i++;else if(89===a)i--;else if(64===a)n+=r[n+1]+1;else if(65===a)n+=2*r[n+1]+1;else if(a>=176&&a<=183)n+=a-176+1;else if(a>=184&&a<=191)n+=2*(a-184+1);else if(t&&1===i&&27===a)break}while(i>0);e.ip=n}function v(e,r){t.DEBUG&&console.log(r.step,"SVTCA["+e.axis+"]"),r.fv=r.pv=r.dpv=e}function y(e,r){t.DEBUG&&console.log(r.step,"SPVTCA["+e.axis+"]"),r.pv=r.dpv=e}function M(e,r){t.DEBUG&&console.log(r.step,"SFVTCA["+e.axis+"]"),r.fv=e}function w(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z2[i],s=r.z1[a];t.DEBUG&&console.log("SPVTL["+e+"]",i,a);var u=void 0,l=void 0;e?(u=o.y-s.y,l=s.x-o.x):(u=s.x-o.x,l=s.y-o.y),r.pv=r.dpv=d(u,l)}function x(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z2[i],s=r.z1[a];t.DEBUG&&console.log("SFVTL["+e+"]",i,a);var u=void 0,l=void 0;e?(u=o.y-s.y,l=s.x-o.x):(u=s.x-o.x,l=s.y-o.y),r.fv=d(u,l)}function b(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,i),e.pv=e.dpv=d(i,n)}function T(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"SPVFS[]",n,i),e.fv=d(i,n)}function S(e){var r=e.stack,n=e.pv;t.DEBUG&&console.log(e.step,"GPV[]"),r.push(16384*n.x),r.push(16384*n.y)}function _(e){var r=e.stack,n=e.fv;t.DEBUG&&console.log(e.step,"GFV[]"),r.push(16384*n.x),r.push(16384*n.y)}function E(e){e.fv=e.pv,t.DEBUG&&console.log(e.step,"SFVTPV[]")}function A(e){var r=e.stack,n=r.pop(),i=r.pop(),a=r.pop(),o=r.pop(),s=r.pop(),u=e.z0,l=e.z1,c=u[n],f=u[i],d=l[a],h=l[o],p=e.z2[s];t.DEBUG&&console.log("ISECT[], ",n,i,a,o,s);var g=c.x,m=c.y,v=f.x,y=f.y,M=d.x,w=d.y,x=h.x,b=h.y,T=(g-v)*(w-b)-(m-y)*(M-x),S=g*y-m*v,_=M*b-w*x;p.x=(S*(M-x)-_*(g-v))/T,p.y=(S*(w-b)-_*(m-y))/T}function I(e){e.rp0=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)}function D(e){e.rp1=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)}function L(e){e.rp2=e.stack.pop(),t.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)}function N(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP0[]",r),e.zp0=r,r){case 0:e.tZone||g(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function C(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP1[]",r),e.zp1=r,r){case 0:e.tZone||g(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function O(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZP2[]",r),e.zp2=r,r){case 0:e.tZone||g(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function R(e){var r=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"SZPS[]",r),e.zp0=e.zp1=e.zp2=r,r){case 0:e.tZone||g(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}}function P(e){e.loop=e.stack.pop(),t.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)}function z(e){t.DEBUG&&console.log(e.step,"RTG[]"),e.round=o}function j(e){t.DEBUG&&console.log(e.step,"RTHG[]"),e.round=u}function U(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SMD[]",r),e.minDis=r/64}function B(e){t.DEBUG&&console.log(e.step,"ELSE[]"),m(e,!1)}function V(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"JMPR[]",r),e.ip+=r-1}function k(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SCVTCI[]",r),e.cvCutIn=r/64}function F(e){var r=e.stack;t.DEBUG&&console.log(e.step,"DUP[]"),r.push(r[r.length-1])}function G(e){t.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function H(e){t.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0}function W(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"SWAP[]"),r.push(n),r.push(i)}function Y(e){var r=e.stack;t.DEBUG&&console.log(e.step,"DEPTH[]"),r.push(r.length)}function Q(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"LOOPCALL[]",n,i);var a=e.ip,o=e.prog;e.prog=e.funcs[n];for(var s=0;s<i;s++)vt(e),t.DEBUG&&console.log(++e.step,s+1<i?"next loopcall":"done loopcall",s);e.ip=a,e.prog=o}function q(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"CALL[]",r);var n=e.ip,i=e.prog;e.prog=e.funcs[r],vt(e),e.ip=n,e.prog=i,t.DEBUG&&console.log(++e.step,"returning from",r)}function X(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"CINDEX[]",n),r.push(r[r.length-n])}function Z(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"MINDEX[]",n),r.push(r.splice(r.length-n,1)[0])}function K(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var r=e.stack,n=e.prog,i=e.ip,a=r.pop(),o=i;for(t.DEBUG&&console.log(e.step,"FDEF[]",a);45!==n[++i];);e.ip=i,e.funcs[a]=n.slice(o+1,i)}function J(e,r){var n=r.stack.pop(),i=r.z0[n],a=r.fv,o=r.pv;t.DEBUG&&console.log(r.step,"MDAP["+e+"]",n);var s=o.distance(i,Tt);e&&(s=r.round(s)),a.setRelative(i,Tt,s,o),a.touch(i),r.rp0=r.rp1=n}function $(e,r){var n=r.z2,i=n.length-2,a=void 0,o=void 0,s=void 0;t.DEBUG&&console.log(r.step,"IUP["+e.axis+"]");for(var u=0;u<i;u++)a=n[u],e.touched(a)||(o=a.prevTouched(e))!==a&&(s=a.nextTouched(e),o===s&&e.setRelative(a,a,e.distance(o,o,!1,!0),e,!0),e.interpolate(a,o,s,e))}function ee(e,r){for(var n=r.stack,i=e?r.rp1:r.rp2,a=(e?r.z0:r.z1)[i],o=r.fv,s=r.pv,u=r.loop,l=r.z2;u--;){var c=n.pop(),f=l[c],d=s.distance(a,a,!1,!0);o.setRelative(f,f,d,s),o.touch(f),t.DEBUG&&console.log(r.step,(r.loop>1?"loop "+(r.loop-u)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",c)}r.loop=1}function te(e,r){var n=r.stack,i=e?r.rp1:r.rp2,a=(e?r.z0:r.z1)[i],o=r.fv,s=r.pv,u=n.pop(),l=r.z2[r.contours[u]],c=l;t.DEBUG&&console.log(r.step,"SHC["+e+"]",u);var f=s.distance(a,a,!1,!0);do{c!==a&&o.setRelative(c,c,f,s),c=c.nextPointOnContour}while(c!==l)}function re(e,r){var n=r.stack,i=e?r.rp1:r.rp2,a=(e?r.z0:r.z1)[i],o=r.fv,s=r.pv,u=n.pop();t.DEBUG&&console.log(r.step,"SHZ["+e+"]",u);var l=void 0;switch(u){case 0:l=r.tZone;break;case 1:l=r.gZone;break;default:throw new Error("Invalid zone")}for(var c=void 0,f=s.distance(a,a,!1,!0),d=l.length-2,h=0;h<d;h++)(c=l[h])!==a&&o.setRelative(c,c,f,s)}function ne(e){for(var r=e.stack,n=e.loop,i=e.fv,a=r.pop()/64,o=e.z2;n--;){var s=r.pop(),u=o[s];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-n)+": ":"")+"SHPIX[]",s,a),i.setRelative(u,u,a),i.touch(u)}e.loop=1}function ie(e){for(var r=e.stack,n=e.rp1,i=e.rp2,a=e.loop,o=e.z0[n],s=e.z1[i],u=e.fv,l=e.dpv,c=e.z2;a--;){var f=r.pop(),d=c[f];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"IP[]",f,n,"<->",i),u.interpolate(d,o,s,l),u.touch(d)}e.loop=1}function ae(e,r){var n=r.stack,i=n.pop()/64,a=n.pop(),o=r.z1[a],s=r.z0[r.rp0],u=r.fv,l=r.pv;u.setRelative(o,s,i,l),u.touch(o),t.DEBUG&&console.log(r.step,"MSIRP["+e+"]",i,a),r.rp1=r.rp0,r.rp2=a,e&&(r.rp0=a)}function oe(e){for(var r=e.stack,n=e.rp0,i=e.z0[n],a=e.loop,o=e.fv,s=e.pv,u=e.z1;a--;){var l=r.pop(),c=u[l];t.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"ALIGNRP[]",l),o.setRelative(c,i,0,s),o.touch(c)}e.loop=1}function se(e){t.DEBUG&&console.log(e.step,"RTDG[]"),e.round=s}function ue(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z0[a],s=r.fv,u=r.pv,l=r.cvt[i];e&&(l=r.round(l)),t.DEBUG&&console.log(r.step,"MIAP["+e+"]",i,"(",l,")",a),s.setRelative(o,Tt,l,u),0===r.zp0&&(o.xo=o.x,o.yo=o.y),s.touch(o),r.rp0=r.rp1=a}function le(e){var r=e.prog,n=e.ip,i=e.stack,a=r[++n];t.DEBUG&&console.log(e.step,"NPUSHB[]",a);for(var o=0;o<a;o++)i.push(r[++n]);e.ip=n}function ce(e){var r=e.ip,n=e.prog,i=e.stack,a=n[++r];t.DEBUG&&console.log(e.step,"NPUSHW[]",a);for(var o=0;o<a;o++){var s=n[++r]<<8|n[++r];32768&s&&(s=-(1+(65535^s))),i.push(s)}e.ip=r}function fe(e){var r=e.stack,n=e.store;n||(n=e.store=[]);var i=r.pop(),a=r.pop();t.DEBUG&&console.log(e.step,"WS",i,a),n[a]=i}function de(e){var r=e.stack,n=e.store,i=r.pop();t.DEBUG&&console.log(e.step,"RS",i);var a=n&&n[i]||0;r.push(a)}function he(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"WCVTP",n,i),e.cvt[i]=n/64}function pe(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"RCVT",n),r.push(64*e.cvt[n])}function ge(e,r){var n=r.stack,i=n.pop(),a=r.z2[i];t.DEBUG&&console.log(r.step,"GC["+e+"]",i),n.push(64*r.dpv.distance(a,Tt,e,!1))}function me(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z1[i],s=r.z0[a],u=r.dpv.distance(s,o,e,e);t.DEBUG&&console.log(r.step,"MD["+e+"]",i,a,"->",u),r.stack.push(Math.round(64*u))}function ve(e){t.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)}function ye(e){t.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0}function Me(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"LT[]",n,i),r.push(i<n?1:0)}function we(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"LTEQ[]",n,i),r.push(i<=n?1:0)}function xe(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"GT[]",n,i),r.push(i>n?1:0)}function be(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"GTEQ[]",n,i),r.push(i>=n?1:0)}function Te(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"EQ[]",n,i),r.push(n===i?1:0)}function Se(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"NEQ[]",n,i),r.push(n!==i?1:0)}function _e(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"ODD[]",n),r.push((0,ht.default)(n)%2?1:0)}function Ee(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"EVEN[]",n),r.push((0,ht.default)(n)%2?0:1)}function Ae(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"IF[]",r),r||(m(e,!0),t.DEBUG&&console.log(e.step,"EIF[]"))}function Ie(e){t.DEBUG&&console.log(e.step,"EIF[]")}function De(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"AND[]",n,i),r.push(n&&i?1:0)}function Le(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"OR[]",n,i),r.push(n||i?1:0)}function Ne(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"NOT[]",n),r.push(n?0:1)}function Ce(e,r){var n=r.stack,i=n.pop(),a=r.fv,o=r.pv,s=r.ppem,u=r.deltaBase+16*(e-1),l=r.deltaShift,c=r.z0;t.DEBUG&&console.log(r.step,"DELTAP["+e+"]",i,n);for(var f=0;f<i;f++){var d=n.pop(),h=n.pop();if(u+((240&h)>>4)===s){var p=(15&h)-8;p>=0&&p++,t.DEBUG&&console.log(r.step,"DELTAPFIX",d,"by",p*l);var g=c[d];a.setRelative(g,g,p*l,o)}}}function Oe(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"SDB[]",n),e.deltaBase=n}function Re(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"SDS[]",n),e.deltaShift=Math.pow(.5,n)}function Pe(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"ADD[]",n,i),r.push(i+n)}function ze(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"SUB[]",n,i),r.push(i-n)}function je(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"DIV[]",n,i),r.push(64*i/n)}function Ue(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"MUL[]",n,i),r.push(i*n/64)}function Be(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"ABS[]",n),r.push(Math.abs(n))}function Ve(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"NEG[]",n),r.push(-n)}function ke(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"FLOOR[]",n),r.push(64*Math.floor(n/64))}function Fe(e){var r=e.stack,n=r.pop();t.DEBUG&&console.log(e.step,"CEILING[]",n),r.push(64*Math.ceil(n/64))}function Ge(e,r){var n=r.stack,i=n.pop();t.DEBUG&&console.log(r.step,"ROUND[]"),n.push(64*r.round(i/64))}function He(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"WCVTF[]",n,i),e.cvt[i]=n*e.ppem/e.font.unitsPerEm}function We(e,r){var n=r.stack,i=n.pop(),a=r.ppem,o=r.deltaBase+16*(e-1),s=r.deltaShift;t.DEBUG&&console.log(r.step,"DELTAC["+e+"]",i,n);for(var u=0;u<i;u++){var l=n.pop(),c=n.pop();if(o+((240&c)>>4)===a){var f=(15&c)-8;f>=0&&f++;var d=f*s;t.DEBUG&&console.log(r.step,"DELTACFIX",l,"by",d),r.cvt[l]+=d}}}function Ye(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=wt;var n=void 0;switch(192&r){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n}function Qe(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=wt;var n=void 0;switch(192&r){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=n,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*n;break;case 32:e.srPhase=.5*n;break;case 48:e.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*n}function qe(e){t.DEBUG&&console.log(e.step,"ROFF[]"),e.round=a}function Xe(e){t.DEBUG&&console.log(e.step,"RUTG[]"),e.round=l}function Ze(e){t.DEBUG&&console.log(e.step,"RDTG[]"),e.round=c}function Ke(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANCTRL[]",r)}function Je(e,r){var n=r.stack,i=n.pop(),a=n.pop(),o=r.z2[i],s=r.z1[a];t.DEBUG&&console.log("SDPVTL["+e+"]",i,a);var u=void 0,l=void 0;e?(u=o.y-s.y,l=s.x-o.x):(u=s.x-o.x,l=s.y-o.y),r.dpv=d(u,l)}function $e(e){var r=e.stack,n=r.pop(),i=0;t.DEBUG&&console.log(e.step,"GETINFO[]",n),1&n&&(i=35),32&n&&(i|=4096),r.push(i)}function et(e){var r=e.stack,n=r.pop(),i=r.pop(),a=r.pop();t.DEBUG&&console.log(e.step,"ROLL[]"),r.push(i),r.push(n),r.push(a)}function tt(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"MAX[]",n,i),r.push(Math.max(i,n))}function rt(e){var r=e.stack,n=r.pop(),i=r.pop();t.DEBUG&&console.log(e.step,"MIN[]",n,i),r.push(Math.min(i,n))}function nt(e){var r=e.stack.pop();t.DEBUG&&console.log(e.step,"SCANTYPE[]",r)}function it(e){var r=e.stack.pop(),n=e.stack.pop();switch(t.DEBUG&&console.log(e.step,"INSTCTRL[]",r,n),r){case 1:return void(e.inhibitGridFit=!!n);case 2:return void(e.ignoreCvt=!!n);default:throw new Error("invalid INSTCTRL[] selector")}}function at(e,r){var n=r.stack,i=r.prog,a=r.ip;t.DEBUG&&console.log(r.step,"PUSHB["+e+"]");for(var o=0;o<e;o++)n.push(i[++a]);r.ip=a}function ot(e,r){var n=r.ip,i=r.prog,a=r.stack;t.DEBUG&&console.log(r.ip,"PUSHW["+e+"]");for(var o=0;o<e;o++){var s=i[++n]<<8|i[++n];32768&s&&(s=-(1+(65535^s))),a.push(s)}r.ip=n}function st(e,r,n,i,a,o){var s=o.stack,u=e&&s.pop(),l=s.pop(),c=o.rp0,f=o.z0[c],d=o.z1[l],h=o.minDis,p=o.fv,g=o.dpv,m=void 0,v=void 0,y=void 0,M=void 0;v=m=g.distance(d,f,!0,!0),y=v>=0?1:-1,v=Math.abs(v),e&&(M=o.cvt[u],i&&Math.abs(v-M)<o.cvCutIn&&(v=M)),n&&v<h&&(v=h),i&&(v=o.round(v)),p.setRelative(d,f,y*v,g),p.touch(d),t.DEBUG&&console.log(o.step,(e?"MIRP[":"MDRP[")+(r?"M":"m")+(n?">":"_")+(i?"R":"_")+(0===a?"Gr":1===a?"Bl":2===a?"Wh":"")+"]",e?u+"("+o.cvt[u]+","+M+")":"",l,"(d =",m,"->",y*v,")"),o.rp1=o.rp0,o.rp2=l,r&&(o.rp0=l)}Object.defineProperty(t,"__esModule",{value:!0});var ut=r(501),lt=n(ut),ct=r(166),ft=n(ct),dt=r(258),ht=n(dt),pt=r(165),gt=n(pt),mt=void 0,vt=void 0,yt=void 0,Mt=void 0,wt=function(e){var t=this.srPeriod,r=this.srPhase,n=this.srThreshold,i=1;return e<0&&(e=-e,i=-1),e+=n-r,e=(0,ht.default)(e/t)*t,e+=r,i>0&&e<0?r:i<0&&e>0?-r:e*i},xt={x:1,y:0,axis:"x",distance:function(e,t,r,n){return(r?e.xo:e.x)-(n?t.xo:t.x)},interpolate:function(e,t,r,n){var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0;return n&&n!==this?(i=n.distance(e,t,!0,!0),a=n.distance(e,r,!0,!0),u=n.distance(t,t,!1,!0),l=n.distance(r,r,!1,!0),o=Math.abs(i),s=Math.abs(a),0===(c=o+s)?void xt.setRelative(e,e,(u+l)/2,n,!0):void xt.setRelative(e,e,(u*s+l*o)/c,n,!0)):(i=e.xo-t.xo,a=e.xo-r.xo,u=t.x-t.xo,l=r.x-r.xo,o=Math.abs(i),s=Math.abs(a),0===(c=o+s)?void(e.x=e.xo+(u+l)/2):void(e.x=e.xo+(u*s+l*o)/c))},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,n,i){if(!n||n===this)return void(e.x=(i?t.xo:t.x)+r);var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+r*n.x,u=o+r*n.y;e.x=s+(e.y-u)/n.normalSlope},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},bt={x:0,y:1,axis:"y",distance:function(e,t,r,n){return(r?e.yo:e.y)-(n?t.yo:t.y)},interpolate:function(e,t,r,n){var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0;return n&&n!==this?(i=n.distance(e,t,!0,!0),a=n.distance(e,r,!0,!0),u=n.distance(t,t,!1,!0),l=n.distance(r,r,!1,!0),o=Math.abs(i),s=Math.abs(a),0===(c=o+s)?void bt.setRelative(e,e,(u+l)/2,n,!0):void bt.setRelative(e,e,(u*s+l*o)/c,n,!0)):(i=e.yo-t.yo,a=e.yo-r.yo,u=t.y-t.yo,l=r.y-r.yo,o=Math.abs(i),s=Math.abs(a),0===(c=o+s)?void(e.y=e.yo+(u+l)/2):void(e.y=e.yo+(u*s+l*o)/c))},normalSlope:0,setRelative:function(e,t,r,n,i){if(!n||n===this)return void(e.y=(i?t.yo:t.y)+r);var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+r*n.x,u=o+r*n.y;e.y=u+n.normalSlope*(e.x-s)},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};(0,ft.default)(xt),(0,ft.default)(bt),f.prototype.distance=function(e,t,r,n){return this.x*xt.distance(e,t,r,n)+this.y*bt.distance(e,t,r,n)},f.prototype.interpolate=function(e,t,r,n){var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0;if(o=n.distance(e,t,!0,!0),s=n.distance(e,r,!0,!0),i=n.distance(t,t,!1,!0),a=n.distance(r,r,!1,!0),u=Math.abs(o),l=Math.abs(s),0===(c=u+l))return void this.setRelative(e,e,(i+a)/2,n,!0);this.setRelative(e,e,(i*l+a*u)/c,n,!0)},f.prototype.setRelative=function(e,t,r,n,i){n=n||this;var a=i?t.xo:t.x,o=i?t.yo:t.y,s=a+r*n.x,u=o+r*n.y,l=n.normalSlope,c=this.slope,f=e.x,d=e.y;e.x=(c*f-l*s+u-d)/(c-l),e.y=c*(e.x-f)+d},f.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},h.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},h.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Tt=(0,ft.default)(new h(0,0)),St={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};i.prototype.exec=function(e,r){if("number"!=typeof r)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var n=this.font,i=this._prepState;if(!i||i.ppem!==r){var a=this._fpgmState;if(!a){p.prototype=St,a=this._fpgmState=new p("fpgm",n.tables.fpgm),a.funcs=[],a.font=n,t.DEBUG&&(console.log("---EXEC FPGM---"),a.step=-1);try{vt(a)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}p.prototype=a,i=this._prepState=new p("prep",n.tables.prep),i.ppem=r;var o=n.tables.cvt;if(o)for(var s=i.cvt=new Array(o.length),u=r/n.unitsPerEm,l=0;l<o.length;l++)s[l]=o[l]*u;else i.cvt=[];t.DEBUG&&(console.log("---EXEC PREP---"),i.step=-1);try{vt(i)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return yt(e,i)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},yt=function(e,r){var n=r.ppem/r.font.unitsPerEm,i=n,a=e.components,o=void 0,s=void 0,u=void 0;if(p.prototype=r,a){var l=r.font;s=[],o=[];for(var c=0;c<a.length;c++){var f=a[c],d=l.glyphs.get(f.glyphIndex);u=new p("glyf",d.instructions),t.DEBUG&&(console.log("---EXEC COMP "+c+"---"),u.step=-1),Mt(d,u,n,i);for(var g=Math.round(f.dx*n),m=Math.round(f.dy*i),v=u.gZone,y=u.contours,M=0;M<v.length;M++){var w=v[M];w.xTouched=w.yTouched=!1,w.xo=w.x=w.x+g,w.yo=w.y=w.y+m}var x=s.length;s.push.apply(s,v);for(var b=0;b<y.length;b++)o.push(y[b]+x)}e.instructions&&!u.inhibitGridFit&&(u=new p("glyf",e.instructions),u.gZone=u.z0=u.z1=u.z2=s,u.contours=o,s.push(new h(0,0),new h(Math.round(e.advanceWidth*n),0)),t.DEBUG&&(console.log("---EXEC COMPOSITE---"),u.step=-1),vt(u),s.length-=2)}else u=new p("glyf",e.instructions),t.DEBUG&&(console.log("---EXEC GLYPH---"),u.step=-1),Mt(e,u,n,i),s=u.gZone;return s},Mt=function(e,r,n,i){for(var a=e.points||[],o=a.length,s=r.gZone=r.z0=r.z1=r.z2=[],u=r.contours=[],l=void 0,c=0;c<o;c++)l=a[c],s[c]=new h(l.x*n,l.y*i,l.lastPointOfContour,l.onCurve);for(var f=void 0,d=void 0,p=0;p<o;p++)l=s[p],f||(f=l,u.push(p)),l.lastPointOfContour?(l.nextPointOnContour=f,f.prevPointOnContour=l,f=void 0):(d=s[p+1],l.nextPointOnContour=d,d.prevPointOnContour=l);if(!r.inhibitGridFit&&(s.push(new h(0,0),new h(Math.round(e.advanceWidth*n),0)),vt(r),s.length-=2,t.DEBUG)){console.log("FINISHED GLYPH",r.stack);for(var g=0;g<o;g++)console.log(g,s[g].x,s[g].y)}},vt=function(e){var r=e.prog;if(r){var n=r.length,i=void 0;for(e.ip=0;e.ip<n;e.ip++){if(t.DEBUG&&e.step++,!(i=mt[r[e.ip]]))throw new Error("unknown instruction: 0x"+Number(r[e.ip]).toString(16));i(e)}}},mt=[v.bind(void 0,bt),v.bind(void 0,xt),y.bind(void 0,bt),y.bind(void 0,xt),M.bind(void 0,bt),M.bind(void 0,xt),w.bind(void 0,0),w.bind(void 0,1),x.bind(void 0,0),x.bind(void 0,1),b,T,S,_,E,A,I,D,L,N,C,O,R,P,z,j,U,B,V,k,void 0,void 0,F,G,H,W,Y,X,Z,void 0,void 0,void 0,Q,q,K,void 0,J.bind(void 0,0),J.bind(void 0,1),$.bind(void 0,bt),$.bind(void 0,xt),ee.bind(void 0,0),ee.bind(void 0,1),te.bind(void 0,0),te.bind(void 0,1),re.bind(void 0,0),re.bind(void 0,1),ne,ie,ae.bind(void 0,0),ae.bind(void 0,1),oe,se,ue.bind(void 0,0),ue.bind(void 0,1),le,ce,fe,de,he,pe,ge.bind(void 0,0),ge.bind(void 0,1),void 0,me.bind(void 0,0),me.bind(void 0,1),ve,void 0,ye,void 0,void 0,Me,we,xe,be,Te,Se,_e,Ee,Ae,Ie,De,Le,Ne,Ce.bind(void 0,1),Oe,Re,Pe,ze,je,Ue,Be,Ve,ke,Fe,Ge.bind(void 0,0),Ge.bind(void 0,1),Ge.bind(void 0,2),Ge.bind(void 0,3),void 0,void 0,void 0,void 0,He,Ce.bind(void 0,2),Ce.bind(void 0,3),We.bind(void 0,1),We.bind(void 0,2),We.bind(void 0,3),Ye,Qe,void 0,void 0,qe,void 0,Xe,Ze,G,G,void 0,void 0,void 0,void 0,void 0,Ke,Je.bind(void 0,0),Je.bind(void 0,1),$e,void 0,et,tt,rt,nt,it,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,at.bind(void 0,1),at.bind(void 0,2),at.bind(void 0,3),at.bind(void 0,4),at.bind(void 0,5),at.bind(void 0,6),at.bind(void 0,7),at.bind(void 0,8),ot.bind(void 0,1),ot.bind(void 0,2),ot.bind(void 0,3),ot.bind(void 0,4),ot.bind(void 0,5),ot.bind(void 0,6),ot.bind(void 0,7),ot.bind(void 0,8),st.bind(void 0,0,0,0,0,0),st.bind(void 0,0,0,0,0,1),st.bind(void 0,0,0,0,0,2),st.bind(void 0,0,0,0,0,3),st.bind(void 0,0,0,0,1,0),st.bind(void 0,0,0,0,1,1),st.bind(void 0,0,0,0,1,2),st.bind(void 0,0,0,0,1,3),st.bind(void 0,0,0,1,0,0),st.bind(void 0,0,0,1,0,1),st.bind(void 0,0,0,1,0,2),st.bind(void 0,0,0,1,0,3),st.bind(void 0,0,0,1,1,0),st.bind(void 0,0,0,1,1,1),st.bind(void 0,0,0,1,1,2),st.bind(void 0,0,0,1,1,3),st.bind(void 0,0,1,0,0,0),st.bind(void 0,0,1,0,0,1),st.bind(void 0,0,1,0,0,2),st.bind(void 0,0,1,0,0,3),st.bind(void 0,0,1,0,1,0),st.bind(void 0,0,1,0,1,1),st.bind(void 0,0,1,0,1,2),st.bind(void 0,0,1,0,1,3),st.bind(void 0,0,1,1,0,0),st.bind(void 0,0,1,1,0,1),st.bind(void 0,0,1,1,0,2),st.bind(void 0,0,1,1,0,3),st.bind(void 0,0,1,1,1,0),st.bind(void 0,0,1,1,1,1),st.bind(void 0,0,1,1,1,2),st.bind(void 0,0,1,1,1,3),st.bind(void 0,1,0,0,0,0),st.bind(void 0,1,0,0,0,1),st.bind(void 0,1,0,0,0,2),st.bind(void 0,1,0,0,0,3),st.bind(void 0,1,0,0,1,0),st.bind(void 0,1,0,0,1,1),st.bind(void 0,1,0,0,1,2),st.bind(void 0,1,0,0,1,3),st.bind(void 0,1,0,1,0,0),st.bind(void 0,1,0,1,0,1),st.bind(void 0,1,0,1,0,2),st.bind(void 0,1,0,1,0,3),st.bind(void 0,1,0,1,1,0),st.bind(void 0,1,0,1,1,1),st.bind(void 0,1,0,1,1,2),st.bind(void 0,1,0,1,1,3),st.bind(void 0,1,1,0,0,0),st.bind(void 0,1,1,0,0,1),st.bind(void 0,1,1,0,0,2),st.bind(void 0,1,1,0,0,3),st.bind(void 0,1,1,0,1,0),st.bind(void 0,1,1,0,1,1),st.bind(void 0,1,1,0,1,2),st.bind(void 0,1,1,0,1,3),st.bind(void 0,1,1,1,0,0),st.bind(void 0,1,1,1,0,1),st.bind(void 0,1,1,1,0,2),st.bind(void 0,1,1,1,0,3),st.bind(void 0,1,1,1,1,0),st.bind(void 0,1,1,1,1,1),st.bind(void 0,1,1,1,1,2),st.bind(void 0,1,1,1,1,3)],t.default=i},function(e,t,r){"use strict";function n(e,t){for(var r=0,n=e.length-1;r<=n;){var i=r+n>>>1,a=e[i].tag;if(a===t)return i;a<t?r=i+1:n=i-1}return-r-1}function i(e,t){for(var r=0,n=e.length-1;r<=n;){var i=r+n>>>1,a=e[i];if(a===t)return i;a<t?r=i+1:n=i-1}return-r-1}function a(e,t){this.font=e,this.tableName=t}Object.defineProperty(t,"__esModule",{value:!0});var o=r(22),s=function(e){return e&&e.__esModule?e:{default:e}}(o);a.prototype={searchTag:n,binSearch:i,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var n=e.scripts[r].tag;if("DFLT"===n)return n;"latn"===n&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var r=this.getTable(t);if(r){e=e||"DFLT";var i=r.scripts,a=n(r.scripts,e);if(a>=0)return i[a].script;if(t){var o={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return i.splice(-1-a,0,o),o.script}}},getLangSysTable:function(e,t,r){var i=this.getScriptTable(e,r);if(i){if(!t||"dflt"===t||"DFLT"===t)return i.defaultLangSys;var a=n(i.langSysRecords,t);if(a>=0)return i.langSysRecords[a].langSys;if(r){var o={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return i.langSysRecords.splice(-1-a,0,o),o.langSys}}},getFeatureTable:function(e,t,r,n){var i=this.getLangSysTable(e,t,n);if(i){for(var a=void 0,o=i.featureIndexes,u=this.font.tables[this.tableName].features,l=0;l<o.length;l++)if(a=u[o[l]],a.tag===r)return a.feature;if(n){var c=u.length;return s.default.assert(0===c||r>=u[c-1].tag,"Features must be added in alphabetical order."),a={tag:r,feature:{params:0,lookupListIndexes:[]}},u.push(a),o.push(c),a.feature}}},getLookupTables:function(e,t,r,n,i){var a=this.getFeatureTable(e,t,r,i),o=[];if(a){for(var s=void 0,u=a.lookupListIndexes,l=this.font.tables[this.tableName].lookups,c=0;c<u.length;c++)s=l[u[c]],s.lookupType===n&&o.push(s);if(0===o.length&&i){s={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};var f=l.length;return l.push(s),u.push(f),[s]}}return o},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,n=0;n<r.length;n++)for(var i=r[n],a=i.start,o=i.end,s=a;s<=o;s++)t.push(s);return t}},t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){c.default.call(this,e,"gsub")}function a(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function o(e,t,r){for(var n=e.subtables,i=0;i<n.length;i++){var a=n[i];if(a.substFormat===t)return a}if(r)return n.push(r),r}Object.defineProperty(t,"__esModule",{value:!0});var s=r(22),u=n(s),l=r(323),c=n(l);i.prototype=c.default.prototype,i.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},i.prototype.getSingle=function(e,t,r){for(var n=[],i=this.getLookupTables(t,r,e,1),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++){var u=o[s],l=this.expandCoverage(u.coverage),c=void 0;if(1===u.substFormat){var f=u.deltaGlyphId;for(c=0;c<l.length;c++){var d=l[c];n.push({sub:d,by:d+f})}}else{var h=u.substitute;for(c=0;c<l.length;c++)n.push({sub:l[c],by:h[c]})}}return n},i.prototype.getAlternates=function(e,t,r){for(var n=[],i=this.getLookupTables(t,r,e,3),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++)for(var u=o[s],l=this.expandCoverage(u.coverage),c=u.alternateSets,f=0;f<l.length;f++)n.push({sub:l[f],by:c[f]});return n},i.prototype.getLigatures=function(e,t,r){for(var n=[],i=this.getLookupTables(t,r,e,4),a=0;a<i.length;a++)for(var o=i[a].subtables,s=0;s<o.length;s++)for(var u=o[s],l=this.expandCoverage(u.coverage),c=u.ligatureSets,f=0;f<l.length;f++)for(var d=l[f],h=c[f],p=0;p<h.length;p++){var g=h[p];n.push({sub:[d].concat(g.components),by:g.ligGlyph})}return n},i.prototype.addSingle=function(e,t,r,n){var i=this.getLookupTables(r,n,e,1,!0)[0],a=o(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});u.default.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var s=t.sub,l=this.binSearch(a.coverage.glyphs,s);l<0&&(l=-1-l,a.coverage.glyphs.splice(l,0,s),a.substitute.splice(l,0,0)),a.substitute[l]=t.by},i.prototype.addAlternate=function(e,t,r,n){var i=this.getLookupTables(r,n,e,3,!0)[0],a=o(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});u.default.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var s=t.sub,l=this.binSearch(a.coverage.glyphs,s);l<0&&(l=-1-l,a.coverage.glyphs.splice(l,0,s),a.alternateSets.splice(l,0,0)),a.alternateSets[l]=t.by},i.prototype.addLigature=function(e,t,r,n){var i=this.getLookupTables(r,n,e,4,!0)[0],o=i.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=o),u.default.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var s=t.sub[0],l=t.sub.slice(1),c={ligGlyph:t.by,components:l},f=this.binSearch(o.coverage.glyphs,s);if(f>=0){for(var d=o.ligatureSets[f],h=0;h<d.length;h++)if(a(d[h].components,l))return;d.push(c)}else f=-1-f,o.coverage.glyphs.splice(f,0,s),o.ligatureSets.splice(f,0,[c])},i.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r)}},i.prototype.add=function(e,t,r,n){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,n);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,r,n):this.addAlternate(e,t,r,n);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,n)}},t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=(0,d.default)(e),n=256;for(var i in t){var a=parseInt(i);if(a&&!(a<256)){if((0,d.default)(t[i])===r)return a;n<=a&&(n=a+1)}}return t[n]=e,n}function a(e,t,r){var n=i(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:n}]}function o(e,t,r){var n={},i=new m.default.Parser(e,t);return n.tag=i.parseTag(),n.minValue=i.parseFixed(),n.defaultValue=i.parseFixed(),n.maxValue=i.parseFixed(),i.skip("uShort",1),n.name=r[i.parseUShort()]||{},n}function s(e,t,r,n){for(var a=i(t.name,n),o=[{name:"nameID_"+e,type:"USHORT",value:a},{name:"flags_"+e,type:"USHORT",value:0}],s=0;s<r.length;++s){var u=r[s].tag;o.push({name:"axis_"+e+" "+u,type:"FIXED",value:t.coordinates[u]<<16})}return o}function u(e,t,r,n){var i={},a=new m.default.Parser(e,t);i.name=n[a.parseUShort()]||{},a.skip("uShort",1),i.coordinates={};for(var o=0;o<r.length;++o)i.coordinates[r[o].tag]=a.parseFixed();return i}function l(e,t){var r=new y.default.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(var n=0;n<e.axes.length;n++)r.fields=r.fields.concat(a(n,e.axes[n],t));for(var i=0;i<e.instances.length;i++)r.fields=r.fields.concat(s(i,e.instances[i],e.axes,t));return r}function c(e,t,r){var n=new m.default.Parser(e,t),i=n.parseULong();p.default.argument(65536===i,"Unsupported fvar table version.");var a=n.parseOffset16();n.skip("uShort",1);for(var s=n.parseUShort(),l=n.parseUShort(),c=n.parseUShort(),f=n.parseUShort(),d=[],h=0;h<s;h++)d.push(o(e,t+a+h*l,r));for(var g=[],v=t+a+s*l,y=0;y<c;y++)g.push(u(e,v+y*f,d,r));return{axes:d,instances:g}}Object.defineProperty(t,"__esModule",{value:!0});var f=r(47),d=n(f),h=r(22),p=n(h),g=r(17),m=n(g),v=r(28),y=n(v);t.default={make:l,parse:c}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=new h.default.Parser(e,t),n=r.parseUShort(),i=[],a=0;a<n;a++)i[r.parseTag()]={offset:r.parseUShort()};return i}function a(e,t){var r=new h.default.Parser(e,t),n=r.parseUShort(),i=r.parseUShort();if(1===n)return r.parseUShortList(i);if(2===n){for(var a=[];i--;)for(var o=r.parseUShort(),s=r.parseUShort(),u=r.parseUShort(),l=o;l<=s;l++)a[u++]=l;return a}}function o(e,t){var r=new h.default.Parser(e,t),n=r.parseUShort();if(1===n){var i=r.parseUShort(),a=r.parseUShort(),o=r.parseUShortList(a);return function(e){return o[e-i]||0}}if(2===n){for(var s=r.parseUShort(),u=[],l=[],c=[],f=0;f<s;f++)u[f]=r.parseUShort(),l[f]=r.parseUShort(),c[f]=r.parseUShort();return function(e){for(var t=0,r=u.length-1;t<r;){var n=t+r+1>>1;e<u[n]?r=n-1:t=n}return u[t]<=e&&e<=l[t]?c[t]||0:0}}}function s(e,t){var r=new h.default.Parser(e,t),n=r.parseUShort(),i=r.parseUShort(),s=a(e,t+i),u=r.parseUShort(),l=r.parseUShort(),c=void 0;if(4===u&&0===l){var f={};if(1===n){for(var d=r.parseUShort(),p=[],g=r.parseOffset16List(d),m=0;m<d;m++){var v=g[m],y=f[v];if(!y){y={},r.relativeOffset=v;for(var M=r.parseUShort();M--;){var w=r.parseUShort();u&&(c=r.parseShort()),l&&r.parseShort(),y[w]=c}}p[s[m]]=y}return function(e,t){var r=p[e];if(r)return r[t]}}if(2===n){for(var x=r.parseUShort(),b=r.parseUShort(),T=r.parseUShort(),S=r.parseUShort(),_=o(e,t+x),E=o(e,t+b),A=[],I=0;I<T;I++)for(var D=A[I]=[],L=0;L<S;L++)u&&(c=r.parseShort()),l&&r.parseShort(),D[L]=c;for(var N={},C=0;C<s.length;C++)N[s[C]]=1;return function(e,t){if(N[e]){var r=_(e),n=E(t),i=A[r];return i?i[n]:void 0}}}}}function u(e,t){var r=new h.default.Parser(e,t),n=r.parseUShort(),i=r.parseUShort(),a=16&i,o=r.parseUShort(),u=r.parseOffset16List(o),l={lookupType:n,lookupFlag:i,markFilteringSet:a?r.parseUShort():-1};if(2===n){for(var c=[],f=0;f<o;f++){var d=s(e,t+u[f]);d&&c.push(d)}l.getKerningValue=function(e,t){for(var r=c.length;r--;){var n=c[r](e,t);if(void 0!==n)return n}return 0}}return l}function l(e,t,r){var n=new h.default.Parser(e,t),a=n.parseFixed();f.default.argument(1===a,"Unsupported GPOS table version."),i(e,t+n.parseUShort()),i(e,t+n.parseUShort());var o=n.parseUShort();n.relativeOffset=o;for(var s=n.parseUShort(),l=n.parseOffset16List(s),c=t+o,d=0;d<s;d++){var p=u(e,c+l[d]);2!==p.lookupType||r.getGposKerningValue||(r.getGposKerningValue=p.getKerningValue)}}Object.defineProperty(t,"__esModule",{value:!0});var c=r(22),f=n(c),d=r(17),h=n(d);t.default={parse:l}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={};e.skip("uShort");var r=e.parseUShort();u.default.argument(0===r,"Unsupported kern sub-table version."),e.skip("uShort",2);var n=e.parseUShort();e.skip("uShort",3);for(var i=0;i<n;i+=1){var a=e.parseUShort(),o=e.parseUShort(),s=e.parseShort();t[a+","+o]=s}return t}function a(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var r=e.parseUShort(),n=255&r;if(e.skip("uShort"),0===n){var i=e.parseUShort();e.skip("uShort",3);for(var a=0;a<i;a+=1){var o=e.parseUShort(),s=e.parseUShort(),u=e.parseShort();t[o+","+s]=u}}return t}function o(e,t){var r=new c.default.Parser(e,t),n=r.parseUShort();if(0===n)return i(r);if(1===n)return a(r);throw new Error("Unsupported kern table version ("+n+").")}Object.defineProperty(t,"__esModule",{value:!0});var s=r(22),u=n(s),l=r(17),c=n(l);t.default={parse:o}},function(e,t,r){"use strict";function n(e,t,r,n){for(var i=new a.default.Parser(e,t),o=n?i.parseUShort:i.parseULong,s=[],u=0;u<r+1;u+=1){var l=o.call(i);n&&(l*=2),s.push(l)}return s}Object.defineProperty(t,"__esModule",{value:!0});var i=r(17),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default={parse:n}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return Math.log(e)/Math.log(2)|0}function a(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%=Math.pow(2,32)}function o(e,t,r,n){return new m.default.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function s(e){var t=new m.default.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,i(t.numTables));t.searchRange=16*r,t.entrySelector=i(r),t.rangeShift=16*t.numTables-t.searchRange;for(var n=[],s=[],u=t.sizeOf()+o().sizeOf()*t.numTables;u%4!=0;)u+=1,s.push({name:"padding",type:"BYTE",value:0});for(var l=0;l<e.length;l+=1){var c=e[l];p.default.argument(4===c.tableName.length,"Table name"+c.tableName+" is invalid.");var f=c.sizeOf(),d=o(c.tableName,a(c.encode()),u,f);for(n.push({name:d.tag+" Table Record",type:"RECORD",value:d}),s.push({name:c.tableName+" table",type:"RECORD",value:c}),u+=f,p.default.argument(!isNaN(u),"Something went wrong calculating the offset.");u%4!=0;)u+=1,s.push({name:"padding",type:"BYTE",value:0})}return n.sort(function(e,t){return e.value.tag>t.value.tag?1:-1}),t.fields=t.fields.concat(n),t.fields=t.fields.concat(s),t}function u(e,t,r){for(var n=0;n<t.length;n+=1){var i=e.charToGlyphIndex(t[n]);if(i>0){return e.glyphs.get(i).getMetrics()}}return r}function l(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}function c(e){for(var t=[],r=[],n=[],i=[],o=[],c=[],f=[],h=void 0,p=0,g=0,m=0,v=0,M=0,x=0;x<e.glyphs.length;x+=1){var T=e.glyphs.get(x),_=0|T.unicode;if(isNaN(T.advanceWidth))throw new Error("Glyph "+T.name+" ("+x+"): advanceWidth is not a number.");(h>_||void 0===h)&&_>0&&(h=_),p<_&&(p=_);var A=R.default.getUnicodeRange(_);if(A<32)g|=1<<A;else if(A<64)m|=1<<A-32;else if(A<96)v|=1<<A-64;else{if(!(A<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");M|=1<<A-96}if(".notdef"!==T.name){var D=T.getMetrics();t.push(D.xMin),r.push(D.yMin),n.push(D.xMax),i.push(D.yMax),c.push(D.leftSideBearing),f.push(D.rightSideBearing),o.push(T.advanceWidth)}}var N={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,n),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:l(o),minLeftSideBearing:Math.min.apply(null,c),maxLeftSideBearing:Math.max.apply(null,c),minRightSideBearing:Math.min.apply(null,f)};N.ascender=e.ascender,N.descender=e.descender;var O=b.default.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:N.xMin,yMin:N.yMin,xMax:N.xMax,yMax:N.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),P=S.default.make({ascender:N.ascender,descender:N.descender,advanceWidthMax:N.advanceWidthMax,minLeftSideBearing:N.minLeftSideBearing,minRightSideBearing:N.minRightSideBearing,xMaxExtent:N.maxLeftSideBearing+(N.xMax-N.xMin),numberOfHMetrics:e.glyphs.length}),j=L.default.make(e.glyphs.length),B=R.default.make({xAvgCharWidth:Math.round(N.advanceWidthAvg),usWeightClass:e.tables.os2.usWeightClass,usWidthClass:e.tables.os2.usWidthClass,usFirstCharIndex:h,usLastCharIndex:p,ulUnicodeRange1:g,ulUnicodeRange2:m,ulUnicodeRange3:v,ulUnicodeRange4:M,fsSelection:e.tables.os2.fsSelection,sTypoAscender:N.ascender,sTypoDescender:N.descender,sTypoLineGap:0,usWinAscent:N.yMax,usWinDescent:Math.abs(N.yMin),ulCodePageRange1:1,sxHeight:u(e,"xyvw",{yMax:Math.round(N.ascender/2)}).yMax,sCapHeight:u(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",N).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0}),k=E.default.make(e.glyphs),F=y.default.make(e.glyphs),G=e.getEnglishName("fontFamily"),H=e.getEnglishName("fontSubfamily"),W=G+" "+H,Y=e.getEnglishName("postScriptName");Y||(Y=G.replace(/\s/g,"")+"-"+H);var Q={};for(var q in e.names)Q[q]=e.names[q];Q.uniqueID||(Q.uniqueID={en:e.getEnglishName("manufacturer")+":"+W}),Q.postScriptName||(Q.postScriptName={en:Y}),Q.preferredFamily||(Q.preferredFamily=e.names.fontFamily),Q.preferredSubfamily||(Q.preferredSubfamily=e.names.fontSubfamily);var X=[],Z=C.default.make(Q,X),K=X.length>0?I.default.make(X):void 0,J=z.default.make(),$=w.default.make(e.glyphs,{version:e.getEnglishName("version"),fullName:W,familyName:G,weightName:H,postScriptName:Y,unitsPerEm:e.unitsPerEm,fontBBox:[0,N.yMin,N.ascender,N.advanceWidthMax]}),ee=e.metas&&(0,d.default)(e.metas).length>0?V.default.make(e.metas):void 0,te=[O,P,j,B,Z,F,J,$,k];K&&te.push(K),e.tables.gsub&&te.push(U.default.make(e.tables.gsub)),ee&&te.push(ee);for(var re=s(te),ne=re.encode(),ie=a(ne),ae=re.fields,oe=!1,se=0;se<ae.length;se+=1)if("head table"===ae[se].name){ae[se].value.checkSumAdjustment=2981146554-ie,oe=!0;break}if(!oe)throw new Error("Could not find head table with checkSum to adjust.");return re}Object.defineProperty(t,"__esModule",{value:!0});var f=r(4),d=n(f),h=r(22),p=n(h),g=r(28),m=n(g),v=r(212),y=n(v),M=r(211),w=n(M),x=r(215),b=n(x),T=r(216),S=n(T),_=r(217),E=n(_),A=r(218),I=n(A),D=r(219),L=n(D),N=r(221),C=n(N),O=r(222),R=n(O),P=r(223),z=n(P),j=r(214),U=n(j),B=r(220),V=n(B);t.default={make:s,fontToTable:c,computeCheckSum:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i,a,o,s=r(260),u=n(s),l=r(129),c=n(l),f=r(166),d=n(f),h=r(4),p=n(h),g=r(47),m=n(g),v=r(261),y=n(v),M=r(48),w=n(M),x=r(2),b=n(x),T=r(165),S=n(T),_=r(259),E=n(_),A=r(38),I=n(A);!function(r,n){"object"===(0,I.default)(t)&&void 0!==e?n(t):(a=[t],i=n,void 0!==(o="function"==typeof i?i.apply(t,a):i)&&(e.exports=o))}(0,function(e){function t(){}function r(e,t){this.x=e||0,this.y=t||0}function n(e,t,i,a,o,s,u,l,c,f){Object.defineProperty(this,"id",{value:vs++}),this.uuid=ms.generateUUID(),this.name="",this.image=void 0!==e?e:n.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:n.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:vo,this.wrapT=void 0!==a?a:vo,this.magFilter=void 0!==o?o:bo,this.minFilter=void 0!==s?s:So,this.anisotropy=void 0!==c?c:1,this.format=void 0!==u?u:Bo,this.type=void 0!==l?l:_o,this.offset=new r(0,0),this.repeat=new r(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:as,this.version=0,this.onUpdate=null}function i(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function a(e,t,r){this.uuid=ms.generateUUID(),this.width=e,this.height=t,this.scissor=new i(0,0,e,t),this.scissorTest=!1,this.viewport=new i(0,0,e,t),r=r||{},void 0===r.minFilter&&(r.minFilter=bo),this.texture=new n(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null,this.texture.name=void 0!==r.name?r.name:""}function o(e,t,r){a.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function s(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}function l(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function f(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(e,t,r,i,a,o,s,u,l,c){e=void 0!==e?e:[],t=void 0!==t?t:uo,n.call(this,e,t,r,i,a,o,s,u,l,c),this.flipY=!1}function g(){this.seq=[],this.map={}}function v(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,a=ws[i];if(void 0===a&&(a=new Float32Array(i),ws[i]=a),0!==t){n.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=r,e[o].toArray(a,s)}return a}function M(e,t){var r=xs[t];void 0===r&&(r=new Int32Array(t),xs[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocTextureUnit();return r}function x(e,t){e.uniform1f(this.addr,t)}function T(e,t){e.uniform1i(this.addr,t)}function _(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function A(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function D(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function L(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function N(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function C(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function O(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTexture2D(t||ys,n)}function R(e,t,r){var n=r.allocTextureUnit();e.uniform1i(this.addr,n),r.setTextureCube(t||Ms,n)}function P(e,t){e.uniform2iv(this.addr,t)}function z(e,t){e.uniform3iv(this.addr,t)}function j(e,t){e.uniform4iv(this.addr,t)}function U(e){switch(e){case 5126:return x;case 35664:return _;case 35665:return A;case 35666:return D;case 35674:return L;case 35675:return N;case 35676:return C;case 35678:return O;case 35680:return R;case 5124:case 35670:return T;case 35667:case 35671:return P;case 35668:case 35672:return z;case 35669:case 35673:return j}}function B(e,t){e.uniform1fv(this.addr,t)}function V(e,t){e.uniform1iv(this.addr,t)}function k(e,t){e.uniform2fv(this.addr,v(t,this.size,2))}function F(e,t){e.uniform3fv(this.addr,v(t,this.size,3))}function G(e,t){e.uniform4fv(this.addr,v(t,this.size,4))}function H(e,t){e.uniformMatrix2fv(this.addr,!1,v(t,this.size,4))}function W(e,t){e.uniformMatrix3fv(this.addr,!1,v(t,this.size,9))}function Y(e,t){e.uniformMatrix4fv(this.addr,!1,v(t,this.size,16))}function Q(e,t,r){var n=t.length,i=M(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTexture2D(t[a]||ys,i[a])}function q(e,t,r){var n=t.length,i=M(r,n);e.uniform1iv(this.addr,i);for(var a=0;a!==n;++a)r.setTextureCube(t[a]||Ms,i[a])}function X(e){switch(e){case 5126:return B;case 35664:return k;case 35665:return F;case 35666:return G;case 35674:return H;case 35675:return W;case 35676:return Y;case 35678:return Q;case 35680:return q;case 5124:case 35670:return V;case 35667:case 35671:return P;case 35668:case 35672:return z;case 35669:case 35673:return j}}function Z(e,t,r){this.id=e,this.addr=r,this.setValue=U(t.type)}function K(e,t,r){this.id=e,this.addr=r,this.size=t.size,this.setValue=X(t.type)}function J(e){this.id=e,g.call(this)}function $(e,t){e.seq.push(t),e.map[t.id]=t}function ee(e,t,r){var n=e.name,i=n.length;for(bs.lastIndex=0;;){var a=bs.exec(n),o=bs.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){$(r,void 0===l?new Z(s,e,t):new K(s,e,t));break}var c=r.map,f=c[s];void 0===f&&(f=new J(s),$(r,f)),r=f}}function te(e,t,r){g.call(this),this.renderer=r;for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i!==n;++i){var a=e.getActiveUniform(t,i),o=a.name;ee(a,e.getUniformLocation(t,o),this)}}function re(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function ne(e,t,r,i,a,o,s,u,l,c,f,d){n.call(this,null,o,s,u,l,c,i,a,f,d),this.image={data:e,width:t,height:r},this.magFilter=void 0!==l?l:Mo,this.minFilter=void 0!==c?c:Mo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function ie(e,t){this.min=void 0!==e?e:new r(1/0,1/0),this.max=void 0!==t?t:new r(-1/0,-1/0)}function ae(e,t){function n(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);a=p.createBuffer(),o=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,a),p.bufferData(p.ARRAY_BUFFER,e,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),p.bufferData(p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),d=p.createTexture(),h=p.createTexture(),g.bindTexture(p.TEXTURE_2D,d),p.texImage2D(p.TEXTURE_2D,0,p.RGB,16,16,0,p.RGB,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),g.bindTexture(p.TEXTURE_2D,h),p.texImage2D(p.TEXTURE_2D,0,p.RGBA,16,16,0,p.RGBA,p.UNSIGNED_BYTE,null),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},u=i(s),c={vertex:p.getAttribLocation(u,"position"),uv:p.getAttribLocation(u,"uv")},f={renderType:p.getUniformLocation(u,"renderType"),map:p.getUniformLocation(u,"map"),occlusionMap:p.getUniformLocation(u,"occlusionMap"),opacity:p.getUniformLocation(u,"opacity"),color:p.getUniformLocation(u,"color"),scale:p.getUniformLocation(u,"scale"),rotation:p.getUniformLocation(u,"rotation"),screenPosition:p.getUniformLocation(u,"screenPosition")}}function i(t){var r=p.createProgram(),n=p.createShader(p.FRAGMENT_SHADER),i=p.createShader(p.VERTEX_SHADER),a="precision "+e.getPrecision()+" float;\n";return p.shaderSource(n,a+t.fragmentShader),p.shaderSource(i,a+t.vertexShader),p.compileShader(n),p.compileShader(i),p.attachShader(r,n),p.attachShader(r,i),p.linkProgram(r),r}var a,o,s,u,c,f,d,h,p=e.context,g=e.state;this.render=function(i,s,m){if(0!==t.length){var v=new l,y=m.w/m.z,M=.5*m.z,w=.5*m.w,x=16/m.w,b=new r(x*y,x),T=new l(1,1,0),S=new r(1,1),_=new ie;_.min.set(m.x,m.y),_.max.set(m.x+(m.z-16),m.y+(m.w-16)),void 0===u&&n(),p.useProgram(u),g.initAttributes(),g.enableAttribute(c.vertex),g.enableAttribute(c.uv),g.disableUnusedAttributes(),p.uniform1i(f.occlusionMap,0),p.uniform1i(f.map,1),p.bindBuffer(p.ARRAY_BUFFER,a),p.vertexAttribPointer(c.vertex,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(c.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,o),g.disable(p.CULL_FACE),g.setDepthWrite(!1);for(var E=0,A=t.length;E<A;E++){x=16/m.w,b.set(x*y,x);var I=t[E];if(v.set(I.matrixWorld.elements[12],I.matrixWorld.elements[13],I.matrixWorld.elements[14]),v.applyMatrix4(s.matrixWorldInverse),v.applyMatrix4(s.projectionMatrix),T.copy(v),S.x=m.x+T.x*M+M-8,S.y=m.y+T.y*w+w-8,!0===_.containsPoint(S)){g.activeTexture(p.TEXTURE0),g.bindTexture(p.TEXTURE_2D,null),g.activeTexture(p.TEXTURE1),g.bindTexture(p.TEXTURE_2D,d),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGB,S.x,S.y,16,16,0),p.uniform1i(f.renderType,0),p.uniform2f(f.scale,b.x,b.y),p.uniform3f(f.screenPosition,T.x,T.y,T.z),g.disable(p.BLEND),g.enable(p.DEPTH_TEST),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),g.activeTexture(p.TEXTURE0),g.bindTexture(p.TEXTURE_2D,h),p.copyTexImage2D(p.TEXTURE_2D,0,p.RGBA,S.x,S.y,16,16,0),p.uniform1i(f.renderType,1),g.disable(p.DEPTH_TEST),g.activeTexture(p.TEXTURE1),g.bindTexture(p.TEXTURE_2D,d),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0),I.positionScreen.copy(T),I.customUpdateCallback?I.customUpdateCallback(I):I.updateLensFlares(),p.uniform1i(f.renderType,2),g.enable(p.BLEND);for(var D=0,L=I.lensFlares.length;D<L;D++){var N=I.lensFlares[D];N.opacity>.001&&N.scale>.001&&(T.x=N.x,T.y=N.y,T.z=N.z,x=N.size*N.scale/m.w,b.x=x*y,b.y=x,p.uniform3f(f.screenPosition,T.x,T.y,T.z),p.uniform2f(f.scale,b.x,b.y),p.uniform1f(f.rotation,N.rotation),p.uniform1f(f.opacity,N.opacity),p.uniform3f(f.color,N.color.r,N.color.g,N.color.b),g.setBlending(N.blending,N.blendEquation,N.blendSrc,N.blendDst),e.setTexture2D(N.texture,1),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0))}}}g.enable(p.CULL_FACE),g.enable(p.DEPTH_TEST),g.setDepthWrite(!0),e.resetGLState()}}}function oe(e,t){function r(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);o=p.createBuffer(),u=p.createBuffer(),p.bindBuffer(p.ARRAY_BUFFER,o),p.bufferData(p.ARRAY_BUFFER,e,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),p.bufferData(p.ELEMENT_ARRAY_BUFFER,t,p.STATIC_DRAW),c=i(),f={position:p.getAttribLocation(c,"position"),uv:p.getAttribLocation(c,"uv")},d={uvOffset:p.getUniformLocation(c,"uvOffset"),uvScale:p.getUniformLocation(c,"uvScale"),rotation:p.getUniformLocation(c,"rotation"),scale:p.getUniformLocation(c,"scale"),color:p.getUniformLocation(c,"color"),map:p.getUniformLocation(c,"map"),opacity:p.getUniformLocation(c,"opacity"),modelViewMatrix:p.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:p.getUniformLocation(c,"projectionMatrix"),fogType:p.getUniformLocation(c,"fogType"),fogDensity:p.getUniformLocation(c,"fogDensity"),fogNear:p.getUniformLocation(c,"fogNear"),fogFar:p.getUniformLocation(c,"fogFar"),fogColor:p.getUniformLocation(c,"fogColor"),alphaTest:p.getUniformLocation(c,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var a=r.getContext("2d");a.fillStyle="white",a.fillRect(0,0,8,8),h=new n(r),h.needsUpdate=!0}function i(){var t=p.createProgram(),r=p.createShader(p.VERTEX_SHADER),n=p.createShader(p.FRAGMENT_SHADER);return p.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),p.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),p.compileShader(r),p.compileShader(n),p.attachShader(t,r),p.attachShader(t,n),p.linkProgram(t),t}function a(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var o,u,c,f,d,h,p=e.context,g=e.state,m=new l,v=new s,y=new l;this.render=function(n,i){if(0!==t.length){void 0===c&&r(),p.useProgram(c),g.initAttributes(),g.enableAttribute(f.position),g.enableAttribute(f.uv),g.disableUnusedAttributes(),g.disable(p.CULL_FACE),g.enable(p.BLEND),p.bindBuffer(p.ARRAY_BUFFER,o),p.vertexAttribPointer(f.position,2,p.FLOAT,!1,16,0),p.vertexAttribPointer(f.uv,2,p.FLOAT,!1,16,8),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),p.uniformMatrix4fv(d.projectionMatrix,!1,i.projectionMatrix.elements),g.activeTexture(p.TEXTURE0),p.uniform1i(d.map,0);var s=0,l=0,M=n.fog;M?(p.uniform3f(d.fogColor,M.color.r,M.color.g,M.color.b),M.isFog?(p.uniform1f(d.fogNear,M.near),p.uniform1f(d.fogFar,M.far),p.uniform1i(d.fogType,1),s=1,l=1):M.isFogExp2&&(p.uniform1f(d.fogDensity,M.density),p.uniform1i(d.fogType,2),s=2,l=2)):(p.uniform1i(d.fogType,0),s=0,l=0);for(var w=0,x=t.length;w<x;w++){var b=t[w];b.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,b.matrixWorld),b.z=-b.modelViewMatrix.elements[14]}t.sort(a);for(var T=[],w=0,x=t.length;w<x;w++){var b=t[w],S=b.material;if(!1!==S.visible){p.uniform1f(d.alphaTest,S.alphaTest),p.uniformMatrix4fv(d.modelViewMatrix,!1,b.modelViewMatrix.elements),b.matrixWorld.decompose(m,v,y),T[0]=y.x,T[1]=y.y;var _=0;n.fog&&S.fog&&(_=l),s!==_&&(p.uniform1i(d.fogType,_),s=_),null!==S.map?(p.uniform2f(d.uvOffset,S.map.offset.x,S.map.offset.y),p.uniform2f(d.uvScale,S.map.repeat.x,S.map.repeat.y)):(p.uniform2f(d.uvOffset,0,0),p.uniform2f(d.uvScale,1,1)),p.uniform1f(d.opacity,S.opacity),p.uniform3f(d.color,S.color.r,S.color.g,S.color.b),p.uniform1f(d.rotation,S.rotation),p.uniform2fv(d.scale,T),g.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst),g.setDepthTest(S.depthTest),g.setDepthWrite(S.depthWrite),S.map?e.setTexture2D(S.map,0):e.setTexture2D(h,0),p.drawElements(p.TRIANGLES,6,p.UNSIGNED_SHORT,0)}}g.enable(p.CULL_FACE),e.resetGLState()}}}function se(){Object.defineProperty(this,"id",{value:Is++}),this.uuid=ms.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=_a,this.side=ma,this.shading=wa,this.vertexColors=xa,this.opacity=1,this.transparent=!1,this.blendSrc=Ba,this.blendDst=Va,this.blendEquation=La,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Xa,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0,this.version=0}function ue(e){se.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function le(e){se.call(this),this.type="MeshDepthMaterial",this.depthPacking=ds,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clearColor=new re(1,1,1),this.clearAlpha=1,this.setValues(e)}function ce(e,t){this.min=void 0!==e?e:new l(1/0,1/0,1/0),this.max=void 0!==t?t:new l(-1/0,-1/0,-1/0)}function fe(e,t){this.center=void 0!==e?e:new l,this.radius=void 0!==t?t:0}function de(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function he(e,t){this.normal=void 0!==e?e:new l(1,0,0),this.constant=void 0!==t?t:0}function pe(e,t,r,n,i,a){this.planes=[void 0!==e?e:new he,void 0!==t?t:new he,void 0!==r?r:new he,void 0!==n?n:new he,void 0!==i?i:new he,void 0!==a?a:new he]}function ge(e,t,n,o){function s(t,r,n,i){var a=t.geometry,o=null,s=S,u=t.customDepthMaterial;if(n&&(s=_,u=t.customDistanceMaterial),u)o=u;else{var l=!1;r.morphTargets&&(a&&a.isBufferGeometry?l=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(l=a.morphTargets&&a.morphTargets.length>0));var c=t.isSkinnedMesh&&r.skinning,f=0;l&&(f|=x),c&&(f|=b),o=s[f]}if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var d=o.uuid,h=r.uuid,p=E[d];void 0===p&&(p={},E[d]=p);var g=p[h];void 0===g&&(g=o.clone(),p[h]=g),o=g}o.visible=r.visible,o.wireframe=r.wireframe;var m=r.side;return U.renderSingleSided&&m==ya&&(m=ma),U.renderReverseSided&&(m===ma?m=va:m===va&&(m=ma)),o.side=m,o.clipShadows=r.clipShadows,o.clippingPlanes=r.clippingPlanes,o.wireframeLinewidth=r.wireframeLinewidth,o.linewidth=r.linewidth,n&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(i),o}function u(e,t,r){if(!1!==e.visible){if(0!=(e.layers.mask&t.layers.mask)&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(!1===e.frustumCulled||!0===h.intersectsObject(e))){!0===e.material.visible&&(e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),w.push(e))}for(var n=e.children,i=0,a=n.length;i<a;i++)u(n[i],t,r)}}var c=e.context,d=e.state,h=new pe,p=new f,g=t.shadows,m=new r,v=new r(o.maxTextureSize,o.maxTextureSize),y=new l,M=new l,w=[],x=1,b=2,T=1+(x|b),S=new Array(T),_=new Array(T),E={},A=[new l(1,0,0),new l(-1,0,0),new l(0,0,1),new l(0,0,-1),new l(0,1,0),new l(0,-1,0)],I=[new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,1,0),new l(0,0,1),new l(0,0,-1)],D=[new i,new i,new i,new i,new i,new i],L=new le;L.depthPacking=hs,L.clipping=!0;for(var N=As.distanceRGBA,C=Ts.clone(N.uniforms),O=0;O!==T;++O){var R=0!=(O&x),P=0!=(O&b),z=L.clone();z.morphTargets=R,z.skinning=P,S[O]=z;var j=new ue({defines:{USE_SHADOWMAP:""},uniforms:C,vertexShader:N.vertexShader,fragmentShader:N.fragmentShader,morphTargets:R,skinning:P,clipping:!0});_[O]=j}var U=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ha,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,r){if(!1!==U.enabled&&(!1!==U.autoUpdate||!1!==U.needsUpdate)&&0!==g.length){d.buffers.color.setClear(1,1,1,1),d.disable(c.BLEND),d.setDepthTest(!0),d.setScissorTest(!1);for(var i,o,l=0,f=g.length;l<f;l++){var x=g[l],b=x.shadow;if(void 0!==b){var T=b.camera;if(m.copy(b.mapSize),m.min(v),x&&x.isPointLight){i=6,o=!0;var S=m.x,_=m.y;D[0].set(2*S,_,S,_),D[1].set(0,_,S,_),D[2].set(3*S,_,S,_),D[3].set(S,_,S,_),D[4].set(3*S,0,S,_),D[5].set(S,0,S,_),m.x*=4,m.y*=2}else i=1,o=!1;if(null===b.map){var E={minFilter:Mo,magFilter:Mo,format:Bo,name:x.name+".shadowMap"};b.map=new a(m.x,m.y,E),T.updateProjectionMatrix()}(b.isSpotLightShadow||b.isDirectionalLightShadow)&&b.update(x),b&&b.isRectAreaLightShadow&&b.update(x);var L=b.map,N=b.matrix;M.setFromMatrixPosition(x.matrixWorld),T.position.copy(b.virtualPosition?b.virtualPosition:M),e.setRenderTarget(L),e.clear();for(var C=0;C<i;C++){if(o){y.copy(T.position),y.add(A[C]),T.up.copy(I[C]),T.lookAt(y);var O=D[C];d.viewport(O)}else y.setFromMatrixPosition(x.target.matrixWorld),T.lookAt(y);if(b.virtualPosition){var R=T.position.clone().sub(M);y.add(R),T.lookAt(y)}T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),N.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),N.multiply(T.projectionMatrix),N.multiply(T.matrixWorldInverse),p.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),h.setFromMatrix(p),w.length=0,u(t,r,T);for(var P=0,z=w.length;P<z;P++){var j=w[P],B=n.update(j),V=j.material;if(V&&V.isMultiMaterial)for(var k=B.groups,F=V.materials,G=0,H=k.length;G<H;G++){var W=k[G],Y=F[W.materialIndex];if(!0===Y.visible){var Q=s(j,Y,o,M);e.renderBufferDirect(T,null,B,Q,j,W)}}else{var Q=s(j,V,o,M);e.renderBufferDirect(T,null,B,Q,j,null)}}}}else console.warn("THREE.WebGLShadowMap:",x,"has no shadow.")}var q=e.getClearColor(),X=e.getClearAlpha();e.setClearColor(q,X),U.needsUpdate=!1}}}function me(e,t){this.origin=void 0!==e?e:new l,this.direction=void 0!==t?t:new l}function ve(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||ve.DefaultOrder}function ye(){this.mask=1}function Me(){function e(){i.setFromEuler(n,!1)}function t(){n.setFromQuaternion(i,void 0,!1)}Object.defineProperty(this,"id",{value:Ds++}),this.uuid=ms.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Me.DefaultUp.clone();var r=new l,n=new ve,i=new s,a=new l(1,1,1),o=new l;n.onChange(e),i.onChange(t),(0,y.default)(this,{position:{enumerable:!0,value:r},rotation:{enumerable:!0,value:n},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:a},shear:{enumerable:!0,value:o},modelViewMatrix:{value:new f},normalMatrix:{value:new de}}),this.matrix=new f,this.matrixWorld=new f,this.matrixWorldInverse=new f,this.matrixAutoUpdate=Me.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ye,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function we(e,t){this.start=void 0!==e?e:new l,this.end=void 0!==t?t:new l}function xe(e,t,r){this.a=void 0!==e?e:new l,this.b=void 0!==t?t:new l,this.c=void 0!==r?r:new l}function be(e,t,r,n,i,a){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new l,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new re,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}function Te(e){se.call(this),this.type="MeshBasicMaterial",this.color=new re(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Se(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=ms.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function _e(e,t){Se.call(this,new Int8Array(e),t)}function Ee(e,t){Se.call(this,new Uint8Array(e),t)}function Ae(e,t){Se.call(this,new Uint8ClampedArray(e),t)}function Ie(e,t){Se.call(this,new Int16Array(e),t)}function De(e,t){Se.call(this,new Uint16Array(e),t)}function Le(e,t){Se.call(this,new Int32Array(e),t)}function Ne(e,t){Se.call(this,new Uint32Array(e),t)}function Ce(e,t){Se.call(this,new Float32Array(e),t)}function Oe(e,t){Se.call(this,new Float64Array(e),t)}function Re(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Pe(){return Ls++}function ze(){Object.defineProperty(this,"id",{value:Pe()}),this.uuid=ms.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function je(){Object.defineProperty(this,"id",{value:Pe()}),this.uuid=ms.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Ue(e,t){Me.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new je,this.material=void 0!==t?t:new Te({color:16777215*Math.random()}),this.drawMode=rs,this.updateMorphTargets()}function Be(e,t,r,n,i,a){function o(e,t,r,n,i,a,o,u,c,w,x){for(var b=a/c,T=o/w,S=a/2,_=o/2,E=u/2,A=c+1,I=w+1,D=0,L=0,N=new l,C=0;C<I;C++)for(var O=C*T-_,R=0;R<A;R++){var P=R*b-S;N[e]=P*n,N[t]=O*i,N[r]=E,d[g]=N.x,d[g+1]=N.y,d[g+2]=N.z,N[e]=0,N[t]=0,N[r]=u>0?1:-1,h[g]=N.x,h[g+1]=N.y,h[g+2]=N.z,p[m]=R/c,p[m+1]=1-C/w,g+=3,m+=2,D+=1}for(C=0;C<w;C++)for(R=0;R<c;R++){var z=y+R+A*C,j=y+R+A*(C+1),U=y+(R+1)+A*(C+1),B=y+(R+1)+A*C;f[v]=z,f[v+1]=j,f[v+2]=B,f[v+3]=j,f[v+4]=U,f[v+5]=B,v+=6,L+=6}s.addGroup(M,L,x),M+=L,y+=D}je.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a};var s=this;n=Math.floor(n)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var u=function(e,t,r){var n=0;return n+=(e+1)*(t+1)*2,n+=(e+1)*(r+1)*2,n+=(r+1)*(t+1)*2}(n,i,a),c=function(e,t,r){var n=0;return n+=e*t*2,n+=e*r*2,6*(n+=r*t*2)}(n,i,a),f=new(c>65535?Uint32Array:Uint16Array)(c),d=new Float32Array(3*u),h=new Float32Array(3*u),p=new Float32Array(2*u),g=0,m=0,v=0,y=0,M=0;o("z","y","x",-1,-1,r,t,e,a,i,0),o("z","y","x",1,-1,r,t,-e,a,i,1),o("x","z","y",1,1,e,r,t,n,a,2),o("x","z","y",1,-1,e,r,-t,n,a,3),o("x","y","z",1,-1,e,t,r,n,i,4),o("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(new Se(f,1)),this.addAttribute("position",new Se(d,3)),this.addAttribute("normal",new Se(h,3)),this.addAttribute("uv",new Se(p,2))}function Ve(e,t,r,n){je.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};for(var i=e/2,a=t/2,o=Math.floor(r)||1,s=Math.floor(n)||1,u=o+1,l=s+1,c=e/o,f=t/s,d=new Float32Array(u*l*3),h=new Float32Array(u*l*3),p=new Float32Array(u*l*2),g=0,m=0,v=0;v<l;v++)for(var y=v*f-a,M=0;M<u;M++){var w=M*c-i;d[g]=w,d[g+1]=-y,h[g+2]=1,p[m]=M/o,p[m+1]=1-v/s,g+=3,m+=2}g=0;for(var x=new(d.length/3>65535?Uint32Array:Uint16Array)(o*s*6),v=0;v<s;v++)for(var M=0;M<o;M++){var b=M+u*v,T=M+u*(v+1),S=M+1+u*(v+1),_=M+1+u*v;x[g]=b,x[g+1]=T,x[g+2]=_,x[g+3]=T,x[g+4]=S,x[g+5]=_,g+=6}this.setIndex(new Se(x,1)),this.addAttribute("position",new Se(d,3)),this.addAttribute("normal",new Se(h,3)),this.addAttribute("uv",new Se(p,2))}function ke(e,t,n,i){this.name=e||"unnamed",this.texture=null,this.uvChannel=t||0,this.uvTransform=n||!1,this.uvOffset=new r(0,0),this.uvRepeat=new r(1,1),this.texelTransform=n||!1,this.texelScale=1,this.texelOffset=0,this.texelInvert=!1}function Fe(){Me.call(this),this.type="Camera",this.matrixWorldInverse=new f,this.projectionMatrix=new f}function Ge(e,t,r,n){Fe.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function He(e,t,r,n,i,a){Fe.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=n,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function We(e,t,r){function n(e){s=e}function i(r){r.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(u=e.UNSIGNED_INT,l=4):r.array instanceof Uint16Array?(u=e.UNSIGNED_SHORT,l=2):(u=e.UNSIGNED_BYTE,l=1)}function a(t,n){e.drawElements(s,n,u,t*l),r.calls++,r.vertices+=n,s===e.TRIANGLES&&(r.faces+=n/3)}function o(n,i,a){var o=t.get("ANGLE_instanced_arrays");if(null===o)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");o.drawElementsInstancedANGLE(s,a,u,i*l,n.maxInstancedCount),r.calls++,r.vertices+=a*n.maxInstancedCount,s===e.TRIANGLES&&(r.faces+=n.maxInstancedCount*a/3)}var s,u,l;return{setMode:n,setIndex:i,render:a,renderInstances:o}}function Ye(e,t,r){function n(e){o=e}function i(t,n){e.drawArrays(o,t,n),r.calls++,r.vertices+=n,o===e.TRIANGLES&&(r.faces+=n/3)}function a(n){var i=t.get("ANGLE_instanced_arrays");if(null===i)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var a=n.attributes.position,s=0;a.isInterleavedBufferAttribute?(s=a.data.count,i.drawArraysInstancedANGLE(o,0,s,n.maxInstancedCount)):(s=a.count,i.drawArraysInstancedANGLE(o,0,s,n.maxInstancedCount)),r.calls++,r.vertices+=s*n.maxInstancedCount,o===e.TRIANGLES&&(r.faces+=n.maxInstancedCount*s/3)}var o;return{setMode:n,render:i,renderInstances:a}}function Qe(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new l,color:new re,shadow:!1,shadowBias:0,shadowRadius:1,shadowSpreadAngle:0,shadowMapSize:new r,shadowCameraParams:new l};break;case"SpotLight":n={position:new l,direction:new l,color:new re,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraParams:new l};break;case"PointLight":n={position:new l,color:new re,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"HemisphereLight":n={direction:new l,skyColor:new re,groundColor:new re};break;case"RectAreaLight":n={color:new re,position:new l,halfWidth:new l,halfHeight:new l}}return e[t.id]=n,n}}}function qe(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function Xe(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),!1===e.getShaderParameter(n,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile.",e.getShaderInfoLog(n),qe(r)),""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(n),qe(r)),n}function Ze(e){switch(e){case as:return["Linear","( value )"];case os:return["sRGB","( value )"];case us:return["RGBE","( value )"];case ls:return["RGBM","( value, 7.0 )"];case cs:return["RGBM","( value, 16.0 )"];case fs:return["RGBD","( value, 256.0 )"];case ss:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ke(e,t){var r=Ze(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function Je(e,t){var r=Ze(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function $e(e,t){if(!t||!t.texelTransform)return"vec4 "+e+"TexelTransform( vec4 value ) { return value; }\n";t.getFlattenedTexelTransform();return Ss.slot_texel_transform_template.replace(/\$SLOT_NAME\$/g,e)}function et(e,t,r){var n=r?"uv":"vUv";if(t&&t.uvChannel>0&&(n+=t.uvChannel+1),!t||!t.uvTransform)return"vec2 "+e+"UV() { return "+n+"; }\n";var i=(t.getFlattenedTexelTransform(),Ss.slot_uv_transform_template),a=i.replace(/\$SLOT_NAME\$/g,e);return a=a.replace(/\$UV_VAR_NAME\$/g,n)}function tt(e,t){var r;switch(t){case io:r="Linear";break;case ao:r="Reinhard";break;case oo:r="Uncharted2";break;case so:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function rt(e,t,r){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(at).join("\n")}function nt(e){var t=[];for(var r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}function it(e,t,r){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<i;a++){var o=e.getActiveAttrib(t,a),s=o.name;n[s]=e.getAttribLocation(t,s)}return n}function at(e){return""!==e}function ot(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function st(e){function t(e,t){var r=Ss[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return st(r)}var r=/#include +<([\w\d.]+)>/g;return e.replace(r,t)}function ut(e){function t(e,t,r,n){for(var i="",a=parseInt(t);a<parseInt(r);a++)i+=n.replace(/\[ i \]/g,"[ "+a+" ]");return i}var r=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(r,t)}function lt(e,t,r,n){var i=e.context,a=r.extensions,o=r.defines,s=r.__webglShader.vertexShader,u=r.__webglShader.fragmentShader,l="SHADOWMAP_TYPE_BASIC";n.shadowMapType===ha?l="SHADOWMAP_TYPE_PCF":n.shadowMapType===ga?l="SHADOWMAP_TYPE_PCSS":n.shadowMapType===pa&&(l="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(r.envMap.mapping){case uo:case lo:c="ENVMAP_TYPE_CUBE";break;case po:case go:c="ENVMAP_TYPE_CUBE_UV";break;case co:case fo:c="ENVMAP_TYPE_EQUIREC";break;case ho:c="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case lo:case fo:f="ENVMAP_MODE_REFRACTION"}switch(r.combine){case eo:d="ENVMAP_BLENDING_MULTIPLY";break;case to:d="ENVMAP_BLENDING_MIX";break;case ro:d="ENVMAP_BLENDING_ADD"}}var h,g,m=e.gammaFactor>0?e.gammaFactor:1,v=rt(a,n,e.extensions),M=nt(o),w=i.createProgram();if(r.isRawShaderMaterial)h=[M,"\n"].filter(at).join("\n"),g=[v,M,"\n"].filter(at).join("\n");else{h=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,M,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.falloffMap&&n.falloff?"#define USE_FALLOFFMAP":"",n.falloffAlphaMap&&n.falloff?"#define USE_FALLOFFALPHAMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.anisotropy?"#define ANISOTROPY":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.oit?"#define USE_OIT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef ANISOTROPY"," attribute vec4 tangent;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(at).join("\n"),g=[v,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,M,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"",n.falloff?"#define FALLOFF":"",n.falloffMap&&n.falloff?"#define USE_FALLOFFMAP":"",n.falloffAlphaMap&&n.falloff?"#define USE_FALLOFFALPHAMAP":"","#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+f:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.anisotropy?"#define ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.anisotropy&&n.anisotropyRotation?"#define ANISOTROPYROTATION":"",n.anisotropy&&n.anisotropyRotationMap?"#define USE_ANISOTROPYROTATIONMAP":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+n.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(n.numClippingPlanes-n.numClipIntersection),n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.falloffMapEncoding||n.emissiveMapEncoding?Ss.encodings_pars_fragment:"",n.mapEncoding?Ke("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?Ke("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Ke("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.falloffMapEncoding?Ke("falloffMapTexelToLinear",n.falloffMapEncoding):"",n.outputEncoding?Je("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",n.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping!==no?"#define TONE_MAPPING":"",n.toneMapping!==no?Ss.tonemapping_pars_fragment:"",n.toneMapping!==no?tt("toneMapping",n.toneMapping):"",n.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",n.oit?"#define USE_OIT":"","\n"].filter(at).join("\n");for(var x=ke.SupportedMapNames,b="",T="",S={},_=0;_<x.length;_++){var E=x[_],A=r[E+"Slot"];(r[E]||A&&A.texture)&&(A&&!S[A.uvChannel]&&(S[A.uvChannel]=!0),T+=$e(E,A),b+="uniform sampler2D "+E+";\n",b+=et(E,A,!1))}if((0,p.default)(S).length>0){var I="";I+="#define TEXTURE_SLOTS\n";for(var D in S){D=parseInt(D);var L="vUv";D>0&&(L+=""+(D+1)),I+="varying vec2 "+L+";\n"}g+=I+b}g+=T}s=st(s,n),s=ot(s,n),u=st(u,n),u=ot(u,n),r.isShaderMaterial||(s=ut(s),u=ut(u));var N=h+s,C=g+u,O=Xe(i,i.VERTEX_SHADER,N),R=Xe(i,i.FRAGMENT_SHADER,C);i.attachShader(w,O),i.attachShader(w,R),void 0!==r.index0AttributeName?i.bindAttribLocation(w,0,r.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w);var P=i.getProgramInfoLog(w),z=i.getShaderInfoLog(O),j=i.getShaderInfoLog(R),U=!0,B=!0;if(!1===i.getProgramParameter(w,i.LINK_STATUS)){U=!1;i.getExtension("WEBGL_debug_shaders")&&(console.log("**VERTEX**",N,"----------------------------------------------------------",i.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(O)),console.log("**FRAGMENT**",C,"----------------------------------------------------------",i.getExtension("WEBGL_debug_shaders").getTranslatedShaderSource(R))),console.error("THREE.WebGLProgram: shader error: ",i.getError(),"gl.VALIDATE_STATUS",i.getProgramParameter(w,i.VALIDATE_STATUS),"gl.getProgramInfoLog",P,z,j)}else""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==z&&""!==j||(B=!1);B&&(this.diagnostics={runnable:U,material:r,programLog:P,vertexShader:{log:z,prefix:h},fragmentShader:{log:j,prefix:g}}),i.deleteShader(O),i.deleteShader(R);var V;this.getUniforms=function(){return void 0===V&&(V=new te(i,w,e)),V};var k;return this.getAttributes=function(){return void 0===k&&(k=it(i,w)),k},this.destroy=function(){i.deleteProgram(w),this.program=void 0},(0,y.default)(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Os++,this.code=t,this.usedTimes=1,this.program=w,this.vertexShader=O,this.fragmentShader=R,this}function ct(e,t){function r(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var r=t.maxVertexUniforms,n=Math.floor((r-20)/4),i=n;return void 0!==e&&e&&e.isSkinnedMesh&&(i=Math.min(e.skeleton.bones.length,i))<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)"),i}function n(e,t){var r;return e?e.isTexture?r=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=as,r===as&&t&&(r=ss),r}for(var i=[],a={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshCubeMaterial:"cubeEnv",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","falloff","falloffMap","falloffAlphaMap"],s=ke.SupportedMapNames,u=0;u<s.length;u++){var l=s[u];o.push(l),o.push(l+"UVChannel"),o.push(l+"UVTransform"),o.push(l+"TexelTransform")}this.getParameters=function(i,o,s,u,l,c){var f=a[i.type],d=r(c),h=e.getPrecision();null!==i.precision&&(h=t.getMaxPrecision(i.precision))!==i.precision&&console.warn("THREE.WebGLProgram.getParameters:",i.precision,"not supported, using",h,"instead.");for(var p=e.getCurrentRenderTarget(),g={shaderID:f,precision:h,supportsVertexTextures:t.vertexTextures,outputEncoding:n(p?p.texture:null,e.gammaOutput),mapEncoding:n(i.map,e.gammaInput),envMap:!!i.envMap,envMapMode:i.envMap&&i.envMap.mapping,envMapEncoding:n(i.envMap,e.gammaInput),envMapCubeUV:!!i.envMap&&(i.envMap.mapping===po||i.envMap.mapping===go),emissiveMapEncoding:n(i.emissiveMap,e.gammaInput),falloff:i.falloff,falloffMapEncoding:n(i.falloffMap,e.gammaInput),gradientMap:!!i.gradientMap,combine:i.combine,anisotropy:void 0!==i.anisotropy&&0!==i.anisotropy||!!i.anisotropyMap,anisotropyMap:!!i.anisotropyMap,anisotropyRotation:void 0!==i.anisotropyRotation&&0!==i.anisotropyRotation||!!i.anisotropyRotationMap,anisotropyRotationMap:!!i.anisotropyRotationMap,vertexColors:i.vertexColors,fog:!!s,useFog:i.fog,fogExp:s&&s.isFogExp2,flatShading:i.shading===Ma,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:i.skinning,maxBones:d,useVertexTexture:t.floatVertexTextures&&c&&c.skeleton&&c.skeleton.useVertexTexture,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:u,numClipIntersection:l,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&o.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===ya,flipSided:i.side===va,depthPacking:void 0!==i.depthPacking&&i.depthPacking,oit:e.transparency===ps},m=ke.SupportedMapNames,v=0;v<m.length;v++){var y=m[v],M=ke.SupportedMapSlotNames[v];g[y]=!!i[y];var w=i[M];g[y+"UVChannel"]=void 0!==w?w.uvChannel:0,g[y+"UVTransform"]=void 0!==w&&w.uvTransform,g[y+"TexelTransform"]=void 0!==w&&w.texelTransform}return g},this.getProgramCode=function(e,t){var r=[];if(t.shaderID?r.push(t.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var n in e.defines)r.push(n),r.push(e.defines[n]);for(var i=0;i<o.length;i++)r.push(t[o[i]]);return r.join()},this.acquireProgram=function(t,r,n){for(var a,o=0,s=i.length;o<s;o++){var u=i[o];if(u.code===n){a=u,++a.usedTimes;break}}return void 0===a&&(a=new lt(e,n,t,r),i.push(a)),a},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function ft(e,t,r){function n(e){var i=e.target,s=u[i.id];null!==s.index&&a(s.index),o(s.attributes),i.removeEventListener("dispose",n),delete u[i.id];var l=t.get(i);l.wireframe&&a(l.wireframe),t.delete(i);var c=t.get(s);c.wireframe&&a(c.wireframe),t.delete(s),r.memory.geometries--}function i(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function a(t){var r=i(t);void 0!==r&&(e.deleteBuffer(r),s(t))}function o(e){for(var t in e)a(e[t])}function s(e){e.isInterleavedBufferAttribute?t.delete(e.data):t.delete(e)}var u={};return{get:function(e){var t=e.geometry;if(void 0!==u[t.id])return u[t.id];t.addEventListener("dispose",n);var i;return t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new je).setFromObject(e)),i=t._bufferGeometry),u[t.id]=i,r.memory.geometries++,i}}}function dt(e,t,r){function n(t){var r=c.get(t);t.geometry.isGeometry&&r.updateFromObject(t);var n=r.index,a=r.attributes;null!==n&&i(n,e.ELEMENT_ARRAY_BUFFER);for(var o in a)i(a[o],e.ARRAY_BUFFER);var s=r.morphAttributes;for(var o in s)for(var u=s[o],l=0,f=u.length;l<f;l++)i(u[l],e.ARRAY_BUFFER);return r}function i(e,r){var n=e.isInterleavedBufferAttribute?e.data:e,i=t.get(n);void 0===i.__webglBuffer?a(i,n,r):i.version!==n.version&&o(i,n,r)}function a(t,r,n){t.__webglBuffer=e.createBuffer(),e.bindBuffer(n,t.__webglBuffer);var i=r.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(n,r.array,i);var a=e.FLOAT,o=r.array;o instanceof Float32Array?a=e.FLOAT:o instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):o instanceof Uint16Array?a=e.UNSIGNED_SHORT:o instanceof Int16Array?a=e.SHORT:o instanceof Uint32Array?a=e.UNSIGNED_INT:o instanceof Int32Array?a=e.INT:o instanceof Int8Array?a=e.BYTE:o instanceof Uint8Array&&(a=e.UNSIGNED_BYTE),t.bytesPerElement=o.BYTES_PER_ELEMENT,t.type=a,t.version=r.version,r.onUploadCallback()}function o(t,r,n){e.bindBuffer(n,t.__webglBuffer),!1===r.dynamic?e.bufferData(n,r.array,e.STATIC_DRAW):-1===r.updateRange.count?e.bufferSubData(n,0,r.array):0===r.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(n,r.updateRange.offset*r.array.BYTES_PER_ELEMENT,r.array.subarray(r.updateRange.offset,r.updateRange.offset+r.updateRange.count)),r.updateRange.count=0),t.version=r.version}function s(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function u(e){return e.isInterleavedBufferAttribute?t.get(e.data):t.get(e)}function l(r){var n=t.get(r);if(void 0!==n.wireframe)return n.wireframe;var a=[],o=r.index,s=r.attributes,u=s.position;if(null!==o)for(var l=o.array,c=0,f=l.length;c<f;c+=3){var d=l[c+0],h=l[c+1],p=l[c+2];a.push(d,h,h,p,p,d)}else for(var l=s.position.array,c=0,f=l.length/3-1;c<f;c+=3){var d=c+0,h=c+1,p=c+2;a.push(d,h,h,p,p,d)}var g=u.count>65535?Uint32Array:Uint16Array,m=new Se(new g(a),1);return i(m,e.ELEMENT_ARRAY_BUFFER),n.wireframe=m,m}var c=new ft(e,t,r);return{getAttributeBuffer:s,getAttributeProperties:u,getWireframeAttribute:l,update:n}}function ht(e,t,r,n,i,a,o){function s(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=Math.floor(e.width*r),n.height=Math.floor(e.height*r);return n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e),n}return e}function u(e){return ms.isPowerOfTwo(e.width)&&ms.isPowerOfTwo(e.height)}function l(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=ms.nearestPowerOfTwo(e.width),t.height=ms.nearestPowerOfTwo(e.height);return t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function c(e){return e.wrapS!==vo||e.wrapT!==vo||e.minFilter!==Mo&&e.minFilter!==bo}function f(t){return t===Mo||t===wo||t===xo?e.NEAREST:e.LINEAR}function d(e){var t=e.target;t.removeEventListener("dispose",d),p(t),A.textures--}function h(e){var t=e.target;t.removeEventListener("dispose",h),g(t),A.textures--}function p(t){var r=n.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}n.delete(t)}function g(t){var r=n.get(t),i=n.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[a]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);n.delete(t.texture),n.delete(t)}}function m(t,i){var a=n.get(t);if(t.version>0&&a.__version!==t.version){var o=t.image;if(void 0===o)D||(console.trace("THREE.WebGLRenderer: Texture marked for update but image is undefined",t),D=!0);else{if(!1!==o.complete)return void w(a,t,i);L||(console.trace("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t),L=!0)}}r.activeTexture(e.TEXTURE0+i),r.bindTexture(e.TEXTURE_2D,a.__webglTexture)}function v(t,o){var l=n.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",d),l.__image__webglTextureCube=e.createTexture(),A.textures++),r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var c=t&&t.isCompressedTexture,f=t.image[0]&&t.image[0].isDataTexture,h=[],p=0;p<6;p++)h[p]=c||f?f?t.image[p].image:t.image[p]:s(t.image[p],i.maxCubemapSize);var g=h[0],m=u(g),v=a(t.format),y=a(t.type);M(e.TEXTURE_CUBE_MAP,t,m);for(var p=0;p<6;p++)if(c)for(var w,x=h[p].mipmaps,b=0,T=x.length;b<T;b++)w=x[b],t.format!==Bo&&t.format!==Uo?r.getCompressedTextureFormats().indexOf(v)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,b,v,w.width,w.height,0,w.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,b,v,w.width,w.height,0,v,y,w.data);else f?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,h[p].width,h[p].height,0,v,y,h[p].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,v,v,y,h[p]);t.generateMipmaps&&m&&e.generateMipmap(e.TEXTURE_CUBE_MAP),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)}function y(t,i){r.activeTexture(e.TEXTURE0+i),r.bindTexture(e.TEXTURE_CUBE_MAP,n.get(t).__webglTexture)}function M(r,o,s){var u;if(s?(e.texParameteri(r,e.TEXTURE_WRAP_S,a(o.wrapS)),e.texParameteri(r,e.TEXTURE_WRAP_T,a(o.wrapT)),e.texParameteri(r,e.TEXTURE_MAG_FILTER,a(o.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,a(o.minFilter))):(e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o.wrapS===vo&&o.wrapT===vo||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),e.texParameteri(r,e.TEXTURE_MAG_FILTER,f(o.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,f(o.minFilter)),o.minFilter!==Mo&&o.minFilter!==bo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),u=t.get("EXT_texture_filter_anisotropic")){if(o.type===No&&null===t.get("OES_texture_float_linear"))return;if(o.type===Co&&null===t.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(e.texParameterf(r,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function w(t,n,o){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",d),t.__webglTexture=e.createTexture(),A.textures++),r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment);var f=s(n.image,i.maxTextureSize);c(n)&&!1===u(f)&&(f=l(f));var h=u(f),p=a(n.format),g=a(n.type);M(e.TEXTURE_2D,n,h);var m,v=n.mipmaps;if(n.isDepthTexture){var y=e.DEPTH_COMPONENT;if(n.type===No){if(!I)throw new Error("Float Depth Texture only supported in WebGL2.0");y=e.DEPTH_COMPONENT32F}else I&&(y=e.DEPTH_COMPONENT16);n.format===Go&&y===e.DEPTH_COMPONENT&&n.type!==Io&&n.type!==Lo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Io,g=a(n.type)),n.format===Ho&&(y=e.DEPTH_STENCIL,n.type!==zo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=zo,g=a(n.type))),r.texImage2D(e.TEXTURE_2D,0,y,f.width,f.height,0,p,g,null)}else if(n.isDataTexture)if(v.length>0&&h){for(var w=0,x=v.length;w<x;w++)m=v[w],r.texImage2D(e.TEXTURE_2D,w,p,m.width,m.height,0,p,g,m.data);n.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,p,f.width,f.height,0,p,g,f.data);else if(n.isCompressedTexture)for(var w=0,x=v.length;w<x;w++)m=v[w],n.format!==Bo&&n.format!==Uo?r.getCompressedTextureFormats().indexOf(p)>-1?r.compressedTexImage2D(e.TEXTURE_2D,w,p,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,w,p,m.width,m.height,0,p,g,m.data);else if(v.length>0&&h){for(var w=0,x=v.length;w<x;w++)m=v[w],r.texImage2D(e.TEXTURE_2D,w,p,p,g,m);n.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,p,p,g,f);n.generateMipmaps&&h&&e.generateMipmap(e.TEXTURE_2D),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function x(t,i,o,s){var u=a(i.texture.format),l=a(i.texture.type);r.texImage2D(s,0,u,i.width,i.height,0,u,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,n.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function b(t,r){e.bindRenderbuffer(e.RENDERBUFFER,t),r.depthBuffer&&!r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):r.depthBuffer&&r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,r.width,r.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function T(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),m(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Go)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(r.depthTexture.format!==Ho)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}function S(t){var r=n.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");T(r.__webglFramebuffer,t)}else if(i){r.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=e.createRenderbuffer(),b(r.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),b(r.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function _(t){var i=n.get(t),a=n.get(t.texture);t.addEventListener("dispose",h),a.__webglTexture=e.createTexture(),A.textures++;var o=!0===t.isWebGLRenderTargetCube,s=u(t);if(o){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(o){r.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),M(e.TEXTURE_CUBE_MAP,t.texture,s);for(var l=0;l<6;l++)x(i.__webglFramebuffer[l],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+l);t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_CUBE_MAP),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,a.__webglTexture),M(e.TEXTURE_2D,t.texture,s),x(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_2D),r.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&S(t)}function E(t){var i=t.texture;if(i.generateMipmaps&&u(t)&&i.minFilter!==Mo&&i.minFilter!==bo){var a=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=n.get(i).__webglTexture;r.bindTexture(a,o),e.generateMipmap(a),r.bindTexture(a,null)}}var A=o.memory,I="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,D=!1,L=!1;this.setTexture2D=m,this.setTextureCube=v,this.setTextureCubeDynamic=y,this.setupRenderTarget=_,this.updateRenderTargetMipmap=E}function pt(){var e={};return{get:function(t){var r=t.uuid,n=e[r];return void 0===n&&(n={},e[r]=n),n},delete:function(t){delete e[t.uuid]},clear:function(){e={}}}}function gt(e,t,r){function n(){var t=!1,r=new i,n=null,a=new i;return{setMask:function(r){n===r||t||(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,i,o,s){!0===s&&(t*=o,n*=o,i*=o),r.set(t,n,i,o),!1===a.equals(r)&&(e.clearColor(t,n,i,o),a.copy(r))},reset:function(){t=!1,n=null,a.set(0,0,0,1)}}}function a(){var t=!1,r=null,n=null,i=null;return{setTest:function(t){t?h(e.DEPTH_TEST):p(e.DEPTH_TEST)},setMask:function(n){r===n||t||(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case Ya:e.depthFunc(e.NEVER);break;case Qa:e.depthFunc(e.ALWAYS);break;case qa:e.depthFunc(e.LESS);break;case Xa:e.depthFunc(e.LEQUAL);break;case Za:e.depthFunc(e.EQUAL);break;case Ka:e.depthFunc(e.GEQUAL);break;case Ja:e.depthFunc(e.GREATER);break;case $a:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}}function o(){var t=!1,r=null,n=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(t){t?h(e.STENCIL_TEST):p(e.STENCIL_TEST)},setMask:function(n){r===n||t||(e.stencilMask(n),r=n)},setFunc:function(t,r,o){n===t&&i===r&&a===o||(e.stencilFunc(t,r,o),n=t,i=r,a=o)},setOp:function(t,r,n){o===t&&s===r&&u===n||(e.stencilOp(t,r,n),o=t,s=r,u=n)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,r=null,n=null,i=null,a=null,o=null,s=null,u=null,l=null}}}function s(t,r,n){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<n;o++)e.texImage2D(r+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return a}function u(){U.setClear(0,0,0,1),B.setClear(1),V.setClear(0),h(e.DEPTH_TEST),w(Xa),_(!1),E(ca),h(e.CULL_FACE),h(e.BLEND),m(_a)}function l(){for(var e=0,t=F.length;e<t;e++)F[e]=0}function c(r){if(F[r]=1,0===G[r]&&(e.enableVertexAttribArray(r),G[r]=1),0!==H[r]){t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,0),H[r]=0}}function f(t,r,n){F[t]=1,0===G[t]&&(e.enableVertexAttribArray(t),G[t]=1),H[t]!==r&&(n.vertexAttribDivisorANGLE(t,r),H[t]=r)}function d(){for(var t=0,r=G.length;t!==r;++t)G[t]!==F[t]&&(e.disableVertexAttribArray(t),G[t]=0)}function h(t){!0!==W[t]&&(e.enable(t),W[t]=!0)}function p(t){!1!==W[t]&&(e.disable(t),W[t]=!1)}function g(){if(null===Y&&(Y=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),n=0;n<r.length;n++)Y.push(r[n]);return Y}function m(t,n,i,a,o,s,u,l){t!==Sa?h(e.BLEND):p(e.BLEND),t===Q&&l===ee||(t===Ea?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===Aa?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===Ia?l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE_MINUS_DST_ALPHA,e.ONE)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),Q=t,ee=l),t===Da?(o=o||n,s=s||i,u=u||a,n===q&&o===K||(e.blendEquationSeparate(r(n),r(o)),q=n,K=o),i===X&&a===Z&&s===J&&u===$||(e.blendFuncSeparate(r(i),r(a),r(s),r(u)),X=i,Z=a,J=s,$=u)):(q=null,X=null,Z=null,K=null,J=null,$=null)}function v(e){U.setMask(e)}function y(e){B.setTest(e)}function M(e){B.setMask(e)}function w(e){B.setFunc(e)}function x(e){V.setTest(e)}function b(e){V.setMask(e)}function T(e,t,r){V.setFunc(e,t,r)}function S(e,t,r){V.setOp(e,t,r)}function _(t){te!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),te=t)}function E(t){t!==la?(h(e.CULL_FACE),t!==re&&(t===ca?e.cullFace(e.BACK):t===fa?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):p(e.CULL_FACE),re=t}function A(t){t!==ne&&(le&&e.lineWidth(t),ne=t)}function I(t,r,n){t?(h(e.POLYGON_OFFSET_FILL),ie===r&&ae===n||(e.polygonOffset(r,n),ie=r,ae=n)):p(e.POLYGON_OFFSET_FILL)}function D(){return oe}function L(t){oe=t,t?h(e.SCISSOR_TEST):p(e.SCISSOR_TEST)}function N(t){void 0===t&&(t=e.TEXTURE0+se-1),ce!==t&&(e.activeTexture(t),ce=t)}function C(t,r){null===ce&&N();var n=fe[ce];void 0===n&&(n={type:void 0,texture:void 0},fe[ce]=n),n.type===t&&n.texture===r||(e.bindTexture(t,r||pe[t]),n.type=t,n.texture=r)}function O(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}}function R(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}}function P(t){!1===de.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),de.copy(t))}function z(t){!1===he.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),he.copy(t))}function j(){for(var t=0;t<G.length;t++)1===G[t]&&(e.disableVertexAttribArray(t),G[t]=0);W={},Y=null,ce=null,fe={},Q=null,te=null,re=null,U.reset(),B.reset(),V.reset()}var U=new n,B=new a,V=new o,k=e.getParameter(e.MAX_VERTEX_ATTRIBS),F=new Uint8Array(k),G=new Uint8Array(k),H=new Uint8Array(k),W={},Y=null,Q=null,q=null,X=null,Z=null,K=null,J=null,$=null,ee=!1,te=null,re=null,ne=null,ie=null,ae=null,oe=null,se=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),ue=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),le=parseFloat(ue)>=1,ce=null,fe={},de=new i,he=new i,pe={};return pe[e.TEXTURE_2D]=s(e.TEXTURE_2D,e.TEXTURE_2D,1),pe[e.TEXTURE_CUBE_MAP]=s(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:U,depth:B,stencil:V},init:u,initAttributes:l,enableAttribute:c,enableAttributeAndDivisor:f,disableUnusedAttributes:d,enable:h,disable:p,getCompressedTextureFormats:g,setBlending:m,setColorWrite:v,setDepthTest:y,setDepthWrite:M,setDepthFunc:w,setStencilTest:x,setStencilWrite:b,setStencilFunc:T,setStencilOp:S,setFlipSided:_,setCullFace:E,setLineWidth:A,setPolygonOffset:I,getScissorTest:D,setScissorTest:L,activeTexture:N,bindTexture:C,compressedTexImage2D:O,texImage2D:R,scissor:P,viewport:z,reset:j}}function mt(e,t,r){function n(){if(void 0!==a)return a;var r=t.get("EXT_texture_filter_anisotropic");return a=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a,o=void 0!==r.precision?r.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=!0===r.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),f=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),h=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=c>0,y=!!t.get("OES_texture_float");return{getMaxAnisotropy:n,getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:f,maxCubemapSize:d,maxAttributes:h,maxVertexUniforms:p,maxVaryings:g,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y}}function vt(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":n=e.getExtension("WEBGL_compressed_texture_etc1");break;default:n=e.getExtension(r)}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}}}function yt(){function e(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),r.numPlanes=i,r.numIntersection=0}function t(e,t,n,i){var a=null!==e?e.length:0,o=null;if(0!==a){if(o=l.value,!0!==i||null===o){var c=n+4*a,f=t.matrixWorldInverse;u.getNormalMatrix(f),(null===o||o.length<c)&&(o=new Float32Array(c));for(var d=0,h=n;d!==a;++d,h+=4)s.copy(e[d]).applyMatrix4(f,u),s.normal.toArray(o,h),o[h+3]=s.constant}l.value=o,l.needsUpdate=!0}return r.numPlanes=a,o}var r=this,n=null,i=0,a=!1,o=!1,s=new he,u=new de,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,o){var s=0!==e.length||r||0!==i||a;return a=r,n=t(e,o,0),i=e.length,s},this.beginShadows=function(){o=!0,t(null)},this.endShadows=function(){o=!1,e()},this.setState=function(r,s,u,c,f,d){if(!a||null===r||0===r.length||o&&!u)o?t(null):e();else{var h=o?0:i,p=4*h,g=f.clippingState||null;l.value=g,g=t(r,c,p,d);for(var m=0;m!==p;++m)g[m]=n[m];f.clippingState=g,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=h}}}function Mt(){Me.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function wt(e){function t(){return null===ce?Ae:1}function r(){rt.init(),rt.scissor(ye.copy(Ie).multiplyScalar(Ae)),rt.viewport(we.copy(Le).multiplyScalar(Ae)),rt.buffers.color.setClear(be.r,be.g,be.b,Se,Y)}function n(){le=null,ve=null,me="",he=-1,rt.reset()}function a(e){e.preventDefault(),n(),r(),nt.clear()}function o(e){var t=e.target;t.removeEventListener("dispose",o),s(t)}function s(e){u(e),nt.delete(e)}function u(e){var t=nt.get(e).program;e.program=void 0,void 0!==t&&ot.releaseProgram(t)}function c(e,t,r,n){var i;if(r&&r.isInstancedBufferGeometry&&null===(i=et.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===n&&(n=0),rt.initAttributes();var a=r.attributes,o=t.getAttributes(),s=e.defaultAttributeValues;for(var u in o){var l=o[u];if(l>=0){var c=a[u];if(void 0!==c){var f=c.normalized,d=c.itemSize,h=at.getAttributeProperties(c),p=h.__webglBuffer,g=h.type,m=h.bytesPerElement;if(c.isInterleavedBufferAttribute){var v=c.data,y=v.stride,M=c.offset;v&&v.isInstancedInterleavedBuffer?(rt.enableAttributeAndDivisor(l,v.meshPerAttribute,i),void 0===r.maxInstancedCount&&(r.maxInstancedCount=v.meshPerAttribute*v.count)):rt.enableAttribute(l),Je.bindBuffer(Je.ARRAY_BUFFER,p),Je.vertexAttribPointer(l,d,g,f,y*m,(n*y+M)*m)}else c.isInstancedBufferAttribute?(rt.enableAttributeAndDivisor(l,c.meshPerAttribute,i),void 0===r.maxInstancedCount&&(r.maxInstancedCount=c.meshPerAttribute*c.count)):rt.enableAttribute(l),Je.bindBuffer(Je.ARRAY_BUFFER,p),Je.vertexAttribPointer(l,d,g,f,0,n*d*m)}else if(void 0!==s){var w=s[u];if(void 0!==w)switch(w.length){case 2:Je.vertexAttrib2fv(l,w);break;case 3:Je.vertexAttrib3fv(l,w);break;case 4:Je.vertexAttrib4fv(l,w);break;default:Je.vertexAttrib1fv(l,w)}}}}rt.disableUnusedAttributes()}function d(e,t){return Math.abs(t[0])-Math.abs(e[0])}function h(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function p(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function g(e,t,r,n,i){var a,o;r.transparent?(a=se.transparentObjects,o=++Z):(a=se.opaqueObjects,o=++X);var s=a[o];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=r,s.z=Fe.z,s.group=i):(s={id:e.id,object:e,geometry:t,material:r,z:Fe.z,group:i},a.push(s))}function m(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Pe.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),y(Pe)}function v(e){return Pe.center.set(0,0,0),Pe.radius=.7071067811865476,Pe.applyMatrix4(e.matrixWorld),y(Pe)}function y(e){if(!Ne.intersectsSphere(e))return!1;var t=Ce.numPlanes;if(0===t)return!0;var r=se.clippingPlanes,n=e.center,i=-e.radius,a=0;do{if(r[a].distanceToPoint(n)<i)return!1}while(++a!==t);return!0}function M(e,t,r,n,i){for(var a=0,o=e.length;a<o;a++){var s=e[a],u=s.object;if(!i||!u||i(u)){var l=s.geometry,c=void 0===n?s.material:n,f=s.group;if(u.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,u.matrixWorld),u.normalMatrix.getNormalMatrix(u.modelViewMatrix),u.onBeforeRender(se,t,r,l,c,f),u.isImmediateRenderObject){x(c);var d=b(r,t.fog,c,u);me="",u.render(function(e){se.renderBufferImmediate(e,d,c)})}else se.renderBufferDirect(r,t.fog,l,c,u,f);u.onAfterRender(se,t,r,l,c,f)}}}function w(e,t,r){var n=nt.get(e),i=ot.getParameters(e,Ze,t,Ce.numPlanes,Ce.numIntersection,r),a=ot.getProgramCode(e,i),s=n.program,l=!0;if(void 0===s)e.addEventListener("dispose",o);else if(s.code!==a)u(e);else{if(void 0!==i.shaderID)return;l=!1}if(l){if(i.shaderID){var c=As[i.shaderID];n.__webglShader={name:e.type,uniforms:Ts.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else n.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=n.__webglShader,s=ot.acquireProgram(e,i,a),n.program=s,e.program=s}var f=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<se.maxMorphTargets;d++)f["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var d=0;d<se.maxMorphNormals;d++)f["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var h=n.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=Ce.numPlanes,n.numIntersection=Ce.numIntersection,h.clippingPlanes=Ce.uniform),n.fog=t,n.lightsHash=Ze.hash,e.lights&&(h.ambientLightColor.value=Ze.ambient,h.directionalLights.value=Ze.directional,h.spotLights.value=Ze.spot,h.rectAreaLights.value=Ze.rectArea,h.pointLights.value=Ze.point,h.hemisphereLights.value=Ze.hemi,h.directionalShadowMap.value=Ze.directionalShadowMap,h.directionalShadowMatrix.value=Ze.directionalShadowMatrix,h.spotShadowMap.value=Ze.spotShadowMap,h.spotShadowMatrix.value=Ze.spotShadowMatrix,h.pointShadowMap.value=Ze.pointShadowMap,h.pointShadowMatrix.value=Ze.pointShadowMatrix);var p=n.program.getUniforms(),g=te.seqWithValue(p.seq,h);n.uniformsList=g}function x(e){e.side===ya?rt.disable(Je.CULL_FACE):rt.enable(Je.CULL_FACE),rt.setFlipSided(e.side===va),!0===e.transparent?rt.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):rt.setBlending(Sa),rt.setDepthFunc(e.depthFunc),rt.setDepthTest(e.depthTest),rt.setDepthWrite(e.depthWrite),rt.setColorWrite(e.colorWrite),rt.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function b(e,t,r,n){xe=0;var i=nt.get(r);if(Oe&&(Re||e!==ve)){var a=e===ve&&r.id===he;Ce.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,i,a)}!1===r.needsUpdate&&(void 0===i.program?r.needsUpdate=!0:r.fog&&i.fog!==t?r.needsUpdate=!0:r.lights&&i.lightsHash!==Ze.hash?r.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===Ce.numPlanes&&i.numIntersection===Ce.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(w(r,t,n),r.needsUpdate=!1);var o=!1,s=!1,u=!1,l=i.program,c=l.getUniforms(),f=i.__webglShader.uniforms;if(l.id!==le&&(Je.useProgram(l.program),le=l.id,o=!0,s=!0,u=!0),r.id!==he&&(he=r.id,s=!0),o||e!==ve){if(c.set(Je,e,"projectionMatrix"),tt.logarithmicDepthBuffer&&c.setValue(Je,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==ve&&(ve=e,s=!0,u=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var d=c.map.cameraPosition;void 0!==d&&d.setValue(Je,Fe.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&c.setValue(Je,"viewMatrix",e.matrixWorldInverse),c.set(Je,se,"toneMappingExposure"),c.set(Je,se,"toneMappingWhitePoint"),c.set(Je,se,"ditherScale")}if(c.set(Je,se,"oitMode"),r.skinning){c.setOptional(Je,n,"bindMatrix"),c.setOptional(Je,n,"bindMatrixInverse");var h=n.skeleton;h&&(tt.floatVertexTextures&&h.useVertexTexture?(c.set(Je,h,"boneTexture"),c.set(Je,h,"boneTextureWidth"),c.set(Je,h,"boneTextureHeight")):c.setOptional(Je,h,"boneMatrices"))}return s&&(r.lights&&P(f,u),t&&r.fog&&I(f,t),(r.isMeshBasicMaterial||r.isMeshLambertMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.isMeshDepthMaterial||r.isMeshNormalMaterial||r.isMeshCubeMaterial)&&T(f,r),r.isLineBasicMaterial?_(f,r):r.isLineDashedMaterial?(_(f,r),E(f,r)):r.isPointsMaterial?A(f,r):r.isMeshCubeMaterial?S(f,r):r.isMeshLambertMaterial?D(f,r):r.isMeshToonMaterial?N(f,r):r.isMeshPhongMaterial?L(f,r):r.isMeshPhysicalMaterial?O(f,r):r.isMeshStandardMaterial?C(f,r):r.isMeshDepthMaterial?r.displacementMap&&(f.displacementMap.value=r.displacementMap,f.displacementScale.value=r.displacementScale,f.displacementBias.value=r.displacementBias):r.isMeshNormalMaterial&&R(f,r),void 0!==f.ltcMat&&(f.ltcMat.value=UniformsLib.LTC_MAT_TEXTURE),void 0!==f.ltcMag&&(f.ltcMag.value=UniformsLib.LTC_MAG_TEXTURE),te.upload(Je,i.uniformsList,f,se)),c.set(Je,n,"modelViewMatrix"),c.set(Je,n,"normalMatrix"),c.setValue(Je,"modelMatrix",n.matrixWorld),c.setValue(Je,"modelMatrixInverse",n.matrixWorldInverse),l}function T(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity);var r=ke.SupportedMapNames,n=ke.SupportedMapSlotNames,i=ke.SupportedMapUVNames,a=ke.SupportedMapTexelNames;if(!t.usedSlots||t.usedSlotsVersion!=t.version){t.usedSlots=[];for(var o=0,s=r.length;o<s;o++){var u=r[o],l=n[o],c=t[l];t.usedSlots.push({index:o,mapUniform:e[u],uvUniform:e[i[o]],texelUniform:e[a[o]]})}t.usedSlotsVersion=t.version}for(var f=0,d=t.usedSlots.length;f<d;f++){var h=t.usedSlots[f],o=h.index,u=r[o],l=n[o],c=t[l];if(c){if(h.mapUniform.value=c.texture,c.texture){if(c.uvTransform){var p=h.uvUniform.value;p.set(c.uvRepeat.x,c.uvRepeat.y,c.uvOffset.x,c.uvOffset.y)}c.texelTransform&&(At=c.getFlattenedTexelTransform(At),h.texelUniform.value.set(At.texelScale,At.texelOffset))}}else t[u]&&(e[u].value=t[u])}t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMapIntensity.value=t.aoMapIntensity);var g;if(t.map?g=t.map:t.specularMap?g=t.specularMap:t.displacementMap?g=t.displacementMap:t.normalMap?g=t.normalMap:t.bumpMap?g=t.bumpMap:t.roughnessMap?g=t.roughnessMap:t.metalnessMap?g=t.metalnessMap:t.alphaMap?g=t.alphaMap:t.emissiveMap&&(g=t.emissiveMap),void 0!==g){g.isWebGLRenderTarget&&(g=g.texture);var m=g.offset,v=g.repeat;e.offsetRepeat.value.set(m.x,m.y,v.x,v.y)}e.envMap.value=t.envMap,t.envMapIntensity&&(e.envMapIntensity.value=t.envMapIntensity),e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function S(e,t){e.roughness.value=t.roughness,e.opacity.value=t.opacity,e.envMapIntensity.value=t.envMapIntensity}function _(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function E(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function A(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*Ae,e.scale.value=.5*Ee,e.map.value=t.map,null!==t.map){var r=t.map.offset,n=t.map.repeat;e.offsetRepeat.value.set(r.x,r.y,n.x,n.y)}}function I(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function D(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function L(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function N(e,t){L(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function C(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function O(e,t){e.falloffDiffuse.value=t.falloffColor,t.falloffMap&&(e.falloffMap.value=t.falloffMap),e.falloffOpacity.value=t.falloffOpacity,t.falloffAlphaMap&&(e.falloffAlphaMap.value=t.falloffAlphaMap),e.anisotropy.value=t.anisotropy,t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap),e.anisotropyRotation.value=t.anisotropyRotation,t.anisotropyRotationMap&&(e.anisotropyRotationMap.value=t.anisotropyRotationMap),e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,C(e,t)}function R(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function P(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function z(e){for(var t=0,r=0,n=e.length;r<n;r++){var i=e[r];i.castShadow&&(Ze.shadows[t++]=i)}Ze.shadows.length=t}function j(e,t){var r,n,i,a,o,s,u,l=0,c=0,d=0,h=t.matrixWorldInverse,p=0,g=0,m=0,v=0,y=0;for(r=0,n=e.length;r<n;r++)if(i=e[r],a=i.color,o=i.intensity,s=i.distance,u=i.shadow&&i.shadow.map?i.shadow.map.texture:null,i.isAmbientLight)l+=a.r*o,c+=a.g*o,d+=a.b*o;else if(i.isDirectionalLight){var M=st.get(i);M.color.copy(i.color).multiplyScalar(i.intensity),M.direction.setFromMatrixPosition(i.matrixWorld),Fe.setFromMatrixPosition(i.target.matrixWorld),M.direction.sub(Fe),M.direction.transformDirection(h),M.shadow=i.castShadow,i.castShadow&&(M.shadowBias=i.shadow.bias,M.spreadAngle=i.shadow.spreadAngle,M.shadowMapSize=i.shadow.mapSize,M.shadowCameraParams.x=Math.abs(i.shadow.camera.right-i.shadow.camera.left),M.shadowCameraParams.y=i.shadow.camera.near,M.shadowCameraParams.z=i.shadow.camera.far),Ze.directionalShadowMap[p]=u,Ze.directionalShadowMatrix[p]=i.shadow.matrix,Ze.directional[p++]=M}else if(i.isSpotLight){var M=st.get(i);M.position.setFromMatrixPosition(i.matrixWorld),M.position.applyMatrix4(h),M.color.copy(a).multiplyScalar(o),M.distance=s,M.direction.setFromMatrixPosition(i.matrixWorld),Fe.setFromMatrixPosition(i.target.matrixWorld),M.direction.sub(Fe),M.direction.transformDirection(h),M.coneCos=Math.cos(i.angle),M.penumbraCos=Math.cos(i.angle*(1-i.penumbra)),M.decay=0===i.distance?0:i.decay,M.shadow=i.castShadow,i.castShadow&&(M.shadowBias=i.shadow.bias,M.shadowRadius=i.shadow.radius,M.shadowMapSize=i.shadow.mapSize,M.shadowCameraParams.x=ms.DEG2RAD*i.shadow.camera.fov,M.shadowCameraParams.y=i.shadow.camera.near,M.shadowCameraParams.z=i.shadow.camera.far),Ze.spotShadowMap[m]=u,Ze.spotShadowMatrix[m]=i.shadow.matrix,Ze.spot[m++]=M}else if(i.isRectAreaLight){var M=st.get(i);M.color.copy(a).multiplyScalar(o/(i.width*i.height)),M.position.setFromMatrixPosition(i.matrixWorld),M.position.applyMatrix4(h),Xe.identity(),qe.copy(i.matrixWorld),qe.premultiply(h),Xe.extractRotation(qe),M.halfWidth.set(.5*i.width,0,0),M.halfHeight.set(0,.5*i.height,0),M.halfWidth.applyMatrix4(Xe),M.halfHeight.applyMatrix4(Xe),Ze.rectArea[v++]=M}else if(i.isPointLight){var M=st.get(i);M.position.setFromMatrixPosition(i.matrixWorld),M.position.applyMatrix4(h),M.color.copy(i.color).multiplyScalar(i.intensity),M.distance=i.distance,M.decay=0===i.distance?0:i.decay,M.shadow=i.castShadow,i.castShadow&&(M.shadowBias=i.shadow.bias,M.shadowRadius=i.shadow.radius,M.shadowMapSize=i.shadow.mapSize),Ze.pointShadowMap[g]=u,void 0===Ze.pointShadowMatrix[g]&&(Ze.pointShadowMatrix[g]=new f),Fe.setFromMatrixPosition(i.matrixWorld).negate(),Ze.pointShadowMatrix[g].identity().setPosition(Fe),Ze.point[g++]=M}else if(i.isHemisphereLight){var M=st.get(i);M.direction.setFromMatrixPosition(i.matrixWorld),M.direction.transformDirection(h),M.direction.normalize(),M.skyColor.copy(i.color).multiplyScalar(o),M.groundColor.copy(i.groundColor).multiplyScalar(o),Ze.hemi[y++]=M}Ze.ambient[0]=l,Ze.ambient[1]=c,Ze.ambient[2]=d,Ze.directional.length=p,Ze.spot.length=m,Ze.rectArea.length=v,Ze.point.length=g,Ze.hemi.length=y,Ze.hash=p+","+g+","+m+","+v+","+y+","+Ze.shadows.length}function U(){var e=xe;return e>=tt.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+tt.maxTextures),xe+=1,e}function B(e){var t;if(e===mo)return Je.REPEAT;if(e===vo)return Je.CLAMP_TO_EDGE;if(e===yo)return Je.MIRRORED_REPEAT;if(e===Mo)return Je.NEAREST;if(e===wo)return Je.NEAREST_MIPMAP_NEAREST;if(e===xo)return Je.NEAREST_MIPMAP_LINEAR;if(e===bo)return Je.LINEAR;if(e===To)return Je.LINEAR_MIPMAP_NEAREST;if(e===So)return Je.LINEAR_MIPMAP_LINEAR;if(e===_o)return Je.UNSIGNED_BYTE;if(e===Oo)return Je.UNSIGNED_SHORT_4_4_4_4;if(e===Ro)return Je.UNSIGNED_SHORT_5_5_5_1;if(e===Po)return Je.UNSIGNED_SHORT_5_6_5;if(e===Eo)return Je.BYTE;if(e===Ao)return Je.SHORT;if(e===Io)return Je.UNSIGNED_SHORT;if(e===Do)return Je.INT;if(e===Lo)return Je.UNSIGNED_INT;if(e===No)return Je.FLOAT;if(e===Co&&null!==(t=et.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===jo)return Je.ALPHA;if(e===Uo)return Je.RGB;if(e===Bo)return Je.RGBA;if(e===Vo)return Je.LUMINANCE;if(e===ko)return Je.LUMINANCE_ALPHA;if(e===Go)return Je.DEPTH_COMPONENT;if(e===Ho)return Je.DEPTH_STENCIL;if(e===La)return Je.FUNC_ADD;if(e===Na)return Je.FUNC_SUBTRACT;if(e===Ca)return Je.FUNC_REVERSE_SUBTRACT;if(e===Pa)return Je.ZERO;if(e===za)return Je.ONE;if(e===ja)return Je.SRC_COLOR;if(e===Ua)return Je.ONE_MINUS_SRC_COLOR;if(e===Ba)return Je.SRC_ALPHA;if(e===Va)return Je.ONE_MINUS_SRC_ALPHA;if(e===ka)return Je.DST_ALPHA;if(e===Fa)return Je.ONE_MINUS_DST_ALPHA;if(e===Ga)return Je.DST_COLOR;if(e===Ha)return Je.ONE_MINUS_DST_COLOR;if(e===Wa)return Je.SRC_ALPHA_SATURATE;if((e===Wo||e===Yo||e===Qo||e===qo)&&null!==(t=et.get("WEBGL_compressed_texture_s3tc"))){if(e===Wo)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===Yo)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===Qo)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===qo)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===Xo||e===Zo||e===Ko||e===Jo)&&null!==(t=et.get("WEBGL_compressed_texture_pvrtc"))){if(e===Xo)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Zo)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Ko)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Jo)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===$o&&null!==(t=et.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===Oa||e===Ra)&&null!==(t=et.get("EXT_blend_minmax"))){if(e===Oa)return t.MIN_EXT;if(e===Ra)return t.MAX_EXT}return e===zo&&null!==(t=et.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",sa),e=e||{};var V=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),k=void 0!==e.context?e.context:null,F=void 0!==e.alpha&&e.alpha,G=void 0===e.depth||e.depth,H=void 0===e.stencil||e.stencil,W=void 0!==e.antialias&&e.antialias,Y=void 0===e.premultipliedAlpha||e.premultipliedAlpha,Q=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,q=[];this.opaqueObjects=[];var X=-1;this.transparentObjects=[];var Z=-1,K=new Float32Array(8),J=[],$=[],ee=null,ne=null,ie=null;this.domElement=V,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=io,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.ditherScale=1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.autoResizeTextures=!1;var se=this,le=null,ce=null,de=null,he=-1,me="",ve=null,ye=new i,Me=null,we=new i,xe=0,be=new re(0),Se=0,_e=V.width,Ee=V.height,Ae=1,Ie=new i(0,0,_e,Ee),De=!1,Le=new i(0,0,_e,Ee),Ne=new pe,Ce=new yt,Oe=!1,Re=!1,Pe=new fe,ze=new f,Fe=new l,qe=new f,Xe=new f,Ze={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Ke={calls:0,vertices:0,faces:0,points:0};this.info={render:Ke,memory:{geometries:0,textures:0},programs:null};var Je;try{var $e={alpha:F,depth:G,stencil:H,antialias:W,premultipliedAlpha:Y,preserveDrawingBuffer:Q};if(null===(Je=k||V.getContext("webgl",$e)||V.getContext("experimental-webgl",$e)))throw null!==V.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Je.getShaderPrecisionFormat&&(Je.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),V.addEventListener("webglcontextlost",a,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var et=new vt(Je);this.transparency=gs,this.oitMode=2,et.get("WEBGL_depth_texture"),et.get("OES_texture_float"),et.get("OES_texture_float_linear"),et.get("OES_texture_half_float"),et.get("OES_texture_half_float_linear"),et.get("OES_standard_derivatives"),et.get("ANGLE_instanced_arrays"),et.get("OES_element_index_uint")&&(je.MaxIndex=4294967296);var tt=new mt(Je,et,e),rt=new gt(Je,et,B),nt=new pt,it=new ht(Je,et,rt,nt,tt,B,this.info),at=new dt(Je,nt,this.info),ot=new ct(this,tt),st=new Qe;this.info.programs=ot.programs;var ut=new Ye(Je,et,Ke),lt=new We(Je,et,Ke),ft=new He(-1,1,1,-1,0,1),wt=new Ge,xt=new Ue(new Ve(2,2),new Te({depthTest:!1,depthWrite:!1,fog:!1})),bt=As.cube,Tt=new Ue(new Be(5,5,5),new ue({uniforms:bt.uniforms,vertexShader:bt.vertexShader,fragmentShader:bt.fragmentShader,side:va,depthTest:!1,depthWrite:!1,fog:!1}));r(),this.context=Je,this.capabilities=tt,this.extensions=et,this.properties=nt,this.state=rt;var St=new ge(this,Ze,at,tt);this.shadowMap=St;var _t=new oe(this,J),Et=new ae(this,$);this.getContext=function(){return Je},this.getContextAttributes=function(){return Je.getContextAttributes()},this.forceContextLoss=function(){et.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return tt.getMaxAnisotropy()},this.getPrecision=function(){return tt.precision},this.getPixelRatio=function(){return Ae},this.setPixelRatio=function(e){void 0!==e&&(Ae=e,this.setSize(Le.z,Le.w,!1))},this.getSize=function(){return{width:_e,height:Ee}},this.setSize=function(e,t,r){_e=e,Ee=t,V.width=e*Ae,V.height=t*Ae,!1!==r&&(V.style.width=e+"px",V.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,n){rt.viewport(Le.set(e,t,r,n))},this.setScissor=function(e,t,r,n){rt.scissor(Ie.set(e,t,r,n))},this.setScissorTest=function(e){rt.setScissorTest(De=e)},this.getClearColor=function(){return be},this.setClearColor=function(e,t){be.set(e),Se=void 0!==t?t:1,rt.buffers.color.setClear(be.r,be.g,be.b,Se,Y)},this.getClearAlpha=function(){return Se},this.setClearAlpha=function(e){Se=e,rt.buffers.color.setClear(be.r,be.g,be.b,Se,Y)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=Je.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=Je.DEPTH_BUFFER_BIT),(void 0===r||r)&&(n|=Je.STENCIL_BUFFER_BIT),Je.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,r,n){this.setRenderTarget(e),this.clear(t,r,n)},this.resetGLState=n,this.dispose=function(){this.transparentObjects=[],Z=-1,this.opaqueObjects=[],X=-1,V.removeEventListener("webglcontextlost",a,!1)},this.renderBufferImmediate=function(e,t,r){rt.initAttributes();var n=nt.get(e);e.hasPositions&&!n.position&&(n.position=Je.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=Je.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=Je.createBuffer()),e.hasColors&&!n.color&&(n.color=Je.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(Je.bindBuffer(Je.ARRAY_BUFFER,n.position),Je.bufferData(Je.ARRAY_BUFFER,e.positionArray,Je.DYNAMIC_DRAW),rt.enableAttribute(i.position),Je.vertexAttribPointer(i.position,3,Je.FLOAT,!1,0,0)),e.hasNormals){if(Je.bindBuffer(Je.ARRAY_BUFFER,n.normal),!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&r.shading===Ma)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray,u=(s[a+0]+s[a+3]+s[a+6])/3,l=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=u,s[a+1]=l,s[a+2]=c,s[a+3]=u,s[a+4]=l,s[a+5]=c,s[a+6]=u,s[a+7]=l,s[a+8]=c}Je.bufferData(Je.ARRAY_BUFFER,e.normalArray,Je.DYNAMIC_DRAW),rt.enableAttribute(i.normal),Je.vertexAttribPointer(i.normal,3,Je.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(Je.bindBuffer(Je.ARRAY_BUFFER,n.uv),Je.bufferData(Je.ARRAY_BUFFER,e.uvArray,Je.DYNAMIC_DRAW),rt.enableAttribute(i.uv),Je.vertexAttribPointer(i.uv,2,Je.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==xa&&(Je.bindBuffer(Je.ARRAY_BUFFER,n.color),Je.bufferData(Je.ARRAY_BUFFER,e.colorArray,Je.DYNAMIC_DRAW),rt.enableAttribute(i.color),Je.vertexAttribPointer(i.color,3,Je.FLOAT,!1,0,0)),rt.disableUnusedAttributes(),Je.drawArrays(Je.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,r,n,i,a,o){x(i);var s=b(e,r,i,a),u=!1,l=n.id+"_"+s.id+"_"+i.wireframe;l!==me&&(me=l,u=!0);var f=a.morphTargetInfluences;if(void 0!==f){for(var h=[],p=0,g=f.length;p<g;p++){var m=f[p];h.push([m,p])}h.sort(d),h.length>8&&(h.length=8);for(var v=n.morphAttributes,p=0,g=h.length;p<g;p++){var m=h[p];if(K[p]=m[0],0!==m[0]){var y=m[1];!0===i.morphTargets&&v.position&&n.addAttribute("morphTarget"+p,v.position[y]),!0===i.morphNormals&&v.normal&&n.addAttribute("morphNormal"+p,v.normal[y])}else!0===i.morphTargets&&n.removeAttribute("morphTarget"+p),!0===i.morphNormals&&n.removeAttribute("morphNormal"+p)}for(var p=h.length,M=K.length;p<M;p++)K[p]=0;s.getUniforms().setValue(Je,"morphTargetInfluences",K),u=!0}var y=n.index,w=n.attributes.position,T=1;!0===i.wireframe&&(y=at.getWireframeAttribute(n),T=2);var S;null!==y?(S=lt,S.setIndex(y)):S=ut,u&&(c(i,s,n),null!==y&&Je.bindBuffer(Je.ELEMENT_ARRAY_BUFFER,at.getAttributeBuffer(y)));var _=0;null!==y?_=y.count:void 0!==w&&(_=w.count);var E=n.drawRange.start*T,A=n.drawRange.count*T,I=null!==o?o.start*T:0,D=null!==o?o.count*T:1/0,L=Math.max(E,I),N=Math.min(_,E+A,I+D)-1,C=Math.max(0,N-L+1);if(0!==C){if(a.isMesh)if(!0===i.wireframe)rt.setLineWidth(i.wireframeLinewidth*t()),S.setMode(Je.LINES);else switch(a.drawMode){case rs:S.setMode(Je.TRIANGLES);break;case ns:S.setMode(Je.TRIANGLE_STRIP);break;case is:S.setMode(Je.TRIANGLE_FAN)}else if(a.isLine){var O=i.linewidth;void 0===O&&(O=1),rt.setLineWidth(O*t()),a.isLineSegments?S.setMode(Je.LINES):S.setMode(Je.LINE_STRIP)}else a.isPoints&&S.setMode(Je.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&S.renderInstances(n,L,C):S.render(L,C)}},this.renderOverride=function(e,t,r,n,i,a,o){t.overrideMaterial=e,this.render(t,r,n,i,a,o),t.overrideMaterial=null},this.renderPass=function(e,t,r){null===ee&&(ne=new He(-1,1,1,-1,0,1),ie=new Ue(new Ve(2,2),null),ee=new Mt,ee.add(ie)),ie.material=e,this.render(ee,ne,t,r),ie.material=null},this.render=function(e,t,r,n,i){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");me="",he=-1,ve=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),ze.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Ne.setFromMatrix(ze),q.length=0,X=-1,Z=-1,J.length=0,$.length=0,Re=this.localClippingEnabled,Oe=Ce.init(this.clippingPlanes,Re,t),this.projectObject(e,t),this.opaqueObjects.length=X+1,this.transparentObjects.length=Z+1,!0===se.sortObjects&&(this.opaqueObjects.sort(h),this.transparency===gs&&this.transparentObjects.sort(p)),Oe&&Ce.beginShadows(),z(q),St.render(e,t),j(q,t),Oe&&Ce.endShadows(),Ke.calls=0,Ke.vertices=0,Ke.faces=0,Ke.points=0,void 0===r&&(r=null),this.setRenderTarget(r);var a=e.background;if(a=null,null===a?rt.buffers.color.setClear(be.r,be.g,be.b,Se,Y):a&&a.isColor&&(rt.buffers.color.setClear(a.r,a.g,a.b,1,Y),n=!0),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),a&&a.isCubeTexture?(wt.projectionMatrix.copy(t.projectionMatrix),wt.matrixWorld.extractRotation(t.matrixWorld),wt.matrixWorldInverse.getInverse(wt.matrixWorld),Tt.material.uniforms.tCube.value=a,Tt.modelViewMatrix.multiplyMatrices(wt.matrixWorldInverse,Tt.matrixWorld),at.update(Tt),se.renderBufferDirect(wt,null,Tt.geometry,Tt.material,Tt,null)):a&&a.isTexture&&(xt.material.map=a,at.update(xt),se.renderBufferDirect(ft,null,xt.geometry,xt.material,xt,null)),e.overrideMaterial){var o=e.overrideMaterial;M(this.opaqueObjects,e,t,o,i),M(this.transparentObjects,e,t,o,i)}else rt.setBlending(Sa),this.transparency===gs&&(M(this.opaqueObjects,e,t,o,i),M(this.transparentObjects,e,t,o,i));_t.render(e,t),Et.render(e,t,we),r&&it.updateRenderTargetMipmap(r),rt.setDepthTest(!0),rt.setDepthWrite(!0),rt.setColorWrite(!0)},this.projectObject=function(e,t){if(!1!==e.visible){if(0!=(e.layers.mask&t.layers.mask))if(e.isLight)q.push(e);else if(e.isSprite)!1!==e.frustumCulled&&!0!==v(e)||J.push(e);else if(e.isLensFlare)$.push(e);else if(e.isImmediateRenderObject)!0===se.sortObjects&&(Fe.setFromMatrixPosition(e.matrixWorld),Fe.applyMatrix4(ze)),g(e,null,e.material,Fe.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!1===e.frustumCulled||!0===m(e))){var r=e.material;if(!0===r.visible){!0===se.sortObjects&&(Fe.setFromMatrixPosition(e.matrixWorld),Fe.applyMatrix4(ze));var n=at.update(e);if(r.isMultiMaterial)for(var i=n.groups,a=r.materials,o=0,s=i.length;o<s;o++){var u=i[o],l=a[u.materialIndex];!0===l.visible&&g(e,n,l,Fe.z,u)}else g(e,n,r,Fe.z,null)}}for(var c=e.children,o=0,s=c.length;o<s;o++)this.projectObject(c[o],t)}};var At={texelScale:0,texelOffset:0};this.setFaceCulling=function(e,t){rt.setCullFace(e),rt.setFlipSided(t===da)},this.allocTextureUnit=U,this.setTexture2D=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.",t),e=!0),t=t.texture),it.setTexture2D(t,r)}}(),this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),it.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.",t),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?it.setTextureCube(t,r):it.setTextureCubeDynamic(t,r)}}(),this.getCurrentRenderTarget=function(){return ce},this.setRenderTarget=function(e){ce=e,e&&void 0===nt.get(e).__webglFramebuffer&&it.setupRenderTarget(e);var t,r=e&&e.isWebGLRenderTargetCube;if(e){var n=nt.get(e);t=r?n.__webglFramebuffer[e.activeCubeFace]:n.__webglFramebuffer,ye.copy(e.scissor),Me=e.scissorTest,we.copy(e.viewport)}else t=null,ye.copy(Ie).multiplyScalar(Ae),Me=De,we.copy(Le).multiplyScalar(Ae);if(de!==t&&(Je.bindFramebuffer(Je.FRAMEBUFFER,t),de=t),rt.scissor(ye),rt.setScissorTest(Me),rt.viewport(we),r){var i=nt.get(e.texture);Je.framebufferTexture2D(Je.FRAMEBUFFER,Je.COLOR_ATTACHMENT0,Je.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,n,i,a){if(!1===(e&&e.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var o=nt.get(e).__webglFramebuffer;if(o){var s=!1;o!==de&&(Je.bindFramebuffer(Je.FRAMEBUFFER,o),s=!0);try{var u=e.texture,l=u.format,c=u.type;if(l!==Bo&&B(l)!==Je.getParameter(Je.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===_o||B(c)===Je.getParameter(Je.IMPLEMENTATION_COLOR_READ_TYPE)||c===No&&(et.get("OES_texture_float")||et.get("WEBGL_color_buffer_float"))||c===Co&&et.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Je.checkFramebufferStatus(Je.FRAMEBUFFER)===Je.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&Je.readPixels(t,r,n,i,B(l),B(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&Je.bindFramebuffer(Je.FRAMEBUFFER,de)}}}}function xt(e,t){this.name="",this.color=new re(e),this.density=void 0!==t?t:25e-5}function bt(e,t,r){this.name="",this.color=new re(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function Tt(e,t,r,n,i){Me.call(this),this.lensFlares=[],this.positionScreen=new l,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,r,n,i)}function St(e){se.call(this),this.type="SpriteMaterial",this.color=new re(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function _t(e){Me.call(this),this.type="Sprite",this.material=void 0!==e?e:new St}function Et(){Me.call(this),this.type="LOD",(0,y.default)(this,{levels:{enumerable:!0,value:[]}})}function At(e,t,r){if(this.useVertexTexture=void 0===r||r,this.identityMatrix=new f,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var n=Math.sqrt(4*this.bones.length);n=ms.nextPowerOfTwo(Math.ceil(n)),n=Math.max(n,4),this.boneTextureWidth=n,this.boneTextureHeight=n,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new ne(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Bo,No)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new f)}}function It(){Me.call(this),this.type="Bone"}function Dt(e,t,r){Ue.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new f,this.bindMatrixInverse=new f;var n=[];if(this.geometry&&void 0!==this.geometry.bones){for(var i,a,o=0,s=this.geometry.bones.length;o<s;++o)a=this.geometry.bones[o],i=new It,n.push(i),i.name=a.name,i.position.fromArray(a.pos),i.quaternion.fromArray(a.rotq),void 0!==a.scl&&i.scale.fromArray(a.scl);for(var o=0,s=this.geometry.bones.length;o<s;++o)a=this.geometry.bones[o],-1!==a.parent&&null!==a.parent&&void 0!==n[a.parent]?n[a.parent].add(n[o]):this.add(n[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new At(n,void 0,r),this.matrixWorld)}function Lt(e){se.call(this),this.type="LineBasicMaterial",this.color=new re(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Nt(e,t,r){if(1===r)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ct(e,t);Me.call(this),this.type="Line",this.geometry=void 0!==e?e:new je,this.material=void 0!==t?t:new Lt({color:16777215*Math.random()})}function Ct(e,t){Nt.call(this,e,t),this.type="LineSegments"}function Ot(e){se.call(this),this.type="PointsMaterial",this.color=new re(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Rt(e,t){Me.call(this),this.type="Points",this.geometry=void 0!==e?e:new je,this.material=void 0!==t?t:new Ot({color:16777215*Math.random()})}function Pt(){Me.call(this),this.type="Group"}function zt(e,t,r,i,a,o,s,u,l){function c(){requestAnimationFrame(c),e.readyState>=e.HAVE_CURRENT_DATA&&(f.needsUpdate=!0)}n.call(this,e,t,r,i,a,o,s,u,l),this.generateMipmaps=!1;var f=this;c()}function jt(e,t,r,i,a,o,s,u,l,c,f,d){n.call(this,null,o,s,u,l,c,i,a,f,d),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Ut(e,t,r,i,a,o,s,u,l){n.call(this,e,t,r,i,a,o,s,u,l),this.needsUpdate=!0}function Bt(e,t,r,i,a,o,s,u,l,c){if((c=void 0!==c?c:Go)!==Go&&c!==Ho)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&c===Go&&(r=Io),void 0===r&&c===Ho&&(r=zo),n.call(this,null,i,a,o,s,u,c,r,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:Mo,this.minFilter=void 0!==u?u:Mo,this.flipY=!1,this.generateMipmaps=!1}function Vt(e){function t(e,t){return e-t}je.call(this);var r=[0,0],n={},i=["a","b","c"];if(e&&e.isGeometry){for(var a=e.vertices,o=e.faces,s=0,u=new Uint32Array(6*o.length),l=0,c=o.length;l<c;l++)for(var f=o[l],d=0;d<3;d++){r[0]=f[i[d]],r[1]=f[i[(d+1)%3]],r.sort(t);var h=r.toString();void 0===n[h]&&(u[2*s]=r[0],u[2*s+1]=r[1],n[h]=!0,s++)}for(var p=new Float32Array(2*s*3),l=0,c=s;l<c;l++)for(var d=0;d<2;d++){var g=a[u[2*l+d]],m=6*l+3*d;p[m+0]=g.x,p[m+1]=g.y,p[m+2]=g.z}this.addAttribute("position",new Se(p,3))}else if(e&&e.isBufferGeometry)if(null!==e.index){var v=e.index.array,a=e.attributes.position,y=e.groups,s=0;0===y.length&&e.addGroup(0,v.length);for(var u=new Uint32Array(2*v.length),M=0,w=y.length;M<w;++M)for(var x=y[M],b=x.start,T=x.count,l=b,S=b+T;l<S;l+=3)for(var d=0;d<3;d++){r[0]=v[l+d],r[1]=v[l+(d+1)%3],r.sort(t);var h=r.toString();void 0===n[h]&&(u[2*s]=r[0],u[2*s+1]=r[1],n[h]=!0,s++)}for(var p=new Float32Array(2*s*3),l=0,c=s;l<c;l++)for(var d=0;d<2;d++){var m=6*l+3*d,_=u[2*l+d];p[m+0]=a.getX(_),p[m+1]=a.getY(_),p[m+2]=a.getZ(_)}this.addAttribute("position",new Se(p,3))}else{for(var a=e.attributes.position.array,s=a.length/3,E=s/3,p=new Float32Array(2*s*3),l=0,c=E;l<c;l++)for(var d=0;d<3;d++){var m=18*l+6*d,A=9*l+3*d;p[m+0]=a[A],p[m+1]=a[A+1],p[m+2]=a[A+2];var _=9*l+(d+1)%3*3;p[m+3]=a[_],p[m+4]=a[_+1],p[m+5]=a[_+2]}this.addAttribute("position",new Se(p,3))}}function kt(e,t,r){je.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,a,o,s,u=[],l=[],c=t+1;for(n=0;n<=r;n++)for(s=n/r,i=0;i<=t;i++)o=i/t,a=e(o,s),u.push(a.x,a.y,a.z),l.push(o,s);var f,d,h,p,g=[];for(n=0;n<r;n++)for(i=0;i<t;i++)f=n*c+i,d=n*c+i+1,h=(n+1)*c+i+1,p=(n+1)*c+i,g.push(f,d,p),g.push(d,h,p);this.setIndex(new(g.length>65535?Ne:De)(g,1)),this.addAttribute("position",new Ce(u,3)),this.addAttribute("uv",new Ce(l,2)),this.computeVertexNormals()}function Ft(e,t,r){ze.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new kt(e,t,r)),this.mergeVertices()}function Gt(e,t,n,i){function a(e,t,r,n){var i,a,o=Math.pow(2,n),u=[];for(i=0;i<=o;i++){u[i]=[];var l=e.clone().lerp(r,i/o),c=t.clone().lerp(r,i/o),f=o-i;for(a=0;a<=f;a++)u[i][a]=0===a&&i===o?l:l.clone().lerp(c,a/f)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var d=Math.floor(a/2);a%2==0?(s(u[i][d+1]),s(u[i+1][d]),s(u[i][d])):(s(u[i][d+1]),s(u[i+1][d+1]),s(u[i+1][d]))}}function o(){for(var e=0;e<g.length;e+=6){var t=g[e+0],r=g[e+2],n=g[e+4],i=Math.max(t,r,n),a=Math.min(t,r,n);i>.9&&a<.1&&(t<.2&&(g[e+0]+=1),r<.2&&(g[e+2]+=1),n<.2&&(g[e+4]+=1))}}function s(e){p.push(e.x,e.y,e.z)}function u(t,r){var n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function c(){for(var e=new l,t=new l,n=new l,i=new l,a=new r,o=new r,s=new r,u=0,c=0;u<p.length;u+=9,c+=6){e.set(p[u+0],p[u+1],p[u+2]),t.set(p[u+3],p[u+4],p[u+5]),n.set(p[u+6],p[u+7],p[u+8]),a.set(g[c+0],g[c+1]),o.set(g[c+2],g[c+3]),s.set(g[c+4],g[c+5]),i.copy(e).add(t).add(n).divideScalar(3);var h=d(i);f(a,c+0,e,h),f(o,c+2,t,h),f(s,c+4,n,h)}}function f(e,t,r,n){n<0&&1===e.x&&(g[t]=e.x-1),0===r.x&&0===r.z&&(g[t]=n/2/Math.PI+.5)}function d(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}je.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1,i=i||0;var p=[],g=[];!function(e){for(var r=new l,n=new l,i=new l,o=0;o<t.length;o+=3)u(t[o+0],r),u(t[o+1],n),u(t[o+2],i),a(r,n,i,e)}(i),function(e){for(var t=new l,r=0;r<p.length;r+=3)t.x=p[r+0],t.y=p[r+1],t.z=p[r+2],t.normalize().multiplyScalar(e),p[r+0]=t.x,p[r+1]=t.y,p[r+2]=t.z}(n),function(){for(var e=new l,t=0;t<p.length;t+=3){e.x=p[t+0],e.y=p[t+1],e.z=p[t+2];var r=d(e)/2/Math.PI+.5,n=h(e)/Math.PI+.5;g.push(r,1-n)}c(),o()}(),this.addAttribute("position",new Ce(p,3)),this.addAttribute("normal",new Ce(p.slice(),3)),this.addAttribute("uv",new Ce(g,2)),this.normalizeNormals(),this.boundingSphere=new fe(new l,n)}function Ht(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];Gt.call(this,r,n,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Wt(e,t){ze.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ht(e,t)),this.mergeVertices()}function Yt(e,t){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Gt.call(this,r,n,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Qt(e,t){ze.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Yt(e,t)),this.mergeVertices()}function qt(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],i=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Gt.call(this,n,i,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Xt(e,t){ze.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new qt(e,t)),this.mergeVertices()}function Zt(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Gt.call(this,i,a,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Kt(e,t){ze.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Zt(e,t)),this.mergeVertices()}function Jt(e,t,r,n){ze.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new Gt(e,t,r,n)),this.mergeVertices()}function $t(e,t,n,i,a){function o(r){var a=e.getPointAt(r/t),o=c.normals[r],s=c.binormals[r];for(d=0;d<=i;d++){var u=d/i*Math.PI*2,l=Math.sin(u),f=-Math.cos(u);p.x=f*o.x+l*s.x,p.y=f*o.y+l*s.y,p.z=f*o.z+l*s.z,p.normalize(),v.push(p.x,p.y,p.z),h.x=a.x+n*p.x,h.y=a.y+n*p.y,h.z=a.z+n*p.z,m.push(h.x,h.y,h.z)}}function s(){for(d=1;d<=t;d++)for(f=1;f<=i;f++){var e=(i+1)*(d-1)+(f-1),r=(i+1)*d+(f-1),n=(i+1)*d+f,a=(i+1)*(d-1)+f;M.push(e,r,a),M.push(r,n,a)}}function u(){for(f=0;f<=t;f++)for(d=0;d<=i;d++)g.x=f/t,g.y=d/i,y.push(g.x,g.y)}je.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:a},t=t||64,n=n||1,i=i||8,a=a||!1;var c=e.computeFrenetFrames(t,a);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;var f,d,h=new l,p=new l,g=new r,m=[],v=[],y=[],M=[];!function(){for(f=0;f<t;f++)o(f);o(!1===a?t:0),u(),s()}(),this.setIndex(new(M.length>65535?Ne:De)(M,1)),this.addAttribute("position",new Ce(m,3)),this.addAttribute("normal",new Ce(v,3)),this.addAttribute("uv",new Ce(y,2))}function er(e,t,r,n,i,a){ze.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new $t(e,t,r,n,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function tr(e,t,n,i,a,o){function s(e,t,r,n,i){var a=Math.cos(e),o=Math.sin(e),s=r/t*e,u=Math.cos(s);i.x=n*(2+u)*.5*a,i.y=n*(2+u)*o*.5,i.z=n*Math.sin(s)*.5}je.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:a,q:o},e=e||100,t=t||40,n=Math.floor(n)||64,i=Math.floor(i)||8,a=a||2,o=o||3;var u,c,f=(i+1)*(n+1),d=i*n*2*3,h=new Se(new(d>65535?Uint32Array:Uint16Array)(d),1),p=new Se(new Float32Array(3*f),3),g=new Se(new Float32Array(3*f),3),m=new Se(new Float32Array(2*f),2),v=0,y=0,M=new l,w=new l,x=new r,b=new l,T=new l,S=new l,_=new l,E=new l;for(u=0;u<=n;++u){var A=u/n*a*Math.PI*2;for(s(A,a,o,e,b),s(A+.01,a,o,e,T),_.subVectors(T,b),E.addVectors(T,b),S.crossVectors(_,E),E.crossVectors(S,_),S.normalize(),E.normalize(),c=0;c<=i;++c){var I=c/i*Math.PI*2,D=-t*Math.cos(I),L=t*Math.sin(I);M.x=b.x+(D*E.x+L*S.x),M.y=b.y+(D*E.y+L*S.y),M.z=b.z+(D*E.z+L*S.z),p.setXYZ(v,M.x,M.y,M.z),w.subVectors(M,b).normalize(),g.setXYZ(v,w.x,w.y,w.z),x.x=u/n,x.y=c/i,m.setXY(v,x.x,x.y),v++}}for(c=1;c<=n;c++)for(u=1;u<=i;u++){var N=(i+1)*(c-1)+(u-1),C=(i+1)*c+(u-1),O=(i+1)*c+u,R=(i+1)*(c-1)+u;h.setX(y,N),y++,h.setX(y,C),y++,h.setX(y,R),y++,h.setX(y,C),y++,h.setX(y,O),y++,h.setX(y,R),y++}this.setIndex(h),this.addAttribute("position",p),this.addAttribute("normal",g),this.addAttribute("uv",m)}function rr(e,t,r,n,i,a,o){ze.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new tr(e,t,r,n,i,a)),this.mergeVertices()}function nr(e,t,r,n,i){je.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||100,t=t||40,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var a,o,s=(r+1)*(n+1),u=r*n*2*3,c=new(u>65535?Uint32Array:Uint16Array)(u),f=new Float32Array(3*s),d=new Float32Array(3*s),h=new Float32Array(2*s),p=0,g=0,m=0,v=new l,y=new l,M=new l;for(a=0;a<=r;a++)for(o=0;o<=n;o++){var w=o/n*i,x=a/r*Math.PI*2;y.x=(e+t*Math.cos(x))*Math.cos(w),y.y=(e+t*Math.cos(x))*Math.sin(w),y.z=t*Math.sin(x),f[p]=y.x,f[p+1]=y.y,f[p+2]=y.z,v.x=e*Math.cos(w),v.y=e*Math.sin(w),M.subVectors(y,v).normalize(),d[p]=M.x,d[p+1]=M.y,d[p+2]=M.z,h[g]=o/n,h[g+1]=a/r,p+=3,g+=2}for(a=1;a<=r;a++)for(o=1;o<=n;o++){var b=(n+1)*a+o-1,T=(n+1)*(a-1)+o-1,S=(n+1)*(a-1)+o,_=(n+1)*a+o;c[m]=b,c[m+1]=T,c[m+2]=_,c[m+3]=T,c[m+4]=S,c[m+5]=_,m+=6}this.setIndex(new Se(c,1)),this.addAttribute("position",new Se(f,3)),this.addAttribute("normal",new Se(d,3)),this.addAttribute("uv",new Se(h,2))}function ir(e,t,r,n,i){ze.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new nr(e,t,r,n,i))}function ar(e,t){if(void 0===e)return void(e=[]);ze.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals()}function or(e,t){t=t||{};var r=t.font;if(!1===(r&&r.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new ze;var n=r.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ar.call(this,n,t),this.type="TextGeometry"}function sr(e,t,r,n,i,a,o){je.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s=a+o,u=(t+1)*(r+1),c=new Se(new Float32Array(3*u),3),f=new Se(new Float32Array(3*u),3),d=new Se(new Float32Array(2*u),2),h=0,p=[],g=new l,m=0;m<=r;m++){for(var v=[],y=m/r,M=0;M<=t;M++){var w=M/t,x=-e*Math.cos(n+w*i)*Math.sin(a+y*o),b=e*Math.cos(a+y*o),T=e*Math.sin(n+w*i)*Math.sin(a+y*o);g.set(x,b,T).normalize(),c.setXYZ(h,x,b,T),f.setXYZ(h,g.x,g.y,g.z),d.setXY(h,w,1-y),v.push(h),h++}p.push(v)}for(var S=[],m=0;m<r;m++)for(var M=0;M<t;M++){var _=p[m][M+1],E=p[m][M],A=p[m+1][M],I=p[m+1][M+1];(0!==m||a>0)&&S.push(_,E,I),(m!==r-1||s<Math.PI)&&S.push(E,A,I)}this.setIndex(new(c.count>65535?Ne:De)(S,1)),this.addAttribute("position",c),this.addAttribute("normal",f),this.addAttribute("uv",d),this.boundingSphere=new fe(new l,e)}function ur(e,t,r,n,i,a,o){ze.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new sr(e,t,r,n,i,a,o))}function lr(e,t,n,i,a,o){je.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:a,thetaLength:o},e=e||20,t=t||50,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var s,u,c,f=(n+1)*(i+1),d=n*i*2*3,h=new Se(new(d>65535?Uint32Array:Uint16Array)(d),1),p=new Se(new Float32Array(3*f),3),g=new Se(new Float32Array(3*f),3),m=new Se(new Float32Array(2*f),2),v=0,y=0,M=e,w=(t-e)/i,x=new l,b=new r;for(u=0;u<=i;u++){for(c=0;c<=n;c++)s=a+c/n*o,x.x=M*Math.cos(s),x.y=M*Math.sin(s),p.setXYZ(v,x.x,x.y,x.z),g.setXYZ(v,0,0,1),b.x=(x.x/t+1)/2,b.y=(x.y/t+1)/2,m.setXY(v,b.x,b.y),v++;M+=w}for(u=0;u<i;u++){var T=u*(n+1);for(c=0;c<n;c++){s=c+T;var S=s,_=s+n+1,E=s+n+2,A=s+1;h.setX(y,S),y++,h.setX(y,_),y++,h.setX(y,E),y++,h.setX(y,S),y++,h.setX(y,E),y++,h.setX(y,A),y++}}this.setIndex(h),this.addAttribute("position",p),this.addAttribute("normal",g),this.addAttribute("uv",m)}function cr(e,t,r,n,i,a){ze.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new lr(e,t,r,n,i,a))}function fr(e,t,r,n){ze.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new Ve(e,t,r,n))}function dr(e,t,n,i){je.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=ms.clamp(i,0,2*Math.PI);var a,o,s,u=(t+1)*e.length,c=t*e.length*2*3,f=new Se(new(c>65535?Uint32Array:Uint16Array)(c),1),d=new Se(new Float32Array(3*u),3),h=new Se(new Float32Array(2*u),2),p=0,g=0,m=1/t,v=new l,y=new r;for(o=0;o<=t;o++){var M=n+o*m*i,w=Math.sin(M),x=Math.cos(M);for(s=0;s<=e.length-1;s++)v.x=e[s].x*w,v.y=e[s].y,v.z=e[s].x*x,d.setXYZ(p,v.x,v.y,v.z),y.x=o/t,y.y=s/(e.length-1),h.setXY(p,y.x,y.y),p++}for(o=0;o<t;o++)for(s=0;s<e.length-1;s++){a=s+o*e.length;var b=a,T=a+e.length,S=a+e.length+1,_=a+1;f.setX(g,b),g++,f.setX(g,T),g++,f.setX(g,_),g++,f.setX(g,T),g++,f.setX(g,S),g++,f.setX(g,_),g++}if(this.setIndex(f),this.addAttribute("position",d),this.addAttribute("uv",h),this.computeVertexNormals(),i===2*Math.PI){var E=this.attributes.normal.array,A=new l,I=new l,D=new l;for(a=t*e.length*3,o=0,s=0;o<e.length;o++,s+=3)A.x=E[s+0],A.y=E[s+1],A.z=E[s+2],I.x=E[a+s+0],I.y=E[a+s+1],I.z=E[a+s+2],D.addVectors(A,I).normalize(),E[s+0]=E[a+s+0]=D.x,E[s+1]=E[a+s+1]=D.y,E[s+2]=E[a+s+2]=D.z}}function hr(e,t,r,n){ze.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new dr(e,t,r,n)),this.mergeVertices()}function pr(e,t){function r(e){var r,s,l,c=n.length/3,f=e.extractPoints(t),d=f.shape,h=f.holes;if(!1===Rs.isClockWise(d))for(d=d.reverse(),r=0,s=h.length;r<s;r++)l=h[r],!0===Rs.isClockWise(l)&&(h[r]=l.reverse());var p=Rs.triangulateShape(d,h);for(r=0,s=h.length;r<s;r++)l=h[r],d=d.concat(l);for(r=0,s=d.length;r<s;r++){var g=d[r];n.push(g.x,g.y,0),i.push(0,0,1),a.push(g.x,g.y)}for(r=0,s=p.length;r<s;r++){var m=p[r],v=m[0]+c,y=m[1]+c,M=m[2]+c;o.push(v,y,M),u+=3}}je.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],a=[],o=[],s=0,u=0;if(!1===Array.isArray(e))r(e);else for(var l=0;l<e.length;l++)r(e[l]),this.addGroup(s,u,l),s+=u,u=0;this.setIndex(new(o.length>65535?Ne:De)(o,1)),this.addAttribute("position",new Ce(n,3)),this.addAttribute("normal",new Ce(i,3)),this.addAttribute("uv",new Ce(a,2))}function gr(e,t){ze.call(this),this.type="ShapeGeometry","object"===(void 0===t?"undefined":(0,I.default)(t))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new pr(e,t)),this.mergeVertices()}function mr(e,t){function r(e,t){return e-t}je.call(this),t=void 0!==t?t:1;var n,i=Math.cos(ms.DEG2RAD*t),a=[0,0],o={},s=["a","b","c"];e.isBufferGeometry?(n=new ze,n.fromBufferGeometry(e)):n=e.clone(),n.mergeVertices(),n.computeFaceNormals();for(var u=n.vertices,l=n.faces,c=0,f=l.length;c<f;c++)for(var d=l[c],h=0;h<3;h++){a[0]=d[s[h]],a[1]=d[s[(h+1)%3]],a.sort(r);var p=a.toString();void 0===o[p]?o[p]={vert1:a[0],vert2:a[1],face1:c,face2:void 0}:o[p].face2=c}var g=[];for(var p in o){var m=o[p];if(void 0===m.face2||l[m.face1].normal.dot(l[m.face2].normal)<=i){var v=u[m.vert1];g.push(v.x),g.push(v.y),g.push(v.z),v=u[m.vert2],g.push(v.x),g.push(v.y),g.push(v.z)}}this.addAttribute("position",new Ce(g,3))}function vr(e,t,n,i,a,o,s,u){function c(n){var a,o,c,d=new r,h=new l,p=0,x=!0===n?e:t,S=!0===n?1:-1;for(o=M,a=1;a<=i;a++)m.setXYZ(M,0,b*S,0),v.setXYZ(M,0,S,0),d.x=.5,d.y=.5,y.setXY(M,d.x,d.y),M++;for(c=M,a=0;a<=i;a++){var _=a/i,E=_*u+s,A=Math.cos(E),I=Math.sin(E);h.x=x*I,h.y=b*S,h.z=x*A,m.setXYZ(M,h.x,h.y,h.z),v.setXYZ(M,0,S,0),d.x=.5*A+.5,d.y=.5*I*S+.5,y.setXY(M,d.x,d.y),M++}for(a=0;a<i;a++){var D=o+a,L=c+a;!0===n?(g.setX(w,L),w++,g.setX(w,L+1),w++,g.setX(w,D),w++):(g.setX(w,L+1),w++,g.setX(w,L),w++,g.setX(w,D),w++),p+=3}f.addGroup(T,p,!0===n?1:2),T+=p}je.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:u};var f=this;e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,i=Math.floor(i)||8,a=Math.floor(a)||1,o=void 0!==o&&o,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var d=0;!1===o&&(e>0&&d++,t>0&&d++);var h=function(){var e=(i+1)*(a+1);return!1===o&&(e+=(i+1)*d+i*d),e}(),p=function(){var e=i*a*2*3;return!1===o&&(e+=i*d*3),e}(),g=new Se(new(p>65535?Uint32Array:Uint16Array)(p),1),m=new Se(new Float32Array(3*h),3),v=new Se(new Float32Array(3*h),3),y=new Se(new Float32Array(2*h),2),M=0,w=0,x=[],b=n/2,T=0;!function(){var r,o,c=new l,d=new l,h=0,p=(t-e)/n;for(o=0;o<=a;o++){var S=[],_=o/a,E=_*(t-e)+e;for(r=0;r<=i;r++){var A=r/i,I=A*u+s,D=Math.sin(I),L=Math.cos(I);d.x=E*D,d.y=-_*n+b,d.z=E*L,m.setXYZ(M,d.x,d.y,d.z),c.set(D,p,L).normalize(),v.setXYZ(M,c.x,c.y,c.z),y.setXY(M,A,1-_),S.push(M),M++}x.push(S)}for(r=0;r<i;r++)for(o=0;o<a;o++){var N=x[o][r],C=x[o+1][r],O=x[o+1][r+1],R=x[o][r+1];g.setX(w,N),w++,g.setX(w,C),w++,g.setX(w,R),w++,g.setX(w,C),w++,g.setX(w,O),w++,g.setX(w,R),w++,h+=6}f.addGroup(T,h,0),T+=h}(),!1===o&&(e>0&&c(!0),t>0&&c(!1)),this.setIndex(g),this.addAttribute("position",m),this.addAttribute("normal",v),this.addAttribute("uv",y)}function yr(e,t,r,n,i,a,o,s){ze.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new vr(e,t,r,n,i,a,o,s)),this.mergeVertices()}function Mr(e,t,r,n,i,a,o){yr.call(this,0,e,t,r,n,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function wr(e,t,r,n,i,a,o){vr.call(this,0,e,t,r,n,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:a,thetaLength:o}}function xr(e,t,r,n){je.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||50,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i=t+2,a=new Float32Array(3*i),o=new Float32Array(3*i),s=new Float32Array(2*i);o[2]=1,s[0]=.5,s[1]=.5;for(var u=0,c=3,f=2;u<=t;u++,c+=3,f+=2){var d=r+u/t*n;a[c]=e*Math.cos(d),a[c+1]=e*Math.sin(d),o[c+2]=1,s[f]=(a[c]/e+1)/2,s[f+1]=(a[c+1]/e+1)/2}for(var h=[],c=1;c<=t;c++)h.push(c,c+1,0);this.setIndex(new Se(new Uint16Array(h),1)),this.addAttribute("position",new Se(a,3)),this.addAttribute("normal",new Se(o,3)),this.addAttribute("uv",new Se(s,2)),this.boundingSphere=new fe(new l,e)}function br(e,t,r,n){ze.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new xr(e,t,r,n))}function Tr(e,t,r,n,i,a){ze.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new Be(e,t,r,n,i,a)),this.mergeVertices()}function Sr(){ue.call(this,{uniforms:Ts.merge([Es.lights,{opacity:{value:1}}]),vertexShader:Ss.shadow_vert,fragmentShader:Ss.shadow_frag}),this.lights=!0,this.transparent=!0,(0,y.default)(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function _r(e){ue.call(this,e),this.type="RawShaderMaterial"}function Er(e){this.uuid=ms.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(e)?e:[],this.visible=!0}function Ar(e){se.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new re(16777215),this.mapSlot=new ke("map",0,!1,!1),this.reflectivity=.5,this.roughness=.5,this.roughnessMapSlot=new ke("roughnessMap",0,!1,!1),this.metalness=.5,this.metalnessMapSlot=new ke("metalnessMap",0,!1,!1),this.emissive=new re(0),this.emissiveIntensity=1,this.emissiveMapSlot=new ke("emissiveMap",0,!1,!1),this.bumpMapSlot=new ke("bumpMap",0,!1,!0),this.normalScale=new r(1,1),this.normalMapSlot=new ke("normalMap",0,!1,!1),this.displacementMapSlot=new ke("displacementMap",0,!1,!0),this.lightMapSlot=new ke("lightMap",1,!1,!0),this.aoMapIntensity=1,this.aoMapSlot=new ke("aoMap",1,!1,!0),this.alphaMapSlot=new ke("alphaMap",0,!1,!1),this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ir(e){Ar.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.falloff=!1,this.falloffColor=new re(16777215),this.falloffMapSlot=new ke("falloffMap",0,!1,!1),this.falloffOpacity=1,this.falloffAlphaMapSlot=new ke("falloffAlphaMap",0,!1,!1),this.clearCoat=0,this.clearCoatRoughness=0,this.anisotropy=0,this.anisotropyMapSlot=new ke("anisotropyMap",0,!1,!1),this.anisotropyRotation=0,this.anisotropyRotationMapSlot=new ke("anisotropyRotationMap",0,!1,!1),this.setValues(e)}function Dr(e){se.call(this),this.type="MeshPhongMaterial",this.color=new re(16777215),this.specular=new re(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new re(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Lr(e){Dr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Nr(e){se.call(this,e),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.clearColor=new re(.5,.5,1),this.clearAlpha=1,this.setValues(e)}function Cr(e){se.call(this),this.type="MeshLambertMaterial",this.color=new re(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new re(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Or(e){se.call(this),this.type="MeshCubeMaterial",this.envMap=null,this.envMapIntensity=1,this.roughness=0,this.depthTest=!1,this.depthWrite=!1,this.side=va,this.lights=!1,this.setValues(e)}function Rr(e){se.call(this),this.type="LineDashedMaterial",this.color=new re(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}function Pr(e,t,r){var n=this,i=!1,a=0,o=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){o++,!1===i&&void 0!==n.onStart&&n.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==n.onProgress&&n.onProgress(e,a,o),a===o&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)}}function zr(e){this.manager=void 0!==e?e:Us}function jr(e){this.manager=void 0!==e?e:Us,this._parser=null}function Ur(e){this.manager=void 0!==e?e:Us,this._parser=null}function Br(e){this.manager=void 0!==e?e:Us}function Vr(e){this.manager=void 0!==e?e:Us}function kr(e){this.manager=void 0!==e?e:Us}function Fr(e,t){Me.call(this),this.type="Light",this.color=new re(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Gr(e,t,r){Fr.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Me.DefaultUp),this.updateMatrix(),this.groundColor=new re(t)}function Hr(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new f}function Wr(){Hr.call(this,new Ge)}function Yr(e,t,r,n,i,a){Fr.call(this,e,t),this.type="SpotLight",this.position.copy(Me.DefaultUp),this.updateMatrix(),this.target=new Me,this.autoShadow=!1,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new Wr}function Qr(e,t,r,n){Fr.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new Hr(new Ge(90,1,.5,500))}function qr(){Hr.call(this,new He),this.spreadAngle=0}function Xr(e,t){Fr.call(this,e,t),this.type="DirectionalLight",this.position.copy(Me.DefaultUp),this.updateMatrix(),this.target=new Me,this.autoShadow=!1,this.shadow=new qr}function Zr(e,t){Fr.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Kr(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function Jr(e,t,r,n){Kr.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function $r(e,t,r,n){Kr.call(this,e,t,r,n)}function en(e,t,r,n){Kr.call(this,e,t,r,n)}function tn(e,t,r,n){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=Bs.convertArray(t,this.TimeBufferType),this.values=Bs.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function rn(e,t,r,n){tn.call(this,e,t,r,n)}function nn(e,t,r,n){Kr.call(this,e,t,r,n)}function an(e,t,r,n){tn.call(this,e,t,r,n)}function on(e,t,r,n){tn.call(this,e,t,r,n)}function sn(e,t,r,n){tn.call(this,e,t,r,n)}function un(e,t,r){tn.call(this,e,t,r)}function ln(e,t,r,n){tn.call(this,e,t,r,n)}function cn(e,t,r,n){tn.apply(this,arguments)}function fn(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=ms.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function dn(e){this.manager=void 0!==e?e:Us,this.textures={}}function hn(e){this.manager=void 0!==e?e:Us}function pn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function gn(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Us,this.withCredentials=!1}function mn(e){this.manager=void 0!==e?e:Us,this.texturePath=""}function vn(e,t,r,n,i){var a=.5*(n-t),o=.5*(i-r),s=e*e;return(2*r-2*n+a+o)*(e*s)+(-3*r+3*n-2*a-o)*s+a*e+r}function yn(e,t){var r=1-e;return r*r*t}function Mn(e,t){return 2*(1-e)*e*t}function wn(e,t){return e*e*t}function xn(e,t,r,n){return yn(e,t)+Mn(e,r)+wn(e,n)}function bn(e,t){var r=1-e;return r*r*r*t}function Tn(e,t){var r=1-e;return 3*r*r*e*t}function Sn(e,t){return 3*(1-e)*e*e*t}function _n(e,t){return e*e*e*t}function En(e,t,r,n,i){return bn(e,t)+Tn(e,r)+Sn(e,n)+_n(e,i)}function An(){}function In(e,t){this.v1=e,this.v2=t}function Dn(){this.curves=[],this.autoClose=!1}function Ln(e,t,r,n,i,a,o,s){this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=n,this.aStartAngle=i,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}function Nn(e){this.points=void 0===e?[]:e}function Cn(e,t,r,n){this.v0=e,this.v1=t,this.v2=r,this.v3=n}function On(e,t,r){this.v0=e,this.v1=t,this.v2=r}function Rn(e){Dn.call(this),this.currentPoint=new r,e&&this.fromPoints(e)}function Pn(){Rn.apply(this,arguments),this.holes=[]}function zn(){this.subPaths=[],this.currentPath=null}function jn(e){this.data=e}function Un(e){this.manager=void 0!==e?e:Us}function Bn(e){this.manager=void 0!==e?e:Us}function Vn(e,t,r,n){Fr.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function kn(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ge,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ge,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Fn(e,t,r){Me.call(this),this.type="CubeCamera";var n=new Ge(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new l(1,0,0)),this.add(n);var i=new Ge(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new l(-1,0,0)),this.add(i);var a=new Ge(90,1,e,t);a.up.set(0,0,1),a.lookAt(new l(0,1,0)),this.add(a);var s=new Ge(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new l(0,-1,0)),this.add(s);var u=new Ge(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new l(0,0,1)),this.add(u);var c=new Ge(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new l(0,0,-1)),this.add(c);var f={format:Uo,magFilter:bo,minFilter:bo,name:"cubeCamera"};this.renderTarget=new o(r,r,f),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,o=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,n,r),r.activeCubeFace=1,e.render(t,i,r),r.activeCubeFace=2,e.render(t,a,r),r.activeCubeFace=3,e.render(t,s,r),r.activeCubeFace=4,e.render(t,u,r),r.texture.generateMipmaps=o,r.activeCubeFace=5,e.render(t,c,r),e.setRenderTarget(null)}}function Gn(){Me.call(this),this.type="AudioListener",this.context=Gs.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Hn(e){Me.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Wn(e){Hn.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Yn(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Qn(e,t,r){this.binding=e,this.valueSize=r;var n,i=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function qn(e,t,r){this.path=t,this.parsedPath=r||qn.parseTrackName(t),this.node=qn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Xn(e){this.uuid=ms.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var r=0,n=arguments.length;r!==n;++r)t[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Zn(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var n=t.tracks,i=n.length,a=new Array(i),o={endingStart:ts,endingEnd:ts},s=0;s!==i;++s){var u=n[s].createInterpolant(null);a[s]=u,u.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=es,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Kn(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Jn(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function $n(){je.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function ei(e,t,r,n){this.uuid=ms.generateUUID(),this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}function ti(e,t){this.uuid=ms.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function ri(e,t,r){ti.call(this,e,t),this.meshPerAttribute=r||1}function ni(e,t,r){Se.call(this,e,t),this.meshPerAttribute=r||1}function ii(e,t,r,n){this.ray=new me(e,t),this.near=r||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},(0,y.default)(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function ai(e,t){return e.distance-t.distance}function oi(e,t,r,n){if(!1!==e.visible&&(e.raycast(t,r),!0===n))for(var i=e.children,a=0,o=i.length;a<o;a++)oi(i[a],t,r,!0)}function si(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function ui(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function li(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}function ci(e,t){Ue.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,n=r-1,i=r/1;this.createAnimation("__default",0,n,i),this.setAnimationWeight("__default",1)}function fi(e){Me.call(this),this.material=e,this.render=function(e){}}function di(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16711680,a=void 0!==n?n:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var u=new je,l=new Ce(2*o*3,3);u.addAttribute("position",l),Ct.call(this,u,new Lt({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function hi(e){Me.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new je,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,i=1;n<32;n++,i++){var a=n/32*Math.PI*2,o=i/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(o),Math.sin(o),1)}t.addAttribute("position",new Ce(r,3));var s=new Lt({fog:!1});this.cone=new Ct(t,s),this.add(this.cone),this.update()}function pi(e){this.bones=this.getBoneList(e);for(var t=new je,r=[],n=[],i=new re(0,0,1),a=new re(0,1,0),o=0;o<this.bones.length;o++){var s=this.bones[o];s.parent&&s.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),n.push(i.r,i.g,i.b),n.push(a.r,a.g,a.b))}t.addAttribute("position",new Ce(r,3)),t.addAttribute("color",new Ce(n,3));var u=new Lt({vertexColors:Ta,depthTest:!1,depthWrite:!1,transparent:!0});Ct.call(this,t,u),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function gi(e,t){this.light=e,this.light.updateMatrixWorld();var r=new sr(t,4,2),n=new Te({wireframe:!0,fog:!1});n.color.copy(this.light.color).multiplyScalar(this.light.intensity),Ue.call(this,r,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function mi(e){Me.call(this),this.light=e,this.light.updateMatrixWorld();var t=new Te({color:e.color,fog:!1}),r=new Te({color:e.color,fog:!1,wireframe:!0}),n=new je;n.addAttribute("position",new Se(new Float32Array(18),3)),this.add(new Ue(n,t)),this.add(new Ue(n,r)),this.update()}function vi(e,t){Me.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var r=new Yt(t);r.rotateY(.5*Math.PI);var n=new Te({vertexColors:Ta,wireframe:!0}),i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.addAttribute("color",new Se(a,3)),this.add(new Ue(r,n)),this.update()}function yi(e,t,r,n){e=e||10,t=t||10,r=new re(void 0!==r?r:4473924),n=new re(void 0!==n?n:8947848);for(var i=t/2,a=2*e/t,o=[],s=[],u=0,l=0,c=-e;u<=t;u++,c+=a){o.push(-e,0,c,e,0,c),o.push(c,0,-e,c,0,e);var f=u===i?r:n;f.toArray(s,l),l+=3,f.toArray(s,l),l+=3,f.toArray(s,l),l+=3,f.toArray(s,l),l+=3}var d=new je;d.addAttribute("position",new Ce(o,3)),d.addAttribute("color",new Ce(s,3));var h=new Lt({vertexColors:Ta});Ct.call(this,d,h)}function Mi(e,t,r,n,i,a){e=e||10,t=t||16,r=r||8,n=n||64,i=new re(void 0!==i?i:4473924),a=new re(void 0!==a?a:8947848);var o,s,u,l,c,f,d,h=[],p=[];for(l=0;l<=t;l++)u=l/t*(2*Math.PI),o=Math.sin(u)*e,s=Math.cos(u)*e,h.push(0,0,0),h.push(o,0,s),d=1&l?i:a,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(l=0;l<=r;l++)for(d=1&l?i:a,f=e-e/r*l,c=0;c<n;c++)u=c/n*(2*Math.PI),o=Math.sin(u)*f,s=Math.cos(u)*f,h.push(o,0,s),p.push(d.r,d.g,d.b),u=(c+1)/n*(2*Math.PI),o=Math.sin(u)*f,s=Math.cos(u)*f,h.push(o,0,s),p.push(d.r,d.g,d.b);var g=new je;g.addAttribute("position",new Ce(h,3)),g.addAttribute("color",new Ce(p,3));var m=new Lt({vertexColors:Ta});Ct.call(this,g,m)}function wi(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16776960,a=void 0!==n?n:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new je,l=new Ce(2*o*3,3);u.addAttribute("position",l),Ct.call(this,u,new Lt({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function xi(e,t){Me.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var r=new je;r.addAttribute("position",new Ce([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new Lt({fog:!1});this.add(new Nt(r,n)),r=new je,r.addAttribute("position",new Ce([0,0,0,0,0,1],3)),this.add(new Nt(r,n)),this.update()}function bi(e){function t(e,t,n){r(e,n),r(t,n)}function r(e,t){a.push(0,0,0),o.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(a.length/3-1)}var n=new je,i=new Lt({color:16777215,vertexColors:ba}),a=[],o=[],s={},u=new re(16755200),l=new re(16711680),c=new re(43775),f=new re(16777215),d=new re(3355443);t("n1","n2",u),t("n2","n4",u),t("n4","n3",u),t("n3","n1",u),t("f1","f2",u),t("f2","f4",u),t("f4","f3",u),t("f3","f1",u),t("n1","f1",u),t("n2","f2",u),t("n3","f3",u),t("n4","f4",u),t("p","n1",l),t("p","n2",l),t("p","n3",l),t("p","n4",l),t("u1","u2",c),t("u2","u3",c),t("u3","u1",c),t("c","t",f),t("p","c",d),t("cn1","cn2",d),t("cn3","cn4",d),t("cf1","cf2",d),t("cf3","cf4",d),n.addAttribute("position",new Ce(a,3)),n.addAttribute("color",new Ce(o,3)),Ct.call(this,n,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Ti(e,t){void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new je;i.setIndex(new Se(r,1)),i.addAttribute("position",new Se(n,3)),Ct.call(this,i,new Lt({color:t})),void 0!==e&&this.update(e)}function Si(e,t,r,n,i,a){Me.call(this),void 0===n&&(n=16776960),void 0===r&&(r=1),void 0===i&&(i=.2*r),void 0===a&&(a=.2*i),this.position.copy(t),this.line=new Nt(Hs,new Lt({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ue(Ws,new Te({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,i,a)}function _i(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new je;n.addAttribute("position",new Ce(t,3)),n.addAttribute("color",new Ce(r,3));var i=new Lt({vertexColors:Ta});Ct.call(this,n,i)}function Ei(){function e(e,a,o,s){t=e,r=o,n=-3*e+3*a-2*o-s,i=2*e-2*a+o+s}var t=0,r=0,n=0,i=0;return{initCatmullRom:function(t,r,n,i,a){e(r,n,a*(n-t),a*(i-r))},initNonuniformCatmullRom:function(t,r,n,i,a,o,s){var u=(r-t)/a-(n-t)/(a+o)+(n-r)/o,l=(n-r)/o-(i-r)/(o+s)+(i-n)/s;u*=o,l*=o,e(r,n,u,l)},calc:function(e){var a=e*e;return t+r*e+n*a+i*(a*e)}}}function Ai(e){this.points=e||[],this.closed=!1}function Ii(e,t,r,n){this.v0=e,this.v1=t,this.v2=r,this.v3=n}function Di(e,t,r){this.v0=e,this.v1=t,this.v2=r}function Li(e,t){this.v1=e,this.v2=t}function Ni(e,t,r,n,i,a){Ln.call(this,e,t,r,r,n,i,a)}function Ci(e,t,r,n,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new be(e,t,r,i,a,o)}function Oi(e){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new Er(e)}function Ri(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Rt(e,t)}function Pi(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new _t(e)}function zi(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Rt(e,t)}function ji(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Ot(e)}function Ui(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Ot(e)}function Bi(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Ot(e)}function Vi(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new l(e,t,r)}function ki(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Se(e,t).setDynamic(!0)}function Fi(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new _e(e,t)}function Gi(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ee(e,t)}function Hi(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ae(e,t)}function Wi(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Ie(e,t)}function Yi(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new De(e,t)}function Qi(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Le(e,t)}function qi(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ne(e,t)}function Xi(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Ce(e,t)}function Zi(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Oe(e,t)}function Ki(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ai.call(this,e),this.type="catmullrom",this.closed=!0}function Ji(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Ai.call(this,e),this.type="catmullrom"}function $i(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Ai.call(this,e),this.type="catmullrom"}function ea(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Ti(e,t)}function ta(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ct(new mr(e.geometry),new Lt({color:void 0!==t?t:16777215}))}function ra(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ct(new Vt(e.geometry),new Lt({color:void 0!==t?t:16777215}))}function na(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new zr(e)}function ia(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Ur(e)}function aa(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function oa(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===E.default&&(Number.EPSILON=Math.pow(2,-52)),void 0===S.default&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===b.default&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(void 0!==n&&null!==n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}}(),t.prototype={addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners,n=r[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,r=t[e.type];if(void 0!==r){e.target=this;var n=[],i=0,a=r.length;for(i=0;i<a;i++)n[i]=r[i];for(i=0;i<a;i++)n[i].call(this,e)}}}};var sa="84-threekit",ua={LEFT:0,MIDDLE:1,RIGHT:2},la=0,ca=1,fa=2,da=0,ha=1,pa=2,ga=3,ma=0,va=1,ya=2,Ma=1,wa=2,xa=0,ba=1,Ta=2,Sa=0,_a=1,Ea=2,Aa=3,Ia=4,Da=5,La=100,Na=101,Ca=102,Oa=103,Ra=104,Pa=200,za=201,ja=202,Ua=203,Ba=204,Va=205,ka=206,Fa=207,Ga=208,Ha=209,Wa=210,Ya=0,Qa=1,qa=2,Xa=3,Za=4,Ka=5,Ja=6,$a=7,eo=0,to=1,ro=2,no=0,io=1,ao=2,oo=3,so=4,uo=301,lo=302,co=303,fo=304,ho=305,po=306,go=307,mo=1e3,vo=1001,yo=1002,Mo=1003,wo=1004,xo=1005,bo=1006,To=1007,So=1008,_o=1009,Eo=1010,Ao=1011,Io=1012,Do=1013,Lo=1014,No=1015,Co=1016,Oo=1017,Ro=1018,Po=1019,zo=1020,jo=1021,Uo=1022,Bo=1023,Vo=1024,ko=1025,Fo=Bo,Go=1026,Ho=1027,Wo=2001,Yo=2002,Qo=2003,qo=2004,Xo=2100,Zo=2101,Ko=2102,Jo=2103,$o=2151,es=2201,ts=2400,rs=0,ns=1,is=2,as=3e3,os=3001,ss=3007,us=3002,ls=3004,cs=3005,fs=3006,ds=3200,hs=3201,ps=3300,gs=3301,ms={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),n=0;return function(){for(var i=0;i<36;i++)8===i||13===i||18===i||23===i?r[i]="-":14===i?r[i]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),e=15&n,n>>=4,r[i]=t[19===i?3&e|8:e]);return r.join("")}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*ms.DEG2RAD},radToDeg:function(e){return e*ms.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}};r.prototype={constructor:r,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new r,t=new r),e.set(n,n),t.set(i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*r-a*n+e.x,this.y=i*n+a*r+e.y,this}};var vs=0;n.DEFAULT_IMAGE=void 0,n.DEFAULT_MAPPING=300,n.prototype={constructor:n,isTexture:!0,set needsUpdate(e){!0===e&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name+" (Copy)",this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=ms.generateUUID()),void 0===e.images[r.uuid]&&(e.images[r.uuid]={uuid:r.uuid,url:function(e){var t;return void 0!==e.toDataURL?t=e:(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(r)}),t.image=r.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case mo:e.x=e.x-Math.floor(e.x);break;case vo:e.x=e.x<0?0:1;break;case yo:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case mo:e.y=e.y-Math.floor(e.y);break;case vo:e.y=e.y<0?0:1;break;case yo:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},(0,b.default)(n.prototype,t.prototype),i.prototype={constructor:i,isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*n+a[12]*i,this.y=a[1]*t+a[5]*r+a[9]*n+a[13]*i,this.z=a[2]*t+a[6]*r+a[10]*n+a[14]*i,this.w=a[3]*t+a[7]*r+a[11]*n+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,a=e.elements,o=a[0],s=a[4],u=a[8],l=a[1],c=a[5],f=a[9],d=a[2],h=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(u-d)<.01&&Math.abs(f-h)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+d)<.1&&Math.abs(f+h)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var g=(o+1)/2,m=(c+1)/2,v=(p+1)/2,y=(s+l)/4,M=(u+d)/4,w=(f+h)/4;return g>m&&g>v?g<.01?(r=0,n=.707106781,i=.707106781):(r=Math.sqrt(g),n=y/r,i=M/r):m>v?m<.01?(r=.707106781,n=0,i=.707106781):(n=Math.sqrt(m),r=y/n,i=w/n):v<.01?(r=.707106781,n=.707106781,i=0):(i=Math.sqrt(v),r=M/i,n=w/i),this.set(r,n,i,t),this}var x=Math.sqrt((h-f)*(h-f)+(u-d)*(u-d)+(l-s)*(l-s));return Math.abs(x)<.001&&(x=1),this.x=(h-f)/x,this.y=(u-d)/x,this.z=(l-s)/x,this.w=Math.acos((o+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new i,t=new i),e.set(r,r,r,r),t.set(n,n,n,n),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},a.prototype={constructor:a,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},(0,b.default)(a.prototype,t.prototype),o.prototype=(0,w.default)(a.prototype),o.prototype.constructor=o,o.prototype.isWebGLRenderTargetCube=!0,s.prototype={constructor:s,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=Math.cos(e._x/2),n=Math.cos(e._y/2),i=Math.cos(e._z/2),a=Math.sin(e._x/2),o=Math.sin(e._y/2),s=Math.sin(e._z/2),u=e.order;return"XYZ"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"YXZ"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"ZXY"===u?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i-a*o*s):"ZYX"===u?(this._x=a*n*i-r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i+a*o*s):"YZX"===u?(this._x=a*n*i+r*o*s,this._y=r*o*i+a*n*s,this._z=r*n*s-a*o*i,this._w=r*n*i-a*o*s):"XZY"===u&&(this._x=a*n*i-r*o*s,this._y=r*o*i-a*n*s,this._z=r*n*s+a*o*i,this._w=r*n*i+a*o*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],a=r[8],o=r[1],s=r[5],u=r[9],l=r[2],c=r[6],f=r[10],d=n+s+f;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(c-u)*t,this._y=(a-l)*t,this._z=(o-i)*t):n>s&&n>f?(t=2*Math.sqrt(1+n-s-f),this._w=(c-u)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+l)/t):s>f?(t=2*Math.sqrt(1+s-n-f),this._w=(a-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+f-n-s),this._w=(o-i)/t,this._x=(a+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t;return function(r,n){return void 0===e&&(e=new l),t=r.dot(n)+1,t<1e-6?(t=0,Math.abs(r.x)>Math.abs(r.z)?e.set(-r.y,r.x,0):e.set(0,-r.z,r.y)):e.crossVectors(r,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=r*l+a*o+n*u-i*s,this._y=n*l+a*s+i*o-r*u,this._z=i*l+a*u+r*s-n*o,this._w=a*l-r*o-n*s-i*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,a=this._w,o=a*e._w+r*e._x+n*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=n,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(n+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,o),l=Math.sin((1-t)*u)/s,c=Math.sin(t*u)/s;return this._w=a*l+this._w*c,this._x=r*l+this._x*c,this._y=n*l+this._y*c,this._z=i*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},(0,b.default)(s,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,a,o){var s=r[n+0],u=r[n+1],l=r[n+2],c=r[n+3],f=i[a+0],d=i[a+1],h=i[a+2],p=i[a+3];if(c!==p||s!==f||u!==d||l!==h){var g=1-o,m=s*f+u*d+l*h+c*p,v=m>=0?1:-1,y=1-m*m;if(y>E.default){var M=Math.sqrt(y),w=Math.atan2(M,m*v);g=Math.sin(g*w)/M,o=Math.sin(o*w)/M}var x=o*v;if(s=s*g+f*x,u=u*g+d*x,l=l*g+h*x,c=c*g+p*x,g===1-o){var b=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=b,u*=b,l*=b,c*=b}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),l.prototype={constructor:l,isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return!1===(t&&t.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new s),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e;return function(t,r){return void 0===e&&(e=new s),this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;this.x=i[0]*t+i[4]*r+i[8]*n+i[12],this.y=i[1]*t+i[5]*r+i[9]*n+i[13],this.z=i[2]*t+i[6]*r+i[10]*n+i[14];var a=i[3]*t+i[7]*r+i[11]*n+i[15];return this.divideScalar(a)},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*n-o*r,l=s*r+o*t-i*n,c=s*n+i*r-a*t,f=-i*t-a*r-o*n;return this.x=u*s+f*-i+l*-o-c*-a,this.y=l*s+f*-a+c*-i-u*-o,this.z=c*s+f*-o+u*-a-l*-i,this},project:function(){var e;return function(t){return void 0===e&&(e=new f),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new f),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(r,n){return void 0===e&&(e=new l,t=new l),e.set(r,r,r),t.set(n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,n=this.y,i=this.z;return this.x=n*e.z-i*e.y,this.y=i*e.x-r*e.z,this.z=r*e.y-n*e.x,this},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=n*s-i*o,this.y=i*a-r*s,this.z=r*o-n*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new l),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new l),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(ms.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var r=e;e=t,t=r}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},f.prototype={constructor:f,isMatrix4:!0,set:function(e,t,r,n,i,a,o,s,u,l,c,f,d,h,p,g){var m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=n,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=f,m[3]=d,m[7]=h,m[11]=p,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new f).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new l);var r=this.elements,n=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return r[0]=n[0]*i,r[1]=n[1]*i,r[2]=n[2]*i,r[4]=n[4]*a,r[5]=n[5]*a,r[6]=n[6]*a,r[8]=n[8]*o,r[9]=n[9]*o,r[10]=n[10]*o,this}}(),makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(n),u=Math.sin(n),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var f=a*l,d=a*c,h=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=d+h*u,t[5]=f-p*u,t[9]=-o*s,t[2]=p-f*u,t[6]=h+d*u,t[10]=a*s}else if("YXZ"===e.order){var g=s*l,m=s*c,v=u*l,y=u*c;t[0]=g+y*o,t[4]=v*o-m,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=m*o-v,t[6]=y+g*o,t[10]=a*s}else if("ZXY"===e.order){var g=s*l,m=s*c,v=u*l,y=u*c;t[0]=g-y*o,t[4]=-a*c,t[8]=v+m*o,t[1]=m+v*o,t[5]=a*l,t[9]=y-g*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var f=a*l,d=a*c,h=o*l,p=o*c;t[0]=s*l,t[4]=h*u-d,t[8]=f*u+p,t[1]=s*c,t[5]=p*u+f,t[9]=d*u-h,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var M=a*s,w=a*u,x=o*s,b=o*u;t[0]=s*l,t[4]=b-M*c,t[8]=x*c+w,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=w*c+x,t[10]=M-b*c}else if("XZY"===e.order){var M=a*s,w=a*u,x=o*s,b=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=M*c+b,t[5]=a*l,t[9]=w*c-x,t[2]=x*c-w,t[6]=o*l,t[10]=b*c+M}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z,a=e.w,o=r+r,s=n+n,u=i+i,l=r*o,c=r*s,f=r*u,d=n*s,h=n*u,p=i*u,g=a*o,m=a*s,v=a*u;return t[0]=1-(d+p),t[4]=c-v,t[8]=f+m,t[1]=c+v,t[5]=1-(l+p),t[9]=h-g,t[2]=f-m,t[6]=h+g,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,r;return function(n,i,a){void 0===e&&(e=new l,t=new l,r=new l);var o=this.elements;return r.subVectors(n,i).normalize(),0===r.lengthSq()&&(r.z=1),e.crossVectors(a,r).normalize(),0===e.lengthSq()&&(r.z+=1e-4,e.crossVectors(a,r).normalize()),t.crossVectors(r,e),o[0]=e.x,o[4]=t.x,o[8]=r.x,o[1]=e.y,o[5]=t.y,o[9]=r.y,o[2]=e.z,o[6]=t.z,o[10]=r.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,a=r[0],o=r[4],s=r[8],u=r[12],l=r[1],c=r[5],f=r[9],d=r[13],h=r[2],p=r[6],g=r[10],m=r[14],v=r[3],y=r[7],M=r[11],w=r[15],x=n[0],b=n[4],T=n[8],S=n[12],_=n[1],E=n[5],A=n[9],I=n[13],D=n[2],L=n[6],N=n[10],C=n[14],O=n[3],R=n[7],P=n[11],z=n[15];return i[0]=a*x+o*_+s*D+u*O,i[4]=a*b+o*E+s*L+u*R,i[8]=a*T+o*A+s*N+u*P,i[12]=a*S+o*I+s*C+u*z,i[1]=l*x+c*_+f*D+d*O,i[5]=l*b+c*E+f*L+d*R,i[9]=l*T+c*A+f*N+d*P,i[13]=l*S+c*I+f*C+d*z,i[2]=h*x+p*_+g*D+m*O,i[6]=h*b+p*E+g*L+m*R,i[10]=h*T+p*A+g*N+m*P,i[14]=h*S+p*I+g*C+m*z,i[3]=v*x+y*_+M*D+w*O,i[7]=v*b+y*E+M*L+w*R,i[11]=v*T+y*A+M*N+w*P,i[15]=v*S+y*I+M*C+w*z,this},multiplyToArray:function(e,t,r){var n=this.elements;return this.multiplyMatrices(e,t),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new l);for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix4(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],f=e[10],d=e[14];return e[3]*(+i*s*c-n*u*c-i*o*f+r*u*f+n*o*d-r*s*d)+e[7]*(+t*s*d-t*u*f+i*a*f-n*a*d+n*u*l-i*s*l)+e[11]*(+t*u*c-t*o*d-i*a*c+r*a*d+i*o*l-r*u*l)+e[15]*(-n*o*l-t*s*c+t*o*f+n*a*c-r*a*f+r*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],l=n[5],c=n[6],f=n[7],d=n[8],h=n[9],p=n[10],g=n[11],m=n[12],v=n[13],y=n[14],M=n[15],w=h*y*f-v*p*f+v*c*g-l*y*g-h*c*M+l*p*M,x=m*p*f-d*y*f-m*c*g+u*y*g+d*c*M-u*p*M,b=d*v*f-m*h*f+m*l*g-u*v*g-d*l*M+u*h*M,T=m*h*c-d*v*c-m*l*p+u*v*p+d*l*y-u*h*y,S=i*w+a*x+o*b+s*T;if(0===S){var _="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(_);return console.warn(_),this.identity()}var E=1/S;return r[0]=w*E,r[1]=(v*p*s-h*y*s-v*o*g+a*y*g+h*o*M-a*p*M)*E,r[2]=(l*y*s-v*c*s+v*o*f-a*y*f-l*o*M+a*c*M)*E,r[3]=(h*c*s-l*p*s-h*o*f+a*p*f+l*o*g-a*c*g)*E,r[4]=x*E,r[5]=(d*y*s-m*p*s+m*o*g-i*y*g-d*o*M+i*p*M)*E,r[6]=(m*c*s-u*y*s-m*o*f+i*y*f+u*o*M-i*c*M)*E,r[7]=(u*p*s-d*c*s+d*o*f-i*p*f-u*o*g+i*c*g)*E,r[8]=b*E,r[9]=(m*h*s-d*v*s-m*a*g+i*v*g+d*a*M-i*h*M)*E,r[10]=(u*v*s-m*l*s+m*a*f-i*v*f-u*a*M+i*l*M)*E,r[11]=(d*l*s-u*h*s-d*a*f+i*h*f+u*a*g-i*l*g)*E,r[12]=T*E,r[13]=(d*v*o-m*h*o+m*a*p-i*v*p-d*a*y+i*h*y)*E,r[14]=(m*l*o-u*v*o-m*a*c+i*v*c+u*a*y-i*l*y)*E,r[15]=(u*h*o-d*l*o+d*a*c-i*h*c-u*a*p+i*l*p)*E,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+r,u*o-n*s,u*s+n*o,0,u*o+n*s,l*o+r,l*s-n*a,0,u*s-n*o,l*s+n*a,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r,n){return this.set(1,e,t,0,0,1,r,0,0,0,1,0,0,0,0,1),n&&this.transpose(),this},compose:function(e,t,r,n){return this.makeRotationFromQuaternion(t),n&&this.multiply((new f).makeShear(n.x,n.y,n.z)),this.scale(r),this.setPosition(e),this},decompose:function(){var e,t;return function(r,n,i,a){if(a)return this.decompose2(r,n,i,a);void 0===e&&(e=new l,t=new f);var o=this.elements,s=e.set(o[0],o[1],o[2]).length(),u=e.set(o[4],o[5],o[6]).length(),c=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),r.x=o[12],r.y=o[13],r.z=o[14],t.elements.set(this.elements);var d=1/s,h=1/u,p=1/c;return t.elements[0]*=d,t.elements[1]*=d,t.elements[2]*=d,t.elements[4]*=h,t.elements[5]*=h,t.elements[6]*=h,t.elements[8]*=p,t.elements[9]*=p,t.elements[10]*=p,n.setFromRotationMatrix(t),i.x=s,i.y=u,i.z=c,this}}(),decompose2:function(){return function(e,t,r,n){var i=this.clone();if(i[3]=0,i[7]=0,i[11]=0,i[15]=1,0===i.determinant())return console.error("THREE.Matrix4.decompose2(): Cannot apply decompose2 on singular matrix"),this;var a=(new f).copy(this),o=a.elements;e.set(o[12],o[13],o[14]),o[12]=o[13]=o[14]=0;var s=new l(o[0],o[1],o[2]),u=new l(o[4],o[5],o[6]),c=new l(o[8],o[9],o[10]);return r.setX(s.length()),s.divideScalar(r.x),n.setX(s.dot(u)),u.sub(s.clone().multiplyScalar(n.x)),r.setY(u.length()),u.divideScalar(r.y),n.setX(n.x/r.y),n.setY(s.dot(c)),c.sub(s.clone().multiplyScalar(n.y)),n.setZ(u.dot(c)),c.sub(u.clone().multiplyScalar(n.z)),r.setZ(c.length()),c.divideScalar(r.z),n.setY(n.y/r.z),n.setZ(n.z/r.z),o[0]=s.x,o[4]=u.x,o[8]=c.x,o[1]=s.y,o[5]=u.y,o[9]=c.y,o[2]=s.z,o[6]=u.z,o[10]=c.z,s.dot((new l).crossVectors(u,c))<0&&(r.multiplyScalar(-1),a.multiplyScalar(-1)),t.setFromRotationMatrix(a),this}}(),makePerspective:function(e,t,r,n,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),u=2*i/(r-n),l=(t+e)/(t-e),c=(r+n)/(r-n),f=-(a+i)/(a-i),d=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,r,n,i,a){var o=this.elements,s=1/(t-e),u=1/(r-n),l=1/(a-i),c=(t+e)*s,f=(r+n)*u,d=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},h.prototype=(0,w.default)(n.prototype),h.prototype.constructor=h,h.prototype.isCubeTexture=!0,Object.defineProperty(h.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var ys=new n,Ms=new h,ws=[],xs=[];J.prototype.setValue=function(e,t){for(var r=this.seq,n=0,i=r.length;n!==i;++n){var a=r[n];a.setValue(e,t[a.id])}};var bs=/([\w\d_]+)(\])?(\[|\.)?/g;te.prototype.setValue=function(e,t,r){var n=this.map[t];void 0!==n&&n.setValue(e,r,this.renderer)},te.prototype.set=function(e,t,r){var n=this.map[r];void 0!==n&&n.setValue(e,t[r],this.renderer)},te.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)},te.upload=function(e,t,r,n){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=r[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,n)}},te.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var a=e[n];a.id in t&&r.push(a)}return r};var Ts={merge:function(e){for(var t={},r=0;r<e.length;r++){var n=this.clone(e[r]);for(var i in n)t[i]=n[i]}return t},clone:function(e){var t={};for(var r in e)t[r]=Ts.cloneParameters(e[r]);return t},cloneParameters:function(e){var t={};for(var r in e)t[r]=Ts.cloneParameter(e[r]);return t},cloneParameter:function(e){return e&&(e.isColor||e.isMatrix3||e.isMatrix4||e.isVector2||e.isVector3||e.isVector4||e.isTexture)?e.clone():Array.isArray(e)?e.slice():e}},Ss={alphamap_fragment:"#ifdef USE_ALPHAMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 alphaUv = alphaMapUV();\n#else\n\tvec2 alphaUv = vUv;\n#endif\n\tdiffuseColor.a *= alphaMapTexelTransform( texture2D( alphaMap, alphaUv ) ).g;\n#endif\n",alphamap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_ALPHAMAP\n\t\tuniform sampler2D alphaMap;\n\t#endif\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 aoUv = aoMapUV();\n#else\n\tvec2 aoUv = vUv2;\n#endif\n\tfloat ambientOcclusion = ( aoMapTexelTransform( texture2D( aoMap, aoUv ) ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n#if ! defined( TEXTURE_SLOTS )\n\tuniform sampler2D aoMap;\n#endif\n\tuniform float aoMapIntensity;\n#endif\n",anisotropy_fragment:"\n#ifdef ANISOTROPY\n  #ifdef USE_ANISOTROPYMAP\n    float texelAnisotropyRed = anisotropyMapTexelTransform( texture2D( anisotropyMap, anisotropyMapUV() ) ).r;\n    float anisotropyStrength = clamp( anisotropy + texelAnisotropyRed, -1.0, 1.0 );\n  #else\n    float anisotropyStrength = anisotropy;\n  #endif\n  #if defined( ANISOTROPYROTATION ) || defined( USE_ANISOTROPYROTATIONMAP )\n    #ifdef USE_ANISOTROPYROTATIONMAP\n      float anisotropyRotationStrength = anisotropyRotation +\n                                         anisotropyRotationMapTexelTransform( texture2D( anisotropyRotationMap, anisotropyRotationMapUV() ) ).r;\n    #else\n      float anisotropyRotationStrength = anisotropyRotation;\n    #endif\n  #endif\n#endif\n",anisotropy_pars_fragment:"\n#ifdef ANISOTROPY\n  uniform float anisotropy;\n  varying vec4 vTangent;\n  #ifdef USE_ANISOTROPYMAP\n    #if ! defined( TEXTURE_SLOTS )\n      uniform sampler2D anisotropyMap;\n    #endif\n  #endif\n  #if defined( ANISOTROPYROTATION ) || defined( USE_ANISOTROPYROTATIONMAP )\n    uniform float anisotropyRotation;\n  #endif\n  #ifdef USE_ANISOTROPYROTATIONMAP\n    #if ! defined( TEXTURE_SLOTS )\n      uniform sampler2D anisotropyRotationMap;\n    #endif\n  #endif\n  float applyGainBrightnessRed( float redTexel, vec4 gainBrightnessCoeff ) {\n    if( gainBrightnessCoeff.w < 0.0 ) {\n      redTexel = whiteCompliment( redTexel );\n    }\n    return ( redTexel - gainBrightnessCoeff.x ) * gainBrightnessCoeff.y + ( gainBrightnessCoeff.z + gainBrightnessCoeff.x );\n  }\n  vec2 calcAnisotropyUV( float anisotropyLocal) {\n    float oneMinusAbsAnisotropy = 1.0 - min( abs( anisotropyLocal ) * 0.9, 0.9 );\n    vec2 anisotropyUV = vec2 ( 1.0 / oneMinusAbsAnisotropy, oneMinusAbsAnisotropy );\n    if( anisotropyLocal < 0.0 ) {\n      anisotropyUV.xy = anisotropyUV.yx;    }\n    return anisotropyUV;\n  }\n#endif\n",anisotropy_pars_vertex:"#ifdef ANISOTROPY\n  varying vec4 vTangent;\n#endif\n",anisotropy_vertex:"#ifdef ANISOTROPY\n  vTangent = vec4(normalize( normalMatrix * tangent.xyz ), tangent.w);\n#endif\n",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif ( decayExponent > 0.0 && cutoffDistance > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\telse if ( decayExponent < 0.0 ) {\n\t\tfloat maxDistanceCutoffFactor = 0.0;\n\t\tif ( lightDistance > 0.0 ) {\n\t\t\tmaxDistanceCutoffFactor = 1.0;\n\t\t\tif( cutoffDistance > 0.0 ) {\n\t\t\t\tmaxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\t}\n\t\t\tfloat distanceFalloff = 1.0 / ( pow2( lightDistance ) );\n\t\t\tmaxDistanceCutoffFactor * distanceFalloff;\n\t\t}\n\t\treturn maxDistanceCutoffFactor;\n\t}\n\telse {\n\t\treturn 1.0;\n\t}\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nfloat F_Schlick( const in float specular, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specular ) * fresnel + specular;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\n#ifdef ANISOTROPY\n  float D_GGXAniso( const in vec2 anisotropicM, const in vec2 xyDotH, const in float dotNH ) {\n  \tvec3 aniso = vec3(xyDotH.x / anisotropicM.x, xyDotH.y / anisotropicM.y, dotNH);\n  \tfloat anisoTerm = dot(aniso, aniso);\n    return RECIPROCAL_PI / ( anisotropicM.x * anisotropicM.y * anisoTerm * anisoTerm + EPSILON );\n  }\n#else\n\tfloat D_GGX( const in float alpha, const in float dotNH ) {\n\t\tfloat a2 = pow2( alpha );\n\t\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\t\treturn RECIPROCAL_PI * pow2( alpha / denom );\n\t}\n#endif\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = clamp( dot( geometry.normal, incidentLight.direction ), EPSILON, 1.0 );\tfloat dotNV = clamp( dot( geometry.normal, geometry.viewDir ), EPSILON, 1.0 );\tfloat dotNH = clamp( dot( geometry.normal, halfDir ), EPSILON, 1.0 );\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n#ifdef ANISOTROPY\n\tvec2 xyDotH = vec2( dot( geometry.anisotropicS, halfDir ), dot( geometry.anisotropicT, halfDir ) );\n\tfloat D = D_GGXAniso( geometry.anisotropicM, xyDotH, dotNH );\n#else\n\tfloat D = D_GGX( alpha, dotNH );\n#endif\n\treturn F * ( G * D );\n}\nfloat BRDF_ClearCoat_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttenuation ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = clamp( dot( geometry.normal, incidentLight.direction ), EPSILON, 1.0 );\tfloat dotNV = clamp( dot( geometry.normal, geometry.viewDir ), EPSILON, 1.0 );\tfloat dotNH = clamp( dot( geometry.normal, halfDir ), EPSILON, 1.0 );\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tfloat F = F_Schlick( specular, dotLH );\n\tlayerAttenuation = F;\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n#ifdef ANISOTROPY\n\tvec2 xyDotH = vec2( dot( geometry.anisotropicS, halfDir ), dot( geometry.anisotropicT, halfDir ) );\n\tfloat D = D_GGXAniso( geometry.anisotropicM, xyDotH, dotNH );\n#else\n\tfloat D = D_GGX( alpha, dotNH );\n#endif\n\treturn F * ( G * D );\n}\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\tn = 0;\n\tif ( config == 0 ) {\n\t} else if ( config == 1 ) {\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 2 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 3 ) {\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\t} else if ( config == 4 ) {\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t} else if ( config == 5 ) {\n\t\tn = 0;\n\t} else if ( config == 6 ) {\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 7 ) {\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\t} else if ( config == 8 ) {\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\t} else if ( config == 9 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\t} else if ( config == 10 ) {\n\t\tn = 0;\n\t} else if ( config == 11 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t} else if ( config == 12 ) {\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t} else if ( config == 13 ) {\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t} else if ( config == 14 ) {\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t} else if ( config == 15 ) {\n\t\tn = 4;\n\t}\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n}\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\treturn res;\n}\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n}\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\tT2 = - cross( N, T1 );\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\tsum = max( 0.0, sum );\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\treturn Lo_i;\n}\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\tvec4 brdfLtcApproxParams, t;\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\treturn specularReflectance;\n}\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\treturn diffuseReflectance;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat BRDF_ClearCoat_GGX_Environment( const in GeometricContext geometry, const in float specular, const in float roughness, out float layerAttention ) {\n\tvec3 incidentLightDirection = reflect( geometry.viewDir, geometry.normal );\n\tvec3 halfDir = normalize( incidentLightDirection + geometry.viewDir );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotLH = saturate( dot( incidentLightDirection, halfDir ) );\n\tlayerAttention = F_Schlick( specular, dotLH );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specular * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n#if ! defined( TEXTURE_SLOTS )\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n#endif\n\tvec2 dHdxy_fwd() {\n#if defined( TEXTURE_SLOTS )\n\t\tvec2 bumpUv = bumpMapUV();\n#else\n\t\tvec2 bumpUv = vUv;\n#endif\n\t\tvec2 dSTdx = dFdx( bumpUv );\n\t\tvec2 dSTdy = dFdy( bumpUv );\n\t\tfloat Hll = bumpMapTexelTransform( texture2D( bumpMap, bumpUv ) ).x;\n\t\tfloat dBx = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdx ) ).x - Hll;\n\t\tfloat dBy = bumpMapTexelTransform( texture2D( bumpMap, bumpUv + dSTdy ) ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( VARYING_VVIEWPOSITION )\n\t\tvarying vec3 vViewPosition;\n\t\t#define VARYING_VVIEWPOSITION 1\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\t#if ! defined( VARYING_VVIEWPOSITION )\n    \tvarying vec3 vViewPosition;\n    \t#define VARYING_VVIEWPOSITION 1\n    #endif\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif\n",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif\n",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand_OLD( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nhighp float rand_NEW( const in vec2 p ) {\n\tvec2 p2  = fract(p * vec2(5.3987, 5.4421));\n\tp2 += dot(p2.yx, p2.xy + vec2(21.5351, 14.3137));\n\tfloat pxy = p2.x * p2.y;\n\treturn ( fract(pxy * 95.4307) + fract(pxy * 75.04961) ) * 0.5;\n}\n#define rand rand_NEW\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef ANISOTROPY\n\tvec2 anisotropicM;\n\tvec3 anisotropicS;\n\tvec3 anisotropicT;\n#endif\n};\nvec3 transformPosition( in vec3 pos, in mat4 matrix ) {\n\treturn ( matrix * vec4( pos, 1.0 ) ).xyz;\n}\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nfloat MipLevelInfo_standard( vec3 vec, vec3 normal, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn mipLevel;\n}\nfloat MipLevelInfo_aa( vec3 vec, vec3 normal, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tvec3 dx = dFdx( vec ) * 128.0;\n\tvec3 dy = dFdy( vec ) * 128.0;\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = pow( d, 0.5);\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn mipLevel;\n}\n#define MipLevelInfo MipLevelInfo_standard\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 1.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, vec3 normal, float roughness ) {\n\troughness *= 0.88;\n\tfloat roughnessVal = roughness * cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tfloat mipLevel = MipLevelInfo(reflectedDirection, normal, r1, roughness);\n\tfloat s = fract( mipLevel );\n\tfloat level0 = floor( mipLevel );\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\t\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"#ifdef FLIP_SIDED\n\tobjectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb += ditherScale * ditherOffset( gl_FragCoord.xy + gl_FragColor.rg + gl_FragColor.ba + normal.xy );\n  \n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\t#if defined( DITHERING_SCALE )\n\t\tuniform float ditherScale;\n\t#endif\n\tvec3 ditherOffset( vec2 uv ) {\n\t\tfloat grid_position = rand( uv );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB *= 2.0 * ( 2.0 * grid_position - 1.0 );\n\t\treturn dither_shift_RGB;\n\t}\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 emissiveUv = emissiveMapUV();\n#else\n\tvec2 emissiveUv = vUv;\n#endif\n\tvec4 emissiveColor = texture2D( emissiveMap, emissiveUv );\n\temissiveColor.rgb = emissiveMapTexelTransform( emissiveMapTexelToLinear( emissiveColor ) ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_EMISSIVEMAP\n\t\tuniform sampler2D emissiveMap;\n\t#endif\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",falloff_fragment:"#ifdef FALLOFF\nfloat falloffModulator = abs( dot( normal, normalize( vViewPosition ) ) );\nfalloffModulator = ( falloffModulator * falloffModulator * ( 3.0 - 2.0 * falloffModulator ) );\ndiffuseColor = mix( falloffDiffuseColor, diffuseColor, falloffModulator );\n#endif",falloffalphamap_fragment:"#ifdef USE_FALLOFFALPHAMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 falloffAlphaUv = falloffAlphaMapUV();\n#else\n\tvec2 falloffAlphaUv = vUv;\n#endif\n\tfalloffDiffuseColor.a *= falloffAlphaMapTexelTransform( texture2D( falloffAlphaMap, falloffAlphaUv ) ).g;\n#endif\n",falloffmap_fragment:"#ifdef USE_FALLOFFMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 falloffMapUv = falloffMapUV();\n#else\n\tvec2 falloffMapUv = vUv;\n#endif\n\tvec4 falloffTexelColor = texture2D( falloffMap, falloffMapUv );\n\tfalloffTexelColor = falloffMapTexelTransform( falloffMapTexelToLinear( falloffTexelColor ) );\n\tfalloffDiffuseColor *= falloffTexelColor;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 lightUv = lightMapUV();\n#else\n\tvec2 lightUv = vUv2;\n#endif\n\treflectedLight.indirectDiffuse += PI * emissiveMapTexelTransform( texture2D( lightMap, lightUv ) ).xyz;\n#endif\n",lightmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_LIGHTMAP\n\t\tuniform sampler2D lightMap;\n\t\tuniform float lightMapIntensity;\n\t#endif\n#endif\n",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat spreadAngle;\n\t\tvec2 shadowMapSize;\n\t\tvec3 shadowCameraParams;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.direction = lVector / lightDistance;\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tvec3 shadowCameraParams;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.direction = lVector / lightDistance;\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, worldNormal, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"#if ! defined( VARYING_VVIEWPOSITION )\n    varying vec3 vViewPosition;\n    #define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n    }\n#endif\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\n\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n    void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n        vec3 matDiffColor = material.diffuseColor;\n        vec3 matSpecColor = material.specularColor;\n        vec3 lightColor   = rectAreaLight.color;\n        float roughness = material.specularRoughness;\n        vec3 spec = Rect_Area_Light_Specular_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n                roughness,\n                ltcMat, ltcMag );\n        vec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n                geometry,\n                rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n        reflectedLight.directSpecular += lightColor * matSpecColor * spec;\n        reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n    }\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\tvec3 specularRadiance = irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\tfloat layerAttention;\n\t\tvec3 clearCoatSpecularRadiance = irradiance * BRDF_ClearCoat_GGX( directLight, geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\n\t\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\n\t\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\n\t#endif\n\treflectedLight.directSpecular += specularRadiance;\n\treflectedLight.directDiffuse += diffuseRadiance;\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 diffuseRadiance = irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\tdiffuseRadiance = mix( diffuseRadiance, vec3( 0.0 ), material.clearCoat );\n\t#endif\n\treflectedLight.indirectDiffuse += diffuseRadiance;\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 specularRadiance = radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\tfloat layerAttention;\n\t\tvec3 clearCoatSpecularRadiance = clearCoatRadiance * BRDF_ClearCoat_GGX_Environment( geometry, material.clearCoat, material.clearCoatRoughness, layerAttention );\n\t\tspecularRadiance = mix( specularRadiance, clearCoatSpecularRadiance, material.clearCoat );\n\t#endif\n\treflectedLight.indirectSpecular += specularRadiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n#ifdef ANISOTROPY\n\tgeometry.anisotropicM = calcAnisotropyUV( anisotropyStrength ) * pow2( clamp( roughnessFactor, 0.02, 1.0 ) );\n\tvec3 unitTangent  = normalize( vTangent.xyz  );\n\tvec3 unitBinormal = cross( normal, unitTangent );\n\t#ifdef ANISOTROPYROTATION\n\t\tfloat anisotropyRotationAngle = anisotropyRotationStrength * 2.0 * PI;\n\t\tfloat anisoCos = cos(anisotropyRotationAngle);\n\t\tfloat anisoSin = sin(anisotropyRotationAngle);\n\t\tgeometry.anisotropicS = (unitBinormal * anisoCos - unitTangent  * anisoSin) * vTangent.w;\n\t\tgeometry.anisotropicT =  unitTangent  * anisoCos + unitBinormal * anisoSin;\n\t#else\n\t\tgeometry.anisotropicS = unitBinormal * vTangent.w;\t\tgeometry.anisotropicT = unitTangent;\n\t#endif\n#endif\nIncidentLight directLight;\n#ifdef USE_SHADOWMAP\n\tinitShadows();\n#endif\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, 0.0, spotLight.shadowCameraParams, vSpotShadowCoord[ i ], 1 ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, 0.0, directionalLight.spreadAngle, directionalLight.shadowCameraParams, vDirectionalShadowCoord[ i ], 0 ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\t#if defined( TEXTURE_SLOTS )\n\t\t\tvec2 lightUv = lightMapUV();\n\t\t\tvec3 lightMapIrradiance = lightMapTexelTransform( texture2D( lightMap, vUv2 ) ).xyz;\n\t\t#else\n\t\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#endif\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t \tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif\n",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif\n",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n#if defined( TEXTURE_SLOTS )\n\tvec2 mapUv = mapUV();\n#else\n\tvec2 mapUv = vUv;\n#endif\n\tvec4 texelColor = texture2D( map, mapUv );\n\ttexelColor = mapTexelTransform( mapTexelToLinear( texelColor ) );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_MAP\n\t\tuniform sampler2D map;\n\t#endif\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 metalnessUv = metalnessMapUV();\n\t#else\n\t\tvec2 metalnessUv = vUv;\n\t#endif\n\tvec4 texelMetalness = metalnessMapTexelTransform( texture2D( metalnessMap, metalnessUv ) );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_METALNESSMAP\n\t\tuniform sampler2D metalnessMap;\n\t#endif\n#endif\n",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif\n",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_flip:"#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#endif\n#ifdef USE_BUMPMAP\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\t#if ! defined( TEXTURE_SLOTS )\n\t\tuniform sampler2D normalMap;\n\t#endif\n\t\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t#if defined( TEXTURE_SLOTS )\n\t\t\tvec2 normalUv = normalMapUV();\n\t\t#else\n\t\t\tvec2 normalUv = vUv;\n\t\t#endif\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( normalUv.st );\n\t\tvec2 st1 = dFdy( normalUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\t\t\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 NfromST = cross( S, T );\n\t\tif( dot( NfromST, N ) < 0.0 ) {\n\t\t\tS *= -1.0;\n\t\t\tT *= -1.0;\n\t\t}\n\t\tvec3 mapN = texture2D( normalMap, normalUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nvec4 packDepthToRGBA( const in highp float v ) {\n  const highp vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\n  const highp vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\n  highp vec4 res = mod( v * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );  res -= res.xxyz * bit_mask;\n  return res;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n  const highp vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n\treturn dot( v, bit_shift );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"#ifdef USE_SKINNING\n\tvec4 mvPosition = modelViewMatrix * skinned;\n#else\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 roughnessUv = roughnessMapUV();\n\t#else\n\t\tvec2 roughnessUv = vUv;\n\t#endif\n\tvec4 texelRoughness = roughnessMapTexelTransform( texture2D( roughnessMap, roughnessUv ) );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_ROUGHNESSMAP\n\t\tuniform sampler2D roughnessMap;\n\t#endif\n#endif\n",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\t#if defined( SHADOWMAP_TYPE_PCSS )\n\t\t#define PCSS_QUALITY_LEVEL 5\n\t\t#define PCSS_NUM_POISSON_SAMPLES 16\n\t\t#define PCSS_ROTATE_POISSON_SAMPLES 1\n\t\tvec2 poissonDisk[PCSS_NUM_POISSON_SAMPLES];\n\t\tvoid initPercentCloserSoftShadow( const in vec2 randomSeed )\t{\n\t\t\tpoissonDisk[0] = vec2(-0.94201624, -0.39906216 );\n\t\t\tpoissonDisk[1] = vec2( 0.94558609, -0.76890725 );\n\t\t\tpoissonDisk[2] = vec2( -0.094184101, -0.92938870 );\n\t\t\tpoissonDisk[3] = vec2( 0.34495938, 0.29387760 );\n\t\t\tpoissonDisk[4] = vec2( -0.91588581, 0.45771432 );\n\t\t\tpoissonDisk[5] = vec2( -0.81544232, -0.87912464 );\n\t\t\tpoissonDisk[6] = vec2( -0.38277543, 0.27676845 );\n\t\t\tpoissonDisk[7] = vec2( 0.97484398, 0.75648379 );\n\t\t\tpoissonDisk[8] = vec2( 0.44323325, -0.97511554 );\n\t\t\tpoissonDisk[9] = vec2( 0.53742981, -0.47373420 );\n\t\t\tpoissonDisk[10] = vec2( -0.26496911, -0.41893023 );\n\t\t\tpoissonDisk[11] = vec2( 0.79197514, 0.19090188 );\n\t\t\tpoissonDisk[12] = vec2( -0.24188840, 0.99706507 );\n\t\t\tpoissonDisk[13] = vec2( -0.81409955, 0.91437590 );\n\t\t\tpoissonDisk[14] = vec2( 0.19984126, 0.78641367 );\n\t\t\tpoissonDisk[15] = vec2( 0.14383161, -0.14100790 );\n\t\t}\n\t\tmat2 createRotationMatrix( const in vec2 randomSeed ) {\n\t\t\tfloat angle = rand( randomSeed + cameraPosition.x + cameraPosition.y + cameraPosition.z ) * PI2;\n\t\t\tfloat c = cos( angle ), s = sin( angle );\n\t\t\treturn mat2( c, s, -s, c );\n\t\t}\n\t\tfloat penumbraSize( const in float zReceiverLightSpace, const in float zBlockerLightSpace ) {\t\t\treturn (zReceiverLightSpace - zBlockerLightSpace) / zBlockerLightSpace;\n\t\t}\n\t\tfloat findBlockerLightZ( sampler2D shadowMap, const in vec2 uv, const in float zReceiverClipSpace, const in float zReceiverLightSpace, const in float shadowRadius, const in float spreadAngle, const in vec3 shadowCameraParams, const in vec2 randomSeed, const int lightType ) {\n\t\t\tfloat lightFrustrumWidth = 2.0 * shadowCameraParams.y * tan(shadowCameraParams.x * 0.5);\n\t\t\tfloat searchRadius = 0.0;\n\t\t\tsearchRadius = ( lightType == 0) ? zReceiverLightSpace * spreadAngle/shadowCameraParams.x : ( shadowRadius / lightFrustrumWidth ) * ( zReceiverLightSpace - shadowCameraParams.y ) / zReceiverLightSpace;\n\t\t\tfloat blockerLightZSum = 0.0;\n\t\t\tint numBlockers = 0;\n\t\t\tfloat angle = rand( randomSeed ) * PI2;\n\t\t\tfloat s = sin(angle);\n\t\t\tfloat c = cos(angle);\n\t\t\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i++ ) {\n\t\t\t#if PCSS_ROTATE_POISSON_SAMPLES == 1\n\t\t\t\tvec2 poissonSample = vec2(poissonDisk[i].y * c + poissonDisk[i].x * s, poissonDisk[i].y * -s + poissonDisk[i].x * c);\n\t\t\t#else\n\t\t\t\tvec2 poissonSample = poissonDisk[i];\n\t\t\t#endif\n\t\t\t\tfloat shadowMapDepth = unpackRGBAToDepth( texture2D( shadowMap, uv + poissonSample * searchRadius ) );\n\t\t\t\tif ( shadowMapDepth < zReceiverClipSpace ) {\n\t\t\t\t\tblockerLightZSum += shadowMapDepth;\n\t\t\t\t\tnumBlockers ++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif( numBlockers == 0 ) return -1.0;\n\t\t\treturn blockerLightZSum / float( numBlockers );\n\t\t}\n\t\tfloat percentCloserFilter( sampler2D shadowMap, vec2 uv, float receiverClipZ, float filterRadius, const in vec2 randomSeed ) {\n\t\t\tint numBlockers = 0;\n\t\t\tfloat angle = rand( randomSeed ) * PI2;\n\t\t\tfloat s = sin(angle);\n\t\t\tfloat c = cos(angle);\n\t\t\tfor( int i = 0; i < PCSS_NUM_POISSON_SAMPLES; i ++ ) {\n\t\t\t#if PCSS_ROTATE_POISSON_SAMPLES == 1\n\t\t\t\tvec2 poissonSample = vec2(poissonDisk[i].y * c + poissonDisk[i].x * s, poissonDisk[i].y * -s + poissonDisk[i].x * c);\n\t\t\t#else\n\t\t\t\tvec2 poissonSample = poissonDisk[i];\n\t\t\t#endif\n\t\t\t\tvec2 uvOffset = poissonSample * filterRadius;\n\t\t\t\tfloat blockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv + uvOffset ) );\n\t\t\t\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\n\t\t\t\tblockerClipZ = unpackRGBAToDepth( texture2D( shadowMap, uv - uvOffset ) );\n\t\t\t\tif( receiverClipZ <= blockerClipZ ) numBlockers ++;\n\t\t\t}\n\t\t\treturn float( numBlockers ) / ( 2.0 * float( PCSS_NUM_POISSON_SAMPLES ) );\n\t\t}\n\t\tfloat percentCloserSoftShadow( sampler2D shadowMap, const in float shadowRadius, const in float spreadAngle, const in vec3 shadowCameraParams, const in vec4 coords, const int lightType ) {\n\t\t\tvec2 uv = coords.xy;\n\t\t\tfloat receiverLightZ = coords.z;\n\t\t\tfloat cameraNear = shadowCameraParams.y, cameraFar = shadowCameraParams.z;\n\t\t\tfloat zReceiverLightSpace;\n\t\t\tif(lightType == 0)\n\t\t\t\tzReceiverLightSpace = -orthographicDepthToViewZ( receiverLightZ, cameraNear, cameraFar );\n\t\t\telse\n\t\t\t\tzReceiverLightSpace = -perspectiveDepthToViewZ( receiverLightZ, cameraNear, cameraFar );\n\t\t\tfloat blockerLightZ = findBlockerLightZ( shadowMap, uv, receiverLightZ, zReceiverLightSpace, shadowRadius, spreadAngle, shadowCameraParams, uv, lightType );\n\t\t\tif( blockerLightZ == -1.0 ) return 1.0;\n\t\t\tfloat avgBlockerDepthLightSpace;\n\t\t\tfloat filterRadius = 0.0;\n\t\t\tif(lightType == 0) {\n\t\t\t\tavgBlockerDepthLightSpace = -orthographicDepthToViewZ( blockerLightZ, cameraNear, cameraFar );\n\t\t\t\tfilterRadius = (zReceiverLightSpace - avgBlockerDepthLightSpace) * spreadAngle/shadowCameraParams.x;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tavgBlockerDepthLightSpace = -perspectiveDepthToViewZ( blockerLightZ, cameraNear, cameraFar );\n\t\t\t\tfloat penumbraRatio = penumbraSize( zReceiverLightSpace, avgBlockerDepthLightSpace );\n\t\t\t\tfloat lightFrustrumWidth = 2.0 * cameraNear * tan(shadowCameraParams.x * 0.5);\n\t\t\t\tfilterRadius = penumbraRatio * ( shadowRadius/lightFrustrumWidth ) * cameraNear / zReceiverLightSpace;\n\t\t\t}\n\t\t\t\n\t\t\treturn  percentCloserFilter( shadowMap, uv, receiverLightZ, filterRadius, uv );\n\t\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tvoid initShadows() {\n\t\t#if defined( SHADOWMAP_TYPE_PCSS )\n\t\t  initPercentCloserSoftShadow( vViewPosition.xy );\n\t\t#endif\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, float spreadAngle, vec3 shadowCameraParams, vec4 shadowCoord, const int lightType ) {\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCSS )\n\t\t  return percentCloserSoftShadow( shadowMap, shadowRadius, spreadAngle, shadowCameraParams, shadowCoord, lightType );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn 1.0;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n    #if NUM_RECT_AREA_LIGHTS > 0\n    #endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, 0.0, directionalLight.spreadAngle, directionalLight.shadowCameraParams, vDirectionalShadowCoord[ i ], 0 ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, 0.0, spotLight.shadowCameraParams, vSpotShadowCoord[ i ], 1 ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif\n",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",slot_texel_transform_template:"uniform vec2 $SLOT_NAME$TexelTransformParams;\nvec4 $SLOT_NAME$TexelTransform( vec4 value ) {\n    value.rgb *= $SLOT_NAME$TexelTransformParams.x;\n    value.rgb += vec3( $SLOT_NAME$TexelTransformParams.y );\n    return value;\n}\n",slot_uv_transform_template:"uniform vec4 $SLOT_NAME$UVTransformParams;\nvec2 $SLOT_NAME$UV() {\n  vec2 value = $UV_VAR_NAME$;\n  value.xy *= $SLOT_NAME$UVTransformParams.xy;\n  value.xy += $SLOT_NAME$UVTransformParams.zw;\n  return value;\n}\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\t#if defined( TEXTURE_SLOTS )\n\t\tvec2 specularUv = specularMapUV();\n\t#else\n\t\tvec2 specularUv = vUv;\n\t#endif\n\tvec4 texelSpecular = specularMapTexelTransform( texture2D( specularMap, specularUv ) );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif\n",specularmap_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#ifdef USE_SPECULARMAP\n\t\tuniform sampler2D specularMap;\n\t#endif\n#endif\n",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP ) || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP ) || defined( ANISOTROPY )\n\t\tvarying vec2 vUv;\n\t#endif\n#endif\n",uv_pars_vertex:"\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )  || defined( USE_FALLOFFMAP ) || defined( ANISOTROPY )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP ) || defined( USE_FALLOFFMAP ) || defined( USE_FALLOFFALPHAMAP ) || defined( ANISOTROPY )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif\n",uv2_pars_fragment:"#if ! defined( TEXTURE_SLOTS )\n\t#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\t\tvarying vec2 vUv2;\n\t#endif\n#endif\n",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif\n",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif\n",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\t#ifdef USE_SKINNING\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\t#else\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t#endif\n#endif\n",oit_fragment:"#ifdef USE_OIT\n    if( oitMode == 0 ) {      float z = abs(vPositionZ);\n      float weight = pow( gl_FragColor.a, 1.0 ) * clamp( 10.0 / ( 1e-5 + pow( abs( z ) / 5.0, 1.0 ) + pow( abs( z ) / 200.0, 1.0 ) ), 1e-2, 3e3 );\n      gl_FragColor = vec4(gl_FragColor.rgb * gl_FragColor.a, gl_FragColor.a) * weight;\n    }\n    else if( oitMode == 1 ) {      gl_FragColor = vec4(gl_FragColor.a);\n    }\n#endif\n",oit_vertex:"#ifdef USE_OIT\n  vPositionZ = mvPosition.z;\n#endif\n",oit_pars_vertex:"#ifdef USE_OIT\n  varying float vPositionZ;\n#endif\n",oit_pars_fragment:"#ifdef USE_OIT\n  varying float vPositionZ;\n  uniform int oitMode;\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",cubeEnv_frag:"uniform float tFlip;\nuniform float opacity;\nuniform float roughness;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 queryReflectVec = vec3( tFlip * vWorldPosition.x, vWorldPosition.yz );\n\tvec4 envMapColor = vec4( 0.0 );\n\t#if defined( ENVMAP_TYPE_CUBE )\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\tenvMapColor = textureCubeLodEXT( envMap, queryReflectVec, roughness * 8.0 );\n\t\t#else\n\t\t\tenvMapColor = textureCube( envMap, queryReflectVec, roughness * 8.0 );\n\t\t#endif\n\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\tenvMapColor.rgb *= envMapIntensity;\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tenvMapColor = textureCubeUV( queryReflectVec, queryReflectVec, roughness );\n\t\tenvMapColor.rgb *= envMapIntensity;\n\t#endif\n\tgl_FragColor = envMapColor;\n\tgl_FragColor.a = opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <logdepthbuf_fragment>\n}\n",cubeEnv_vert:"varying vec3 vWorldPosition;\n#include <common>\n#include <clipping_planes_pars_vertex>\n#if NUM_CLIPPING_PLANES == 0\n\t#if ! defined( VARYING_VVIEWPOSITION )\n   \t\tvarying vec3 vViewPosition;\n   \t\t#define VARYING_VVIEWPOSITION 1\n   #endif\n#endif\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}\n",depth_frag:"precision highp float;\n#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",distanceRGBA_vert:"varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <oit_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <oit_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <oit_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <oit_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <oit_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <oit_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <oit_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <oit_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <oit_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <oit_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",meshphong_vert:"#define PHONG\n#if ! defined( VARYING_VVIEWPOSITION )\n\tvarying vec3 vViewPosition;\n\t#define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <oit_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <oit_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n}\n",meshphysical_frag:"precision highp float;\n#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#define DITHERING\n#define DITHERING_SCALE\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n\t#ifdef FALLOFF\n\t\tuniform vec3 falloffDiffuse;\n\t\tuniform float falloffOpacity;\n\t#endif\n#endif\n#if ! defined( VARYING_VVIEWPOSITION )\n\tvarying vec3 vViewPosition;\n\t#define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <oit_pars_fragment>\n#include <anisotropy_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = mapTexelToLinear( vec4( diffuse, opacity ) );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef FALLOFF\n\t\tvec4 falloffDiffuseColor = mapTexelToLinear( vec4( falloffDiffuse, falloffOpacity ) );\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <falloffmap_fragment>\n\t#include <falloffalphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <anisotropy_fragment>\n\t#include <falloff_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <oit_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\n#if ! defined( VARYING_VVIEWPOSITION )\n\tvarying vec3 vViewPosition;\n\t#define VARYING_VVIEWPOSITION 1\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#include <oit_pars_vertex>\n#include <anisotropy_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <oit_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <anisotropy_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\t#if ! defined( VARYING_VVIEWPOSITION )\n\t\tvarying vec3 vViewPosition;\n\t\t#define VARYING_VVIEWPOSITION 1\n\t#endif\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n   \tgl_FragColor = vec4( packNormalToRGB( vNormal * flipNormal ), opacity );\n\t#include <logdepthbuf_fragment>\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\t#if ! defined( VARYING_VVIEWPOSITION )\n   \t\tvarying vec3 vViewPosition;\n   \t\t#define VARYING_VVIEWPOSITION 1\n   #endif\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\t\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED  ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n",shadow_frag:"uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"};re.prototype={constructor:re,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}return function(t,r,n){if(t=ms.euclideanModulo(t,1),r=ms.clamp(r,0,1),n=ms.clamp(n,0,1),0===r)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+r):n+r-n*r,a=2*n-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],a=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,u=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(o,s,u)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=r[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&e.length>0){var l=_s[e];void 0!==l?this.setHex(l):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,n=e||{h:0,s:0,l:0},i=this.r,a=this.g,o=this.b,s=Math.max(i,a,o),u=Math.min(i,a,o),l=(u+s)/2;if(u===s)t=0,r=0;else{var c=s-u;switch(r=l<=.5?c/(s+u):c/(2-s-u),s){case i:t=(a-o)/c+(a<o?6:0);break;case a:t=(o-i)/c+2;break;case o:t=(i-a)/c+4}t/=6}return n.h=t,n.s=r,n.l=l,n},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var n=this.getHSL();return n.h+=e,n.s+=t,n.l+=r,this.setHSL(n.h,n.s,n.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var _s={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ne.prototype=(0,w.default)(n.prototype),ne.prototype.constructor=ne,ne.prototype.isDataTexture=!0;var Es={common:{diffuse:{value:new re(15658734)},opacity:{value:1},map:{value:null},mapUVTransformParams:{value:new i(0,0,1,1)},mapTexelTransformParams:{value:new r(1,0)},offsetRepeat:{value:new i(0,0,1,1)},specularMap:{value:null},specularMapUVTransformParams:{value:new i(0,0,1,1)},specularMapTexelTransformParams:{value:new r(1,0)},alphaMap:{value:null},alphaMapUVTransformParams:{value:new i(0,0,1,1)},alphaMapTexelTransformParams:{value:new r(1,0)},ditheringScale:{value:1},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},anisotropymap:{anisotropy:{value:0},anisotropyMap:{value:null},anisotropyMapUVTransformParams:{value:new i(0,0,1,1)},anisotropyMapTexelTransformParams:{value:new r(1,0)}},anisotropyrotationmap:{anisotropyRotation:{value:0},anisotropyRotationMap:{value:null},anisotropyRotationMapUVTransformParams:{value:new i(0,0,1,1)},anisotropyRotationMapTexelTransformParams:{value:new r(1,0)}},aomap:{aoMap:{value:null},aoMapUVTransformParams:{value:new i(0,0,1,1)},aoMapTexelTransformParams:{value:new r(1,0)},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapUVTransformParams:{value:new i(0,0,1,1)},lightMapTexelTransformParams:{value:new r(1,0)},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null},emissiveMapUVTransformParams:{value:new i(0,0,1,1)},emissiveMapTexelTransformParams:{value:new r(1,0)}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1},bumpMapUVTransformParams:{value:new i(0,0,1,1)},bumpMapTexelTransformParams:{value:new r(1,0)}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)},normalMapUVTransformParams:{value:new i(0,0,1,1)},normalMapTexelTransformParams:{value:new r(1,0)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0},displacementMapUVTransformParams:{value:new i(0,0,1,1)},displacementMapTexelTransformParams:{value:new r(1,0)}},falloffmap:{falloffMap:{value:null},falloffMapUVTransformParams:{value:new i(0,0,1,1)},falloffMapTexelTransformParams:{value:new r(1,0)}},falloffalphamap:{falloffAlphaMap:{value:null},falloffAlphaMapUVTransformParams:{value:new i(0,0,1,1)},falloffAlphaMapTexelTransformParams:{value:new r(1,0)}},roughnessmap:{roughnessMap:{value:null},roughnessMapUVTransformParams:{value:new i(0,0,1,1)},roughnessMapTexelTransformParams:{value:new r(1,0)}},metalnessmap:{metalnessMap:{value:null},metalnessMapUVTransformParams:{value:new i(0,0,1,1)},metalnessMapTexelTransformParams:{value:new r(1,0)}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new re(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowSpreadAngle:{},shadowCameraParams:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraParams:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new re(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new i(0,0,1,1)}}},As={basic:{uniforms:Ts.merge([Es.common,Es.aomap,Es.lightmap,Es.fog]),vertexShader:Ss.meshbasic_vert,fragmentShader:Ss.meshbasic_frag},lambert:{uniforms:Ts.merge([Es.common,Es.aomap,Es.lightmap,Es.emissivemap,Es.fog,Es.lights,{emissive:{value:new re(0)}}]),vertexShader:Ss.meshlambert_vert,fragmentShader:Ss.meshlambert_frag},phong:{uniforms:Ts.merge([Es.common,Es.aomap,Es.lightmap,Es.emissivemap,Es.bumpmap,Es.normalmap,Es.displacementmap,Es.gradientmap,Es.fog,Es.lights,{emissive:{value:new re(0)},specular:{value:new re(1118481)},shininess:{value:30}}]),vertexShader:Ss.meshphong_vert,fragmentShader:Ss.meshphong_frag},standard:{uniforms:Ts.merge([Es.common,Es.aomap,Es.lightmap,Es.emissivemap,Es.bumpmap,Es.normalmap,Es.displacementmap,Es.roughnessmap,Es.metalnessmap,Es.fog,Es.lights,{emissive:{value:new re(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ss.meshphysical_vert,fragmentShader:Ss.meshphysical_frag},points:{uniforms:Ts.merge([Es.points,Es.fog]),vertexShader:Ss.points_vert,fragmentShader:Ss.points_frag},dashed:{uniforms:Ts.merge([Es.common,Es.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ss.linedashed_vert,fragmentShader:Ss.linedashed_frag},depth:{uniforms:Ts.merge([Es.common,Es.displacementmap]),vertexShader:Ss.depth_vert,fragmentShader:Ss.depth_frag},normal:{uniforms:Ts.merge([Es.common,Es.bumpmap,Es.normalmap,Es.displacementmap,{opacity:{value:1}}]),vertexShader:Ss.normal_vert,fragmentShader:Ss.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ss.cube_vert,fragmentShader:Ss.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Ss.equirect_vert,fragmentShader:Ss.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new l}},vertexShader:Ss.distanceRGBA_vert,fragmentShader:Ss.distanceRGBA_frag}};As.cubeEnv={uniforms:Ts.merge([Es.common,As.standard.uniforms,{envMap:{value:null},envMapIntensity:{value:1},tFlip:{value:-1},opacity:{value:1},roughness:{value:0}}]),vertexShader:Ss.cubeEnv_vert,fragmentShader:Ss.cubeEnv_frag},As.physical={uniforms:Ts.merge([As.standard.uniforms,Es.falloffmap,Es.falloffalphamap,Es.anisotropymap,Es.anisotropyrotationmap,{falloffDiffuse:{value:new re(16777215)},falloffOpacity:{value:0},clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ss.meshphysical_vert,fragmentShader:Ss.meshphysical_frag},ie.prototype={constructor:ie,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new r;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new r;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new r;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new r).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new r).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};var Is=0;se.prototype={constructor:se,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e,this.version++},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){var n=this[t];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]="overdraw"===t?Number(r):r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}var r=void 0===e;r&&(e={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==_a&&(n.blending=this.blending),this.shading!==wa&&(n.shading=this.shading),this.side!==ma&&(n.side=this.side),this.vertexColors!==xa&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,r){var i=t(e.textures),a=t(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},(0,b.default)(se.prototype,t.prototype),ue.prototype=(0,w.default)(se.prototype),ue.prototype.constructor=ue,ue.prototype.isShaderMaterial=!0,ue.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ts.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},ue.prototype.toJSON=function(e){var t=se.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},le.prototype=(0,w.default)(se.prototype),le.prototype.constructor=le,le.prototype.isMeshDepthMaterial=!0,le.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.clearColor=e.clearColor,this.clearAlpha=e.clearAlpha,this},ce.prototype={constructor:ce,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],f=e[s+2];l<t&&(t=l),c<r&&(r=c),f<n&&(n=f),l>i&&(i=l),c>a&&(a=c),f>o&&(o=f)}this.min.set(t,r,n),this.max.set(i,a,o)},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),f=e.getZ(s);l<t&&(t=l),c<r&&(r=c),f<n&&(n=f),l>i&&(i=l),c>a&&(a=c),f>o&&(o=f)}this.min.set(t,r,n),this.max.set(i,a,o)},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new l;return function(t,r){var n=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(){var e=new l;return function(t){var r=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var n,i,a=t.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(n=0,i=o.length;n<i;n++)e.copy(o[n]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++)e.fromBufferAttribute(s,n).applyMatrix4(t.matrixWorld),r.expandByPoint(e)}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new l;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new l;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new l).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e;return function(t){return void 0===e&&(e=new l),this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},clampPoint:function(e,t){return(t||new l).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new l;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new l;return function(t){var r=t||new fe;return this.getCenter(r.center),r.radius=.5*this.getSize(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new l,new l,new l,new l,new l,new l,new l,new l];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},fe.prototype={constructor:fe,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new ce;return function(t,r){var n=this.center;void 0!==r?n.copy(r):e.setFromPoints(t).getCenter(n);for(var i=0,a=0,o=t.length;a<o;a++)i=Math.max(i,n.distanceToSquared(t[a]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),n=t||new l;return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(e){var t=e||new ce;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},de.prototype={constructor:de,isMatrix3:!0,set:function(e,t,r,n,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=n,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=r,l[7]=a,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new l);for(var r=0,n=t.count;r<n;r++)e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.applyMatrix3(this),t.setXYZ(r,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-r*i*l+r*o*s+n*i*u-n*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=r[6],f=r[7],d=r[8],h=d*u-l*f,p=l*c-d*s,g=f*s-u*c,m=i*h+a*p+o*g;if(0===m){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/m;return n[0]=h*y,n[1]=(o*f-d*a)*y,n[2]=(l*a-o*u)*y,n[3]=p*y,n[4]=(d*i-o*c)*y,n[5]=(o*s-l*i)*y,n[6]=g*y,n[7]=(a*c-f*i)*y,n[8]=(u*i-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}},he.prototype={constructor:he,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new l,t=new l;return function(r,n,i){var a=e.subVectors(i,n).cross(t.subVectors(r,n)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e);return(t||new l).copy(this.normal).multiplyScalar(r)},intersectLine:function(){var e=new l;return function(t,r){var n=r||new l,i=t.delta(e),a=this.normal.dot(i);if(0!==a){var o=-(t.start.dot(this.normal)+this.constant)/a;if(!(o<0||o>1))return n.copy(i).multiplyScalar(o).add(t.start)}else if(0===this.distanceToPoint(t.start))return n.copy(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new l).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new l,t=new de;return function(r,n){var i=this.coplanarPoint(e).applyMatrix4(r),a=n||t.getNormalMatrix(r),o=this.normal.applyMatrix3(a).normalize();return this.constant=-i.dot(o),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},pe.prototype={constructor:pe,set:function(e,t,r,n,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(n),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],a=r[2],o=r[3],s=r[4],u=r[5],l=r[6],c=r[7],f=r[8],d=r[9],h=r[10],p=r[11],g=r[12],m=r[13],v=r[14],y=r[15];return t[0].setComponents(o-n,c-s,p-f,y-g).normalize(),t[1].setComponents(o+n,c+s,p+f,y+g).normalize(),t[2].setComponents(o+i,c+u,p+d,y+m).normalize(),t[3].setComponents(o-i,c-u,p-d,y-m).normalize(),t[4].setComponents(o-a,c-l,p-h,y-v).normalize(),t[5].setComponents(o+a,c+l,p+h,y+v).normalize(),this},intersectsObject:function(){var e=new fe;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new fe;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:function(){var e=new l,t=new l;return function(r){for(var n=this.planes,i=0;i<6;i++){var a=n[i];e.x=a.normal.x>0?r.min.x:r.max.x,t.x=a.normal.x>0?r.max.x:r.min.x,e.y=a.normal.y>0?r.min.y:r.max.y,t.y=a.normal.y>0?r.max.y:r.min.y,e.z=a.normal.z>0?r.min.z:r.max.z,t.z=a.normal.z>0?r.max.z:r.min.z;var o=a.distanceToPoint(e),s=a.distanceToPoint(t);if(o<0&&s<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}},me.prototype={constructor:me,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new l).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new l;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new l;r.subVectors(e,this.origin);var n=r.dot(this.direction);return n<0?r.copy(this.origin):r.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new l;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return r<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new l,t=new l,r=new l;return function(n,i,a,o){e.copy(n).add(i).multiplyScalar(.5),t.copy(i).sub(n).normalize(),r.copy(this.origin).sub(e);var s,u,l,c,f=.5*n.distanceTo(i),d=-this.direction.dot(t),h=r.dot(this.direction),p=-r.dot(t),g=r.lengthSq(),m=Math.abs(1-d*d);if(m>0)if(s=d*p-h,u=d*h-p,c=f*m,s>=0)if(u>=-c)if(u<=c){var v=1/m;s*=v,u*=v,l=s*(s+d*u+2*h)+u*(d*s+u+2*p)+g}else u=f,s=Math.max(0,-(d*u+h)),l=-s*s+u*(u+2*p)+g;else u=-f,s=Math.max(0,-(d*u+h)),l=-s*s+u*(u+2*p)+g;else u<=-c?(s=Math.max(0,-(-d*f+h)),u=s>0?-f:Math.min(Math.max(-f,-p),f),l=-s*s+u*(u+2*p)+g):u<=c?(s=0,u=Math.min(Math.max(-f,-p),f),l=u*(u+2*p)+g):(s=Math.max(0,-(d*f+h)),u=s>0?f:Math.min(Math.max(-f,-p),f),l=-s*s+u*(u+2*p)+g);else u=d>0?-f:f,s=Math.max(0,-(d*u+h)),l=-s*s+u*(u+2*p)+g;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(t).multiplyScalar(u).add(e),l}}(),intersectSphere:function(){var e=new l;return function(t,r){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),i=e.dot(e)-n*n,a=t.radius*t.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=n-o,u=n+o;return s<0&&u<0?null:s<0?this.at(u,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,n=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,n=(e.min.x-f.x)*u),l>=0?(i=(e.min.y-f.y)*l,a=(e.max.y-f.y)*l):(i=(e.max.y-f.y)*l,a=(e.min.y-f.y)*l),r>a||i>n?null:((i>r||r!==r)&&(r=i),(a<n||n!==n)&&(n=a),c>=0?(o=(e.min.z-f.z)*c,s=(e.max.z-f.z)*c):(o=(e.max.z-f.z)*c,s=(e.min.z-f.z)*c),r>s||o>n?null:((o>r||r!==r)&&(r=o),(s<n||n!==n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:function(){var e=new l;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new l,t=new l,r=new l,n=new l;return function(i,a,o,s,u){t.subVectors(a,i),r.subVectors(o,i),n.crossVectors(t,r);var l,c=this.direction.dot(n);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,i);var f=l*this.direction.dot(r.crossVectors(e,r));if(f<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0)return null;if(f+d>c)return null;var h=-l*e.dot(n);return h<0?null:this.at(h/c,u)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},ve.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ve.DefaultOrder="XYZ",ve.prototype={constructor:ve,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=ms.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],u=i[1],l=i[5],c=i[9],f=i[2],d=i[6],h=i[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,h),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-f,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-f,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===t?(this._y=Math.asin(-n(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(d,h),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(n(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-f,a)):(this._x=0,this._y=Math.atan2(s,h))):"XZY"===t?(this._z=Math.asin(-n(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,h),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,r,n){return void 0===e&&(e=new f),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new s;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new l(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},ye.prototype={constructor:ye,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!=(this.mask&e.mask)}};var Ds=0;Me.DefaultUp=new l(0,1,0),Me.DefaultMatrixAutoUpdate=!0,Me.prototype={constructor:Me,isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale,this.shear)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new s;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new l(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new l(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new l(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new l;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new l(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new l(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new l(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new f;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new f;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var r=this.children.indexOf(e);-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r],a=i.getObjectByProperty(e,t);if(void 0!==a)return a}},getWorldPosition:function(e){var t=e||new l;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new l,t=new l,r=new l;return function(n){var i=n||new s;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t,r),i}}(),getWorldRotation:function(){var e=new s;return function(t){var r=t||new ve;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new l,t=new s,r=new l;return function(n){var i=n||new l;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i,r),i}}(),getWorldDirection:function(){var e=new s;return function(t){var r=t||new l;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale,this.shear),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldInverse.getInverse(this.matrixWorld),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},toJSON:function(e){function t(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}var r=void 0===e||""===e,n={};r&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==(0,m.default)(this.userData)&&(i.userData=this.userData),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(r){var o=t(e.geometries),s=t(e.materials),u=t(e.textures),l=t(e.images);o.length>0&&(n.geometries=o),s.length>0&&(n.materials=s),u.length>0&&(n.textures=u),l.length>0&&(n.images=l)}return n.object=i,n},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.shear.copy(e.shear),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse((0,m.default)(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}},(0,b.default)(Me.prototype,t.prototype),we.prototype={constructor:we,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new l).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new l).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new l;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new l,t=new l;return function(r,n){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),a=t.dot(e),o=a/i;return n&&(o=ms.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t),i=r||new l;return this.delta(i).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},xe.normal=function(){var e=new l;return function(t,r,n,i){var a=i||new l;a.subVectors(n,r),e.subVectors(t,r),a.cross(e);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}}(),xe.barycoordFromPoint=function(){var e=new l,t=new l,r=new l;return function(n,i,a,o,s){e.subVectors(o,i),t.subVectors(a,i),r.subVectors(n,i);var u=e.dot(e),c=e.dot(t),f=e.dot(r),d=t.dot(t),h=t.dot(r),p=u*d-c*c,g=s||new l;if(0===p)return g.set(-2,-1,-1);var m=1/p,v=(d*f-c*h)*m,y=(u*h-c*f)*m;return g.set(1-v-y,y,v)}}(),xe.containsPoint=function(){var e=new l;return function(t,r,n,i){var a=xe.barycoordFromPoint(t,r,n,i,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),xe.prototype={constructor:xe,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new l,t=new l;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new l).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return xe.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new he).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return xe.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return xe.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,r,n;return function(i,a){void 0===e&&(e=new he,t=[new we,new we,new we],r=new l,n=new l);var o=a||new l,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,r),!0===this.containsPoint(r))o.copy(r);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var u=0;u<t.length;u++){t[u].closestPointToPoint(r,!0,n);var c=r.distanceToSquared(n);c<s&&(s=c,o.copy(n))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},be.prototype={constructor:be,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},Te.prototype=(0,w.default)(se.prototype),Te.prototype.constructor=Te,Te.prototype.isMeshBasicMaterial=!0,Te.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Se.prototype={constructor:Se,isBufferAttribute:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),a=new re),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];t[r++]=a.a,t[r++]=a.b,t[r++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,a=e.length;i<a;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new r),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),a=new l),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,a=e.length;n<a;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new i),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return(new this.constructor).copy(this)}},_e.prototype=(0,w.default)(Se.prototype),_e.prototype.constructor=_e,Ee.prototype=(0,w.default)(Se.prototype),Ee.prototype.constructor=Ee,Ae.prototype=(0,w.default)(Se.prototype),Ae.prototype.constructor=Ae,Ie.prototype=(0,w.default)(Se.prototype),Ie.prototype.constructor=Ie,De.prototype=(0,w.default)(Se.prototype),De.prototype.constructor=De,Le.prototype=(0,w.default)(Se.prototype),Le.prototype.constructor=Le,Ne.prototype=(0,w.default)(Se.prototype),Ne.prototype.constructor=Ne,Ce.prototype=(0,w.default)(Se.prototype),Ce.prototype.constructor=Ce,Oe.prototype=(0,w.default)(Se.prototype),Oe.prototype.constructor=Oe,(0,b.default)(Re.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==n&&(n=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,r.push(t)),t={start:3*a,materialIndex:n})}void 0!==t&&(t.count=3*a-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,a=e.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,u=e.morphTargets,l=u.length;if(l>0){t=[];for(var c=0;c<l;c++)t[c]=[];this.morphTargets.position=t}var f,d=e.morphNormals,h=d.length;if(h>0){f=[];for(var c=0;c<h;c++)f[c]=[];this.morphTargets.normal=f}for(var p=e.skinIndices,g=e.skinWeights,m=p.length===i.length,v=g.length===i.length,c=0;c<n.length;c++){var y=n[c];this.vertices.push(i[y.a],i[y.b],i[y.c]);var M=y.vertexNormals;if(3===M.length)this.normals.push(M[0],M[1],M[2]);else{var w=y.normal;this.normals.push(w,w,w)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var b=y.color;this.colors.push(b,b,b)}if(!0===o){var T=a[0][c];void 0!==T?this.uvs.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new r,new r,new r))}if(!0===s){var T=a[1][c];void 0!==T?this.uvs2.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new r,new r,new r))}for(var S=0;S<l;S++){var _=u[S].vertices;t[S].push(_[y.a],_[y.b],_[y.c])}for(var S=0;S<h;S++){var E=d[S].vertexNormals[c];f[S].push(E.a,E.b,E.c)}m&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(g[y.a],g[y.b],g[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Ls=0;ze.prototype={constructor:ze,isGeometry:!0,applyMatrix:function(e){for(var t=(new de).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(e)}for(var r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new f),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new f),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new f),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,n){return void 0===e&&(e=new f),e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,n){return void 0===e&&(e=new f),e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new Me),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,r,i){var a=void 0!==s?[d[e].clone(),d[t].clone(),d[r].clone()]:[],o=void 0!==u?[n.colors[e].clone(),n.colors[t].clone(),n.colors[r].clone()]:[],l=new be(e,t,r,a,o,i);n.faces.push(l),void 0!==c&&n.faceVertexUvs[0].push([h[e].clone(),h[t].clone(),h[r].clone()]),void 0!==f&&n.faceVertexUvs[1].push([p[e].clone(),p[t].clone(),p[r].clone()])}var n=this,i=null!==e.index?e.index.array:void 0,a=e.attributes,o=a.position.array,s=void 0!==a.normal?a.normal.array:void 0,u=void 0!==a.color?a.color.array:void 0,c=void 0!==a.uv?a.uv.array:void 0,f=void 0!==a.uv2?a.uv2.array:void 0;void 0!==f&&(this.faceVertexUvs[1]=[]);for(var d=[],h=[],p=[],g=0,m=0;g<o.length;g+=3,m+=2)n.vertices.push(new l(o[g],o[g+1],o[g+2])),void 0!==s&&d.push(new l(s[g],s[g+1],s[g+2])),void 0!==u&&n.colors.push(new re(u[g],u[g+1],u[g+2])),void 0!==c&&h.push(new r(c[m],c[m+1])),void 0!==f&&p.push(new r(f[m],f[m+1]));if(void 0!==i){var v=e.groups;if(v.length>0)for(var g=0;g<v.length;g++)for(var y=v[g],M=y.start,w=y.count,m=M,x=M+w;m<x;m+=3)t(i[m],i[m+1],i[m+2],y.materialIndex);else for(var g=0;g<i.length;g+=3)t(i[g],i[g+1],i[g+2])}else for(var g=0;g<o.length/3;g+=3)t(g,g+1,g+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new f;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(n),this},computeFaceNormals:function(){for(var e=new l,t=new l,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,r,n,i,a,o;for(o=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)o[t]=new l;if(e){var s,u,c,f=new l,d=new l;for(n=0,i=this.faces.length;n<i;n++)a=this.faces[n],s=this.vertices[a.a],u=this.vertices[a.b],c=this.vertices[a.c],f.subVectors(c,u),d.subVectors(s,u),f.cross(d),o[a.a].add(f),o[a.b].add(f),o[a.c].add(f)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)a=this.faces[n],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,r=this.vertices.length;t<r;t++)o[t].normalize();for(n=0,i=this.faces.length;n<i;n++){a=this.faces[n];var h=a.vertexNormals;3===h.length?(h[0].copy(o[a.a]),h[1].copy(o[a.b]),h[2].copy(o[a.c])):(h[0]=o[a.a].clone(),h[1]=o[a.b].clone(),h[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){r=this.faces[e];var n=r.vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for(i=this.faces[r],i.__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new ze;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o,s,u=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)o=new l,s={a:new l,b:new l,c:new l},u.push(o),c.push(s)}var f=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var o,s;for(r=0,n=this.faces.length;r<n;r++)i=this.faces[r],o=f.faceNormals[r],s=f.vertexNormals[r],o.copy(i.normal),s.a.copy(i.vertexNormals[0]),s.b.copy(i.vertexNormals[1]),s.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)i=this.faces[r],i.normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,n=t.length;r<n;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ce),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new fe),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(!1===(e&&e.isGeometry))return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var n,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,u=e.faces,l=this.faceVertexUvs[0],c=e.faceVertexUvs[0],f=this.colors,d=e.colors;void 0===r&&(r=0),void 0!==t&&(n=(new de).getNormalMatrix(t));for(var h=0,p=o.length;h<p;h++){var g=o[h],m=g.clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(var h=0,p=d.length;h<p;h++)f.push(d[h].clone());for(h=0,p=u.length;h<p;h++){var v,y,M,w=u[h],x=w.vertexNormals,b=w.vertexColors;v=new be(w.a+i,w.b+i,w.c+i),v.normal.copy(w.normal),void 0!==n&&v.normal.applyMatrix3(n).normalize();for(var T=0,S=x.length;T<S;T++)y=x[T].clone(),void 0!==n&&y.applyMatrix3(n).normalize(),v.vertexNormals.push(y);v.color.copy(w.color);for(var T=0,S=b.length;T<S;T++)M=b[T],v.vertexColors.push(M.clone());v.materialIndex=w.materialIndex+r,s.push(v)}for(h=0,p=c.length;h<p;h++){var _=c[h],E=[];if(void 0!==_){for(var T=0,S=_.length;T<S;T++)E.push(_[T].clone());l.push(E)}}},mergeMesh:function(e){if(!1===(e&&e.isMesh))return void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e);e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)},mergeVertices:function(){var e,t,r,n,i,a,o,s,u={},l=[],c=[],f=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],t=Math.round(e.x*f)+"_"+Math.round(e.y*f)+"_"+Math.round(e.z*f),void 0===u[t]?(u[t]=r,l.push(this.vertices[r]),c[r]=l.length-1):c[r]=c[u[t]];var d=[];for(r=0,n=this.faces.length;r<n;r++){i=this.faces[r],i.a=c[i.a],i.b=c[i.b],i.c=c[i.c],a=[i.a,i.b,i.c];for(var h=0;h<3;h++)if(a[h]===a[(h+1)%3]){d.push(r);break}}for(r=d.length-1;r>=0;r--){var p=d[r];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var g=this.vertices.length-l.length;return this.vertices=l,g},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,r=t.length,n=0;n<r;n++)t[n]._id=n;t.sort(e);var i,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===r&&(i=[]),s&&s.length===r&&(a=[]);for(var n=0;n<r;n++){var u=t[n]._id;i&&i.push(o[u]),a&&a.push(s[u])}i&&(this.faceVertexUvs[0]=i),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function e(e,t,r){return r?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==d[t]?d[t]:(d[t]=f.length/3,f.push(e.x,e.y,e.z),d[t])}function r(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==p[t]?p[t]:(p[t]=h.length,h.push(e.getHex()),p[t])}function n(e){var t=e.x.toString()+e.y.toString();return void 0!==m[t]?m[t]:(m[t]=g.length/2,g.push(e.x,e.y),m[t])}var i={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(i[o]=a[o]);return i}for(var s=[],u=0;u<this.vertices.length;u++){var l=this.vertices[u];s.push(l.x,l.y,l.z)}for(var c=[],f=[],d={},h=[],p={},g=[],m={},u=0;u<this.faces.length;u++){var v=this.faces[u],y=void 0!==this.faceVertexUvs[0][u],M=v.normal.length()>0,w=v.vertexNormals.length>0,x=1!==v.color.r||1!==v.color.g||1!==v.color.b,b=v.vertexColors.length>0,T=0;if(T=e(T,0,0),T=e(T,1,!0),T=e(T,2,!1),T=e(T,3,y),T=e(T,4,M),T=e(T,5,w),T=e(T,6,x),T=e(T,7,b),c.push(T),c.push(v.a,v.b,v.c),c.push(v.materialIndex),y){var S=this.faceVertexUvs[0][u];c.push(n(S[0]),n(S[1]),n(S[2]))}if(M&&c.push(t(v.normal)),w){var _=v.vertexNormals;c.push(t(_[0]),t(_[1]),t(_[2]))}if(x&&c.push(r(v.color)),b){var E=v.vertexColors;c.push(r(E[0]),r(E[1]),r(E[2]))}}return i.data={},i.data.vertices=s,i.data.normals=f,h.length>0&&(i.data.colors=h),g.length>0&&(i.data.uvs=[g]),i.data.faces=c,i},clone:function(){return(new ze).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var t=e.vertices,r=0,n=t.length;r<n;r++)this.vertices.push(t[r].clone());for(var i=e.colors,r=0,n=i.length;r<n;r++)this.colors.push(i[r].clone());for(var a=e.faces,r=0,n=a.length;r<n;r++)this.faces.push(a[r].clone());for(var r=0,n=e.faceVertexUvs.length;r<n;r++){var o=e.faceVertexUvs[r];void 0===this.faceVertexUvs[r]&&(this.faceVertexUvs[r]=[]);for(var s=0,u=o.length;s<u;s++){for(var l=o[s],c=[],f=0,d=l.length;f<d;f++){var h=l[f];c.push(h.clone())}this.faceVertexUvs[r].push(c)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}},(0,b.default)(ze.prototype,t.prototype),je.prototype={constructor:je,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t){return!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new Se(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){(new de).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new f),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new f),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new f),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,n){return void 0===e&&(e=new f),e.makeTranslation(t,r,n),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,n){return void 0===e&&(e=new f),e.makeScale(t,r,n),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new Me),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new Ce(3*t.vertices.length,3),n=new Ce(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Ce(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var r=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(r=void 0,t.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(t);r.verticesNeedUpdate=t.verticesNeedUpdate,r.normalsNeedUpdate=t.normalsNeedUpdate,r.colorsNeedUpdate=t.colorsNeedUpdate,r.uvsNeedUpdate=t.uvsNeedUpdate,r.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=r}var n;return!0===t.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Re).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Se(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Se(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.addAttribute("color",new Se(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Se(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Se(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=e.vertices.length>65535?Uint32Array:Uint16Array,s=new o(3*e.indices.length);this.setIndex(new Se(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var u in e.morphTargets){for(var l=[],c=e.morphTargets[u],f=0,d=c.length;f<d;f++){var h=c[f],p=new Ce(3*h.length,3);l.push(p.copyVector3sArray(h))}this.morphAttributes[u]=l}if(e.skinIndices.length>0){var g=new Ce(4*e.skinIndices.length,4);this.addAttribute("skinIndex",g.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var m=new Ce(4*e.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ce);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new ce,t=new l;return function(){null===this.boundingSphere&&(this.boundingSphere=new fe);var r=this.attributes.position;if(r){var n=this.boundingSphere.center;e.setFromBufferAttribute(r),e.getCenter(n);for(var i=0,a=0,o=r.count;a<o;a++)t.x=r.getX(a),t.y=r.getY(a),t.z=r.getZ(a),i=Math.max(i,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,r=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Se(new Float32Array(n.length),3));else for(var i=t.normal.array,a=0,o=i.length;a<o;a++)i[a]=0;var s,u,c,f=t.normal.array,d=new l,h=new l,p=new l,g=new l,m=new l;if(e){var v=e.array;0===r.length&&this.addGroup(0,v.length);for(var y=0,M=r.length;y<M;++y)for(var w=r[y],x=w.start,b=w.count,a=x,o=x+b;a<o;a+=3)s=3*v[a+0],u=3*v[a+1],c=3*v[a+2],d.fromArray(n,s),h.fromArray(n,u),p.fromArray(n,c),g.subVectors(p,h),m.subVectors(d,h),g.cross(m),f[s]+=g.x,f[s+1]+=g.y,f[s+2]+=g.z,f[u]+=g.x,f[u+1]+=g.y,f[u+2]+=g.z,f[c]+=g.x,f[c+1]+=g.y,f[c+2]+=g.z}else for(var a=0,o=n.length;a<o;a+=9)d.fromArray(n,a),h.fromArray(n,a+3),p.fromArray(n,a+6),g.subVectors(p,h),m.subVectors(d,h),g.cross(m),f[a]=g.x,f[a+1]=g.y,f[a+2]=g.z,f[a+3]=g.x,f[a+4]=g.y,f[a+5]=g.z,f[a+6]=g.x,f[a+7]=g.y,f[a+8]=g.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!1===(e&&e.isBufferGeometry))return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var r=this.attributes;for(var n in r)if(void 0!==e.attributes[n])for(var i=r[n],a=i.array,o=e.attributes[n],s=o.array,u=o.itemSize,l=0,c=u*t;l<s.length;l++,c++)a[c]=s[l];return this},normalizeNormals:function(){for(var e,t,r,n,i=this.attributes.normal.array,a=0,o=i.length;a<o;a+=3)e=i[a],t=i[a+1],r=i[a+2],n=1/Math.sqrt(e*e+t*t+r*r),i[a]*=n,i[a+1]*=n,i[a+2]*=n},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new je,t=this.index.array,r=this.attributes;for(var n in r){for(var i=r[n],a=i.array,o=i.itemSize,s=new a.constructor(t.length*o),u=0,l=0,c=0,f=t.length;c<f;c++){u=t[c]*o;for(var d=0;d<o;d++)s[l++]=a[u++]}e.addAttribute(n,new Se(s,o))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;if(null!==n){var i=Array.prototype.slice.call(n.array);e.data.index={type:n.array.constructor.name,array:i}}var a=this.attributes;for(var r in a){var o=a[r],i=Array.prototype.slice.call(o.array);e.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse((0,m.default)(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new je).copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var u=[],l=s[t];for(r=0,n=l.length;r<n;r++)u.push(l[r].clone());this.morphAttributes[t]=u}var c=e.groups;for(r=0,n=c.length;r<n;r++){var f=c[r];this.addGroup(f.start,f.count,f.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var h=e.boundingSphere;return null!==h&&(this.boundingSphere=h.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},je.MaxIndex=65535,(0,b.default)(je.prototype,t.prototype),Ue.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:Ue,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Me.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,r=e.length;t<r;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){function e(e,t,r,n,i,a,o){return xe.barycoordFromPoint(e,t,r,n,y),i.multiplyScalar(y.x),a.multiplyScalar(y.y),o.multiplyScalar(y.z),i.add(a).add(o),i.clone()}function t(e,t,r,n,i,a,o){var s=e.material;if(null===(s.side===va?r.intersectTriangle(a,i,n,!0,o):r.intersectTriangle(n,i,a,s.side!==ya,o)))return null;w.copy(o),w.applyMatrix4(e.matrixWorld);var u=t.ray.origin.distanceTo(w);return u<t.near||u>t.far?null:{distance:u,point:w.clone(),object:e}}function n(r,n,i,a,o,l,f,d){s.fromBufferAttribute(a,l),u.fromBufferAttribute(a,f),c.fromBufferAttribute(a,d);var h=t(r,n,i,s,u,c,M);return h&&(o&&(g.fromBufferAttribute(o,l),m.fromBufferAttribute(o,f),v.fromBufferAttribute(o,d),h.uv=e(M,s,u,c,g,m,v)),h.face=new be(l,f,d,xe.normal(s,u,c)),h.faceIndex=l),h}var i=new f,a=new me,o=new fe,s=new l,u=new l,c=new l,d=new l,h=new l,p=new l,g=new r,m=new r,v=new r,y=new l,M=new l,w=new l;return function(r,l){var f=this.geometry,y=this.material,w=this.matrixWorld;if(void 0!==y&&(null===f.boundingSphere&&f.computeBoundingSphere(),o.copy(f.boundingSphere),o.applyMatrix4(w),!1!==r.ray.intersectsSphere(o)&&(i.getInverse(w),a.copy(r.ray).applyMatrix4(i),null===f.boundingBox||!1!==a.intersectsBox(f.boundingBox)))){var x;if(f.isBufferGeometry){var b,T,S,_,E,A=f.index,I=f.attributes.position,D=f.attributes.uv;if(null!==A)for(_=0,E=A.count;_<E;_+=3)b=A.getX(_),T=A.getX(_+1),S=A.getX(_+2),(x=n(this,r,a,I,D,b,T,S))&&(x.faceIndex=Math.floor(_/3),l.push(x));else for(_=0,E=I.count;_<E;_+=3)b=_,T=_+1,S=_+2,(x=n(this,r,a,I,D,b,T,S))&&(x.index=b,l.push(x))}else if(f.isGeometry){var L,N,C,O,R=y&&y.isMultiMaterial,P=!0===R?y.materials:null,z=f.vertices,j=f.faces,U=f.faceVertexUvs[0];U.length>0&&(O=U);for(var B=0,V=j.length;B<V;B++){var k=j[B],F=!0===R?P[k.materialIndex]:y;if(void 0!==F){if(L=z[k.a],N=z[k.b],C=z[k.c],!0===F.morphTargets){var G=f.morphTargets,H=this.morphTargetInfluences;s.set(0,0,0),u.set(0,0,0),c.set(0,0,0);for(var W=0,Y=G.length;W<Y;W++){var Q=H[W];if(0!==Q){var q=G[W].vertices;s.addScaledVector(d.subVectors(q[k.a],L),Q),u.addScaledVector(h.subVectors(q[k.b],N),Q),c.addScaledVector(p.subVectors(q[k.c],C),Q)}}s.add(L),u.add(N),c.add(C),L=s,N=u,C=c}if(x=t(this,r,a,L,N,C,M)){if(O){var X=O[B];g.copy(X[0]),m.copy(X[1]),v.copy(X[2]),x.uv=e(M,L,N,C,g,m,v)}x.face=k,x.faceIndex=B,l.push(x)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Be.prototype=(0,w.default)(je.prototype),Be.prototype.constructor=Be,Ve.prototype=(0,w.default)(je.prototype),Ve.prototype.constructor=Ve,ke.prototype={constructor:ke,copy:function(e){return this.name=e.name,this.texture=e.texture,this.uvChannel=e.uvChannel,this.uvTransform=e.uvTransform,this.uvOffset=e.uvOffset,this.uvRepeat=e.uvRepeat,this.texelTransform=e.texelTransform,this.texelScale=e.texelScale,this.texelOffset=e.texelOffset,this.texelInvert=e.texelInvert,this},getFlattenedTexelTransform:function(e){var t=e||{};return this.texelInvert?(t.texelScale=-this.texelScale,t.texelOffset=this.texelScale+this.texelOffset):(t.texelScale=this.texelScale,t.texelOffset=this.texelOffset),t}},ke.SupportedMapNames=["map","lightMap","aoMap","emissiveMap","specularMap","bumpMap","normalMap","roughnessMap","metalnessMap","alphaMap","displacementMap","falloffMap","falloffAlphaMap","anisotropyMap","anisotropyRotationMap"],ke.SupportedMapSlotNames=[],ke.SupportedMapUVNames=[],ke.SupportedMapTexelNames=[];for(var Ns=0;Ns<ke.SupportedMapNames.length;Ns++){var Cs=ke.SupportedMapNames[Ns];ke.SupportedMapSlotNames.push(Cs+"Slot"),ke.SupportedMapUVNames.push(Cs+"UVTransformParams"),ke.SupportedMapTexelNames.push(Cs+"TexelTransformParams")}Fe.prototype=(0,w.default)(Me.prototype),Fe.prototype.constructor=Fe,Fe.prototype.isCamera=!0,Fe.prototype.getWorldDirection=function(){var e=new s;return function(t){var r=t||new l;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),Fe.prototype.lookAt=function(){var e=new f;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),Fe.prototype.clone=function(){return(new this.constructor).copy(this)},Fe.prototype.copy=function(e){return Me.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},Ge.prototype=(0,b.default)((0,w.default)(Fe.prototype),{constructor:Ge,isPerspectiveCamera:!0,copy:function(e){return Fe.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:(0,b.default)({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*ms.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*ms.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*ms.RAD2DEG*Math.atan(Math.tan(.5*ms.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,a){if(!e)return void(this.view=null);this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:n,width:i,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*ms.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,a=this.view;if(null!==a){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*n/o,t-=a.offsetY*r/s,n*=a.width/o,r*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far)},toJSON:function(e){var t=Me.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=(0,b.default)({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),He.prototype=(0,b.default)((0,w.default)(Fe.prototype),{constructor:He,isOrthographicCamera:!0,copy:function(e){return Fe.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:(0,b.default)({},e.view),this},setViewOffset:function(e,t,r,n,i,a){this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:n,width:i,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,a=r+e,o=n+t,s=n-t;if(null!==this.view){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,f=(this.top-this.bottom)/this.view.height;i+=c*(this.view.offsetX/u),a=i+c*(this.view.width/u),o-=f*(this.view.offsetY/l),s=o-f*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far)},toJSON:function(e){var t=Me.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=(0,b.default)({},this.view)),t}});var Os=0;Mt.prototype=(0,w.default)(Me.prototype),Mt.prototype.constructor=Mt,Mt.prototype.copy=function(e,t){return Me.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},Mt.prototype.toJSON=function(e){var t=Me.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},xt.prototype.isFogExp2=!0,xt.prototype.clone=function(){return new xt(this.color.getHex(),this.density)},xt.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},bt.prototype.isFog=!0,bt.prototype.clone=function(){return new bt(this.color.getHex(),this.near,this.far)},bt.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Tt.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:Tt,isLensFlare:!0,copy:function(e){Me.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,r=e.lensFlares.length;t<r;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,r,n,i,a){void 0===t&&(t=-1),void 0===r&&(r=0),void 0===a&&(a=1),void 0===i&&(i=new re(16777215)),void 0===n&&(n=_a),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:i,blending:n})},updateLensFlares:function(){var e,t,r=this.lensFlares.length,n=2*-this.positionScreen.x,i=2*-this.positionScreen.y;for(e=0;e<r;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+n*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),St.prototype=(0,w.default)(se.prototype),St.prototype.constructor=St,St.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},_t.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:_t,isSprite:!0,raycast:function(){var e=new l;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.distanceSqToPoint(e);n>this.scale.x*this.scale.y/4||r.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),Et.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:Et,copy:function(e){Me.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);r.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object},raycast:function(){var e=new l;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,r)}}(),update:function(){var e=new l,t=new l;return function(r){var n=this.levels;if(n.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);n[0].object.visible=!0;for(var a=1,o=n.length;a<o&&i>=n[a].distance;a++)n[a-1].object.visible=!1,n[a].object.visible=!0;for(;a<o;a++)n[a].object.visible=!1}}}(),toJSON:function(e){var t=Me.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var a=r[n];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),(0,b.default)(At.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new f;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){for(var e,t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new f;return function(){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(n,this.boneInverses[t]),e.toArray(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new At(this.bones,this.boneInverses,this.useVertexTexture)}}),It.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:It,isBone:!0}),Dt.prototype=(0,b.default)((0,w.default)(Ue.prototype),{constructor:Dt,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],r=1/t.lengthManhattan();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var n=new i,a=this.geometry.attributes.skinWeight,e=0;e<a.count;e++){n.x=a.getX(e),n.y=a.getY(e),n.z=a.getZ(e),n.w=a.getW(e);var r=1/n.lengthManhattan();r!==1/0?n.multiplyScalar(r):n.set(1,0,0,0),a.setXYZW(e,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(e){Ue.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),Lt.prototype=(0,w.default)(se.prototype),Lt.prototype.constructor=Lt,Lt.prototype.isLineBasicMaterial=!0,Lt.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Nt.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:Nt,isLine:!0,raycast:function(){var e=new f,t=new me,r=new fe;return function(n,i){var a=n.linePrecision,o=a*a,s=this.geometry,u=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(u),!1!==n.ray.intersectsSphere(r)){e.getInverse(u),t.copy(n.ray).applyMatrix4(e);var c=new l,f=new l,d=new l,h=new l,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var g=s.index,m=s.attributes,v=m.position.array;if(null!==g)for(var y=g.array,M=0,w=y.length-1;M<w;M+=p){var x=y[M],b=y[M+1];c.fromArray(v,3*x),f.fromArray(v,3*b);var T=t.distanceSqToSegment(c,f,h,d);if(!(T>o)){h.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(h);S<n.near||S>n.far||i.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}else for(var M=0,w=v.length/3-1;M<w;M+=p){c.fromArray(v,3*M),f.fromArray(v,3*M+3);var T=t.distanceSqToSegment(c,f,h,d);if(!(T>o)){h.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(h);S<n.near||S>n.far||i.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry)for(var _=s.vertices,E=_.length,M=0;M<E-1;M+=p){var T=t.distanceSqToSegment(_[M],_[M+1],h,d);if(!(T>o)){h.applyMatrix4(this.matrixWorld);var S=n.ray.origin.distanceTo(h);S<n.near||S>n.far||i.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ct.prototype=(0,b.default)((0,w.default)(Nt.prototype),{constructor:Ct,isLineSegments:!0}),Ot.prototype=(0,w.default)(se.prototype),Ot.prototype.constructor=Ot,Ot.prototype.isPointsMaterial=!0,Ot.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Rt.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:Rt,isPoints:!0,raycast:function(){var e=new f,t=new me,r=new fe;return function(n,i){function a(e,r){var a=t.distanceSqToPoint(e);if(a<d){var s=t.closestPointToPoint(e);s.applyMatrix4(u);var l=n.ray.origin.distanceTo(s);if(l<n.near||l>n.far)return;i.push({distance:l,distanceToRay:Math.sqrt(a),point:s.clone(),index:r,face:null,object:o})}}var o=this,s=this.geometry,u=this.matrixWorld,c=n.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(u),!1!==n.ray.intersectsSphere(r)){e.getInverse(u),t.copy(n.ray).applyMatrix4(e);var f=c/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f,h=new l;if(s.isBufferGeometry){var p=s.index,g=s.attributes,m=g.position.array;if(null!==p)for(var v=p.array,y=0,M=v.length;y<M;y++){var w=v[y];h.fromArray(m,3*w),a(h,w)}else for(var y=0,x=m.length/3;y<x;y++)h.fromArray(m,3*y),a(h,y)}else for(var b=s.vertices,y=0,x=b.length;y<x;y++)a(b[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Pt.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:Pt}),zt.prototype=(0,w.default)(n.prototype),zt.prototype.constructor=zt,jt.prototype=(0,w.default)(n.prototype),jt.prototype.constructor=jt,jt.prototype.isCompressedTexture=!0,Ut.prototype=(0,w.default)(n.prototype),Ut.prototype.constructor=Ut,Bt.prototype=(0,w.default)(n.prototype),Bt.prototype.constructor=Bt,Bt.prototype.isDepthTexture=!0,Vt.prototype=(0,w.default)(je.prototype),Vt.prototype.constructor=Vt,kt.prototype=(0,w.default)(je.prototype),kt.prototype.constructor=kt,Ft.prototype=(0,w.default)(ze.prototype),Ft.prototype.constructor=Ft,Gt.prototype=(0,w.default)(je.prototype),Gt.prototype.constructor=Gt,Ht.prototype=(0,w.default)(Gt.prototype),Ht.prototype.constructor=Ht,Wt.prototype=(0,w.default)(ze.prototype),Wt.prototype.constructor=Wt,Yt.prototype=(0,w.default)(Gt.prototype),Yt.prototype.constructor=Yt,Qt.prototype=(0,w.default)(ze.prototype),Qt.prototype.constructor=Qt,qt.prototype=(0,w.default)(Gt.prototype),qt.prototype.constructor=qt,Xt.prototype=(0,w.default)(ze.prototype),Xt.prototype.constructor=Xt,Zt.prototype=(0,w.default)(Gt.prototype),Zt.prototype.constructor=Zt,Kt.prototype=(0,w.default)(ze.prototype),Kt.prototype.constructor=Kt,Jt.prototype=(0,w.default)(ze.prototype),Jt.prototype.constructor=Jt,$t.prototype=(0,w.default)(je.prototype),$t.prototype.constructor=$t,er.prototype=(0,w.default)(ze.prototype),er.prototype.constructor=er,tr.prototype=(0,w.default)(je.prototype),tr.prototype.constructor=tr,rr.prototype=(0,w.default)(ze.prototype),rr.prototype.constructor=rr,nr.prototype=(0,w.default)(je.prototype),nr.prototype.constructor=nr,ir.prototype=(0,w.default)(ze.prototype),ir.prototype.constructor=ir;var Rs={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},triangulate:function(){function e(e,t,r,n,i,a){var o,s,u,l,c,f,d,h,p;if(s=e[a[t]].x,u=e[a[t]].y,l=e[a[r]].x,c=e[a[r]].y,f=e[a[n]].x,d=e[a[n]].y,(l-s)*(d-u)-(c-u)*(f-s)<=0)return!1;var g,m,v,y,M,w,x,b,T,S,_,A,I,D,L;for(g=f-l,m=d-c,v=s-f,y=u-d,M=l-s,w=c-u,o=0;o<i;o++)if(h=e[a[o]].x,p=e[a[o]].y,!(h===s&&p===u||h===l&&p===c||h===f&&p===d)&&(x=h-s,b=p-u,T=h-l,S=p-c,_=h-f,A=p-d,L=g*S-m*T,I=M*b-w*x,D=v*A-y*_,L>=-E.default&&D>=-E.default&&I>=-E.default))return!1;return!0}return function(t,r){var n=t.length;if(n<3)return null;var i,a,o,s=[],u=[],l=[];if(Rs.area(t)>0)for(a=0;a<n;a++)u[a]=a;else for(a=0;a<n;a++)u[a]=n-1-a;var c=n,f=2*c;for(a=c-1;c>2;){if(f--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),r?l:s;if(i=a,c<=i&&(i=0),a=i+1,c<=a&&(a=0),o=a+1,c<=o&&(o=0),e(t,i,a,o,c,u)){var d,h,p,g,m;for(d=u[i],h=u[a],p=u[o],s.push([t[d],t[h],t[p]]),l.push([u[i],u[a],u[o]]),g=a,m=a+1;m<c;g++,m++)u[g]=u[m];c--,f=2*c}}return r?l:s}}(),triangulateShape:function(e,t){function r(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function n(e,t,r){return e.x!==t.x?e.x<t.x?e.x<=r.x&&r.x<=t.x:t.x<=r.x&&r.x<=e.x:e.y<t.y?e.y<=r.y&&r.y<=t.y:t.y<=r.y&&r.y<=e.y}function i(e,t,r,i,a){var o=t.x-e.x,s=t.y-e.y,u=i.x-r.x,l=i.y-r.y,c=e.x-r.x,f=e.y-r.y,d=s*u-o*l,h=s*c-o*f;if(Math.abs(d)>E.default){var p;if(d>0){if(h<0||h>d)return[];if((p=l*c-u*f)<0||p>d)return[]}else{if(h>0||h<d)return[];if((p=l*c-u*f)>0||p<d)return[]}if(0===p)return!a||0!==h&&h!==d?[e]:[];if(p===d)return!a||0!==h&&h!==d?[t]:[];if(0===h)return[r];if(h===d)return[i];var g=p/d;return[{x:e.x+g*o,y:e.y+g*s}]}if(0!==h||l*c!=u*f)return[];var m=0===o&&0===s,v=0===u&&0===l;if(m&&v)return e.x!==r.x||e.y!==r.y?[]:[e];if(m)return n(r,i,e)?[e]:[];if(v)return n(e,t,r)?[r]:[];var y,M,w,x,b,T,S,_;return 0!==o?(e.x<t.x?(y=e,w=e.x,M=t,x=t.x):(y=t,w=t.x,M=e,x=e.x),r.x<i.x?(b=r,S=r.x,T=i,_=i.x):(b=i,S=i.x,T=r,_=r.x)):(e.y<t.y?(y=e,w=e.y,M=t,x=t.y):(y=t,w=t.y,M=e,x=e.y),r.y<i.y?(b=r,S=r.y,T=i,_=i.y):(b=i,S=i.y,T=r,_=r.y)),w<=S?x<S?[]:x===S?a?[]:[b]:x<=_?[b,M]:[b,T]:w>_?[]:w===_?a?[]:[y]:x<=_?[y,M]:[y,T]}function a(e,t,r,n){var i=t.x-e.x,a=t.y-e.y,o=r.x-e.x,s=r.y-e.y,u=n.x-e.x,l=n.y-e.y,c=i*s-a*o,f=i*l-a*u;if(Math.abs(c)>E.default){var d=u*s-l*o;return c>0?f>=0&&d>=0:f>=0||d>=0}return f>0}r(e),t.forEach(r);for(var o,s,u,l,c,f,d={},h=e.concat(),p=0,g=t.length;p<g;p++)Array.prototype.push.apply(h,t[p]);for(o=0,s=h.length;o<s;o++)c=h[o].x+":"+h[o].y,void 0!==d[c]&&console.warn("THREE.ShapeUtils: Duplicate point",c,o),d[c]=o;var m=function(e,t){for(var r,n,o,s,u,l,c,f,d,h,p,g=e.concat(),m=[],v=[],y=0,M=t.length;y<M;y++)m.push(y);for(var w=0,x=2*m.length;m.length>0;){if(--x<0){console.log("Infinite Loop! Holes left:"+m.length+", Probably Hole outside Shape!");break}for(o=w;o<g.length;o++){s=g[o],n=-1;for(var y=0;y<m.length;y++)if(l=m[y],c=s.x+":"+s.y+":"+l,void 0===v[c]){r=t[l];for(var b=0;b<r.length;b++)if(u=r[b],function(e,t){var n=g.length-1,i=e-1;i<0&&(i=n);var o=e+1;o>n&&(o=0);var s=a(g[e],g[i],g[o],r[t]);if(!s)return!1;var u=r.length-1,l=t-1;l<0&&(l=u);var c=t+1;return c>u&&(c=0),!!(s=a(r[t],r[l],r[c],g[e]))}(o,b)&&!function(e,t){var r,n,a;for(r=0;r<g.length;r++)if(n=r+1,n%=g.length,a=i(e,t,g[r],g[n],!0),a.length>0)return!0;return!1}(s,u)&&!function(e,r){var n,a,o,s,u;for(n=0;n<m.length;n++)for(a=t[m[n]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,u=i(e,r,a[o],a[s],!0),u.length>0)return!0;return!1}(s,u)){n=b,m.splice(y,1),f=g.slice(0,o+1),d=g.slice(o),h=r.slice(n),p=r.slice(0,n+1),g=f.concat(h).concat(p).concat(d),w=o;break}if(n>=0)break;v[c]=!0}if(n>=0)break}}return g}(e,t),v=Rs.triangulate(m,!1);for(o=0,s=v.length;o<s;o++)for(l=v[o],u=0;u<3;u++)c=l[u].x+":"+l[u].y,void 0!==(f=d[c])&&(l[u]=f);return v.concat()},isClockWise:function(e){return Rs.area(e)<0}};ar.prototype=(0,w.default)(ze.prototype),ar.prototype.constructor=ar,ar.prototype.addShapeList=function(e,t){for(var r=e.length,n=0;n<r;n++){var i=e[n];this.addShape(i,t)}},ar.prototype.addShape=function(e,t){function n(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}function i(e,t,n){var i,a,o=1,s=e.x-t.x,u=e.y-t.y,l=n.x-e.x,c=n.y-e.y,f=s*s+u*u,d=s*c-u*l;if(Math.abs(d)>E.default){var h=Math.sqrt(f),p=Math.sqrt(l*l+c*c),g=t.x-u/h,m=t.y+s/h,v=n.x-c/p,y=n.y+l/p,M=((v-g)*c-(y-m)*l)/(s*c-u*l);i=g+s*M-e.x,a=m+u*M-e.y;var w=i*i+a*a;if(w<=2)return new r(i,a);o=Math.sqrt(w/2)}else{var x=!1;s>E.default?l>E.default&&(x=!0):s<-E.default?l<-E.default&&(x=!0):(0,S.default)(u)===(0,S.default)(c)&&(x=!0),x?(i=-u,a=s,o=Math.sqrt(f)):(i=s,a=u,o=Math.sqrt(f/2))}return new r(i/o,a/o)}function a(e,t){var r,n;for(Q=e.length;--Q>=0;){r=Q,n=Q-1,n<0&&(n=e.length-1);var i=0,a=x+2*y;for(i=0;i<a;i++){var o=H*i,s=H*(i+1);u(t+r+o,t+n+o,t+n+s,t+r+s,e,i,a,r,n)}}}function o(e,t,r){L.vertices.push(new l(e,t,r))}function s(e,t,r){e+=N,t+=N,r+=N,L.faces.push(new be(e,t,r,null,null,0));var n=_.generateTopUV(L,e,t,r);L.faceVertexUvs[0].push(n)}function u(e,t,r,n,i,a,o,s,u){e+=N,t+=N,r+=N,n+=N,L.faces.push(new be(e,t,n,null,null,1)),L.faces.push(new be(t,r,n,null,null,1));var l=_.generateSideWallUV(L,e,t,r,n);L.faceVertexUvs[0].push([l[0],l[1],l[3]]),L.faceVertexUvs[0].push([l[1],l[2],l[3]])}var c,f,d,h,p,g=void 0!==t.amount?t.amount:100,m=void 0!==t.bevelThickness?t.bevelThickness:6,v=void 0!==t.bevelSize?t.bevelSize:m-2,y=void 0!==t.bevelSegments?t.bevelSegments:3,M=void 0===t.bevelEnabled||t.bevelEnabled,w=void 0!==t.curveSegments?t.curveSegments:12,x=void 0!==t.steps?t.steps:1,b=t.extrudePath,T=!1,_=void 0!==t.UVGenerator?t.UVGenerator:ar.WorldUVGenerator;b&&(c=b.getSpacedPoints(x),T=!0,M=!1,f=void 0!==t.frames?t.frames:b.computeFrenetFrames(x,!1),d=new l,h=new l,p=new l),M||(y=0,m=0,v=0);var A,I,D,L=this,N=this.vertices.length,C=e.extractPoints(w),O=C.shape,R=C.holes,P=!Rs.isClockWise(O);if(P){for(O=O.reverse(),I=0,D=R.length;I<D;I++)A=R[I],Rs.isClockWise(A)&&(R[I]=A.reverse());P=!1}var z=Rs.triangulateShape(O,R),j=O;for(I=0,D=R.length;I<D;I++)A=R[I],O=O.concat(A);for(var U,B,V,k,F,G,H=O.length,W=z.length,Y=[],Q=0,q=j.length,X=q-1,Z=Q+1;Q<q;Q++,X++,Z++)X===q&&(X=0),Z===q&&(Z=0),Y[Q]=i(j[Q],j[X],j[Z]);var K,J=[],$=Y.concat();for(I=0,D=R.length;I<D;I++){for(A=R[I],K=[],Q=0,q=A.length,X=q-1,Z=Q+1;Q<q;Q++,X++,Z++)X===q&&(X=0),Z===q&&(Z=0),K[Q]=i(A[Q],A[X],A[Z]);J.push(K),$=$.concat(K)}for(U=0;U<y;U++){for(V=U/y,k=m*Math.cos(V*Math.PI/2),B=v*Math.sin(V*Math.PI/2),Q=0,q=j.length;Q<q;Q++)F=n(j[Q],Y[Q],B),o(F.x,F.y,-k);for(I=0,D=R.length;I<D;I++)for(A=R[I],K=J[I],Q=0,q=A.length;Q<q;Q++)F=n(A[Q],K[Q],B),o(F.x,F.y,-k)}for(B=v,Q=0;Q<H;Q++)F=M?n(O[Q],$[Q],B):O[Q],T?(h.copy(f.normals[0]).multiplyScalar(F.x),d.copy(f.binormals[0]).multiplyScalar(F.y),p.copy(c[0]).add(h).add(d),o(p.x,p.y,p.z)):o(F.x,F.y,0);var ee;for(ee=1;ee<=x;ee++)for(Q=0;Q<H;Q++)F=M?n(O[Q],$[Q],B):O[Q],T?(h.copy(f.normals[ee]).multiplyScalar(F.x),d.copy(f.binormals[ee]).multiplyScalar(F.y),p.copy(c[ee]).add(h).add(d),o(p.x,p.y,p.z)):o(F.x,F.y,g/x*ee);for(U=y-1;U>=0;U--){for(V=U/y,k=m*Math.cos(V*Math.PI/2),B=v*Math.sin(V*Math.PI/2),Q=0,q=j.length;Q<q;Q++)F=n(j[Q],Y[Q],B),o(F.x,F.y,g+k);for(I=0,D=R.length;I<D;I++)for(A=R[I],K=J[I],Q=0,q=A.length;Q<q;Q++)F=n(A[Q],K[Q],B),T?o(F.x,F.y+c[x-1].y,c[x-1].x+k):o(F.x,F.y,g+k)}!function(){if(M){var e=0,t=H*e;for(Q=0;Q<W;Q++)G=z[Q],s(G[2]+t,G[1]+t,G[0]+t);for(e=x+2*y,t=H*e,Q=0;Q<W;Q++)G=z[Q],s(G[0]+t,G[1]+t,G[2]+t)}else{for(Q=0;Q<W;Q++)G=z[Q],s(G[2],G[1],G[0]);for(Q=0;Q<W;Q++)G=z[Q],s(G[0]+H*x,G[1]+H*x,G[2]+H*x)}}(),function(){var e=0;for(a(j,e),e+=j.length,I=0,D=R.length;I<D;I++)A=R[I],a(A,e),e+=A.length}()},ar.WorldUVGenerator={generateTopUV:function(e,t,n,i){var a=e.vertices,o=a[t],s=a[n],u=a[i];return[new r(o.x,o.y),new r(s.x,s.y),new r(u.x,u.y)]},generateSideWallUV:function(e,t,n,i,a){var o=e.vertices,s=o[t],u=o[n],l=o[i],c=o[a];return Math.abs(s.y-u.y)<.01?[new r(s.x,1-s.z),new r(u.x,1-u.z),new r(l.x,1-l.z),new r(c.x,1-c.z)]:[new r(s.y,1-s.z),new r(u.y,1-u.z),new r(l.y,1-l.z),new r(c.y,1-c.z)]}},or.prototype=(0,w.default)(ar.prototype),or.prototype.constructor=or,sr.prototype=(0,w.default)(je.prototype),sr.prototype.constructor=sr,ur.prototype=(0,w.default)(ze.prototype),ur.prototype.constructor=ur,lr.prototype=(0,w.default)(je.prototype),lr.prototype.constructor=lr,cr.prototype=(0,w.default)(ze.prototype),cr.prototype.constructor=cr,fr.prototype=(0,w.default)(ze.prototype),fr.prototype.constructor=fr,dr.prototype=(0,w.default)(je.prototype),dr.prototype.constructor=dr,hr.prototype=(0,w.default)(ze.prototype),hr.prototype.constructor=hr,pr.prototype=(0,w.default)(je.prototype),pr.prototype.constructor=pr,gr.prototype=(0,w.default)(ze.prototype),gr.prototype.constructor=gr,mr.prototype=(0,w.default)(je.prototype),mr.prototype.constructor=mr,vr.prototype=(0,w.default)(je.prototype),vr.prototype.constructor=vr,yr.prototype=(0,w.default)(ze.prototype),yr.prototype.constructor=yr,Mr.prototype=(0,w.default)(yr.prototype),Mr.prototype.constructor=Mr,wr.prototype=(0,w.default)(vr.prototype),wr.prototype.constructor=wr,xr.prototype=(0,w.default)(je.prototype),xr.prototype.constructor=xr,br.prototype=(0,w.default)(ze.prototype),br.prototype.constructor=br,Tr.prototype=(0,w.default)(ze.prototype),Tr.prototype.constructor=Tr;var Ps=(0,d.default)({WireframeGeometry:Vt,ParametricGeometry:Ft,ParametricBufferGeometry:kt,TetrahedronGeometry:Wt,TetrahedronBufferGeometry:Ht,OctahedronGeometry:Qt,OctahedronBufferGeometry:Yt,IcosahedronGeometry:Xt,IcosahedronBufferGeometry:qt,DodecahedronGeometry:Kt,DodecahedronBufferGeometry:Zt,PolyhedronGeometry:Jt,PolyhedronBufferGeometry:Gt,TubeGeometry:er,TubeBufferGeometry:$t,TorusKnotGeometry:rr,TorusKnotBufferGeometry:tr,TorusGeometry:ir,TorusBufferGeometry:nr,TextGeometry:or,SphereBufferGeometry:sr,SphereGeometry:ur,RingGeometry:cr,RingBufferGeometry:lr,PlaneBufferGeometry:Ve,PlaneGeometry:fr,LatheGeometry:hr,LatheBufferGeometry:dr,ShapeGeometry:gr,ShapeBufferGeometry:pr,ExtrudeGeometry:ar,EdgesGeometry:mr,ConeGeometry:Mr,ConeBufferGeometry:wr,CylinderGeometry:yr,CylinderBufferGeometry:vr,CircleBufferGeometry:xr,CircleGeometry:br,BoxBufferGeometry:Be,BoxGeometry:Tr});Sr.prototype=(0,w.default)(ue.prototype),Sr.prototype.constructor=Sr,Sr.prototype.isShadowMaterial=!0,_r.prototype=(0,w.default)(ue.prototype),_r.prototype.constructor=_r,_r.prototype.isRawShaderMaterial=!0,Er.prototype={constructor:Er,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},r=this.materials,n=0,i=r.length;n<i;n++){var a=r[n].toJSON(e);delete a.metadata,t.materials.push(a)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},Ar.prototype=(0,w.default)(se.prototype),Ar.prototype.constructor=Ar,Ar.prototype.isMeshStandardMaterial=!0;!function(){var e={map:{get:function(){return this.mapSlot.texture},set:function(e){this.mapSlot.texture=e}},lightMap:{get:function(){return this.lightMapSlot.texture},set:function(e){this.lightMapSlot.texture=e}},lightMapIntensity:{get:function(){return this.lightMapSlot.texelScale},set:function(e){this.lightMapSlot.texelTransform=!0,this.lightMapSlot.texelScale=e}},aoMap:{get:function(){return this.aoMapSlot.texture},set:function(e){this.aoMapSlot.texture=e}},emissiveMap:{get:function(){return this.emissiveMapSlot.texture},set:function(e){this.emissiveMapSlot.texture=e}},bumpMap:{get:function(){return this.bumpMapSlot.texture},set:function(e){this.bumpMapSlot.texture=e}},bumpScale:{get:function(){return this.bumpMapSlot.texelScale},set:function(e){this.bumpMapSlot.texelTransform=!0,this.bumpMapSlot.texelScale=e}},normalMap:{get:function(){return this.normalMapSlot.texture},set:function(e){this.normalMapSlot.texture=e}},displacementMap:{get:function(){return this.displacementMapSlot.texture},set:function(e){this.displacementMapSlot.texture=e}},displacementScale:{get:function(){return this.displacementMapSlot.texelScale},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelScale=e}},displacementBias:{get:function(){return this.displacementMapSlot.texelOffset},set:function(e){this.displacementMapSlot.texelTransform=!0,this.displacementMapSlot.texelOffset=e}},roughnessMap:{get:function(){return this.roughnessMapSlot.texture},set:function(e){this.roughnessMapSlot.texture=e}},metalnessMap:{get:function(){return this.metalnessMapSlot.texture},set:function(e){this.metalnessMapSlot.texture=e}},alphaMap:{get:function(){return this.alphaMapSlot.texture},set:function(e){this.alphaMapSlot.texture=e}}};for(var t in e)(0,c.default)(Ar.prototype,t,e[t])}();Ar.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.mapSlot.copy(e.mapSlot),this.reflectivity=e.reflectivity,this.roughness=e.roughness,this.roughnessMapSlot.copy(e.roughnessMapSlot),this.metalness=e.metalness,this.metalnessMapSlot.copy(e.metalnessMapSlot),this.lightMapSlot.copy(e.lightMapSlot),this.aoMapIntensity=e.aoMapIntensity,this.aoMapSlot.copy(e.aoMapSlot),this.emissive.copy(e.emissive),this.emissiveIntensity=e.emissiveIntensity,this.emissiveMapSlot.copy(e.emissiveMapSlot),this.bumpMapSlot.copy(e.bumpMapSlot),this.normalScale.copy(e.normalScale),this.normalMapSlot.copy(e.normalMapSlot),this.displacementMapSlot.copy(e.displacementMapSlot),this.alphaMapSlot.copy(e.alphaMapSlot),this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ir.prototype=(0,w.default)(Ar.prototype),Ir.prototype.constructor=Ir,Ir.prototype.isMeshPhysicalMaterial=!0;!function(){var e={falloffMap:{get:function(){return this.falloffMapSlot.texture},set:function(e){this.falloffMapSlot.texture=e}},falloffAlphaMap:{get:function(){return this.falloffAlphaMapSlot.texture},set:function(e){this.falloffAlphaMapSlot.texture=e}},anisotropyMap:{get:function(){return this.anisotropyMapSlot.texture},set:function(e){this.anisotropyMapSlot.texture=e}},anisotropyRotationMap:{get:function(){return this.anisotropyRotationMapSlot.texture},set:function(e){this.anisotropyRotationMapSlot.texture=e}}};for(var t in e)(0,c.default)(Ir.prototype,t,e[t])}();Ir.prototype.copy=function(e){return Ar.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.falloff=e.falloff,this.falloffColor.copy(e.falloffColor),this.falloffMapSlot.copy(e.falloffMapSlot),this.falloffOpacity=e.falloffOpacity,this.falloffAlphaMapSlot.copy(e.falloffAlphaMapSlot),this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this.anisotropy=e.anisotropy,this.anisotropyMapSlot=e.anisotropyMapSlot,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyRotationMapSlot=e.anisotropyRotationMapSlot,this},Dr.prototype=(0,w.default)(se.prototype),Dr.prototype.constructor=Dr,Dr.prototype.isMeshPhongMaterial=!0,Dr.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Lr.prototype=(0,w.default)(Dr.prototype),Lr.prototype.constructor=Lr,Lr.prototype.isMeshToonMaterial=!0,Lr.prototype.copy=function(e){return Dr.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Nr.prototype=(0,w.default)(se.prototype),Nr.prototype.constructor=Nr,Nr.prototype.isMeshNormalMaterial=!0,Nr.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.clearColor=e.clearColor,this.clearAlpha=e.clearAlpha,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Cr.prototype=(0,w.default)(se.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isMeshLambertMaterial=!0,Cr.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Or.prototype=(0,w.default)(se.prototype),Or.prototype.constructor=Or,Or.prototype.isMeshCubeMaterial=!0,Or.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.roughness=e.roughness,this},Rr.prototype=(0,w.default)(se.prototype),Rr.prototype.constructor=Rr,Rr.prototype.isLineDashedMaterial=!0,Rr.prototype.copy=function(e){return se.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var zs=(0,d.default)({ShadowMaterial:Sr,SpriteMaterial:St,RawShaderMaterial:_r,ShaderMaterial:ue,PointsMaterial:Ot,MultiMaterial:Er,MeshPhysicalMaterial:Ir,MeshStandardMaterial:Ar,MeshPhongMaterial:Dr,MeshToonMaterial:Lr,MeshNormalMaterial:Nr,MeshLambertMaterial:Cr,MeshDepthMaterial:le,MeshBasicMaterial:Te,MeshCubeMaterial:Or,LineDashedMaterial:Rr,LineBasicMaterial:Lt,MaterialMap:ke,Material:se}),js={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Us=new Pr;(0,b.default)(zr.prototype,{load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,a=js.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(o);if(s){var u=s[1],l=!!s[2],c=s[3];c=window.decodeURIComponent(c),l&&(c=window.atob(c));try{var f,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":f=new ArrayBuffer(c.length);for(var h=new Uint8Array(f),p=0;p<c.length;p++)h[p]=c.charCodeAt(p);"blob"===d&&(f=new Blob([f],{type:u}));break;case"document":var g=new DOMParser;f=g.parseFromString(c,u);break;case"json":f=JSON.parse(c);break;default:f=c}window.setTimeout(function(){t&&t(f),i.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){n&&n(t),i.manager.itemError(e)},0)}}else{var m=new XMLHttpRequest;m.open("GET",e,!0),m.addEventListener("load",function(r){var a=r.target.response;js.add(e,a),200===this.status?(t&&t(a),i.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(a),i.manager.itemEnd(e)):(n&&n(r),i.manager.itemError(e))},!1),void 0!==r&&m.addEventListener("progress",function(e){r(e)},!1),m.addEventListener("error",function(t){n&&n(t),i.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),m.send(null)}return i.manager.itemStart(e),m},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}}),(0,b.default)(jr.prototype,{load:function(e,t,r,n){var i=this,a=[],o=new jt;o.image=a;var s=new zr(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,l=0,c=e.length;l<c;++l)!function(l){s.load(e[l],function(e){var r=i._parser(e,!0);a[l]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(u+=1)&&(1===r.mipmapCount&&(o.minFilter=bo),o.format=r.format,o.needsUpdate=!0,t&&t(o))},r,n)}(l);else s.load(e,function(e){var r=i._parser(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){a[s]={mipmaps:[]};for(var u=0;u<r.mipmapCount;u++)a[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+u]),a[s].format=r.format,a[s].width=r.width,a[s].height=r.height}else o.image.width=r.width,o.image.height=r.height,o.mipmaps=r.mipmaps;1===r.mipmapCount&&(o.minFilter=bo),o.format=r.format,o.needsUpdate=!0,t&&t(o)},r,n);return o},setPath:function(e){return this.path=e,this}}),(0,b.default)(Ur.prototype,{load:function(e,t,r,n){var i=this,a=new ne,o=new zr(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(e){var r=i._parser(e);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:vo,a.wrapT=void 0!==r.wrapT?r.wrapT:vo,a.magFilter=void 0!==r.magFilter?r.magFilter:bo,a.minFilter=void 0!==r.minFilter?r.minFilter:So,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps),1===r.mipmapCount&&(a.minFilter=bo),a.needsUpdate=!0,t&&t(a,r))},r,n),a}}),(0,b.default)(Br.prototype,{load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var i=this,a=js.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){js.add(e,this),t&&t(this),i.manager.itemEnd(e)},!1),o.addEventListener("error",function(t){n&&n(t),i.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),(0,b.default)(Vr.prototype,{load:function(e,t,r,n){var i=new h,a=new Br(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);for(var o=0,s=0;s<e.length;++s)!function(r){a.load(e[r],function(e){i.images[r]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))},void 0,n)}(s);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),(0,b.default)(kr.prototype,{load:function(e,t,r,i){var a=new n,o=new Br(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(r){var n=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);a.format=n?Uo:Bo,a.image=r,a.needsUpdate=!0,void 0!==t&&t(a)},r,i),a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Fr.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:Fr,isLight:!0,copy:function(e){return Me.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Me.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Gr.prototype=(0,b.default)((0,w.default)(Fr.prototype),{constructor:Gr,isHemisphereLight:!0,copy:function(e){return Fr.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),(0,b.default)(Hr.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Wr.prototype=(0,b.default)((0,w.default)(Hr.prototype),{constructor:Wr,isSpotLightShadow:!0,update:function(e){var t=2*ms.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,n=e.distance||500,i=this.camera;i.fov=t,i.aspect=r,i.far=n,i.updateProjectionMatrix()}}),Yr.prototype=(0,b.default)((0,w.default)(Fr.prototype),{constructor:Yr,isSpotLight:!0,copy:function(e){return Fr.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Yr.prototype.updateShadow=function(){var e=new ce,t=new ce;return function(r){if(r){var n=this.getWorldPosition(),i=this.target.position;t.makeEmpty(),r.traverseVisible(function(r){if(r.isMesh){var n=r.geometry;null===n.boundingBox&&n.computeBoundingBox(),!1===n.boundingBox.isEmpty()&&(e.copy(n.boundingBox),r.matrix.compose(r.position,r.quaternion,r.scale),r.updateMatrixWorld(!0),e.applyMatrix4(r.matrixWorld),t.union(e))}});var a=t.getBoundingSphere(),o=(new l).subVectors(i,n),s=(new l).subVectors(a.center,n);this.children[0]&&this.children[0].uuid===this.target.uuid&&(o=new l(0,0,-1).applyQuaternion(this.getWorldQuaternion()));var u=o.angleTo(s),c=a.center.distanceTo(n),f=u>Math.PI/2?.1:c*Math.cos(u)+a.radius,d=f-2*a.radius<0?.01:f-2*a.radius;this.distance=f,this.shadow.camera.far=f,this.shadow.camera.near=d,this.shadow.camera.updateProjectionMatrix()}}}(),Qr.prototype=(0,b.default)((0,w.default)(Fr.prototype),{constructor:Qr,isPointLight:!0,copy:function(e){return Fr.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),qr.prototype=(0,b.default)((0,w.default)(Hr.prototype),{constructor:qr,isDirectionalLightShadow:!0,copy:function(e){return Hr.prototype.copy.call(this,e),this.spreadAngle=e.spreadAngle,this},update:function(e){this.camera.updateProjectionMatrix()}}),Xr.prototype=(0,b.default)((0,w.default)(Fr.prototype),{constructor:Xr,isDirectionalLight:!0,copy:function(e){return Fr.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Xr.prototype.updateShadowWithPosition=function(e){if(e){var t=this.getWorldPosition(),r=this.target.position,n=new ce,i=new ce;i.makeEmpty(),e.traverseVisible(function(e){if(e.isMesh){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox(),!1===t.boundingBox.isEmpty()&&(n.copy(t.boundingBox),e.matrix.compose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),n.applyMatrix4(e.matrixWorld),i.union(n))}});var a=i.getBoundingSphere(),o=(new l).subVectors(r,t),s=(new l).subVectors(a.center,t);this.children[0]&&this.children[0].uuid===this.target.uuid&&(o=new l(0,0,-1).applyQuaternion(this.getWorldQuaternion()));var u=o.angleTo(s),c=a.center.distanceTo(t),f=c*Math.sin(u)+a.radius,d=u>Math.PI/2?0:c*Math.cos(u)+a.radius,h=0===d||d-2*a.radius<0?.01:d-2*a.radius;this.shadow.camera.left=-f,this.shadow.camera.right=f,this.shadow.camera.top=f,this.shadow.camera.bottom=-f,this.shadow.camera.far=d,this.shadow.camera.near=h,this.shadow.camera.updateProjectionMatrix()}},Xr.prototype.updateShadow=function(e){if(e){var t=this.position,r=this.target.position,n=new ce,i=new ce;i.makeEmpty(),e.traverseVisible(function(e){if(e.isMesh){var t=e.geometry;null===t.boundingBox&&t.computeBoundingBox(),!1===t.boundingBox.isEmpty()&&(n.copy(t.boundingBox),e.matrix.compose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),n.applyMatrix4(e.matrixWorld),i.union(n))}});var a=i.getBoundingSphere(),o=(new l).subVectors(r,t).normalize();this.children[0]&&this.children[0].uuid===this.target.uuid&&(o=new l(0,0,-1).applyQuaternion(this.quaternion));var s=a.center.clone().sub(o.clone().multiplyScalar(a.radius)),u=a.radius,c=2*a.radius;this.shadow.virtualPosition=new l(s.x,s.y,s.z),this.shadow.camera.left=-u,this.shadow.camera.right=u,this.shadow.camera.top=u,this.shadow.camera.bottom=-u,this.shadow.camera.far=c,this.shadow.camera.near=0,this.shadow.camera.updateProjectionMatrix()}},Zr.prototype=(0,b.default)((0,w.default)(Fr.prototype),{constructor:Zr,isAmbientLight:!0});var Bs={arraySlice:function(e,t,r){return Bs.isTypedArray(e)?new e.constructor(e.subarray(t,r)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,r){return e[t]-e[r]}for(var r=e.length,n=new Array(r),i=0;i!==r;++i)n[i]=i;return n.sort(t),n},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),a=0,o=0;o!==n;++a)for(var s=r[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i},flattenJSON:function(e,t,r,n){for(var i=1,a=e[0];void 0!==a&&void 0===a[n];)a=e[i++];if(void 0!==a){var o=a[n];if(void 0!==o)if(Array.isArray(o))do{o=a[n],void 0!==o&&(t.push(a.time),r.push.apply(r,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{o=a[n],void 0!==o&&(t.push(a.time),o.toArray(r,r.length)),a=e[i++]}while(void 0!==a);else do{o=a[n],void 0!==o&&(t.push(a.time),r.push(o)),a=e[i++]}while(void 0!==a)}}};Kr.prototype={constructor:Kr,evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var a;r:{n:if(!(e<n)){for(var o=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===o)break;if(i=n,n=t[++r],e<n)break t}a=t.length;break r}{if(e>=i)break e;var s=t[1];e<s&&(r=2,i=s);for(var o=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===o)break;if(n=i,i=t[--r-1],e>=i)break t}a=r,r=0}}for(;r<a;){var u=r+a>>>1;e<t[u]?a=u:r=u+1}if(n=t[r],void 0===(i=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n,a=0;a!==n;++a)t[a]=r[i+a];return t},interpolate_:function(e,t,r,n){throw new Error("call to abstract method")},intervalChanged_:function(e,t,r){}},(0,b.default)(Kr.prototype,{beforeStart_:Kr.prototype.copySampleValue_,afterEnd_:Kr.prototype.copySampleValue_}),Jr.prototype=(0,b.default)((0,w.default)(Kr.prototype),{constructor:Jr,DefaultSettings_:{endingStart:ts,endingEnd:ts},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,a=e+1,o=n[i],s=n[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=e,o=2*t-r;break;case 2402:i=n.length-2,o=t+n[i]-n[i+1];break;default:i=e,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=e,s=2*r-t;break;case 2402:a=1,s=r+n[1]-n[0];break;default:a=e-1,s=t}var u=.5*(r-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-r),this._offsetPrev=i*l,this._offsetNext=a*l},interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,d=this._weightNext,h=(r-t)/(n-t),p=h*h,g=p*h,m=-f*g+2*f*p-f*h,v=(1+f)*g+(-1.5-2*f)*p+(-.5+f)*h+1,y=(-1-d)*g+(1.5+d)*p+.5*h,M=d*g-d*p,w=0;w!==o;++w)i[w]=m*a[l+w]+v*a[u+w]+y*a[s+w]+M*a[c+w];return i}}),$r.prototype=(0,b.default)((0,w.default)(Kr.prototype),{constructor:$r,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(r-t)/(n-t),c=1-l,f=0;f!==o;++f)i[f]=a[u+f]*c+a[s+f]*l;return i}}),en.prototype=(0,b.default)((0,w.default)(Kr.prototype),{constructor:en,interpolate_:function(e,t,r,n){return this.copySampleValue_(e-1)}});var Vs;Vs={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new en(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new $r(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Jr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(r)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,a=n-1;i!==n&&r[i]<e;)++i;for(;-1!==a&&r[a]>t;)--a;if(++a,0!==i||a!==n){i>=a&&(a=Math.max(a,1),i=a-1);var o=this.getValueSize();this.times=Bs.arraySlice(r,i,a),this.values=Bs.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("invalid value size in track",this),e=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("track is empty",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=r[o];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("out of order keys",this,o,s,a),e=!1;break}a=s}if(void 0!==n&&Bs.isTypedArray(n))for(var o=0,u=n.length;o!==u;++o){var l=n[o];if(isNaN(l)){console.error("value is not a valid number",this,o,l),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),n=2302===this.getInterpolation(),i=1,a=e.length-1,o=1;o<a;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==u[0]))if(n)s=!0;else for(var l=o*r,c=l-r,f=l+r,d=0;d!==r;++d){var h=t[l+d];if(h!==t[c+d]||h!==t[f+d]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];for(var p=o*r,g=i*r,d=0;d!==r;++d)t[g+d]=t[p+d]}++i}}if(a>0){e[i]=e[a];for(var p=a*r,g=i*r,d=0;d!==r;++d)t[g+d]=t[p+d];++i}return i!==e.length&&(this.times=Bs.arraySlice(e,0,i),this.values=Bs.arraySlice(t,0,i*r)),this}},rn.prototype=(0,b.default)((0,w.default)(Vs),{constructor:rn,ValueTypeName:"vector"}),nn.prototype=(0,b.default)((0,w.default)(Kr.prototype),{constructor:nn,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,u=e*o,l=(r-t)/(n-t),c=u+o;u!==c;u+=4)s.slerpFlat(i,0,a,u-o,a,u,l);return i}}),an.prototype=(0,b.default)((0,w.default)(Vs),{constructor:an,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new nn(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),on.prototype=(0,b.default)((0,w.default)(Vs),{constructor:on,ValueTypeName:"number"}),sn.prototype=(0,b.default)((0,w.default)(Vs),{constructor:sn,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),un.prototype=(0,b.default)((0,w.default)(Vs),{constructor:un,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ln.prototype=(0,b.default)((0,w.default)(Vs),{constructor:ln,ValueTypeName:"color"}),cn.prototype=Vs,Vs.constructor=cn,(0,b.default)(cn,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=cn._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],n=[];Bs.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Bs.convertArray(e.times,Array),values:Bs.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return on;case"vector":case"vector2":case"vector3":case"vector4":return rn;case"color":return ln;case"quaternion":return an;case"bool":case"boolean":return un;case"string":return sn}throw new Error("Unsupported typeName: "+e)}}),fn.prototype={constructor:fn,resetDuration:function(){for(var e=this.tracks,t=0,r=0,n=e.length;r!==n;++r){var i=this.tracks[r];t=Math.max(t,i.times[i.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},(0,b.default)(fn,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,a=r.length;i!==a;++i)t.push(cn.parse(r[i]).scale(n));return new fn(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t},i=0,a=r.length;i!==a;++i)t.push(cn.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=Bs.getKeyframeOrder(s);s=Bs.sortedArray(s,1,l),u=Bs.sortedArray(u,1,l),n||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new on(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/r))}return new fn(e,-1,a)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=n[l];c||(n[l]=c=[]),c.push(s)}}var f=[];for(var l in n)f.push(fn.CreateFromMorphTargetSequence(l,n[l],t,r));return f},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var r=function(e,t,r,n,i){if(0!==r.length){var a=[],o=[];Bs.flattenJSON(r,a,o,n),0!==a.length&&i.push(new e(t,a,o))}},n=[],i=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},f=0;f<l.length;f++)if(l[f].morphTargets)for(var d=0;d<l[f].morphTargets.length;d++)c[l[f].morphTargets[d]]=-1;for(var h in c){for(var p=[],g=[],d=0;d!==l[f].morphTargets.length;++d){var m=l[f];p.push(m.time),g.push(m.morphTarget===h?1:0)}n.push(new on(".morphTargetInfluence["+h+"]",p,g))}a=c.length*(o||1)}else{var v=".bones["+t[u].name+"]";r(rn,v+".position",l,"pos",n),r(an,v+".quaternion",l,"rot",n),r(rn,v+".scale",l,"scl",n)}}return 0===n.length?null:new fn(i,a,n)}}),(0,b.default)(dn.prototype,{load:function(e,t,r,n){var i=this;new zr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),n[e]}var n=this.textures,i=new zs[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.shading&&(i.shading=e.shading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=t(e.map)),void 0!==e.alphaMap&&(i.alphaMap=t(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=t(e.normalMap)),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),i.normalScale=(new r).fromArray(a)}if(void 0!==e.displacementMap&&(i.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=t(e.specularMap)),void 0!==e.envMap&&(i.envMap=t(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=t(e.gradientMap)),void 0!==e.materials)for(var o=0,s=e.materials.length;o<s;o++)i.materials.push(this.parse(e.materials[o]));return i}}),(0,b.default)(hn.prototype,{load:function(e,t,r,n){var i=this;new zr(i.manager).load(e,function(e){t(i.parse(JSON.parse(e)))},r,n)},parse:function(e){var t=new je,r=e.data.index,n={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==r){var i=new n[r.type](r.array);t.setIndex(new Se(i,1))}var a=e.data.attributes;for(var o in a){var s=a[o],i=new n[s.type](s.array);t.addAttribute(o,new Se(i,s.itemSize,s.normalized))}var u=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==u)for(var c=0,f=u.length;c!==f;++c){var d=u[c];t.addGroup(d.start,d.count,d.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var p=new l;void 0!==h.center&&p.fromArray(h.center),t.boundingSphere=new fe(p,h.radius)}return t}}),pn.prototype={constructor:pn,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,r){for(var n=[],i=0;i<e.length;++i)n[i]=this.createMaterial(e[i],t,r);return n},createMaterial:function(){var e,t,r,n={NoBlending:Sa,NormalBlending:_a,AdditiveBlending:Ea,SubtractiveBlending:Aa,MultiplyBlending:Ia,CustomBlending:Da};return function(i,a,o){function s(e,r,n,i,s){var l,c=a+e,f=pn.Handlers.get(c);null!==f?l=f.load(c):(t.setCrossOrigin(o),l=t.load(c)),void 0!==r&&(l.repeat.fromArray(r),1!==r[0]&&(l.wrapS=mo),1!==r[1]&&(l.wrapT=mo)),void 0!==n&&l.offset.fromArray(n),void 0!==i&&("repeat"===i[0]&&(l.wrapS=mo),"mirror"===i[0]&&(l.wrapS=yo),"repeat"===i[1]&&(l.wrapT=mo),"mirror"===i[1]&&(l.wrapT=yo)),void 0!==s&&(l.anisotropy=s);var d=ms.generateUUID();return u[d]=l,d}void 0===e&&(e=new re),void 0===t&&(t=new kr),void 0===r&&(r=new dn);var u={},l={uuid:ms.generateUUID(),type:"MeshLambertMaterial"};for(var c in i){var f=i[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=f;break;case"blending":l.blending=n[f];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(f).getHex();break;case"colorSpecular":l.specular=e.fromArray(f).getHex();break;case"colorEmissive":l.emissive=e.fromArray(f).getHex();break;case"specularCoef":l.shininess=f;break;case"shading":"basic"===f.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===f.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===f.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=s(f,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=s(f,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=s(f,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=s(f,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=s(f,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=f;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=s(f,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[f,f];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=s(f,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=s(f,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=s(f,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=s(f,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=va;break;case"doubleSided":l.side=ya;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=f;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[c]=f;break;case"vertexColors":!0===f&&(l.vertexColors=Ta),"face"===f&&(l.vertexColors=ba);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,f)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),r.setTextures(u),r.parse(l)}}()},pn.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,n=t.length;r<n;r+=2){var i=t[r],a=t[r+1];if(i.test(e))return a}return null}},(0,b.default)(gn.prototype,{load:function(e,t,r,n){var i=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:pn.prototype.extractUrlBase(e),o=new zr(this.manager);o.setWithCredentials(this.withCredentials),o.load(e,function(r){var n=JSON.parse(r),o=n.metadata;if(void 0!==o){var s=o.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var u=i.parse(n,a);t(u.geometry,u.materials)},r,n)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){var n=new ze,a=void 0!==e.scale?1/e.scale:1;if(function(t){function i(e,t){return e&1<<t}var a,o,s,u,c,f,d,h,p,g,m,v,y,M,w,x,b,T,S,_,E,A,I,D,L,N,C,O=e.faces,R=e.vertices,P=e.normals,z=e.colors,j=0;if(void 0!==e.uvs){for(a=0;a<e.uvs.length;a++)e.uvs[a].length&&j++;for(a=0;a<j;a++)n.faceVertexUvs[a]=[]}for(u=0,c=R.length;u<c;)T=new l,T.x=R[u++]*t,T.y=R[u++]*t,T.z=R[u++]*t,n.vertices.push(T);for(u=0,c=O.length;u<c;)if(g=O[u++],m=i(g,0),v=i(g,1),y=i(g,3),M=i(g,4),w=i(g,5),x=i(g,6),b=i(g,7),m){if(_=new be,_.a=O[u],_.b=O[u+1],_.c=O[u+3],E=new be,E.a=O[u+1],E.b=O[u+2],E.c=O[u+3],u+=4,v&&(p=O[u++],_.materialIndex=p,E.materialIndex=p),s=n.faces.length,y)for(a=0;a<j;a++)for(D=e.uvs[a],n.faceVertexUvs[a][s]=[],n.faceVertexUvs[a][s+1]=[],o=0;o<4;o++)h=O[u++],N=D[2*h],C=D[2*h+1],L=new r(N,C),2!==o&&n.faceVertexUvs[a][s].push(L),0!==o&&n.faceVertexUvs[a][s+1].push(L);if(M&&(d=3*O[u++],_.normal.set(P[d++],P[d++],P[d]),E.normal.copy(_.normal)),w)for(a=0;a<4;a++)d=3*O[u++],I=new l(P[d++],P[d++],P[d]),2!==a&&_.vertexNormals.push(I),0!==a&&E.vertexNormals.push(I);if(x&&(f=O[u++],A=z[f],_.color.setHex(A),E.color.setHex(A)),b)for(a=0;a<4;a++)f=O[u++],A=z[f],2!==a&&_.vertexColors.push(new re(A)),0!==a&&E.vertexColors.push(new re(A));n.faces.push(_),n.faces.push(E)}else{if(S=new be,S.a=O[u++],S.b=O[u++],S.c=O[u++],v&&(p=O[u++],S.materialIndex=p),s=n.faces.length,y)for(a=0;a<j;a++)for(D=e.uvs[a],n.faceVertexUvs[a][s]=[],o=0;o<3;o++)h=O[u++],N=D[2*h],C=D[2*h+1],L=new r(N,C),n.faceVertexUvs[a][s].push(L);if(M&&(d=3*O[u++],S.normal.set(P[d++],P[d++],P[d])),w)for(a=0;a<3;a++)d=3*O[u++],I=new l(P[d++],P[d++],P[d]),S.vertexNormals.push(I);if(x&&(f=O[u++],S.color.setHex(z[f])),b)for(a=0;a<3;a++)f=O[u++],S.vertexColors.push(new re(z[f]));n.faces.push(S)}}(a),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,a=e.skinWeights.length;r<a;r+=t){var o=e.skinWeights[r],s=t>1?e.skinWeights[r+1]:0,u=t>2?e.skinWeights[r+2]:0,l=t>3?e.skinWeights[r+3]:0;n.skinWeights.push(new i(o,s,u,l))}if(e.skinIndices)for(var r=0,a=e.skinIndices.length;r<a;r+=t){var c=e.skinIndices[r],f=t>1?e.skinIndices[r+1]:0,d=t>2?e.skinIndices[r+2]:0,h=t>3?e.skinIndices[r+3]:0;n.skinIndices.push(new i(c,f,d,h))}n.bones=e.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match.")}(),function(t){if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){n.morphTargets[r]={},n.morphTargets[r].name=e.morphTargets[r].name,n.morphTargets[r].vertices=[];for(var a=n.morphTargets[r].vertices,o=e.morphTargets[r].vertices,s=0,u=o.length;s<u;s+=3){var c=new l;c.x=o[s]*t,c.y=o[s+1]*t,c.z=o[s+2]*t,a.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var f=n.faces,d=e.morphColors[0].colors,r=0,i=f.length;r<i;r++)f[r].color.fromArray(d,3*r)}}(a),function(){var t=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var a=fn.parseAnimation(r[i],n.bones);a&&t.push(a)}if(n.morphTargets){var o=fn.CreateClipsFromMorphTargetSequences(n.morphTargets,10);t=t.concat(o)}t.length>0&&(n.animations=t)}(),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:n};var o=pn.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:n,materials:o}}}),(0,b.default)(mn.prototype,{load:function(e,t,r,n){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new zr(i.manager).load(e,function(r){var n=null;try{n=JSON.parse(r)}catch(t){return void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=n.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.");i.parse(n,t)},r,n)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseGeometries(e.geometries),n=this.parseImages(e.images,function(){void 0!==t&&t(o)}),i=this.parseTextures(e.textures,n),a=this.parseMaterials(e.materials,i),o=this.parseObject(e.object,r,a);return e.animations&&(o.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(o),o},parseGeometries:function(e){var t={};if(void 0!==e)for(var r=new gn,n=new hn,i=0,a=e.length;i<a;i++){var o,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Ps[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Ps[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Ps[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Ps[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Ps[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Ps[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new Ps[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Ps[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Ps[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Ps[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Ps[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":o=n.parse(s);break;case"Geometry":o=r.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var r={};if(void 0!==e){var n=new dn;n.setTextures(t);for(var i=0,a=e.length;i<a;i++){var o=n.parse(e[i]);r[o.uuid]=o}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=fn.parse(e[r]);t.push(n)}return t},parseImages:function(e,t){var r=this,n={};if(void 0!==e&&e.length>0){var i=new Pr(t),a=new Br(i);a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var u=e[o],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:r.texturePath+u.url;n[u.uuid]=function(e){return r.manager.itemStart(e),a.load(e,function(){r.manager.itemEnd(e)},void 0,function(){r.manager.itemError(e)})}(l)}}return n},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={UVMapping:300,CubeReflectionMapping:uo,CubeRefractionMapping:lo,EquirectangularReflectionMapping:co,EquirectangularRefractionMapping:fo,SphericalReflectionMapping:ho,CubeUVReflectionMapping:po,CubeUVRefractionMapping:go},a={RepeatWrapping:mo,ClampToEdgeWrapping:vo,MirroredRepeatWrapping:yo},o={NearestFilter:Mo,NearestMipMapNearestFilter:wo,NearestMipMapLinearFilter:xo,LinearFilter:bo,LinearMipMapNearestFilter:To,LinearMipMapLinearFilter:So},s={};if(void 0!==e)for(var u=0,l=e.length;u<l;u++){var c=e[u];void 0===c.image&&console.warn('THREE.ObjectLoader: No "image" specified for',c.uuid),void 0===t[c.image]&&console.warn("THREE.ObjectLoader: Undefined image",c.image);var f=new n(t[c.image]);f.needsUpdate=!0,f.uuid=c.uuid,void 0!==c.name&&(f.name=c.name),void 0!==c.mapping&&(f.mapping=r(c.mapping,i)),void 0!==c.offset&&f.offset.fromArray(c.offset),void 0!==c.repeat&&f.repeat.fromArray(c.repeat),void 0!==c.wrap&&(f.wrapS=r(c.wrap[0],a),f.wrapT=r(c.wrap[1],a)),void 0!==c.minFilter&&(f.minFilter=r(c.minFilter,o)),void 0!==c.magFilter&&(f.magFilter=r(c.magFilter,o)),void 0!==c.anisotropy&&(f.anisotropy=c.anisotropy),void 0!==c.flipY&&(f.flipY=c.flipY),s[c.uuid]=f}return s},parseObject:function(){var e=new f;return function(t,r,n){function i(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]}function a(e){if(void 0!==e)return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}var o;switch(t.type){case"Scene":o=new Mt,void 0!==t.background&&(0,u.default)(t.background)&&(o.background=new re(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new bt(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new xt(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new Ge(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=(0,b.default)({},t.view));break;case"OrthographicCamera":o=new He(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":o=new Zr(t.color,t.intensity);break;case"DirectionalLight":o=new Xr(t.color,t.intensity);break;case"PointLight":o=new Qr(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":o=new Yr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Gr(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=i(t.geometry),l=a(t.material);o=s.bones&&s.bones.length>0?new Dt(s,l):new Ue(s,l);break;case"LOD":o=new Et;break;case"Line":o=new Nt(i(t.geometry),a(t.material),t.mode);break;case"LineSegments":o=new Ct(i(t.geometry),a(t.material));break;case"PointCloud":case"Points":o=new Rt(i(t.geometry),a(t.material));break;case"Sprite":o=new _t(a(t.material));break;case"Group":o=new Pt;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:o=new Me}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var c in t.children)o.add(this.parseObject(t.children[c],r,n));if("LOD"===t.type)for(var f=t.levels,d=0;d<f.length;d++){var h=f[d],c=o.getObjectByProperty("uuid",h.object);void 0!==c&&o.addLevel(c,h.distance)}return o}}()}),An.prototype={constructor:An,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e||(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){e||(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),a=0;for(n.push(0),r=1;r<=e;r++)t=this.getPoint(r/e),a+=t.distanceTo(i),n.push(a),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,a=n.length;r=t||e*n[a-1];for(var o,s=0,u=a-1;s<=u;)if(i=Math.floor(s+(u-s)/2),(o=n[i]-r)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(i=u,n[i]===r){var l=i/(a-1);return l}var c=n[i],f=n[i+1],d=f-c,h=(r-c)/d,l=(i+h)/(a-1);return l},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var n=this.getPoint(t);return this.getPoint(r).clone().sub(n).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,n,i,a=new l,o=[],s=[],u=[],c=new l,d=new f;for(r=0;r<=e;r++)n=r/e,o[r]=this.getTangentAt(n),o[r].normalize();s[0]=new l,u[0]=new l;var h=Number.MAX_VALUE,p=Math.abs(o[0].x),g=Math.abs(o[0].y),m=Math.abs(o[0].z);for(p<=h&&(h=p,a.set(1,0,0)),g<=h&&(h=g,a.set(0,1,0)),m<=h&&a.set(0,0,1),c.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],c),u[0].crossVectors(o[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),u[r]=u[r-1].clone(),c.crossVectors(o[r-1],o[r]),c.length()>E.default&&(c.normalize(),i=Math.acos(ms.clamp(o[r-1].dot(o[r]),-1,1)),s[r].applyMatrix4(d.makeRotationAxis(c,i))),u[r].crossVectors(o[r],s[r]);if(!0===t)for(i=Math.acos(ms.clamp(s[0].dot(s[e]),-1,1)),i/=e,o[0].dot(c.crossVectors(s[0],s[e]))>0&&(i=-i),r=1;r<=e;r++)s[r].applyMatrix4(d.makeRotationAxis(o[r],i*r)),u[r].crossVectors(o[r],s[r]);return{tangents:o,normals:s,binormals:u}}},In.prototype=(0,w.default)(An.prototype),In.prototype.constructor=In,In.prototype.isLineCurve=!0,In.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},In.prototype.getPointAt=function(e){return this.getPoint(e)},In.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()},Dn.prototype=(0,b.default)((0,w.default)(An.prototype),{constructor:Dn,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new In(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,a=this.curves[n],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e||(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],n=0,i=this.curves;n<i.length;n++)for(var a=i[n],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];t&&t.equals(l)||(r.push(l),t=l)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new ze,r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new l(i.x,i.y,i.z||0))}return t}}),Ln.prototype=(0,w.default)(An.prototype),Ln.prototype.constructor=Ln,Ln.prototype.isEllipseCurve=!0,Ln.prototype.getPoint=function(e){for(var t=2*Math.PI,n=this.aEndAngle-this.aStartAngle,i=Math.abs(n)<E.default;n<0;)n+=t;for(;n>t;)n-=t;n<E.default&&(n=i?0:t),!0!==this.aClockwise||i||(n===t?n=-t:n-=t);var a=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var u=Math.cos(this.aRotation),l=Math.sin(this.aRotation),c=o-this.aX,f=s-this.aY;o=c*u-f*l+this.aX,s=c*l+f*u+this.aY}return new r(o,s)},Nn.prototype=(0,w.default)(An.prototype),Nn.prototype.constructor=Nn,Nn.prototype.isSplineCurve=!0,Nn.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,i=Math.floor(n),a=n-i,o=t[0===i?i:i-1],s=t[i],u=t[i>t.length-2?t.length-1:i+1],l=t[i>t.length-3?t.length-1:i+2];return new r(vn(a,o.x,s.x,u.x,l.x),vn(a,o.y,s.y,u.y,l.y))},Cn.prototype=(0,w.default)(An.prototype),Cn.prototype.constructor=Cn,Cn.prototype.getPoint=function(e){var t=this.v0,n=this.v1,i=this.v2,a=this.v3;return new r(En(e,t.x,n.x,i.x,a.x),En(e,t.y,n.y,i.y,a.y))},On.prototype=(0,w.default)(An.prototype),On.prototype.constructor=On,On.prototype.getPoint=function(e){var t=this.v0,n=this.v1,i=this.v2;return new r(xn(e,t.x,n.x,i.x),xn(e,t.y,n.y,i.y))};var ks=(0,b.default)((0,w.default)(Dn.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new In(this.currentPoint.clone(),new r(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var a=new On(this.currentPoint.clone(),new r(e,t),new r(n,i));this.curves.push(a),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,a,o){var s=new Cn(this.currentPoint.clone(),new r(e,t),new r(n,i),new r(a,o));this.curves.push(s),this.currentPoint.set(a,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),r=new Nn(t);this.curves.push(r),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,n,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,r,n,i,a)},absarc:function(e,t,r,n,i,a){this.absellipse(e,t,r,r,n,i,a)},ellipse:function(e,t,r,n,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+u,t+l,r,n,i,a,o,s)},absellipse:function(e,t,r,n,i,a,o,s){var u=new Ln(e,t,r,n,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)}});Rn.prototype=ks,ks.constructor=Rn,Pn.prototype=(0,b.default)((0,w.default)(ks),{constructor:Pn,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),zn.prototype={moveTo:function(e,t){this.currentPath=new Rn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,n){this.currentPath.quadraticCurveTo(e,t,r,n)},bezierCurveTo:function(e,t,r,n,i,a){this.currentPath.bezierCurveTo(e,t,r,n,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],a=new Pn;a.curves=i.curves,t.push(a)}return t}var n=Rs.isClockWise,i=this.subPaths;if(0===i.length)return[];if(!0===t)return r(i);var a,o,s,u=[];if(1===i.length)return o=i[0],s=new Pn,s.curves=o.curves,u.push(s),u;var l=!n(i[0].getPoints());l=e?!l:l;var c,f=[],d=[],h=[],p=0;d[p]=void 0,h[p]=[];for(var g=0,m=i.length;g<m;g++)o=i[g],c=o.getPoints(),a=n(c),a=e?!a:a,a?(!l&&d[p]&&p++,d[p]={s:new Pn,p:c},d[p].s.curves=o.curves,l&&p++,h[p]=[]):h[p].push({h:o,p:c[0]});if(!d[0])return r(i);if(d.length>1){for(var v=!1,y=[],M=0,w=d.length;M<w;M++)f[M]=[];for(var M=0,w=d.length;M<w;M++)for(var x=h[M],b=0;b<x.length;b++){for(var T=x[b],S=!0,_=0;_<d.length;_++)(function(e,t){for(var r=t.length,n=!1,i=r-1,a=0;a<r;i=a++){var o=t[i],s=t[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>E.default){if(l<0&&(o=t[a],u=-u,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=l*(e.x-o.x)-u*(e.y-o.y);if(0===c)return!0;if(c<0)continue;n=!n}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return n})(T.p,d[_].p)&&(M!==_&&y.push({froms:M,tos:_,hole:b}),S?(S=!1,f[_].push(T)):v=!0);S&&f[M].push(T)}y.length>0&&(v||(h=f))}for(var A,g=0,I=d.length;g<I;g++){s=d[g].s,u.push(s),A=h[g];for(var D=0,L=A.length;D<L;D++)s.holes.push(A[D].h)}return u}},(0,b.default)(jn.prototype,{isFont:!0,generateShapes:function(e,t,r){function n(e,t,n){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,u,l,c,f,d,h,p,g,m,v=new zn,y=[];if(a.o)for(var M=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),w=0,x=M.length;w<x;){var b=M[w++];switch(b){case"m":o=M[w++]*t+n,s=M[w++]*t,v.moveTo(o,s);break;case"l":o=M[w++]*t+n,s=M[w++]*t,v.lineTo(o,s);break;case"q":if(u=M[w++]*t+n,l=M[w++]*t,d=M[w++]*t+n,h=M[w++]*t,v.quadraticCurveTo(d,h,u,l),m=y[y.length-1]){c=m.x,f=m.y;for(var T=1;T<=r;T++){var S=T/r;xn(S,c,d,u),xn(S,f,h,l)}}break;case"b":if(u=M[w++]*t+n,l=M[w++]*t,d=M[w++]*t+n,h=M[w++]*t,p=M[w++]*t+n,g=M[w++]*t,v.bezierCurveTo(d,h,p,g,u,l),m=y[y.length-1]){c=m.x,f=m.y;for(var T=1;T<=r;T++){var S=T/r;En(S,c,d,p,u),En(S,f,h,g,l)}}}}return{offset:a.ha*t,path:v}}}void 0===t&&(t=100),void 0===r&&(r=4);for(var i=this.data,a=function(e){for(var r=String(e).split(""),a=t/i.resolution,o=0,s=[],u=0;u<r.length;u++){var l=n(r[u],a,o);o+=l.offset,s.push(l.path)}return s}(e),o=[],s=0,u=a.length;s<u;s++)Array.prototype.push.apply(o,a[s].toShapes());return o}}),(0,b.default)(Un.prototype,{load:function(e,t,r,n){var i=this;new zr(this.manager).load(e,function(e){var r;try{r=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var n=i.parse(r);t&&t(n)},r,n)},parse:function(e){return new jn(e)}});var Fs,Gs={getContext:function(){return void 0===Fs&&(Fs=new(window.AudioContext||window.webkitAudioContext)),Fs},setContext:function(e){Fs=e}};(0,b.default)(Bn.prototype,{load:function(e,t,r,n){var i=new zr(this.manager);i.setResponseType("arraybuffer"),i.load(e,function(e){Gs.getContext().decodeAudioData(e,function(e){t(e)})},r,n)}}),Vn.prototype=(0,b.default)((0,w.default)(Fr.prototype),{constructor:Vn,isRectAreaLight:!0,copy:function(e){return Fr.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this}}),(0,b.default)(kn.prototype,{update:function(){var e,t,r,n,i,a,o,s=new f,u=new f;return function(l){if(e!==this||t!==l.focus||r!==l.fov||n!==l.aspect*this.aspect||i!==l.near||a!==l.far||o!==l.zoom){e=this,t=l.focus,r=l.fov,n=l.aspect*this.aspect,i=l.near,a=l.far,o=l.zoom;var c,f,d=l.projectionMatrix.clone(),h=this.eyeSep/2,p=h*i/t,g=i*Math.tan(ms.DEG2RAD*r*.5)/o;u.elements[12]=-h,s.elements[12]=h,c=-g*n+p,f=g*n+p,d.elements[0]=2*i/(f-c),d.elements[8]=(f+c)/(f-c),this.cameraL.projectionMatrix.copy(d),c=-g*n-p,f=g*n-p,d.elements[0]=2*i/(f-c),d.elements[8]=(f+c)/(f-c),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(l.matrixWorld).multiply(u),this.cameraR.matrixWorld.copy(l.matrixWorld).multiply(s)}}()}),Fn.prototype=(0,w.default)(Me.prototype),Fn.prototype.constructor=Fn,Gn.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:Gn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new l,t=new s,r=new l,n=new l;return function(i){Me.prototype.updateMatrixWorld.call(this,i);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,r),n.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(n.x,this.context.currentTime),a.forwardY.setValueAtTime(n.y,this.context.currentTime),a.forwardZ.setValueAtTime(n.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z))}}()}),Hn.prototype=(0,b.default)((0,w.default)(Me.prototype),{constructor:Hn,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),Wn.prototype=(0,b.default)((0,w.default)(Hn.prototype),{constructor:Wn,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new l;return function(t){Me.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),(0,b.default)(Yn.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Qn.prototype={constructor:Qn,accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==n;++o)r[i+o]=r[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*t;this._mixBufferRegion(r,n,o,1-i,t)}for(var s=t,u=t+t;s!==u;++s)if(r[s]!==r[s+t]){a.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=3*r;e.getValue(t,n);for(var i=r,a=n;i!==a;++i)t[i]=t[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5)for(var a=0;a!==i;++a)e[t+a]=e[r+a]},_slerp:function(e,t,r,n,i){s.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){for(var a=1-n,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[r+o]*n}}},qn.prototype={constructor:qn,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=qn.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(r){var a=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[r])return void console.error("  can not bind to objectName of node, undefined",this);e=e[r]}if(void 0!==a){if(void 0===e[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[a]}}var s=e[n];if(void 0===s){var u=t.nodeName;return void console.error("  trying to update property for track: "+u+"."+n+" but it wasn't found.",e)}var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},(0,b.default)(qn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:qn.prototype.getValue,_setValue_unbound:qn.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),qn.Composite=function(e,t,r){var n=r||qn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)},qn.Composite.prototype={constructor:qn.Composite,getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},qn.create=function(e,t,r){return e&&e.isAnimationObjectGroup?new qn.Composite(e,t,r):new qn(e,t,r)},qn.parseTrackName=function(e){var t=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/,r=t.exec(e);if(!r)throw new Error("cannot parse trackName at all: "+e);var n={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return n},qn.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=function(e){for(var r=0;r<e.bones.length;r++){var n=e.bones[r];if(n.name===t)return n}return null}(e.skeleton);if(r)return r}if(e.children){var n=function e(r){for(var n=0;n<r.length;n++){var i=r[n];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(n)return n}return null},Xn.prototype={constructor:Xn,isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,r=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,a=this._paths,o=this._parsedPaths,s=this._bindings,u=s.length,l=0,c=arguments.length;l!==c;++l){var f=arguments[l],d=f.uuid,h=i[d],p=void 0;if(void 0===h){h=r++,i[d]=h,t.push(f);for(var g=0,m=u;g!==m;++g)s[g].push(new qn(f,a[g],o[g]))}else if(h<n){p=t[h];var v=--n,y=t[v];i[y.uuid]=h,t[h]=y,i[d]=v,t[v]=f;for(var g=0,m=u;g!==m;++g){var M=s[g],w=M[v],x=M[h];M[h]=w,void 0===x&&(x=new qn(f,a[g],o[g])),M[v]=x}}else t[h]!==p&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=n},remove:function(e){for(var t=this._objects,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=n[l];if(void 0!==c&&c>=r){var f=r++,d=t[f];n[d.uuid]=c,t[c]=d,n[l]=f,t[f]=u;for(var h=0,p=a;h!==p;++h){var g=i[h],m=g[f],v=g[c];g[c]=m,g[f]=v}}}this.nCachedObjects_=r},uncache:function(e){for(var t=this._objects,r=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,a=this._bindings,o=a.length,s=0,u=arguments.length;s!==u;++s){var l=arguments[s],c=l.uuid,f=i[c];if(void 0!==f)if(delete i[c],f<n){var d=--n,h=t[d],p=--r,g=t[p];i[h.uuid]=f,t[f]=h,i[g.uuid]=d,t[d]=g,t.pop();for(var m=0,v=o;m!==v;++m){var y=a[m],M=y[d],w=y[p];y[f]=M,y[d]=w,y.pop()}}else{var p=--r,g=t[p];i[g.uuid]=f,t[f]=g,t.pop();for(var m=0,v=o;m!==v;++m){var y=a[m];y[f]=y[p],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);n=i.length,r[e]=n,a.push(e),o.push(t),i.push(c);for(var f=l,d=s.length;f!==d;++f){var h=s[f];c[f]=new qn(h,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=r,a[r]=s,a.pop(),i[r]=i[o],i.pop(),n[r]=n[o],n.pop()}}},Zn.prototype={constructor:Zn,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,i=e._clip.duration,a=i/n,o=n/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+r,u[0]=e/o,u[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){var i=this._startTime;if(null!==i){var a=(e-i)*r;if(a<0||0===r)return;this._startTime=null,t=r*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,f=u.length;c!==f;++c)u[c].evaluate(o),l[c].accumulate(n,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var r=this._clip.duration,n=this.loop,i=this._loopCount;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=2202===n;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=r||t<0){var o=Math.floor(t/r);t-=r*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&i))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:ts:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:ts:2402)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=r,this}},Kn.prototype={constructor:Kn,clipAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?fn.findByName(r,e):e,a=null!==i?i.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var u=o.actionByRoot[n];if(void 0!==u)return u;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new Zn(this,i,t);return this._bindAction(l,s),this._addInactiveAction(l,a,n),l},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?fn.findByName(r,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o?o.actionByRoot[n]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(var i=0;i!==n;++i)r[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=(0,S.default)(e),a=this._accuIndex^=1,o=0;o!==r;++o){var s=t[o];s.enabled&&s._update(n,e,i,a)}for(var u=this._bindings,l=this._nActiveBindings,o=0;o!==l;++o)u[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot,a=i[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var u in s){var l=s[u];l.restoreOriginalState(),this._removeInactiveBinding(l)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}},(0,b.default)(Kn.prototype,{_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var f=n[c],d=f.name,h=l[d];if(void 0!==h)a[c]=h;else{if(void 0!==(h=a[c])){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,s,d));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;h=new Qn(qn.create(r,d,p),f.ValueTypeName,f.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,s,d),a[c]=h}o[c].resultBuffer=h.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],a=this._bindings;void 0===i&&(i={},n[t]=i),i[r]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,a=this._bindingsByRootAndName,o=a[n],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i];e:{for(var l in o)break e;delete a[n]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&(r=new $r(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1)}),(0,b.default)(Kn.prototype,t.prototype),Jn.prototype.clone=function(){return new Jn(void 0===this.value.clone?this.value:this.value.clone())},$n.prototype=(0,w.default)(je.prototype),$n.prototype.constructor=$n,$n.prototype.isInstancedBufferGeometry=!0,$n.prototype.addGroup=function(e,t,r){this.groups.push({start:e,count:t,materialIndex:r})},$n.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var r=e.attributes;for(var n in r){var i=r[n];this.addAttribute(n,i.clone())}for(var a=e.groups,o=0,s=a.length;o<s;o++){var u=a[o];this.addGroup(u.start,u.count,u.materialIndex)}return this},ei.prototype={constructor:ei,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}},ti.prototype={constructor:ti,isInterleavedBuffer:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}},ri.prototype=(0,w.default)(ti.prototype),ri.prototype.constructor=ri,ri.prototype.isInstancedInterleavedBuffer=!0,ri.prototype.copy=function(e){return ti.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},ni.prototype=(0,w.default)(Se.prototype),ni.prototype.constructor=ni,ni.prototype.isInstancedBufferAttribute=!0,ni.prototype.copy=function(e){return Se.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},ii.prototype={constructor:ii,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var r=[];return oi(e,this,r,t),r.sort(ai),r},intersectObjects:function(e,t){var r=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var n=0,i=e.length;n<i;n++)oi(e[n],this,r,t);return r.sort(ai),r}},si.prototype={constructor:si,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},ui.prototype={constructor:ui,set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(ms.clamp(e.y/this.radius,-1,1))),this}},li.prototype={constructor:li,set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}},ci.prototype=(0,w.default)(Ue.prototype),ci.prototype.constructor=ci,ci.prototype.createAnimation=function(e,t,r,n){var i={start:t,end:r,length:r-t+1,fps:n,duration:(r-t)/n,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=i,this.animationsList.push(i)},ci.prototype.autoCreateAnimations=function(e){for(var t,r=/([a-z]+)_?(\d+)/i,n={},i=this.geometry,a=0,o=i.morphTargets.length;a<o;a++){var s=i.morphTargets[a],u=s.name.match(r);if(u&&u.length>1){var l=u[1];n[l]||(n[l]={start:1/0,end:-1/0});var c=n[l];a<c.start&&(c.start=a),a>c.end&&(c.end=a),t||(t=l)}}for(var l in n){var c=n[l];this.createAnimation(l,c.start,c.end,e)}this.firstAnimation=t},ci.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},ci.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},ci.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)},ci.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)},ci.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)},ci.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)},ci.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t},ci.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t},ci.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},ci.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},ci.prototype.update=function(e){for(var t=0,r=this.animationsList.length;t<r;t++){var n=this.animationsList[t];if(n.active){var i=n.duration/n.length;n.time+=n.direction*e,n.mirroredLoop?(n.time>n.duration||n.time<0)&&(n.direction*=-1,n.time>n.duration&&(n.time=n.duration,n.directionBackwards=!0),n.time<0&&(n.time=0,n.directionBackwards=!1)):(n.time=n.time%n.duration,n.time<0&&(n.time+=n.duration));var a=n.start+ms.clamp(Math.floor(n.time/i),0,n.length-1),o=n.weight;a!==n.currentFrame&&(this.morphTargetInfluences[n.lastFrame]=0,this.morphTargetInfluences[n.currentFrame]=1*o,this.morphTargetInfluences[a]=0,n.lastFrame=n.currentFrame,n.currentFrame=a);var s=n.time%i/i;n.directionBackwards&&(s=1-s),n.currentFrame!==n.lastFrame?(this.morphTargetInfluences[n.currentFrame]=s*o,this.morphTargetInfluences[n.lastFrame]=(1-s)*o):this.morphTargetInfluences[n.currentFrame]=o}}},fi.prototype=(0,w.default)(Me.prototype),fi.prototype.constructor=fi,fi.prototype.isImmediateRenderObject=!0,di.prototype=(0,w.default)(Ct.prototype),di.prototype.constructor=di,di.prototype.update=function(){var e=new l,t=new l,r=new de;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,u=o.faces,l=0,c=0,f=u.length;c<f;c++)for(var d=u[c],h=0,p=d.vertexNormals.length;h<p;h++){var g=s[d[n[h]]],m=d.vertexNormals[h];e.copy(g).applyMatrix4(i),t.copy(m).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1}else if(o&&o.isBufferGeometry)for(var v=o.attributes.position,y=o.attributes.normal,l=0,h=0,p=v.count;h<p;h++)e.set(v.getX(h),v.getY(h),v.getZ(h)).applyMatrix4(i),t.set(y.getX(h),y.getY(h),y.getZ(h)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1;return a.needsUpdate=!0,this}}(),hi.prototype=(0,w.default)(Me.prototype),hi.prototype.constructor=hi,hi.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},hi.prototype.update=function(){var e=new l,t=new l;return function(){var r=this.light.distance?this.light.distance:1e3,n=r*Math.tan(this.light.angle);this.cone.scale.set(n,n,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),pi.prototype=(0,w.default)(Ct.prototype),pi.prototype.constructor=pi,pi.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,this.getBoneList(e.children[r]));return t},pi.prototype.update=function(){var e=new l,t=new f,r=new f;return function(){var n=this.geometry,i=n.getAttribute("position");r.getInverse(this.root.matrixWorld);for(var a=0,o=0;a<this.bones.length;a++){var s=this.bones[a];s.parent&&s.parent.isBone&&(t.multiplyMatrices(r,s.matrixWorld),e.setFromMatrixPosition(t),i.setXYZ(o,e.x,e.y,e.z),t.multiplyMatrices(r,s.parent.matrixWorld),e.setFromMatrixPosition(t),i.setXYZ(o+1,e.x,e.y,e.z),o+=2)}n.getAttribute("position").needsUpdate=!0}}(),gi.prototype=(0,w.default)(Ue.prototype),gi.prototype.constructor=gi,gi.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},gi.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},mi.prototype=(0,w.default)(Me.prototype),mi.prototype.constructor=mi,mi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},mi.prototype.update=function(){var e=new l,t=new l;return function(){var r=this.children[0],n=this.children[1];if(this.light.target){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld);var i=t.clone().sub(e);r.lookAt(i),n.lookAt(i)}r.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var a=.5*this.light.width,o=.5*this.light.height,s=r.geometry.getAttribute("position"),u=s.array;u[0]=a,u[1]=-o,u[2]=0,u[3]=a,u[4]=o,u[5]=0,u[6]=-a,u[7]=o,u[8]=0,u[9]=-a,u[10]=o,u[11]=0,u[12]=-a,u[13]=-o,u[14]=0,u[15]=a,u[16]=-o,u[17]=0,s.needsUpdate=!0}}(),vi.prototype=(0,w.default)(Me.prototype),vi.prototype.constructor=vi,vi.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},vi.prototype.update=function(){var e=new l,t=new re,r=new re;return function(){var n=this.children[0],i=n.geometry.getAttribute("color");t.copy(this.light.color).multiplyScalar(this.light.intensity),r.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var a=0,o=i.count;a<o;a++){var s=a<o/2?t:r;i.setXYZ(a,s.r,s.g,s.b)}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),i.needsUpdate=!0}}(),yi.prototype=(0,w.default)(Ct.prototype),yi.prototype.constructor=yi,Mi.prototype=(0,w.default)(Ct.prototype),Mi.prototype.constructor=Mi,wi.prototype=(0,w.default)(Ct.prototype),wi.prototype.constructor=wi,wi.prototype.update=function(){var e=new l,t=new l,r=new de;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var n=this.object.matrixWorld,i=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,u=0,l=0,c=s.length;l<c;l++){var f=s[l],d=f.normal;e.copy(o[f.a]).add(o[f.b]).add(o[f.c]).divideScalar(3).applyMatrix4(n),t.copy(d).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),i.setXYZ(u,e.x,e.y,e.z),u+=1,i.setXYZ(u,t.x,t.y,t.z),u+=1}return i.needsUpdate=!0,this}}(),xi.prototype=(0,w.default)(Me.prototype),xi.prototype.constructor=xi,xi.prototype.isDirectionalLightHeper=!0,xi.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},xi.prototype.update=function(){var e=new l,t=new l,r=new l;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e);var n=this.children[0],i=this.children[1];n.lookAt(r),n.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.lookAt(r),i.scale.z=r.length()}}(),bi.prototype=(0,w.default)(Ct.prototype),bi.prototype.constructor=bi,bi.prototype.isCameraHelper=!0,bi.prototype.update=function(){function e(e,a,o,s){n.set(a,o,s).unproject(i);var u=r[e];if(void 0!==u)for(var l=t.getAttribute("position"),c=0,f=u.length;c<f;c++)l.setXYZ(u[c],n.x,n.y,n.z)}var t,r,n=new l,i=new Fe;return function(){t=this.geometry,r=this.pointMap;i.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Ti.prototype=(0,w.default)(Ct.prototype),Ti.prototype.constructor=Ti,Ti.prototype.update=function(){var e=new ce;return function(t){if(t&&t.isBox3?e.copy(t):e.setFromObject(t),!e.isEmpty()){var r=e.min,n=e.max,i=this.geometry.attributes.position,a=i.array;a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=r.x,a[4]=n.y,a[5]=n.z,a[6]=r.x,a[7]=r.y,a[8]=n.z,a[9]=n.x,a[10]=r.y,a[11]=n.z,a[12]=n.x,a[13]=n.y,a[14]=r.z,a[15]=r.x,a[16]=n.y,a[17]=r.z,a[18]=r.x,a[19]=r.y,a[20]=r.z,a[21]=n.x,a[22]=r.y,a[23]=r.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var Hs=new je;Hs.addAttribute("position",new Ce([0,0,0,0,1,0],3));var Ws=new vr(0,.5,1,5,1);Ws.translate(0,-.5,0),Si.prototype=(0,w.default)(Me.prototype),Si.prototype.constructor=Si,Si.prototype.setDirection=function(){var e,t=new l;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(r.z,0,-r.x).normalize(),e=Math.acos(r.y),this.quaternion.setFromAxisAngle(t,e))}}(),Si.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},Si.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},_i.prototype=(0,w.default)(Ct.prototype),_i.prototype.constructor=_i;var Ys=new l,Qs=new Ei,qs=new Ei,Xs=new Ei;Ai.prototype=(0,w.default)(An.prototype),Ai.prototype.constructor=Ai,Ai.prototype.getPoint=function(e){var t=this.points,r=t.length;r<2&&console.log("duh, you need at least 2 points");var n=(r-(this.closed?0:1))*e,i=Math.floor(n),a=n-i;this.closed?i+=i>0?0:(Math.floor(Math.abs(i)/t.length)+1)*t.length:0===a&&i===r-1&&(i=r-2,a=1);var o,s,u,c;if(this.closed||i>0?o=t[(i-1)%r]:(Ys.subVectors(t[0],t[1]).add(t[0]),o=Ys),s=t[i%r],u=t[(i+1)%r],this.closed||i+2<r?c=t[(i+2)%r]:(Ys.subVectors(t[r-1],t[r-2]).add(t[r-1]),c=Ys),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var f="chordal"===this.type?.5:.25,d=Math.pow(o.distanceToSquared(s),f),h=Math.pow(s.distanceToSquared(u),f),p=Math.pow(u.distanceToSquared(c),f);h<1e-4&&(h=1),d<1e-4&&(d=h),p<1e-4&&(p=h),Qs.initNonuniformCatmullRom(o.x,s.x,u.x,c.x,d,h,p),qs.initNonuniformCatmullRom(o.y,s.y,u.y,c.y,d,h,p),Xs.initNonuniformCatmullRom(o.z,s.z,u.z,c.z,d,h,p)}else if("catmullrom"===this.type){var g=void 0!==this.tension?this.tension:.5;Qs.initCatmullRom(o.x,s.x,u.x,c.x,g),qs.initCatmullRom(o.y,s.y,u.y,c.y,g),Xs.initCatmullRom(o.z,s.z,u.z,c.z,g)}return new l(Qs.calc(a),qs.calc(a),Xs.calc(a))},Ii.prototype=(0,w.default)(An.prototype),Ii.prototype.constructor=Ii,Ii.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2,i=this.v3;return new l(En(e,t.x,r.x,n.x,i.x),En(e,t.y,r.y,n.y,i.y),En(e,t.z,r.z,n.z,i.z))},Di.prototype=(0,w.default)(An.prototype),Di.prototype.constructor=Di,Di.prototype.getPoint=function(e){var t=this.v0,r=this.v1,n=this.v2;return new l(xn(e,t.x,r.x,n.x),xn(e,t.y,r.y,n.y),xn(e,t.z,r.z,n.z))},Li.prototype=(0,w.default)(An.prototype),Li.prototype.constructor=Li,Li.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new l;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t},Ni.prototype=(0,w.default)(Ln.prototype),Ni.prototype.constructor=Ni;var Zs={createMultiMaterialObject:function(e,t){for(var r=new Pt,n=0,i=t.length;n<i;n++)r.add(new Ue(e,t[n]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){var n=new f;n.getInverse(r.matrixWorld),e.applyMatrix(n),t.remove(e),r.add(e)}};An.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=(0,w.default)(An.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Ki.prototype=(0,w.default)(Ai.prototype),Ji.prototype=(0,w.default)(Ai.prototype),$i.prototype=(0,w.default)(Ai.prototype),(0,b.default)($i.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),yi.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},(0,b.default)(ie.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),(0,b.default)(ce.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),we.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},ms.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},(0,b.default)(de.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),(0,b.default)(f.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new l),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,r){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,r){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,i,a)}}),he.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},s.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},(0,b.default)(me.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),(0,b.default)(Pn.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ar(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new gr(this,e)}}),(0,b.default)(r.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),(0,b.default)(l.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),(0,b.default)(i.prototype,{fromAttribute:function(e,t,r){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)}}),ze.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},(0,b.default)(Me.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),(0,y.default)(Me.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),(0,y.default)(Et.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Ge.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},(0,y.default)(Fr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),(0,y.default)(Se.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),(0,b.default)(je.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),(0,y.default)(je.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),(0,y.default)(Jn.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),(0,y.default)(se.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new re}}}),(0,y.default)(Dr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),(0,y.default)(ue.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),(0,b.default)(wt.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),(0,y.default)(wt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),(0,y.default)(ge.prototype,{cullFace:{get:function(){return this.renderReverseSided?fa:ca},set:function(e){var t=e!==ca;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),(0,y.default)(a.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Hn.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Bn).load(e,function(e){t.setBuffer(e)}),this},Yn.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var Ks={merge:function(e,t,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},Js={crossOrigin:void 0,loadTexture:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new kr;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,void 0,n);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Vr;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,r,void 0,n);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};r.InstanceScalarSize=2,l.InstanceScalarSize=3,i.InstanceScalarSize=4,re.InstanceScalarSize=3,s.InstanceScalarSize=4,de.InstanceScalarSize=9,f.InstanceScalarSize=16,e.WebGLRenderTargetCube=o,e.WebGLRenderTarget=a,e.WebGLRenderer=wt,e.ShaderLib=As,e.UniformsLib=Es,e.UniformsUtils=Ts,e.ShaderChunk=Ss,e.FogExp2=xt,e.Fog=bt,e.Scene=Mt,e.LensFlare=Tt,e.Sprite=_t,e.LOD=Et,e.SkinnedMesh=Dt,e.Skeleton=At,e.Bone=It,e.Mesh=Ue,e.LineSegments=Ct,e.Line=Nt,e.Points=Rt,e.Group=Pt,e.VideoTexture=zt,e.DataTexture=ne,e.CompressedTexture=jt,e.CubeTexture=h,e.CanvasTexture=Ut,e.DepthTexture=Bt,e.Texture=n,e.CompressedTextureLoader=jr,e.DataTextureLoader=Ur,e.CubeTextureLoader=Vr,e.TextureLoader=kr,e.ObjectLoader=mn,e.MaterialLoader=dn,e.BufferGeometryLoader=hn,e.DefaultLoadingManager=Us,e.LoadingManager=Pr,e.JSONLoader=gn,e.ImageLoader=Br,e.FontLoader=Un,e.FileLoader=zr,e.Loader=pn,e.Cache=js,e.AudioLoader=Bn,e.SpotLightShadow=Wr,e.SpotLight=Yr,e.PointLight=Qr,e.RectAreaLight=Vn,e.HemisphereLight=Gr,e.DirectionalLightShadow=qr,e.DirectionalLight=Xr,e.AmbientLight=Zr,e.LightShadow=Hr,e.Light=Fr,e.StereoCamera=kn,e.PerspectiveCamera=Ge,e.OrthographicCamera=He,e.CubeCamera=Fn,e.Camera=Fe,e.AudioListener=Gn,e.PositionalAudio=Wn,e.AudioContext=Gs,e.AudioAnalyser=Yn,e.Audio=Hn,e.VectorKeyframeTrack=rn,e.StringKeyframeTrack=sn,e.QuaternionKeyframeTrack=an,e.NumberKeyframeTrack=on,e.ColorKeyframeTrack=ln,e.BooleanKeyframeTrack=un,e.PropertyMixer=Qn,e.PropertyBinding=qn,e.KeyframeTrack=cn,e.AnimationUtils=Bs,e.AnimationObjectGroup=Xn,e.AnimationMixer=Kn,e.AnimationClip=fn,e.Uniform=Jn,e.InstancedBufferGeometry=$n,e.BufferGeometry=je,e.GeometryIdCount=Pe,e.Geometry=ze,e.InterleavedBufferAttribute=ei,e.InstancedInterleavedBuffer=ri,e.InterleavedBuffer=ti,e.InstancedBufferAttribute=ni,e.Face3=be,e.Object3D=Me,e.Raycaster=ii,e.Layers=ye,e.EventDispatcher=t,e.Clock=si,e.QuaternionLinearInterpolant=nn,e.LinearInterpolant=$r,e.DiscreteInterpolant=en,e.CubicInterpolant=Jr,e.Interpolant=Kr,e.Triangle=xe,e.Math=ms,e.Spherical=ui,e.Cylindrical=li,e.Plane=he,e.Frustum=pe,e.Sphere=fe,e.Ray=me,e.Matrix4=f,e.Matrix3=de,e.Box3=ce,e.Box2=ie,e.Line3=we,e.Euler=ve,e.Vector4=i,e.Vector3=l,e.Vector2=r,e.Quaternion=s,e.Color=re,e.MorphBlendMesh=ci,e.ImmediateRenderObject=fi,e.VertexNormalsHelper=di,e.SpotLightHelper=hi,e.SkeletonHelper=pi,e.PointLightHelper=gi,e.RectAreaLightHelper=mi,e.HemisphereLightHelper=vi,e.GridHelper=yi,e.PolarGridHelper=Mi,e.FaceNormalsHelper=wi,e.DirectionalLightHelper=xi,e.CameraHelper=bi,e.BoxHelper=Ti,e.ArrowHelper=Si,e.AxisHelper=_i,e.CatmullRomCurve3=Ai,e.CubicBezierCurve3=Ii,e.QuadraticBezierCurve3=Di,e.LineCurve3=Li,e.ArcCurve=Ni,e.EllipseCurve=Ln,e.SplineCurve=Nn,e.CubicBezierCurve=Cn,e.QuadraticBezierCurve=On,e.LineCurve=In,e.Shape=Pn,e.Path=Rn,e.ShapePath=zn,e.Font=jn,e.CurvePath=Dn,e.Curve=An,e.ShapeUtils=Rs,e.SceneUtils=Zs,e.WireframeGeometry=Vt,e.ParametricGeometry=Ft,e.ParametricBufferGeometry=kt,e.TetrahedronGeometry=Wt,e.TetrahedronBufferGeometry=Ht,e.OctahedronGeometry=Qt,e.OctahedronBufferGeometry=Yt,e.IcosahedronGeometry=Xt,e.IcosahedronBufferGeometry=qt,e.DodecahedronGeometry=Kt,e.DodecahedronBufferGeometry=Zt,e.PolyhedronGeometry=Jt,e.PolyhedronBufferGeometry=Gt,e.TubeGeometry=er,e.TubeBufferGeometry=$t,e.TorusKnotGeometry=rr,e.TorusKnotBufferGeometry=tr,e.TorusGeometry=ir,e.TorusBufferGeometry=nr,e.TextGeometry=or,e.SphereBufferGeometry=sr,e.SphereGeometry=ur,e.RingGeometry=cr,e.RingBufferGeometry=lr,e.PlaneBufferGeometry=Ve,e.PlaneGeometry=fr,e.LatheGeometry=hr,e.LatheBufferGeometry=dr,e.ShapeGeometry=gr,e.ShapeBufferGeometry=pr,e.ExtrudeGeometry=ar,e.EdgesGeometry=mr,e.ConeGeometry=Mr,e.ConeBufferGeometry=wr,e.CylinderGeometry=yr,e.CylinderBufferGeometry=vr,e.CircleBufferGeometry=xr,e.CircleGeometry=br,e.BoxBufferGeometry=Be,e.BoxGeometry=Tr,e.ShadowMaterial=Sr,e.SpriteMaterial=St,e.RawShaderMaterial=_r;e.ShaderMaterial=ue,e.PointsMaterial=Ot,e.MultiMaterial=Er,e.MeshPhysicalMaterial=Ir,e.MeshStandardMaterial=Ar,e.MeshPhongMaterial=Dr,e.MeshToonMaterial=Lr,e.MeshNormalMaterial=Nr,e.MeshLambertMaterial=Cr,e.MeshDepthMaterial=le,e.MeshBasicMaterial=Te,e.MeshCubeMaterial=Or,e.LineDashedMaterial=Rr,e.LineBasicMaterial=Lt,e.MaterialMap=ke,e.Material=se,e.Float64BufferAttribute=Oe,e.Float32BufferAttribute=Ce,e.Uint32BufferAttribute=Ne,e.Int32BufferAttribute=Le,e.Uint16BufferAttribute=De,e.Int16BufferAttribute=Ie,e.Uint8ClampedBufferAttribute=Ae,e.Uint8BufferAttribute=Ee,e.Int8BufferAttribute=_e,e.BufferAttribute=Se,e.REVISION=sa,e.MOUSE=ua,e.CullFaceNone=la,e.CullFaceBack=ca,e.CullFaceFront=fa,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=da,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=ha,e.PCFSoftShadowMap=pa,e.PCSSSoftShadowMap=ga,e.FrontSide=ma,e.BackSide=va,e.DoubleSide=ya,e.FlatShading=Ma,e.SmoothShading=wa,e.NoColors=xa,e.FaceColors=ba,e.VertexColors=Ta,e.NoBlending=Sa,e.NormalBlending=_a,e.AdditiveBlending=Ea,e.SubtractiveBlending=Aa,e.MultiplyBlending=Ia,e.CustomBlending=Da,e.AddEquation=La,e.SubtractEquation=Na,e.ReverseSubtractEquation=Ca,e.MinEquation=Oa,e.MaxEquation=Ra,e.ZeroFactor=Pa,e.OneFactor=za,e.SrcColorFactor=ja,e.OneMinusSrcColorFactor=Ua,e.SrcAlphaFactor=Ba,e.OneMinusSrcAlphaFactor=Va,e.DstAlphaFactor=ka,e.OneMinusDstAlphaFactor=Fa,e.DstColorFactor=Ga,e.OneMinusDstColorFactor=Ha,e.SrcAlphaSaturateFactor=Wa,e.NeverDepth=Ya,e.AlwaysDepth=Qa,e.LessDepth=qa,e.LessEqualDepth=Xa,e.EqualDepth=Za,e.GreaterEqualDepth=Ka,e.GreaterDepth=Ja,e.NotEqualDepth=$a,e.MultiplyOperation=eo,e.MixOperation=to,e.AddOperation=ro,e.NoToneMapping=no,e.LinearToneMapping=io,e.ReinhardToneMapping=ao,e.Uncharted2ToneMapping=oo,e.CineonToneMapping=so,e.UVMapping=300,e.CubeReflectionMapping=uo,e.CubeRefractionMapping=lo,e.EquirectangularReflectionMapping=co,e.EquirectangularRefractionMapping=fo,e.SphericalReflectionMapping=ho,e.CubeUVReflectionMapping=po,e.CubeUVRefractionMapping=go,e.RepeatWrapping=mo,e.ClampToEdgeWrapping=vo,e.MirroredRepeatWrapping=yo,e.NearestFilter=Mo,e.NearestMipMapNearestFilter=wo,e.NearestMipMapLinearFilter=xo,e.LinearFilter=bo,e.LinearMipMapNearestFilter=To,e.LinearMipMapLinearFilter=So,e.UnsignedByteType=_o,e.ByteType=Eo,e.ShortType=Ao,e.UnsignedShortType=Io,e.IntType=Do,e.UnsignedIntType=Lo,e.FloatType=No,e.HalfFloatType=Co,e.UnsignedShort4444Type=Oo,e.UnsignedShort5551Type=Ro,e.UnsignedShort565Type=Po,e.UnsignedInt248Type=zo,e.AlphaFormat=jo,e.RGBFormat=Uo,e.RGBAFormat=Bo,e.LuminanceFormat=Vo,e.LuminanceAlphaFormat=ko,e.RGBEFormat=Fo,e.DepthFormat=Go,e.DepthStencilFormat=Ho,e.RGB_S3TC_DXT1_Format=Wo,e.RGBA_S3TC_DXT1_Format=Yo,e.RGBA_S3TC_DXT3_Format=Qo,e.RGBA_S3TC_DXT5_Format=qo,e.RGB_PVRTC_4BPPV1_Format=Xo,e.RGB_PVRTC_2BPPV1_Format=Zo,e.RGBA_PVRTC_4BPPV1_Format=Ko,e.RGBA_PVRTC_2BPPV1_Format=Jo,e.RGB_ETC1_Format=$o,e.LoopOnce=2200,e.LoopRepeat=es,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=ts,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=rs,e.TriangleStripDrawMode=ns,e.TriangleFanDrawMode=is,e.LinearEncoding=as,e.sRGBEncoding=os,e.GammaEncoding=ss,e.RGBEEncoding=us,e.LogLuvEncoding=3003,e.RGBM7Encoding=ls,e.RGBM16Encoding=cs,e.RGBDEncoding=fs,e.BasicDepthPacking=ds,e.RGBADepthPacking=hs,e.OrderIndependentTransperancy=ps,e.PaintersTransperancy=gs,e.CubeGeometry=Tr,e.Face4=Ci,e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=Oi,e.PointCloud=Ri,e.Particle=Pi,e.ParticleSystem=zi,e.PointCloudMaterial=ji,e.ParticleBasicMaterial=Ui,e.ParticleSystemMaterial=Bi,e.Vertex=Vi,e.DynamicBufferAttribute=ki,e.Int8Attribute=Fi,e.Uint8Attribute=Gi,e.Uint8ClampedAttribute=Hi,e.Int16Attribute=Wi,e.Uint16Attribute=Yi,e.Int32Attribute=Qi,e.Uint32Attribute=qi,e.Float32Attribute=Xi,e.Float64Attribute=Zi,e.ClosedSplineCurve3=Ki,e.SplineCurve3=Ji,e.Spline=$i,e.BoundingBoxHelper=ea,e.EdgesHelper=ta,e.WireframeHelper=ra,e.XHRLoader=na,e.BinaryTextureLoader=ia,e.GeometryUtils=Ks,e.ImageUtils=Js,e.Projector=aa,e.CanvasRenderer=oa,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,r){"use strict";function n(e){var t=(0,o.get)(e,{scene:!0,evalPlug:"Player"}),r=t&&t.autoRotateNode;if(!t||!t.autoRotate||!r)return!1;var n="+"===t.autoRotateDirection?360:-360,i=(0,o.find)(e,{id:r,plug:"Transform",property:"rotation"}),a=(0,o.get)(e,{id:r,plug:"Transform",property:"rotation"}),u=-1!==(0,s.findAnimationIndex)(e,"autoRotate");i&&a&&!u&&e.dispatch((0,s.queueAnimation)({name:"autoRotate",autoplay:!0,iterations:1/0,easingDuration:3e3,tracks:[{path:i,start:0,duration:1e3*t.autoRotateSpeed,value:{x:a.x,y:a.y+n,z:a.z}}]}))}function i(e){e.dispatch((0,s.removeAnimation)("autoRotate"))}function a(e){var t=void 0,r={start:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;t||(t=setTimeout(function(){n(e)},r))},stop:function(){i(e),clearTimeout(t),t=null},mousedown:function(){return r.stop()},mouseup:function(){return r.start()}};return{enabled:!0,tool:r}}Object.defineProperty(t,"__esModule",{value:!0}),t.startAutoRotate=n,t.stopAutoRotate=i,t.autoRotateTool=a;var o=r(7),s=r(67)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!t.visible)return!1;var r=(0,p.getSceneId)(e);if("Enable"!==(0,h.get)(e,{id:r,plug:"Properties",property:"hierarchyVisibility"}))return t.visible;for(var n=(0,h.find)(e,{id:t.id,parent:!0}),i=(0,h.find)(e,{from:r,type:"Objects",shallow:!0});n&&n!==i;){if(!1===(0,h.get)(e,{id:n,plug:"Properties",property:"visible"}))return!1;n=(0,h.find)(e,{id:n,parent:!0})}return!0}function a(e,t){var r=(0,f.getRect)(e),n=t.position(e),a=n.position,o=n.normal,u=n.alpha;if(!a)return!1;var l=r.width*a.x,c=r.height*a.y,d=!(l<0||l>r.width-24||c<0||c>r.height-24)&&i(e,t);return(0,s.default)({},t.annotation,{id:t.id,alpha:u,normal:o,position:a,top:r.height-c,right:r.width-l,bottom:c,left:l,visible:d})}Object.defineProperty(t,"__esModule",{value:!0});var o=r(97),s=n(o);t.getAnnotationProperties=a,t.default=function(e){(0,f.getRect)(e);return function(t){function r(t){t.preventDefault(),e.dispatch((0,d.setAnnotationProperties)(a,{open:!v||!m,pinned:!v}))}function n(t){v||e.dispatch((0,d.setAnnotationProperties)(a,{open:!0}))}function i(t){v||e.dispatch((0,d.setAnnotationProperties)(a,{open:!1}))}var a=t.id,o=t.text,s=t.left,u=t.bottom,f=t.visible,h=t.position,p=(t.normal,t.alpha);if(void 0===h)return(0,l.default)("span");var g=e.getIn(["annotations",a])||(0,c.Map)({open:t.open,pinned:t.open}),m=g.get("open"),v=g.get("pinned"),M=h.y>.5?"t":"b",x=h.x<.6?"l":"r",b=[M,x].join(""),T=[(0,l.default)("img",{style:{cursor:"pointer"},props:{width:24,height:24,src:"https://clara.io/img/annotation-"+(m?"open":"closed")+"-2.svg"}})];if(m){var S={fontSize:"12px",padding:"10px",color:"#fff",backgroundColor:"#000",borderRadius:"3px",opacity:"0.8",cursor:"pointer",lineHeight:1.3,width:o.length>10?o.length>50?"200px":"150px":"100px"};T.push((0,l.default)("div",{style:w[b]},["l"===x&&(0,l.default)("div",{key:b,style:y[b]}),(0,l.default)("div",{key:"text",style:S,on:{click:r}},o),"r"===x&&(0,l.default)("div",{key:b,style:y[b]})].filter(function(e){return!!e})))}return(0,l.default)("div",{key:a,style:{visibility:f?"visible":"hidden",opacity:p,position:"absolute",left:Math.round(s)+"px",bottom:Math.round(u)+"px"},on:{click:r,mouseover:n,mouseout:i}},T)}};var u=r(37),l=n(u),c=r(32),f=r(8),d=r(122),h=r(7),p=r(20),g=((0,c.Map)({open:!1,pinned:!1}),"5px solid #333"),m="5px solid transparent",v={position:"absolute",display:"inline-block",borderTop:m,borderLeft:m,borderRight:m,borderBottom:m,height:0,width:0,top:"",bottom:"",right:"",left:""},y={tl:(0,s.default)({},v,{borderRight:g,top:"12px",left:"-10px",marginTop:"-5px"}),bl:(0,s.default)({},v,{borderRight:g,bottom:"8px",left:"-10px",marginTop:"-5px"}),tr:(0,s.default)({},v,{borderLeft:g,top:"12px",right:"-10px",marginTop:"-5px"}),br:(0,s.default)({},v,{borderLeft:g,bottom:"8px",right:"-10px",marginTop:"-5px"})},M={position:"absolute",textAlign:"left",left:"",top:"",bottom:"",right:"",transition:"opacity 0.3s ease-out",webkitTransition:"opacity 0.3s ease-out",fontFamily:"sans-serif",delayed:{opacity:1},remove:{opacity:0}},w={tl:(0,s.default)({},M,{left:"30px",top:"0"}),bl:(0,s.default)({},M,{left:"30px",bottom:"0"}),tr:(0,s.default)({},M,{right:"30px",top:"0"}),br:(0,s.default)({},M,{right:"30px",bottom:"0"})}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(){var t=e.getTranslator();t&&("safari"===d.default.name?setTimeout(function(){t.resize()},50):t.resize())}return function(e){return window.addEventListener("resize",t)}}function a(e){e.preventDefault()}function o(e){function t(e){o&&f.forEach(function(t){return o(t,e.elm)}),s&&s(e.elm)}var r=e.getEvaluatedTranslator(),n=(0,g.isSceneRendered)(e),o=(0,m.getCustomAnnotationFunction)(e),s=(0,m.getCustomOverlayFunction)(e),l=r?r.getAnnotations():{},f=(0,u.default)(l).map(function(t){return(0,h.getAnnotationProperties)(e,l[t])}).filter(function(e){return!!e}),d=o||s?[(0,c.default)("div.annotations",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},hook:{insert:t,update:t}})]:f.map((0,p.default)(e));return(0,c.default)("div",{style:{position:"relative",display:n?"block":"none"},on:{contextmenu:a},hook:{update:function(e){return r&&r.attach(e.elm)},insert:i(e)}},d)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(4),u=n(s);t.default=o;var l=r(37),c=n(l),f=r(56),d=n(f),h=r(332),p=n(h),g=r(20),m=r(122)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,o.default)("div",{key:"error",style:u.default.absoluteMaxCentered},[(0,o.default)("div",{style:{flex:"0 0 100%"}},(0,l.getErrors)(e).map(function(e){return(0,o.default)("h2",e)}).toArray())])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(37),o=n(a),s=r(153),u=n(s),l=r(20)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,d.getHoverColor)(e),n=m?"":"\n"+t+" ul.tools li:not(.active):hover svg path {\n  fill: "+r+";\n}\n";return(0,l.default)("style",{props:{innerHTML:n}})}function a(e){function t(t){return function(r){e.dispatch((0,h.runCommand)(t));var n=(0,d.getCanvasElement)(e);n&&n.focus()}}var r=(0,h.getCommands)(e,"playerTools"),n=(0,d.getActiveColor)(e),a=[i(e,"div.claraplayer"),(0,l.default)("ul.tools",{style:{position:"relative",bottom:0,left:0,listStyleType:"none",padding:"0 5px",margin:0,zIndex:(0,d.isVRMode)(e)?2147483647:"inherit"}},[f.glowFilter()].concat((0,s.default)(r).map(function(i){var a=r[i],o=a.isActive?a.isActive(e):a.active,s=a.active&&a.activeLabel?a.activeLabel:a.label,u=f[a.options.icon||i],c=[];return"function"==typeof u?c.push(u({width:34,height:34,title:s},{active:o,activeColor:n})):c.push((0,l.default)("span",{style:{color:o?n:"#fff",textShadow:"1px 1px 1px #333",position:"relative",top:"10px"}},s)),(0,l.default)("li"+(o?".active":""),{attrs:{title:s},on:{click:t(i)},style:{cursor:"pointer",float:"left",borderRadius:"5px",padding:"5px",boxSizing:"border-box",pointerEvents:"auto"}},c)})))],o=(0,g.default)(e);return o&&a.push(o),(0,l.default)("span",{style:{position:"absolute",left:"5px",right:"5px",bottom:"5px",display:"flex",flexWrap:"nowrap",height:"54px",pointerEvents:"none"}},a)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),s=n(o);t.hoverStyle=i,t.default=a;var u=r(37),l=n(u),c=r(152),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(c),d=r(8),h=r(43),p=r(339),g=n(p),m=!!("ontouchstart"in window)||window.navigator.msMaxTouchPoints>0},function(e,t,r){"use strict";function n(e,t,r,n){function i(e){e.stopPropagation()}var o={width:"0",height:"100%",position:"absolute",left:t+"%",top:"0",pointerEvents:"auto",cursor:"pointer"},s={boxSizing:"border-box",position:"absolute",zIndex:"1070",display:"block",visibility:"visible",fontSize:"12px",fontWeight:"normal",lineHeight:"1.4",top:"-32px",left:"-25px",width:"50px",height:"22px",marginTop:"-3px",padding:"5px 0",opacity:"1"};n||(s.opacity="0",s.transition="opacity 0.15s linear");var u={maxWidth:"200px",padding:"3px 8px",color:"#ffffff",textAlign:"center",textDecoration:"none",backgroundColor:"#000000",borderRadius:"4px",boxShadow:"#000 0 0 5px",margin:"0 auto",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none"},l={boxSizing:"border-box",position:"absolute",width:"0",height:"0",bottom:"-10px",left:"50%",marginLeft:"-5px",borderWidth:"5px 5px 0",borderTopColor:"#000000",borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",borderStyle:"solid"};return(0,a.default)("div.marker",{style:o,on:{mousedown:i,touchstart:i}},[(0,a.default)("div.tooltip",{style:s},[(0,a.default)("div.tooltip-arrow",{style:l}),(0,a.default)("div.tooltip-inner",{style:u},(r*t/1e5).toFixed(1))])])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(37),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return f?c.default.resolve(f):new c.default(function(e){r.e(0).then(function(t){f=r(721).default,e(f)}.bind(null,r)).catch(r.oe)})}function a(e,t){var r=t.isFlex,n=t.isRelative,a=t.hasWebGL,s=(0,k.isSceneRendered)(e),l=(0,F.getConfigurators)(e),c=e.getIn(["sceneIO","id"]),f=s||!c||!(0,V.shouldDisplayThumbnail)(e),d=!f&&(0,V.getThumbnailURL)(e,c),h=[(0,g.default)("style",{props:{innerHTML:"\n  div.claraplayer canvas {\n    box-sizing: content-box;\n    -webkit-box-sizing: content-box;\n  }\n  div.claraplayer canvas:focus {\n    outline: none;\n  }\n"}})],p=e.getIn(["player","fullscreenBackgroundColor"]),m=(0,u.default)({},D.default.player,{backgroundImage:f?"":"url("+d+")",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%",backgroundPosition:"center",position:r||n?"absolute":"relative",boxSizing:"border-box",backgroundColor:(0,V.isFullscreen)(e)?p:"transparent",overflow:"hidden"});return(0,k.numErrors)(e)?h.push((0,N.default)(e)):(h.push((0,A.default)(e,"player")),s?(h.push((0,O.default)(e)),(0,V.shouldDisplayVrSettings)(e)?h.push((0,j.default)(e)):h.push(""),l.forEach(function(t){var r=t.form,n=t.el,a=t.panel,o=t.id;if(r){var s=(0,F.getForm)(e,r,{id:o});h.push((0,P.default)(e,s)),n&&(n.classList&&n.classList.add("clara"),i().then(function(t){return t(e,n,s,!0,o)})),a&&h.push((0,g.default)("div.configurator.clara",{hook:{update:function(t){i().then(function(r){return r(e,t.elm,s,!1,o)})},insert:function(t){i().then(function(r){return r(e,t.elm,s,!1,o)})}}},""))}})):a&&h.push((0,B.default)(e))),(0,g.default)("div.claraplayer",{style:m,hook:{insert:o(e)}},h)}function o(e){return function(){[["webkitfullscreenchange","webkitIsFullScreen"],["mozfullscreenchange","mozFullScreen"],["MSFullscreenChange","msFullscreenElement"]].forEach(function(t){document.addEventListener(t[0],function(){e.dispatch((0,V.setFullscreen)(!!document[t[1]]))})})}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),u=n(s),l=r(39),c=n(l);t.default=a;var f,d=r(310),h=n(d),p=r(37),g=n(p),m=r(306),v=n(m),y=r(308),M=n(y),w=r(305),x=n(w),b=r(309),T=n(b),S=r(307),_=n(S),E=r(333),A=n(E),I=r(153),D=n(I),L=r(334),N=n(L),C=r(335),O=n(C),R=r(340),P=n(R),z=r(341),j=n(z),U=r(338),B=n(U),V=r(8),k=r(20),F=r(98);h.default.init([v.default,M.default,x.default,T.default,_.default])},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=y*(1-t);return(0,f.default)("div",{style:(0,l.default)({},h.default.absoluteMaxCentered,{backgroundColor:"transparent",boxSizing:"border-box"})},[(0,f.default)("div",{style:v},[(0,f.default)("svg",{attrs:x},[(0,f.default)("circle",{attrs:M}),(0,f.default)("circle",{props:{id:"bar"},attrs:(0,l.default)({},w,{"stroke-dashoffset":r})})])])])}function a(e,t){return(0,f.default)("div",{style:{position:"absolute",left:0,right:0,bottom:0,height:"4px",backgroundColor:"transparent",boxSizing:"border-box"}},[(0,f.default)("div",{style:{width:100*t+"%",backgroundImage:"linear-gradient(to bottom, #0b1a24 0%, #88b9d9 100%)",height:"100%"}},[])])}function o(e){return(0,f.default)("div","")}function s(e){var t=(0,p.loadingProgress)(e),r=(0,g.getProgressBar)(e);return m(e,t),(b[r]||i)(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var u=r(97),l=n(u);t.circleProgress=i,t.linearProgress=a,t.noProgress=o,t.default=s;var c=r(37),f=n(c),d=r(153),h=n(d),p=r(20),g=r(8),m=function(){var e,t;return"undefined"==typeof performace?function(){}:function(r,n){e&&t||(e||(e=(new Date).getTime()-performance.timing.navigationStart),n<1||(t=(new Date).getTime()-performance.timing.navigationStart,console.log("Page loaded in "+e+"ms and rendered in "+t+"ms")))}}(),v={flex:"0 0 25%"},y=85*Math.PI*2,M={r:85,cx:100,cy:100,fill:"transparent","stroke-dasharray":y,"stroke-dashoffset":0,"stroke-width":"1em",stroke:"#eee"},w={r:85,cx:100,cy:100,fill:"transparent",stroke:"#646766",transition:"stroke-dashoffset 1s linear","stroke-width":"1em","stroke-dashoffset":y,"stroke-dasharray":y},x={height:"100%",width:"100%",viewport:"0 0 100 100",viewBox:"0 0 200 200"},b={default:i,circle:i,line:a,none:o}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(t,r){var n=t.width,i=t.left;return function(t){p=!0,h&&window.clearTimeout(h),h=window.setTimeout(function(){p=!1,e.dispatch({type:"POKE"})},2e3);var a=r?t.touches[0].pageX:t.pageX,o=Math.max(Math.min((a-i)/n,1),0),s=o*w+M;e.dispatch((0,f.setTime)(s))}}function r(r){p=!0,h&&window.clearTimeout(h),h=window.setTimeout(function(){p=!1,e.dispatch({type:"POKE"})},2e3),null!==d&&(window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",n),window.removeEventListener("touchmove",d),window.removeEventListener("touchend",n));var i=!!r.touches,a=i?r.touches[0].clientX:r.clientX,o="ruler"===r.target.className?r.target:r.target.parentNode,s=o.getBoundingClientRect(),u=(a-s.left)/s.width*w+M;e.dispatch((0,f.setTime)(u)),d=t(s,i),i?(window.addEventListener("touchmove",d),window.addEventListener("touchend",n)):(window.addEventListener("mousemove",d),window.addEventListener("mouseup",n))}function n(e){window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",n),window.removeEventListener("touchmove",d),window.removeEventListener("touchend",n),d=null}var i={flex:"1 1 auto",position:"relative",bottom:0,right:0,borderRadius:"5px",padding:"0 20px",pointerEvents:"auto"},a={boxSizing:"border-box",backgroundColor:"rgba(0, 0, 0, 0.2)",border:"1px solid #ccc",position:"relative",top:"17px",left:"56px",height:"10px",width:"calc(100% - 55px)",cursor:"pointer"},u=(0,c.getActiveColor)(e),g=(0,c.getHoverColor)(e),m={width:34,height:34,title:"play"},v={active:!1,activeColor:u},y=(0,f.getTimelineAnimation)(e);if(!y)return null;var M=y.start,w=y.duration/Math.abs(y.playSpeed),x=100*Math.max(Math.min(((0,f.getTime)(e)-M)/w,1),0),b={backgroundColor:u,width:"calc("+x+"% - 2px)",height:"6px",position:"absolute",left:"1px",top:"1px",cursor:"pointer"},T={position:"relative",display:"inline-block",verticalAlign:"middle",top:"-5px",cursor:"pointer"},S="\n    div.claraplayer div div svg:hover path {\n    fill: "+g+";\n  }",_=(0,f.isPlaying)(e)?(0,s.pause)(m,v):(0,s.play)(m,v),E=(0,f.isPlaying)(e)?function(){return e.dispatch((0,f.stopPlaying)())}:function(){return e.dispatch((0,f.startPlaying)())};return(0,o.default)("div",{style:i},[(0,o.default)("style",{props:{innerHTML:S}}),(0,o.default)("div.ruler",{style:a,on:{mousedown:r,touchstart:r}},[(0,o.default)("div.played",{style:b}),(0,l.default)(e,x,w,p)]),(0,o.default)("div",{style:T,on:{click:E}},[_])])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(37),o=n(a),s=r(152),u=r(336),l=n(u),c=r(8),f=r(67),d=null,h=null,p=!1},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=(0,l.getProductTour)(e);if(r)return v(e,r,t);if(!1!==r&&t)for(var n=0;n<t.fields.length;n++){var i=t.fields[n];if("Product Tour"===i.displayAs)return v(e,i.attribute,t)}return(0,u.default)("div",{style:{pointerEvents:"none"}})}Object.defineProperty(t,"__esModule",{value:!0});var a=r(97),o=n(a);t.default=i;var s=r(37),u=n(s),l=r(98),c=0,f={left:"10px"},d={right:"10px"},h={position:"absolute",top:"50%",height:"50px",width:"50px",borderRadius:"50%",backgroundColor:"rgba(100, 100, 100, 0.6)",cursor:"pointer",pointerEvents:"auto",marginTop:"-25px"},p={position:"absolute",top:"13px",width:0,height:0,borderStyle:"solid",outline:"none"},g={borderWidth:"12px 24px 12px 0",borderColor:"transparent white transparent transparent"},m={borderWidth:"12px 0 12px 24px",borderColor:"transparent transparent transparent white"},v=function(e,t,r){var n=(0,l.getFormState)(e,{id:r.nodeId}),i=n&&n.optionsVisible&&n.optionsVisible[t.id],a=t.values||[];i&&(a=a.filter(function(e){return i[e]}));var s=function(r){return function(){c=a.indexOf((0,l.getConfiguration)(e)[t.name])||0,c=(c+r)%a.length,c<0&&(c=a.length-1),e.dispatch((0,l.executeAttribute)(t.name,a[c]))}},v={height:"100%",width:"100%",pointerEvents:"none"},y=(0,o.default)({},h,f),M=(0,o.default)({},p,g,f),w=(0,o.default)({},h,d),x=(0,o.default)({},p,m,d);return(0,u.default)("div",{style:v},[(0,u.default)("div",{style:y,on:{click:s(-1)}},[(0,u.default)("div",{style:M})]),(0,u.default)("div",{style:w,on:{click:s(1)}},[(0,u.default)("div",{style:x})])])}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){return{userHeightFeet:null===E?5:Number(E),userHeightInches:null===A?11:Number(A)}}function a(e){E=e}function o(e){A=e}function s(e){var t=e.elm.getBoundingClientRect(),r=t.width,n=t.height;I=r,D=n}function u(e){function t(){e.dispatch((0,g.setCommandOptions)("vrMode",i())),e.dispatch((0,g.activateCommand)("vrMode")),e.dispatch((0,m.displayVrSettings)(!1))}function r(){e.dispatch((0,g.deactivateCommand)("vrSettings")),e.dispatch((0,m.displayVrSettings)(!1))}function n(e,t,r,n,i){for(var a=[],o=t;o<=r;o++)a.push((0,p.default)("option",{attrs:{selected:o===i},style:b},o+""));return(0,p.default)("div",{style:{margin:"10px"}},[(0,p.default)("select",{style:(0,c.default)({},b,{width:"12vw",height:"42px",backgroundColor:"#d6d6d6"}),on:{change:e}},a),(0,p.default)("p",{style:(0,c.default)({},b,{display:"inline",marginLeft:"10px"})},n)])}var u=i(),l=1.1*D>I,f=!0;I&&D&&l&&(f=f&&I>L);var d=l?M:w;return(0,p.default)("div",{style:y,hook:{insert:function(e){return s(e)},update:function(e,t){return s(t)}}},[(0,p.default)("div",{style:(0,c.default)({},d,{flex:2})},[(0,p.default)("div",{style:M},[(0,p.default)("p",{style:b},"Put on your headset."),(0,p.default)("div",{style:{position:"relative",width:"24vw",paddingBottom:"24vw"}},[(0,v.vrHeadSet)({},S)])]),f?(0,p.default)("div",{style:M},[(0,p.default)("p",{style:b},"Enter your height:"),(0,p.default)("div",{style:{position:"relative",width:"38vw",paddingBottom:"24vw"}},[(0,p.default)("div",{style:S},[(0,p.default)("div",{style:(0,c.default)({},M,{alignItems:"flex-start"})},[n(function(e){return a(Number(e.target.value))},4,9,"Feet",u.userHeightFeet),n(function(e){return o(Number(e.target.value))},0,11,"Inches",u.userHeightInches)])])])]):""]),(0,p.default)("div",{style:x},[(0,p.default)("div",{style:_},[(0,p.default)("div",{style:(0,c.default)({},T,{backgroundColor:"transparent",cursor:"none",display:"flex",alignItems:"flex-end"})},[(0,p.default)("a",{style:{color:"black",bottom:0,marginLeft:"10px"},on:{click:r}},"Cancel")])]),(0,p.default)("div",{style:_},[l?(0,p.default)("div",{style:{flex:1}}):"",(0,p.default)("button",{style:T,on:{click:t}},"Enter VR")]),(0,p.default)("div",{style:_})])])}Object.defineProperty(t,"__esModule",{value:!0});var l=r(97),c=n(l),f=r(500),d=n(f);t.default=u;var h=r(37),p=n(h),g=r(43),m=r(8),v=r(152),y={position:"absolute",display:"flex",flexDirection:"column",left:0,top:0,height:"100%",width:"100%",backgroundColor:"#98989a",zIndex:d.default},M={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",flex:1,width:"100%",height:"100%"},w={display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flex:1,height:"100%"},x={flex:1,display:"flex",flexDirection:"row",alignItems:"center",height:"100%",position:"relative"},b={fontFamily:"sans-serif",color:"#000000",fontSize:"20px"},T=(0,c.default)({},b,{color:"lightgray",flex:1,backgroundColor:"black",backgroundRepeat:"no-repeat",borderRadius:"8px",border:"none",cursor:"pointer",overflow:"hidden",outline:"none",width:"100%",height:"100%"}),S={position:"absolute",top:0,left:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},_={height:"80%",width:"100%",display:"flex",flexDirection:"column",flex:1,alignContent:"center",justifyContent:"center"},E=null,A=null,I=0,D=0,L=350},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.fetchApi)throw new Error('Expect a "fetchApi" function');var t=e.fetchApi,r=e.subscribe,n=e.translator,i=e.modules,a=(0,u.default)(i||{}).reduce(function(e,t){return e[t]=i[t].reducer,e},{}),s=(0,U.default)((0,o.default)({},k,a),d.default);s.setApi(t);var l=(0,V.default)(s,(0,o.default)({animation:p.default,annotations:m.default,assets:y.default,commands:b.default,configuration:w.default,scene:C.default,sceneIO:L.default,sceneGraph:I.default,selection:R.default,player:S.default,plugins:E.default},i)),f=(0,o.default)({},(0,c.default)(),{_store:s,deps:{THREE:z}},l);s.api=f,s.subscribe(function(e){r&&r(),e.length&&e.forEach(function(e){f.emit(e.type,e.args)}),f.emit("change")}),n&&s.setTranslator(n,s);var h=s.getTranslator();return s.dispatch((0,_.setApi)(f)),(0,u.default)(e.commands||{}).forEach(function(t){var r=e.commands[t];f.commands.addCommand("function"==typeof r?r(s,h):r,t)}),f}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a),s=r(4),u=n(s);t.default=i;var l=r(487),c=n(l),f=r(255),d=n(f),h=r(67),p=n(h),g=r(122),m=n(g),v=r(33),y=n(v),M=r(98),w=n(M),x=r(43),b=n(x),T=r(8),S=n(T),_=r(345),E=n(_),A=r(10),I=n(A),D=r(20),L=n(D),N=r(7),C=n(N),O=r(45),R=n(O),P=r(0),z=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(P),j=r(493),U=n(j),B=r(491),V=n(B),k={animation:p.default.reducer,annotations:m.default.reducer,assets:y.default.reducer,commands:b.default.reducer,configuration:w.default.reducer,sceneGraph:I.default.reducer,sceneIO:L.default.reducer,player:S.default.reducer,plugins:E.default.reducer,selection:R.default.reducer}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(147),a=n(i),o=r(148),s=n(o),u=r(79),l=n(u),c=r(45),f=r(0),d=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,e),this.id=(0,l.default)(),this._store=t,this._color=r.color||"#00ff00",this._thickness=r.thickness||1,this._selectionSet=r.selectionSet||null}return(0,s.default)(e,[{key:"_touch",value:function(){this._store.dispatch((0,c.touchHighlighter)(this))}},{key:"setSelectionSet",value:function(e){this._selectionSet=e,this._touch()}},{key:"setColor",value:function(e){this._color=e,this._touch()}},{key:"setThickness",value:function(e){this._thickness=e,this._touch()}},{key:"color",get:function(){return new f.Color(this._color)}},{key:"thickness",get:function(){return this._thickness}},{key:"selectedIds",get:function(){return this._selectionSet?this._selectionSet.ids:[]}}]),e}();t.default=d},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t={};return e.filter(function(e){return!t[e]&&(t[e]=!0)})}Object.defineProperty(t,"__esModule",{value:!0});var a=r(147),o=n(a),s=r(148),u=n(s),l=r(79),c=n(l),f=r(45),d=r(7),h=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,o.default)(this,e),this.id=(0,c.default)(),this._store=t,this._ids=Array.isArray(r)?r:(0,d.filter)(t,r,{onlyNode:!0})}return(0,u.default)(e,[{key:"_touch",value:function(){this._store.dispatch((0,f.touchSelectionSet)(this))}},{key:"add",value:function(e){var t=(0,d.filter)(this._store,e,{onlyNode:!0});this._ids=i(this._ids.concat(t)),this._touch()}},{key:"remove",value:function(e){var t=(0,d.filter)(this._store,e,{onlyNode:!0});this._ids=this._ids.filter(function(e){return!t.includes(e)}),this._touch()}},{key:"clear",value:function(){this._ids=[],this._touch()}},{key:"destroy",value:function(){this._store.dispatch((0,f.removeSelectionSet)(this.id))}},{key:"ids",get:function(){return this._ids}}]),e}();t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){try{var n=function(t){return new Function("api",t||"")(e.getIn(["plugins","api"]))},i=r.content,a=r.loadFromServer,o=r.url;return a?(console.log("Load plugin from server",o),new S.default.Promise(function(r,i){e.callApi({types:[E,A,D],url:o,payload:t,queryKey:"PLUGINexternal"+t,contentType:"external"}).then(function(e){console.log("fetched external plugin",void 0===e?"undefined":(0,g.default)(e),e&&e.length);try{var t=n(e);t||console.log("External plugin must be a function that returns an object"),r(t||{})}catch(e){console.log("Error building plugin",e),e.stack&&console.log(e.stack),r({})}}).catch(function(e){console.log("Error loading external plugin",e),r({})})})):v.default.resolve(n(i))}catch(e){console.log("error",e)}}function a(e){return function(t){var r=t.getIn(["sceneIO","id"]);if(!r)return v.default.reject("No scene attached");var n=t.getIn(["plugins","api"]);return n&&n[e]?v.default.resolve(n[e]):t.callApi({types:[E,A,D],url:"https://clara.io/api/scenes/"+r+"/plugins/"+e,payload:e,queryKey:"PLUGIN"+e}).then(function(r){return i(t,e,r).then(function(r){return t.dispatch({type:I,payload:{name:e,plugin:r}}),r})})}}function o(e,t){var r=e.getIn(["plugins","plugins",t]);return r?v.default.resolve(r):e.dispatch(a(t))}function s(e){return{type:_,payload:e}}function u(e,t,r){try{var n=function(e){return console.log(e),v.default.resolve(!0)},i=t.split("/"),a=(0,h.default)(i,2),s=a[0],u=a[1],l="string"==typeof r?JSON.parse(r):r;return function(){return console.log("Get plugin",s,"for command",u),o(e,s).then(function(e){return console.log("Fetched plugin",!!e,"object"===(void 0===e?"undefined":(0,g.default)(e))&&(0,f.default)(e)),e?e[u]?"function"!=typeof e[u]?n("Command: "+u+" in plugin: "+s+" is not a function"):Array.isArray(l)?v.default.resolve(e[u].apply(e,l)):v.default.resolve(e[u](l)):n("Unknown command: "+u+" for plugin: "+s):n("Error getting plugin: "+s)})}}catch(e){return function(){console.error(e)}}}Object.defineProperty(t,"__esModule",{value:!0});var l,c=r(4),f=n(c),d=r(49),h=n(d),p=r(38),g=n(p),m=r(39),v=n(m),y=r(19),M=n(y);t.get=o,t.setApi=s,t.getSetupCommand=u;var w=r(32),x=r(46),b=n(x),T=r(204),S=n(T),_="SET_API",E="LOADING_PLUGIN",A="LOADED_PLUGIN",I="SET_PLUGIN",D="LOADING_PLUGIN_ERROR",L=(0,w.Map)({api:null,plugins:(0,w.Map)(),loading:(0,w.Map)()}),N=(0,b.default)(L,(l={},(0,M.default)(l,_,function(e,t){return e.set("api",t)}),(0,M.default)(l,E,function(e,t){return e.setIn(["loading",t],!0)}),(0,M.default)(l,A,function(e,t,r){r.action;return e.setIn(["loading",t],!1)}),(0,M.default)(l,I,function(e,t){var r=t.name,n=t.plugin;return e.setIn(["plugins",r],n)}),l)),C={reducer:N,actions:{loadPlugin:a},selectors:{get:o,getSetupCommand:u}};t.default=C},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){function n(e,t){if(e!==t){f[e]=a[e];var r=l(e),n=t&&l(t),i=!0,s=!1,c=void 0;try{for(var d,h=(0,u.default)((0,o.default)(r));!(i=(d=h.next()).done);i=!0){var p=d.value,g=n&&n[p]||[],m=!0,v=!1,y=void 0;try{for(var M,w=(0,u.default)(r[p]);!(m=(M=w.next()).done);m=!0){var x=M.value;-1===g.indexOf(x)&&(f[x]=a[x])}}catch(e){v=!0,y=e}finally{try{!m&&w.return&&w.return()}finally{if(v)throw y}}}}catch(e){s=!0,c=e}finally{try{!i&&h.return&&h.return()}finally{if(s)throw c}}}}function i(e,t,r){if(t!==r){f[t]=a[t];var o=l(t),s=r&&l(r),u=p[e]||[],c=g&&g[e]||[];n(o.plugs,s&&s.plugs),u.forEach(function(e,t){var r=c.indexOf(e);i(e,o.children[t],s&&s.children[r])})}}var a=e.objects,s=e.activeSceneId,l=(0,c.default)(a),f={};if(r&&t.root===r.root)return f;f[t.root]=a[t.root];var d=l(t.root),h=r&&l(r.root);d.heirarchy!==h.heirarchy&&(f[d.heirarchy]=a[d.heirarchy]),d.references!==h.references&&(f[d.references]=a[d.references]);var p=l(d.heirarchy),g=h&&l(h.heirarchy);return i(s,d.content,h&&h.content),function(e,t){if(e!==t){f[e]=a[e];var r=l(e),n=t?l(t):{};(0,o.default)(r).forEach(function(e){var t=r[e];n[e]!==t&&(f[t]=a[t])})}}(d.files,h&&h.files),f}Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),o=n(a),s=r(24),u=n(s);t.default=i;var l=r(154),c=n(l)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i){var a=(0,c.default)(e.objects),s=a(t.root),l=r&&a(r.root),f=n&&a(n.root),d=a(s.references),h=l?a(l.references):{},p=f?a(f.references):{},g=!0,m=!1,v=void 0;try{for(var y,M=(0,u.default)((0,o.default)(d));!(g=(y=M.next()).done);g=!0){var w=y.value;i(JSON.parse(w),d[w])}}catch(e){m=!0,v=e}finally{try{!g&&M.return&&M.return()}finally{if(m)throw v}}var x=!0,b=!1,T=void 0;try{for(var S,_=(0,u.default)((0,o.default)(p));!(x=(S=_.next()).done);x=!0){var w=S.value;p[w]!==d[w]&&i(JSON.parse(w),d[w])}}catch(e){b=!0,T=e}finally{try{!x&&_.return&&_.return()}finally{if(b)throw T}}var E=!0,A=!1,I=void 0;try{for(var D,L=(0,u.default)((0,o.default)(h));!(E=(D=L.next()).done);E=!0){var w=D.value;d[w]||p[w]||i(JSON.parse(w),null)}}catch(e){A=!0,I=e}finally{try{!E&&L.return&&L.return()}finally{if(A)throw I}}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),o=n(a),s=r(24),u=n(s);t.default=i;var l=r(154),c=n(l)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new Error("assertion failure: "+t)}function a(e,t){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0}function o(e,t,r,n,o){function s(e,t,r,n){if(t.plugs===r.plugs){if(!n)return;if(n.plugs===t.plugs)return}var i=M(t.plugs),o=M(r.plugs),s=n&&M(n.plugs),u={},l=!0,h=!1,p=void 0;try{for(var g,m=(0,d.default)((0,c.default)(i));!(l=(g=m.next()).done);l=!0)!function(){var e=g.value;a(function(t,r){return o[e][r]===t},i[e])||(u[e]=i[e].map(M)),s&&a(function(t,r){return o[e][r]===t},i[e])&&(u[e]=s[e].map(M))}()}catch(e){h=!0,p=e}finally{try{!l&&m.return&&m.return()}finally{if(h)throw p}}f({id:e,plugs:u})}function l(e,t,r,n,a){if(n===r){if(!a)return;if(a===r)return}var o=T[e]||[],u=S&&S[e]||[],f=_&&_[e]||[],p=M(r),m=n&&M(n),v=a&&M(a);i(p.children.length===o.length,"Expected heirarchy to match content: "+e),v&&i(v.children.length===f.length,"Expected heirarchy to match content: "+e),m&&i(m.children.length===u.length,"Expected heirarchy to match content: "+e);y[e];if(m)s(e,p,m,v);else{var w=M(p.plugs),x={},b=!0,E=!1,A=void 0;try{for(var I,D=(0,d.default)((0,c.default)(w));!(b=(I=D.next()).done);b=!0){var L=I.value;x[L]=w[L].map(function(e){var t=M(e);return[t.type,t,t.name]})}}catch(e){E=!0,A=e}finally{try{!b&&D.return&&D.return()}finally{if(E)throw A}}h({id:e,parent:t,plugs:x,children:[],name:p.name,type:p.type})}o.forEach(function(t,r){var n=u.indexOf(t),i=f.indexOf(t);l(t,e,p.children[r],m&&m.children[n],v&&v.children[i])}),f.forEach(function(t,r){var n=o.indexOf(t),i=u.indexOf(t);-1===n&&l(t,e,v.children[r],m&&m.children[i])}),u.forEach(function(e,t){-1!==o.indexOf(e)||f&&-1!==f.indexOf(e)||g(e)})}var f=o.changeNode,h=o.addNode,g=o.deleteNode,m=o.addFile,v=(o.removeFile,e.activeSceneId),y=(e.objects,e.nodes),M=(0,p.default)(e.objects),w=M(t.root),x=r&&M(r.root),b=n&&M(n.root),T=M(w.heirarchy),S=(M(w.references),x&&M(x.heirarchy)),_=(x&&M(x.references),b&&M(b.heirarchy));b&&M(b.references);l(v,null,w.content,x&&x.content,b&&b.content),function(e,t,r){var n=M(e),i=t?M(t):{},a=r?M(r):{};(0,c.default)(n).forEach(function(e){if(i[e]){if(i[e]!==n[e])throw new Error("Update file")}else m((0,u.default)({id:e},M(n[e])))}),(0,c.default)(a).forEach(function(e){if(i[e]){if(i[e]!==a[e])throw new Error("Update file")}else m(M(a[e]))})}(w.files,x&&x.files,b&&b.files)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),u=n(s),l=r(4),c=n(l),f=r(24),d=n(f);t.default=o;var h=r(154),p=n(h)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,a){var o=e.from,s=e.to,u=(0,m.default)([t,r,n,i]),l=s[u];if(l){var c=!0,f=!1,h=void 0;try{for(var g,v=(0,p.default)(l);!(c=(g=v.next()).done);c=!0){var y=g.value;-1===a.indexOf(y)&&(delete o[y][u],(0,d.default)(o[y]).length||delete o[y])}}catch(e){f=!0,h=e}finally{try{!c&&v.return&&v.return()}finally{if(f)throw h}}}var M=!0,w=!1,x=void 0;try{for(var b,T=(0,p.default)(a);!(M=(b=T.next()).done);M=!0){var S=b.value;o[S]||(o[S]={}),o[S][u]=!0}}catch(e){w=!0,x=e}finally{try{!M&&T.return&&T.return()}finally{if(w)throw x}}s[u]=a}function a(e,t,r,n,i,a,o,s){var u=t.from,l=t.to,c=o[a];c&&e&&!e.nodes[c]&&(console.warn("No reference to:",c,"from",r,n,i,a),o[a]=c=null);var f=(0,m.default)([r,n,i,a]),h=l[f];h?h!==c&&(delete u[h][f],c?(u[c]||(u[c]={}),u[c][f]=s||!0,l[f]=c):((0,d.default)(u[h]).length||delete u[h],delete l[f])):c&&(u[c]||(u[c]={}),u[c][f]=s||!0,l[f]=c)}function o(e,t,r){function n(e,r){if(D[e]&&!L[e])throw console.error("Circular reference, updating",t.nodes[e].name),new Error("Circular reference: "+e);A[e]&&!D[e]&&l(e,A[e]);var n=L[e]||t.evaluatedNodes[e];return r&&(n=n&&n[r]),n}function o(e){if(t.worldTransformReferences[e]=!0,E[e])return E[e];!0!==A[e]&&"Transform"!==A[e]||D[e]||l(e,A[e]);var r=n(e,"Transform");if(!r)return null;var i=t.nodes[e],a=i&&i.parent,s=a&&o(a);return E[e]=s?(new v.Matrix4).copy(s).multiply(r.transform):(new v.Matrix4).copy(r.transform),E[e]}function s(r){return t.cameraReferences[r]=!0,o((0,M.getCamera)(e))}function l(u,l){var f=t.nodes[u];if(f){var h=t.evaluatedNodes[u];if(!h){h=t.evaluatedNodes[u]={name:f.name,_ev:0,plugs:[]},f.plugs.Properties&&h.plugs.push("Properties"),f.plugs.Transform&&h.plugs.push("Transform");var v=!0,y=!1,M=void 0;try{for(var x,b=(0,p.default)((0,d.default)(f.plugs));!(v=(x=b.next()).done);v=!0){var T=x.value;"Properties"!==T&&"Transform"!==T&&h.plugs.push(T)}}catch(e){y=!0,M=e}finally{try{!v&&b.return&&b.return()}finally{if(y)throw M}}}L[u]=h,D[u]=!0;var S=0,_=!0,E=!1,I=void 0;try{for(var N,C=(0,p.default)(h.plugs);!(_=(N=C.next()).done);_=!0){var O=N.value;!0!==l&&l!==O||function(l){var v=this,y=f.plugs[l],M=h[l],x=M?M._v:0;h[l]=y.reduce(function(y,x,b){if(!1===x.active)return y;var T=(0,w.lookupOperator)(l,x.type,[]),S=!0,_=!1,E=void 0;try{for(var A,I=(0,p.default)(T.fileReferenceKeys);!(S=(A=I.next()).done);S=!0){var D=A.value;a(null,t.fileReferences,u,l,b,D,x)}}catch(e){_=!0,E=e}finally{try{!S&&I.return&&I.return()}finally{if(_)throw E}}var L={},N=!0,C=!1,O=void 0;try{for(var R,P=(0,p.default)(T.nodeReferenceKeys);!(N=(R=P.next()).done);N=!0){var z=R.value;a(t,t.nodeReferences,u,l,b,z,x),x[z]&&!m&&(L[z+"Evaluated"]=n(x[z]))}}catch(e){C=!0,O=e}finally{try{!N&&P.return&&P.return()}finally{if(C)throw O}}var j=!0,U=!1,B=void 0;try{for(var V,k=(0,p.default)((0,d.default)(T.plugReferences));!(j=(V=k.next()).done);j=!0){var F=V.value;a(t,t.nodeReferences,u,l,b,F,x,T.plugReferences[F]),x[F]&&!m&&(L[F]=n(x[F],T.plugReferences[F]))}}catch(e){U=!0,B=e}finally{try{!j&&k.return&&k.return()}finally{if(U)throw B}}var G=!0,H=!1,W=void 0;try{for(var Y,Q=(0,p.default)(T.nodeReferenceListKeys);!(G=(Y=Q.next()).done);G=!0){var q=Y.value;i(t.nodeReferences,u,l,b,q,x[q])}}catch(e){H=!0,W=e}finally{try{!G&&Q.return&&Q.return()}finally{if(H)throw W}}return T.environment&&(a(t,t.nodeReferences,u,l,b,"environment",{environment:g},"Environment"),m||(L.environment=n(g,"Environment"))),T.hierarchyVisible&&(a(t,t.nodeReferences,u,l,b,"hierarchyVisibility",{hierarchyVisibility:g},"Properties"),m||(L.sceneProperties=n(g,"Properties"))),T.selfTransform&&(m||a(t,t.nodeReferences,u,l,b,"selfTransform",{selfTransform:u},"Transform")),T.selfProperties&&(m||a(t,t.nodeReferences,u,l,b,"selfProperties",{selfProperties:u},"Properties")),m?y:T.update((0,c.default)({},x,L),y,{sceneId:g,node:f,store:e,properties:h.Properties,getWorldTransform:o,getCameraWorldTransform:s.bind(v,u),previousResult:M,loaded:t.loaded,forceFetchAssets:r.forceFetchAssets})},{}),h[l]._v=x+1}(O),S+=h[O]._v}}catch(e){E=!0,I=e}finally{try{!_&&C.return&&C.return()}finally{if(E)throw I}}h._v=f._v,h._ev=S,delete D[u],delete A[u]}}function f(e,r){r&&(A[r]?A[e]=!!A[e]||"Transform":f(e,t.nodes[r].parent))}function h(e,t){if(S[e]){var r=!0,n=!1,i=void 0;try{for(var a,o=(0,p.default)((0,d.default)(S[e]));!(r=(a=o.next()).done);r=!0){var s=a.value,l=S[e][s],c=JSON.parse(s),f=(0,u.default)(c,4),g=f[0],m=f[1];f[2],f[3];t&&!0!==l&&l!==t||(A[g]?A[g]!==m&&(A[g]=!0,h(g,m)):(A[g]=m,h(g,m)))}}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}}}var g=t.activeSceneId,m=(new Date,r.skipEvaluation),x=(0,d.default)(t.nodes),b=(0,d.default)(t.evaluatedNodes),T=t.nodeReferences,S=T.from,_=(T.to,!t.loaded&&(0,y.isSceneLoaded)(e));t.loaded||(t.loaded=_);var E={},A={},I={},D={},L={},N=!0,C=!1,O=void 0;try{for(var R,P=(0,p.default)(x);!(N=(R=P.next()).done);N=!0){var z=R.value;t.evaluatedNodes[z]&&t.evaluatedNodes[z]._v===t.nodes[z]._v||(t.nodes[z]._changedPlug&&t.evaluatedNodes[z]?(A[z]=t.nodes[z]._changedPlug,delete t.nodes[z]._changedPlug):A[z]=!0)}}catch(e){C=!0,O=e}finally{try{!N&&P.return&&P.return()}finally{if(C)throw O}}var j=!0,U=!1,B=void 0;try{for(var V,k=(0,p.default)((0,d.default)(t.worldTransformReferences));!(j=(V=k.next()).done);j=!0){var F=V.value;!0!==A[F]&&"Transform"!==A[F]&&f(F,t.nodes[F].parent)}}catch(e){U=!0,B=e}finally{try{!j&&k.return&&k.return()}finally{if(U)throw B}}if(A[(0,M.getCamera)(e)]){var G=!0,H=!1,W=void 0;try{for(var Y,Q=(0,p.default)((0,d.default)(t.cameraReferences));!(G=(Y=Q.next()).done);G=!0){var q=Y.value;A[q]=!0}}catch(e){H=!0,W=e}finally{try{!G&&Q.return&&Q.return()}finally{if(H)throw W}}}var X=!0,Z=!1,K=void 0;try{for(var J,$=(0,p.default)(b);!(X=(J=$.next()).done);X=!0){var ee=J.value;t.nodes[ee]||(I[ee]=!0)}}catch(e){Z=!0,K=e}finally{try{!X&&$.return&&$.return()}finally{if(Z)throw K}}if(_){var te=!0,re=!1,ne=void 0;try{for(var ie,ae=(0,p.default)(x);!(te=(ie=ae.next()).done);te=!0){var oe=ie.value,se=t.evaluatedNodes[oe];se&&se.Properties&&se.Properties.prefetch&&(A[oe]=t.nodes[oe].type)}}catch(e){re=!0,ne=e}finally{try{!te&&ae.return&&ae.return()}finally{if(re)throw ne}}}var ue=!0,le=!1,ce=void 0;try{for(var fe,de=(0,p.default)((0,d.default)(A));!(ue=(fe=de.next()).done);ue=!0){var he=fe.value,pe=!0!==A[he]&&A[he];S[he]&&h(he,pe)}}catch(e){le=!0,ce=e}finally{try{!ue&&de.return&&de.return()}finally{if(le)throw ce}}var ge=!0,me=!1,ve=void 0;try{for(var ye,Me=(0,p.default)((0,d.default)(I));!(ge=(ye=Me.next()).done);ge=!0){var we=ye.value;delete t.evaluatedNodes[we]}}catch(e){me=!0,ve=e}finally{try{!ge&&Me.return&&Me.return()}finally{if(me)throw ve}}var xe=!0,be=!1,Te=void 0;try{for(var Se,_e=(0,p.default)((0,d.default)(A));!(xe=(Se=_e.next()).done);xe=!0){var Ee=Se.value;A[Ee]&&l(Ee,A[Ee])}}catch(e){be=!0,Te=e}finally{try{!xe&&_e.return&&_e.return()}finally{if(be)throw Te}}t._ev=t._v}Object.defineProperty(t,"__esModule",{value:!0});var s=r(49),u=n(s),l=r(2),c=n(l),f=r(4),d=n(f),h=r(24),p=n(h),g=r(47),m=n(g);t.updateReferenceList=i,t.updateReference=a,t.evaluateSceneGraph=o;var v=r(0),y=r(20),M=r(8),w=r(101)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=new Ammo.btDefaultCollisionConfiguration,r=new Ammo.btCollisionDispatcher(t),n=new Ammo.btDbvtBroadphase,i=new Ammo.btSequentialImpulseConstraintSolver,a=new Ammo.btDiscreteDynamicsWorld(r,n,i,t),o=(0,m.get)(e,{plug:"Player",property:"gravity"});return o||(o=new h.Vector3(0,-9.8,0)),a.setGravity(new Ammo.btVector3(o.x,o.y,o.z)),a}function a(e){var t=e.getOrigin(),r=e.getRotation(),n=new h.Vector3(t.x(),t.y(),t.z()),i=new h.Quaternion(r.x(),r.y(),r.z(),r.w()),a=new h.Vector3(1,1,1),o=new h.Matrix4;return o.compose(n,i,a),o}function o(e){for(var t=new Ammo.btConvexHullShape,r=e.positions.values,n=new h.Vector3,i=0;i<r.length;i++){r.getAt(i,n);var a=new Ammo.btVector3(n.x,n.y,n.z);t.addPoint(a)}return t}function s(e,t,r){var n=e.getThreeObject(r),i=null;n&&n.userData&&n.userData.triangulation&&(i=n.userData.triangulation.mesh),i||(i=(0,w.default)(t));for(var a=i.positions.values,o=i.positions.faceValueIndices,s=new Ammo.btTriangleMesh(!0,!0),u=new h.Vector3,l=new h.Vector3,c=new h.Vector3,f=0;f<o.length;f+=3){a.getAt(f,u),a.getAt(f+1,l),a.getAt(f+2,c);var d=new Ammo.btVector3(u.x,u.y,u.z),p=new Ammo.btVector3(l.x,l.y,l.z),g=new Ammo.btVector3(c.x,c.y,c.z);s.addTriangle(d,p,g,!1)}return new Ammo.btBvhTriangleMeshShape(s,!0,!0)}function u(e,t){var r=new Ammo.btVector3((t.max.x-t.min.x)/2,(t.max.y-t.min.y)/2,(t.max.z-t.min.z)/2);return new Ammo.btBoxShape(r)}function l(e){function t(t,i){var c=!1,f=!1;"Kinematic"===t.motionType&&(c=!0),"Static"===t.motionType&&(f=!0);var d=null,p=null,g=(0,m.getWorldTransform)(e,i);g.decompose(x,b,T);var v=t.collisionShape;if("Mesh"===v){var M=(0,m.get)(e,{id:i,evalPlug:"PolyMesh",property:"mesh"});M&&(d=s(a,M,i),d.setLocalScaling(new Ammo.btVector3(T.x,T.y,T.z)))}else if("Box"===v){var w=(0,m.getNodeBoundingBox)(e,i);d=u(i,w);var S=new h.Vector3((w.max.x+w.min.x)/2,(w.max.y+w.min.y)/2,(w.max.z+w.min.z)/2);p=(new h.Matrix4).getInverse(g,!0),p.multiply((new h.Matrix4).makeTranslation(S.x,S.y,S.z))}else{var _=(0,m.get)(e,{id:i,evalPlug:"PolyMesh",property:"mesh"});_&&(d=o(_),d.setLocalScaling(new Ammo.btVector3(T.x,T.y,T.z)),d.setMargin(0))}if(!d){var E=(0,m.get)(e,{id:i,property:"name"});console.warn("Could not create collision shape for '"+E+"', defaulting to a unit sphere"),d=new Ammo.btSphereShape(1)}p&&g.multiply(p),g.decompose(x,b,T);var A=new Ammo.btTransform;A.setIdentity(),A.setOrigin(new Ammo.btVector3(x.x,x.y,x.z)),A.setRotation(new Ammo.btQuaternion(b.x,b.y,b.z,b.w));var I=c||f?0:t.mass,D=0!==I,L=new Ammo.btVector3(0,0,0);D&&d.calculateLocalInertia(I,L);var N=new Ammo.btDefaultMotionState(A),C=new Ammo.btRigidBodyConstructionInfo(I,N,d,L);C.m_linearDamping=t.linearDamping,C.m_angularDamping=t.angularDamping,C.m_friction=t.friction,C.m_rollingFriction=t.rollingFriction,C.m_linearSleepingThreshold=t.linearSleepingThreshold,C.m_angularSleepingThreshold=t.angularSleepingThreshold,C.m_restitution=t.restitution;var O=new Ammo.btRigidBody(C);c&&(O.setCollisionFlags(O.getCollisionFlags()|y.default.BODYFLAG_KINEMATIC_OBJECT),O.setActivationState(y.default.BODYSTATE_DISABLE_DEACTIVATION)),l.addRigidBody(O),c?r[i]={body:O,shapeLocalTransform:p}:f||(n[i]={body:O,shapeLocalTransform:p})}var r={},n={},a=e.getEvaluatedTranslator(),l=i(e),c=(0,m.getAll)(e,{plug:"Properties",properties:{name:"RigidBodyProperties"}});return(0,g.default)(t,c),{dynamicsWorld:l,kinematicBodies:r,dynamicBodies:n}}function c(e,t,r,n,i,o){n.stepSimulation(t/1e3,_,S);var s=new Ammo.btTransform,u=new Ammo.btQuaternion,l=new Ammo.btVector3,c=(new h.Quaternion,new h.Euler);(0,d.default)(o).forEach(function(t){var r=o[t].body,n=(0,m.getWorldTransform)(e,t),i=o[t].shapeLocalTransform;i&&n.premultiply(i),n.decompose(x,b,T);var a=r.getMotionState(),s=r.getWorldTransform();l.setX(x.x),l.setY(x.y),l.setZ(x.z),u.setX(b.x),u.setY(b.y),u.setZ(b.z),u.setW(b.w),s.setOrigin(l),s.setRotation(u),a.setWorldTransform(s)}),(0,d.default)(i).forEach(function(t){i[t].body.getMotionState().getWorldTransform(s);var r=a(s),n=e.get("sceneGraph").nodes[t].parent,o=(0,m.getWorldTransform)(e,n);o&&r.premultiply((new h.Matrix4).getInverse(o,!0));var u=i[t].shapeLocalTransform;u&&r.premultiply((new h.Matrix4).getInverse(u,!0)),r.decompose(x,b,T),e.dispatch((0,m.set)({id:t,plug:"Transform",property:"translation"},[x.x,x.y,x.z])),c.setFromQuaternion(b,"ZYX"),e.dispatch((0,m.set)({id:t,plug:"Transform",property:"rotation"},[h.Math.RAD2DEG*c.x,h.Math.RAD2DEG*c.y,h.Math.RAD2DEG*c.z]))})}Object.defineProperty(t,"__esModule",{value:!0});var f=r(4),d=n(f);t.initPhysics=l,t.updatePhysics=c;var h=r(0),p=r(106),g=n(p),m=r(7),v=r(351),y=n(v),M=r(240),w=n(M),x=new h.Vector3,b=new h.Quaternion,T=new h.Vector3,S=1/60,_=4},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={BODYTYPE_STATIC:"Static",BODYTYPE_DYNAMIC:"Dynamic",BODYTYPE_KINEMATIC:"Kinematic",BODYFLAG_STATIC_OBJECT:1,BODYFLAG_KINEMATIC_OBJECT:2,BODYFLAG_NORESPONSE_OBJECT:4,BODYSTATE_ACTIVE_TAG:1,BODYSTATE_ISLAND_SLEEPING:2,BODYSTATE_WANTS_DEACTIVATION:3,BODYSTATE_DISABLE_DEACTIVATION:4,BODYSTATE_DISABLE_SIMULATION:5,BODYGROUP_NONE:0,BODYGROUP_DEFAULT:1,BODYGROUP_DYNAMIC:1,BODYGROUP_STATIC:2,BODYGROUP_KINEMATIC:4,BODYGROUP_ENGINE_1:8,BODYGROUP_TRIGGER:16,BODYGROUP_ENGINE_2:32,BODYGROUP_ENGINE_3:64,BODYGROUP_USER_1:128,BODYGROUP_USER_2:256,BODYGROUP_USER_3:512,BODYGROUP_USER_4:1024,BODYGROUP_USER_5:2048,BODYGROUP_USER_6:4096,BODYGROUP_USER_7:8192,BODYGROUP_USER_8:16384,BODYMASK_NONE:0,BODYMASK_ALL:65535,BODYMASK_STATIC:2,BODYMASK_NOT_STATIC:65533,BODYMASK_NOT_STATIC_KINEMATIC:65529};t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){var t=(0,u.default)(e),r=m.digest(t);return a[r]||(l[r]=t),r}function r(e){var i=n.nodes[e];if(i){f[e]=i.children;var a=i.children.map(r),s={children:a,name:i.name,type:i.type},u={},l=!0,d=!1,h=void 0;try{for(var p,m=(0,o.default)((0,c.default)(i.plugs));!(l=(p=m.next()).done);l=!0)!function(){var e=p.value;u[e]=i.plugs[e].map(function(r){return t((0,g.lookupOperator)(e,r.type,[]).contentExport(r))})}()}catch(e){d=!0,h=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw h}}s.plugs=t(u);var v=t(s);return i._hash=v,i._sv=i._v,v}}var n=e.get("sceneGraph"),i=n.refs.HEAD,a=n.objects,s=(n.history,n.syncedNodes,n.activeSceneId),l=((0,c.default)(n.nodes),(0,c.default)(n.evaluatedNodes),{}),f={},d=r(s),v=t(f),y={},M=(0,c.default)(n.nodeReferences.to);M.sort();var w=!0,x=!1,b=void 0;try{for(var T,S=(0,o.default)(M);!(w=(T=S.next()).done);w=!0){var _=T.value,E=JSON.parse(_);p.virtualNodes[E[0]]||"Material"===E[1]&&"environment"===E[3]||(y[_]=n.nodeReferences.to[_])}}catch(e){x=!0,b=e}finally{try{!w&&S.return&&S.return()}finally{if(x)throw b}}var A=(0,c.default)(n.fileReferences.to);A.sort();var I={};A.forEach(function(r){var i=n.fileReferences.to[r];y[r]=i;var a=(0,h.getFile)(e,i),o=a.name,s=a.hash,u=a.type,l=a.suffix;s&&(I[i]=t({name:o,hash:s,type:u,suffix:l}))});var D=t(y),L=t(I),N=t({heirarchy:v,references:D,content:d,files:L}),C={root:N,parents:i?[i]:[],createdAt:new Date,author:"wvl",message:"Version: "+n._v};return{commit:C,commitHash:t(C),objects:l}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(24),o=n(a),s=r(47),u=n(s),l=r(4),c=n(l);t.default=i;var f=r(693),d=n(f),h=r(33),p=r(10),g=r(101),m=new d.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={linear:function(e,t,r,n){return(r-t)*e/n+t},easeInQuad:function(e,t,r,n){return(r-t)*(e/=n)*e+t},easeOutQuad:function(e,t,r,n){return-(r-t)*(e/=n)*(e-2)+t},easeInOutQuad:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,r,n){return(r-t)*(e/=n)*e*e+t},easeOutCubic:function(e,t,r,n){return(r-t)*((e=e/n-1)*e*e+1)+t},easeInOutCubic:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,r,n){return(r-t)*(e/=n)*e*e*e+t},easeOutQuart:function(e,t,r,n){return-(r-t)*((e=e/n-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,r,n){return(r-t)*(e/=n)*e*e*e*e+t},easeOutQuint:function(e,t,r,n){return(r-t)*((e=e/n-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,r,n){var i=r-t;return-i*Math.cos(e/n*(Math.PI/2))+i+t},easeOutSine:function(e,t,r,n){return(r-t)*Math.sin(e/n*(Math.PI/2))+t},easeInOutSine:function(e,t,r,n){return-(r-t)/2*(Math.cos(Math.PI*e/n)-1)+t},easeInExpo:function(e,t,r,n){var i,a=r-t;return null!==(i=0===e)?i:{b:a*Math.pow(2,10*(e/n-1))+t}},easeOutExpo:function(e,t,r,n){var i,a=r-t;return null!==(i=e===n)?i:t+{c:a*(1-Math.pow(2,-10*e/n))+t}},easeInOutExpo:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(2-Math.pow(2,-10*--e))+t},easeInCirc:function(e,t,r,n){return-(r-t)*(Math.sqrt(1-(e/=n)*e)-1)+t},easeOutCirc:function(e,t,r,n){return(r-t)*Math.sqrt(1-(e=e/n-1)*e)+t},easeInOutCirc:function(e,t,r,n){var i=r-t;return(e/=n/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,r,n){var i,a,o,s=r-t;return o=1.70158,a=0,i=s,0===e||(e/=n),a||(a=.3*n),i<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/a)+t},easeOutElastic:function(e,t,r,n){var i,a,o,s=r-t;return o=1.70158,a=0,i=s,0===e||(e/=n),a||(a=.3*n),i<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*e)*Math.sin((e*n-o)*(2*Math.PI)/a)+s+t},easeInOutElastic:function(e,t,r,n){var i,a,o,s=r-t;return o=1.70158,a=0,i=s,0===e||(e/=n/2),a||(a=n*(.3*1.5)),i<Math.abs(s)?(i=s,o=a/4):o=a/(2*Math.PI)*Math.asin(s/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/a)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/a)*.5+s+t},easeInBack:function(e,t,r,n,i){var a=r-t;return void 0===i&&(i=1.70158),a*(e/=n)*e*((i+1)*e-i)+t},easeOutBack:function(e,t,r,n,i){var a=r-t;return void 0===i&&(i=1.70158),a*((e=e/n-1)*e*((i+1)*e+i)+1)+t},easeInOutBack:function(e,t,r,n,i){var a=r-t;return void 0===i&&(i=1.70158),(e/=n/2)<1?a/2*(e*e*((1+(i*=1.525))*e-i))+t:a/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},easeInBounce:function(e,t,r,i){var a,o=r-t;return a=n.easeOutBounce(i-e,0,o,i),o-a+t},easeOutBounce:function(e,t,r,n){var i=r-t;return(e/=n)<1/2.75?i*(7.5625*e*e)+t:e<2/2.75?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,r,i){var a=r-t;return e<i/2?.5*n.easeInBounce(2*e,0,a,i)+t:.5*n.easeOutBounce(2*e-i,0,a,i)+.5*a+t}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{useText:{type:"Boolean",label:"Use Custom Text",defaultValue:!1,animatable:!1},text:{type:"String",label:"Custom Text",defaultValue:"Annotation Text",animatable:!1},open:{type:"Boolean",label:"Open by default",defaultValue:!1,animatable:!1},limitVisilibility:{type:"Boolean",label:"Limit Visibility",defaultValue:!1,animatable:!1},visibilityAngle:{type:"Number",label:"Visibility Angle",defaultValue:180,step:5,minValue:10,maxValue:360,animatable:!1},directionMode:{label:"Direction Mode",type:"Options",labels:["Manual","Away From Origin"],values:["manual","awayFromOrigin"],defaultValue:"manual"},directionAxis:{label:"Direction",type:"Options",labels:["XAxis","YAxis","ZAxis"],values:["x","y","z"],defaultValue:"z"},directionTarget:{type:"Node",label:"Direction Target"}},update:function(e,t,r){var n=r.node;(0,i.default)(t,e),e.useText||(t.text=n.name)}};t.default={Annotation:a}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),a=n(i),o=r(4),s=n(o),u={"-1":"[ Custom ]",35:"35mm",70:"IMAX"},l={values:[0,1],labels:["Field of View","Focal Length"]},c={schema:{targeted:{label:"Enable Look Target",type:"Boolean",defaultValue:!1},focalDepthEnabled:{label:"Use Focal Depth",type:"Boolean",defaultValue:!1},focalDepth:{label:"Focal Depth",type:"Number",defaultValue:100,minValue:.001,animatable:!0,hidden:!0},axisDirection:{type:"Object",hidden:!0},zoomAxis:{type:"Object",hidden:!0},projection:{label:"Projection",type:"Options",defaultValue:"Perspective",values:["Perspective","Orthographic"]},viewCtrl:{type:"Options",defaultValue:0,values:l.values,labels:l.labels,label:"View Control"},fieldOfView:{label:"Field of View",type:"Number",defaultValue:45,minValue:5,maxValue:179,animatable:!0},orthoHeight:{label:"Orthographic Height",type:"Number",defaultValue:1,minValue:0,maxValue:1e4,step:.1,animatable:!0},focalLength:{label:"Focal Length (mm)",type:"Number",defaultValue:40,minValue:1,maxValue:400,step:1,animatable:!0},filmSizeBox:{type:"Options",defaultValue:"35",values:(0,s.default)(u),labels:u,label:"Film Size"},customFilmSize:{label:"Custom Film Size (mm)",type:"Number",defaultValue:35,step:.1,minValue:1,maxValue:1e3},fStop:{label:"F-Stop",type:"Number",defaultValue:2.8,minValue:.7,maxValue:32,step:.1},filmOffset:{label:"Film Offset (mm)",type:"Vec2",defaultValue:{x:0,y:0},minValue:-1e3,step:1,maxValue:1e3},aspectRatio:{label:"Aspect Ratio",type:"Number",defaultValue:16/9,step:.01,minValue:.01,maxValue:10},nearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.1,minValue:.01},farClip:{label:"Far Clip",type:"Number",defaultValue:5e4,step:1,minValue:1e-5,maxValue:1e6},orthoZoom:{label:"Ortho Zoom",type:"Number",defaultValue:1,minValue:.01,step:.1},targetDistance:{label:"Distance to Target",type:"Number",defaultValue:5,minValue:.01},target:{label:"Virtual Target",type:"Vec3",defaultValue:{x:0,y:0,z:0},hidden:!0},showFrustum:{label:"Show Frustum",type:"Boolean",defaultValue:!1},frustumColor:{label:"Frustum Color",type:"Color",defaultValue:{r:1,g:.78,b:0},animatable:!0},showClipping:{label:"Show Clipping",type:"Boolean",defaultValue:!1},showTarget:{label:"Show Virtual Target",type:"Boolean",defaultValue:!1}},update:function(e,t,r){var n=r.previousResult;(0,a.default)(t,e);var i=["pivotMatrix","upPosition","radiusConstraint","newRadiusConstraint","offset","newAngleAttrs"];if(n)for(var o=0;o<i.length;o++)n[i[o]]&&(t[i[o]]=n[i[o]]);var s=e.filmSizeBox;t.filmSize=-1===s?e.customFilmSize:parseFloat(s)}};t.default={Camera:c}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={values:[0,1,2,3,4],labels:["Default","Color","Image","CubeMap","EnvironmentMap"]},i={schema:{ambientLight:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0}},environmentMap:{label:"Environment Map",type:"Plug",plug:"Material"},backgroundStyle:{label:"Style",type:"Options",defaultValue:0,values:n.values,labels:n.labels},backgroundColor:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0}},backgroundOpacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1},background:{label:"Image",type:"Plug",plug:"Image"},cubeMapBlurring:{label:"CubeMap Blur",type:"Number",defaultValue:0,minValue:0,maxValue:10,step:.5,animatable:!0},cubeMap:{label:"CubeMap",type:"Plug",plug:"Material"}}};t.default={Environment:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33),i={schema:{fontAsset:{type:"File",hidden:!0}},update:function(e,t,r){var i=r.store;return t.getFont=function(){return i.hasApi()&&i.dispatch((0,n.getOrFetchFont)(e.fontAsset))},t}};t.default={Font:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={values:[0,1,2,3,4,5,6,7],labels:["[ Custom ]","HD 720","HD 1080","640x480","Full 1024","1k Square","2k Square","Retina"]},i={schema:{res:{label:"Resolution",type:"Options",defaultValue:"1",values:n.values,labels:n.labels},res_w:{label:"Custom Width",type:"Number",defaultValue:1280,minValue:100,isInteger:!0},res_h:{label:"Custom Height",type:"Number",defaultValue:720,minValue:100,isInteger:!0},output_dir:{label:"Output directory",type:"Text"},curPass:{label:"Current Pass",type:"Node"},frm_start:{label:"Start Frame",type:"Number",defaultValue:1},frm_last:{label:"Last Frame",type:"Number",defaultValue:24},frm_by:{label:"By Frame",type:"Number",defaultValue:1},ren_start:{label:"Start number",type:"Number",defaultValue:1,isInteger:!0},ren_by:{label:"By Frame",type:"Number",defaultValue:1,isInteger:!0},frm_pad:{label:"Frame padding",type:"Number",defaultValue:1,minValue:0,maxValue:10,isInteger:!0}}};t.default={GeneralRenderer:i}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),a=n(i),o=r(0),s=r(33),u=r(689),l=n(u),c=r(56),f=r(243),d=/\.svg/i,h={Original:0,WebGL:1,Renderer:3},p={values:[0,1,2],labels:["Original","WebGL","Renderer"]},g={values:[0,1,2],labels:["None","Wrap","Mirror"]},m={values:[o.NearestFilter,o.NearestMipMapNearestFilter,o.NearestMipMapLinearFilter,o.LinearFilter,o.LinearMipMapNearestFilter,o.LinearMipMapLinearFilter],labels:["Nearest","Nearest MipMap Nearest","Nearest MipMap Linear","Linear","Linear MipMap Nearest","Linear MipMap Linear"]},v={values:[3e3,3001,3002,3003,3004,3005],labels:["Linear","sRGB","RGBE/Radiance","Log LUV","RGBM 7","RGBM 16"]},y=function(e){var t=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor"];return c.isIE&&t.indexOf(e)<0?"source-over":e},M={schema:{originalBitmapFile:{type:"Image",hidden:!0},glBitmapFile:{type:"Image",hidden:!0},rendererBitmapFile:{type:"Image",hidden:!0},hdrBitmapFile:{type:"Image",hidden:!0},renderOption:{label:"Server Image",type:"Options",defaultValue:0,values:p.values,labels:p.labels},glOption:{label:"WebGL Image",type:"Options",defaultValue:1,values:p.values,labels:p.labels},uOffset:{type:"Number",label:"U Offset",defaultValue:0,step:.1,animatable:!0},vOffset:{type:"Number",label:"V Offset",defaultValue:0,step:.1,animatable:!0},uTile:{type:"Number",label:"U Tile",defaultValue:1,step:.1,animatable:!0},vTile:{type:"Number",label:"V Tile",defaultValue:1,step:.1,animatable:!0},rotation:{type:"Number",label:"Rotation",defaultValue:0,step:.1,animatable:!0},wrapU:{type:"Options",defaultValue:1,values:g.values,labels:g.labels,label:"U Wrap Style"},wrapV:{type:"Options",defaultValue:1,values:g.values,labels:g.labels,label:"V Wrap Style"},invert:{type:"Boolean",label:"Invert",defaultValue:!1,animatable:!0},gainPivot:{type:"Number",label:"Gain Pivot",defaultValue:0,step:.1,animatable:!0},gain:{type:"Number",label:"Gain",defaultValue:1,step:.1,animatable:!0},brightness:{type:"Number",label:"Brightness",defaultValue:0,step:.1,animatable:!0},magFilter:{type:"Options",defaultValue:o.LinearFilter,values:m.values,labels:m.labels,label:"Magnify Filter"},minFilter:{type:"Options",defaultValue:o.LinearMipMapLinearFilter,values:m.values,labels:m.labels,label:"Minify Filter"},generateMipMaps:{label:"Use MipMaps",type:"Boolean",defaultValue:!0},hdrEncoding:{type:"Options",defaultValue:3005,values:v.values,labels:v.labels,label:"HDR Encoding"},optimizeImage:{label:"Optimize Image",type:"Boolean",defaultValue:!1},resizeImage:{label:"Resize Image",type:"Boolean",defaultValue:!1},resizeWidth:{label:"Width",type:"Options",defaultValue:512,values:[32,64,128,256,512,1024,2048,4096],labels:["32","64","128","256","512","1024","2048","4096"]},resizeHeight:{label:"Height",type:"Options",defaultValue:512,values:[32,64,128,256,512,1024,2048,4096],labels:["32","64","128","256","512","1024","2048","4096"]},optimizeFormat:{label:"Format",type:"Options",defaultValue:"",values:["","png","jpeg"],labels:["Default","PNG","JPEG"]}},update:function(e,t,r){var n=(r.node,r.store),i=null,a=(0,s.getUrl)(n,e.originalBitmapFile),o=a&&l.default.extname(a),u=e.glOption;return i=u===h.WebGL||d.exec(o)&&c.isIE?e.glBitmapFile||e.originalBitmapFile:u==h.Original?e.originalBitmapFile:e.rendererBitmapFile||e.originalBitmapFile,t.asset=i,t.originalAsset=e.originalBitmapFile,t.extension=o,t.hdr=e.hdrBitmapFile,e.hdrBitmapFile&&".hdr"===o&&(t.hdrSource=e.originalBitmapFile),["uOffset","vOffset","uTile","vTile","rotation","wrapU","wrapV","gain","gainPivot","brightness","magFilter","minFilter","generateMipMaps","hdrEncoding","invert","optimizeImage","resizeImage","resizeWidth","resizeHeight","optimizeFormat"].forEach(function(r){t[r]=e[r]}),t.preferHDR=3e3!==e.hdrEncoding&&!!e.hdrBitmapFile,t}},w={schema:{width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},uOffset:{type:"Number",label:"U Offset",defaultValue:0,step:.1,animatable:!0},vOffset:{type:"Number",label:"V Offset",defaultValue:0,step:.1,animatable:!0},uTile:{type:"Number",label:"U Tile",defaultValue:1,step:.1,animatable:!0},vTile:{type:"Number",label:"V Tile",defaultValue:1,step:.1,animatable:!0},rotation:{type:"Number",label:"Rotation",defaultValue:0,step:.1,animatable:!0},wrapU:{type:"Options",defaultValue:1,values:g.values,labels:g.labels,label:"U Wrap Style"},wrapV:{type:"Options",defaultValue:1,values:g.values,labels:g.labels,label:"V Wrap Style"},invert:{type:"Boolean",label:"Invert",defaultValue:!1,animatable:!0},gainPivot:{type:"Number",label:"Gain Pivot",defaultValue:0,step:.1,animatable:!0},gain:{type:"Number",label:"Gain",defaultValue:1,step:.1,animatable:!0},brightness:{type:"Number",label:"Brightness",defaultValue:0,step:.1,animatable:!0},magFilter:{type:"Options",defaultValue:o.LinearFilter,values:m.values,labels:m.labels,label:"Magnify Filter"},minFilter:{type:"Options",defaultValue:o.LinearMipMapLinearFilter,values:m.values,labels:m.labels,label:"Minify Filter"},generateMipMaps:{label:"Use MipMaps",type:"Boolean",defaultValue:!0},hdrEncoding:{type:"Options",defaultValue:o.RGBM16Encoding,values:v.values,labels:v.labels,label:"HDR Encoding"},externalId:{type:"String",defaultValue:"",label:"External ID"}},update:function(e,t,r){var n=(r.node,r.store),i=e.width,a=e.height,o=e.externalId,s=e.color;s&&(s="rgba("+parseInt(255*s.r)+","+parseInt(255*s.g)+","+parseInt(255*s.b)+","+e.opacity+")"),["uOffset","vOffset","uTile","vTile","rotation","wrapU","wrapV","gain","gainPivot","brightness","magFilter","minFilter","generateMipMaps","hdrEncoding","invert","width","height"].forEach(function(r){t[r]=e[r]});var u=void 0;""!==o&&((u=document.getElementById(o))||(u=n.createCanvas(i,a),document.body.appendChild(u),u.id=o,u.style.display="none"));var l=function(e,t,r){return e.fillStyle=s,e.fillRect(0,0,i,a),u&&e.drawImage(u,0,0,i,a),!0};return t.canvasOperations?t.canvasOperations.push(l):t.canvasOperations=[l],t}},x={schema:{startIs:{label:"Start Is",type:"Options",values:["top","left","top-left","bottom-left"],initialValue:"top"},startColor:{label:"Start Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},startOpacity:{label:"Start Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},endColor:{label:"End Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},endOpacity:{label:"End Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},xOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"X",animatable:!0},yOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Y",animatable:!0},width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},composition:{label:"Mode",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"source-over"}},update:function(e,t){var r=e.xOffset,n=e.yOffset,i=e.width,a=e.height,o=e.startColor,s=e.endColor;o&&(o="rgba("+parseInt(255*o.r)+","+parseInt(255*o.g)+","+parseInt(255*o.b)+","+e.startOpacity+")"),s&&(s="rgba("+parseInt(255*s.r)+","+parseInt(255*s.g)+","+parseInt(255*s.b)+","+e.endOpacity+")");var u=function(t){var u=void 0;switch(e.startIs){case"top":u=t.createLinearGradient(r,n,r,n+a);break;case"left":u=t.createLinearGradient(r,n,r+i,n);break;case"top-left":u=t.createLinearGradient(r,n,r+i,n+a);break;default:u=t.createLinearGradient(r,n+a,r+i,n)}return u.addColorStop(0,o),u.addColorStop(1,s),t.fillStyle=u,t.globalCompositeOperation=y(e.composition),t.fillRect(r,n,i,a),!0};return t.canvasOperations?t.canvasOperations.push(u):t.canvasOperations=[u],t}},b={schema:{color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0,a:0},animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1,animatable:!0},xOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"X",animatable:!0},yOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Y",animatable:!0},width:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Width"},height:{type:"Number",defaultValue:512,minValue:16,maxValue:4096,step:1,label:"Height"},composition:{label:"Mode",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"source-over"}},update:function(e,t){var r=e.xOffset,n=e.yOffset,i=e.width,a=e.height,o=e.color;o&&(o="rgba("+parseInt(255*o.r)+","+parseInt(255*o.g)+","+parseInt(255*o.b)+","+e.opacity+")");var s=function(t){return t.fillStyle=o,t.globalCompositeOperation=y(e.composition),t.fillRect(r,n,i,a),!0};return t.canvasOperations?t.canvasOperations.push(s):t.canvasOperations=[s],t}},T=void 0,S={schema:{sourceImage:{type:"Plug",plug:"Image"},xOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"X Pixel",animatable:!0},yOffset:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Y Pixel",animatable:!0},windowed:{type:"Boolean",label:"Windowed",defaultValue:!1,animatable:!0},windowBorder:{type:"Boolean",label:"Window Border",defaultValue:!0,animatable:!0},windowWidth:{type:"Number",defaultValue:512,minValue:0,maxValue:4096,step:1,label:"Window Width",animatable:!0},windowHeight:{type:"Number",defaultValue:512,minValue:0,maxValue:4096,step:1,label:"Window Height",animatable:!0},windowRelativeWidth:{type:"Number",defaultValue:.5,minValue:0,maxValue:1,step:.01,label:"Relative Widnow Width",animatable:!0},windowRelativeHeight:{type:"Number",defaultValue:.5,minValue:0,maxValue:1,step:.01,label:"Relative Window Height",animatable:!0},windowFitMode:{type:"Options",values:["none","fit width","fit height","inside","full"],defaultValue:"none",label:"Window Fit Mode"},xRelativeOffset:{type:"Number",defaultValue:0,minValue:-10,maxValue:10,step:.01,label:"X Relative",animatable:!0},yRelativeOffset:{type:"Number",defaultValue:0,minValue:-10,maxValue:10,step:.01,label:"Y Relative",animatable:!0},offsetUnit:{label:"Unit",type:"Options",values:["pixel","relative"],initialValue:"absolute"},overrideSize:{type:"Boolean",label:"Override Default Size",defaultValue:!1,animatable:!0},overrideWidth:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Override Width",animatable:!0},overrideHeight:{type:"Number",defaultValue:0,minValue:-1e4,maxValue:1e4,step:1,label:"Override Height",animatable:!0},overrideWidthRelative:{type:"Number",defaultValue:1,minValue:-100,maxValue:100,step:.01,label:"Relative Width",animatable:!0},overrideHeightRelative:{type:"Number",defaultValue:1,minValue:-100,maxValue:100,step:.01,label:"Relative Height",animatable:!0},overrideSizeUnit:{label:"Unit",type:"Options",values:["pixel","relative"],initialValue:"absolute"},rotation:{type:"Number",defaultValue:0,minValue:-3600,maxValue:3600,step:1,label:"Rotation",animatable:!0},horizontalAlign:{type:"Options",defaultValue:"left",values:["left","center","right"],label:"Horizontal Align"},verticalAlign:{type:"Options",defaultValue:"top",values:["top","middle","bottom"],label:"Vertical Align"},composition:{label:"Composition",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"source-over"},tint:{label:"Enabled",type:"Boolean",defaultValue:!1,animatable:!0},tintColor:{label:"Tint Color",type:"Color",defaultValue:16777215,animatable:!0},tintOpacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.01,animatable:!0},tintComposition:{label:"Tint Mode",type:"Options",values:["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],initialValue:"multiply"}},update:function(e,t,r){var n=(r.node,r.store,e.sourceImage),i=e.xOffset,o=e.yOffset,s=e.xRelativeOffset,u=e.yRelativeOffset,l=e.offsetUnit,c=e.windowed,h=e.windowBorder,p=e.windowWidth,g=e.windowHeight,m=e.windowRelativeWidth,v=e.windowRelativeHeight,M=e.windowFitMode,w=e.overrideSize,x=e.overrideWidth,b=e.overrideHeight,S=e.overrideWidthRelative,_=e.overrideHeightRelative,E=e.overrideSizeUnit,A=y(e.composition),I=e.tint,D=e.tintColor,L=e.tintOpacity,N=e.tintComposition,C=e.rotation*Math.PI/180,O=e.horizontalAlign,R=e.verticalAlign,P=function(e,t,r){if(!n)return!0;var y=null;if(d.exec(n.extension)){var P=(0,a.default)(n,{asset:n.originalAsset});y=(0,f.fetchTextureImage)(t,P)}else y=(0,f.fetchTextureImage)(t,n);if(!y)return!0;w||(x=y.width,b=y.height),w&&"relative"===E&&(x=S*r.width,b=_*r.height),0==x&&(x=1),0==b&&(b=1),T&&(T.width=x,T.height=b);var z=T||t.createCanvas(x,b),j=z.getContext("2d");j.clearRect(0,0,z.width,z.height),T=z;if(I){var U="rgba("+parseInt(255*D.r)+","+parseInt(255*D.g)+","+parseInt(255*D.b)+","+L+")";j.fillStyle=U,j.globalCompositeOperation="source-over",j.fillRect(0,0,x,b),j.globalCompositeOperation="destination-in",j.drawImage(y,0,0,x,b),j.globalCompositeOperation=N}j.drawImage(y,0,0,x,b),e.globalCompositeOperation=A,"relative"===l&&(i=s*r.width,o=u*r.height,p=m*r.width,g=v*r.height),e.translate(i,o),e.rotate(C);var B=0,V=0,k=x,F=b,G=0,H=0,W=x,Y=b;switch(O){case"left":break;case"center":G=-x/2;break;default:G=-x}switch(R){case"top":break;case"middle":H=-b/2;break;default:H=-b}if(c&&h){var Q=0,q=0;switch(R){case"middle":Q=-g/2;break;case"bottom":Q=-g}switch(O){case"center":q=-p/2;break;case"right":q=-p}e.beginPath(),e.moveTo(q,Q),e.lineTo(q,Q+g),e.lineTo(q+p,Q+g),e.lineTo(q+p,Q),e.lineTo(q,Q),e.stroke()}if(c){var X=p*b/x/g;switch(W=p,Y=g,M){case"width":k=x,F=g*x/p;break;case"height":F=b,k=p*b/g;break;case"inside":X<1?(k=x,F=g*x/p):(F=b,k=p*b/g);break;case"full":X>1?(k=x,F=g*x/p):(F=b,k=p*b/g);break;default:k=p,F=g}var Z=x-k,K=b-F;switch(O){case"left":break;case"center":B=Z/2,G=-p/2;break;default:B=Z,G=-p}switch(R){case"top":break;case"middle":V=K/2,H=-g/2;break;default:V=K,H=-g}}return e.drawImage(z,B,V,k,F,G,H,W,Y),!0};return t.canvasOperations?t.canvasOperations.push(P):t.canvasOperations=[P],t}},_={schema:{fontName:{label:"Font Name",type:"Options",defaultValue:"serif",values:["serif","sans serif","monospace","custom"],labels:["Serif","Sans Serif","Monospace","Custom CSS Font"]},fontCSSSpecifier:{label:"CSS Font Specifer",type:"String",defaultValue:"Times New Roman, Times, serif"},text:{label:"Text",type:"String",defaultValue:"Times New Roman, Times, serif"},fontSize:{label:"Font Size",type:"Number",defaultValue:100,minValue:1,maxValue:1e4,step:1,animatable:!0},italic:{label:"Italic",type:"Boolean",defaultValue:!1,animatable:!0},bold:{label:"Bold",type:"Boolean",defaultValue:!1,animatable:!0},multiLine:{label:"Multi-Line",type:"Boolean",defaultValue:!1,animatable:!0},style:{label:"Drawing Style",type:"Options",defaultValue:"solid",values:["solid","outline"]},outlineWidth:{type:"Number",defaultValue:3,minValue:-10,maxValue:100,step:1,label:"Outline Width",animatable:!0},shadow:{label:"Shadow",type:"Boolean",defaultValue:!1,animatable:!0},shadowThickness:{label:"Shadow Thickness",type:"Number",defaultValue:5,minValue:0,maxValue:100,step:1,animatable:!0},shadowColor:{label:"Shadow Color",type:"Color",defaultValue:0,animatable:!0},shadowOffsetX:{label:"Shadow Offset X",type:"Number",defaultValue:0,minValue:-100,maxValue:100,step:1,animatable:!0},shadowOffsetY:{label:"Shadow Offset Y",type:"Number",defaultValue:0,minValue:-100,maxValue:100,step:1,animatable:!0},color:{label:"Color",type:"Color",defaultValue:{r:0,g:0,b:0},animatable:!0},opacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.01,animatable:!0},windowed:{label:"Windowed",type:"Boolean",defaultValue:!1,animatable:!0},windowBorder:{label:"Display Window Border",type:"Boolean",defaultValue:!0,animatable:!0},windowWidth:{label:"Window Width",type:"Number",defaultValue:256,minValue:0,maxValue:4096,step:1,animatable:!0},windowHeight:{label:"Window Height",type:"Number",defaultValue:256,minValue:0,maxValue:4096,step:1,animatable:!0},windowRelativeWidth:{label:"Relative Window Width",type:"Number",defaultValue:.5,minValue:0,maxValue:1,step:.01,animatable:!0},windowRelativeHeight:{label:"Relative Window Height",type:"Number",defaultValue:.5,minValue:0,maxValue:1,step:.01,animatable:!0},positionX:{type:"Number",defaultValue:256,minValue:-1e3,maxValue:1e4,step:1,label:"Position X",animatable:!0},positionY:{type:"Number",defaultValue:256,minValue:-1e3,maxValue:1e4,step:1,label:"Position Y",animatable:!0},positionXRelative:{type:"Number",defaultValue:.5,minValue:-10,maxValue:10,step:.01,label:"X Relative",animatable:!0},positionYRelative:{type:"Number",defaultValue:.5,minValue:-10,maxValue:10,step:.01,label:"Y Relative",animatable:!0},positionUnit:{label:"Unit",type:"Options",values:["pixel","relative"],initialValue:"absolute"},rotation:{type:"Number",defaultValue:0,minValue:-3600,maxValue:3600,step:1,label:"Rotation",animatable:!0},horizontalAlign:{type:"Options",defaultValue:"center",values:["left","center","right"],label:"Horizontal Align"},verticalAlign:{type:"Options",defaultValue:"middle",values:["top","middle","bottom"],label:"Vertical Align"}},update:function(e,t){var r=e.fontName;switch(r){case"serif":r="Times New Roman, Times, serif";break;case"sans serif":r="Arial, Helvetica, sans-serif";break;case"monospace":r="Courier New, Courier, monospace";break;case"custom":r=e.fontCSSSpecifier}var n=e.text,i=e.fontSize,a=e.italic,o=e.bold,s=e.multiLine,u=e.style,l=e.outlineWidth,c=e.opacity,f=e.positionX,d=e.positionY,h=e.positionXRelative,p=e.positionYRelative,g=e.positionUnit,m=e.horizontalAlign,v=e.verticalAlign,y=e.windowed,M=e.windowBorder,w=e.windowWidth,x=e.windowHeight,b=e.windowRelativeWidth,T=e.windowRelativeHeight,S=e.shadow,_=e.shadowThickness,E=e.shadowOffsetX,A=e.shadowOffsetY,I=e.color,D=e.shadowColor;I="rgba("+parseInt(255*I.r)+","+parseInt(255*I.g)+","+parseInt(255*I.b)+","+c+")",D="rgba("+parseInt(255*D.r)+","+parseInt(255*D.g)+","+parseInt(255*D.b)+","+c+")";var L=e.rotation*Math.PI/180,N=function(e,t,c){var N=f,C=d,O=w,R=x;"relative"===g&&(N=h*c.width,C=p*c.height,O=b*c.width,R=T*c.height),e.fillStyle=I;var P=a?"italic":"normal",z=o?700:400;e.font=P+" "+z+" "+i+"px "+r,e.textAlign=m,e.textBaseline=v,e.translate(N,C),e.rotate(L);var j=s?n.split(/<br>|\\n|\\r/i):n.split(),U=[];if(y)for(var B=!0,V=0;V<j.length&&B;V+=1)if(e.measureText(j[V]).width<=O)U.push(j[V]);else{for(var k="",F=j[V].split(" "),G=0;G<F.length&&B;G+=1){var H=k.length?k+" "+F[G]:F[G];if(e.measureText(H).width>O)if(k.length)U.push(k),k="",G-=1;else for(var W=0;W<H.length&&B;W+=1)e.measureText(k+H[W]).width>O?k.length?(U.push(k),k="",W-=1):(B=!1,U.length=0,console.warn("canvasText window width is less than single char, no text will display.")):k+=H[W];else k=H}k.length&&U.push(k)}else U=j;if(y&&M){var Y=0,Q=0;switch(v){case"middle":Y=-R/2;break;case"bottom":Y=-R}switch(m){case"center":Q=-O/2;break;case"right":Q=-O}e.beginPath(),e.moveTo(Q,Y),e.lineTo(Q,Y+R),e.lineTo(Q+O,Y+R),e.lineTo(Q+O,Y),e.lineTo(Q,Y),e.stroke()}var q=0,X=U.length*i;switch(v){case"middle":q=y&&X>=R?-(R-i)/2:-(U.length-1)/2*i;break;case"bottom":q=y&&X>=R?-(R-i):-(U.length-1)*i}S&&(e.shadowBlur=_,e.shadowColor=D,e.shadowOffsetX=E,e.shadowOffsetY=A);for(var Z=0;Z<U.length&&!(y&&(Z+1)*i>R);Z+=1)"outline"===u?(e.lineWidth=l,e.strokeStyle=I,e.strokeText(U[Z],0,q)):(e.fillStyle=I,e.fillText(U[Z],0,q)),q+=i;return!0};return t.canvasOperations?t.canvasOperations.push(N):t.canvasOperations=[N],t}};t.default={Image:M,Canvas:w,CanvasLinearGradient:x,CanvasFill:b,CanvasComposite:S,CanvasText:_}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{lightType:{label:"type",type:"String",defaultValue:"DirectionalLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},intensity:{label:"Intensity",type:"Number",defaultValue:.8},sourceAngle:{label:"Source Angle",type:"Number",defaultValue:0,step:.1,minValue:0,maxValue:20},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},autoShadow:{label:"Auto Shadow",type:"Boolean",default:!1},showShadowCamera:{label:"Show Frustum",type:"Boolean",defaultValue:!1},shadowBias:{label:"Bias",type:"Number",defaultValue:0},shadowSize:{label:"Map Size",type:"Number",defaultValue:512},shadowCameraSize:{label:"Camera Size",type:"Number",defaultValue:500},shadowNearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.1},shadowFarClip:{label:"Far Clip",type:"Number",defaultValue:1e3},shadowFrustumColor:{label:"Frustum Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}}},i={schema:{lightType:{label:"type",type:"String",defaultValue:"SpotLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},radius:{label:"Radius",type:"Number",defaultValue:0,minValue:0,step:.01},intensity:{label:"Intensity",type:"Number",defaultValue:.8},distance:{label:"Cutoff Distance",type:"Number",defaultValue:0},coneAngle:{label:"Cone Angle",type:"Number",defaultValue:60},coneFalloff:{label:"Cone Falloff",type:"Number",defaultValue:0},decayExponent:{label:"Decay Exponent",type:"Number",defaultValue:0},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},shadowBias:{label:"Bias",type:"Number",defaultValue:-0},shadowSize:{label:"Map Size",type:"Number",defaultValue:512},autoShadow:{label:"Auto Shadow",type:"Boolean",default:!1},shadowNearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.1},shadowFarClip:{label:"Far Clip",type:"Number",defaultValue:1e3},showShadowCamera:{label:"Show Frustum",type:"Boolean",defaultValue:!1},shadowFrustumColor:{label:"Frustum Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}}},a={schema:{lightType:{label:"type",type:"String",defaultValue:"PointLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},intensity:{label:"Intensity",type:"Number",defaultValue:.8},radius:{label:"Radius",type:"Number",defaultValue:0,minValue:0,step:.01},distance:{label:"Cutoff Distance",type:"Number",defaultValue:0},decayExponent:{label:"Decay Exponent",type:"Number",defaultValue:0},shadow:{label:"Enable",type:"Boolean",defaultValue:!1},shadowBias:{label:"Bias",type:"Number",defaultValue:0},shadowSize:{label:"Map Size",type:"Number",defaultValue:512},shadowNearClip:{label:"Near Clip",type:"Number",step:.01,defaultValue:.5},shadowFarClip:{label:"Far Clip",type:"Number",defaultValue:500}}},o={schema:{lightType:{label:"type",type:"String",defaultValue:"HemisphereLight"},color:{label:"Sky Color",type:"Color",defaultValue:{r:.2,g:.52,b:1}},gndColor:{label:"Sky Color",type:"Color",defaultValue:{r:1,g:.78,b:.5}},intensity:{label:"Intensity",type:"Number",defaultValue:.6}}},s={schema:{lightType:{label:"type",type:"String",defaultValue:"AreaLight"},color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},intensity:{label:"Intensity",type:"Number",defaultValue:10},width:{label:"Source Width",type:"Number",defaultValue:1},height:{label:"Source Height",type:"Number",defaultValue:1},shadow:{label:"Enable",type:"Boolean",defaultValue:!1}}};t.default={DirectionalLight:n,SpotLight:i,PointLight:a,HemisphereLight:o,AreaLight:s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{color:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}},update:function(e,t){return t.color=e.color}},i={environment:!0,schema:{baseMap:{label:"Image",type:"Plug",plug:"Image"},baseMapTransparent:{label:"Image Transparent",type:"Boolean",defaultValue:!1},baseColor:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}},baseFalloff:{label:"Falloff",type:"Boolean",defaultValue:!1},baseFalloffMap:{label:"Image",type:"Plug",plug:"Image"},baseFalloffColor:{label:"Falloff Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94},animatable:!0},opacityMap:{label:"Image",type:"Plug",plug:"Image"},opacityFactor:{label:"Factor",type:"Number",defaultValue:1,maxValue:1,minValue:0,step:.01,animatable:!0},opacityFalloffMap:{label:"Image",type:"Plug",plug:"Image"},opacityFalloffFactor:{label:"Falloff Factor",type:"Number",defaultValue:1,maxValue:1,minValue:0,step:.01,animatable:!0},depthWrite:{label:"Depth Write",type:"Boolean",defaultValue:!0},depthTest:{label:"Depth Test",type:"Boolean",defaultValue:!0},specularMap:{label:"Image",type:"Plug",plug:"Image"},specularColor:{label:"Color",type:"Color",defaultValue:{r:1,g:1,b:1},animatable:!0},roughness:{label:"Roughness",type:"Number",defaultValue:.25,minValue:0,maxValue:1,step:.01,animatable:!0},roughnessMap:{label:"Image",type:"Plug",plug:"Image"},metallic:{label:"Metallic",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.01,animatable:!0},metallicMap:{label:"Image",type:"Plug",plug:"Image"},clearCoat:{label:"Thickness",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.01,animatable:!0},clearCoatRoughness:{label:"Roughness",type:"Number",defaultValue:.25,minValue:0,maxValue:1,step:.01,animatable:!0},aoMap:{label:"Image",type:"Plug",plug:"Image"},aoMapIntensity:{label:"Factor",type:"Number",defaultValue:1,maxValue:1,minValue:0,step:.01,animatable:!0},lightMap:{label:"Image",type:"Plug",plug:"Image"},ambientColor2:{label:"Color",type:"Color",animatable:!0,defaultValue:{r:0,g:0,b:0}},emissiveMap:{label:"Image",type:"Plug",plug:"Image"},emissiveColor:{label:"Color",type:"Color",animatable:!0,defaultValue:{r:0,g:0,b:0}},emissiveScale:{label:"Scale",type:"Number",defaultValue:1,minValue:0,maxValue:100,step:.1,animatable:!0},emissiveLabel:{type:"Label",align:"right",defaultValue:"Emissive uses the second UV channel."},translucencyColor:{label:"Color",type:"Color",animatable:!0,defaultValue:{r:0,g:0,b:0}},translucencyMap:{label:"Image",type:"Plug",plug:"Image"},translucencyNormalAlpha:{label:"Normal Alpha",type:"Number",defaultValue:.75,minValue:0,maxValue:1,step:.05,animatable:!0},translucencyNormalPower:{label:"Normal Power",type:"Number",defaultValue:2,minValue:.01,maxValue:100,step:.05,animatable:!0},translucencyViewAlpha:{label:"View Alpha",type:"Number",defaultValue:.75,minValue:0,maxValue:1,step:.05,animatable:!0},translucencyViewPower:{label:"View Power",type:"Number",defaultValue:2,minValue:.01,maxValue:100,step:.05,animatable:!0},bumpMap:{label:"Image",type:"Plug",plug:"Image"},bumpScale:{label:"Scale Factor",type:"Number",defaultValue:1,minValue:-5,maxValue:5,step:.1,animatable:!0},normalMap:{label:"Image",type:"Plug",plug:"Image"},normalFactor:{label:"Scale Factor",type:"Number",defaultValue:1,minValue:-100,maxValue:100,step:.001,animatable:!0},normalRedFlip:{label:"Red Channel Flip",type:"Boolean",defaultValue:!1},normalGreenFlip:{label:"Green Channel Flip",type:"Boolean",defaultValue:!1},anisotropyLabel:{type:"Label",align:"right",defaultValue:"Anisotropy requires the Tangent operator."},anisotropyMap:{label:"Image",type:"Plug",plug:"Image"},anisotropy:{label:"Offset",type:"Number",defaultValue:0,minValue:-1,maxValue:1,step:.025,animatable:!0},anisotropyRotationMap:{label:"Image",type:"Plug",plug:"Image"},anisotropyRotation:{label:"Rotation Offset",type:"Number",defaultValue:0,minValue:-1,maxValue:1,step:.025,animatable:!0},overrideEnvironment:{label:"Override Environment",type:"Boolean",defaultValue:!1}}},a={schema:{defaultColor:{label:"Default Color",type:"Color",defaultValue:{r:1,g:1,b:1}},reference:{type:"Plug",plug:"Material",label:"Reference"}},update:function(e,t){t.color=e.defaultColor}},o={schema:{defaultColor:{label:"Default Color",type:"Color",defaultValue:{r:1,g:1,b:1}},reference:{type:"Plug",plug:"Material",label:"Reference"}},update:function(e,t){if(e.reference)return e.reference;t.defaultColor=e.defaultColor}},s={schema:{thumbnailImage:{label:"Thumbnail",type:"Plug",plug:"Image"},irradianceCubeMap:{label:"Irradiance",type:"Plug",plug:"Material"},specularCubeMap:{label:"Specular",type:"Plug",plug:"Material"},intensity:{label:"Intensity",type:"Number",defaultValue:1,minValue:.001,maxValue:100,step:.1,animatable:!0}}},u={schema:{map0:{label:"Map ( x)",type:"Plug",plug:"Image"},map1:{label:"Map (-x)",type:"Plug",plug:"Image"},map2:{label:"Map ( y)",type:"Plug",plug:"Image"},map3:{label:"Map (-y)",type:"Plug",plug:"Image"},map4:{label:"Map ( z)",type:"Plug",plug:"Image"},map5:{label:"Map (-z)",type:"Plug",plug:"Image"}},update:function(e,t,r){r.node;t.maps=[e.map0,e.map1,e.map2,e.map3,e.map4,e.map5]}},l={schema:{webgl:{type:"Plug",label:"WebGL Material",plug:"Material"},vray:{type:"Plug",label:"VRay Material",plug:"Material"}},update:function(e,t){return e.webgl||t}},c={schema:{diffuseColor:{label:"Color",type:"Color",defaultValue:{r:.94,g:.94,b:.94}}}},f={schema:{defaultColor:{label:"Default Color",type:"Color",defaultValue:{r:.5,g:.5,b:.5}},material0:{type:"Plug",plug:"Material",label:"Material ID 0"},material1:{type:"Plug",plug:"Material",label:"Material ID 1"},material2:{type:"Plug",plug:"Material",label:"Material ID 2"},material3:{type:"Plug",plug:"Material",label:"Material ID 3"},material4:{type:"Plug",plug:"Material",label:"Material ID 4"},material5:{type:"Plug",plug:"Material",label:"Material ID 5"},material6:{type:"Plug",plug:"Material",label:"Material ID 6"},material7:{type:"Plug",plug:"Material",label:"Material ID 7"},material8:{type:"Plug",plug:"Material",label:"Material ID 8"},material9:{type:"Plug",plug:"Material",label:"Material ID 9"},material10:{type:"Plug",plug:"Material",label:"Material ID 10"},material11:{type:"Plug",plug:"Material",label:"Material ID 11"},material12:{type:"Plug",plug:"Material",label:"Material ID 12"},material13:{type:"Plug",plug:"Material",label:"Material ID 13"},material14:{type:"Plug",plug:"Material",label:"Material ID 14"},material15:{type:"Plug",plug:"Material",label:"Material ID 15"},material16:{type:"Plug",plug:"Material",label:"Material ID 16"},material17:{type:"Plug",plug:"Material",label:"Material ID 17"},material18:{type:"Plug",plug:"Material",label:"Material ID 18"},material19:{type:"Plug",plug:"Material",label:"Material ID 19"},material20:{type:"Plug",plug:"Material",label:"Material ID 20"},material21:{type:"Plug",plug:"Material",label:"Material ID 21"},material22:{type:"Plug",plug:"Material",label:"Material ID 22"},material23:{type:"Plug",plug:"Material",label:"Material ID 23"},material24:{type:"Plug",plug:"Material",label:"Material ID 24"},material25:{type:"Plug",plug:"Material",label:"Material ID 25"},material26:{type:"Plug",plug:"Material",label:"Material ID 26"},material27:{type:"Plug",plug:"Material",label:"Material ID 27"},material28:{type:"Plug",plug:"Material",label:"Material ID 28"},material29:{type:"Plug",plug:"Material",label:"Material ID 29"},multiID:{type:"Boolean",label:"Is MultiID",defaultValue:!0}}},d={schema:{visMatZipFile:{type:"File",hidden:!0},viewColor:{type:"Color",defaultValue:{r:.94,g:.94,b:.94},label:"Viewport Color"}}},h={environment:!0,schema:{gemstone:{type:"Node",label:"Gemstone",plug:"PolyMesh"},ior:{type:"Number",label:"IOR",defaultValue:1.6,minValue:1,maxValue:10,step:.05},transmissive:{type:"Color",label:"Color",defaultValue:{r:1,g:1,b:1}},bounces:{type:"Number",label:"Ray Bources",defaultValue:4,minValue:3,maxValue:7,isInteger:!0},boostFactor:{type:"Number",label:"Boost Factor",defaultValue:1,minValue:.5,maxValue:3,step:.05},spectrumSpread:{type:"Number",label:"Spectrum Spread",defaultValue:0,minValue:0,maxValue:1,step:.05},squishFactor:{type:"Vec3",label:"Squish Factor",step:.01,minValue:.001,defaultValue:{x:1,y:1,z:1}},enableSparkles:{type:"Boolean",label:"Enabled",defaultValue:!1},sparkleCount:{type:"Number",label:"Count",defaultValue:5,minValue:3,maxValue:20,isInteger:!0}}};t.default={Material:n,Physical:i,MaterialReference:a,Reference:o,EnvironmentMap:s,CubeMap:u,Standard:c,ProxyReference:l,MultiID:f,"vray/VRmat":d,GemMaterial:h}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return"Camera"===e.get("type")},i=function(e){return"Renderer"===e.get("type")},a={schema:{activated:{label:"Activated",type:"Boolean",defaultValue:!0},filename:{label:"Filename",type:"Text",defaultValue:null},fileFormat:{label:"File Format",type:"Text",defaultValue:null},over_res:{label:"On",type:"Boolean",defaultValue:!1},over_res_x:{label:"Image Width",type:"Number",defaultValue:1280,isInteger:!0},over_res_y:{label:"Image Height",type:"Number",defaultValue:720,isInteger:!0},render_cam:{type:"Node",label:"Camera",filter:n},render_red:{type:"Node",label:"Renderer",filter:i}}};t.default={Pass:a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{autoRotate:{label:"Auto-Rotate Camera",type:"Boolean",defaultValue:!1},autoRotateNode:{label:"Rotate Node",type:"Node"},autoRotateSpeed:{label:"Rotate Speed (seconds)",type:"Number",minValue:1,maxValue:60,defaultValue:12},autoRotateDirection:{label:"Rotate Direction",type:"Options",values:["-","+"],labels:["Clockwise","Counter-clockwise"],defaultValue:"-"},camera:{label:"Camera",type:"Node"},constraintCameraY:{label:"Constrain Camera to Positive Y",type:"Boolean",defaultValue:!1},orbitTarget:{label:"Orbit Target",type:"Node"},orbitMode:{label:"Orbit Mode",type:"Options",values:["gyroscope","trackball","firstPerson"],labels:["Gyropscope","Trackball","First Person"],defaultValue:"gyroscope"},overrideNavigation:{label:"Override Camera Orbit Mode",type:"Boolean",defaultValue:!0},vrMode:{label:"VR Mode",type:"Options",values:["firstperson","orbit"],labels:["1st Person","Orbit"],defaultValue:"firstperson"},vrCamera:{label:"VR Camera",type:"Node"},toneMapStyle:{label:"Style",type:"Options",values:["Linear","Reinhard","Cineon","Filmic"],defaultValue:"Linear"},toneMapExposureGain:{label:"Exposure Gain",type:"Number",defaultValue:1,minValue:0,maxValue:20,step:.1},toneMapWhitePoint:{label:"White Point",type:"Number",defaultValue:4,minValue:0,maxValue:20,step:.1},dofPass:{label:"Enabled",type:"Boolean",defaultValue:!1},dofMaxBlur:{label:"Max Blur",type:"Number",defaultValue:10,minValue:0,maxValue:100,step:.1},saoPass:{label:"Enabled",type:"Boolean",defaultValue:!1},saoIntensity:{label:"Intensity",type:"Number",defaultValue:1,minValue:0,maxValue:1e3,step:.1},saoScale:{label:"Scale",type:"Number",defaultValue:24,minValue:0,maxValue:1e3,step:.1},bloomPass:{label:"Enabled",type:"Boolean",defaultValue:!1},bloomThreshold:{label:"Luminance Threshold",type:"Number",defaultValue:.9,minValue:0,maxValue:1,step:.1},sparkleTexture:{label:"Image",type:"Plug",plug:"Image"},sparkleSize:{label:"World Size",type:"Number",defaultValue:.05,minValue:0,maxValue:1,step:.001},reflectiveFloor:{label:"Enabled",type:"Boolean",defaultValue:!1},reflectiveFloorWidth:{label:"Width",type:"Number",defaultValue:1,minValue:0,maxValue:1e3,step:1},reflectiveFloorRoughness:{label:"Roughness",type:"Number",defaultValue:0,minValue:0,maxValue:10,step:.1},reflectiveFloorMetallic:{label:"Metallic",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1},reflectiveFloorFade:{label:"Fade",type:"Number",defaultValue:0,minValue:0,maxValue:1e4,step:.1},reflectiveFloorHeight:{label:"Height",type:"Number",defaultValue:0,minValue:-100,maxValue:100,step:.1},reflectiveFloorOpacity:{label:"Opacity",type:"Number",defaultValue:1,minValue:0,maxValue:1,step:.1},reflectiveFloorFresnel:{label:"Fresnel Strength",type:"Number",defaultValue:1,minValue:-1,maxValue:1,step:.1},reflectiveFloorExcludeServer:{label:"Exclude on Server",type:"Boolean",defaultValue:!1},configurator:{label:"Configurator",type:"String",hidden:!0,defaultValue:""},gravity:{label:"Gravity",type:"Vec3",step:1,defaultValue:[0,-9.8,0]},shadowType:{label:"Quality",type:"Options",values:[0,1,2,3],labels:["Basic","Medium","High","Ultra"],defaultValue:2},renderPassType:{label:"Style",type:"Options",values:[0,1],labels:["General","Order In Transparency"],defaultValue:0}}};t.default={Player:n}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=r(235),o=n(a),s=r(103),u=n(s),l={selfTransform:!0,schema:{count:{type:"Number",label:"Count",defaultValue:3,step:1,minValue:1},translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:[1,0,0]},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:[0,0,0]},scale:{label:"Scale",type:"Vec3",minValue:1e-4,step:.1,defaultValue:[1,1,1]},pivotType:{label:"Pivot",type:"Options",display:"Dropdown",labels:["None","Node"],values:["None","Node"],defaultValue:"None"},pivotPolyMesh:{label:"Pivot Mesh",type:"Node"}},update:function(e,t,r){var n=r.getWorldTransform,a=r.node,s=r.store;if(!t.mesh)return t;var l=e.count,c=e.translation,f=e.rotation,d=e.scale,h=e.pivotType,p=e.pivotPolyMesh,g=p&&s.get("sceneGraph").evaluatedNodes[p],m=f.clone().multiplyScalar(Math.PI/180),v=(new i.Euler).setFromVector3(m,"ZYX"),y=new i.Matrix4;if("Node"===h&&g){var M=n(g.PolyMesh.id),w=n(a.id);y.getInverse(M,!0).multiply(w)}c=new i.Vector3(c.x,c.y,c.z),f=(new i.Quaternion).setFromEuler(v),d=new i.Vector3(d.x,d.y,d.z);var x=(0,o.default)(t.mesh,l,c,f,d,y),b=x.meshArray,T=x.transforms;return t.mesh=(0,u.default)(b,T),t}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(158),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=a.default.AxisTypes,s={schema:{defaultAxis:{label:"Default Axis",type:"Options",display:"Radio",defaultValue:o.Z,labels:["X","Y","Z"],values:[o.X,o.Y,o.Z]},bendAngle:{label:"Angle",type:"Number",defaultValue:45,step:1,minValue:-360,maxValue:360,animatable:!0},rotation:{label:"Bend Rotation",type:"Vec3",defaultValue:new n.Vector3(0,0,0),animatable:!0},translation:{label:"Bend Pivot",type:"Vec3",defaultValue:new n.Vector3(0,0,0),animatable:!0},fixedEndsEnabled:{label:"Fixed Ends",type:"Boolean",defaultValue:!1,animatable:!1}},update:function(e,t){if(!t.mesh)return t;var r=e.defaultAxis,n=e.bendAngle,i=e.rotation,o=e.translation,s=e.fixedEndsEnabled;return i=i.clone().multiplyScalar(-1),o=o.clone().multiplyScalar(-1),t.mesh=(0,a.default)(t.mesh,r,n,i,o,s),t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(426),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={label:"Channel",type:"Text",name:"Channel"},o={label:"Weight",type:"Number",name:"Weight",minValue:-1,maxValue:10,step:.05,defaultValue:0},s={schema:function(e){for(var t={},r=0;r<e;++r)t["chan"+r]=a,t["beta"+r]=o;return t}(16),update:function(e,t){var r=t.mesh;if(!r)return t;for(var n=[],a=[],o=0;o<16;++o){var s=e["chan"+o],u=e["beta"+o];s&&u&&(n.push(s),a.push(u))}return r.blendShapes&&(t.mesh=(0,i.default)(r,n,a)),t}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(231),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{bsChannel:{label:"Channel",type:"Text",defaultValue:"shape0"},bsShape:{label:"Shape",type:"Plug",plug:"PolyMesh"}},update:function(e,t){var r=t.mesh;if(!r)return t;var n=e.bsChannel,a=e.bsShape.mesh;if(n.length&&a){var o=a.positions.values;if(r.positions.values.length===o.length){var s=r.normalMap.values,u=a.normalMap.values;s&&u&&s.length===u.length||(u=null);var l=r.blendShapes;l||(l=r.blendShapes={}),l[n]=new i.default(o,u,null)}else console.log("The Blend Shape cannot be assigned because the number of vertices does not match with the original shape")}return t}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(447),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{depth:{type:"Number",label:"Depth",defaultValue:1,step:.1,minValue:0,animatable:!0},width:{type:"Number",label:"Width",defaultValue:1,step:.1,minValue:0,animatable:!0},height:{type:"Number",label:"Height",defaultValue:1,step:.1,minValue:0,animatable:!0},depthSegments:{type:"Number",label:"Depth Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0,i18n:{en:{},xn:{label:"XXX"},hn:{label:"DX"}}},widthSegments:{type:"Number",label:"Width Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0},heightSegments:{type:"Number",label:"Height Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0}},update:function(e,t){var r=e.width,n=e.height,a=e.depth,o=e.widthSegments,s=e.heightSegments,u=e.depthSegments;t.mesh=(0,i.default)(r,n,a,o,s,u)}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(448),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{radius:{type:"Number",label:"Radius",defaultValue:.5,minValue:.1,step:.1},height:{type:"Number",label:"Height",defaultValue:1,minValue:.1,step:.1},radiusSegments:{label:"Radial Segments",type:"Integer",defaultValue:12,minValue:4,maxValue:100},heightSegments:{label:"Height Segments",type:"Integer",defaultValue:10,minValue:1,maxValue:100}},update:function(e,t){var r=e.radius,n=e.height,a=e.radiusSegments,o=e.heightSegments;t.mesh=(0,i.default)(r,n,a,o)}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(241),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{base:{type:"Number",label:"Base Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},height:{type:"Number",label:"Height",defaultValue:1,minValue:0,step:.1,animatable:!0},radiusSegments:{label:"Radial Segments",type:"Integer",defaultValue:12,minValue:3,maxValue:200,animatable:!0},heightSegments:{label:"Height Segments",type:"Integer",defaultValue:1,minValue:1,maxValue:200,animatable:!0},openEnded:{label:"Open Base",type:"Boolean",defaultValue:!1,animatable:!0}},update:function(e,t){var r=e.base,n=e.height,a=e.radiusSegments,o=e.heightSegments,s=e.openEnded;t.mesh=(0,i.default)(0,r,n,a,o,s)}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(450),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=8,o=Math.PI/180,s={schema:function(){for(var e={radius:{type:"Number",label:"Radius",minValue:0,step:.1},segments:{type:"Number",label:"Segments",defaultValue:50,minValue:1,isInteger:!0},phiStart:{type:"Number",label:"Phi Start",defaultValue:0,step:1,minValue:0,maxValue:360},phiLength:{type:"Number",label:"Phi Length",defaultValue:360,step:1,minValue:0,maxValue:360},interpolationType:{type:"Options",label:"Interpolation",display:"Radio",labels:["Linear","Smooth Step"],values:[0,1],defaultValue:1}},t=0;t<a;++t)e["crossSectionNode"+t]={type:"Plug",plug:"PolyMesh",label:"Cross Section "+(t+1)},e["locationAngle"+t]={type:"Number",label:"Angle"+(t+1),defaultValue:0,step:1,minValue:0,maxValue:360};return e}(),update:function(e,t){for(var r=e.radius,n=e.segments,s=e.phiStart,u=e.phiLength,l=e.interpolationType,c=[],f=void 0,d=void 0,h=0;h<a;++h)f=e["crossSectionNode"+h],d=e["locationAngle"+h],f&&f.mesh&&f.mesh.positions.values.length&&!isNaN(d)&&c.push({mesh:f.mesh,locationAngle:d*o});return c.length<1?t:(t.mesh=(0,i.default)(c,r,n,s*o,u*o,l),t)}};t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(241),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{radiusTop:{type:"Number",label:"Top Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},radiusBottom:{type:"Number",label:"Bottom Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},height:{type:"Number",label:"Height",defaultValue:1,minValue:0,step:.1,animatable:!0},radiusSegments:{label:"Radial Segments",type:"Integer",defaultValue:24,minValue:3,maxValue:200,animatable:!0},heightSegments:{label:"Height Segments",type:"Integer",defaultValue:1,minValue:1,maxValue:200,animatable:!0},openEnded:{label:"Open Ended",type:"Boolean",defaultValue:!1,animatable:!0}},update:function(e,t){var r=e.radiusTop,n=e.radiusBottom,a=e.height,o=e.radiusSegments,s=e.heightSegments,u=e.openEnded;t.mesh=(0,i.default)(r,n,a,o,s,u)}};t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(69),a=n(i),o=r(429),s=n(o),u=r(237),l=n(u),c={schema:{removeOrphans:{label:"Remove Unused Values",type:"Boolean",defaultValue:!0},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"},componentType:{type:"Object",hidden:!0,defaultValue:"Vertex"}},update:function(e,t){if(!t.mesh)return t;var r=e.componentType,n=(0,a.default)(e.indices);return t.mesh=(0,s.default)(t.mesh,n,r),e.removeOrphans&&(0,l.default)(t.mesh),t}};t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(452),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{radius:{type:"Number",label:"Radius",defaultValue:.5,minValue:0,step:.1,animatable:!0},segments:{type:"Integer",label:"Segments",defaultValue:12,minValue:3,maxValue:200,animatable:!0},thetaStart:{label:"Theta Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},thetaLength:{label:"Theta Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0},removeDuplicate:{label:"Remove Duplicate Vertices",type:"Boolean",defaultValue:!1,hidden:!0}},update:function(e,t){var r=e.radius,n=e.segments,a=e.thetaStart,o=e.thetaLength;t.mesh=(0,i.default)(r,n,a,o)}};t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExtrudeTypes=void 0;var i=r(69),a=n(i),o=r(435),s=n(o),u=r(70),l=n(u),c=t.ExtrudeTypes={individualPolygon:1,averageNormal:2,localNormal:3},f={name:"Extrude",schema:{extrudeLength:{label:"Length",type:"Number",step:.01,defaultValue:.2,animatable:!0},extrudeType:{label:"Extrude Type",type:"Options",display:"Dropdown",labels:["Group - Average Normal","Group - Local Normals","Individual Polygons"],values:[c.averageNormal,c.localNormal,c.individualPolygon],defaultValue:2},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"},insetOffset:{label:"Offset",type:"Number",step:.01,defaultValue:0},segments:{label:"Segments",type:"Number",step:1,defaultValue:1,minValue:1}},update:function(e,t){var r=t.mesh;if(!r)return t;var n=e.extrudeLength,i=e.extrudeType,o=e.indices,u=e.insetOffset,c=e.segments;if(!o)return t;var f=new l.default((0,a.default)(o),l.default.Faces);return t.mesh=(0,s.default)(r,i,f,n,u,c),t}};t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{geometry:{label:"Mesh",plug:"PolyMesh",type:"Plug"}},update:function(e,t){t.mesh=e.geometry&&e.geometry.mesh}};t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=(0,o.default)(e).find(function(t){return e[t].unicode===r});return e[n]&&e[n].advanceWidth?e[n].advanceWidth/t:1}Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),o=n(a),s=r(210),u=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(s),r(0)),l=r(233),c=r(5),f=n(c),d=r(103),h=(n(d),{selfProperties:!0,schema:{text:{label:"Text",type:"String",defaultValue:"Text"},curveSegments:{type:"Number",defaultValue:4,minValue:2},font:{label:"Font",type:"Plug",plug:"Font"},fontSize:{label:"Font Size",type:"Number",defaultValue:72,minValue:1,step:1},compact:{label:"On",type:"Boolean",defaultValue:!1},padding:{label:"Offset",type:"Number",defaultValue:0},bendAngle:{label:"Angle",type:"Number",defaultValue:0,minValue:0,maxValue:90},bevel:{label:"On",type:"Boolean",defaultValue:!1},bevelSegments:{label:"Segments",type:"Integer",defaultValue:1,minValue:1},bevelOffset:{label:"Offset",type:"Number",defaultValue:0,minValue:0},bevelThreshold:{label:"Threshold ratio",type:"Number",defaultValue:2,minValue:1},bevelLength:{label:"Length",type:"Number",defaultValue:0,minValue:0},bevelStyle:{label:"Style",type:"Options",display:"Dropdown",labels:["Round","Extended"],values:[l.ShapeSetBevelStyles.Round,l.ShapeSetBevelStyles.Extended],defaultValue:l.ShapeSetBevelStyles.Round},smoothingAngle:{type:"Number",defaultValue:30,minValue:-180,maxValue:180},addRings:{label:"Add",type:"Boolean",defaultValue:!1},ringPosition:{label:"Position",type:"Number",minValue:-1,maxValue:1,defaultValue:1},ringOuterRadius:{label:"Outer Radius",type:"Number",minValue:.1,defaultValue:10},ringInnerRadius:{label:"Inner Radius",type:"Number",minValue:.1,defaultValue:9}},update:function(e,t,r){var n=(r.store,r.properties),a=r.loaded,s=r.forceFetchAssets,c=n.visible||n.prefetch&&a||s,d=c&&e.font&&e.font.getFont();if(d&&0!==(0,o.default)(d).length){for(var h=e.curveSegments,p=e.fontSize,g=e.addRings,m=e.compact?e.padding:void 0,v=void 0===m?e.text.trim():e.text.replace(/\s+/g,""),y=d.unitsPerEm,M=d.glyphs.glyphs,w=p/72,x=0,b=[],T=[],S=0,_=0,E=null,A={thisEdges:null},I=0;I<v.length;++I){var D=!g||0!=I&&I+1!=v.length?void 0:{xPosition:0==I?-1:1,yPosition:e.ringPosition,outerRadius:e.ringOuterRadius,innerRadius:e.ringInnerRadius};if(" "===v.charAt(I))++x,S+=i(M,y," ".charCodeAt(0))*w;else{var L=d.getPath(v.charAt(I),0,p,p),N=l.ShapeSet.fromPath(L,h,p,m,D),C=v.charCodeAt(I);if(void 0!==m){var O=0;E&&(O=E.getHorizontalDistance(N,_,m,A)),_=i(M,y,C)*w,S+=O,T.push(new u.Vector3(S,0,0))}else{var R=i(M,y,C)*w;T.push(new u.Vector3(S,0,0)),S+=R}E=N,b.push(N)}}if(b.length){var P=1===b.length?b[0]:l.ShapeSet.mergeShapeSets(b,T);return 0!==e.bendAngle&&P.bend(e.bendAngle),e.bevel&&e.bevelLength&&P.bevelShapeSet(e.bevelOffset,e.bevelLength,e.bevelSegments,e.bevelStyle,e.bevelThreshold,e.smoothingAngle),t.mesh=f.default.fromShapeSet(P),t}}}});t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),a=n(i),o=r(69),s=n(o),u={schema:{materialID:{label:"Material ID",type:"Integer",step:1,minValue:0,defaultValue:0},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"},deleteAll:{label:"Delete All",type:"Boolean",defaultValue:!1}},update:function(e,t){if(!t.mesh)return t;var r=e.materialID,n=e.indices,i=e.deleteAll,o=t.mesh,u=void 0;if(i)o.materialIds=null;else{var l=o.faceRangeOffsets,c=(0,s.default)(n);if(c.length<1)return t;u=o.materialIds?new Uint32Array(o.materialIds):new Uint32Array(l.length-1);for(var f=0;f<c.length;++f)u[c[f]]=r}return t.mesh=new a.default(o,{materialIds:u}),t}};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(162),i=r(33),a=r(50),o={selfProperties:!0,schema:{geometry:{type:"File",label:"PolyMesh Geometry File"}},update:function(e,t,r){var o=(r.node,r.store),s=r.properties,u=r.previousResult,l=r.loaded,c=r.forceFetchAssets,f=s.visible,d=e.geometry,h=f||s.prefetch&&l||c,p=h&&d,g=p&&o.hasApi()&&o.dispatch((0,i.getOrFetchBinary)(p)),m=g&&(0,n.convertToCNSPolyMesh)(g,p);return m&&!m.normalMap&&(m=(0,a.flatNormalMap)(m)),t.mesh=m,t.previousMesh=u&&u.mesh,t}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(444),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{subdivisions:{label:"Subdivisions",type:"Number",defaultValue:1,minValue:0,maxValue:4},smoothByMaterialIds:{label:"Smooth by Material Ids",type:"Boolean",defaultValue:!0}},update:function(e,t){var r=t.mesh,n=void 0!==e.subdivisions?e.subdivisions:1;if(!r)return t;for(var a=0;a<n;a++)r=(0,i.default)(r,e.smoothByMaterialIds);return t.mesh=r,t}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(453),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{width:{label:"Width",type:"Number",defaultValue:4,minValue:0,step:.1,animatable:!0},height:{label:"Height",type:"Number",defaultValue:4,minValue:0,step:.1,animatable:!0},widthSegments:{type:"Number",label:"Width Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0},heightSegments:{type:"Number",label:"Height Segments",defaultValue:1,minValue:1,isInteger:!0,animatable:!0}},update:function(e,t){var r=e.width,n=e.height,a=e.widthSegments,o=e.heightSegments;t.mesh=(0,i.default)(r,n,a,o)}};t.default=a},function(e,t,r){"use strict";function n(e,t){var r=null;return 1===t||1===e?r="binary":(t=Math.ceil(t*e),r=t>=e?"binary":t<=0?"level0":"level"+(t-1)),r}Object.defineProperty(t,"__esModule",{value:!0});var i=r(162),a=r(33),o=r(50),s={selfProperties:!0,schema:{binary:{type:"Binary",label:"Binary Geometry File"},reducedBinary:{type:"Binary",label:"Reduced Binary Geometry File"},operatorDisplay:{type:"Number",defaultValue:1,label:"Operator Display Type"},nbLevel:{type:"Number",defaultValue:1},level0:{type:"Binary",label:"Binary Geometry File"},level1:{type:"Binary",label:"Binary Geometry File"},level2:{type:"Binary",label:"Binary Geometry File"},level3:{type:"Binary",label:"Binary Geometry File"},level4:{type:"Binary",label:"Binary Geometry File"},clientLevel:{type:"Number",defaultValue:.5,minValue:0,maxValue:1,label:"Reduction Level"}},update:function(e,t,r){var s=r.store,u=r.properties,l=r.previousResult,c=r.loaded,f=r.forceFetchAssets,d=u.visible,h=e.nbLevel,p=e.clientLevel,g=n(h,p),m=e[g],v=d||u.prefetch&&c||f,y=v&&m&&s.hasApi()&&(0,a.getOrFetchBinary)(m)(s),M=y&&(0,i.convertToCNSPolyMesh)(y,m);M&&!M.normalMap&&(M=(0,o.flatNormalMap)(M)),t.mesh=M,t.previousMesh=l&&l.mesh}};t.default=s},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(454),a=n(i),o=r(5),s=n(o),u={schema:{phiStart:{type:"Number",label:"Phi Start",defaultValue:0,step:1,minValue:0,maxValue:360},phiLength:{type:"Number",label:"Phi End",defaultValue:360,step:1,minValue:0,maxValue:360},segments:{type:"Number",label:"Segments",defaultValue:50,minValue:1,isInteger:!0},otherPolyMesh:{type:"Node",plug:"PolyMesh",label:"Other PolyMesh"}},update:function(e,t,r){var n=r.getWorldTransform,i=r.node,o=(r.store,e.phiStart),u=e.phiLength,l=e.segments,c=e.otherPolyMesh,f=e.otherPolyMeshEvaluated,d=f&&f.PolyMesh&&f.PolyMesh.mesh;if(!d)return t.mesh=new s.default,t;var h=n(i.id),p=n(c);return t.mesh=(0,a.default)(d,l,o,u,h,p),t}};t.default=u},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(455),a=n(i),o=r(5),s=n(o),u=a.default.AxisTypes,l={schema:{referenceNode:{type:"Plug",plug:"PolyMesh",label:"Reference Node"},axis:{type:"Options",label:"Axis",display:"Radio",labels:["X","Y","Z"],values:[u.X,u.Y,u.Z],defaultValue:u.Y},repeats:{type:"Number",label:"Repeats",defaultValue:4,minValue:1,isInteger:!0},radius:{type:"Number",label:"Radius",defaultValue:1,step:.1,minValue:0,animatable:!0},revolutionAngle:{type:"Number",label:"Degrees",defaultValue:360,minValue:0,maxValue:360,step:1,animatable:!0},spacingAngle:{type:"Number",label:"Spacing Angle",defaultValue:0,maxValue:360,step:1,animatable:!0}},update:function(e,t){var r=e.referenceNode,n=e.axis,i=e.repeats,o=e.radius,u=e.revolutionAngle,l=e.spacingAngle;return r&&r.mesh?(t.mesh=(0,a.default)(r.mesh,n,i,o,u,l),t):(t.mesh=new s.default,t)}};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(441),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=r(0),o={schema:{center:{label:"Local Center",type:"Vec3",defaultValue:new a.Vector3(0,0,0),step:.01,animatable:!0},rotation:{label:"Local Rotation",type:"Vec3",defaultValue:new a.Vector3(0,0,0),step:1,animatable:!0},shearFactor:{label:"Shear Factor",type:"Number",step:"0.1",defaultValue:"0",animatable:!0},vertexIndices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(e,t){if(!t.mesh)return t;var r=e.center,n=e.rotation,a=e.shearFactor,o=e.vertexIndices;return t.mesh=(0,i.default)(t.mesh,r,n,a,o),t}};t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n){if(!e||!e.skinning)return e;var i=e.skinning,a=i.applyTransforms(e.positions.values,t,r,n),s=new u.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:e.positions.faceValueIndices,values:a}),l=(0,o.default)({},e,{positions:s});return new c.default(l)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a),s=r(6),u=n(s),l=r(5),c=n(l),f={selfTransform:!0,schema:{boneNodeList:{type:"NodeList",label:"Select Bones",plug:"Bone"},optionalRootBone:{type:"Node",label:"Optional Root Bone",defaultValue:null,filter:function(e){return e.isBone()}}},update:function(e,t,r){var n=r.node,a=r.getWorldTransform,o=a(n.id),s=e.boneNodeList,u=e.optionalRootBone,l=-1;if(0===s.length)return t;var c=s.map(function(e){return a(e)});if(u)for(var f=0,d=s.length;f<d;f++){var h=s[f];if(h==u){l=f;break}}var p=t.mesh;t.mesh=i(p,o,c,l)}};t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(49),a=n(i),o=r(15),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),u=r(238),l=n(u),c=r(70),f=n(c),d=r(236),h=n(d),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(","),r=[],n=void 0,i=void 0,o=void 0,s=void 0,u=void 0;for(n=0;n<t.length;n++)if(u=t[n],-1!==u.indexOf("-")){var l=u.split("-"),c=(0,a.default)(l,2);for(o=c[0],s=c[1],o=Number(o),s=Number(s),i=o;i<=s;i++)r.push(i)}else r.push(Number(u));return r},g=new s.Vector3(0,0,-1),m={name:"Slice",label:"Slice / Cut",type:"Edit",schema:{center:{label:"Local Center",type:"Vec3",defaultValue:new s.Vector3(0,0,0),step:.01,animatable:!0},rotation:{label:"Local Rotation",type:"Vec3",defaultValue:new s.Vector3(0,0,0),step:1,animatable:!0},_rotationAxis:{label:"Rotation",type:"Vec3",defaultValue:new s.Vector3(0,0,0),step:1,hidden:!0},axis:{label:"Axis",type:"Options",display:"Dropdown",labels:["X","Y","Z"],values:[1,2,3],defaultValue:1},flip:{label:"Flip",type:"Boolean",defaultValue:!1},cut:{label:"Cut",type:"Boolean",defaultValue:!1},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(e,t,r){var n=r.node,i=t.mesh;if(!i)return t;var a=e.center,o=e.rotation,s=e.axis,u=e.flip,c=e.cut,d=e.indices,m=d?p(d):null,v=d?new f.default(m,f.default.Faces):null,y=n.plugs.Transform[0].rotateOrder,M=(0,h.default)(o,y,s,a,g);return t.mesh=(0,l.default)(i,M,c,u,v),t}};t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(442),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{axis:{label:"Direction",type:"Vec3",step:.1,defaultValue:{x:1,y:1,z:0},animatable:!0}},update:function(e,t,r){var n=(r.store,e.axis.normalize()),a=t.mesh;t.mesh=(0,i.default)(a,n)}};t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return e.materialIds.reduce(function(r,n,i){var a=e.faceRangeOffsets[i],o=e.faceRangeOffsets[i+1];if(e.materialIds[i]!==t)return r;for(var s=a;s<o;s++){var u=e.positions.faceValueIndices[s];-1===r.indexOf(u)&&r.push(u)}return r},[])}Object.defineProperty(t,"__esModule",{value:!0});var a=r(431),o=n(a),s=r(239),u=n(s),l=r(70),c=n(l),f={schema:{overlap:{type:"Number",defaultValue:0,step:.01}},update:function(e,t){if(!t.mesh)return t;for(var r=t.mesh,n=e.overlap,a=i(r,0),s=0,l=[a],f=r,d=void 0,h={x:-1/0,y:-1/0,z:-1/0};a.length;){d=(0,o.default)(f,s,a,!1);var p=d.max(h);if(p.lengthSq()<1/0){var g=1+n/p.length();f=(0,u.default)(f,p.multiplyScalar(g),new c.default(a,c.default.Vertices))}h=(0,o.default)(f,s,a,!0).multiplyScalar(-1),s++,a=i(f,s),l.push(a)}return t.mesh=f,t}};t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(456),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{radius:{label:"Radius",type:"Number",defaultValue:.5,minValue:0,step:.1,animatable:!0},widthSegments:{label:"Longitudinal Segments",type:"Integer",defaultValue:24,minValue:3,maxValue:200,step:1,animatable:!0},heightSegments:{label:"Latitudinal Segments",type:"Integer",defaultValue:24,minValue:3,maxValue:200,step:1,animatable:!0},phiStart:{label:"Phi Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},phiLength:{label:"Phi Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0},thetaStart:{label:"Theta Start",type:"Number",defaultValue:0,minValue:0,maxValue:180,step:10,animatable:!0},thetaLength:{label:"Theta Length",type:"Number",defaultValue:180,minValue:0,maxValue:180,step:10,animatable:!0}},update:function(e,t){var r=e.radius,n=e.widthSegments,a=e.heightSegments,o=e.phiStart,s=e.phiLength,u=e.thetaStart,l=e.thetaLength;t.mesh=(0,i.default)(r,n,a,o,s,u,l)}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(443),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={X:1,Y:2,Z:3},o={schema:{axis:{label:"Axis",type:"Options",display:"Radio",defaultValue:a.X,labels:["X","Y","Z"],values:[a.X,a.Y,a.Z]},margin:{label:"Margin",type:"Number",defaultValue:0,step:.1,minValue:0,animatable:!0},stretchDistance:{label:"Stretch Distance",type:"Number",defaultValue:0,step:.1,animatable:!0}},update:function(e,t){if(!t.mesh)return t;var r=e.axis,n=e.margin,a=e.stretchDistance,o=["x","y","z"];t.mesh=(0,i.default)(t.mesh,o[r-1],n,a)}};t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(15),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),o=r(445),s=n(o),u=r(236),l=n(u),c=new a.Vector3(0,0,1),f={name:"Symmetry",label:"Symmetry / Mirror",schema:{center:{label:"Local Center",type:"Vec3",defaultValue:new a.Vector3(0,0,0),step:.1,animatable:!0},rotation:{label:"Local Rotation",type:"Vec3",defaultValue:new a.Vector3(0,0,0),step:1,animatable:!0},axis:{label:"Axis",type:"Options",display:"Dropdown",labels:["X","Y","Z"],values:[1,2,3],defaultValue:1},flip:{label:"Flip Mirroring",type:"Boolean",defaultValue:!0},slice:{label:"Slice",type:"Boolean",defaultValue:!1},copyMirror:{label:"Copy and Mirror",type:"Boolean",defaultValue:!1}},update:function(e,t,r){var n=r.node,i=t.mesh;if(!i)return t;var o=e.center,u=e.rotation,f=e.axis,d=e.flip,h=e.slice,p=e.copyMirror,g=n.plugs.Transform[0].rotateOrder,m=(new a.Vector3).copy(c);d&&m.negate();var v=(0,l.default)(u,g,f,o,m);return t.mesh=(0,s.default)(i,v,p,h),t}};t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(428),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{},update:function(e,t){return t.mesh?(t.mesh=(0,i.default)(t.mesh),t):t}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(457),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a={schema:{radius:{label:"Radius",type:"Number",defaultValue:.3,minValue:0,step:.1,animatable:!0},tube:{label:"Tube Radius",type:"Number",defaultValue:.2,minValue:0,step:.1,animatable:!0},radialSegments:{label:"Longitudinal Segments",type:"Integer",defaultValue:24,minValue:3,step:1,animatable:!0},tubularSegments:{label:"Latitudinal Segments",type:"Integer",defaultValue:24,minValue:3,step:1,animatable:!0},phiStart:{label:"Phi Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},phiLength:{label:"Phi Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0},thetaStart:{label:"Theta Start",type:"Number",defaultValue:0,minValue:0,maxValue:360,step:10,animatable:!0},thetaLength:{label:"Theta Length",type:"Number",defaultValue:360,minValue:0,maxValue:360,step:10,animatable:!0}},update:function(e,t){var r=e.radius,n=e.tube,a=e.radialSegments,o=e.tubularSegments,s=e.phiStart,u=e.phiLength,l=e.thetaStart,c=e.thetalength;t.mesh=(0,i.default)(r,n,a,o,s,u,l,c)}};t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),a=r(161),o=r(69),s=n(o),u=r(432),l=n(u),c=r(434),f=n(c),d=r(234),h=r(239),p=n(h),g={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0,hidden:!0},scale:{label:"Scale",type:"Vec3",minValue:1e-4,step:.1,defaultValue:{x:1,y:1,z:1},animatable:!0,hidden:!0},updateNormals:{label:"Update Normals",type:"Boolean",defaultValue:!0,hidden:!0},centerType:{label:"Center",type:"Options",display:"Dropdown",labels:["Selection Center","World Center","Pivot"],values:["SelectionCenter","WorldCenter","Pivot"],defaultValue:"SelectionCenter"},matrix:{type:"Object",defaultValue:null,hidden:!0},vertexIndices:{label:"Selection",type:"String",defaultValue:""},softSelection:{label:"Soft Selection",type:"Boolean",defaultValue:!1},falloffRadius:{label:"Falloff Radius",type:"Number",step:.1,defaultValue:.1,minValue:0},falloffCurve:{label:"Falloff Curve",type:"Options",display:"Dropdown",labels:["Sinusoidal","Linear"],values:[d.falloffFunctionPresets.sinusoidal,d.falloffFunctionPresets.linear],defaultValue:d.falloffFunctionPresets.sinusoidal}},update:function(e,t,r){var n=r.getWorldTransform,o=r.node,u=t.mesh;if(!u)return t;var c=new i.Matrix4,d=(0,s.default)(e.vertexIndices);if(e.matrix&&e.matrix.elements)c.fromArray(e.matrix.elements);else{var h=e.rotation.clone().multiplyScalar(Math.PI/180),g=(new i.Euler).setFromVector3(h,"ZYX"),m=(new i.Quaternion).setFromEuler(g);c.compose(e.translation,m,e.scale);var v=e.centerType,y=n(o.id);if("SelectionCenter"===v){var M=(0,l.default)(u,d),w=(new i.Matrix4).setPosition(M),x=(new i.Matrix4).getInverse(w);c.multiply(x),c.premultiply(w)}else"WorldCenter"===v&&(c.multiply(y),c.premultiply((new i.Matrix4).getInverse(y)))}var b=e.vertexIndices?new a.Selection(d,a.Selection.Vertices):null,T=e.softSelection,S=e.falloffRadius,_=e.falloffCurve,E=void 0,A=void 0;if(T&&S>0){var I=(0,f.default)(u,d,S,_);E=I.softSelectionIndices,A=I.softSelectionWeights,b=b&&new a.Selection(E,a.Selection.Vertices)}t.mesh=(0,p.default)(u,c,b,null,A)}};t.default=g},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){t=t||{};var r=t.selectedFaces;r.length||(r=[].concat((0,h.default)(Array(e.faceRangeOffsets.length-1).keys()))),t.alignmentAxis===D.AverageNormals&&(t.alignmentAxis=D.Z);var n=t.rotation?t.rotation.clone().multiplyScalar(Math.PI/180):new p.Vector3,i=t.scale||new p.Vector3(1,1,1),c=t.center||new p.Vector3,f=void 0!==t.uvProjectionMode?t.uvProjectionMode:0,d=void 0!==t.alignmentAxis?t.alignmentAxis:D.Y,g=void 0!==t.mapChannel?t.mapChannel:"default",v=void 0!==t.uTile?t.uTile:1,y=void 0!==t.vTile?t.vTile:1,M=(new p.Quaternion).setFromEuler((new p.Euler).setFromVector3(n,"ZYX"));if(t.worldSpace){var x=new p.Vector3,T=new p.Quaternion,_=new p.Vector3;(new p.Matrix4).getInverse(t.nodeTransform).decompose(_,T,x),i.multiply(x),M.premultiply(T)}var A=(new p.Matrix4).makeRotationFromQuaternion(M),L=(new p.Matrix4).getInverse(A),N=e.faceRangeOffsets,C=e.positions.faceValueIndices,O=e.positions.values,R=b.default.resolveMap(e,"uvMaps."+g)||new w.default,P=new Uint32Array(C.length);P.set(R.faceValueIndices);for(var z=[],j=new p.Vector3,U=new p.Vector3,B=new p.Vector3,V=void 0,k=0,F=0,G=R.values.length,H=0;H<r.length;H++){k=N[r[H]],F=N[r[H]+1],B.multiplyScalar(0);for(var W=k;W<F;W++){var Y=1+W;Y>=F&&(Y=k),O.getAt(C[W],j),O.getAt(C[Y],U),B.x+=(j.y-U.y)*(j.z+U.z),B.y+=(j.z-U.z)*(j.x+U.x),B.z+=(j.x-U.x)*(j.y+U.y)}B.normalize();for(var Q=k;Q<F;Q++){switch(V=new p.Vector2,O.getAt(C[Q],j),j.sub(c),j.applyMatrix4(L),f){case I.Planar:s(j,d,i,V);break;case I.Box:o(j,B,i,V);break;case I.Cylindrical:u(j,d,i,V);break;case I.Spherical:l(j,d,i,V);break;default:V.set(0,0)}1!==v&&(V.x*=v),1!==y&&(V.y*=y),P[Q]=G++,z.push(V)}}for(var q=new S.default(p.Vector2,R.values.length+z.length),X=0;X<q.length;++X)X<R.values.length?q.setAt(X,R.values.getAt(X)):q.setAt(X,z[X-R.values.length]);var Z=new m.default(e),K=new w.default({faceRangeOffsets:N,faceValueIndices:P,values:q});return f!==I.Cylindrical&&f!==I.Spherical||a(K,r,f,v,y),Z.uvMaps||(Z.uvMaps=new E.default),Z.uvMaps.set(g,K),Z}function a(e,t,r,n,i){for(var a=void 0,o=.4*n,s=void 0,u=void 0,l=new p.Vector2,c=new p.Vector2,f=void 0,d=void 0,h=0,g=t.length;h<g;h++){f=e.faceRangeOffsets[t[h]],d=e.faceRangeOffsets[t[h]+1],s=!1;for(var m=f;m<d;m++){u=m+1<d?m+1:f,e.values.getAt(e.faceValueIndices[m],l),e.values.getAt(e.faceValueIndices[u],c),a=Math.abs(l.x-c.x);var v=3===r&&(l.y<A||l.y>i-A);if(a>o&&!v)if(l.x<c.x)l.x+=n,e.values.setAt(e.faceValueIndices[m],l),0===h&&(s=!0);else{if(s)continue;c.x+=n,e.values.setAt(e.faceValueIndices[u],c)}}}}function o(e,t,r,n){var i=0,a=0,o=e.x,s=e.y,u=e.z,l=Math.abs(t.x),c=Math.abs(t.y),f=Math.abs(t.z);return l>=c&&l>=f&&(i=-u/r.z+.5,a=s/r.y+.5),c>=l&&c>=f&&(i=o/r.x+.5,a=-u/r.z+.5),f>=l&&f>=c&&(i=o/r.x+.5,a=s/r.y+.5),t.x<0&&(i=1-i),t.y<0&&(i=1-i),t.z<0&&(i=1-i),n.set(i,a),n}function s(e,t,r,n){var i=0===t?-e.z:e.x,a=1===t?-e.z:e.y;return i=i/r.x+.5,a=a/r.y+.5,n.set(i,a),n}function u(e,t,r,n){var i=void 0,a=void 0;switch(t){case 0:i=c(e.z/r.z,e.x/r.x,-e.y/r.y),a=-e.x/r.x+.5;break;case 1:i=c(e.x/r.x,e.y/r.y,e.z/r.z),a=e.y/r.y+.5;break;case 2:i=c(-e.x/r.x,e.z/r.z,-e.y/r.y),a=-e.z/r.z+.5}return i/=2*Math.PI,n.set(i,a),n}function l(e,t,r,n){var i=void 0,a=void 0,o=void 0;switch(t){case 0:i=f(e.z/r.z,e.x/r.x,-e.y/r.y);break;case 1:i=f(e.x/r.x,-e.y/r.y,e.z/r.z);break;case 2:i=f(-e.x/r.x,e.z/r.z,-e.y/r.y)}return o=i.lon/(2*Math.PI),a=.5-i.lat/Math.PI,n.set(o,a),n}function c(e,t,r){var n=void 0;return Math.abs(e)<A&&Math.abs(r)<A?n=0:(n=Math.atan2(e,r))<0&&(n+=2*Math.PI),n}function f(e,t,r){var n=void 0,i=void 0;if(Math.abs(e)<A&&Math.abs(r)<A)n=0,i=Math.abs(t)<A?0:t<0?-Math.PI/2:Math.PI/2;else{n=Math.atan2(e,r),n<0&&(n+=2*Math.PI);var a=Math.sqrt(e*e+r*r);i=Math.atan2(t,a)}return{lon:n,lat:i}}Object.defineProperty(t,"__esModule",{value:!0});var d=r(149),h=n(d),p=r(0),g=r(5),m=n(g),v=r(69),y=n(v),M=r(6),w=n(M),x=r(31),b=n(x),T=r(3),S=n(T),_=r(18),E=n(_),A=1e-6,I={Planar:0,Box:1,Cylindrical:2,Spherical:3},D={X:0,Y:1,Z:2,AverageNormals:4},L={selfTransform:!0,schema:{mWidth:{type:"Number",label:"Width",defaultValue:1,step:.1,minValue:0,animatable:!0},mHeight:{type:"Number",label:"Height",defaultValue:1,step:.1,minValue:0,animatable:!0},mLength:{type:"Number",label:"Length",defaultValue:1,step:.1,minValue:0,animatable:!0},center:{label:"Center",type:"Vec3",step:.1,defaultValue:new p.Vector3(0,0,0),animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,minValue:-360,maxValue:360,defaultValue:new p.Vector3(0,0,0),animatable:!0},uTile:{label:"U Tile",type:"Number",step:.1,defaultValue:1,animatable:!0},vTile:{label:"V Tile",type:"Number",step:.1,defaultValue:1,animatable:!0},uvProjectionMode:{label:"Projection",type:"Options",display:"Radio",values:[I.Planar,I.Box,I.Cylindrical,I.Spherical],labels:["Planar","Box","Cylindrical","Spherical"],defaultValue:I.Planar},xAxis:{label:"Align Local Axis",type:"Options",display:"Radio",values:[D.X,D.Y,D.Z,D.AverageNormals],labels:["X","Y","Z","Average Normals"],defaultValue:1},uvMapChannel:{label:"UV Channel",type:"String",defaultValue:"default"},autoFit:{label:"Auto Fit",type:"Button"},autoAlign:{label:"Auto Align",type:"Button"},autoFitAlign:{label:"Best Fit",type:"Button"},autoCenter:{label:"Auto Center",type:"Button"},resetUVs:{label:"Reset",type:"Button"},worldRelative:{label:"Project in World Space",type:"Boolean",defaultValue:!1},indices:{label:"Selection",type:"TextArea",defaultValue:"",display:"indexStyle"}},update:function(e,t,r){var n=r.getWorldTransform,a=r.node,o=t.mesh;if(!o)return t;var s={};s.selectedFaces=(0,y.default)(e.indices),s.uTile=e.uTile,s.vTile=e.vTile,s.uvProjectionMode=e.uvProjectionMode,s.alignmentAxis=e.xAxis,s.center=e.center,s.rotation=e.rotation,s.mapChannel=e.uvMapChannel,s.scale=new p.Vector3(e.mWidth,e.mHeight,e.mLength),s.worldSpace=e.worldRelative,s.worldSpace&&(s.nodeTransform=n(a.id)),t.mesh=i(o,s)}};t.default=L},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o){var s=new a.Matrix4;if(s.multiply((new a.Matrix4).makeTranslation(o.x,o.y,0)),s.multiply((new a.Matrix4).makeRotationZ(a.Math.degToRad(e))),r)s.multiply((new a.Matrix4).makeScale(n.x,n.y,0));else{var u=function(e){return 0==e?1:1/e};s.multiply((new a.Matrix4).makeScale(u(t.x),u(t.y),0))}return s.multiply((new a.Matrix4).makeTranslation(-o.x,-o.y,0)),s.multiply((new a.Matrix4).makeTranslation(i.x,i.y,0)),s}Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=r(5),s=n(o),u=r(6),l=n(u),c=r(3),f=n(c),d={Scale:0,Tiling:1},h={name:"UVTransform",label:"UV Transform",schema:{rotation:{label:"Rotation",type:"Number",step:.1,minValue:-360,maxValue:360,defaultValue:0,animatable:!0},scaleMode:{label:"Scale Mode",type:"Options",display:"Dropdown",labels:["Scale","Tiling"],values:[d.Scale,d.Tiling],defaultValue:d.Scale},tiling:{label:"Tiling",type:"Vec2",step:.1,defaultValue:new a.Vector2(1,1),animatable:!0},scale:{label:"Scale",type:"Vec2",step:.1,defaultValue:new a.Vector2(1,1),animatable:!0},translation:{label:"Translation",type:"Vec2",step:.1,defaultValue:new a.Vector2(0,0),animatable:!0},pivotCenter:{label:"Pivot Center",type:"Vec2",step:.1,defaultValue:new a.Vector2(0,0),animatable:!0},uvMapChannel:{label:"UV Channel",type:"String",defaultValue:"default"}},update:function(e,t){var r=t.mesh;if(!r)return t;var n=e.uvMapChannel||"default",o=r.uvMaps?r.uvMaps.byName[n]:null;if(!o)return t;for(var u=new a.Vector3,c=new a.Vector2,h=new f.default(a.Vector2,o.values.length),p=e.rotation,g=e.scaleMode,m=e.scale,v=e.tiling,y=e.translation,M=e.pivotCenter,w=i(p,v,g===d.Scale,m,y,M),x=0;x<o.values.length;x++)o.values.getAt(x,c),u.set(c.x,c.y,0),u.applyMatrix4(w),c.set(u.x,u.y),h.setAt(x,c);var b=new s.default(r),T=new l.default({faceRangeOffsets:r.faceRangeOffsets,faceValueIndices:o.faceValueIndices,values:h});b.uvMaps.set(n,T),t.mesh=b}};t.default=h},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(379),a=n(i),o=r(395),s=n(o),u=r(380),l=n(u),c=r(396),f=n(c),d=r(397),h=n(d),p=r(386),g=n(p),m=r(368),v=n(m),y=r(390),M=n(y),w=r(370),x=n(w),b=r(369),T=n(b),S=r(372),_=n(S),E=r(50),A=n(E),I=r(381),D=n(I),L=r(394),N=n(L),C=r(374),O=n(C),R=r(382),P=n(R),z=r(376),j=n(z),U=r(388),B=n(U),V=r(365),k=n(V),F=r(387),G=n(F),H=r(392),W=n(H),Y=r(367),Q=n(Y),q=r(366),X=n(q),Z=r(383),K=n(Z),J=r(393),$=n(J),ee=r(391),te=n(ee),re=r(385),ne=n(re),ie=r(364),ae=n(ie),oe=r(384),se=n(oe),ue=r(375),le=n(ue),ce=r(225),fe=n(ce),de=r(378),he=n(de),pe=r(377),ge=n(pe),me=r(389),ve=n(me),ye=r(373),Me=n(ye),we=r(371),xe=n(we);t.default={Mesh:a.default,MeshSmooth:l.default,Skin:g.default,TransformVertices:s.default,UVMap:f.default,UVTransform:h.default,Box:v.default,Sphere:M.default,Cone:x.default,Capsule:T.default,Cylinder:_.default,Normals:A.default,Plane:D.default,Torus:N.default,Disk:O.default,ProxyMesh:P.default,Instance:j.default,SortFacesByAxis:B.default,BlendShape:Q.default,BlendDeformer:X.default,Revolve:K.default,BendDeformer:k.default,Slice:G.default,Symmetry:W.default,Tangents:$.default,Stretch:te.default,Shear:ne.default,Array:ae.default,SegmentRevolve:se.default,Extrude:le.default,MaterialIDs:he.default,Tessellate:fe.default,LineText:ge.default,Spacing:ve.default,DeleteComponent:Me.default,CrossSectionRevolve:xe.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0},orbitMode:{label:"Orbit Mode",type:"Options",values:["gyroscope","trackball","firstPerson"],labels:["Gyropscope","Trackball","First Person"],defaultValue:"gyroscope"},orbitTarget:{label:"Orbit Target",type:"Node"},constraintCameraY:{label:"Constrain Camera to Positive Y",type:"Boolean",defaultValue:!1},constrainCameraSphere:{label:"Constrain Camera Within Sphere",type:"Boolean",defaultValue:!1},maxZoom:{label:"Maximum Zoom",type:"Number",defaultValue:5,minValue:1}}};t.default=n},function(e,t,r){"use strict";function n(e,t){return!(e&&"Enable"===e.hierarchyVisibility)||t}Object.defineProperty(t,"__esModule",{value:!0});var i={hierarchyVisible:!0,schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0}},update:function(e,t,r){var i=r.node;return t.visible="Annotation"===i.type?e.visible:n(e.sceneProperties,e.visible),t}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{prefetch:{label:"Pre-fetch Image",type:"Boolean",defaultValue:!1}}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{prefetch:{label:"Pre-fetch Material",type:"Boolean",defaultValue:!1}}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{key:{label:"Name",type:"String",defaultValue:""},value:{label:"Value",type:"String",defaultValue:""}},update:function(e,t){return t.metaData||(t.metaData={}),e.key&&(t.metaData[e.key]=e.value),t}};t.default=n},function(e,t,r){"use strict";function n(e,t){return!(e&&"Enable"===e.hierarchyVisibility)||t}Object.defineProperty(t,"__esModule",{value:!0});var i={hierarchyVisible:!0,schema:{visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0},renderable:{label:"Renderable",type:"Boolean",defaultValue:!0},selectable:{label:"Selectable",type:"Boolean",defaultValue:!0},overrideChildSelection:{label:"Override Child Selection",type:"Boolean",defaultValue:!0},configurator:{label:"Configurator",type:"String",hidden:!0,defaultValue:""}},update:function(e,t){return t.visible=n(e.sceneProperties,e.visible),t}};t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{doubleSided:{label:"Double Sided",type:"Boolean",defaultValue:!1},visible:{label:"Visible",type:"Boolean",defaultValue:!0,animatable:!0},prefetch:{label:"Pre-fetch mesh",type:"Boolean",defaultValue:!1},castShadow:{label:"Cast Shadow",type:"Boolean",defaultValue:!0},receiveShadow:{label:"Receive Shadow",type:"Boolean",defaultValue:!0},discardable:{label:"Discardable",type:"Boolean",defaultValue:!1},interactive:{label:"Interactive",type:"Boolean",defaultValue:!1},walkableInVR:{label:"Walkable",type:"Boolean",defaultValue:!1}}};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["Static","Kinematic","Dynamic"],i=["Box","Convex","Mesh"],a=["Bounding Box","Convex Hull","Mesh (Non-Dynamic)"],o={schema:{collisionShape:{label:"Collision Shape",type:"Options",display:"Dropdown",values:i,labels:a,defaultValue:"Convex"},motionType:{label:"Motion Type",type:"Options",display:"Dropdown",values:n,labels:n,defaultValue:"Dynamic"},mass:{label:"Mass",type:"Number",defaultValue:1,minValue:0,step:1},linearDamping:{label:"Linear Damping",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1},angularDamping:{label:"Angular Damping",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1},linearFactor:{label:"Linear Factor",type:"Vec3",defaultValue:[1,1,1]},angularFactor:{label:"Angular Factor",type:"Vec3",defaultValue:[1,1,1]},linearVelocity:{label:"Linear Velocity",type:"Vec3",defaultValue:[0,0,0]},angularVelocity:{label:"Angular Velocity",type:"Vec3",defaultValue:[0,0,0]},linearSleepingThreshold:{label:"Linear Sleep Threshold",type:"Number",defaultValue:.8,minValue:0,step:.1},angularSleepingThreshold:{label:"Angular Sleep Threshold",type:"Number",defaultValue:1,minValue:0,step:.1},friction:{label:"Friction",type:"Number",defaultValue:.5,minValue:0,step:.1},rollingFriction:{label:"Rolling Friction",type:"Number",defaultValue:0,minValue:0,step:.1},restitution:{label:"Bounce",type:"Number",defaultValue:0,minValue:0,maxValue:1,step:.1}}};t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{hierarchyVisibility:{label:"Hierarchical Visibility",type:"Options",values:["Enable","Disable"],labels:["Yes","No"]}}};t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(399),a=n(i),o=r(400),s=n(o),u=r(401),l=n(u),c=r(402),f=n(c),d=r(403),h=n(d),p=r(404),g=n(p),m=r(405),v=n(m),y=r(406),M=n(y),w=r(407),x=n(w);t.default={CameraProperties:a.default,Default:s.default,ImageProperties:l.default,MaterialProperties:f.default,MetaData:h.default,ModelProperties:g.default,PolyMeshProperties:v.default,RigidBodyProperties:M.default,SceneProperties:x.default}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{format:{type:"Options",defaultValue:"jpeg",values:["jpeg","png"],labels:["JPEG","PNG"],label:"Output Format"},v2renderer:{type:"Boolean",defaultValue:!1,label:"v2 renderer"}}};t.default={WebGLRenderer:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={schema:{useBufferClips:{label:"Use V2 Clip Format",type:"Boolean",defaultValue:!1}}};t.default={Timeline:n}},function(e,t,r){"use strict";function n(e,t){return 1===e?new s.Vector3(t?-1:1,0,0):2===e?new s.Vector3(0,t?-1:1,0):new s.Vector3(0,0,t?-1:1)}function i(e,t){var r=new s.Quaternion;return 1===e?r.setFromAxisAngle(new s.Vector3(0,1,0),t?-Math.PI/2:Math.PI/2):2===e?r.setFromAxisAngle(new s.Vector3(1,0,0),t?Math.PI/2:-Math.PI/2):3===e&&r.setFromAxisAngle(new s.Vector3(0,1,0),t?0:Math.PI),r}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=r(0),u=r(7),l={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0},scale:{label:"Scale",type:"Vec3",step:.01,defaultValue:{x:1,y:1,z:1},animatable:!0},shear:{label:"Shear",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotateOrder:{label:"Rotate Order",type:"Options",display:"Dropdown",values:["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],defaultValue:"ZYX"},preRotation:{label:"Pre-Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}},rotatePivotOffset:{label:"Rotate Pivot Offset",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}},scalePivotOffset:{label:"Scale Pivot Offset",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}},localRotatePivot:{label:"Local Rotate Pivot",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}},localScalePivot:{label:"Local Scale Pivot",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0}}},update:function(e,t){t.transform=(0,u.getLocalTransform)(e)}},c={schema:{target:{label:"LookAt Target",type:"Plug",plug:"Transform"},orientation:{label:"Orientation",type:"Vec3",defaultValue:{x:0,y:0,z:0},animatable:!0},lookAtAxis:{label:"Look Axis",type:"Options",display:"Dropdown",defaultValue:"Z",labels:["X","Y","Z"],values:["X","Y","Z"]},flipLookAtAxis:{label:"Flip Look Axis",type:"Boolean",defaultValue:!0},upAxis:{label:"Up Axis",type:"Options",display:"Dropdown",defaultValue:2,labels:["X","Y","Z"],values:[1,2,3]},flipUpAxis:{label:"Flip Up Axis",type:"Boolean",defaultValue:!1}},update:function(e,t,r){var a=r.node,l=r.getCameraWorldTransform,c=r.getWorldTransform,f=r.store;if("Camera"===a.type)return(0,o.default)(t,e);var d=e.target&&e.target.id===(0,u.get)(f,{scene:!0,plug:"Player",property:"camera"});d&&c(a.id,a.id,"Transform");var h=d?l():e.target?e.target.transform:null,p=e.orientation,g=e.lookAtAxis,m=e.upAxis,v=e.flipUpAxis,y=e.flipLookAtAxis,M=new s.Matrix4,w=new s.Quaternion;if(h&&t.transform){var x=(new s.Vector3).setFromMatrixPosition(h),b=(new s.Vector3).setFromMatrixPosition(t.transform),T=n(m,v);M.lookAt(b,x,T),w.setFromRotationMatrix(M),w.multiply(i(g,y)),w.multiply((new s.Quaternion).setFromEuler((new s.Euler).setFromVector3(p.clone().multiplyScalar(Math.PI/180),"ZYX")));var S=c(a.parent);if(S){var _=(new s.Matrix4).getInverse(S),E=(new s.Matrix4).makeRotationFromQuaternion(w),A=(new s.Matrix4).multiplyMatrices(_,E);w.setFromRotationMatrix(A)}var I=new s.Vector3,D=new s.Quaternion,L=new s.Vector3;t.transform.decompose(I,D,L),t.transform.compose(I,w,L)}}},f={schema:{translation:{label:"Translation",type:"Vec3",step:.1,defaultValue:{x:0,y:0,z:0},animatable:!0},rotation:{label:"Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0},animatable:!0},scale:{label:"Scale",type:"Vec3",step:.1,defaultValue:{x:1,y:1,z:1},animatable:!0},rotateOrder:{label:"Rotate Order",type:"Options",display:"Dropdown",values:["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],defaultValue:"ZYX"},preRotation:{label:"Pre-Rotation",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}},rotateAxis:{label:"Rotate Axis",type:"Vec3",step:1,defaultValue:{x:0,y:0,z:0}}},update:function(e,t,r){var n=(r.node,e.translation),i=e.rotation,a=e.scale,o=(e.rotateOrder,e.preRotation),u=e.rotateAxis;0===a.x&&(a.x=1e-7),0===a.y&&(a.y=1e-7),0===a.z&&(a.z=1e-7);var l=(new s.Matrix4).makeTranslation(n.x,n.y,n.z),c=(new s.Vector3).copy(i).multiplyScalar(Math.PI/180),f=(new s.Matrix4).makeRotationFromEuler(new s.Euler(c.x,c.y,c.z,"ZYX")),d=(new s.Matrix4,(new s.Matrix4).makeScale(a.x,a.y,a.z)),h=(new s.Vector3).copy(o).multiplyScalar(Math.PI/180),p=(new s.Matrix4).makeRotationFromEuler(new s.Euler(h.x,h.y,h.z,"ZYX")),g=(new s.Vector3).copy(u).multiplyScalar(Math.PI/180),m=(new s.Matrix4).makeRotationFromEuler(new s.Euler(g.x,g.y,g.z,"ZYX"));t.transform=(new s.Matrix4).multiply(l).multiply(p).multiply(f).multiply(m).multiply(d)}};t.default={Transform:l,BoneTransform:f,LookAt:c}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=t.withNone,n=(0,h.default)(function(e,t){return(0,h.default)(function(e,r){return a(t,e,r)},e)},e);return r&&(n.None={NoOp:a("None",{schema:{}},"NoOp")}),n}function a(e,t,r){var n=[],i=[],a=[],o=[],u=[],c={},d=(0,h.default)(function(e,t){var r=g.default[e.type]?(0,f.default)({type:e.type,schema:e},g.default[e.type](e)):{set:function(e){return e}};return r.isFileReference?i.push(t):r.isNodeReference?(o.push(t),a.push(t)):r.isPlugReference?(c[t]=r.isPlugReference,a.push(t)):r.isReferenceList?u.push(t):n.push(t),r},t.schema),p=(0,l.default)(d);return{schema:t.schema,keys:p,referenceKeys:a,fileReferenceKeys:i,nodeReferenceKeys:o,nodeReferenceListKeys:u,plugReferences:c,nonReferenceKeys:n,environment:t.environment,hierarchyVisible:t.hierarchyVisible,selfTransform:t.selfTransform,selfProperties:t.selfProperties,getProperties:function(){return d},typeOf:function(e){return t.schema[e]&&t.schema[e].type},set:function(e,t,r){var n=d[t]?d[t].set(r):r,i=d[t]&&d[t].equals?!d[t].equals(n,e[t]):n!==e[t];return i&&(e[t]=d[t]&&d[t].get?d[t].get(n):n),i},export:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).onlyChanged?(0,l.default)(t).reduce(function(e,r){var n=d[r]?d[r].set():void 0;return(d[r]&&d[r].equals?!d[r].equals(n,t[r]):n!==t[r])&&"name"!==r&&"type"!==r&&(e[r]=t[r]),e},{}):(0,f.default)({},t,{name:r,primitive:e})},contentExport:function(e){var t={},i=!0,a=!1,o=void 0;try{for(var u,l=(0,s.default)(n);!(i=(u=l.next()).done);i=!0){var c=u.value;t[c]=e[c]}}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return t.type=r,t.name=e.name,t},get:function(e,t){return d[t]&&d[t].get?d[t].get(e[t]):e[t]},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],n={type:e,name:r||e},i=!0,a=!1,o=void 0;try{for(var u,l=(0,s.default)(p);!(i=(u=l.next()).done);i=!0){var c=u.value;n[c]=d[c].set(t[c])}}catch(e){a=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw o}}return!1===t.active&&(n.active=!1),n},update:function(e,r,n){var i=t.update?t.update.call(t,e,r,n):(0,f.default)(r,e),a=i||r;return a.nodeId||(a.nodeId=n.node.id),a.id||(a.id=n.node.id),a._v=n.node._v,a}}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(24),s=n(o),u=r(4),l=n(u),c=r(2),f=n(c);t.default=i;var d=r(106),h=n(d),p=r(207),g=n(p)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){var e=document.createElement("script");e.innerText="(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n  ga('create', 'UA-38840155-1', 'auto', 'playerv2');\n  ga('playerv2.require', 'displayfeatures');\n  ga('playerv2.send', 'pageview');\n  ",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}function a(e,t){i();var n=void 0,o=void 0;"function"==typeof t?(n=t,o={},console.warn("DEPRECATED: second argument to `claraplayer` should be an options object")):(o=t||{},n=o.callback);var u=f.default.init({accessToken:"74f3517e176d41cfa5e9c41f446b5531",verbose:!1,captureUncaught:!o.devMode,payload:{environment:"production",context:"playerv2"}}),c=a.hasWebGL(),d="string"==typeof e?document.getElementById(e):e;d.appendChild(document.createElement("div"));var h=d.getBoundingClientRect();if(!h.height)throw new Error("Player element must have a height");var p=d.children[0],g=window.getComputedStyle(d,null),m="flex"===g.display,v="relative"===g.position,y=void 0,M=(0,O.default)({fetchApi:D.default,subscribe:function(){w&&!w.getTranslator()&&(0,N.getEvalSceneGraph)(w),y=j(y||p,(0,P.default)(w,{isFlex:m,isRelative:v,parentEl:d,hasWebGL:c}))}}),w=M._store;u&&w.useRollbar(u);var x=(h&&h.width)*h.height*(window&&window.devicePixelRatio);w.trackEvent("Display Window","Display size",Math.round(x)),(0,l.default)(M.deps,U),M.version="2.3.41",n&&n(M);var b=(0,z.autoRotateTool)(w);if(M.commands.addCommand(b,"autoRotate"),M.on("loaded",function(){b.tool.start(1e3)}),c){var T=r(244).default;w.setTranslator(T,w);var S=w.getTranslator(),_=r(470).default;(0,s.default)(_).forEach(function(e){var t=_[e];M.commands.addCommand("function"==typeof t?t(w,S):t,e)}),w.dispatch((0,N.touch)());var E=r(477).default;M.commands.addCommand(E(w,w.getTranslator()),"vrMode");var A=r(478).default;M.commands.addCommand(A(w,w.getTranslator()),"vrSettings")}return M}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),s=n(o),u=r(2),l=n(u),c=r(692),f=n(c);r(664),r(669),r(672),r(673),r(667),r(670),r(668),r(671),r(665),r(666),r(608),r(655),r(674),r(675),r(637),r(638),r(639),r(640),r(643),r(641),r(642),r(644),r(645),r(646),r(647),r(649),r(648),r(636),r(663),r(633),r(634),r(635),r(607),r(660),r(658),r(656),r(661),r(662),r(657),r(659),r(650),r(651),r(652),r(654),r(653),r(605),r(606),r(601),r(604),r(603),r(602),r(203),r(627),r(628),r(630),r(629),r(626),r(632),r(631),r(609),r(610),r(611),r(612),r(613),r(614),r(615),r(616),r(617),r(618),r(620),r(619),r(621),r(622),r(623),r(624),r(625),r(676),r(679),r(677),r(678),r(681),r(680),r(684),r(683),r(682),r(691);for(var d=r(310),h=n(d),p=r(37),g=n(p),m=r(306),v=n(m),y=r(308),M=n(y),w=r(305),x=n(w),b=r(309),T=n(b),S=r(307),_=n(S),E=r(0),A=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(E),I=r(490),D=n(I),L=r(255),N=(n(L),r(10)),C=r(342),O=n(C),R=r(337),P=n(R),z=r(331),j=h.default.init([v.default,M.default,x.default,T.default,_.default]),U={patch:j,h:g.default,THREE:A},B=document.getElementsByTagName("script"),V=0;V<B.length;V++)B[V].src&&B[V].src.match(/claraplayer/)&&(r.p=B[V].src.split(/claraplayer/)[0]);a.deps=U,a.hasWebGL=function(){var e=document.createElement("canvas");return!!e.getContext("webgl")||!!e.getContext("experimental-webgl")},t.default=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=e.length,n=o.default.sort(d.default.identity(r),e.newCompareAtIndicesStable()),i=0,a=null,s=e.newCompareAtIndices();if(t)i=o.default.unique(n,s);else{a=new Uint32Array(r);for(var l=0,c=0,f=n[0],h=1;h<r;++h){var p=n[h];if(0!==s(p,f)){for(var g=c;g!==h;++g)a[n[g]]=f;c=h,f=p,++l!==h&&(n[l]=p)}}for(var m=c;m!==r;++m)a[n[m]]=f;i=l+1}var v=new u.default(r).includeFromArray(n,0,i).toIndexArray(i);if(null!==a){var y=n,M=d.default.inverse(v,null,y);d.default.apply(a,M)}this.targetToSourceMap=v,this.sourceToTargetMap=a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(34),o=n(a),s=r(155),u=n(s),l=r(3),c=n(l),f=r(124),d=n(f);i.prototype={constructor:i,compactedValues:function(e){for(var t=this.targetToSourceMap,r=t.length,n=new c.default(e.type,r),i=e.newRangeArray(),a=0;a!==r;++a)e.rangeToArray(t[a],1,i),n.arrayToRange(i,a,1);return n},indices:function(e){return new Uint32Array(this.sourceToTargetMap)},transcribeIndices:function(e){return d.default.apply(e,this.sourceToTargetMap)}}},function(e,t,r){"use strict";function n(e,t){this.ping=new e(t),this.pong=new e(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.apply=function(e){new n(e.constructor,e.length).sortRange(e,0,e.length)},n.prototype={constructor:n,sortRange:function(e,t,r){var n=r-t;if(n<=4)return void(n>=2&&this._handleShortRange(e,t,n));for(var i=e,a=t,o=r,s=this.ping,u=0,l=1,c=2,f=!0;f;){for(var d=(n+l-1)/l>>1,h=a,p=a+c,g=0;g<=1;++g){for(var m=1;m!==d;++m,h+=l,p+=c)for(var v=h+l,y=v,M=i[h],w=i[v],x=!0;x;)if(w<M)if(s[u++]=w,++v===p){for(s[u++]=M;++h!==y;)s[u++]=i[h];x=!1}else w=i[v];else if(s[u++]=M,++h===y){for(s[u++]=w;++v!==p;)s[u++]=i[v];x=!1}else M=i[h];if(0===g)if(d=2,p>o)p=o;else if(p!==o)for(var b=u+c,T=p;T!==o;++T)s[b++]=i[T]}if(s!==e)if(l=c,c<<=1,i=s,a=0,o=n,c<n){var S=this.ping;s=s===S?this.pong:S,u=0}else s=e,u=t;else f=!1}},_handleShortRange:function(e,t,r){var n=e[t],i=e[t+1];switch(r){case 2:i<n&&(e[t]=i,e[t+1]=n);break;case 3:var a=e[t+2];if(i<n){var o=n;n=i,i=o}if(a<i){var s=i;i=a,a=s}if(i<n){var u=n;n=i,i=u}e[t]=n,e[t+1]=i,e[t+2]=a;break;case 4:var l=e[t+2],c=e[t+3];if(i<n){var f=n;n=i,i=f}if(c<l){var d=l;l=c,c=d}if(l<n){var h=n;n=l,l=h}if(c<i){var p=i;i=c,c=p}if(l<i){var g=i;i=l,l=g}e[t]=n,e[t+1]=i,e[t+2]=l,e[t+3]=c}}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(147),a=n(i),o=r(148),s=n(o),u=function(){function e(t,r){(0,a.default)(this,e),this.start=t,this.end=r}return(0,s.default)(e,[{key:"intersects",value:function(e){return e&&this.start<=e.end&&this.end>=e.start}},{key:"merge",value:function(e){this.start=Math.min(this.start,e.start),this.end=Math.max(this.end,e.end)}},{key:"compare",value:function(e){return this.start>e?1:this.end<e?-1:0}}]),e}(),l=function(){function e(){(0,a.default)(this,e),this.ranges=[],this.sortedIndex=function(e,t){for(var r=0,n=e.length;r<n;){var i=r+n>>>1;e[i].compare(t)<0?r=i+1:n=i}return r}}return(0,s.default)(e,[{key:"add",value:function(e,t){if(t||(t=e),e>t)return void console.error("Attempting to add invalid range ("+e+","+t+")");var r=new u(e,t);if(!this.ranges.length)return void this.ranges.push(r);var n=this.sortedIndex(this.ranges,e),i=this.sortedIndex(this.ranges,t);if(i<this.ranges.length&&t>=this.ranges[i].start&&(i+=1),n===i)this.ranges.splice(n,0,r);else{for(var a=r,o=n;o<i;o++)a.merge(this.ranges[o]);this.ranges.splice(n,i-n,a)}}},{key:"expanded",value:function(){for(var e=[],t=void 0,r=void 0,n=void 0,i=0;i<this.ranges.length;i++){r=this.ranges[i],t=r.end-r.start+1,n=new Array(t);for(var a=0;a<t;++a)n[a]=r.start+a;e=e.concat(n)}return e}}]),e}();t.default=l},function(e,t,r){"use strict";[Uint32Array,Int32Array,Uint8Array,Int8Array].forEach(function(e){e.prototype.fill||Object.defineProperty(e.prototype,"fill",{value:function(e,t,r){t=t||0,r=r||this.length;for(var n=t;n<r;n++)this[n]=e;return this}}),e.prototype.slice||Object.defineProperty(e.prototype,"slice",{value:function(e,t){for(var r=void 0===e?0:e,n=void 0===t?this.length:t,i=n-r,a=new this.constructor(i),o=0;r<n;)a[o]=this[r],++o,++r;return a}}),e.prototype.sort||Object.defineProperty(e.prototype,"sort",{value:function(e){function t(t,r){return t!==t&&r!==r?0:t!==t?1:r!==r?-1:void 0!==e?e(t,r):t<r?-1:t>r?1:0}return Array.prototype.sort.call(this,t)}}),e.from||function(){e.from=function(t,r,n){var i=e.prototype;if(this.prototype!==i)throw new TypeError("this is not a typed array.");if("function"!=typeof(r=r||function(e){return e}))throw new TypeError("specified argument is not a function");if(t=Object(t),!t.length)return new this(0);for(var a=[],o=0;o<t.length;o++)a.push(t[o]);a=a.map(r,n);for(var s=new this(a.length),o=0;o<s.length;o++)s[o]=a[o];return s}}()})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(34),a=n(i),o=r(414),s=n(o),u={collapsePositions:function(e,t){var r=new s.default(e),n=r.compactedValues(e);return t&&r.transcribeIndices(t),n},collapseMapVertexValues:function(e,t){for(var r=e.positions.updateInverseIndex(),n=(e.faceRangeOffsets,r.faceValueIndices),i=r.faceRangeOffsets,o=-1,s=0,u=r.valueFaceIndexOffsets,l=r.valueFaceIndices,c=t.values,f=c.data,d=c.elementSize,h=t.faceValueIndices,p=0,g=e.getNumFaceVertices();p!==g;++p){var m=n[p],v=h[p],y=v*d;p===s&&(s=i[++o+1]);for(var M=u[m],w=u[m+1],x=M;x!==w;++x){var b=l[x];if(b===o)break;var T=r.findValueIndexOffset(b,m),S=h[T];S!==v&&a.default.rangeEquals(f,y,f,S*d,d)&&(h[p]=S)}}}};t.default=u},function(e,t,r){"use strict";function n(e,t){for(var r=[],n=[],i=new a.default.Iterator(e);i.next();){var s=i.element,u=i.getId();t&&-1===t.indexOf(u)||(r.push(u),n.push({map:s,faceIndices:s.updateInverseIndex().valueFaceIndices,facesOffset:0}))}for(var l=e.getNumFaceVertices(),c=n.length,f=new Uint32Array(l),d=new Uint32Array(l*c),h=0,p=0,g=e.faceRangeOffsets,m=-1,v=0,y=n[c-1],M=y.faceIndices,w=c-2,x=0;x!==l;++x){x===v&&(v=g[++m+1]);for(var b=!0,T=0,S=0;S!==c;++S){var _=n[S],s=_.map,E=s.faceValueIndices[x];if(d[h+S]=E,b){var A=s.valueFaceIndexOffsets[E];void 0===A&&(o||(console.warn("GOT INVALID INDICES, using default index of zero to avoid errors, but this may lead to bad looking meshes"),o=!0),A=0);var I=s.valueFaceIndices[A];_.facesOffset=A,b=I!==m}}if(b){var D=y.facesOffset,L=0,N=!0;do{L=M[D++],N=L!==m,b=N;for(var S=w;N&&-1!==S;--S){for(var _=n[S],C=_.facesOffset,O=_.faceIndices,R=O[C];R<L;)R=O[++C];R!==L&&(N=!1),R===m?b=!1:_.facesOffset=C}}while(D<M.length&&b&&!N);b=N,T=L}if(b){var P=n[0].map,z=P.findValueIndexOffset(T,P.faceValueIndices[x]),j=f[z];f[x]=j}else f[x]=p++,h+=c}this.mesh=e,this.mapIds=r,this.renderIndices=f,this.valueIndices=d.slice(0,h),this.numVertices=p}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(31),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=!1;n.prototype={constructor:n,getMapValues:function(e,t){var r=this.mapIds,n=r.indexOf(e),i=this.numVertices,o=this.valueIndices;if(-1===n)throw Error("Map with id '"+e+"' not found!");var s=a.default.resolveMap(this.mesh,e),u=s.values;if(t.length<i)throw Error("Data won't fit!");for(var l=n,c=r.length,f=new t.type,d=0;d!==i;++d){var h=o[l+d*c];t.setAt(d,u.getAt(h,f))}}}},function(e,t,r){"use strict";function n(e){this.mesh=e,this.groups=null;for(var t=0,r=e.faceRangeOffsets,n=r[0],i=0,a=1,o=r.length;a<o;++a){var s=r[a],u=s-n;u>=3&&(t+=u-2),i=Math.max(i,u),n=s}this.startFaceIndices=this.getStartFaceIndices(e.positions,i),this.numTriangles=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0);n.prototype={constructor:n,getStartFaceIndices:function(e,t){for(var r,n,a,o=this.mesh.faceRangeOffsets,s=this.mesh.faceRangeOffsets.length-1,u=new Uint32Array(s),l=new Float32Array(t),c=e.faceValueIndices,f=e.values,d=new i.Vector3,h=new i.Vector3,p=new i.Vector3,g=new i.Vector3,m=new i.Vector3,v=new i.Vector3,y=new i.Vector3,M=new i.Vector3,w=new i.Vector3,x=0,b=o.length-1;x<b;++x){var T=o[x],S=o[x+1],_=S-T;if(!(_<=3)){var E=c[T+(_-1)],A=c[T],I=c[T+1%_];f.getAt(E,m),f.getAt(A,v),f.getAt(I,y),h.copy(v).sub(m),p.copy(y).sub(v),w.copy(p).cross(h);for(var D=0;D<_;++D){E,E=A,A=I,I=c[T+(D+2)%_],n=g,g=m,m=v,v=y,y=n,f.getAt(I,y),r=d,d=h,h=p,p=r,p.copy(y).sub(v),a=M,M=w,w=a,w.copy(p).cross(h);var L=M.dot(w);l[D]=L}for(var D=0;D<_;++D){var L=l[D],N=l[(D+1)%_];if(L>=0&&N>=0){u[x]=(D+1)%_;break}}}}return u},translateIndices:function(e,t){var r=this.mesh.faceRangeOffsets,n=t.data,i=t.offset,a=t.stride,o=null,s=null,u=null,l=null;if(this.mesh.materialIds){o=this.mesh.materialIds;for(var c=r.length-1,s=new Uint32Array(c),f=0;f<s.length;f++)s[f]=f;s.sort(function(e,t){return o[e]-o[t]});var d=Math.min(o[s[c-1]]+1,30);u=new Uint32Array(d);for(var f=0;f<d;f++)u[f]=n.length;l=new Uint32Array(d)}for(var f=0;f<this.startFaceIndices.length;++f){var h=f;s&&(h=s[f]);for(var p=this.startFaceIndices[h],g=r[h],m=r[h+1],v=m-g,y=0;y<v-2;++y){if(o){var M=Math.min(o[h],29);u[M]=Math.min(u[M],i),l[M]=Math.max(l[M],i+2*a)}n[i]=e[g+p],i+=a,n[i]=e[g+(p+y+1)%v],i+=a,n[i]=e[g+(p+y+2)%v],i+=a}}if(o){for(var f=0;f<l.length;f++)l[f]=l[f]-u[f]+1;this.groups={groupStarts:u,groupCounts:l}}},translateMaterialIds:function(e){for(var t=this.mesh.faceRangeOffsets,r=this.mesh.materialIds,n=t[0],i=1,a=t.length;i<a;++i){for(var o=r[i-1],s=t[i],u=s-n,l=u>=3?u-2:0,c=writeIndex+l*stride;writeIndex!==c;writeIndex+=stride)outputArray[writeIndex]=o;n=s}},translateToUnindexedValues:function(e,t,r){var n=this.mesh.faceRangeOffsets,i=0,a=e.newRangeArray(1),o=null,s=null,u=null,l=null;if(this.mesh.materialIds){o=this.mesh.materialIds;for(var c=n.length-1,s=new Uint32Array(c),f=0;f<s.length;f++)s[f]=f;s.sort(function(e,t){return o[e]-o[t]});var d=o[s[c-1]]+1;u=new Uint32Array(d);for(var f=0;f<d;f++)u[f]=t.length;l=new Uint32Array(d)}for(var f=0;f<this.startFaceIndices.length;++f){var h=f;s&&(h=s[f]);for(var p=this.startFaceIndices[h],g=n[h],m=n[h+1],v=m-g,y=0;y<v-2;++y){if(o){var M=o[h];u[M]=Math.min(u[M],i),l[M]=Math.max(l[M],i+2)}t.arrayToRange(e.rangeToArray(r[g+p],1,a),i,1),t.arrayToRange(e.rangeToArray(r[g+(p+y+1)%v],1,a),i+1,1),t.arrayToRange(e.rangeToArray(r[g+(p+y+2)%v],1,a),i+2,1),i+=3}}if(o){for(var f=0;f<l.length;f++)l[f]=l[f]-u[f]+1;this.groups={groupStarts:u,groupCounts:l}}}}},function(e,t,r){"use strict";function n(e){this.positionSkinRange=e.positionSkinRange,this.skinWeights=e.skinWeights,this.skinBoneIndices=e.skinBoneIndices,this.poseSkinToPoseBoneTransform=e.poseSkinToPoseBoneTransform}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0),a=r(3),o=function(e){return e&&e.__esModule?e:{default:e}}(a);n.prototype={constructor:n,applyTransforms:function(e,t,r,n){return this.deform(this.createFinalTransforms(t,r,n),e)},createFinalTransforms:function(e,t,r){var n=this.poseSkinToPoseBoneTransform,a=(new i.Matrix4).getInverse(e,!0),o=new Array(n.length);(new i.Matrix4).identity();if(0===n.length)return o;var s=void 0,u=void 0,l=void 0;r>-1&&(s=t[r],u=(new i.Matrix4).getInverse(s,!0),l=(new i.Matrix4).getInverse(n.getAt(r),!0));for(var c=new i.Matrix4,f=new i.Matrix4,d=(new i.Matrix4,0),h=n.length;d<h;d++){var p=t[d];r>-1?(c.multiplyMatrices(u,p),f.multiplyMatrices(l,c)):f.multiplyMatrices(a,p),o[d]=(new i.Matrix4).multiplyMatrices(f,n.getAt(d))}return o},deform:function(e,t){for(var r=this.positionSkinRange,n=this.skinWeights,a=this.skinBoneIndices,s=new o.default(i.Vector3,t.length),u=new i.Vector3,l=new i.Vector3,c=0;c<t.length;c++){t.getAt(c,u),l.multiplyScalar(0);for(var f=r[c];f<r[c+1];f++)t.getAt(c,u),u.applyMatrix4(e[a[f]]),u.multiplyScalar(n[f]),l.addVectors(l,u);r[c+1]-r[c]==0&&l.copy(u),s.setAt(c,l)}return s}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){this.polyMap=e,this.edgeHighVertexIndices=null,this.edgePivotRangeOffsets=null,this.edgeVertices=null,this._compactEdgeLowToHighMap(this._buildEdgeLowToHighMap()),this._inverseMapping()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(415),o=n(a),s=r(34),u=n(s);i.prototype={constructor:i,getNumEdges:function(){return this.edgeHighVertexIndices.length},findEdgeId:function(e,t){var r=e,n=t;n<r&&(r=t,n=e);var i=this.edgePivotRangeOffsets;return u.default.binarySearch(this.edgeHighVertexIndices,n,i[r],i[r+1])},getVerticesForEdge:function(e,t){return t?(t[0]=this.edgeVertices[2*e],t[1]=this.edgeVertices[2*e+1],t):{v:this.edgeVertices[2*e],vNext:this.edgeVertices[2*e+1]}},_inverseMapping:function(){for(var e=this.getNumEdges(),t=new Uint32Array(2*e),r=0;r<this.edgePivotRangeOffsets.length-1;r++)for(var n=this.edgePivotRangeOffsets[r],i=this.edgePivotRangeOffsets[r+1],a=n;a<=i;a++){var o=this.edgeHighVertexIndices[a];t[2*a+0]=r,t[2*a+1]=o}this.edgeVertices=t},_buildEdgeLowToHighMap:function(){for(var e=this.polyMap.faceRangeOffsets,t=this.polyMap.faceValueIndices,r=this.polyMap.values.length,n=new Uint32Array(r+2),i=n.subarray(2),a=e[0],o=0,s=1,l=e.length;s!==l;++s){for(var c=e[s],f=t[c-1],d=a;d!==c;++d){var h=t[d],p=h<f?h:f,g=++i[p];g>o&&(o=g),f=h}a=c}u.default.accumulate(i);var m=n.subarray(1),v=new Uint32Array(m[r]);a=e[0];for(var y=1,M=e.length;y!==M;++y){for(var w=e[y],x=t[w-1],b=a;b!==w;++b){var T=t[b],S=x,_=T;_<S&&(S=T,_=x),v[m[S]++]=_,x=T}a=w}return this.edgePivotRangeOffsets=n,this.edgeHighVertexIndices=v,o},_compactEdgeLowToHighMap:function(e){for(var t=this.edgePivotRangeOffsets,r=this.edgeHighVertexIndices,n=new o.default(Uint32Array,e),i=this.polyMap.values.length+1,a=0,s=0,l=0,c=1;c!==i;++c){if(a=t[c],s!==a){n.sortRange(r,s,a);var f=r[s];r[l++]=f;for(var d=s+1;d<a;++d){var h=r[d];h!==f&&(r[l++]=h,f=h)}}t[c]=l,s=a}this.edgeHighVertexIndices=u.default.slice(r,0,l),this.edgePivotRangeOffsets=t.subarray(0,i)}}},function(e,t,r){"use strict";function n(e){this.polyMap=e,this.faceEdgeIndices=null,this.edgeFaceCounts=null,this.edgeFaceIndices=null,this._compute()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,getEdgeIdFromFaceValueIndex:function(e){return this.faceEdgeIndices[e]},getNumFacesForEdgeId:function(e){return this.edgeFaceCounts[e]},getFaceForEdgeId:function(e,t){return this.edgeFaceIndices[2*e+t]},checkValidity:function(){for(var e=!0,t=0;t<this.edgeFaceCounts.length;t++)this.edgeFaceCounts[t]>2&&(e=!1);return e},_compute:function(){for(var e=this.polyMap,t=e.edgeVertexAdjacency,r=e.faceRangeOffsets,n=e.faceValueIndices,i=t.edgeHighVertexIndices.length,a=new Uint32Array(i),o=new Uint32Array(2*i),s=new Uint32Array(n.length),u=0;u<r.length-1;u++)for(var l=r[u],c=r[u+1],f=c-l,d=n[l],h=0;h<f;h++){var p=d;d=n[l+(h+1)%f];var g=t.findEdgeId(p,d),m=l+h;s[m]=g,o[2*g+a[g]]=u,a[g]++}return this.faceEdgeIndices=s,this.edgeFaceCounts=a,this.edgeFaceIndices=o,this}}},function(e,t,r){"use strict";function n(e){this.polyMap=e,this.faceFaceCounts=null,this.faceFaceIndices=null,this._compute()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,getAdjacentFaces:function(e){for(var t=this.faceFaceCounts[e+1]-this.faceFaceCounts[e],r=new Uint32Array(t),n=this.faceFaceCounts[e],i=0;n<this.faceFaceCounts[e+1];n++,i++)r[i]=this.faceFaceIndices[n];return r},adjacentFacesOnVertex:function(e,t){for(var r=this.getAdjacentFaces(e),n=this.polyMap.faceRangeOffsets,i=this.polyMap.faceValueIndices,a=[],o=0;o<r.length;o++)for(var s=n[r[o]];s<n[r[o]+1];s++)if(i[s]===t){a.push(r[o]);break}return a},_compute:function(){for(var e=this.polyMap.faceRangeOffsets,t=(this.polyMap.faceValueIndices,this.polyMap.faceEdgeAdjacency),r=new Uint32Array(e.length),n=[],i=0;i<e.length-1;i++){for(var a=[],o=e[i];o<e[i+1];o++){var s=t.getEdgeIdFromFaceValueIndex(o);if(t.getNumFacesForEdgeId(s)>1){var u=t.getFaceForEdgeId(s,0);u===i&&(u=t.getFaceForEdgeId(s,1)),a.push(u)}}r[i+1]=r[i]+a.length,n.push.apply(n,a)}return this.faceFaceCounts=r,this.faceFaceIndices=new Uint32Array(n),this}}},function(e,t,r){"use strict";function n(e){this.polyMap=e,this._compute()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.prototype={constructor:n,getNumEdgesForVertex:function(e){var t=this.valueEdgeOffsets[e];return this.valueEdgeOffsets[e+1]-t},getEdgeForVertexId:function(e,t){var r=this.valueEdgeOffsets[e];return this.valueEdgeIndices[r+t]},getEdgeOrderForVertexId:function(e){for(var t=this.getNumEdgesForVertex(e),r=this.polyMap.edgeVertexAdjacency,n=this.polyMap.faceEdgeAdjacency,i=this.polyMap.faceRangeOffsets,a=this.polyMap.faceValueIndices,o=this.getEdgeForVertexId(e,0),s=n.getNumFacesForEdgeId(o,0),u=!1,l=0;!u&&l<t;){var c=this.getEdgeForVertexId(e,l);if(1===n.getNumFacesForEdgeId(c))for(var f=n.getFaceForEdgeId(c,0),d=i[f],h=i[f+1],p=h-d,g=a[d],m=a[d+1],v=0;v<p;++v){var y=g;if(g=m,m=a[d+(v+2)%p],y===e){var M=r.findEdgeId(y,g);M===c&&(o=c,s=f,u=!0)}}++l}if(!u)for(var w=i[s],x=i[s+1],b=x-w,T=a[w],S=a[w+1],_=0;_<b;++_){var E=T;if(T=S,S=a[w+(_+2)%b],E===e){var A=r.findEdgeId(E,T);A!==o&&(s=n.getFaceForEdgeId(o,1))}}for(var I=new Uint32Array(t),D=o,L=s,N=0;N<t;++N){I[N]=D;for(var C=i[L],O=i[L+1],R=O-C,P=a[C],z=a[C+1],j=0;j<R;++j){var U=P;if(P=z,z=a[C+(j+2)%R],U===e){var B=a[C+(j+R-1)%R];D=r.findEdgeId(B,U);var V=n.getFaceForEdgeId(D,0);L=L===V&&2===n.getNumFacesForEdgeId(D)?n.getFaceForEdgeId(D,1):V}}}return I},getAdjacentValues:function(e){for(var t=this.polyMap.edgeVertexAdjacency,r=[],n=this.getNumEdgesForVertex(e),i=0;i<n;i++){var a=this.getEdgeForVertexId(e,i),o=t.getVerticesForEdge(a),s=o.v===e?o.vNext:o.v;r.push(s)}return r},getAdjacentFaceValuesIndicesOnFace:function(e,t){var r=[],n=this.polyMap.faceRangeOffsets[t],i=this.polyMap.faceRangeOffsets[t+1];if(i-n<3)return r;var a=e===i-1?n:e+1,o=e===n?i-1:e-1;return r.push(o),r.push(a),r},getNumFacesForVertex:function(e){var t=this.valueFaceOffsets[e];return this.valueFaceOffsets[e+1]-t},getFaceForVertexId:function(e,t){var r=this.valueFaceOffsets[e];return this.valueFaceIndices[r+t]},_compute:function(){for(var e=this.polyMap,t=(e.faceRangeOffsets,e.faceValueIndices,e.edgeVertexAdjacency),r=new Uint32Array(e.values.length),n=new Uint32Array(e.values.length),i=t.getNumEdges(),a=new Uint8Array(i),o=0;o<e.faceRangeOffsets.length-1;o++)for(var s=e.faceRangeOffsets[o],u=e.faceRangeOffsets[o+1],l=u-s,c=e.faceValueIndices[s],f=0;f<l;f++){var d=c;c=e.faceValueIndices[s+(f+1)%l];var h=t.findEdgeId(d,c);r[d]++,0===a[h]&&(a[h]=1,n[d]++,n[c]++)}for(var p=0,g=0,m=new Uint32Array(r.length+1),v=new Uint32Array(n.length+1),y=0;y<r.length;y++)m[y]=p,p+=r[y],r[y]=0,v[y]=g,g+=n[y],n[y]=0;m[r.length]=p,v[n.length]=g;for(var M=new Uint32Array(p),w=new Uint32Array(g),x=0;x<e.faceRangeOffsets.length-1;x++)for(var b=e.faceRangeOffsets[x],T=e.faceRangeOffsets[x+1],S=T-b,_=e.faceValueIndices[b],E=0;E<S;E++){var A=_;_=e.faceValueIndices[b+(E+1)%S];var I=t.findEdgeId(A,_);M[m[A]+r[A]++]=x,1===a[I]&&(a[I]=2,w[v[A]+n[A]++]=I,w[v[_]+n[_]++]=I)}this.valueFaceOffsets=m,this.valueFaceIndices=M,this.valueEdgeOffsets=v,this.valueEdgeIndices=w}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t=e.values,r=new s.Vector3,n=t.length,i=new g.default(t.type,n),a=0;a<n;++a)t.getAt(a,r),i.setAt(a,r);return i}function a(e,t,r,n,i){if(n)for(var a=new s.Vector3,o=new s.Vector3,u=new s.Vector3,l=0;l<t.length;++l){e.getAt(l,a),r.getAt(l,o),t.getAt(l,u);var c=a.add(u.sub(o).multiplyScalar(n));i&&0===c.length()||e.setAt(l,c)}}function o(e,t,r){var n=r.length,o=t.length;if(o!==n)return e;e=new f.default(e);var u=h.default.IdPositions,c=new l.default(h.default.resolveMap(e,u)),d=c.values.clone();c.values=d,h.default.assignMap(e,u,c),u=h.default.IdNormals,c=new l.default(h.default.resolveMap(e,u)),d=c.values.clone(),c.values=d,h.default.assignMap(e,u,c);var p=e.positions,g=p.values,m=e.normalMap,v=!!m,y=g.length,M=e.blendShapes;if(!M)return console.log("BLEND DEFORM IGNORED: no blend shape"),e;for(var w=0;w<o;++w){var x=M[t[w]];if(!x)return console.log("BLEND DEFORM IGNORED: missing channel",t[w]),e;if(x.positions.length!==y)return console.log("BLEND DEFORM IGNORED: cannot use channel",t[w],"because the number of vertices doesn't match with the original shape"),e;!v||x.normals&&x.normals.length===m.values.length||(v=!1)}for(var b=v?m.values:-1,T=i(p),S=i(m),_=0;_<n;++_)a(T,M[t[_]].positions,g,r[_]),a(S,M[t[_]].normals,b,r[_],!0);if(e.positions.values=T,v){for(var E=new s.Vector3,A=0,I=S.length;A<I;++A)S.getAt(A,E),E.normalize(),S.setAt(A,E);e.normalMap.values=S}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=r(0),u=r(6),l=n(u),c=r(5),f=n(c),d=r(31),h=n(d),p=r(3),g=n(p)},function(e,t,r){"use strict";function n(e){for(var t=(0,o.default)(e),r=t.positions.values,n=t.positions.faceValueIndices,a=t.getNumFaces(),s=0,u=new i.Vector3,l=new i.Vector3,c=new i.Vector3,f=new i.Vector3,d=0;d<3*a;d+=3)r.getAt(n[d],u),r.getAt(n[d+1],l),r.getAt(n[d+2],c),s+=u.dot(f.crossVectors(l,c))/6;return s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0),a=r(240),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=new s.Vector3;e=new f.default(e);var n=h.default.IdPositions,i=new l.default(h.default.resolveMap(e,n)),a=i.values.clone();if(i.values=a,h.default.assignMap(e,n,i),n=h.default.IdNormals,i=new l.default(h.default.resolveMap(e,n)),a=i.values.clone(),i.values=a,h.default.assignMap(e,n,i),e.normalMap&&e.uvMaps){var u=e.uvMaps.byName[t];if(u||(u=e.uvMaps.byName[e.uvMaps.namesByIndex[0]]),u){for(var c=e.faceRangeOffsets,d=e.positions.values,p=e.positions.faceValueIndices,m=u.faceValueIndices,v=u.values,y=e.normalMap.faceValueIndices,M=e.normalMap.values,w=M.length,x=new g.default(s.Vector4,w),b=new g.default(s.Vector3,w),T=new g.default(s.Vector3,w),S=c.length-1,_=0;_<S;++_)for(var E=p.slice(c[_],c[_+1]),A=m.slice(c[_],c[_+1]),I=y.slice(c[_],c[_+1]),D=0;D<E.length-2;++D)!function(e,t,n,i,a,o,u,l,c,f,d){var h=e.getAt(t),p=e.getAt(n),g=e.getAt(i),m=a.getAt(o),v=a.getAt(u),y=a.getAt(l),M=p.x-h.x,w=g.x-h.x,x=p.y-h.y,S=g.y-h.y,_=p.z-h.z,E=g.z-h.z,A=v.x-m.x,I=y.x-m.x,D=v.y-m.y,L=y.y-m.y,N=1/(A*L-I*D),C=new s.Vector3((L*M-D*w)*N,(L*x-D*S)*N,(L*_-D*E)*N),O=new s.Vector3((A*w-I*M)*N,(A*S-I*x)*N,(A*E-I*_)*N);b.setAt(c,b.getAt(c,r).add(C)),b.setAt(f,b.getAt(f,r).add(C)),b.setAt(d,b.getAt(d,r).add(C)),T.setAt(c,T.getAt(c,r).add(O)),T.setAt(f,T.getAt(f,r).add(O)),T.setAt(d,T.getAt(d,r).add(O))}(d,E[D],E[D+1],E[D+2],v,A[D],A[D+1],A[D+2],I[D],I[D+1],I[D+2]);for(var L=new s.Vector3,N=new s.Vector3,C=new s.Vector3,O=0,R=c.length;O<R-1;++O)for(var P=y.slice(c[O],c[O+1]),z=0,j=P.length;z<j;++z){var U=P[z];M.getAt(U,L),b.getAt(U,N);var B=N.clone();B.sub(L.multiplyScalar(L.dot(N))).normalize(),C.crossVectors(M.getAt(U),B);var V=C.dot(T.getAt(U)),k=V<0?-1:1,F=new s.Vector4(B.x,B.y,B.z,k);x.setAt(U,F)}var G=new l.default.fromData(c,y,x);return new f.default((0,o.default)({},e,{tangentMap:G}))}}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a);t.default=i;var s=r(0),u=r(6),l=n(u),c=r(5),f=n(c),d=r(31),h=n(d),p=r(3),g=n(p)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var r=e.length-1,n=new Uint32Array(r-t.length+1),i=0,a=0,o=0,s=0;s<=r;++s)s!==t[i]?n[a++]=e[s]-o:(i++,o+=e[s+1]-e[s]);return{newFaceRangeOffsets:n,totalFaceValueIndicesRemoved:o}}function a(e,t,r,n){for(var i=e.length-1,a=r.length,o=new Uint32Array(a-t),s=0,u=0,l=0;l<i;++l)if(l!==n[s])for(var c=e[l],f=e[l+1],d=c;d<f;++d)o[u++]=r[d];else s++;return o}function o(e,t){var r={},n=e.faceRangeOffsets,o=i(n,t),s=o.newFaceRangeOffsets,u=o.totalFaceValueIndicesRemoved;r.faceRangeOffsets=s;for(var l=new v.default.Iterator(e);l.next();){var c=l.getId(),f=v.default.resolveMap(e,c),d=new g.default(f,{faceRangeOffsets:s,faceValueIndices:a(n,u,f.faceValueIndices,t)});v.default.assignMap(r,c,d)}var p=e.materialIds;if(p){for(var m=e.faceRangeOffsets.length-1,y=new Uint32Array(m-t.length),M=0,w=0,x=0;x<m;++x)x!==t[M]?y[w++]=p[x]:M++;r.materialIds=y}return new h.default(r)}function s(e,t){for(var r=e.positions.faceEdgeAdjacency,n=e.faceRangeOffsets.length-1,i=new Uint8Array(n),a=0,o=t.length,s=0;s<o;++s)for(var u=t[s],l=r.getNumFacesForEdgeId(u),c=0;c<l;++c){var f=r.getFaceForEdgeId(s,c);0===i[f]&&(a++,i[f]=1)}for(var d=new Uint32Array(a),h=0,p=0;p<n;++p)1===i[p]&&(d[h++]=p);return d}function u(e,t){return o(e,s(e,t))}function l(e,t){for(var r=e.positions.valueAdjacency,n=e.faceRangeOffsets.length-1,i=new Uint8Array(n),a=0,o=t.length,s=0;s<o;++s)for(var u=t[s],l=r.getNumFacesForVertex(u),c=0;c<l;++c){var f=r.getFaceForVertexId(u,c);0===i[f]&&(a++,i[f]=1)}for(var d=new Uint32Array(a),h=0,p=0;p<n;++p)1===i[p]&&(d[h++]=p);return d}function c(e,t){return o(e,l(e,t))}function f(e,t,r){return y[r](e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var d=r(5),h=n(d),p=r(6),g=n(p),m=r(31),v=n(m),y={Face:o,Edge:u,Vertex:c}},function(e,t,r){"use strict";function n(e){for(var t=e.values,r=e.faceValueIndices,n=new i.Box3,a=new i.Vector3,o=0;o<r.length;o++)t.getAt(r[o],a),n.expandByPoint(a);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0)},function(e,t,r){"use strict";function n(e,t,r,n){var a=e.faceRangeOffsets.length-1,o=new i.Vector3(1/0,1/0,1/0).multiplyScalar(n?1:-1),s=new i.Vector3,u=new i.Vector3(n?1:-1,0,0),l=new i.Ray(s,u),c=new i.Vector3,f=new i.Vector3,d=new i.Vector3,h=new i.Vector3(0,0,0);return r.reduce(function(r,o){e.positions.values.getAt(o,s),l.origin.copy(s);for(var u=0;u<a;u++)if(!(!n&&e.materialIds[u]!==t-1||n&&e.materialIds[u]!==t+1))for(var p=e.faceRangeOffsets[u],g=e.faceRangeOffsets[u+1],m=g-1,v=p;v<g;m=v++){c.set(0,0,0);var y=e.positions.faceValueIndices[m],M=e.positions.faceValueIndices[v];e.positions.values.getAt(y,f),e.positions.values.getAt(M,d);var w=!!l.intersectTriangle(d,f,h,!1,c),x=!1;if(!w){var b=(new i.Vector3).subVectors(d,f),T=(new i.Vector3).subVectors(s,f),S=(new i.Vector3).crossVectors(b,T).dot(l.direction);if(0===Math.abs(S)){var _=l.distanceSqToSegment(f,d,c);x=0===_}}(w||x)&&(c.sub(s),r[n?"min":"max"](c))}return r},o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0)},function(e,t,r){"use strict";function n(e,t,r){var n=new i.Vector3,a=e.positions.values;if(!e||a.length<1)return e||console.error("No PolyMesh passed to getCentroidByVertices"),r&&n.setFromMatrixPosition(r),n;var o=new i.Vector3;if(t&&t.length>0){for(var s=0,u=t.length;s<u;s++)a.getAt(t[s],o),n.add(o);n.divideScalar(t.length)}else{for(var l=0,c=a.length;l<c;l++)a.getAt(l,o),n.add(o);n.divideScalar(a.length)}return r&&n.applyMatrix4(r),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0)},function(e,t,r){"use strict";function n(e,t){for(var r=0,n=e.length,i=0;i<n;++i)e[i]>0&&(!t||1!==e[i])&&r++;for(var a=new Uint32Array(r),o=0,s=0;s<n;++s)e[s]>0&&(!t||1!==e[s])&&(a[o++]=s);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i){var a=(0,o.default)(e,t),s=(0,u.default)(a,r,n);return{softSelectionIndices:(0,c.default)(s,i),softSelectionWeights:s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(436),o=n(a),s=r(234),u=n(s),l=r(433),c=n(l)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o){function u(e,t,r,n){var i=void 0,a=void 0;return e!==r&&e!==n||(i=e),t!==r&&t!==n||(a=t),void 0!==i&&void 0!==a?-1:void 0!==i?i:void 0!==a?a:void 0}function c(e,t){if(1==e.edgePairs.length)return e.edgePairs[0].vertexIndex;for(var r=e.edgePairs,n=-1,i=0;i<r.length;i++)for(var a=r[i],o=a.faces,s=0;s<o.length;s++)if(t===o[s])return n=a.vertexIndex;return n}if(!r)return e;var d=r.indices,g=d.length,m=o?Math.ceil(o):1;if(0===g||0!==r.meaning)return e;for(var v=(e.faceRangeOffsets.length,e.faceRangeOffsets),y=e.positions,M=y.faceValueIndices,w=M.length,x=y.values,b=x.length,T=y.edgeVertexAdjacency,S=new a.Vector3,_=new a.Vector3,E=new a.Vector3,A={},I={},D=new a.Vector3,L=0;L<g;++L){var N=d[L],C=v[N],O=v[N+1],R=O-C,P=function(e,t){var r=e,n=v[r],i=(v[r+1],M[n]),o=M[n+1],s=M[n+2];x.getAt(i,S),x.getAt(o,_),x.getAt(s,E),_.subVectors(_,S),E.subVectors(E,S);var u=void 0===t?new a.Vector3:t;return u.crossVectors(_,E),u}(N);P.normalize(),D.add(P);for(var z=0;z<R;++z){var j=M[C+z%R],U=M[C+(z+1)%R],B=T.findEdgeId(j,U);x.getAt(U,S),x.getAt(j,_);var V=new a.Vector3;V.subVectors(_,S),V.crossVectors(V,P),V.normalize();var k=A[B];void 0===k?A[B]={edgeId:B,faceId:N,visitedEdgeCount:1,normal:V}:k.visitedEdgeCount++}}D.normalize();for(var F=0,G=0;G<g;++G)for(var H=d[G],W=v[H],Y=v[H+1],Q=Y-W,q=0;q<Q;++q){var X=M[W+q%Q],Z=M[W+(q+1)%Q],K=0===q?Q-1:q-1,J=M[W+K%Q],$=T.findEdgeId(X,Z),ee=T.findEdgeId(X,J);1===A[$].visitedEdgeCount&&F++;var te=I[X];if(void 0===te){var re={e1:$,e2:ee,faces:[H]};I[X]={vertexId:X,edgePairs:[re]}}else!function(e,t,r,n){for(var i=!1,a=e.edgePairs,o=0;o<a.length;o++){var s=a[o],l=s.e1,c=s.e2,f=u(l,c,t,r);if(void 0!==f){-1===f&&a.splice(o,1);var d=f===t?r:t;f===l&&(s.e1=d),f===c&&(s.e2=d),s.faces.push(n),i=!0;break}}i||a.push({e1:t,e2:r,faces:[n]})}(te,$,ee,H)}var ne=I;I={};for(var ie in ne){var ae=ne[ie];0!==ae.edgePairs.length&&(I[ie]=ae)}for(var oe in I){var se=I[oe],ue=se.edgePairs;!function(e){for(var t=0,r=t+1;r<e.length;r++){var n=e[t],i=e[r],a=u(n.e1,n.e2,i.e1,i.e2);if(void 0!==a){if(-1===a)e.splice(t,1),e.splice(r-1,1);else{var o=a===i.e1?i.e2:i.e1;a===n.e1&&(n.e1=o),a===n.e2&&(n.e2=o),e.splice(r,1)}r=t}r===e.length-1&&(t++,r=t)}}(ue)}for(var le=[],ce=new Uint32Array(v.length+F*m),fe=new Uint32Array(w+4*F*m),de=new f.default(a.Vector3),he=0;he<b;++he)x.getAt(he,S),de.push(S);for(var pe=0;pe<w;++pe)fe[pe]=M[pe];for(var ge=0;ge<v.length;++ge)ce[ge]=v[ge];for(var me=b,ve=i/m,ye=0,Me=0,we=0;we<m;++we)for(var xe in I)for(var be=(we+1)/m,Te=function(e){return n*Math.sqrt(e)}(be),Se=I[xe],_e=Se.edgePairs.length,Ee=0;Ee<_e;Ee++){ye=ve*(we+1);var Ae=Se.vertexId,Ie=Se.edgePairs[Ee].e1,De=Se.edgePairs[Ee].e2,Le=A[Ie].normal,Ne=A[De].normal;S.addVectors(Le,Ne),S.normalize();var Ce=S.dot(Le);ye=0!==Ce?ye/Ce:ye;var Oe=A[Ie].faceId,Re=A[De].faceId;if(Oe!==Re){var Pe=function(e,t){for(var r=[e,t],n={},i=[],a=0;a<2;++a)for(var o=r[a],s=v[o],u=v[o+1],l=u-s,c=0;c<l;++c){var f=M[s+c%l],d=n[f];void 0===d?n[f]={vertexId:f,visitedCount:1}:++d.visitedCount>1&&i.push(d.vertexId)}if(!(i.length<2)){return T.findEdgeId(i[0],i[1])}}(Oe,Re);void 0!==Pe&&(T.getVerticesForEdge(Pe,le),x.getAt(le[0],_),x.getAt(le[1],E),le[0]===Ae?S.subVectors(E,_):S.subVectors(_,E),S.normalize())}x.getAt(Ae,_);var ze=new a.Vector3;ze.copy(_),ze.addScaledVector(S,ye),ze.addScaledVector(D,Te),de.push(ze),1===Se.edgePairs.length?Se.edgePairs[0].vertexIndex=me:we===m-1&&(Se.edgePairs[Ee].vertexIndex=me),me++,Me++}me=w;var je=v.length;Me/=m;for(var Ue=0;Ue<g;++Ue)for(var Be=d[Ue],Ve=v[Be],ke=v[Be+1],Fe=ke-Ve,Ge=0;Ge<m;++Ge)for(var He=0;He<Fe;++He){var We=M[Ve+He%Fe],Ye=M[Ve+(He+1)%Fe],Qe=I[We],qe=I[Ye];if(void 0!==Qe){var Xe=c(Qe,Be);fe[Ve+He%Fe]=Xe;var Ze=T.findEdgeId(We,Ye),Ke=A[Ze];if(void 0!==Ke){var Je=Ke.visitedEdgeCount;if(!(Je>1)){var $e=c(qe,Be);0===Ge?(fe[me++]=We,fe[me++]=Ye,fe[me++]=$e-(m-1)*Me,fe[me++]=Xe-(m-1)*Me):(fe[me++]=Xe-(m-Ge)*Me,fe[me++]=$e-(m-Ge)*Me,fe[me++]=$e-(m-Ge-1)*Me,fe[me++]=Xe-(m-Ge-1)*Me),ce[je]=ce[je-1]+4,je++}}}else de.getAt(We,S),S.addScaledVector(D,n/Fe/m),de.setAt(We,S)}ce[je]=ce[je-1]+4;var et=new l.default,tt=new h.default(a.Vector3,de.length);tt.fromArray(de.toArray());var rt={faceRangeOffsets:ce,faceValueIndices:fe,values:tt};et.faceRangeOffsets=ce,et.positions=new s.default(rt);var nt=fe.length;if(e.normalMap){for(var it=e.normalMap,at=it.faceValueIndices,ot=it.values,st=new Uint32Array(ot.length),ut=0;ut<at.length;++ut)st[at[ut]]+=1;for(var lt=new Uint32Array(nt),ct=ot.length,ft=0;ft<w;++ft)lt[ft]=at[ft];for(var dt=w;dt<nt;++dt)lt[dt]=ct++;var ht=new h.default(a.Vector3,ct),pt={faceRangeOffsets:ce,faceValueIndices:lt,values:ht};et.normalMap=new s.default(pt),et.normalMap=(0,p.recalculateNormalsFromConnectivity)(et).normalMap}return e.uvMaps,new l.default(et)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(6),s=n(o),u=r(5),l=n(u),c=r(68),f=n(c),d=r(3),h=n(d),p=r(50)},function(e,t,r){"use strict";function n(e,t){for(var r=e.positions.values,n=r.length,a=t.length,o=new Float32Array(n),s=new i.Vector3,u=new i.Vector3,l=0;l<n;++l){var c=1/0;r.getAt(l,s);for(var f=0;f<a;++f)r.getAt(t[f],u),c=Math.min(c,s.distanceTo(u));o[l]=c}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(h("positions",e.positions.values,function(e){return!c(e)}),e.normalMap&&h("normalMap",e.normalMap.values,function(e){return!c(e)&&!f(e)}),e.uvMaps)for(var t=(new s.default,0);t<e.uvMaps.length;t++){var r=e.uvMaps.namesByIndex[t];h("uvMap["+r+"]",e.uvMaps.byName[r].values,function(e){return!d(e)})}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(3),o=(n(a),r(18)),s=n(o),u=r(6),l=(n(u),r(5)),c=(n(l),function(e){return isNaN(e.x)||isNaN(e.y)||isNaN(e.z)}),f=function(e){return 0===e.length()},d=function(e){return isNaN(e.x)||isNaN(e.y)},h=function(e,t,r){for(var n=new t.type,i=new t.type,a=0;a<t.length;a++)t.getAt(a,n),r(n)||t.setAt(a,i)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=t||!1,n=new Uint32Array(e.positions.faceRangeOffsets),i=new Uint32Array(e.positions.faceValueIndices),a=new Uint32Array(e.normalMap.faceValueIndices),s=[],l=[];if(e.uvMaps)for(var f=0;f<e.uvMaps.length;f++)s.push(e.uvMaps.namesByIndex[f]),l.push(new Uint32Array(e.uvMaps.byName[s[f]].faceValueIndices));for(var d=0,p=0,g=0,v=0,M=0,w=new c.default,x=1;x<n.length;x++){g=n[x],v=g-p,M=v,w.clear();for(var b=0;b<v;b++)w.set(i[p+b],p+b);if(1===(M=w.size))r&&v>1&&console.log("Face "+x+" has only 1 unique value. Reducing to a point..."),n[x]=n[x-1]+1,i[d++]=i[p];else{r&&2===v&&console.log("Face "+x+" has only 2 unique values. Reducing to a line..."),n[x]=n[x-1]+M;var T=w.entries(),S=void 0,_=!0,E=!1,A=void 0;try{for(var I,D=(0,u.default)(T);!(_=(I=D.next()).done);_=!0){S=I.value,a[d]=a[S[1]];for(var L=0;L<l.length;L++)l[L][d]=l[L][S[1]];i[d++]=S[0]}}catch(e){E=!0,A=e}finally{try{!_&&D.return&&D.return()}finally{if(E)throw A}}}p=g}r&&console.log(i.length+" index values reduced to "+d+", duplicates removed: "+(i.length-d));var N=new Uint32Array(i.subarray(0,d)),C=new Uint32Array(a.subarray(0,d)),O=new y.default({faceRangeOffsets:n,faceValueIndices:N,values:e.positions.values}),R={};R.positions=O,R.faceRangeOffsets=R.positions.faceRangeOffsets;var P=new y.default({faceRangeOffsets:R.faceRangeOffsets,faceValueIndices:C,values:e.normalMap.values});if(R.normalMap=P,e.uvMaps){for(var z=new h.default,j=0;j<e.uvMaps.length;j++){var U=e.uvMaps.namesByIndex[j],B=new y.default({faceRangeOffsets:R.faceRangeOffsets,faceValueIndices:l[j],values:e.uvMaps.byName[U].values});z.set(U,B)}R.uvMaps=z}return R.colorMaps=e.colorMaps,new m.default((0,o.default)({},e,R))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a),s=r(24),u=n(s),l=r(257),c=n(l);t.default=i;var f=r(3),d=(n(f),r(18)),h=n(d),p=r(68),g=(n(p),r(5)),m=n(g),v=r(6),y=n(v)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(e,t,r){for(var n=r.withLogging||!1,i=new Uint32Array(e.faceRangeOffsets),a=new Uint32Array(e.faceValueIndices),o=e.values,s=0,l=0,c=0,f=1,d=0,h=1;h<i.length;h++){if(s=i[h],(c=s-l)>2){i[f]=i[f-1]+c,f++;for(var p=0;p<c;p++)a[d++]=a[l+p]}else n&&console.log("Removed face "+h+" of size "+c);l=s}var g=new Uint32Array(i.subarray(0,f)),m=new Uint32Array(a.subarray(0,d));return new u.default({faceRangeOffsets:g,faceValueIndices:m,values:o})}var n={withLogging:t},i=(0,d.default)(e,r,n);return t&&console.log(e.faceRangeOffsets.length-1+" faces reduced to "+(i.faceRangeOffsets.length-1)+", faces removed: "+(e.faceRangeOffsets.length-i.faceRangeOffsets.length)),(0,c.default)(i).topologyChanged(!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(18),o=(n(a),r(5)),s=(n(o),r(6)),u=n(s),l=r(237),c=n(l),f=r(157),d=n(f)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e||!t)return e;var r=e.faceRangeOffsets,n=e.positions.faceValueIndices,i=e.positions.values,o=new Uint32Array(e.positions.faceValueIndices.length);if(r.length-1!==t.length)return console.error("Number of smoothing groups does not match number of faces: ",r.length-1,t.length),e;for(var u=e.positions.valueAdjacency,c=e.positions.faceFaceAdjacency,h=0,p=0;p<i.length;p++){for(var g=u.getNumFacesForVertex(p),m=[],v=[],y=0;y<g;y++)m.push(u.getFaceForVertexId(p,y)),v.push(-1);for(var M=0;M<m.length;M++)if(!(v[M]>-1)){var w=m[M],x=c.adjacentFacesOnVertex(m[M],p),b=[];b.push(w);for(var T=w,S=x[0],_=-1,E=0;E<x.length;E++){for(var A=0;A<m.length&&!(S===w||v[m.indexOf(S)]>-1||0==(t[T]&t[S]));A++){b.push(S);var I=c.adjacentFacesOnVertex(S,p);if(I.length<2)break;_=I[0]===T?I[1]:I[0],T=S,S=_}T=w,S=x[1],_=-1}for(var D=0;D<b.length;D++)!function(e,t,i){for(var a=[],s=r[t];s<r[t+1];s++)if(a.push(n[s]),n[s]===e)return void(o[s]=i);console.error("index "+e+" is not on face "+t,a)}(p,b[D],h),v[m.indexOf(b[D])]=h;b.length>0&&h++}}var L=new f.default({faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:o,values:new s.default(a.Vector3,h)}),N=new l.default(e);return N.normalMap=L,(0,d.recalculateNormalsFromConnectivity)(N)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(5),l=n(u),c=r(6),f=n(c),d=r(50)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,a){var u=e.positions.values,f=u.clone(),d=r.clone().multiplyScalar(Math.PI/180),p=(new s.Euler).setFromVector3(d,"ZYX"),m=(new s.Matrix4).makeRotationFromEuler(p),y=new s.Vector3(0,0,1);y.applyMatrix4(m);var M=t.dot(y),w=new s.Vector3(1,0,0);w.applyMatrix4(m);var x=(0,l.default)(i),b=void 0;b=x.length?x.length:u.length;for(var T=new s.Vector3,S=new s.Vector3,_=void 0,E=void 0,A=0;A<b;++A)(E=x.length?x[A]:A)>=u.length||(u.getAt(E,T),_=(T.dot(y)-M)/y.length(),S.copy(w),T.add(S.multiplyScalar(_*n)),f.setAt(E,T));var I=new h.default(g.default.resolveMap(e,"positions"));I.values=f;var D=(0,o.default)({},e,{positions:I});return e=(0,c.recalculateNormalsFromConnectivity)(new v.default(D))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a);t.default=i;var s=r(0),u=r(69),l=n(u),c=r(50),f=r(3),d=(n(f),r(6)),h=n(d),p=r(31),g=n(p),m=r(5),v=n(m)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){function n(e,t,r){for(var n=r.newFaceRangeOffsets,i=r.reMapping,a=e.faceRangeOffsets,o=e.faceValueIndices,u=new Uint32Array(o.length),l=0,c=0;c<i.length;c++)for(var f=a[i[c]];f<a[i[c]+1];f++)u[l++]=o[f];return new s.default({faceRangeOffsets:n,faceValueIndices:u,values:e.values})}var i=r||!1;if(!t||!e)return e;if(0===t.x&&0===t.y&&0===t.z)return e;for(var o=e.faceRangeOffsets,u=new Uint32Array(e.faceRangeOffsets.length),c=new Uint32Array(e.positions.faceValueIndices),f=e.positions.values,d=[],h=[],p=new a.Vector3,g=new a.Vector3,m=0;m<o.length-1;m++){d[m]=m;var v=o[m],y=o[m+1];p.set(0,0,0);for(var M=v;M<y;M++)f.getAt(c[M],g),p.add(g);p.multiplyScalar(1/(y-v)),h[m]=p.dot(t)}d.sort(function(e,t){return h[t]-h[e]});for(var w=0;w<d.length;w++)u[w+1]=u[w]+(o[d[w]+1]-o[d[w]]);if(i){console.log("Face List [old][new]:");for(var x=0;x<d.length;x++){for(var b=[],T=[],S=o[x];S<o[x+1];S++)b.push(c[S]);for(var _=o[d[x]];_<o[d[x]+1];_++)T.push(c[_]);console.log(b,T)}}var E={newFaceRangeOffsets:u,reMapping:d};return(0,l.default)(e,n,E).topologyChanged()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(6),s=n(o),u=r(157),l=n(u)},function(e,t,r){"use strict";function n(e,t,r,n){var i=e.boundingBox,u=i.min[t],l=i.max[t],c=l-u,f=r>c/2?c/2:r,d=c-2*f,h=(d+2*n)/d,p=new o.Vector3(1,1,1);p[t]=h;for(var g=(new o.Matrix4).makeScale(p.x,p.y,p.z),m=s.PolyMaps.resolveMap(e,"positions"),v=m.values.clone(),y=new o.Vector3,M=0;M<v.length;M+=1)m.values.getAt(M,y),y[t]<u+f?y[t]-=n:y[t]>=l-f?y[t]+=n:y.applyMatrix4(g),v.setAt(M,y);var w=new s.PolyMap((0,a.default)({},m,{values:v})),x=(0,a.default)({},e,{positions:w});return new s.PolyMesh(x)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n;var o=r(0),s=r(161)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=(0,p.default)(e),n=new Uint8Array(r.positions.faceValueIndices.length);if(r.normalMap&&y(r.normalMap,n),r.edgeCreaseWeights)for(var i=r.positions.faceEdgeAdjacency,a=0;a<i.faceEdgeIndices.length;a++){var o=i.faceEdgeIndices[a];n[a]=n[a]||(r.edgeCreaseWeights[o]>0?1:0)}if(t&&r.materialIds)for(var s=r.positions.faceEdgeAdjacency,l=0;l<s.faceEdgeIndices.length;l++){var c=s.faceEdgeIndices[l];2===s.getNumFacesForEdgeId(c)&&r.materialIds[s.getFaceForEdgeId(c,0)]!==r.materialIds[s.getFaceForEdgeId(c,1)]&&(n[l]+=1)}var f=M(r.positions,n),h=new d.default;if(h.positions=v(r.positions,null,n,f),h.faceRangeOffsets=h.positions.faceRangeOffsets,r.normalMap&&(h.normalMap=v(r.normalMap,h.faceRangeOffsets,n,f)),r.tangentMap){var g=new m.Vector4,w=new m.Vector3,x=new Uint8Array(r.tangentMap.faceValueIndices.length);y(r.tangentMap,x);for(var b=0;b<n.length;b++)x[b]=x[b]||n[b];for(var T=M(r.tangentMap,x),S=0;S<T.length;S++)T[S]=T[S]||f[S];for(var _=v(r.tangentMap,h.faceRangeOffsets,x,T),E=_.values,A=0;A<E.length;++A)E.getAt(A,g),w.copy(g),w.normalize(),g.x=w.x,g.y=w.y,g.z=w.z,g.w>=0?g.w=1:g.w=-1,E.setAt(A,g);h.tangentMap=_}if(r.uvMaps){for(var I=new u.default,D=0;D<r.uvMaps.length;D++){var L=r.uvMaps.namesByIndex[D],N=new Uint8Array(r.uvMaps.byName[L].faceValueIndices.length);y(r.uvMaps.byName[L],N);for(var C=0;C<n.length;C++)N[C]=N[C]||n[C];for(var O=M(r.uvMaps.byName[L],N),R=0;R<O.length;R++)O[R]=O[R]||f[R];I.set(L,v(r.uvMaps.byName[L],h.faceRangeOffsets,N,O))}h.uvMaps=I}return h.topologyChanged(),new d.default(h)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(3),o=n(a),s=r(18),u=n(s),l=r(6),c=n(l),f=r(5),d=n(f),h=r(437),p=n(h),g=r(159),m=(n(g),r(0)),v=function(e,t,r,n){for(var i=e.edgeVertexAdjacency,a=e.valueAdjacency,s=e.faceEdgeAdjacency,u=e.values,l=u.type,f=u.length,d=e.faceRangeOffsets,h=d.length-1,p=e.faceValueIndices,g=i.getNumEdges(),m=p.length,v=new Uint8Array(e.values.length),y=0;y<n.length;y++)v[p[y]]=n[y];if(!t){t=new Uint32Array(m+1);for(var M=0;M<t.length;M++)t[M]=4*M}for(var w=4*m,x=new Uint32Array(w),b=f,T=b+g,S=f+g+h,_=new o.default(l,S),E=new Uint8Array(f),A=new Uint8Array(f),I=new Uint8Array(g),D=new Uint8Array(g),L=new l,N=new l,C=new l,O=new l,R=new l,P=new l,z=0,j=new Uint8Array(g),U=new Uint8Array(f),B=0;B<h;B++){var V=d[B],k=d[B+1],F=k-V,G=p[V],H=p[V+1%F],W=i.findEdgeId(G,H);L.multiplyScalar(0);for(var Y=0;Y<F;Y++){var Q=G;G=H,H=p[V+(Y+2)%F];var q=W;W=i.findEdgeId(G,H),I[q]++,A[Q]++,0===D[q]&&(D[q]=1,E[Q]++,E[G]++,r[V+Y]&&(j[q]=1,U[Q]++,U[G]++)),u.getAt(Q,N),L.add(N),x[z++]=b+q,x[z++]=G,x[z++]=b+W,x[z++]=T+B}L.multiplyScalar(1/F),_.setAt(T+B,L)}for(var X=0;X<g;X++){var Z=i.edgeVertices[2*X],K=i.edgeVertices[2*X+1];u.getAt(Z,O),u.getAt(K,N),O.add(N);var J=2,$=s.edgeFaceCounts[X];if(!j[X]&&2===$)for(var ee=0;ee<$;ee++){var te=s.edgeFaceIndices[2*X+ee];_.getAt(T+te,N),O.add(N),J++}O.multiplyScalar(1/J),_.setAt(b+X,O)}for(var re=0;re<f;re++){u.getAt(re,C);var ne=E[re]!==A[re];if(0!==E[re]&&v[re]<1){var ie=a.valueEdgeOffsets[re],ae=a.valueEdgeOffsets[re+1],oe=ae-ie;R.multiplyScalar(0);var se=0;if(ne||U[re]){for(var ue=0;ue<oe;ue++){var le=a.valueEdgeIndices[ie+ue];if(j[le]){var ce=i.edgeVertices[2*le];ce===re&&(ce=i.edgeVertices[2*le+1]),u.getAt(ce,N),R.add(N),se++}}C.multiplyScalar(.75).add(R.multiplyScalar(.25/se))}else{for(var fe=0;fe<oe;fe++){var de=a.valueEdgeIndices[ie+fe],he=i.edgeVertices[2*de];he===re&&(he=i.edgeVertices[2*de+1]),u.getAt(he,N),R.add(N),se++}R.multiplyScalar(1/(se*se));var pe=a.valueFaceOffsets[re],ge=a.valueFaceOffsets[re+1],me=ge-pe;P.multiplyScalar(0);for(var ve=0,ye=0;ye<me;ye++){var Me=a.valueFaceIndices[pe+ye];_.getAt(T+Me,N),P.add(N),ve++}P.multiplyScalar(1/(ve*ve)),C.multiplyScalar((ve-2)/ve),C.add(R),C.add(P)}}_.setAt(re,C)}var we={faceRangeOffsets:t,faceValueIndices:x,values:_};return new c.default(we)},y=function(e,t){for(var r=e.faceEdgeAdjacency,n=0;n<r.faceEdgeIndices.length;n++){var i=r.faceEdgeIndices[n];t[n]=2!==r.edgeFaceCounts[i]?1:0}},M=function(e,t){for(var r=e.edgeVertexAdjacency,n=new Uint8Array(e.faceValueIndices.length),i=new Uint8Array(e.values.length),a=new Uint8Array(e.values.length),o=new Uint8Array(r.getNumEdges()),s=0;s<e.faceRangeOffsets.length-1;s++)for(var u=e.faceRangeOffsets[s],l=e.faceRangeOffsets[s+1],c=l-u,f=e.faceValueIndices[u],d=0;d<c;d++){var h=f;f=e.faceValueIndices[u+(d+1)%c];var p=r.findEdgeId(h,f);0===o[p]&&(o[p]=1,t[u+d]&&(i[h]++,i[f]++),a[h]++,a[f]++)}for(var g=0;g<n.length;g++){var m=e.faceValueIndices[g];(i[m]>2||i[m]-a[m]==0)&&(n[g]=1)}return n}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n){var i=n?new d.default((0,v.default)(e,t,!1,!0)):e,a=new d.default,o=i.positions;if(a.positions=y(o),a.faceRangeOffsets=o.faceRangeOffsets,i.normalMap){var s=i.normalMap;a.normalMap=y(s)}if(i.uvMaps){for(var l=new u.default,c=0;c<i.uvMaps.length;c++){var f=i.uvMaps.namesByIndex[c];l.set(f,y(i.uvMaps.byName[f]))}a.uvMaps=l}var h=a.positions;if(a.positions=M(h,t,!1),a.normalMap){var p=a.normalMap;a.normalMap=M(p,t,!0)}if(r||n){var m=[a,i];return(0,g.default)(m,null,null)}return new d.default(a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(3),o=n(a),s=r(18),u=n(s),l=r(6),c=n(l),f=r(5),d=n(f),h=r(15),p=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(h),r(103)),g=n(p),m=r(238),v=n(m),y=function(e){for(var t=e.faceRangeOffsets,r=t.length-1,n=e.faceValueIndices,i=n.length,a=new Uint32Array(i),o=0;o<r;++o)for(var s=t[o],u=t[o+1],l=u-s,f=0;f<l;++f)a[s+f]=n[u-f-1];var d={faceRangeOffsets:t,faceValueIndices:a,values:e.values};return new c.default(d)},M=function(e,t,r){for(var n=e.values,i=n.type,a=n.length,s=new o.default(i,a),u=new i,l=new i,f=0;f<a;++f){n.getAt(f,u);var d=t.distanceToPoint(u);l.copy(t.normal),r?(u.reflect(l),s.setAt(f,u)):(l.multiplyScalar(-2*d),u.add(l),s.setAt(f,u))}var h={faceRangeOffsets:e.faceRangeOffsets,faceValueIndices:e.faceValueIndices,values:s};return new c.default(h)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,a,o){var u=a.faceValueIndices,c=e.edgeVertexAdjacency,d=e.faceRangeOffsets,h=d.length-1,p=e.faceValueIndices,m=e.values,v=m.type,M=new Uint32Array(c.getNumEdges()),w=new Uint32Array(4*d.length),x=new Uint8Array(4*d.length),b=new Uint32Array(4*p.length),T=new f.default(v),S=new v,_=new v,E=new v,A=new v,I=new v,D=0,L=0,N=0,C=0,O=0;w[D++]=0;for(var R=0;R<m.length;++R)m.getAt(R,E),T.push(E),++O;if(n===y.TessellationTypes.vertex)for(var P=0;P<h;++P){var z=d[P],j=d[P+1],U=j-z,B=p[z],V=p[z+1];t[P]===y.TessellateConstants.SELECTED&&(S.set(0,0,0),C=T.push(S)-1,++O);for(var k=0;k<U;++k){var F=B;B=V,V=p[z+(k+2)%U],b[L++]=F,t[P]===y.TessellateConstants.SELECTED&&(m.getAt(F,I),S.add(I),b[L++]=B,b[L++]=C,x[D-1]=y.TessellateConstants.SELECTED,w[D++]=L)}t[P]===y.TessellateConstants.SELECTED&&(S.multiplyScalar(1/U),T.setAt(C,S)),t[P]!==y.TessellateConstants.SELECTED&&(w[D++]=L)}else for(var G=0;G<h;++G){var H=d[G],W=d[G+1],Y=W-H;t[G]===y.TessellateConstants.SELECTED&&(S.set(0,0,0),C=T.push(S)-1,++O);for(var Q=H,q=H+1,X=0;X<Y;++X){var Z=Q;Q=q,q=H+(X+2)%Y;var K=p[Z],J=p[Q],$=u[Z],ee=u[Q],te=c.findEdgeId(K,J),re=i.findEdgeId($,ee);if(b[L++]=K,t[G]===y.TessellateConstants.SELECTED){m.getAt(K,I),S.add(I);var ne=p[H+(X+Y-1)%Y],ie=c.findEdgeId(ne,K);M[te]===y.TessellateConstants.UNPROCESSED?(m.getAt(K,E),m.getAt(J,A),_.addVectors(E,A),_.multiplyScalar(.5),N=T.push(_)-1,M[te]=N+1,b[L++]=N,++O):(N=M[te]-1,b[L++]=N),b[L++]=C,M[ie]===y.TessellateConstants.UNPROCESSED?(m.getAt(ne,E),m.getAt(K,A),_.addVectors(E,A),_.multiplyScalar(.5),N=T.push(_)-1,M[ie]=N+1,b[L++]=N,++O):(N=M[ie]-1,b[L++]=N),x[D-1]=y.TessellateConstants.SELECTED,w[D++]=L}t[G]!==y.TessellateConstants.SELECTED&&r[re]===y.TessellateConstants.SELECTED&&(M[te]===y.TessellateConstants.UNPROCESSED?(m.getAt(K,E),m.getAt(J,A),_.addVectors(E,A),_.multiplyScalar(.5),N=T.push(_)-1,M[te]=N+1,b[L++]=N,++O):(N=M[te]-1,b[L++]=N))}t[G]===y.TessellateConstants.SELECTED&&(S.multiplyScalar(1/Y),T.setAt(C,S)),t[G]!==y.TessellateConstants.SELECTED&&(w[D++]=L)}for(var ae=o||new Uint32Array(D),oe=new Uint8Array(D),se=new Uint32Array(L),ue=new l.default(v,O+1),le=0;le<D;++le)oe[le]=x[le],o||(ae[le]=w[le]);for(var ce=0;ce<L;++ce)se[ce]=b[ce];for(var fe=0;fe<O+1;++fe)T.getAt(fe,I),v===s.Vector3&&o&&I.normalize(),ue.setAt(fe,I);var de={faceRangeOffsets:ae,faceValueIndices:se,values:ue};return o?new g.default(de):{polyMap:new g.default(de),selection:oe}}function a(e,t){for(var r=e.polyMesh,n=e.selection,a=new v.default,o=r.faceRangeOffsets,s=r.positions,u=s.faceValueIndices,l=s.edgeVertexAdjacency,c=new Uint8Array(l.getNumEdges()),f=0;f<n.length;++f)if(n[f]===y.TessellateConstants.SELECTED)for(var d=o[f],p=o[f+1],g=p-d,m=u[d],M=u[d+1],w=0;w<g;++w){var x=m;m=M,M=u[d+(w+2)%g];var b=l.findEdgeId(x,m);c[b]=y.TessellateConstants.SELECTED}var T=i(s,n,c,t,l,s);if(a.positions=T.polyMap,a.faceRangeOffsets=a.positions.faceRangeOffsets,r.normalMap&&(a.normalMap=i(r.normalMap,n,c,t,l,s,a.faceRangeOffsets)),r.uvMaps){for(var S=new h.default,_=0;_<r.uvMaps.length;++_){var E=r.uvMaps.namesByIndex[_];S.set(E,i(r.uvMaps.byName[E],n,c,t,l,s,a.faceRangeOffsets))}a.uvMaps=S}return{polyMesh:new v.default(a),selection:T.selection}}function o(e,t,r,n){for(var i={polyMesh:e,selection:t},o=0;o<n;++o){var s=a(i,r);i.polyMesh=s.polyMesh,i.selection=s.selection}return new v.default(i.polyMesh)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=r(0),u=r(3),l=n(u),c=r(68),f=n(c),d=r(18),h=n(d),p=r(6),g=n(p),m=r(5),v=n(m),y=r(225)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o){function u(e){m[O]=e,O++}function c(e){v.setAt(R,e),R++}function d(e,t){M.setAt(P,e),y.setAt(P,t),P++}n=Math.floor(n)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var p=new Uint32Array(n*i*2+n*o*2+i*o*2+1),m=new Uint32Array(4*(n*i*2+n*o*2+i*o*2)),v=new s.default(a.Vector3,(n+1)*(i+1)*2+(n+1)*(o+1)*2+(i+1)*(o+1)*2),y=new s.default(a.Vector3,(n+1)*(i+1)*2+(n+1)*(o+1)*2+(i+1)*(o+1)*2),M=new s.default(a.Vector2,(n+1)*(i+1)*2+(n+1)*(o+1)*2+(i+1)*(o+1)*2),w=e/n,x=t/i,b=r/o,T=e/2,S=t/2,_=r/2,E=void 0,A=void 0,I=void 0,D=0,L=new a.Vector3,N=new a.Vector3,C=new a.Vector2,O=0;for(I=0,E=0;I<p.length;I++,E+=4)p[I]=E;for(I=0;I<2;I++){for(A=0;A<i;A++)for(E=0;E<n;E++)u(D+A*(n+1)+E),u(D+A*(n+1)+E+1),u(D+(A+1)*(n+1)+E+1),u(D+(A+1)*(n+1)+E);D+=(n+1)*(i+1)}for(A=0;A<2;A++){for(E=0;E<n;E++)for(I=0;I<o;I++)u(D+E*(o+1)+I),u(D+E*(o+1)+I+1),u(D+(E+1)*(o+1)+I+1),u(D+(E+1)*(o+1)+I);D+=(n+1)*(o+1)}for(E=0;E<2;E++){for(I=0;I<o;I++)for(A=0;A<i;A++)u(D+I*(i+1)+A),u(D+I*(i+1)+A+1),u(D+(I+1)*(i+1)+A+1),u(D+(I+1)*(i+1)+A);D+=(o+1)*(i+1)}var R=0,P=0;for(I=-1;I<2;I+=2)for(A=0;A<i+1;A++){var z=A*x-S;for(E=0;E<n+1;E++){var j=-I*E*w+I*T;L.set(j,z,-1*I*_),c(L),N.set(0,0,-1*I),C.set(E/n,A/i),d(C,N)}}for(A=-1;A<2;A+=2)for(E=0;E<n+1;E++){var U=E*w-T;for(I=0;I<o+1;I++){var B=-A*I*b+A*_;L.set(U,-1*A*S,B),c(L),N.set(0,-1*A,0),C.set(E/n,(o-I)/o),d(C,N)}}for(E=-1;E<2;E+=2)for(I=0;I<o+1;I++){var V=-1*E*I*b+E*_;for(A=0;A<i+1;A++){var k=A*x-S;L.set(-1*E*T,k,V),c(L),N.set(-1*E,0,0),C.set((o-I)/o,A/i),d(C,N)}}var F=new h.default({faceRangeOffsets:p,faceValueIndices:m,values:v}),G=new h.default({faceRangeOffsets:p,faceValueIndices:m,values:y}),H=new h.default({faceRangeOffsets:p,faceValueIndices:m,values:M}),W=new l.default;W.set("default",H);var Y={faceRangeOffsets:p,positions:F,normalMap:G,uvMaps:W,colorMaps:new l.default},Q=new f.default(Y);return(0,g.default)(Q)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(18),l=n(u),c=r(5),f=n(c),d=r(6),h=n(d),p=r(160),g=n(p)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o){e=void 0!==e?e:20,t=void 0!==t?t:100,r=Math.max(1,Math.floor(r||8)),n=Math.max(1,Math.floor(n||8)),i=a.Math.clamp(i||0,0,2*Math.PI),o=a.Math.clamp(o||2*Math.PI,0,2*Math.PI-i);for(var u=t/n,c=t/2,f=new a.Vector3,d=new a.Vector3,h=n<3?2:n,p=1/h,g=new s.default(a.Vector3,n+1+2*(h+1)),m=new s.default(a.Vector3,n+1+2*(h+1)),v=0,y=h;v<=y;v++){var M=Math.PI-v*(Math.PI/2)*p;f.set(0,-e*Math.cos(M)+c,e*Math.sin(M)),d.set(0,-Math.cos(M),Math.sin(M)),g.setAt(v,f),m.setAt(v,d.normalize())}d.set(0,0,1);for(var w=0,x=n;w<=x;w++)f.set(0,c-w*u,e),g.setAt(w+h+1,f),m.setAt(w+h+1,d);for(var b=0,T=h;b<=T;b++){var S=Math.PI/2-b*(Math.PI/2)*p;f.set(0,-e*Math.cos(S)-c,e*Math.sin(S)),d.set(0,-Math.cos(S),Math.sin(S)),g.setAt(b+h+n+2,f),m.setAt(b+h+n+2,d.normalize())}var _=r<3?3:r;return(0,l.default)(g,m,h,_,i,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(449),l=n(u)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o){n=n||12,i=i||0,o=o||2*Math.PI;var u=new s.default(a.Vector3,(n+1)*e.length),c=new s.default(a.Vector3,(n+1)*t.length),d=0,p=new Uint32Array(n*(e.length-1)+1),m=new Uint32Array(n*(e.length-1)*4),v=new s.default(a.Vector2,(n+1)*e.length),y=0,M=e.length-2*(r+1)-1,w=1/M,x=1/n;p[0]=0;for(var b=1,T=new a.Vector2,S=new a.Vector3,_=new a.Vector3,E=new a.Matrix4,A=new a.Matrix3,I=0,D=n;I<=D;I++){var L=i+I*x*o;E.makeRotationY(L),A.getNormalMatrix(E);for(var N=0,C=e.length;N<C;N++)e.getAt(N,S),t.getAt(N,_),S.applyMatrix4(E),_.applyMatrix3(A),u.setAt(d,S),c.setAt(d++,_)}for(var O=0,R=n;O<=R;O++){for(var P=O*x,z=0,j=r+1;z<j;z++){var U=1-z/r;T.set(P,U),v.setAt(y++,T)}for(var B=0,V=M+1;B<V;B++){var k=1-B*w;T.set(P,k),v.setAt(y++,T)}for(var F=0,G=r+1;F<G;F++){var H=1-F/r;T.set(P,H),v.setAt(y++,T)}}for(var W=e.length,Y=0,Q=0,q=n;Q<q;Q++)for(var X=0,Z=e.length-1;X<Z;X++){var K=X+W*Q,J=K,$=K+W,ee=K+1+W,te=K+1;m[Y++]=te,m[Y++]=ee,m[Y++]=$,m[Y++]=J,p[b++]=Y}var re=new h.default({faceRangeOffsets:p,faceValueIndices:m,values:u}),ne=new h.default({faceRangeOffsets:p,faceValueIndices:m,values:c}),ie=new h.default({faceRangeOffsets:p,faceValueIndices:m,values:v}),ae=new l.default;ae.set("default",ie);var oe=new f.default;return oe.faceRangeOffsets=re.faceRangeOffsets,oe.positions=re,oe.normalMap=ne,oe.uvMaps=ae,(0,g.default)(new f.default(oe))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(18),l=n(u),c=r(5),f=n(c),d=r(6),h=n(d),p=r(102),g=n(p)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){e%=2*Math.PI;var n=void 0,i=void 0;return n=(r-t)%(2*Math.PI),n<0&&(n+=2*Math.PI),i=(e-t)%(2*Math.PI),i<0&&(i+=2*Math.PI),n<1e-5?0:i/n}function a(e,t,r,n,i){return i||(i=new s.Vector3),1===e&&(n=-n*n*(2*n-3)),i.lerpVectors(t,r,n),i}function o(e,t,r,n,o,u){r=r||12,n=n||0,o=o||2*Math.PI;for(var c=e[0].mesh.faceRangeOffsets[1],d=new l.default(s.Vector3,(r+1)*c),p=new Uint32Array(r*c+1),m=new Uint32Array(r*c*4),M=new l.default(s.Vector3,m.length),w=new l.default(s.Vector2,m.length),x=new Uint32Array(m.length),b=void 0,T=void 0,S=!1,_=0;_<e.length-1;++_)if(b=_,T=(_+1)%e.length,n>=e[b].locationAngle&&n<e[T].locationAngle){S=!0;break}S||(b=e.length-1,T=0);for(var E=1/c,A=1/r,I=void 0,D=void 0,L=new s.Vector2,N=new s.Vector3,C=new s.Vector3,O=new s.Vector3,R=new s.Matrix4,P=0,z=0;z<=r;z++){var j=n+z*A*o;R.makeRotationY(j);for(var U=i(j,e[b].locationAngle,e[T].locationAngle);U>1;)b=T,T=(T+1)%e.length,U=i(j,e[b].locationAngle,e[T].locationAngle);for(var B=0;B<c;B++)I=e[b].mesh.positions,D=e[T].mesh.positions,I.values.getAt(I.faceValueIndices[B],N),D.values.getAt(D.faceValueIndices[B],C),a(u,N,C,U,O),O.x+=t,O.applyMatrix4(R),d.setAt(P++,O)}p[0]=0;for(var V=1,k=0,F=0,G=0;G<r;G++)for(var H=0;H<c;H++){var W=H+c*G,Y=W,Q=W+c;H===c-1&&(W-=c);var q=W+1+c,X=W+1;m[k++]=Y,m[k++]=Q,m[k++]=q,m[k++]=X,p[V++]=k;var Z=G*A,K=H*E,J=Z+A,$=K+E;L.set(Z,K),w.setAt(F,L),L.set(J,K),w.setAt(F+1,L),L.set(J,$),w.setAt(F+2,L),L.set(Z,$),w.setAt(F+3,L),x[F]=F++,x[F]=F++,x[F]=F++,x[F]=F++}var ee=new g.default({faceRangeOffsets:p,faceValueIndices:m,values:d}),te=new g.default({faceRangeOffsets:p,faceValueIndices:m,values:M}),re=new g.default({faceRangeOffsets:p,faceValueIndices:x,values:w}),ne=new f.default;ne.set("default",re);var ie=new h.default;return ie.faceRangeOffsets=ee.faceRangeOffsets,ie.positions=ee,ie.normalMap=te,ie.uvMaps=ne,(0,y.recalculateNormalsFromConnectivity)((0,v.default)(ie))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var s=r(0),u=r(3),l=n(u),c=r(18),f=n(c),d=r(5),h=n(d),p=r(6),g=n(p),m=r(102),v=n(m),y=r(50)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o){r=r||12,n=n||0,i=i||2*Math.PI;var u=new s.default(a.Vector3,(r+1)*e.length),c=new s.default(a.Vector3,(r+1)*t.length),d=0,p=new Uint32Array(r*(e.length-1)+1),m=new Uint32Array(r*(e.length-1)*4),v=new s.default(a.Vector2,(r+1)*e.length),y=0,M=o?1/(e.length-1):1/(e.length-5),w=1/r;p[0]=0;for(var x=1,b=new a.Vector2,T=new a.Vector3,S=new a.Vector3,_=(new a.Matrix4).identity(),E=(new a.Matrix3).identity(),A=0,I=r;A<=I;A++){var D=n+A*w*i;_.makeRotationY(D),E.getNormalMatrix(_);for(var L=0,N=e.length;L<N;L++)e.getAt(L,T),t.getAt(L,S),T.applyMatrix4(_),S.applyMatrix3(E),u.setAt(d,T),c.setAt(d++,S)}for(var C=0,O=r;C<=O;C++){var R=C*w;if(!o)for(var P=0;P<2;P++){var z=P;0===z?b.set(0,z):b.set(R,z),v.setAt(y++,b)}for(var j=0,U=o?e.length:e.length-4;j<U;j++){var B=j*M;b.set(R,B),v.setAt(y++,b)}if(!o)for(var V=0;V<2;V++){var k=V;1===k?b.set(0,k):b.set(R,k),v.setAt(y++,b)}}for(var F=e.length,G=0,H=0,W=r;H<W;H++)for(var Y=0,Q=e.length-1;Y<Q;Y++){var q=Y+F*H,X=q,Z=q+F,K=q+1+F,J=q+1;m[G++]=X,m[G++]=Z,m[G++]=K,m[G++]=J,p[x++]=G}var $=new h.default({faceRangeOffsets:p,faceValueIndices:m,values:u}),ee=new h.default({faceRangeOffsets:p,faceValueIndices:m,values:c}),te=new h.default({faceRangeOffsets:p,faceValueIndices:m,values:v}),re=new l.default;re.set("default",te);var ne=new f.default;return ne.faceRangeOffsets=$.faceRangeOffsets,ne.positions=$,ne.normalMap=ee,ne.uvMaps=re,(0,g.default)(new f.default(ne))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(18),l=n(u),c=r(5),f=n(c),d=r(6),h=n(d),p=r(102),g=n(p)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n){e=e||50,t=Math.max(1,Math.floor(t||8));var i=e/t;r=a.Math.clamp(r||0,0,2*Math.PI),n=a.Math.clamp(n||2*Math.PI,0,2*Math.PI-r);for(var o=new s.default(a.Vector3,t+1),u=new s.default(a.Vector3,t+1),c=new a.Vector3(0,1,0),f=new a.Vector3,d=0,h=t;d<=h;d++)f.set(e-d*i,0,0),o.setAt(d,f),u.setAt(d,c);var p=t<3?3:t;return(0,l.default)(o,u,p,r,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(125),l=n(u)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n){r=Math.floor(r),n=Math.floor(n);var i=new Uint32Array(r*n+1),o=new Uint32Array(r*n*4),u=new s.default(a.Vector3,(r+1)*(n+1)),c=new s.default(a.Vector3,(r+1)*(n+1)),d=new s.default(a.Vector2,(r+1)*(n+1)),p=e/r,g=t/n,m=e/2,v=t/2,y=void 0,M=void 0,w=new a.Vector3,x=new a.Vector3(0,1,0),b=new a.Vector2;for(y=0,M=0;y<i.length;y++,M+=4)i[y]=M;for(y=0;y<n;y++)for(M=0;M<r;M++)o[4*(y*r+M)]=y*(r+1)+M,o[4*(y*r+M)+1]=y*(r+1)+M+1,o[4*(y*r+M)+2]=(y+1)*(r+1)+M+1,o[4*(y*r+M)+3]=(y+1)*(r+1)+M;for(y=0;y<n+1;y++){var T=y*g-v;for(M=0;M<r+1;M++){var S=M*p-m;w.set(S,0,-T),u.setAt(y*(r+1)+M,w),c.setAt(y*(r+1)+M,x),b.set(M/r,y/n),d.setAt(y*(r+1)+M,b)}}var _=new h.default({faceRangeOffsets:i,faceValueIndices:o,values:u}),E=new h.default({faceRangeOffsets:i,faceValueIndices:o,values:c}),A=new h.default({faceRangeOffsets:i,faceValueIndices:o,values:d}),I=new l.default;I.set("default",A);var D={faceRangeOffsets:i,positions:_,normalMap:E,uvMaps:I,colorMaps:new l.default};return new f.default(D)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(18),l=n(u),c=r(5),f=n(c),d=r(6),h=n(d)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o){if(!e)return null;r=r*Math.PI/180,n=n*Math.PI/180;for(var u=(new a.Matrix4).getInverse(i,!0).multiply(o),c=e.positions,f=c.values,d=f.length,h=c.faceRangeOffsets,p=c.faceValueIndices,g=new s.default(a.Vector3,d),m=new s.default(a.Vector3,d+1),v=new s.default(a.Vector3,d+1),y=new a.Vector3,M=new a.Vector3,w=new a.Vector3,x=h[0],b=h[1],T=x;T<b;++T){var S=p[T];f.getAt(S,y),g.setAt(T,y)}for(var _=0;_<=d;++_)g.getAt(_%d,y),y.applyMatrix4(u),m.setAt(_,y);for(var E=new a.Vector3,A=0;E.length()<1e-6&&A<d-2;++A)M=m.getAt(A+1).clone().sub(m.getAt(A)),w=m.getAt(A+2).clone().sub(m.getAt(A+1)),E.crossVectors(M,w);for(var I=new a.Vector3,D=new a.Vector3,L=new a.Vector3,N=new a.Vector3,C=0;C<d+1;++C)m.getAt((C-1+m.length)%m.length,I),m.getAt(C,D),m.getAt((C+1)%m.length,L),M.subVectors(D,I),w.subVectors(L,D),M.cross(E),w.cross(E),N.addVectors(M,w).normalize(),v.setAt(C,N);return(0,l.default)(m,v,t,r,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(125),l=n(u)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o){var s=i/r,u=s-o,l=a(e,t,u,n),c=new v.Vector3;c.setComponent(t,s*y);var f=(new v.Quaternion).setFromEuler((new v.Euler).setFromVector3(c,"ZYX")),d=(0,m.default)(l,r,new v.Vector3,f,new v.Vector3(1,1,1)),h=d.meshArray,g=d.transforms;return(0,p.default)(h,g)}function a(e,t,r,n){var i=e.positions.values.clone(),a=new u.default(e.positions,{values:i});e=new c.default(e,{positions:a});var s=o(t,r),l=e.boundingBox,f=l.max.getComponent(s.scaleAxis)-l.min.getComponent(s.scaleAxis),h=n*r*y/f,p=new v.Vector3(1,1,1);p.setComponent(s.scaleAxis,h);for(var g=(new v.Matrix4).scale(p),m=e.positions.values,M=new v.Vector3,w=0;w<m.length;++w)m.getAt(w,M),M.applyMatrix4(g),m.setAt(w,M);e=(0,d.default)(e,s.bendAxis+1,s.bendAngleDeg,new v.Vector3,new v.Vector3,!1);var x=new v.Vector3;x.setComponent(s.translateAxis,n),m=e.positions.values;for(var b=0;b<m.length;++b)m.getAt(b,M),M.add(x),m.setAt(b,M);return e}function o(e,t){var r={};switch(e){case i.AxisTypes.X:r.bendAxis=0,r.scaleAxis=1,r.translateAxis=2,r.bendAngleDeg=t;break;case i.AxisTypes.Z:r.bendAxis=2,r.scaleAxis=1,r.translateAxis=0,r.bendAngleDeg=-t;break;default:r.bendAxis=1,r.scaleAxis=2,r.translateAxis=0,r.bendAngleDeg=-t}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var s=r(6),u=n(s),l=r(5),c=n(l),f=r(158),d=n(f),h=r(103),p=n(h),g=r(235),m=n(g),v=r(0),y=Math.PI/180;i.AxisTypes={X:0,Y:1,Z:2}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o,u){e=e||50,t=Math.max(3,Math.floor(t||8)),r=Math.max(2,Math.floor(r||6)),n=a.Math.clamp(n||0,0,2*Math.PI),i=a.Math.clamp(i||2*Math.PI,0,2*Math.PI-n),o=a.Math.clamp(o||0,0,Math.PI),u=a.Math.clamp(u||Math.PI,0,Math.PI-o);for(var c=1/r,f=new s.default(a.Vector3,r+1),d=new s.default(a.Vector3,r+1),h=new a.Vector3,p=0,g=r;p<=g;p++){var m=o+p*c*u;h.set(e*Math.sin(m),-e*Math.cos(m),0),f.setAt(p,h),d.setAt(p,h.normalize())}return(0,l.default)(f,d,t,n,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(125),l=n(u)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,i,o,u,c){r=Math.floor(r)||1,n=Math.floor(n)||1,e=e||100,t=t||40,r=Math.max(r||8,3),n=Math.max(n||6,3),i=a.Math.clamp(i||0,0,2*Math.PI),o=a.Math.clamp(o||2*Math.PI,0,2*Math.PI-i),u=a.Math.clamp(u||0,0,2*Math.PI),c=a.Math.clamp(c||2*Math.PI,0,2*Math.PI-u);for(var f=1/n,d=new s.default(a.Vector3,n+1),h=new s.default(a.Vector3,n+1),p=new a.Vector3,g=new a.Vector3,m=0,v=n;m<=v;m++){var y=u+m*f*c;p.set(e+t*Math.cos(y),t*Math.sin(y),0),g.set(Math.cos(y),Math.sin(y),0),d.setAt(m,p),h.setAt(m,g.normalize())}return(0,l.default)(d,h,r,i,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(125),l=n(u)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){this.mesh=e,this.triangulation=null,this.renderIndexing=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(34),o=n(a),s=r(3),u=n(s),l=r(156),c=n(l),f=r(124),d=n(f),h=r(419),p=n(h),g=r(230),m=n(g),v=r(420);n(v);i.prototype={constructor:i,reindexForRendering:function(e){if(null!==this.triangulation)throw Error("Reindex must come before triangulation!");return this.renderIndexing=new p.default(this.mesh,e),this},triangulate:function(e){var t=e||m.default;return this.triangulation=new t(this.mesh,this.renderIndexing),this},getNumFaces:function(){var e=this.triangulation;return null===e?this.mesh.getNumFaces():e.numTriangles},getNumFaceVertices:function(){return null===this.triangulation?this.mesh.getNumFaceVertices():3*this.getNumFaces()},getNumMapValues:function(e){var t=this.renderIndexing;return null!==t?t.numVertices:this.mesh.getMapById(e).values.length},getFaceArities:function(e,t,r){if(null!==this.triangulation)throw Error("No face arity export for triangular meshes!");var n=new c.default(this.getNumFaces(),e,t,r),i=this.mesh.faceRangeOffsets,a=i.length;if(a>1)for(var o=i[0],s=1;s!==a;++s){var u=i[s];n.setAt(s-1,u-o),o=u}return n.data},getMaterialIds:function(e,t,r){var n=null,i=this.mesh.materialIDs;if(null===i)return null;if(null===this.triangulation){var a=t||0,o=r||1,s=e||i.data.constructor;if(0===a&&1===o&&s===i.data.constructor)return i;n=new c.default(i.length,s,a,o),n.fromArray(i)}else this.triangulation.translateMaterialIds(i,n);return n.data},getMapValues:function(e,t,r,n){var i=null,a=this.renderIndexing,o=this.mesh.getMapById(e).values,s=o.type,u=r||0,l=n||s.InstanceScalarSize,c=t||o.data.constructor;if(null===a&&0===u&&l===s.InstanceScalarSize&&c===o.data.constructor)i=o;else{var f=null===a?o.length:a.numVertices;i=this._offsetObjects(s,f,c,u,l),null!==a?a.getMapValues(e,i):i.fromArray(o.data)}return i.data},getGroups:function(){return this.triangulation.groups},getMapIndices:function(e,t,r,n){var i=null,a=this.renderIndexing,o=this.triangulation,s=null!==a?a.renderIndices:this.mesh.getMapById(e).faceValueIndices;if(null===o){var u=r||0,l=n||1,f=t||s.constructor;if(0===u&&1===l&&f===s.constructor)return s;i=new c.default(s.length,f,u,l),i.fromArray(s)}else i=new c.default(3*this.triangulation.numTriangles,t,r,n),o.translateIndices(s,i);return i.data},getUnindexedMapValues:function(e,t,r,n,i){var a=null,o=this.mesh.getMapById(e),s=o.values,u=s.type,l=o.faceValueIndices,c=this.triangulation;if(t&&null!==c)a=this._offsetObjects(u,3*c.numTriangles,r||s.data.constructor,n,i),c.translateToUnindexedValues(s,a,l);else{a=this._offsetObjects(u,l.length,r||s.data.constructor,n,i);for(var f=s.newRangeArray(1),d=0,h=l.length;d!==h;++d)a.arrayToRange(s.rangeToArray(l[d],1,f),d,1)}return a.data},getTriangulatingIndices:function(e,t,r){var n=this.triangulation;if(null===n)return null;var i=new c.default(this.getNumFaceVertices(),e,t,r),a=this.getNumFaceVertices(),o=d.default.identityForReading(a);return n.translateIndices(o,i),i.data},_offsetObjects:function(e,t,r,n,i){var a=n||0,s=i||e.InstanceScalarSize,l=a/s|0,c=(l+t)*s,f=o.default.maybeCreate(r,c),d=0===a?f:f.subarray(a);return new u.default(e,null,d,s)}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){this.defaultFaceArity=3,this.collapsePositions=!0,this.collapseMapValues=!0,this.faceArities=null,this.materialIds=null,this.mapIds=[],this.mapValues={},this.mapIndices={},this.skinning=null,this.creases=null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(3),s=n(o),u=r(156),l=n(u),c=r(34),f=n(c),d=r(31),h=n(d),p=r(6),g=n(p),m=r(5),v=n(m),y=r(231),M=n(y),w=r(421),x=n(w),b=r(418),T=n(b);i.prototype={constructor:i,setFaceArities:function(e,t,r,n){return this.faceArities=new l.default(t||null,e,r,n),this},setMaterialIds:function(e){for(var t=0;t<e.length;t++)if(e[t]>0){this.materialIds=e;break}return this},setMapValues:function(e,t,r,n,i){var a=h.default.checkId(e),o=this.mapIds;return-1===o.indexOf(a)&&o.push(a),this.mapValues[a]=new s.default(h.default.getTypeInfo(h.default.getAnchorName(e)).ElementType,r||null,n?t.subarray(n):t,i),this},setMapIndices:function(e,t,r,n,i){return this.mapIndices[h.default.checkId(e)]=new l.default(r||null,t,n,i),this},initializeBlendShape:function(){return this.blendShapes={},this},setBlendShapes:function(e,t,r,n){return this.blendShapes[e]=new M.default(new s.default(a.Vector3,null,t),r?new s.default(a.Vector3,null,r):null,n?new l.default(n.length,n):null),this},setSkinning:function(e,t,r,n){return this.skinning={},this.skinning.positionSkinRange=e,this.skinning.skinWeights=t,this.skinning.skinBoneIndices=r,this.skinning.poseSkinToPoseBoneTransform=new s.default(a.Matrix4,null,n),this},setCreases:function(e,t){this.creases={weights:e,edges:t}},toMeshAndClear:function(){var e=this.mapIds,t=this.mapValues,r=this.mapIndices,n=h.default.IdPositions,a=t[n],o=this.faceArities,s=this.materialIds;if(!a)throw Error("No positions!");var u=r[n]||null,l=u?u.length:a.length,c=null;if(null===o){var d=this.defaultFaceArity,p=l/d|0;o=new Uint32Array(p+1).fill(d,1)}else o=o.toArray(Uint32Array,1);c=f.default.accumulate(o);for(var m=0;m!==e.length;++m){var y=e[m];if(y!==n){var M=r[y];void 0!==M&&M.forceRepack(Uint32Array)}}var w=null;this.collapsePositions?(null!==u&&(w=u.repack(Uint32Array).data),a=T.default.collapsePositions(a,w)):null!==u&&(w=u.repack(Uint32Array).data);for(var b=v.default.fromData(c,a,w,s),S=0;S!==e.length;++S){var _=e[S];if(_!==n){var E=r[_],A=t[_],I=g.default.fromData(c,E.data,A);this.collapseMapValues&&(T.default.collapseMapVertexValues(b,I),I.compactValues()),h.default.assignMap(b,_,I)}}if(this.skinning&&(b.skinning=new x.default(this.skinning)),this.creases){var D=this.creases,L=D.weights,N=D.edges;if(N){for(var C=b.positions.edgeVertexAdjacency,O=new Float32Array(C.getNumEdges()),R=0,P=0;R<N.length;R+=2,P++)O[C.findEdgeId(N[R],N[R+1])]=L[P];b.edgeCreaseWeights=O}else b.edgeCreaseWeights=L}return i.call(this),this.blendShapes&&(b.blendShapes=this.blendShapes),b}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){this.mesh=e,this.dirtyFaces=new s.default(e.getNumFaces()),this.areaWeighted=!0,this.needNewNormalMap=!0,this.needNewNormalValues=!0,e.positions.updateInverseIndex()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(0),o=r(155),s=n(o),u=r(3),l=n(u),c=r(6),f=n(c);i.prototype={constructor:i,markPositionsDirty:function(e){for(var t=this.dirtyFaces,r=this.mesh.positions,n=r.valueFaceIndexOffsets,i=r.valueFaceIndices,a=0,o=e.length;a!==o;++a){var s=e[a];t.includeFromArray(i,n[s],n[s+1])}},updateMesh:function(){for(var e=this.mesh,t=this.dirtyFaces,r=this.areaWeighted,n=t.length,i=e.positions,o=i.values,u=i.faceValueIndices,c=new l.default(a.Vector3,n),f=new s.default(n),d=new a.Vector3,h=new a.Vector3,p=new a.Vector3,g=new a.Vector3,m=e.faceRangeOffsets,v=this.ownNormalMap().updateInverseIndex(),y=v.values,M=v.valueFaceIndices,w=v.valueFaceIndexOffsets,x=w[0],b=0,T=y.length;b!==T;++b){var S=w[b+1];if(t.containsAnyIn(M,x,S)){d.setScalar(0);for(var _=x;_!==S;++_)d.add(function(e){if(f.contains(e))c.getAt(e,h);else{var t=m[e],n=m[e+1];if(n-t>=3){var i=h;o.getAt(u[t],p),o.getAt(u[n-1],g).sub(p),o.getAt(u[t+1],i).sub(p),i.cross(g),r||h.normalize()}else h.setScalar(0);c.setAt(e,h),f.include(e)}return h}(M[_]));y.setAt(b,d.normalize())}x=S}return e},ownNormalMap:function(){var e=this.mesh,t=e.normalMap;return this.needNewNormalMap&&(e.normalMap=t=new f.default(t)),this.needNewNormalValues&&(t.values=t.values.clone()),t}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n){var i=(new c.Matrix4).getInverse(t),a=(new c.Matrix4).multiply(i).multiply(e),o=(new c.Matrix4).multiply(r).multiply(i).multiply(e),s=new c.Vector3(0,0,0),u=n,l=s.clone().applyMatrix4(a),f=u.clone().applyMatrix4(a),d=(new c.Vector3).subVectors(f,l).normalize(),h=s.clone().applyMatrix4(o);return h.addScalar(1).multiplyScalar(.5),{position:h,normal:d}}function a(e,t,r,n){return function(a){var s=(0,f.getWorldTransform)(a,e),l=(0,d.getCamera)(a),h=(0,f.get)(a,{id:l,evalPlug:"Camera"}),g=(0,f.getWorldTransform)(a,l);if(!g)return{};var m=(0,p.default)(h),v=i(s,g,m,o(a,e,t,r,n)),y=(0,f.get)(a,{id:e,evalPlug:"Annotation"}),M=1;if(y.limitVisilibility){var w=Math.min(.5*y.visibilityAngle,180),x=new c.Vector3(0,0,-1),b=(x.dot(v.normal),c.Math.radToDeg(Math.acos(x.dot(v.normal))));b>w?M=0:b>.75*w&&(M=(w-b)/(.25*w))}return(0,u.default)({alpha:M},v)}}function o(e,t,r,n,i){var a=null;if(r){var o=new c.Vector3(0,0,0);i&&(o=(new c.Vector3).setFromMatrixPosition((0,f.getWorldTransform)(e,i)));var s=(0,f.getWorldTransform)(e,t),u=(new c.Vector3).setFromMatrixPosition(s);a=o.clone().sub(u).normalize();var l=new c.Matrix4;l.getInverse(s),a.applyMatrix4(l).normalize()}else a=new c.Vector3,a[n]=-1;return a}Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),u=n(s);t.getScreenPositionNormalAlpha=a;var l=r(15),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),f=r(7),d=r(8),h=r(105),p=n(h)},function(e,t,r){"use strict";function n(e,t,r,n){var a=e.lightType,o=t.getObjectByName("Objects");switch(a){case"DirectionalLight":var u=new s.DirectionalLight(e.color.getHex(),e.intensity,e.decayExponent);return u.visible=r,u.target.position.set(0,0,-1),u.target.updateMatrix(),u.add(u.target),i(e,u,o),u;case"PointLight":var l=new s.PointLight(e.color.getHex(),e.intensity,e.distance);return l.visible=r,i(e,l),l;case"SpotLight":var c=new s.SpotLight(e.color.getHex(),e.intensity,e.distance,e.coneAngle*Math.PI/180,e.coneFalloff/100,e.decayExponent);return c.visible=r,c.target.position.set(0,0,-1),c.target.updateMatrix(),c.add(c.target),i(e,c,o),c;case"HemisphereLight":var f=new s.HemisphereLight(e.color.getHex(),e.gndColor.getHex(),e.intensity);f.rotateZ(-Math.PI/2);var d=new s.Object3D;return d.add(f),d.visible=r,i(e,f,o),d;case"AreaLight":return;default:return void console.warn("Unknown light type: "+a)}}function i(e,t,r){switch(t.intensity=e.intensity,t.color.copy(e.color),e.lightType){case"DirectionalLight":t.shadow.camera.left=-e.shadowCameraSize,t.shadow.camera.right=e.shadowCameraSize,t.shadow.camera.top=e.shadowCameraSize,t.shadow.camera.bottom=-e.shadowCameraSize,t.shadow.spreadAngle=s.Math.DEG2RAD*e.sourceAngle;break;case"PointLight":case"SpotLight":t.distance=e.distance,t.angle=s.Math.DEG2RAD*e.coneAngle,t.penumbra=s.Math.DEG2RAD*e.coneFalloff,t.decay=e.decayExponent,t.shadow.radius=e.radius;break;case"HemisphereLight":t.groundColor.copy(e.gndColor);break;case"AreaLight":break;default:console.warn("Unknown light type: "+type)}if(t.shadow){t.castShadow=e.shadow,t.shadow.bias=e.shadowBias,t.shadow.mapSize.width=e.shadowSize,t.shadow.mapSize.height=e.shadowSize,t.autoShadow=e.autoShadow;t.autoShadow&&t.updateShadow?t.updateShadow(r):(t.shadow.virtualPosition=void 0,t.shadow.camera.near=e.shadowNearClip,t.shadow.camera.far=e.shadowFarClip),t.shadow.update&&t.shadow.update(t)}}function a(e){if(e){var t=e.getObjectByName("Objects");t&&t.traverseVisible&&t.traverseVisible(function(e){e.isLight&&e.autoShadow&&e.updateShadow&&e.updateShadow(t)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.createLight=n,t.updateLight=i,t.initAutoShadow=a;var o=r(15),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o);r(482),r(8),r(7)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){var n=M.default.stream();return e.addEventListener(t,n),r?M.default.map(r,n):n}function a(e,t,r){var n=M.default.stream();return e.addEventListener(t,n),M.default.transduce(r,n)}function o(e){return e.touches&&1===e.touches.length}function s(e){return e.touches&&2===e.touches.length}function u(e,t){var r=M.default.stream()(0),n=M.default.combine(function(e,t){return e.end()?t():e()},[e,r]),i=1;return M.default.on(function(){var t=c(1e3/60),n=new Date;if(!e())return r.end(!0);var a=e(),o=a.deltaX,s=a.deltaY;M.default.map(function(e){i<=.005?(r.end(!0),t.end(!0)):(i=Math.exp(-8*(Date.now()-n)/1e3),r({deltaX:o*i,deltaY:s*i}))},t)},e.end),n}function l(e,t,r){function n(e){var t=I.getBoundingClientRect();D={x:t.left+window.pageXOffset,y:t.top+window.pageYOffset},L=e}function l(e){return O&&(O.lastMove=new Date),e}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r){if(C[e]){for(var n,i,a,o=N.length-1;o>=0;o--)if(n=N[o],i=n.tool,n.enabled&&i[e])if(a=i[e].call(n,r),t.findFirst){if(!1!==a)break}else if(!t.doAll&&!1===a)break;return a}}}function m(e){return{rect:L,clientX:e.clientX-D.x+window.pageXOffset,clientY:e.clientY-D.y+window.pageYOffset,deltaX:e.movementX,deltaY:e.movementY,originalEvent:e,which:e.which,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}}function y(e){if(!e.touches||!e.touches.length)return e;var t=e.srcElement||e.target,r=t.getBoundingClientRect();return{which:1,rect:L,clientX:e.touches[0].clientX-r.left,clientY:e.touches[0].clientY-r.top,isTouch:!0,originalEvent:e}}function S(e){return e.preventDefault(),{a:{x:e.touches[0].clientX,y:e.touches[0].clientY},b:{x:e.touches[1].clientX,y:e.touches[1].clientY}}}function _(){var e=t.externals.vrControls,r=t.externals.controllers;if(e&&r&&C.controllerupdate){var n=r.filter(function(e){return e.update(),!!e.getGamepad()}).map(function(t){var r=t.getGamepad(),n=t.position.clone(),i=t.quaternion.clone();return n.applyQuaternion(e.rotationalOffset).add(e.offset),i.premultiply(e.rotationalOffset),{id:r.id,index:r.index,position:n,orientation:i,buttons:r.buttons,axes:r.axes}});return n.length&&p("controllerupdate")({states:n}),n}}function E(t){if(C.nodeenter||C.nodeleave){var r=t.map(function(e){var t=new x.Vector3(0,0,-1).applyQuaternion(e.orientation);return new x.Ray(e.position,t)}),n=(0,b.filter)(e,{plug:"Properties",properties:{interactive:!0}}).map(function(t){return{id:t[0],box:(0,b.getNodeBoundingBox)(e,t[0])}});r.map(function(e,t){return{index:t,nodeId:n.reduce(function(t,r){var n=e.intersectBox(r.box),i=n?n.distanceTo(e.origin):1/0;return i<t.distance?{id:r.id,distance:i}:t},{id:null,distance:1/0}).id}}).forEach(function(e){var r=t[e.index],n=r.id+r.index,i=Q[n];e.nodeId!==i&&(i&&p("nodeleave")(i),e.nodeId&&p("nodeenter")(e.nodeId),Q[n]=e.nodeId)})}}function A(){if(C.nodeenter||C.nodeleave){var t=(0,T.filterInteractiveBoxesFromCenter)(e)[0];t!==q&&(q&&p("nodeleave")(q),t&&p("nodeenter")(t),q=t)}}var I=r.parentNode.parentNode,D={x:0,y:0},L={width:0,height:0},N=[],C={},O=!1,R=void 0,P=!1;M.default.on(p("dragenter"),i(r,"dragenter")),M.default.on(p("dragover"),i(r,"dragover")),M.default.on(p("dragleave"),i(r,"dragleave")),M.default.on(p("dblclick"),i(r,"dblclick"));var z={};M.default.on(function(e){z[e.key]||(p("keydown")(e),z[e.key]=setInterval(function(){return p("keyheld")(e)},17))},i(r,"keydown")),M.default.on(function(e){z[e.key]&&(clearInterval(z[e.key]),delete z[e.key]),p("keyup")(e)},i(r,"keyup"));var j=(i(r,"click",m),i(r,"mousedown",m)),U=i(r,"mousemove",m),B=i(window,"mouseup",m),V=M.default.stream(),k=M.default.stream(),F=a(r,"touchstart",(0,w.compose)((0,w.filter)(o),(0,w.map)(y))),G=i(r,"touchend",y);M.default.on(function(e){function t(e){e.preventDefault();var t={rect:L,clientX:e.clientX-D.x,clientY:e.clientY-D.y,originalEvent:e,which:e.which,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};return void 0===e.movementX?(t.deltaX=null===r?0:e.clientX-r,t.deltaY=null===r?0:e.clientY-n):(t.deltaX=e.movementX,t.deltaY=e.movementY),r=e.clientX,n=e.clientY,t}if(e.originalEvent.target.focus(),p("mousedown")(e),P={start:new Date,event:e},R=p("drag",{findFirst:!0})(e)){O={lastMove:new Date};var r=null,n=null;V=a(window,"mousemove",(0,w.compose)((0,w.map)(l),(0,w.map)(t))),k.end(!0),k=R.momentum?u(V,B):V,k.map(R.handle)}},j),M.default.on(function(e){function t(e){R.allowDefault||e.originalEvent.preventDefault();var t=(0,v.default)(e,{deltaX:e.clientX-n,deltaY:e.clientY-i});return n=e.clientX,i=e.clientY,t}if(p("mousedown")(e),P={start:new Date,event:e},R=p("drag",{findFirst:!0})(e)){O={lastMove:new Date};var n=e.clientX,i=e.clientY;V=a(r,"touchmove",(0,w.compose)((0,w.filter)(o),(0,w.map)(l),(0,w.map)(y),(0,w.map)(t))),k.end(!0),k=R.momentum?u(V,G):V,k.map(R.handle)}},F);var H=M.default.merge(G,B);M.default.on(function(e){if(O&&(V.end(!0),R.end&&R.end(),new Date-O.lastMove>200&&k.end(!0)),p("mouseup")(e),P&&new Date-P.start<300){var t=Math.abs(e.clientX-P.event.clientX),r=Math.abs(e.clientY-P.event.clientY);isNaN(t)?p("click")(P.event):t<=5&&r<=5&&p("click")(e)}O=!1,P=!1},H),M.default.on(p("hover"),M.default.transduce((0,w.filter)(function(){return!O&&C.hover}),U));var W=p("scroll");i(r,"wheel",function(e){if(C.scroll){e.preventDefault();var t=Math.abs(e.deltaY)>100?200:10;W({delta:-e.deltaY/(Math.abs(e.wheelDelta)||t),originalEvent:e})}});var Y=f(function(e){var t=e,n=a(r,"touchmove",(0,w.compose)((0,w.filter)(s),(0,w.map)(S),(0,w.map)(function(e){var r={pinchX:e.b.x-t.b.x-(e.a.x-t.a.x),pinchY:t.a.y-e.a.y-(t.b.y-e.b.y),dragX:(e.a.x-t.a.x+(e.b.x-t.b.x))/2,dragY:(e.a.y-t.a.y+(e.b.y-t.b.y))/2,a:e.a,b:e.b};return t=e,r})));return M.default.endsOn(G,n),n},a(r,"touchstart",(0,w.compose)((0,w.filter)(s),(0,w.map)(S))));M.default.on(function(e){var t=e.pinchX,r=e.pinchY,n=e.dragX,i=e.dragY,a=e.a,o=e.b;Math.abs(t)+Math.abs(r)>Math.abs(n)+Math.abs(i)?p("pinch")({deltaX:a.x>o.x?-t:t,deltaY:a.y>o.y?r:-r}):p("swipe")({deltaX:n,deltaY:i})},Y);var Q={},q=void 0,X=c(100),Z=h(X,U),K=d(),J=void 0;return M.default.on(function(t){if((C.nodeenter||C.nodeleave)&&K(t)){var r=(0,T.filterInteractiveBoxesFromPosition)(e,t)[0];r!==J&&(J&&p("nodeleave")(J),r&&p("nodeenter")(r),J=r)}},Z),{resize:n,frameUpdate:function(e){var t=_();t&&t.length?E(t):e===T.RENDER_MODES.vr&&A()},updateTools:function(e){N=e,C={},N.forEach(function(e){(0,g.default)(e.tool).forEach(function(e){return C[e]=!0})})}}}function c(e){function t(){if(!r.end()){var i=Date.now();n+=e,r(i),setTimeout(t,n-i)}}var r=M.default.stream(),n=Date.now();return t(),r}function f(e,t){return M.default.combine(function(t,r){M.default.map(r,e(t()))},[t])}function d(){var e=void 0;return function(t){return t!==e&&(e=t,!0)}}function h(e,t){return M.default.combine(function(){return t()},[e])}Object.defineProperty(t,"__esModule",{value:!0});var p=r(4),g=n(p),m=r(2),v=n(m);t.initManipulators=l;var y=r(486),M=n(y),w=r(484),x=r(0),b=r(7),T=r(8)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=t.hdrSource;if(!r)return null;var n=(0,w.getOrFetchBinary)(r)(e);if(!n)return null;var i=new Uint8Array(n);return(new M.RGBELoader)._parser(i)}function a(e,t,r){var n=e.getTranslator().textureCache,i=n[t]&&n[t].image;return!i||r&&i._v!==r._v?null:n[t].value}function o(e,t,r,n){var i=e.getTranslator().textureCache;return i[t]&&i[t].value.dispose(),i[t]={image:r,value:n},n}function s(e,t,r,n,s){var u=r.maps,l=r.nodeId,c=a(e,l,r);if(c)return c;if(!u)return null;for(var f=0;f<u.length;f++)if(!u[f])return null;var d=!1,h=!1;s&&u[0].preferHDR&&(d=!0),d&&_&&u[0].hdrSource&&(h=!0);var p=u.map(function(t){var r=a(e,t.nodeId,t);if(r)return r;if((r=(h?i:b.fetchTextureImage)(e,t,!0))&&h){var n=new M.DataTexture(r.data,r.width,r.height);n.encoding=M.RGBEEncoding,n.generateMipmaps=!1,n.type=M.UnsignedByteType,n.minFilter=M.NearestFilter,n.magFilter=M.NearestFilter,n.format=M.RGBEFormat,r=n,o(e,t.nodeId,t,r)}return r});if(p.filter(function(e){return!!e}).length!==p.length)return null;var g=new M.CubeTexture;if(g.images=p,g.flipY=!1,d&&(g.encoding=h?M.RGBEEncoding:u[0].hdrEncoding),g.needsUpdate=!0,n)return o(e,l,r,g);var m=h?M.NearestFilter:M.LinearFilter,v=new M.PMREMGenerator(g,20);v.update(t),v.cubeLods[0].texture.magFilter=m,v.cubeLods[0].texture.minFilter=m;var y=new M.PMREMCubeUVPacker(v.cubeLods);return y.update(t),y.CubeUVRenderTarget.texture.magFilter=m,y.CubeUVRenderTarget.texture.minFilter=m,o(e,l,r,y.CubeUVRenderTarget.texture)}function u(e,t){if(t){var r=t.nodeId;a(e,r,t)||(t.maps?t.maps.forEach(function(t){return(0,b.fetchTextureImage)(e,t)}):(0,b.fetchTextureImage)(e,t))}}function l(e,t,r,n,u){if(!r)return n&&(n.texture=null),null;var l="envMap"===u||"emissiveMap"===u;if(r.maps)return s(e,t,r,!1,l);var c=!1,f=!1;l&&r.preferHDR&&(c=!0),c&&_&&r.hdrSource&&(f=!0);var d=(0,m.default)({},r),h=r.nodeId,p=a(e,h,r);if(!p){if(p=f?new M.DataTexture:new M.Texture,p.meta={nodeId:h},r.canvasOperations){p.meta.source="canvas operator";var g=r.canvasOperations,v=a(e,r.nodeId),y=v&&v.image,w=y||e.createCanvas(r.width,r.height),x=w.getContext("2d");x.clearRect(0,0,w.width,w.height);g.reduce(function(t,r){x.save();var n=t&&r(x,e,w);return x.restore(),n},!0)&&(p.image=w)}else{p.meta.source="image fetch";var T=f?i:b.fetchTextureImage;p.image=T(e,r)}if(!p.image)return n&&(n.texture=null),null;p.transparent=!0;var S={0:M.ClampToEdgeWrapping,1:M.RepeatWrapping,2:M.MirroredRepeatWrapping};p.wrapS=S[d.wrapU],p.wrapT=S[d.wrapV],p.generateMipmaps=!c&&d.generateMipMaps,p.anisotropy=p.generateMipmaps?16:1,p.magFilter=f?M.NearestFilter:d.magFilter,p.minFilter=f?M.NearestFilter:d.minFilter,p.encoding=c?userHDRSource?M.RGBEEncoding:d.hdrEncoding:M.sRGBEncoding,M.Math.nearestPowerOfTwo(p.image.width)===p.image.width&&M.Math.nearestPowerOfTwo(p.image.height)===p.image.height||(p.wrapS=M.ClampToEdgeWrapping,p.wrapT=M.ClampToEdgeWrapping,p.generateMipmaps=!1,p.anisotropy=1,p.anisotropy=1,p.magFilter=f?M.NearestFilter:M.LinearFilter,p.minFilter=f?M.NearestFilter:M.LinearFilter),p.needsUpdate=!0,n&&n.texture&&n.texture.dispose(),o(e,h,r,p)}if(!n)return p;n.texture=p,n.uvTransform=!0,n.uvOffset=new M.Vector2(d.uOffset,d.vOffset),n.uvRepeat=new M.Vector2(d.uTile,d.vTile),n.texelTransform=!0,n.texelInvert=d.invert;var E=d.brightness-d.gain*d.gainPivot;return n.texelScale=d.gain,n.texelOffset=E,n}function c(e,t,r,n,i){function s(r,n){var i=l(e,t,r,u[n]||new M.MaterialMap,n);i&&!u[n]&&(u[n]=i)}var u=n&&n instanceof M.MeshPhysicalMaterial?n:new M.MeshPhysicalMaterial({}),f=null;if(!r)return u;if("MultiID"===r.type){for(var h=[],g=0;g<30;g++){var v=n&&n.materials&&n.materials[g];if(r["material"+g])h.push(c(e,t,r["material"+g],v));else{var y={defaultColor:r.defaultColor};h.push(c(e,t,y,v))}}return u=new M.MultiMaterial(h)}if("GemMaterial"===r.type){var w=!(n&&n instanceof M.ShaderMaterial),b=(0,x.getEvalSceneGraph)(e).evaluatedNodes[r.gemstone];f=r.environment&&r.environment.environmentMap;var T=f&&l(e,t,f.specularCubeMap,new M.MaterialMap,"envMap");if(!b||!T)return u.color=r.transmissive,u;var _=!1,E=a(e,r.gemstone,b);if(!E){var A=b.PolyMesh.mesh,I=t.extensions.get("OES_element_index_uint")?S.default.CompactIndices:S.default.NoIndices,D=A&&S.default.exportBufferGeometry(A,I,!1,A.tangentMap,null,null,null,null);if(D){D.geometry.computeBoundingSphere();E={texture:new M.NormalCubeMapBaker(t,D.geometry,!0).texture,geometry:D.geometry,dispose:function(){}},o(e,r.gemstone,{_v:b._v},E),_=!0}}if(!E)return u.color=r.transmissive,u;var L=null;w?(L=new M.ShaderMaterial(M.GeometricRefractionShader),L.uniforms=M.UniformsUtils.clone(M.GeometricRefractionShader.uniforms),L.defines=(0,m.default)({},M.GeometricRefractionShader.defines),L.transparent=!0,L.premultipliedAlpha=!0,L.side=M.FrontSide):L=n,L.uniforms.absorption.value.set(1-r.transmissive.r,1-r.transmissive.g,1-r.transmissive.b),L.uniforms.sphereSquish.value.copy(r.squishFactor),L.uniforms.normalCubeMap.value=E.texture,L.uniforms.gemIOR.value=r.ior,L.uniforms.spectrumSpread.value=r.spectrumSpread,L.uniforms.boostFactor.value=r.boostFactor,L.uniforms.envMap.value=T,L.envMap=T;var N=void 0!==f.intensity?f.intensity:1;L.uniforms.envMapIntensity.value=N,L.envMapIntensity=N,L.uniforms.boundingSphere.value.set(E.geometry.boundingSphere.center.x,E.geometry.boundingSphere.center.y,E.geometry.boundingSphere.center.z,E.geometry.boundingSphere.radius),L.defines.NUM_BOUNCES!==r.bounces&&(L.defines.NUM_BOUNCES=r.bounces,L.needsUpdate=!0);var C=i&&i.sparklePass;if(C){var O=r.enableSparkles?r.sparkleCount:0;i.nodeInfo.visible&&"Mesh"==i.nodeInfo.type&&(_||L.sparkleCount!==O)&&(C.removeGemstone(i.nodeInfo),O&&C.addGemstone(E.geometry,i.nodeInfo,O),L.sparkleCount=O)}return L}if(r.defaultColor)return u.color=r.defaultColor,u;if(!r.baseColor)return r.diffuseColor&&(u.color=r.diffuseColor),u;var R={color:"baseColor",aoMapIntensity:"aoMapIntensity",bumpScale:"bumpScale",emissive:"emissiveColor",falloff:"baseFalloff",falloffColor:"baseFalloffColor",metalness:"metallic",roughness:"roughness",clearCoat:"clearCoat",clearCoatRoughness:"clearCoatRoughness",opacity:"opacityFactor",falloffOpacity:"opacityFalloffFactor",transparent:"baseMapTransparent",anisotropy:"anisotropy",anisotropyRotation:"anisotropyRotation"},P=["depthTest","depthWrite"],z={map:"baseMap",bumpMap:"bumpMap",aoMap:"aoMap",emissiveMap:"emissiveMap",lightMap:"lightMap",metalnessMap:"metallicMap",normalMap:"normalMap",alphaMap:"opacityMap",roughnessMap:"roughnessMap",falloffMap:"baseFalloffMap",falloffAlphaMap:"opacityFalloffMap",anisotropyMap:"anisotropyMap",anisotropyRotationMap:"anisotropyRotationMap"},j=!0,U=!1,B=void 0;try{for(var V,k=(0,p.default)((0,d.default)(z));!(j=(V=k.next()).done);j=!0){var F=V.value;s(r[z[F]],F+"Slot")}}catch(e){U=!0,B=e}finally{try{!j&&k.return&&k.return()}finally{if(U)throw B}}var G=!0,H=!1,W=void 0;try{for(var Y,Q=(0,p.default)((0,d.default)(R));!(G=(Y=Q.next()).done);G=!0){var q=Y.value;u[q]=r[R[q]]}}catch(e){H=!0,W=e}finally{try{!G&&Q.return&&Q.return()}finally{if(H)throw W}}var X=!0,Z=!1,K=void 0;try{for(var J,$=(0,p.default)(P);!(X=(J=$.next()).done);X=!0){var ee=J.value;u[ee]=r[ee]}}catch(e){Z=!0,K=e}finally{try{!X&&$.return&&$.return()}finally{if(Z)throw K}}r.emissiveScale&&(u.emissive=u.emissive.clone(),u.emissive.multiplyScalar(r.emissiveScale)),u.transparent=u.opacity<1||!!r.opacityMap||r.baseMapTransparent||r.opacityFalloffFactor<1||!!r.opacityFalloffMap;var te=r.specularColor;return u.reflectivity=.33333*(te.r+te.g+te.b),u.clearCoat*=.25,u.normalScale.x=(r.normalRedFlip?-1:1)*r.normalFactor,u.normalScale.y=(r.normalGreenFlip?-1:1)*r.normalFactor,u.blending=M.NormalBlending,u.premultipliedAlpha=!0,u.side=u.transparent&&n?n.side:M.DoubleSide,f=r.environment&&r.environment.environmentMap,f&&(s(f.specularCubeMap,"envMap"),u.envMapIntensity=void 0!==f.intensity?f.intensity:1),u.needsUpdate=!0,u}Object.defineProperty(t,"__esModule",{value:!0});var f=r(4),d=n(f),h=r(24),p=n(h),g=r(2),m=n(g);t.fetchHDRSourceData=i,t.getCubeMapTexture=s,t.getTextureImage=u,t.assignTexture=l,t.primitiveToMaterial=c;var v=r(56),y=r(15),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(y),w=r(33),x=r(10),b=r(243),T=r(242),S=n(T),_=function(){return v.isIOS||v.isIE}()},function(e,t,r){"use strict";function n(e,t,r,n){for(var i,a,o=new e(n.length*r),s=0;s<n.length;s++){i=n[s]*r,a=s*r;for(var l=0;l<r;l++)o[a+l]=t[i+l]}return new u.BufferAttribute(o,r)}function i(e){var t=e.faces,r=e.positions,i=e.normalMap,a=e.uvs,s=new u.BufferGeometry;if(s.addAttribute("position",n(Float32Array,r,3,t)),i&&s.addAttribute("normal",n(Float32Array,i.values,3,i.faces)),a){var l=(0,o.default)(a);if(l.sort(),l.length>=1){var c=a[l[0]];s.addAttribute("uv",n(Float32Array,c.values,2,c.faces))}if(l.length>=2){var c=a[l[1]];s.addAttribute("uv2",n(Float32Array,c.values,2,c.faces))}}return s}Object.defineProperty(t,"__esModule",{value:!0});var a=r(4),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.polyMeshToBufferGeometry=i;var s=r(15),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s)},function(e,t,r){"use strict";function n(e,t){return{label:"Configure",enabled:!0,active:!1,display:{playerTools:!1},options:{},activate:function(){var t=(0,i.getForms)(e),r=(0,i.getConfigurator)(e);e.dispatch((0,i.initConfigurator)({panel:!0,form:r&&r.form||!t.length||t[0].name}))},deactivate:function(){return e.dispatch((0,i.initConfigurator)({panel:!1}))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=(r(20),r(98))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(e,t){g[e]+=t,f=new c.Vector3(g.x,g.y,g.z).normalize().multiplyScalar(_)}function n(){A=Date.now()-v,A=x(1,b(1e-5,A/E));var e=-(A-1)*(A-1)+1;f.normalize().multiplyScalar(_*e)}function i(e,r){return I.ray.origin.x=e.x,I.ray.origin.z=e.z,I.ray.direction=r,!I.intersectObjects(t.scene.getObjectByName("Objects").children,!0).length}function o(e,r,n){var i=(0,p.filter)(e,{type:"PolyMesh",plug:"Properties",properties:{walkableInVR:!0}});D.ray.origin.x=r.x+n.x,D.ray.origin.z=r.z+n.z;var a=[];return i.forEach(function(e){var r=e[0],n=t.getThreeObject(r);n&&a.push(n)}),!!D.intersectObjects(a).length}var u=null,f=new c.Vector3(0,0,0),g={x:0,y:0,z:0},v=void 0,A=void 0,I=new l.Raycaster(new c.Vector3(0,1,0),f,0,.8),D=new l.Raycaster(new c.Vector3(0,1,0),new c.Vector3(0,-1,0),0,2);return{name:"firstPersonMode",active:!1,enabled:!0,options:{movementMode:"fly",keyboardEnabled:!0},display:{playerTools:!1},heldKeys:[],tool:{keydown:function(e){var t=T[e.key];if(t&&this.active){this.heldKeys.push(e.key);var n=(0,s.default)(S[t],2),i=n[0],a=n[1];this.heldKeys.length<=1&&(v=Date.now()),r(i,a)}},keyup:function(e){var t=T[e.key];if(t&&this.active){var n=this.heldKeys.indexOf(e.key);this.heldKeys.splice(n,1);var i=(0,s.default)(S[t],2);r(i[0],-i[1])}},keyheld:function(r){var s=this.heldKeys[0];if(r.key===s&&this.options.keyboardEnabled){n();var u=t.externals.vrControls.offset,l=a(e,f,this.options.movementMode);if(i(u,l)&&o(e,u,l)&&l&&t.externals.vrControls){t.externals.vrControls.offset.add(l);var g=(0,h.getCamera)(e),v=(0,h.getCameraWorldTransform)(e),w=(0,y.default)(e,g),x=(0,p.get)(e,{id:g,evalPlug:"Camera"}),b=new c.Vector3,T=new c.Vector3;b.setFromMatrixPosition(v),T.setFromMatrixPosition(w),b.add(l),T.add(l),v.setPosition(b),w.setPosition(T),(0,m.default)(v,w,x.upPosition),e.dispatch((0,M.merge)([g,"Transform",0],(0,d.default)(v))),(0,p.get)(e,{id:g,evalPlug:"Transform"}).target||e.dispatch((0,M.merge)([M.virtualTargetId,"Transform",0],(0,d.default)(w)))}}}},activate:function(){var t=(0,h.getCamera)(e);u||(u=(0,w.getOrbitMode)(e,t)),e.dispatch((0,w.setOrbitMode)(e,t,"firstPerson"))},deactivate:function(){e.dispatch((0,w.setOrbitMode)(e,(0,h.getCamera)(e),u)),u=null}}}function a(e,t,r){var n=(0,h.getCamera)(e),i=(0,h.getCameraWorldTransform)(e),a=(0,y.default)(e,n),o=(0,p.get)(e,{id:n,evalPlug:"Camera"});if(a&&i&&o.upPosition){var s=new c.Vector3,u=new c.Vector3;s.setFromMatrixPosition(i),u.setFromMatrixPosition(a);var l=(new c.Vector3).subVectors(u,s).normalize();"plane"===r&&l.projectOnPlane(A).normalize();var f=(new c.Vector3).crossVectors(l,A).normalize(),d=(new c.Vector3).addScaledVector(l,t.y).addScaledVector(f,t.x);return d.y<-s.y&&(0,w.getConstrainCameraY)(e,n)&&(d.y=-s.y),d}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(49),s=n(o);t.default=i;var u=r(15),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(u),c=r(0),f=(r(126),r(51)),d=n(f),h=r(8),p=r(7),g=r(71),m=n(g),v=r(59),y=n(v),M=r(10),w=r(104),x=(Math.tan,Math.cos,Math.atan,Math.acos,Math.min),b=Math.max,T=(Math.pow,Math.PI,Math.sqrt,{w:"FORWARD",a:"LEFT",s:"BACKWARD",d:"RIGHT",ArrowUp:"FORWARD",ArrowLeft:"LEFT",ArrowDown:"BACKWARD",ArrowRight:"RIGHT"}),S={FORWARD:["y",1],BACKWARD:["y",-1],LEFT:["x",-1],RIGHT:["x",1]},_=.2,E=2e3,A=new c.Vector3(0,1,0)},function(e,t,r){"use strict";function n(e,t){return{enabled:!o.isIOS,display:!0,options:{},isActive:i.isFullscreen,activate:function(){var t=e.getIn(["player","playerElement"]);["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].forEach(function(e){if(t[e])return t[e]()}),e.dispatch((0,a.updateCommands)(["vrSettings"],{enabled:!1})),e.dispatch((0,i.setFullscreen)(!0))},deactivate:function(){["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"].forEach(function(e){if(document[e])return document[e]()}),e.dispatch((0,a.undoUpdateCommand)("vrSettings")),e.dispatch((0,i.setFullscreen)(!1))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(8),a=r(43),o=r(56)},function(e,t,r){"use strict";function n(e,t){return{label:"Home",enabled:!0,display:{playerTools:!0},options:{},execute:function(){var r=(0,a.get)(e,{scene:!0,evalPlug:"Player"}),n=void 0;if(r.orbitTarget)n=(0,a.getWorldTransform)(e,r.orbitTarget);else{var l=t.getNodeListBoundingBox([(0,s.getSceneId)(e)]).getCenter();(isNaN(l.x)||isNaN(l.y)||isNaN(l.z))&&l.set(0,0,0),n=(new i.Matrix4).setPosition(l)}(0,c.default)(e,o.virtualTargetId,n),(0,u.initCamera)(e,!0,r&&r.camera)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(0),a=r(7),o=(r(8),r(10)),s=r(20),u=r(126),l=r(127),c=function(e){return e&&e.__esModule?e:{default:e}}(l)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i,a=r(2),o=n(a),s=r(19),u=n(s),l=r(248),c=n(l),f=r(472),d=n(f),h=r(251),p=n(h),g=r(245),m=n(g),v=r(246),y=n(v),M=r(247),w=n(M),x=r(471),b=n(x),T=r(474),S=n(T),_=r(468),E=n(_),A=r(469),I=n(A),D=r(475),L=n(D),N=r(467),C=n(N),O=r(473),R=n(O),P=r(466),z=n(P),j=(i={orbit:c.default,pan:d.default,zoom:p.default,home:I.default,select:S.default,nodeMove:m.default,nodeRotate:y.default,nodeScale:w.default,nodeManipulate:b.default},(0,u.default)(i,"select",S.default),(0,u.default)(i,"fullscreen",E.default),(0,u.default)(i,"snapshot",L.default),(0,u.default)(i,"firstPersonMode",C.default),(0,u.default)(i,"configurator",z.default),i);(0,o.default)(j,R.default),t.default=j},function(e,t,r){"use strict";function n(e,t){return{enabled:!0,display:{playerTools:!1},options:{displayGizmo:!0,mode:"free",plane:{normal:{x:0,y:1,z:0},constant:0}},tool:{drag:function(t){if(!this.active)return!1;if(1==t.which){var r=this;return{momentum:!0,handle:function(t){switch(r.options.mode){case"plane":(0,i.moveNodeOnPlane)(e,t.deltaX,t.deltaY,r.options.plane);break;case"objects":(0,i.moveNodeOnObjects)(e,t.clientX,t.clientY,r.options.objects);break;default:(0,i.moveNodeFree)(e,t.deltaX,t.deltaY,!1)}}}}return 3==t.which?{momentum:!0,handle:function(t){(0,o.rotateNode)(e,t.deltaX,t.deltaY,!1)}}:void 0},scroll:function(t){this.active&&(0,a.scaleNode)(e,t,!1)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(245),a=r(247),o=r(246)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(t){var r=t.deltaX,n=t.deltaY,i=1;i=window.devicePixelRatio,a(e,new o.Vector2(r/i,n/i))}return{label:"Pan",enabled:!0,display:{playerTools:!0},options:{},tool:{drag:function(e){return!(!this.active&&2!==e.which&&3!==e.which&&!e.shiftKey)&&{momentum:!0,handle:function(e){r(e)}}},swipe:function(e){r(e)}}}}function a(e,t){var r=(0,l.getCamera)(e),n=(0,c.get)(e,{id:r,evalPlug:"Camera"}),i=((0,c.get)(e,{scene:!0,evalPlug:"Player"}),(0,v.default)(e,r)),a=(0,c.getWorldTransform)(e,r),s=(0,l.getRect)(e),d=(0,g.default)((0,c.get)(e,{id:r,evalPlug:"Camera"})),p=(new o.Vector2).copy(t).divide(s).multiplyScalar(2);p.x*=-1;var m=(new o.Matrix4).getInverse(a,!0);if(M.copy(d).multiply(m),x.setFromMatrixPosition(i).applyMatrix4(M),w.getInverse(M,!0),S.set(0,0,x.z).applyMatrix4(w),T.set(p.x,p.y,x.z).applyMatrix4(w),b.copy(T).sub(S),n.radiusConstraint&&b.length()>0){var D=n.radiusConstraint,L=D.maxBoundingSphere,N=D.minBoundingSphere;E.setFromMatrixPosition(a),A.setFromMatrixPosition(i);var C=(new o.Vector3).copy(b).normalize(),O=new o.Ray(E,C),R=new o.Ray(A,C),P=R.intersectSphere(N).sub(A).length()-.001,z=O.intersectSphere(N);z=z?z.sub(E).length()-.001:1/0;var j=L.radius===1/0?1/0:O.intersectSphere(L).sub(E).length()-.001,U=Math.min(b.length(),P,z,j);b.normalize().multiplyScalar(U)}_.makeTranslation(b.x,b.y,b.z),I.addVectors(n.offset,b),n.offset=I,i.multiplyMatrices(_,i),a.multiplyMatrices(_,a),(0,y.getConstrainCameraY)(e,r)&&"trackball"!==(0,y.getOrbitMode)(e,r)&&(E.setFromMatrixPosition(a),A.setFromMatrixPosition(i),E.y<0&&(A.y-=E.y,E.y=0),i.setPosition(A),a.setPosition(E)),(0,h.default)(a,i,n.upPosition),e.dispatch((0,f.merge)([r,"Transform",0],(0,u.default)(a))),e.dispatch((0,f.merge)([f.virtualTargetId,"Transform",0],(0,u.default)(i)))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=r(0),s=r(51),u=n(s),l=r(8),c=r(7),f=r(10),d=r(71),h=n(d),p=r(105),g=n(p),m=r(59),v=n(m),y=r(104),M=(Math.tan,Math.cos,Math.atan,Math.acos,Math.min,Math.max,Math.pow,Math.PI,Math.sqrt,new o.Matrix4),w=new o.Matrix4,x=new o.Vector3,b=new o.Vector3,T=new o.Vector3,S=new o.Vector3,_=new o.Matrix4,E=new o.Vector3,A=new o.Vector3,I=new o.Vector3},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(19),a=n(i),o=r(4),s=n(o),u=r(7),l=r(45),c={},f={PolyMesh:["Box","Capsule","Cone","Cylinder","Disk","Plane","Sphere","Torus"],Light:["DirectionalLight","SpotLight","PointLight","HemisphereLight","AreaLight"]};(0,s.default)(f).forEach(function(e){f[e].forEach(function(t){c[e+t]=function(r,n){return{label:"Create "+t,enabled:!0,display:{primitives:!0},options:{operator:t,primitive:e},execute:function(){var n=(0,u.find)(r,{type:"Objects"});n&&r.dispatch((0,u.addNode)({type:e,name:t,parent:n,plugs:(0,a.default)({},e,[[t,{}]])})).then(function(e){r.dispatch((0,l.selectNode)(e))})}}}})}),t.default=c},function(e,t,r){"use strict";function n(e,t){return{label:"Select",enabled:!0,display:{playerTools:!1,editorTools:!0},options:{},tool:{click:function(t){var r=(0,i.filterNodesFromPosition)(e,t);r.length&&e.dispatch((0,a.selectNode)(r[0]))},drag:function(e){return!(1!==e.which||!this.active)&&{momentum:!1,handle:function(e){}}}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(8),a=r(45)},function(e,t,r){"use strict";function n(e,t){return{label:"Snapshot",enabled:!0,display:{playerTools:!1},options:{dataType:"image"},execute:function(){var r=e.getIn(["commands","all"]).snapshot,n=((0,o.getThree)(e),t.composer),l=(0,o.getCamera)(e),c=null;r.options.camera&&(c=(0,s.find)(e,{name:r.options.camera}))&&(e.dispatch((0,o.setCamera)(c)),e.getEvaluatedTranslator(),t.resize()),t.renderQualityControl(u.QUALITY_MODE.LOW),n.render();var f=t.renderer.domElement.toDataURL();return r.options.camera&&e.dispatch((0,o.setCamera)(l)),"dataURL"===r.options.dataType?f:"blob"===r.options.dataType?i(f):a(i(f),"screenshot.png")}}}function i(e){return function(e){for(var t=e.split(","),r=t[0].match(/:(.*?);/)[1],n=atob(t[1]),i=n.length,a=new Uint8Array(i);i--;)a[i]=n.charCodeAt(i);return new Blob([a],{type:r})}(e)}function a(e,t){var r=window.URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.style="display: none",n.href=r,n.download=t,n.click(),window.URL.revokeObjectURL(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=r(8),s=r(7),u=r(244)},function(e,t,r){"use strict";function n(e){var t=(0,i.getCommands)(e),r=!1;return["orbit","pan","zoom"].forEach(function(e){r=r||t[e]&&t[e].active}),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var i=r(43)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=(0,v.getCamera)(e),n=(0,b.default)(e),i=(new p.Vector3).setFromMatrixPosition(n),a=i.sub(t.position).length();i.set(0,0,-a).applyQuaternion(t.quaternion).add(t.position);var o=new p.Vector3(0,1,0).applyQuaternion(t.quaternion);n.setPosition(i),(0,_.get)(e,{id:r,evalPlug:"Camera"}).upPosition=o,e.dispatch((0,S.merge)([r,"Transform",0],(0,w.default)(t.matrix.clone()))),(0,_.get)(e,{id:r,evalPlug:"Transform"}).target||e.dispatch((0,S.merge)([S.virtualTargetId,"Transform",0],(0,w.default)(n)))}function a(e,t){var r=(0,v.getCamera)(e),n=t.position.length(),i=new p.Vector3(0,0,n).applyQuaternion(t.quaternion),a=new p.Vector3(0,1,0).applyQuaternion(t.quaternion);t.position.copy(i),t.updateMatrixWorld(!0),(0,_.get)(e,{id:r,evalPlug:"Camera"}).upPosition=a,e.dispatch((0,S.merge)([r,"Transform",0],(0,w.default)(t.matrixWorld.clone())))}Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),s=n(o),u=r(19),l=n(u),c=r(49),f=n(c);t.default=function(e,t){function r(t){return function(r){if(T.highlight(e,!1),"active"===T.state&&!(0,v.shouldDisplayVrSettings)(e)){var n=T.getReticlePosition().clone();n.y=0;var i=n.add(t.position),a=(0,_.getWorldTransform)(e,(0,v.getCamera)(e)),o=(new p.Vector3).setFromMatrixPosition(a);D.rotationalOffset.clone().inverse();o.sub(D.offset),i.sub(o),i.y=0,D.setOffset(i)}}}function n(t){return function(r){if(T.highlight(e,!1),"active"===T.state&&!(0,v.shouldDisplayVrSettings)(e)){var n=((0,v.getCamera)(e),T.getReticlePosition().clone());n.y=0,t.position.add(n),t.updateMatrix();var i=t.position.clone();D.setOffset(i)}}}function o(){T.highlight(e,!0)}function u(e){window.addEventListener("touchstart",o),window.addEventListener("thumbpaddown",o),P=n(e),window.addEventListener("touchend",P),O=r(e),window.addEventListener("thumbpadup",O)}function c(){window.removeEventListener("touchstart",o),window.removeEventListener("touchend",P),window.removeEventListener("thumbpadup",O),window.addEventListener("thumbpaddown",o),P=null,O=null}function h(){e.dispatch((0,y.activateCommand)("firstPersonMode")),e.dispatch((0,y.setCommandOptions)("firstPersonMode",{movementMode:"plane"}))}function g(){e.dispatch((0,y.deactivateCommand)("firstPersonMode")),e.dispatch((0,y.setCommandOptions)("firstPersonMode",{movementMode:B}))}function M(t){var r=t.id+t.index,n=G[r];if(!n&&{"Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66","Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb"}[t.id]){var i=(0,_.find)(e,{from:{id:{"Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66","Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb"}[t.id]},name:"IMPORT_NULL"});if(i){var a=(0,_.find)(e,{from:{id:i},name:"CONTROLLER_ROOT"}),o=(0,_.filter)(e,{from:{id:i}});e.dispatch((0,S.clone)(o,(0,l.default)({},i,S.controllerRootId),{cloneDependencies:!0})).then(function(e){G[r]=e[a]})}else F[t.id]||(console.log("try fetch"),e.dispatch((0,E.fetch)({"Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66","Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb"}[t.id],null,{ignoreErrorMessage:!0})).catch(function(e){return F[t.id]=!0}))}else if(n){e.dispatch((0,_.set)({id:n,plug:"Transform",property:"translation"},t.position));var s=(new p.Euler).setFromQuaternion(t.orientation,"ZYX");e.dispatch((0,_.set)({id:n,plug:"Transform",property:"rotation"},s.toVector3().multiplyScalar(180/Math.PI)))}T&&T.update(e,t)}var w=void 0,x=void 0,T=void 0,A=void 0,D=void 0,L=void 0,N=void 0,C=void 0,O=void 0,R=void 0,P=void 0,z=void 0,j=void 0,U=void 0,B=void 0,V=!1,k=!1,F={},G={};t.externals.controllers=[["OpenVR Gamepad",0],["OpenVR Gamepad",1],["Daydream Controller"],["Oculus Touch (Left)"],["Oculus Touch (Right)"]].map(function(e){var t=(0,f.default)(e,2),r=t[0],n=t[1];return new p.VRController(r,n)});var H=(t.scene,t.camera);return d.isIE||window.navigator.getVRDisplays().then(function(e){e.length&&(N=e[0].capabilities.hasExternalDisplay,x=e[0])}),{label:"VR mode",activeLabel:"Exit VR Mode",enabled:!0,display:{playerTools:!1},options:{planeEnabled:!1,navigationEnabled:!0,keyboardEnabled:!0,userHeightFeet:5,userHeightInches:11},isActive:v.isVRMode,widget:{draw:function(r){if("orbit"!==L){T=new m.default(e,j,r);(0,_.filter)(e,{type:"PolyMesh",plug:"Properties",properties:{walkableInVR:!0}}).forEach(function(e){var r=e[0],n=t.getThreeObject(r);n&&T.addCollider(n)})}V=this.options.navigationEnabled,this.options.navigationEnabled&&"orbit"!==L&&u(r)},remove:function(e){this.options.navigationEnabled&&"orbit"!==L&&c()},position:function(t){V!==this.options.navigationEnabled&&"orbit"!==L&&(this.options.navigationEnabled?u(t):c(),V=this.options.navigationEnabled),k!==this.options.keyboardEnabled&&(this.options.keyboardEnabled&&"firstperson"==L?h():g(),k=this.options.keyboardEnabled),D&&(D.update(),t.position.copy(D.offset)),j&&("orbit"===L&&j.position.set(0,0,z),j.updateMatrix(),R(e,j));var r=navigator.getGamepads(),n=(0,s.default)(r).find(function(e){return r[e]&&"Daydream Controller"===r[e].id});N&&C?C.update():T&&!n&&T.update(e);var i=new p.Vector3(0,0,-1).applyQuaternion(H.quaternion),a=Math.min(i.y,0),o=1-Math.sqrt(1-a*a);this.options.planeEnabled&&(A.material.opacity=o);Math.round(2*t.position.x),t.position.x,Math.round(2*t.position.z),t.position.z;t.updateMatrix()}},tool:{controllerupdate:function(e){e.states.forEach(M)}},activate:function(){var t=this,r=e.getTranslator();if(L=(0,_.get)(e,{scene:!0,evalPlug:"Player",property:"vrMode"}),"orbit"!==L?(U=(0,y.isCommandActive)(e,"firstPersonMode"),R=i):R=a,x){if(w=new p.VREffect(r.renderer),w.setVRDisplay(x),r.externals.vrEffect=w,!x.capabilities.canPresent)return;return w.requestPresent().then(function(){return B=(0,y.getCommands)(e).firstPersonMode.options.movementMode,U&&(t.options.keyboardEnabled&&"firstperson"==L?h():g()),k=t.options.keyboardEnabled,e.dispatch((0,v.useVrCamera)(!0))}).then(function(){var n=(0,v.getCamera)(e),i=(new p.Vector3).setFromMatrixPosition((0,_.getWorldTransform)(e,n));i.y=0;var a=(new p.Vector3).setFromMatrixPosition((0,b.default)(e,n)).sub(i);a.y=0,a.normalize();var o=(new p.Quaternion).setFromUnitVectors(new p.Vector3(0,0,-1),a);if(j=r.camera.clone(),"orbit"===L){var s=(0,v.getBoundingBox)(e).getBoundingSphere(),u=new p.Object3D;u.position.copy(s.center),u.add(j),u.updateMatrixWorld(!0),z=s.radius/Math.sin(j.fov*Math.PI/360)}D=new I.default(j);var l=(t.options.userHeightFeet+t.options.userHeightInches/12)/3.2808;return D.setUserHeight(l),D.setOffset(i),D.setRotationalOffset(o),r.externals.vrControls=D,D.setStanding(!0),D.resetPose(),D.update(),j.updateMatrix(),R(e,j),"orbit"!==L&&N&&(C=new p.VRController("Oculus Remote")),r.externals.controllers.forEach(function(e){e.standingMatrix=D.getStandingMatrix()}),e.dispatch((0,v.setRenderMode)(v.RENDER_MODES.vr)),e.setRequestAnimationFrame(x.requestAnimationFrame,x),x}).catch(function(e){throw console.log("Error Activating VR"),e})}},deactivate:function(){var t=e.getTranslator();x.isPresenting&&w.exitPresent(),e.setRequestAnimationFrame(),U||g(),e.dispatch((0,v.setRenderMode)(v.RENDER_MODES.normal)),e.dispatch((0,v.useVrCamera)(!1)),j=null,D=null,N&&(C=null),(0,_.filter)(e,{from:{id:S.controllerRootId}}).forEach(function(t){e.dispatch((0,S.deleteNode)(t))}),T&&T.removeAllColliders(),t.renderer.setScissorTest(!1)}}};var d=r(56),h=r(15),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(h);r(709);var g=r(483),m=n(g),v=r(8),y=r(43),M=r(51),w=n(M),x=r(59),b=n(x),T=r(71),S=(n(T),r(10)),_=r(7),E=r(20),A=r(253),I=n(A);window.WebVRConfig.CARDBOARD_UI_DISABLED=!0,window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED=!0,window.WebVRConfig.BUFFER_SCALE=1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=!1,o=!1;return n.isIE||window.navigator.getVRDisplays().then(function(t){if(t.length){var a=n.isIOS||n.isAndroidTablet;r=t[0].capabilities.canPresent&&!a,o=t[0].capabilities.hasExternalDisplay,e.dispatch((0,i.updateCommand)("vrSettings",{enabled:r}))}}),{label:"VR settings",activeLabel:"Exit VR Mode",enabled:r,display:{playerTools:!0},options:{},isActive:a.shouldDisplayVrSettings,activate:function(){this.options.icon="exit",e.dispatch((0,i.updateCommands)(i.MOUSE_CONTROLS,{enabled:!1})),e.dispatch((0,i.activateCommand)("vrMode"))},deactivate:function(){this.options.icon="vrSettings",e.dispatch((0,i.undoUpdateCommands)(i.MOUSE_CONTROLS)),e.dispatch((0,i.deactivateCommand)("vrMode"))}}};var n=r(56),i=r(43),a=r(8)},function(e,t,r){"use strict";function n(e,t,r,n){e.position.set(t.x,t.y,t.z),e.rotation.set(r.x,r.y,r.z,"ZYX"),e.scale.set(n.x,n.y,n.z)}function i(e,t){var r=new o.Vector3,i=new o.Quaternion,a=new o.Vector3;t.decompose(r,i,a),n(e,r,(new o.Vector3).copy((new o.Euler).setFromQuaternion(i,"ZYX")),a)}Object.defineProperty(t,"__esModule",{value:!0}),t.setMatrixOn=i;var a=r(15),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r){function n(t){function r(e){var t=n.nodes[e];if(t){var o=n.evaluatedNodes[e],s=y[e];s&&s._v===o._v&&s._ev===o._ev||(l.translate(e,o,t),a+=1),i[e]={_v:o._v,_ev:o._ev};var u=!0,f=!1,d=void 0;try{for(var h,p=(0,c.default)(t.children);!(u=(h=p.next()).done);u=!0){r(h.value)}}catch(e){f=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(f)throw d}}}}var n=(0,d.getEvalSceneGraph)(e,{forceFetchAssets:g});if(v===n._ev)return 0;var i={},a=0;r(t),n.nodes[d.virtualCameraId]&&r(d.virtualCameraId),n.nodes[d.vrCameraId]&&r(d.vrCameraId),n.nodes[d.controllerRootId]&&r(d.controllerRootId);var o=!0,s=!1,f=void 0;try{for(var h,p=(0,c.default)((0,u.default)(y));!(o=(h=p.next()).done);o=!0){var m=h.value;i[m]||l.deleteNode(m)}}catch(e){s=!0,f=e}finally{try{!o&&p.return&&p.return()}finally{if(s)throw f}}return y=i,v=n._ev,a}function i(){var e=!0,t=!1,r=void 0;try{for(var n,i=(0,c.default)((0,u.default)(y));!(e=(n=i.next()).done);e=!0){var a=n.value;l.deleteNode(a)}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}l.reset(),v=null,y={},m=null}var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s={},l=t(e,r,s),g=a.forceFetchAssets,m=(e.get("player"),void 0),v=null,y={};e.getIn(["player","renderingMode"]);return(0,o.default)({},p,l,{reset:i,update:function(){var t=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],(0,f.getSceneId)(e)),r=(0,f.getScenePhase)(e);if(!t)return void(m=null);(t!==m||r<f.SCENE_PHASES.RENDERING)&&(i(),m=t);var a=n(t),o=r>=f.SCENE_PHASES.RENDERING,s=r>=f.SCENE_PHASES.PRELOADING,u=r>=f.SCENE_PHASES.LOADED,c=r>=f.SCENE_PHASES.RENDERED;if(!o&&a&&e.dispatch((0,f.markRenderingScene)()),u&&!c&&e.dispatch((0,f.markRenderedScene)()),!u&&s&&(0,f.areAssetsLoaded)(e)){l.onLoad()&&e.dispatch((0,f.markLoaded)())}!s&&(0,f.areAssetsPreloaded)(e)&&e.dispatch((0,f.markPreloaded)()),s&&l.postTranslate(),e.dispatch((0,h.incrementTime)())}})}Object.defineProperty(t,"__esModule",{value:!0});var a=r(2),o=n(a),s=r(4),u=n(s),l=r(24),c=n(l);t.createTranslator=i;var f=r(20),d=r(10),h=r(67),p={onLoad:function(){},postTranslate:function(){},handleStateChanges:function(){}}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(){a&&a.update(),i.updateMatrix(),n(i)}function n(t){var r=(0,s.getCamera)(e),n=(0,h.default)(e),i=(new o.Vector3).setFromMatrixPosition(n),a=i.sub(t.position).length();i.set(0,0,-a).applyQuaternion(t.quaternion).add(t.position);var c=new o.Vector3(0,1,0).applyQuaternion(t.quaternion);n.setPosition(i),(0,u.get)(e,{id:r,evalPlug:"Camera"}).upPosition=c,e.dispatch((0,l.set)([r,"Transform",0,"rotation"],(0,f.default)(t.matrix.clone()).rotation)),(0,u.get)(e,{id:r,evalPlug:"Transform"}).target||e.dispatch((0,l.merge)([l.virtualTargetId,"Transform",0],(0,f.default)(n)))}var i=new o.Camera,a=new g.default(i);return t.vrControls=a,window.addEventListener("deviceorientation",r),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(15),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(a),s=r(8),u=r(7),l=r(10),c=r(51),f=n(c),d=r(59),h=n(d),p=r(253),g=n(p)},function(e,t,r){"use strict";function n(e,t,r,n,i){u.Object3D.call(this),this.className="ArrowHelper",this.light=e,void 0===r&&(r=16777215),void 0===t&&(t=1),void 0===n&&(n=.2*t),void 0===i&&(i=.2*n);var a=new u.CylinderGeometry(.15,.15,.5,10,1),o=new u.CylinderGeometry(0,.5,.5,5,1);this.cylinder1=new u.Mesh(a,new u.MeshBasicMaterial({color:r})),this.cylinder1.matrixAutoUpdate=!1,this.add(this.cylinder1),this.cone1=new u.Mesh(o,new u.MeshBasicMaterial({color:r})),this.cone1.matrixAutoUpdate=!1,this.add(this.cone1),this.setLength(t,n,i),this.update()}function i(e,t){u.Object3D.call(this),this.isHelper=!0,this.light=e,this.light.updateMatrixWorld(),this.arrow=new n(this.light,t),this.add(this.arrow),this.update()}Object.defineProperty(t,"__esModule",{value:!0});var a=r(48),o=function(e){return e&&e.__esModule?e:{default:e}}(a);t.DirectionalLightHelper=i;var s=r(15),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s);n.prototype=(0,o.default)(u.Object3D.prototype),n.prototype.update=function(){var e=new u.Vector3,t=void 0;return function(){var r=new u.Vector3(0,0,-1).applyQuaternion(this.light.quaternion);r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(r.z,0,-r.x).normalize(),t=Math.acos(r.y),this.quaternion.setFromAxisAngle(e,t))}}(),n.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.cylinder1.scale.set(r,e,r),this.cylinder1.updateMatrix(),this.cone1.scale.set(r,t,r),this.cone1.position.y=e/4,this.cone1.updateMatrix()},n.prototype.setColor=function(e){this.cylinder1.material.color.setHex(e),this.cone1.material.color.setHex(e)},i.prototype=(0,o.default)(u.Object3D.prototype),i.prototype.update=function(){return function(){this.position.set(this.light.position.x,this.light.position.y,this.light.position.z),this.arrow.update()}}()},function(e,t,r){"use strict";function n(e,t,r){this.state=h.INACTIVE,this.stateChanged=!1,this.colliders=[],this.position=null,this.camera=t,this.manipulatorsObject=r,this.error=null;var n=this;if(!this.reticleMoveRoot&&!this.error){var i=void 0,o=void 0,s=void 0,d=void 0;e.dispatch((0,u.fetch)(f,null,{ignoreErrorMessage:!0})).then(function(){var t=(0,l.find)(e,{from:{id:f},name:"IMPORT_NULL"});s=(0,l.find)(e,{from:{id:f},name:"RETICLE"}),d=(0,l.find)(e,{from:{id:f},name:"DISABLE"}),o=(0,l.find)(e,{from:{id:f},name:"RETICLE_MATERIAL"}),i=(0,l.find)(e,{from:{id:t},name:"RETICLE_ROOT"});var r=(0,l.filter)(e,{from:{id:t}});return e.dispatch((0,c.clone)(r,(0,a.default)({},t,c.controllerRootId),{cloneDependencies:!0}))}).then(function(t){n.reticleMoveRoot=t[i],n.reticleMaterialId=t[o],n.reticleId=t[s],n.disableId=t[d],n.changeVisibility(e)}).catch(function(e){n.error=e})}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(19),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n;var o=r(15),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(o),u=r(20),l=r(7),c=r(10),f={"Oculus Touch (Left)":"8ec601db-39ca-490d-82b3-9d32725f0a66","Daydream Controller":"a2810b47-5787-420c-8384-d386e336466a","Oculus Touch (Right)":"93ed5b59-8d2d-4e4d-95ca-c6b693d1027a","VR Reticle":"804a38b2-47cb-4489-beae-8a76cb6dca27","OpenVR Gamepad":"abf474c1-7010-46fd-a6da-15097cf95aeb"}["VR Reticle"],d=new s.Vector3(0,1,0),h={ACTIVE:"active",INACTIVE:"inactive",DISABLED:"disalbed"};n.prototype={constructor:n,getReticlePosition:function(){return this.position},addCollider:function(e){this.colliders.push(e)},removeCollider:function(e){var t=this.colliders.indexOf(e);t>-1&&this.colliders.splice(t,1)},removeAllColliders:function(){this.colliders=[]},getIntersects:function(e){var t=new s.Vector3,r=new s.Vector3;return e?(t=new s.Vector3(0,0,-1).applyQuaternion(e.orientation),r=e.position):(this.camera.getWorldDirection(t),r=this.camera.position),new s.Raycaster(r,t).intersectObjects(this.colliders)},highlight:function(e,t){t?e.dispatch((0,l.set)({id:this.reticleMaterialId,plug:"Material",property:"emissiveColor"},{r:0,g:1,b:0})):e.dispatch((0,l.set)({id:this.reticleMaterialId,plug:"Material",property:"emissiveColor"},{r:.6,g:.6,b:.6}))},changeVisibility:function(e){this.state===h.ACTIVE?(e.dispatch((0,l.set)({id:this.reticleId,plug:"Properties",property:"visible"},!0)),e.dispatch((0,l.set)({id:this.disableId,plug:"Properties",property:"visible"},!1))):this.state===h.INACTIVE?(e.dispatch((0,l.set)({id:this.reticleId,plug:"Properties",property:"visible"},!1)),e.dispatch((0,l.set)({id:this.disableId,plug:"Properties",property:"visible"},!0))):this.state===h.DISABLED&&(e.dispatch((0,l.set)({id:this.reticleId,plug:"Properties",property:"visible"},!1)),e.dispatch((0,l.set)({id:this.disableId,plug:"Properties",property:"visible"},!1)))},update:function(e,t){if(this.camera){var r=this.getIntersects(t);if(r[0]){this.position=r[0].point,this.reticleMoveRoot&&e.dispatch((0,l.set)({id:this.reticleMoveRoot,plug:"Transform",property:"translation"},r[0].point));var n=(0,l.get)(e,{id:this.reticleMoveRoot,plug:"Transform",property:"rotation"});this.reticleMoveRoot&&e.dispatch((0,l.set)({id:this.reticleMoveRoot,plug:"Transform",property:"rotation"},{x:n.x,y:n.y-4,z:n.z})),this.manipulatorsObject.position&&this.position.sub(this.manipulatorsObject.position);1!==r[0].face.normal.dot(d)?(this.state!==h.INACTIVE&&(this.stateChanged=!0),this.state=h.INACTIVE):(this.state!==h.ACTIVE&&(this.stateChanged=!0),this.state=h.ACTIVE)}else this.state!==h.DISABLED&&(this.stateChanged=!0),this.state=h.DISABLED;this.stateChanged&&this.reticleId&&this.disableId&&(this.changeVisibility(e),this.stateChanged=!1)}}}},function(e,t,r){"use strict";function n(e,t){this.xform=t,this.f=e}function i(e,t){this.xform=t,this.f=e}function a(e){return function(t){return new n(e,t)}}function o(e){return function(t){return new i(e,t)}}function s(){var e=Array.prototype.slice.call(arguments);return function(t){for(var r=t,n=e.length-1;n>=0;n--)r=e[n](r);return r}}Object.defineProperty(t,"__esModule",{value:!0}),t.map=a,t.filter=o,t.compose=s,n.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},n.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},n.prototype["@@transducer/step"]=function(e,t){return this.xform["@@transducer/step"](e,this.f(t))},i.prototype["@@transducer/init"]=function(){return this.xform["@@transducer/init"]()},i.prototype["@@transducer/result"]=function(e){return this.xform["@@transducer/result"](e)},i.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xform["@@transducer/step"](e,t):e}},function(e,t,r){"use strict";function n(e,t){var r=(0,a.default)({},t);return e.forEach(function(e){return delete r[e]}),r}Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n},function(e,t,r){"use strict";function n(e){return!!(e&&e.constructor&&e.call&&e.apply)}function i(e,t){return A(function(t,r){r(e(t.val))},[t])}function a(e,t){return A(function(t){e(t.val)},[t])}function o(e){return i(e,this)}function s(e){var t=this;return A(function(e,t,r){r(e.val(t.val))},[t,e])}function u(e){return e.depsMet=e.deps.every(function(e){return e.hasVal}),!e.depsMet}function l(e){if(!(!0!==e.depsMet&&u(e)||void 0!==e.end&&!0===e.end.val)){if(void 0!==D)return void C.push(e);D=e,e.depsChanged&&(e.fnArgs[e.fnArgs.length-1]=e.depsChanged);var t=e.fn.apply(e.fn,e.fnArgs);void 0!==t&&e(t),D=void 0,void 0!==e.depsChanged&&(e.depsChanged=[]),e.shouldUpdate=!1,!1===j&&d()}}function c(e){var t,r=e.listeners;if(!1===e.queued){for(e.queued=!0,t=0;t<r.length;++t)c(r[t]);P[++z]=e}}function f(e){var t,r,n,i=e.listeners;for(t=0;t<i.length;++t)n=i[t],n.end===e?T(n):(void 0!==n.depsChanged&&n.depsChanged.push(e),n.shouldUpdate=!0,c(n));for(;z>=0;--z)r=P[z],!0===r.shouldUpdate&&l(r),r.queued=!1}function d(){for(j=!0;C.length>0;){var e=C.shift();e.vals.length>0&&(e.val=e.vals.shift()),f(e)}j=!1}function h(e){return n(e)&&"hasVal"in e}function p(){return"stream("+this.val+")"}function g(e,t){if(void 0!==t&&null!==t&&n(t.then))return void t.then(e);e.val=t,e.hasVal=!0,void 0===D?(j=!0,f(e),C.length>0?d():j=!1):D===e?m(e,e.listeners):(e.vals.push(t),C.push(e))}function m(e,t){var r,n;for(r=0;r<t.length;++r)n=t[r],n.end!==e?(void 0!==n.depsChanged&&n.depsChanged.push(e),n.shouldUpdate=!0):T(n)}function v(){function e(t){return arguments.length>0?(g(e,t),e):e.val}return e.hasVal=!1,e.val=void 0,e.vals=[],e.listeners=[],e.queued=!1,e.end=void 0,e.map=o,e.ap=s,e.of=E,e.toString=p,e}function y(e,t){for(var r=0;r<e.length;++r)e[r].listeners.push(t)}function M(e,t){var r=v();return r.fn=t,r.deps=e,r.depsMet=!1,r.depsChanged=e.length>0?[]:void 0,r.shouldUpdate=!1,y(e,r),r}function w(e){return!1===e.depsMet&&(e.depsMet=!0,l(e)),e}function x(e,t){t[t.indexOf(e)]=t[t.length-1],t.length--}function b(e){for(var t=0;t<e.deps.length;++t)x(e,e.deps[t].listeners);e.deps.length=0}function T(e){void 0!==e.deps&&b(e),void 0!==e.end&&b(e.end)}function S(e,t){return b(t.end),e.listeners.push(t.end),t.end.deps.push(e),t}function _(){return!0}function E(e){var t=M([],_),r=v();return r.end=t,r.fnArgs=[],t.listeners.push(r),arguments.length>0&&r(e),r}function A(e,t){var r,n,i,a,o=M([],_);for(i=[],a=[],r=0;r<t.length;++r)void 0!==t[r]&&(i.push(t[r]),void 0!==t[r].end&&a.push(t[r].end));return n=M(i,e),n.depsChanged=[],n.fnArgs=n.deps.concat([n,n.depsChanged]),n.end=o,o.listeners.push(n),y(a,o),o.deps=a,l(n),n}function I(){}Object.defineProperty(t,"__esModule",{value:!0});var D,L=r(489),N=function(e){return e&&e.__esModule?e:{default:e}}(L),C=[],O=(0,N.default)(3,function(e,t,r){var n=A(function(r,n){n(t=e(t,r.val))},[r]);return n.hasVal||n(t),n}),R=(0,N.default)(2,function(e,t){var r=w(A(function(e,t,r,n){n[0]?r(n[0]()):e.hasVal?r(e.val):t.hasVal&&r(t.val)},[e,t]));return S(A(function(){return!0},[e.end,t.end]),r),r}),P=[],z=-1,j=!1,U=(0,N.default)(2,function(e,t){return e=e(new I),A(function(t,r){var n=e["@@transducer/step"](void 0,t.val);return n&&!0===n["@@transducer/reduced"]?(r.end(!0),n["@@transducer/value"]):n},[t])});I.prototype["@@transducer/init"]=function(){},I.prototype["@@transducer/result"]=function(){},I.prototype["@@transducer/step"]=function(e,t){return t},t.default={stream:E,combine:(0,N.default)(2,A),isStream:h,transduce:U,merge:R,scan:O,endsOn:S,map:(0,N.default)(2,i),on:(0,N.default)(2,a),curryN:N.default,immediate:w}},function(e,t,r){"use strict";function n(){function e(e,t,r){return(i[e]||(i[e]=[])).push({fn:t,ctx:r}),this}function t(t,r,i){function a(){n(t,a),r.apply(i,arguments)}return a._=r,e(t,a,i)}function r(e){var t=[].slice.call(arguments,1),r=(i[e]||[]).slice(),n=0,a=r.length;for(n;n<a;n++)r[n].fn.apply(r[n].ctx,t);return this}function n(e,t){var r=i[e],n=[];if(r&&t)for(var a=0,o=r.length;a<o;a++)r[a].fn!==t&&r[a].fn._!==t&&n.push(r[a]);return n.length?i[e]=n:delete i[e],this}var i={};return{on:e,once:t,emit:r,off:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";var n=n||{};n.OutWindow=function(){this._windowSize=0},n.OutWindow.prototype.create=function(e){this._buffer&&this._windowSize===e||(this._buffer=[]),this._windowSize=e,this._pos=0,this._streamPos=0},n.OutWindow.prototype.flush=function(){var e=this._pos-this._streamPos;if(0!==e){for(;e--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0),this._streamPos=this._pos}},n.OutWindow.prototype.releaseStream=function(){this.flush(),this._stream=null},n.OutWindow.prototype.setStream=function(e){this.releaseStream(),this._stream=e},n.OutWindow.prototype.init=function(e){e||(this._streamPos=0,this._pos=0)},n.OutWindow.prototype.copyBlock=function(e,t){var r=this._pos-e-1;for(r<0&&(r+=this._windowSize);t--;)r>=this._windowSize&&(r=0),this._buffer[this._pos++]=this._buffer[r++],this._pos>=this._windowSize&&this.flush()},n.OutWindow.prototype.putByte=function(e){this._buffer[this._pos++]=e,this._pos>=this._windowSize&&this.flush()},n.OutWindow.prototype.getByte=function(e){var t=this._pos-e-1;return t<0&&(t+=this._windowSize),this._buffer[t]},n.RangeDecoder=function(){},n.RangeDecoder.prototype.setStream=function(e){this._stream=e},n.RangeDecoder.prototype.releaseStream=function(){this._stream=null},n.RangeDecoder.prototype.init=function(){var e=5;for(this._code=0,this._range=-1;e--;)this._code=this._code<<8|this._stream.readByte()},n.RangeDecoder.prototype.decodeDirectBits=function(e){for(var t,r=0,n=e;n--;)this._range>>>=1,t=this._code-this._range>>>31,this._code-=this._range&t-1,r=r<<1|1-t,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return r},n.RangeDecoder.prototype.decodeBit=function(e,t){var r=e[t],n=(this._range>>>11)*r;return(2147483648^this._code)<(2147483648^n)?(this._range=n,e[t]+=2048-r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0):(this._range-=n,this._code-=n,e[t]-=r>>>5,0==(4278190080&this._range)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),1)},n.initBitModels=function(e,t){for(;t--;)e[t]=1024},n.BitTreeDecoder=function(e){this._models=[],this._numBitLevels=e},n.BitTreeDecoder.prototype.init=function(){n.initBitModels(this._models,1<<this._numBitLevels)},n.BitTreeDecoder.prototype.decode=function(e){for(var t=1,r=this._numBitLevels;r--;)t=t<<1|e.decodeBit(this._models,t);return t-(1<<this._numBitLevels)},n.BitTreeDecoder.prototype.reverseDecode=function(e){for(var t,r=1,n=0,i=0;i<this._numBitLevels;++i)t=e.decodeBit(this._models,r),r=r<<1|t,n|=t<<i;return n},n.reverseDecode2=function(e,t,r,n){for(var i,a=1,o=0,s=0;s<n;++s)i=r.decodeBit(e,t+a),a=a<<1|i,o|=i<<s;return o},n.LenDecoder=function(){this._choice=[],this._lowCoder=[],this._midCoder=[],this._highCoder=new n.BitTreeDecoder(8),this._numPosStates=0},n.LenDecoder.prototype.create=function(e){for(;this._numPosStates<e;++this._numPosStates)this._lowCoder[this._numPosStates]=new n.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new n.BitTreeDecoder(3)},n.LenDecoder.prototype.init=function(){var e=this._numPosStates;for(n.initBitModels(this._choice,2);e--;)this._lowCoder[e].init(),this._midCoder[e].init();this._highCoder.init()},n.LenDecoder.prototype.decode=function(e,t){return 0===e.decodeBit(this._choice,0)?this._lowCoder[t].decode(e):0===e.decodeBit(this._choice,1)?8+this._midCoder[t].decode(e):16+this._highCoder.decode(e)},n.Decoder2=function(){this._decoders=[]},n.Decoder2.prototype.init=function(){n.initBitModels(this._decoders,768)},n.Decoder2.prototype.decodeNormal=function(e){var t=1;do{t=t<<1|e.decodeBit(this._decoders,t)}while(t<256);return 255&t},n.Decoder2.prototype.decodeWithMatchByte=function(e,t){var r,n,i=1;do{if(r=t>>7&1,t<<=1,n=e.decodeBit(this._decoders,(1+r<<8)+i),i=i<<1|n,r!==n){for(;i<256;)i=i<<1|e.decodeBit(this._decoders,i);break}}while(i<256);return 255&i},n.LiteralDecoder=function(){},n.LiteralDecoder.prototype.create=function(e,t){var r;if(!this._coders||this._numPrevBits!==t||this._numPosBits!==e)for(this._numPosBits=e,this._posMask=(1<<e)-1,this._numPrevBits=t,this._coders=[],r=1<<this._numPrevBits+this._numPosBits;r--;)this._coders[r]=new n.Decoder2},n.LiteralDecoder.prototype.init=function(){for(var e=1<<this._numPrevBits+this._numPosBits;e--;)this._coders[e].init()},n.LiteralDecoder.prototype.getDecoder=function(e,t){return this._coders[((e&this._posMask)<<this._numPrevBits)+((255&t)>>>8-this._numPrevBits)]},n.Decoder=function(){this._outWindow=new n.OutWindow,this._rangeDecoder=new n.RangeDecoder,this._isMatchDecoders=[],this._isRepDecoders=[],this._isRepG0Decoders=[],this._isRepG1Decoders=[],this._isRepG2Decoders=[],this._isRep0LongDecoders=[],this._posSlotDecoder=[],this._posDecoders=[],this._posAlignDecoder=new n.BitTreeDecoder(4),this._lenDecoder=new n.LenDecoder,this._repLenDecoder=new n.LenDecoder,this._literalDecoder=new n.LiteralDecoder,this._dictionarySize=-1,this._dictionarySizeCheck=-1,this._posSlotDecoder[0]=new n.BitTreeDecoder(6),this._posSlotDecoder[1]=new n.BitTreeDecoder(6),this._posSlotDecoder[2]=new n.BitTreeDecoder(6),this._posSlotDecoder[3]=new n.BitTreeDecoder(6)},n.Decoder.prototype.setDictionarySize=function(e){return!(e<0)&&(this._dictionarySize!==e&&(this._dictionarySize=e,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096))),!0)},n.Decoder.prototype.setLcLpPb=function(e,t,r){var n=1<<r;return!(e>8||t>4||r>4)&&(this._literalDecoder.create(t,e),this._lenDecoder.create(n),this._repLenDecoder.create(n),this._posStateMask=n-1,!0)},n.Decoder.prototype.init=function(){var e=4;for(this._outWindow.init(!1),n.initBitModels(this._isMatchDecoders,192),n.initBitModels(this._isRep0LongDecoders,192),n.initBitModels(this._isRepDecoders,12),n.initBitModels(this._isRepG0Decoders,12),n.initBitModels(this._isRepG1Decoders,12),n.initBitModels(this._isRepG2Decoders,12),n.initBitModels(this._posDecoders,114),this._literalDecoder.init();e--;)this._posSlotDecoder[e].init();this._lenDecoder.init(),this._repLenDecoder.init(),this._posAlignDecoder.init(),this._rangeDecoder.init()},n.Decoder.prototype.decode=function(e,t,r){var i,a,o,s,u,l,c=0,f=0,d=0,h=0,p=0,g=0,m=0;for(this._rangeDecoder.setStream(e),this._outWindow.setStream(t),this.init();r<0||g<r;)if(i=g&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(c<<4)+i))a=this._literalDecoder.getDecoder(g++,m),m=c>=7?a.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(f)):a.decodeNormal(this._rangeDecoder),this._outWindow.putByte(m),c=c<4?0:c-(c<10?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,c))o=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,c)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(c<<4)+i)&&(c=c<7?9:11,o=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,c)?s=d:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,c)?s=h:(s=p,p=h),h=d),d=f,f=s),0===o&&(o=2+this._repLenDecoder.decode(this._rangeDecoder,i),c=c<7?8:11);else if(p=h,h=d,d=f,o=2+this._lenDecoder.decode(this._rangeDecoder,i),c=c<7?7:10,(u=this._posSlotDecoder[o<=5?o-2:3].decode(this._rangeDecoder))>=4){if(l=(u>>1)-1,f=(2|1&u)<<l,u<14)f+=n.reverseDecode2(this._posDecoders,f-u-1,this._rangeDecoder,l);else if(f+=this._rangeDecoder.decodeDirectBits(l-4)<<4,(f+=this._posAlignDecoder.reverseDecode(this._rangeDecoder))<0){if(-1===f)break;return!1}}else f=u;if(f>=g||f>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(f,o),g+=o,m=this._outWindow.getByte(0)}return this._outWindow.flush(),this._outWindow.releaseStream(),this._rangeDecoder.releaseStream(),!0},n.Decoder.prototype.setDecoderProperties=function(e){var t,r,n,i,a;return!(e.size<5)&&(t=e.readByte(),r=t%9,t=~~(t/9),n=t%5,i=~~(t/5),!!this.setLcLpPb(r,n,i)&&(a=e.readByte(),a|=e.readByte()<<8,a|=e.readByte()<<16,a+=16777216*e.readByte(),this.setDictionarySize(a)))},n.decompress=function(e,t,r,i){var a=new n.Decoder;if(!a.setDecoderProperties(e))throw"Incorrect stream properties";if(!a.decode(t,r,i))throw"Error in data stream";return!0},n.decompressFile=function(e,t){var r,i=new n.Decoder;if(!i.setDecoderProperties(e))throw"Incorrect stream properties";if(r=e.readByte(),r|=e.readByte()<<8,r|=e.readByte()<<16,r+=16777216*e.readByte(),e.readByte(),e.readByte(),e.readByte(),e.readByte(),!i.decode(e,t,r))throw"Error in data stream";return!0},e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(38),i=function(e){return e&&e.__esModule?e:{default:e}}(n),a=function(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,r){return t.apply(this,arguments)};case 3:return function(e,r,n){return t.apply(this,arguments)};case 4:return function(e,r,n,i){return t.apply(this,arguments)};case 5:return function(e,r,n,i,a){return t.apply(this,arguments)};case 6:return function(e,r,n,i,a,o){return t.apply(this,arguments)};case 7:return function(e,r,n,i,a,o,s){return t.apply(this,arguments)};case 8:return function(e,r,n,i,a,o,s,u){return t.apply(this,arguments)};case 9:return function(e,r,n,i,a,o,s,u,l){return t.apply(this,arguments)};case 10:return function(e,r,n,i,a,o,s,u,l,c){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},o=function(e){return null!=e&&"object"===(void 0===e?"undefined":(0,i.default)(e))&&!0===e["@@functional/placeholder"]},s=function(e){return function t(r){return 0===arguments.length||o(r)?t:e.apply(this,arguments)}},u=function e(t,r,n){return function(){for(var i=[],s=0,u=t,l=0;l<r.length||s<arguments.length;){var c;l<r.length&&(!o(r[l])||s>=arguments.length)?c=r[l]:(c=arguments[s],s+=1),i[l]=c,o(c)||(u-=1),l+=1}return u<=0?n.apply(this,i):a(u,e(t,i,n))}},l=function(e){return function t(r,n){switch(arguments.length){case 0:return t;case 1:return o(r)?t:s(function(t){return e(r,t)});default:return o(r)&&o(n)?t:o(r)?s(function(t){return e(t,n)}):o(n)?s(function(t){return e(r,t)}):e(r,n)}}}(function(e,t){return 1===e?s(t):a(e,u(e,[],t))});t.default=l},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t,r,n,a){function s(e){if(t.length)return i(t[0],t.slice(1),r,n,{contentType:u,method:l,body:f});var a={status:e.status,err:e,message:e.message};if("json"===u)try{a.body=JSON.parse(e.response)}catch(e){}n(a)}var u=a.contentType,l=a.method,f=a.body,d=a.onReadyStateChange,h=a.withCredentials,p=a.responseURL;if("img"===u){var g=new Image;g.crossOrigin="anonymous",g.addEventListener("load",function(e){r(g)}),g.addEventListener("error",s),g.src=e}else if("font"===u)c.load(e,function(e,t){if(e)return n(e);r(t)});else{if("external"===u)throw new Error("External Script support not allowed in the browser");var m=new XMLHttpRequest,v=l||"GET";m.withCredentials=h||"GET"!==v,m.open(v,e,!0),!f||f instanceof FormData||(m.setRequestHeader("Content-Type","application/json"),"string"!=typeof f&&(f=(0,o.default)(f))),"binary"===u&&(m.responseType="arraybuffer"),d&&(m.onreadystatechange=function(){d(m)}),m.onload=function(e){var t=m.response;m.status>=200&&m.status<400||0===m.status&&m.response?("json"===u&&(t=JSON.parse(t)),r(t),p&&m.responseURL&&p(m.responseURL)):s(m)},m.onerror=s,m.send(f)}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(47),o=n(a),s=r(254),u=n(s),l=r(210),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(l),f=(0,u.default)(i);t.default=f},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return(0,c.default)(function(t){return function(){return e(t.apply(void 0,arguments))}},t)}function a(e,t){return(0,c.default)(function(t){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.apply(void 0,[e].concat(n))}},t)}function o(e,t){return(0,c.default)(function(t,r){return(0,u.default)({},i(e.dispatch,t.actions),a(e,t.selectors))},t)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),u=n(s);t.default=o;var l=r(106),c=n(l)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){var t=(0,i.default)(e),r=t.reduce(function(t,r){return t.set(r,e[r]())},(0,a.Map)());return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,i=arguments[1],o=arguments[2],s=arguments[3];return t.reduce(function(t,r){var n=t.get(r),u=e[r](n,i,t,o,s);return(0,a.is)(n,u)?t:t.set(r,u)},n)}};var a=r(32)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var r=(0,o.default)(e),n=(0,u.default)(r);return n.dispatch=t(n),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=r(492),o=n(a),s=r(128),u=n(s)},function(e,t,r){"use strict";function n(e){if(null!==e&&"object"===(void 0===e?"undefined":(0,a.default)(e)))return"function"==typeof e.then}Object.defineProperty(t,"__esModule",{value:!0});var i=r(38),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=n},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=a(e);return{toJSON:function(e){return t.write(e)},fromJSON:s}}function a(e){var t=l.default.map([f.default.Map,l.default.makeWriteHandler({tag:function(){return"iM"},rep:function(t){var r=0,n=new Array(2*t.size);return e&&(t=t.filter(e)),t.forEach(function(e,t){n[r++]=t,n[r++]=e}),n}}),f.default.List,l.default.makeWriteHandler({tag:function(){return"iL"},rep:function(t){return e&&(t=t.filter(e)),t.toArray()}}),Function,l.default.makeWriteHandler({tag:function(){return"_"},rep:function(){return null}}),Float32Array,l.default.makeWriteHandler({tag:function(){return"f32"},rep:function(e){for(var t="",r=new Uint8Array(e.buffer),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return(0,g.default)(t)}})]);return l.default.writer("json",{handlers:t})}function o(e){return v.write(e)}function s(e){return m.read(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withFilter=i,t.toJSON=o,t.fromJSON=s;var u=r(698),l=n(u),c=r(32),f=n(c),d=r(319),h=n(d),p=r(507),g=n(p),m=function(){return l.default.reader("json",{mapBuilder:{init:function(){return{}},add:function(e,t,r){return e[t]=r,e},finalize:function(e){return e}},handlers:{iM:function(e){for(var t={},r=0;r<e.length;r+=2)t[e[r]]=e[r+1];return new f.default.Map(t)},iL:function(e){return f.default.List(e)},f32:function(e){for(var t=(0,h.default)(e),r=t.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=t.charCodeAt(i);return new Float32Array(n.buffer)}}})}(),v=a(!1)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(h.length>0){var t=h.shift();t.meta.idx=e,p[e].postMessage(t)}else p[e].postMessage("CLOSE"),delete p[e]}function a(e,t,r,n){for(var a=-1,o=p.length,u=0;u<o;u++)if(!p[u]){a=u;break}if(h.length>0||"undefined"!=typeof Worker&&Worker&&o>=m&&-1===a)h.push({buffer:e,meta:t});else if("undefined"!=typeof Worker&&Worker&&"safari"!==l.default.name){var f=new Worker(URL.createObjectURL(g)),d=-1===a?p.length:a;f.onmessage=function(e){"SUCCESS"===e.data.type?(r(e.data.buffer,e.data.meta),i(e.data.meta.idx)):n(e.data.error,e.data.meta)},f.postMessage({buffer:e,meta:(0,s.default)({},t,{idx:d})}),p[d]=f}else{var v={data:new Uint8Array(e),offset:0,readByte:function(){return this.data[this.offset++]}},y={data:[],offset:0,writeByte:function(e){this.data[this.offset++]=e}};try{c.decompressFile(v,y);var M=new Uint8Array(y.data);r(M.buffer,t)}catch(e){n(e)}}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=n(o);t.lzmaDecompressor=a;var u=r(56),l=n(u),c=r(488),f='\n//From Repository: https://github.com/jcmellado/js-lzma\n/*\nCopyright (c) 2011 Juan Mellado\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the "Software"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\n/*\nReferences:\n- "LZMA SDK" by Igor Pavlov\n  http://www.7-zip.org/sdk.html\n*/\n\nvar LZMA = LZMA || {};\n\nLZMA.OutWindow = function(){\n  this._windowSize = 0;\n};\n\nLZMA.OutWindow.prototype.create = function(windowSize){\n  if ( (!this._buffer) || (this._windowSize !== windowSize) ){\n    this._buffer = [];\n  }\n  this._windowSize = windowSize;\n  this._pos = 0;\n  this._streamPos = 0;\n};\n\nLZMA.OutWindow.prototype.flush = function(){\n  var size = this._pos - this._streamPos;\n  if (size !== 0){\n    while(size --){\n      this._stream.writeByte(this._buffer[this._streamPos ++]);\n    }\n    if (this._pos >= this._windowSize){\n      this._pos = 0;\n    }\n    this._streamPos = this._pos;\n  }\n};\n\nLZMA.OutWindow.prototype.releaseStream = function(){\n  this.flush();\n  this._stream = null;\n};\n\nLZMA.OutWindow.prototype.setStream = function(stream){\n  this.releaseStream();\n  this._stream = stream;\n};\n\nLZMA.OutWindow.prototype.init = function(solid){\n  if (!solid){\n    this._streamPos = 0;\n    this._pos = 0;\n  }\n};\n\nLZMA.OutWindow.prototype.copyBlock = function(distance, len){\n  var pos = this._pos - distance - 1;\n  if (pos < 0){\n    pos += this._windowSize;\n  }\n  while(len --){\n    if (pos >= this._windowSize){\n      pos = 0;\n    }\n    this._buffer[this._pos ++] = this._buffer[pos ++];\n    if (this._pos >= this._windowSize){\n      this.flush();\n    }\n  }\n};\n\nLZMA.OutWindow.prototype.putByte = function(b){\n  this._buffer[this._pos ++] = b;\n  if (this._pos >= this._windowSize){\n    this.flush();\n  }\n};\n\nLZMA.OutWindow.prototype.getByte = function(distance){\n  var pos = this._pos - distance - 1;\n  if (pos < 0){\n    pos += this._windowSize;\n  }\n  return this._buffer[pos];\n};\n\nLZMA.RangeDecoder = function(){\n};\n\nLZMA.RangeDecoder.prototype.setStream = function(stream){\n  this._stream = stream;\n};\n\nLZMA.RangeDecoder.prototype.releaseStream = function(){\n  this._stream = null;\n};\n\nLZMA.RangeDecoder.prototype.init = function(){\n  var i = 5;\n\n  this._code = 0;\n  this._range = -1;\n\n  while(i --){\n    this._code = (this._code << 8) | this._stream.readByte();\n  }\n};\n\nLZMA.RangeDecoder.prototype.decodeDirectBits = function(numTotalBits){\n  var result = 0, i = numTotalBits, t;\n\n  while(i --){\n    this._range >>>= 1;\n    t = (this._code - this._range) >>> 31;\n    this._code -= this._range & (t - 1);\n    result = (result << 1) | (1 - t);\n\n    if ( (this._range & 0xff000000) === 0){\n      this._code = (this._code << 8) | this._stream.readByte();\n      this._range <<= 8;\n    }\n  }\n\n  return result;\n};\n\nLZMA.RangeDecoder.prototype.decodeBit = function(probs, index){\n  var prob = probs[index],\n      newBound = (this._range >>> 11) * prob;\n\n  if ( (this._code ^ 0x80000000) < (newBound ^ 0x80000000) ){\n    this._range = newBound;\n    probs[index] += (2048 - prob) >>> 5;\n    if ( (this._range & 0xff000000) === 0){\n      this._code = (this._code << 8) | this._stream.readByte();\n      this._range <<= 8;\n    }\n    return 0;\n  }\n\n  this._range -= newBound;\n  this._code -= newBound;\n  probs[index] -= prob >>> 5;\n  if ( (this._range & 0xff000000) === 0){\n    this._code = (this._code << 8) | this._stream.readByte();\n    this._range <<= 8;\n  }\n  return 1;\n};\n\nLZMA.initBitModels = function(probs, len){\n  while(len --){\n    probs[len] = 1024;\n  }\n};\n\nLZMA.BitTreeDecoder = function(numBitLevels){\n  this._models = [];\n  this._numBitLevels = numBitLevels;\n};\n\nLZMA.BitTreeDecoder.prototype.init = function(){\n  LZMA.initBitModels(this._models, 1 << this._numBitLevels);\n};\n\nLZMA.BitTreeDecoder.prototype.decode = function(rangeDecoder){\n  var m = 1, i = this._numBitLevels;\n\n  while(i --){\n    m = (m << 1) | rangeDecoder.decodeBit(this._models, m);\n  }\n  return m - (1 << this._numBitLevels);\n};\n\nLZMA.BitTreeDecoder.prototype.reverseDecode = function(rangeDecoder){\n  var m = 1, symbol = 0, i = 0, bit;\n\n  for (; i < this._numBitLevels; ++ i){\n    bit = rangeDecoder.decodeBit(this._models, m);\n    m = (m << 1) | bit;\n    symbol |= bit << i;\n  }\n  return symbol;\n};\n\nLZMA.reverseDecode2 = function(models, startIndex, rangeDecoder, numBitLevels){\n  var m = 1, symbol = 0, i = 0, bit;\n\n  for (; i < numBitLevels; ++ i){\n    bit = rangeDecoder.decodeBit(models, startIndex + m);\n    m = (m << 1) | bit;\n    symbol |= bit << i;\n  }\n  return symbol;\n};\n\nLZMA.LenDecoder = function(){\n  this._choice = [];\n  this._lowCoder = [];\n  this._midCoder = [];\n  this._highCoder = new LZMA.BitTreeDecoder(8);\n  this._numPosStates = 0;\n};\n\nLZMA.LenDecoder.prototype.create = function(numPosStates){\n  for (; this._numPosStates < numPosStates; ++ this._numPosStates){\n    this._lowCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n    this._midCoder[this._numPosStates] = new LZMA.BitTreeDecoder(3);\n  }\n};\n\nLZMA.LenDecoder.prototype.init = function(){\n  var i = this._numPosStates;\n  LZMA.initBitModels(this._choice, 2);\n  while(i --){\n    this._lowCoder[i].init();\n    this._midCoder[i].init();\n  }\n  this._highCoder.init();\n};\n\nLZMA.LenDecoder.prototype.decode = function(rangeDecoder, posState){\n  if (rangeDecoder.decodeBit(this._choice, 0) === 0){\n    return this._lowCoder[posState].decode(rangeDecoder);\n  }\n  if (rangeDecoder.decodeBit(this._choice, 1) === 0){\n    return 8 + this._midCoder[posState].decode(rangeDecoder);\n  }\n  return 16 + this._highCoder.decode(rangeDecoder);\n};\n\nLZMA.Decoder2 = function(){\n  this._decoders = [];\n};\n\nLZMA.Decoder2.prototype.init = function(){\n  LZMA.initBitModels(this._decoders, 0x300);\n};\n\nLZMA.Decoder2.prototype.decodeNormal = function(rangeDecoder){\n  var symbol = 1;\n\n  do{\n    symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n  }while(symbol < 0x100);\n\n  return symbol & 0xff;\n};\n\nLZMA.Decoder2.prototype.decodeWithMatchByte = function(rangeDecoder, matchByte){\n  var symbol = 1, matchBit, bit;\n\n  do{\n    matchBit = (matchByte >> 7) & 1;\n    matchByte <<= 1;\n    bit = rangeDecoder.decodeBit(this._decoders, ( (1 + matchBit) << 8) + symbol);\n    symbol = (symbol << 1) | bit;\n    if (matchBit !== bit){\n      while(symbol < 0x100){\n        symbol = (symbol << 1) | rangeDecoder.decodeBit(this._decoders, symbol);\n      }\n      break;\n    }\n  }while(symbol < 0x100);\n\n  return symbol & 0xff;\n};\n\nLZMA.LiteralDecoder = function(){\n};\n\nLZMA.LiteralDecoder.prototype.create = function(numPosBits, numPrevBits){\n  var i;\n\n  if (this._coders\n    && (this._numPrevBits === numPrevBits)\n    && (this._numPosBits === numPosBits) ){\n    return;\n  }\n  this._numPosBits = numPosBits;\n  this._posMask = (1 << numPosBits) - 1;\n  this._numPrevBits = numPrevBits;\n\n  this._coders = [];\n\n  i = 1 << (this._numPrevBits + this._numPosBits);\n  while(i --){\n    this._coders[i] = new LZMA.Decoder2();\n  }\n};\n\nLZMA.LiteralDecoder.prototype.init = function(){\n  var i = 1 << (this._numPrevBits + this._numPosBits);\n  while(i --){\n    this._coders[i].init();\n  }\n};\n\nLZMA.LiteralDecoder.prototype.getDecoder = function(pos, prevByte){\n  return this._coders[( (pos & this._posMask) << this._numPrevBits)\n    + ( (prevByte & 0xff) >>> (8 - this._numPrevBits) )];\n};\n\nLZMA.Decoder = function(){\n  this._outWindow = new LZMA.OutWindow();\n  this._rangeDecoder = new LZMA.RangeDecoder();\n  this._isMatchDecoders = [];\n  this._isRepDecoders = [];\n  this._isRepG0Decoders = [];\n  this._isRepG1Decoders = [];\n  this._isRepG2Decoders = [];\n  this._isRep0LongDecoders = [];\n  this._posSlotDecoder = [];\n  this._posDecoders = [];\n  this._posAlignDecoder = new LZMA.BitTreeDecoder(4);\n  this._lenDecoder = new LZMA.LenDecoder();\n  this._repLenDecoder = new LZMA.LenDecoder();\n  this._literalDecoder = new LZMA.LiteralDecoder();\n  this._dictionarySize = -1;\n  this._dictionarySizeCheck = -1;\n\n  this._posSlotDecoder[0] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[1] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[2] = new LZMA.BitTreeDecoder(6);\n  this._posSlotDecoder[3] = new LZMA.BitTreeDecoder(6);\n};\n\nLZMA.Decoder.prototype.setDictionarySize = function(dictionarySize){\n  if (dictionarySize < 0){\n    return false;\n  }\n  if (this._dictionarySize !== dictionarySize){\n    this._dictionarySize = dictionarySize;\n    this._dictionarySizeCheck = Math.max(this._dictionarySize, 1);\n    this._outWindow.create( Math.max(this._dictionarySizeCheck, 4096) );\n  }\n  return true;\n};\n\nLZMA.Decoder.prototype.setLcLpPb = function(lc, lp, pb){\n  var numPosStates = 1 << pb;\n\n  if (lc > 8 || lp > 4 || pb > 4){\n    return false;\n  }\n\n  this._literalDecoder.create(lp, lc);\n\n  this._lenDecoder.create(numPosStates);\n  this._repLenDecoder.create(numPosStates);\n  this._posStateMask = numPosStates - 1;\n\n  return true;\n};\n\nLZMA.Decoder.prototype.init = function(){\n  var i = 4;\n\n  this._outWindow.init(false);\n\n  LZMA.initBitModels(this._isMatchDecoders, 192);\n  LZMA.initBitModels(this._isRep0LongDecoders, 192);\n  LZMA.initBitModels(this._isRepDecoders, 12);\n  LZMA.initBitModels(this._isRepG0Decoders, 12);\n  LZMA.initBitModels(this._isRepG1Decoders, 12);\n  LZMA.initBitModels(this._isRepG2Decoders, 12);\n  LZMA.initBitModels(this._posDecoders, 114);\n\n  this._literalDecoder.init();\n\n  while(i --){\n    this._posSlotDecoder[i].init();\n  }\n\n  this._lenDecoder.init();\n  this._repLenDecoder.init();\n  this._posAlignDecoder.init();\n  this._rangeDecoder.init();\n};\n\nLZMA.Decoder.prototype.decode = function(inStream, outStream, outSize){\n  var state = 0, rep0 = 0, rep1 = 0, rep2 = 0, rep3 = 0, nowPos64 = 0, prevByte = 0,\n      posState, decoder2, len, distance, posSlot, numDirectBits;\n\n  this._rangeDecoder.setStream(inStream);\n  this._outWindow.setStream(outStream);\n\n  this.init();\n\n  while(outSize < 0 || nowPos64 < outSize){\n    posState = nowPos64 & this._posStateMask;\n\n    if (this._rangeDecoder.decodeBit(this._isMatchDecoders, (state << 4) + posState) === 0){\n      decoder2 = this._literalDecoder.getDecoder(nowPos64 ++, prevByte);\n\n      if (state >= 7){\n        prevByte = decoder2.decodeWithMatchByte(this._rangeDecoder, this._outWindow.getByte(rep0) );\n      }else{\n        prevByte = decoder2.decodeNormal(this._rangeDecoder);\n      }\n      this._outWindow.putByte(prevByte);\n\n      state = state < 4? 0: state - (state < 10? 3: 6);\n\n    }else{\n\n      if (this._rangeDecoder.decodeBit(this._isRepDecoders, state) === 1){\n        len = 0;\n        if (this._rangeDecoder.decodeBit(this._isRepG0Decoders, state) === 0){\n          if (this._rangeDecoder.decodeBit(this._isRep0LongDecoders, (state << 4) + posState) === 0){\n            state = state < 7? 9: 11;\n            len = 1;\n          }\n        }else{\n          if (this._rangeDecoder.decodeBit(this._isRepG1Decoders, state) === 0){\n            distance = rep1;\n          }else{\n            if (this._rangeDecoder.decodeBit(this._isRepG2Decoders, state) === 0){\n              distance = rep2;\n            }else{\n              distance = rep3;\n              rep3 = rep2;\n            }\n            rep2 = rep1;\n          }\n          rep1 = rep0;\n          rep0 = distance;\n        }\n        if (len === 0){\n          len = 2 + this._repLenDecoder.decode(this._rangeDecoder, posState);\n          state = state < 7? 8: 11;\n        }\n      }else{\n        rep3 = rep2;\n        rep2 = rep1;\n        rep1 = rep0;\n\n        len = 2 + this._lenDecoder.decode(this._rangeDecoder, posState);\n        state = state < 7? 7: 10;\n\n        posSlot = this._posSlotDecoder[len <= 5? len - 2: 3].decode(this._rangeDecoder);\n        if (posSlot >= 4){\n\n          numDirectBits = (posSlot >> 1) - 1;\n          rep0 = (2 | (posSlot & 1) ) << numDirectBits;\n\n          if (posSlot < 14){\n            rep0 += LZMA.reverseDecode2(this._posDecoders,\n                rep0 - posSlot - 1, this._rangeDecoder, numDirectBits);\n          }else{\n            rep0 += this._rangeDecoder.decodeDirectBits(numDirectBits - 4) << 4;\n            rep0 += this._posAlignDecoder.reverseDecode(this._rangeDecoder);\n            if (rep0 < 0){\n              if (rep0 === -1){\n                break;\n              }\n              return false;\n            }\n          }\n        }else{\n          rep0 = posSlot;\n        }\n      }\n\n      if (rep0 >= nowPos64 || rep0 >= this._dictionarySizeCheck){\n        return false;\n      }\n\n      this._outWindow.copyBlock(rep0, len);\n      nowPos64 += len;\n      prevByte = this._outWindow.getByte(0);\n    }\n  }\n\n  this._outWindow.flush();\n  this._outWindow.releaseStream();\n  this._rangeDecoder.releaseStream();\n\n  return true;\n};\n\nLZMA.Decoder.prototype.setDecoderProperties = function(properties){\n  var value, lc, lp, pb, dictionarySize;\n\n  if (properties.size < 5){\n    return false;\n  }\n\n  value = properties.readByte();\n  lc = value % 9;\n  value = ~~(value / 9);\n  lp = value % 5;\n  pb = ~~(value / 5);\n\n  if ( !this.setLcLpPb(lc, lp, pb) ){\n    return false;\n  }\n\n  dictionarySize = properties.readByte();\n  dictionarySize |= properties.readByte() << 8;\n  dictionarySize |= properties.readByte() << 16;\n  dictionarySize += properties.readByte() * 16777216;\n\n  return this.setDictionarySize(dictionarySize);\n};\n\nLZMA.decompress = function(properties, inStream, outStream, outSize){\n  var decoder = new LZMA.Decoder();\n\n  if ( !decoder.setDecoderProperties(properties) ){\n    throw "Incorrect stream properties";\n  }\n\n  if ( !decoder.decode(inStream, outStream, outSize) ){\n    throw "Error in data stream";\n  }\n\n  return true;\n};\n\nLZMA.decompressFile = function(inStream, outStream){\n  var decoder = new LZMA.Decoder(), outSize;\n\n  if ( !decoder.setDecoderProperties(inStream) ){\n    throw "Incorrect stream properties";\n  }\n\n  outSize = inStream.readByte();\n  outSize |= inStream.readByte() << 8;\n  outSize |= inStream.readByte() << 16;\n  outSize += inStream.readByte() * 16777216;\n\n  inStream.readByte();\n  inStream.readByte();\n  inStream.readByte();\n  inStream.readByte();\n\n  if ( !decoder.decode(inStream, outStream, outSize) ){\n    throw "Error in data stream";\n  }\n\n  return true;\n};\n\n//export default LZMA;\n\n\n',d="\nfunction decompressBuffer(buffer){\n  var inStream = {\n    data: new Uint8Array(buffer),\n    offset: 0,\n    readByte: function() {\n      return this.data[this.offset++]\n    },\n  }\n  var outStream = {\n    data:[],\n    offset: 0,\n    writeByte: function(val) {\n      this.data[this.offset++] = val\n    },\n  }\n  LZMA.decompressFile(inStream, outStream);\n  var uintGeomArray = new Uint8Array(outStream.data);\n  return uintGeomArray.buffer;\n}\n\nself.onmessage = function( event ) {\n  if(event.data==='CLOSE') {\n    self.close();\n    return;\n  }\n\n  try {\n    var decompBuffer = decompressBuffer(event.data.buffer);\n    self.postMessage({type:'SUCCESS', buffer:decompBuffer, meta:event.data.meta});\n  } catch(e) {\n    self.postMessage({type:'FAILURE', error:e, meta:event.data.meta});\n  }\n\n};\n",h=[],p=[],g=void 0;try{g=new Blob([f,d],{type:"application/javascript"})}catch(e){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,g=new BlobBuilder,g.append(f),g.append(d),g=g.getBlob()}var m=Math.max(window.navigator.hardwareConcurrency-1,1)},function(e,t,r){e.exports={default:r(508),__esModule:!0}},function(e,t,r){e.exports={default:r(510),__esModule:!0}},function(e,t,r){e.exports={default:r(513),__esModule:!0}},function(e,t,r){e.exports={default:r(518),__esModule:!0}},function(e,t,r){e.exports={default:r(526),__esModule:!0}},function(e,t,r){e.exports={default:r(529),__esModule:!0}},function(e,t,r){e.exports={default:r(530),__esModule:!0}},function(e,t,r){e.exports={default:r(531),__esModule:!0}},function(e,t,r){e.exports={default:r(532),__esModule:!0}},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function a(e){var t,r,i,a,o,s=e.length;a=n(e),o=new f(3*s/4-a),r=a>0?s-4:s;var u=0;for(t=0;t<r;t+=4)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],o[u++]=i>>16&255,o[u++]=i>>8&255,o[u++]=255&i;return 2===a?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,o[u++]=255&i):1===a&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,o[u++]=i>>8&255,o[u++]=255&i),o}function o(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,r){for(var n,i=[],a=t;a<r;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],i.push(o(n));return i.join("")}function u(e){for(var t,r=e.length,n=r%3,i="",a=[],o=0,u=r-n;o<u;o+=16383)a.push(s(e,o,o+16383>u?u:o+16383));return 1===n?(t=e[r-1],i+=l[t>>2],i+=l[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=l[t>>10],i+=l[t>>4&63],i+=l[t<<2&63],i+="="),a.push(i),a.join("")}t.byteLength=i,t.toByteArray=a,t.fromByteArray=u;for(var l=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=d.length;h<p;++h)l[h]=d[h],c[d.charCodeAt(h)]=h;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t,r){(function(t){!function(){"use strict";function r(e){var r;return r=e instanceof t?e:new t(e.toString(),"binary"),r.toString("base64")}e.exports=r}()}).call(t,r(99).Buffer)},function(e,t,r){r(84),r(554),e.exports=r(9).Array.from},function(e,t,r){r(85),r(84),e.exports=r(552)},function(e,t,r){r(85),r(84),e.exports=r(553)},function(e,t,r){var n=r(9),i=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,r){r(139),r(84),r(85),r(556),r(576),r(575),r(574),e.exports=r(9).Map},function(e,t,r){r(557),e.exports=r(9).Math.log2},function(e,t,r){r(558),e.exports=r(9).Math.sign},function(e,t,r){r(559),e.exports=r(9).Math.trunc},function(e,t,r){r(560),e.exports=Math.pow(2,-52)},function(e,t,r){r(561),e.exports=r(9).Number.isInteger},function(e,t,r){r(562),e.exports=9007199254740991},function(e,t,r){r(563),e.exports=r(9).Object.assign},function(e,t,r){r(564);var n=r(9).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){r(565);var n=r(9).Object;e.exports=function(e,t){return n.defineProperties(e,t)}},function(e,t,r){r(566);var n=r(9).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){r(567),e.exports=r(9).Object.freeze},function(e,t,r){r(568),e.exports=r(9).Object.getPrototypeOf},function(e,t,r){r(569),e.exports=r(9).Object.keys},function(e,t,r){r(570),e.exports=r(9).Object.preventExtensions},function(e,t,r){r(577),e.exports=r(9).Object.values},function(e,t,r){r(139),r(84),r(85),r(571),r(578),r(579),e.exports=r(9).Promise},function(e,t,r){r(584),e.exports=r(9).setImmediate},function(e,t,r){r(572),r(139),r(580),r(581),e.exports=r(9).Symbol},function(e,t,r){r(84),r(85),e.exports=r(182).f("iterator")},function(e,t,r){r(139),r(85),r(573),r(583),r(582),e.exports=r(9).WeakMap},function(e,t){e.exports=function(){}},function(e,t,r){var n=r(80);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){var n=r(65),i=r(136),a=r(551);e.exports=function(e){return function(t,r,o){var s,u=n(t),l=i(u.length),c=a(o,l);if(e&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},function(e,t,r){var n=r(27),i=r(266),a=r(25)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(536);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){"use strict";var n=r(41).f,i=r(134),a=r(135),o=r(57),s=r(131),u=r(80),l=r(172),c=r(269),f=r(279),d=r(40),h=r(72).fastKey,p=r(138),g=d?"_s":"size",m=function(e,t){var r,n=h(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,l){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=n&&u(n,r,e[l],e)});return a(c.prototype,{clear:function(){for(var e=p(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[g]=0},delete:function(e){var r=p(this,t),n=m(r,e);if(n){var i=n.n,a=n.p;delete r._i[n.i],n.r=!0,a&&(a.n=i),i&&(i.p=a),r._f==n&&(r._f=i),r._l==n&&(r._l=a),r[g]--}return!!n},forEach:function(e){p(this,t);for(var r,n=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!m(p(this,t),e)}}),d&&n(c.prototype,"size",{get:function(){return p(this,t)[g]}}),c},def:function(e,t,r){var n,i,a=m(e,t);return a?a.v=r:(e._l=a={i:i=h(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=a),n&&(n.n=a),e[g]++,"F"!==i&&(e._i[i]=a)),e},getEntry:m,setStrong:function(e,t,r){l(e,t,function(e,r){this._t=p(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?c(0,r.k):"values"==t?c(0,r.v):c(0,[r.k,r.v]):(e._t=void 0,c(1))},r?"entries":"values",!r,!0),f(t)}}},function(e,t,r){var n=r(132),i=r(534);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,r){"use strict";var n=r(135),i=r(72).getWeak,a=r(44),o=r(27),s=r(131),u=r(80),l=r(167),c=r(61),f=r(138),d=l(5),h=l(6),p=0,g=function(e){return e._l||(e._l=new m)},m=function(){this.a=[]},v=function(e,t){return d(e.a,function(e){return e[0]===t})};m.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var r=v(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,r,a){var l=e(function(e,n){s(e,l,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=n&&u(n,r,e[a],e)});return n(l.prototype,{delete:function(e){if(!o(e))return!1;var r=i(e);return!0===r?g(f(this,t)).delete(e):r&&c(r,this._i)&&delete r[this._i]},has:function(e){if(!o(e))return!1;var r=i(e);return!0===r?g(f(this,t)).has(e):r&&c(r,this._i)}}),l},def:function(e,t,r){var n=i(a(t),!0);return!0===n?g(e).set(t,r):n[e._i]=r,e},ufstore:g}},function(e,t,r){"use strict";var n=r(41),i=r(110);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(82),i=r(174),a=r(109);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var o,s=r(e),u=a.f,l=0;s.length>l;)u.call(e,o=s[l++])&&t.push(o);return t}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){var n=r(27),i=Math.floor;e.exports=function(e){return!n(e)&&isFinite(e)&&i(e)===e}},function(e,t,r){"use strict";var n=r(134),i=r(110),a=r(111),o={};r(62)(o,r(25)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,r){var n=r(29),i=r(178).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u="process"==r(108)(o);e.exports=function(){var e,t,r,l=function(){var n,i;for(u&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){o.nextTick(l)};else if(a){var c=!0,f=document.createTextNode("");new a(l).observe(f,{characterData:!0}),r=function(){f.data=c=!c}}else if(s&&s.resolve){var d=s.resolve();r=function(){d.then(l)}}else r=function(){i.call(n,l)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){var n=r(65),i=r(272).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):i(n(e))}},function(e,t,r){var n=r(82),i=r(65),a=r(109).f;e.exports=function(e){return function(t){for(var r,o=i(t),s=n(o),u=s.length,l=0,c=[];u>l;)a.call(o,r=s[l++])&&c.push(e?[r,o[r]]:o[r]);return c}}},function(e,t,r){var n=r(179),i=r(168);e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),u=n(r),l=s.length;return u<0||u>=l?e?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):o-56320+(a-55296<<10)+65536)}}},function(e,t,r){var n=r(179),i=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):a(e,t)}},function(e,t,r){var n=r(44),i=r(183);e.exports=r(9).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){var n=r(132),i=r(25)("iterator"),a=r(81);e.exports=r(9).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(n(t))}},function(e,t,r){"use strict";var n=r(57),i=r(11),a=r(83),o=r(267),s=r(265),u=r(136),l=r(541),c=r(183);i(i.S+i.F*!r(268)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,d=a(e),h="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,y=c(d);if(m&&(g=n(g,p>2?arguments[2]:void 0,2)),void 0==y||h==Array&&s(y))for(t=u(d.length),r=new h(t);t>v;v++)l(r,v,m?g(d[v],v):d[v]);else for(f=y.call(d),r=new h;!(i=f.next()).done;v++)l(r,v,m?o(f,g,[i.value,v],!0):i.value);return r.length=v,r}})},function(e,t,r){"use strict";var n=r(533),i=r(269),a=r(81),o=r(65);e.exports=r(172)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t,r){"use strict";var n=r(538),i=r(138);e.exports=r(262)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){var n=r(11);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(11);n(n.S,"Math",{sign:r(546)})},function(e,t,r){var n=r(11);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(11);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(11);n(n.S,"Number",{isInteger:r(544)})},function(e,t,r){var n=r(11);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(11);n(n.S+n.F,"Object",{assign:r(270)})},function(e,t,r){var n=r(11);n(n.S,"Object",{create:r(134)})},function(e,t,r){var n=r(11);n(n.S+n.F*!r(40),"Object",{defineProperties:r(271)})},function(e,t,r){var n=r(11);n(n.S+n.F*!r(40),"Object",{defineProperty:r(41).f})},function(e,t,r){var n=r(27),i=r(72).onFreeze;r(120)("freeze",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){var n=r(83),i=r(273);r(120)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(83),i=r(82);r(120)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(27),i=r(72).onFreeze;r(120)("preventExtensions",function(e){return function(t){return e&&n(t)?e(i(t)):t}})},function(e,t,r){"use strict";var n,i,a,o,s=r(133),u=r(29),l=r(57),c=r(132),f=r(11),d=r(27),h=r(107),p=r(131),g=r(80),m=r(280),v=r(178).set,y=r(547)(),M=r(173),w=r(275),x=r(276),b=u.TypeError,T=u.process,S=u.Promise,_="process"==c(T),E=function(){},A=i=M.f,I=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[r(25)("species")]=function(e){e(E,E)};return(_||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),D=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,i=1==e._s,a=0;r.length>a;)!function(t){var r,a,o=i?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{o?(i||(2==e._h&&O(e),e._h=1),!0===o?r=n:(l&&l.enter(),r=o(n),l&&l.exit()),r===t.promise?u(b("Promise-chain cycle")):(a=D(r))?a.call(r,s,u):s(r)):u(n)}catch(e){u(e)}}(r[a++]);e._c=[],e._n=!1,t&&!e._h&&N(e)})}},N=function(e){v.call(u,function(){var t,r,n,i=e._v,a=C(e);if(a&&(t=w(function(){_?T.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=_||C(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},C=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!C(t.promise))return!1;return!0},O=function(e){v.call(u,function(){var t;_?T.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},R=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},P=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw b("Promise can't be resolved itself");(t=D(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,l(P,n,1),l(R,n,1))}catch(e){R.call(n,e)}}):(r._v=e,r._s=1,L(r,!1))}catch(e){R.call({_w:r,_d:!1},e)}}};I||(S=function(e){p(this,S,"Promise","_h"),h(e),n.call(this);try{e(l(P,this,1),l(R,this,1))}catch(e){R.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(135)(S.prototype,{then:function(e,t){var r=A(m(this,S));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=_?T.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=l(P,e,1),this.reject=l(R,e,1)},M.f=A=function(e){return e===S||e===o?new a(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:S}),r(111)(S,"Promise"),r(279)("Promise"),o=r(9).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return x(s&&this===o?S:this,e)}}),f(f.S+f.F*!(I&&r(268)(function(e){S.all(e).catch(E)})),"Promise",{all:function(e){var t=this,r=A(t),n=r.resolve,i=r.reject,a=w(function(){var r=[],a=0,o=1;g(e,!1,function(e){var s=a++,u=!1;r.push(void 0),o++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=A(t),n=r.reject,i=w(function(){g(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(e,t,r){"use strict";var n=r(29),i=r(61),a=r(40),o=r(11),s=r(175),u=r(72).KEY,l=r(60),c=r(177),f=r(111),d=r(137),h=r(25),p=r(182),g=r(181),m=r(542),v=r(266),y=r(44),M=r(65),w=r(180),x=r(110),b=r(134),T=r(548),S=r(318),_=r(41),E=r(82),A=S.f,I=_.f,D=T.f,L=n.Symbol,N=n.JSON,C=N&&N.stringify,O=h("_hidden"),R=h("toPrimitive"),P={}.propertyIsEnumerable,z=c("symbol-registry"),j=c("symbols"),U=c("op-symbols"),B=Object.prototype,V="function"==typeof L,k=n.QObject,F=!k||!k.prototype||!k.prototype.findChild,G=a&&l(function(){return 7!=b(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=A(B,t);n&&delete B[t],I(e,t,r),n&&e!==B&&I(B,t,n)}:I,H=function(e){var t=j[e]=b(L.prototype);return t._k=e,t},W=V&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},Y=function(e,t,r){return e===B&&Y(U,t,r),y(e),t=w(t,!0),y(r),i(j,t)?(r.enumerable?(i(e,O)&&e[O][t]&&(e[O][t]=!1),r=b(r,{enumerable:x(0,!1)})):(i(e,O)||I(e,O,x(1,{})),e[O][t]=!0),G(e,t,r)):I(e,t,r)},Q=function(e,t){y(e);for(var r,n=m(t=M(t)),i=0,a=n.length;a>i;)Y(e,r=n[i++],t[r]);return e},q=function(e,t){return void 0===t?b(e):Q(b(e),t)},X=function(e){var t=P.call(this,e=w(e,!0));return!(this===B&&i(j,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,O)&&this[O][e])||t)},Z=function(e,t){if(e=M(e),t=w(t,!0),e!==B||!i(j,t)||i(U,t)){var r=A(e,t);return!r||!i(j,t)||i(e,O)&&e[O][t]||(r.enumerable=!0),r}},K=function(e){for(var t,r=D(M(e)),n=[],a=0;r.length>a;)i(j,t=r[a++])||t==O||t==u||n.push(t);return n},J=function(e){for(var t,r=e===B,n=D(r?U:M(e)),a=[],o=0;n.length>o;)!i(j,t=n[o++])||r&&!i(B,t)||a.push(j[t]);return a};V||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===B&&t.call(U,r),i(this,O)&&i(this[O],e)&&(this[O][e]=!1),G(this,e,x(1,r))};return a&&F&&G(B,e,{configurable:!0,set:t}),H(e)},s(L.prototype,"toString",function(){return this._k}),S.f=Z,_.f=Y,r(272).f=T.f=K,r(109).f=X,r(174).f=J,a&&!r(133)&&s(B,"propertyIsEnumerable",X,!0),p.f=function(e){return H(h(e))}),o(o.G+o.W+o.F*!V,{Symbol:L});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)h($[ee++]);for(var te=E(h.store),re=0;te.length>re;)g(te[re++]);o(o.S+o.F*!V,"Symbol",{for:function(e){return i(z,e+="")?z[e]:z[e]=L(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){F=!0},useSimple:function(){F=!1}}),o(o.S+o.F*!V,"Object",{create:q,defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:K,getOwnPropertySymbols:J}),N&&o(o.S+o.F*(!V||l(function(){var e=L();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&v(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,C.apply(N,n)}}}),L.prototype[R]||r(62)(L.prototype,R,L.prototype.valueOf),f(L,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){"use strict";var n,i=r(167)(0),a=r(175),o=r(72),s=r(270),u=r(540),l=r(27),c=r(60),f=r(138),d=o.getWeak,h=Object.isExtensible,p=u.ufstore,g={},m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(l(e)){var t=d(e);return!0===t?p(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(f(this,"WeakMap"),e,t)}},y=e.exports=r(262)("WeakMap",m,v,u,!0,!0);c(function(){return 7!=(new y).set((Object.freeze||Object)(g),7).get(g)})&&(n=u.getConstructor(m,"WeakMap"),s(n.prototype,v),o.NEED=!0,i(["delete","has","get","set"],function(e){var t=y.prototype,r=t[e];a(t,e,function(t,i){if(l(t)&&!h(t)){this._f||(this._f=new n);var a=this._f[e](t,i);return"set"==e?this:a}return r.call(this,t,i)})}))},function(e,t,r){r(277)("Map")},function(e,t,r){r(278)("Map")},function(e,t,r){var n=r(11);n(n.P+n.R,"Map",{toJSON:r(539)("Map")})},function(e,t,r){var n=r(11),i=r(549)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){"use strict";var n=r(11),i=r(9),a=r(29),o=r(280),s=r(276);n(n.P+n.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},function(e,t,r){"use strict";var n=r(11),i=r(173),a=r(275);n(n.S,"Promise",{try:function(e){var t=i.f(this),r=a(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},function(e,t,r){r(181)("asyncIterator")},function(e,t,r){r(181)("observable")},function(e,t,r){r(277)("WeakMap")},function(e,t,r){r(278)("WeakMap")},function(e,t,r){var n=r(11),i=r(178);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){var n=r(14),i=r(287),a=r(16)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(585);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){"use strict";var n=r(73),i=r(14),a=r(286),o=[].slice,s={},u=function(e,t,r){if(!(t in s)){for(var n=[],i=0;i<t;i++)n[i]="a["+i+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)};e.exports=Function.bind||function(e){var t=n(this),r=o.call(arguments,1),s=function(){var n=r.concat(o.call(arguments));return this instanceof s?u(t,n.length,n):a(t,n,e)};return i(t.prototype)&&(s.prototype=t.prototype),s}},function(e,t,r){var n=r(91),i=r(144),a=r(118);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var o,s=r(e),u=a.f,l=0;s.length>l;)u.call(e,o=s[l++])&&t.push(o);return t}},function(e,t,r){"use strict";var n=r(12);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){var n=r(14),i=r(195).set;e.exports=function(e,t,r){var a,o=t.constructor;return o!==r&&"function"==typeof o&&(a=o.prototype)!==r.prototype&&n(a)&&i&&i(e,a),e}},function(e,t,r){"use strict";var n=r(115),i=r(75),a=r(93),o={};r(42)(o,r(16)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)}),a(e,t+" Iterator")}},function(e,t,r){var n=r(194),i=Math.pow,a=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),u=i(2,-126),l=function(e){return e+1/a-1/a};e.exports=Math.fround||function(e){var t,r,i=Math.abs(e),c=n(e);return i<u?c*l(i/u/o)*u*o:(t=(1+o/a)*i,r=t-(t-i),r>s||r!=r?c*(1/0):c*r)}},function(e,t,r){var n=r(13),i=r(200).set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u="process"==r(88)(o);e.exports=function(){var e,t,r,l=function(){var n,i;for(u&&(n=o.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){o.nextTick(l)};else if(a){var c=!0,f=document.createTextNode("");new a(l).observe(f,{characterData:!0}),r=function(){f.data=c=!c}}else if(s&&s.resolve){var d=s.resolve();r=function(){d.then(l)}}else r=function(){i.call(n,l)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){var n=r(26),i=r(12),a=r(91);e.exports=r(35)?Object.defineProperties:function(e,t){i(e);for(var r,o=a(t),s=o.length,u=0;s>u;)n.f(e,r=o[u++],t[r]);return e}},function(e,t,r){var n=r(53),i=r(116).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):i(n(e))}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,r){var n=r(12),i=r(14),a=r(294);e.exports=function(e,t){if(n(e),i(t)&&t.constructor===e)return t;var r=a.f(e);return(0,r.resolve)(t),r.promise}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,r){var n=r(76),i=r(74);e.exports=function(e){return function(t,r){var a,o,s=String(i(t)),u=n(r),l=s.length;return u<0||u>=l?e?"":void 0:(a=s.charCodeAt(u),a<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):o-56320+(a-55296<<10)+65536)}}},function(e,t,r){var n=r(13),i=r(113),a=r(90),o=r(303),s=r(26).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,r){var n=r(1);n(n.P,"Array",{copyWithin:r(281)}),r(86)("copyWithin")},function(e,t,r){var n=r(1);n(n.P,"Array",{fill:r(184)}),r(86)("fill")},function(e,t,r){"use strict";var n=r(1),i=r(112)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(86)(a)},function(e,t,r){"use strict";var n=r(1),i=r(112)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),n(n.P+n.F*a,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(86)("find")},function(e,t,r){"use strict";var n=r(52),i=r(1),a=r(77),o=r(290),s=r(192),u=r(30),l=r(187),c=r(202);i(i.S+i.F*!r(143)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,d=a(e),h="function"==typeof this?this:Array,p=arguments.length,g=p>1?arguments[1]:void 0,m=void 0!==g,v=0,y=c(d);if(m&&(g=n(g,p>2?arguments[2]:void 0,2)),void 0==y||h==Array&&s(y))for(t=u(d.length),r=new h(t);t>v;v++)l(r,v,m?g(d[v],v):d[v]);else for(f=y.call(d),r=new h;!(i=f.next()).done;v++)l(r,v,m?o(f,g,[i.value,v],!0):i.value);return r.length=v,r}})},function(e,t,r){"use strict";var n=r(1),i=r(187);n(n.S+n.F*r(21)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,r=new("function"==typeof this?this:Array)(t);t>e;)i(r,e,arguments[e++]);return r.length=t,r}})},function(e,t,r){var n=r(26).f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||r(35)&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},function(e,t,r){"use strict";var n=r(282),i=r(95);e.exports=r(140)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},function(e,t,r){var n=r(1),i=r(293),a=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:i(e-1+a(e-1)*a(e+1))}})},function(e,t,r){function n(e){return isFinite(e=+e)&&0!=e?e<0?-n(-e):Math.log(e+Math.sqrt(e*e+1)):e}var i=r(1),a=Math.asinh;i(i.S+i.F*!(a&&1/a(0)>0),"Math",{asinh:n})},function(e,t,r){var n=r(1),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,r){var n=r(1),i=r(194);n(n.S,"Math",{cbrt:function(e){return i(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,r){var n=r(1);n(n.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,r){var n=r(1),i=Math.exp;n(n.S,"Math",{cosh:function(e){return(i(e=+e)+i(-e))/2}})},function(e,t,r){var n=r(1),i=r(193);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(e,t,r){var n=r(1);n(n.S,"Math",{fround:r(592)})},function(e,t,r){var n=r(1),i=Math.abs;n(n.S,"Math",{hypot:function(e,t){for(var r,n,a=0,o=0,s=arguments.length,u=0;o<s;)r=i(arguments[o++]),u<r?(n=u/r,a=a*n*n+1,u=r):r>0?(n=r/u,a+=n*n):a+=r;return u===1/0?1/0:u*Math.sqrt(a)}})},function(e,t,r){var n=r(1),i=Math.imul;n(n.S+n.F*r(21)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(e,t){var r=+e,n=+t,i=65535&r,a=65535&n;return 0|i*a+((65535&r>>>16)*a+i*(65535&n>>>16)<<16>>>0)}})},function(e,t,r){var n=r(1);n(n.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,r){var n=r(1);n(n.S,"Math",{log1p:r(293)})},function(e,t,r){var n=r(1);n(n.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,r){var n=r(1);n(n.S,"Math",{sign:r(194)})},function(e,t,r){var n=r(1),i=r(193),a=Math.exp;n(n.S+n.F*r(21)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(i(e)-i(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,r){var n=r(1),i=r(193),a=Math.exp;n(n.S,"Math",{tanh:function(e){var t=i(e=+e),r=i(-e);return t==1/0?1:r==1/0?-1:(t-r)/(a(e)+a(-e))}})},function(e,t,r){var n=r(1);n(n.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,r){var n=r(1);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,r){var n=r(1),i=r(13).isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},function(e,t,r){var n=r(1);n(n.S,"Number",{isInteger:r(288)})},function(e,t,r){var n=r(1);n(n.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,r){var n=r(1),i=r(288),a=Math.abs;n(n.S,"Number",{isSafeInteger:function(e){return i(e)&&a(e)<=9007199254740991}})},function(e,t,r){var n=r(1);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,r){var n=r(1);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,r){var n=r(1);n(n.S+n.F,"Object",{assign:r(295)})},function(e,t,r){var n=r(1);n(n.S,"Object",{is:r(598)})},function(e,t,r){var n=r(1);n(n.S,"Object",{setPrototypeOf:r(195).set})},function(e,t,r){"use strict";var n,i,a,o,s=r(90),u=r(13),l=r(52),c=r(186),f=r(1),d=r(14),h=r(73),p=r(87),g=r(142),m=r(198),v=r(200).set,y=r(593)(),M=r(294),w=r(596),x=r(597),b=u.TypeError,T=u.process,S=u.Promise,_="process"==c(T),E=function(){},A=i=M.f,I=!!function(){try{var e=S.resolve(1),t=(e.constructor={})[r(16)("species")]=function(e){e(E,E)};return(_||"function"==typeof PromiseRejectionEvent)&&e.then(E)instanceof t}catch(e){}}(),D=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},L=function(e,t){if(!e._n){e._n=!0;var r=e._c;y(function(){for(var n=e._v,i=1==e._s,a=0;r.length>a;)!function(t){var r,a,o=i?t.ok:t.fail,s=t.resolve,u=t.reject,l=t.domain;try{o?(i||(2==e._h&&O(e),e._h=1),!0===o?r=n:(l&&l.enter(),r=o(n),l&&l.exit()),r===t.promise?u(b("Promise-chain cycle")):(a=D(r))?a.call(r,s,u):s(r)):u(n)}catch(e){u(e)}}(r[a++]);e._c=[],e._n=!1,t&&!e._h&&N(e)})}},N=function(e){v.call(u,function(){var t,r,n,i=e._v,a=C(e);if(a&&(t=w(function(){_?T.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=_||C(e)?2:1),e._a=void 0,a&&t.e)throw t.v})},C=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!C(t.promise))return!1;return!0},O=function(e){v.call(u,function(){var t;_?T.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},R=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),L(t,!0))},P=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw b("Promise can't be resolved itself");(t=D(e))?y(function(){var n={_w:r,_d:!1};try{t.call(e,l(P,n,1),l(R,n,1))}catch(e){R.call(n,e)}}):(r._v=e,r._s=1,L(r,!1))}catch(e){R.call({_w:r,_d:!1},e)}}};I||(S=function(e){p(this,S,"Promise","_h"),h(e),n.call(this);try{e(l(P,this,1),l(R,this,1))}catch(e){R.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(92)(S.prototype,{then:function(e,t){var r=A(m(this,S));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=_?T.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&L(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new n;this.promise=e,this.resolve=l(P,e,1),this.reject=l(R,e,1)},M.f=A=function(e){return e===S||e===o?new a(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:S}),r(93)(S,"Promise"),r(145)("Promise"),o=r(113).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=A(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return x(s&&this===o?S:this,e)}}),f(f.S+f.F*!(I&&r(143)(function(e){S.all(e).catch(E)})),"Promise",{all:function(e){var t=this,r=A(t),n=r.resolve,i=r.reject,a=w(function(){var r=[],a=0,o=1;g(e,!1,function(e){var s=a++,u=!1;r.push(void 0),o++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--o||n(r))},i)}),--o||n(r)});return a.e&&i(a.v),r.promise},race:function(e){var t=this,r=A(t),n=r.reject,i=w(function(){g(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i.e&&n(i.v),r.promise}})},function(e,t,r){var n=r(1),i=r(73),a=r(12),o=(r(13).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(21)(function(){o(function(){})}),"Reflect",{apply:function(e,t,r){var n=i(e),u=a(r);return o?o(n,t,u):s.call(n,t,u)}})},function(e,t,r){var n=r(1),i=r(115),a=r(73),o=r(12),s=r(14),u=r(21),l=r(587),c=(r(13).Reflect||{}).construct,f=u(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),d=!u(function(){c(function(){})});n(n.S+n.F*(f||d),"Reflect",{construct:function(e,t){a(e),o(t);var r=arguments.length<3?e:a(arguments[2]);if(d&&!f)return c(e,t,r);if(e==r){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(l.apply(e,n))}var u=r.prototype,h=i(s(u)?u:Object.prototype),p=Function.apply.call(e,h,t);return s(p)?p:h}})},function(e,t,r){var n=r(26),i=r(1),a=r(12),o=r(119);i(i.S+i.F*r(21)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,r){a(e),t=o(t,!0),a(r);try{return n.f(e,t,r),!0}catch(e){return!1}}})},function(e,t,r){var n=r(1),i=r(63).f,a=r(12);n(n.S,"Reflect",{deleteProperty:function(e,t){var r=i(a(e),t);return!(r&&!r.configurable)&&delete e[t]}})},function(e,t,r){var n=r(63),i=r(1),a=r(12);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return n.f(a(e),t)}})},function(e,t,r){var n=r(1),i=r(117),a=r(12);n(n.S,"Reflect",{getPrototypeOf:function(e){return i(a(e))}})},function(e,t,r){function n(e,t){var r,s,c=arguments.length<3?e:arguments[2];return l(e)===c?e[t]:(r=i.f(e,t))?o(r,"value")?r.value:void 0!==r.get?r.get.call(c):void 0:u(s=a(e))?n(s,t,c):void 0}var i=r(63),a=r(117),o=r(36),s=r(1),u=r(14),l=r(12);s(s.S,"Reflect",{get:n})},function(e,t,r){var n=r(1);n(n.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,r){var n=r(1),i=r(12),a=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(e){return i(e),!a||a(e)}})},function(e,t,r){var n=r(1);n(n.S,"Reflect",{ownKeys:r(298)})},function(e,t,r){var n=r(1),i=r(12),a=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(e){i(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,r){var n=r(1),i=r(195);i&&n(n.S,"Reflect",{setPrototypeOf:function(e,t){i.check(e,t);try{return i.set(e,t),!0}catch(e){return!1}}})},function(e,t,r){function n(e,t,r){var u,d,h=arguments.length<4?e:arguments[3],p=a.f(c(e),t);if(!p){if(f(d=o(e)))return n(d,t,r,h);p=l(0)}return s(p,"value")?!(!1===p.writable||!f(h))&&(u=a.f(h,t)||l(0),u.value=r,i.f(h,t,u),!0):void 0!==p.set&&(p.set.call(h,r),!0)}var i=r(26),a=r(63),o=r(117),s=r(36),u=r(1),l=r(75),c=r(12),f=r(14);u(u.S,"Reflect",{set:n})},function(e,t,r){r(35)&&"g"!=/./g.flags&&r(26).f(RegExp.prototype,"flags",{configurable:!0,get:r(589)})},function(e,t,r){r(141)("match",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(141)("replace",2,function(e,t,r){return[function(n,i){"use strict";var a=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,a,i):r.call(String(a),n,i)},r]})},function(e,t,r){r(141)("search",1,function(e,t,r){return[function(r){"use strict";var n=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,n):new RegExp(r)[t](String(n))},r]})},function(e,t,r){r(141)("split",2,function(e,t,n){"use strict";var i=r(289),a=n,o=[].push,s="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[s]||2!="ab".split(/(?:ab)*/)[s]||4!=".".split(/(.?)(.?)/)[s]||".".split(/()()/)[s]>1||"".split(/.?/)[s]){var u=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!i(e))return a.call(r,e,t);var n,l,c,f,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,m=void 0===t?4294967295:t>>>0,v=new RegExp(e.source,p+"g");for(u||(n=new RegExp("^"+v.source+"$(?!\\s)",p));(l=v.exec(r))&&!((c=l.index+l[0][s])>g&&(h.push(r.slice(g,l.index)),!u&&l[s]>1&&l[0].replace(n,function(){for(d=1;d<arguments[s]-2;d++)void 0===arguments[d]&&(l[d]=void 0)}),l[s]>1&&l.index<r[s]&&o.apply(h,l.slice(1)),f=l[0][s],g=c,h[s]>=m));)v.lastIndex===l.index&&v.lastIndex++;return g===r[s]?!f&&v.test("")||h.push(""):h.push(r.slice(g)),h[s]>m?h.slice(0,m):h}}else"0".split(void 0,0)[s]&&(n=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(r,i){var a=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,a,i):n.call(String(a),r,i)},n]})},function(e,t,r){"use strict";var n=r(282),i=r(95);e.exports=r(140)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n=r(1),i=r(599)(!1);n(n.P,"String",{codePointAt:function(e){return i(this,e)}})},function(e,t,r){"use strict";var n=r(1),i=r(30),a=r(199),o="".endsWith;n(n.P+n.F*r(190)("endsWith"),"String",{endsWith:function(e){var t=a(this,e,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(t.length),s=void 0===r?n:Math.min(i(r),n),u=String(e);return o?o.call(t,u,s):t.slice(s-u.length,s)===u}})},function(e,t,r){var n=r(1),i=r(94),a=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(e){for(var t,r=[],n=arguments.length,o=0;n>o;){if(t=+arguments[o++],i(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}})},function(e,t,r){"use strict";var n=r(1),i=r(199);n(n.P+n.F*r(190)("includes"),"String",{includes:function(e){return!!~i(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(1),i=r(53),a=r(30);n(n.S,"String",{raw:function(e){for(var t=i(e.raw),r=a(t.length),n=arguments.length,o=[],s=0;r>s;)o.push(String(t[s++])),s<n&&o.push(String(arguments[s]));return o.join("")}})},function(e,t,r){var n=r(1);n(n.P,"String",{repeat:r(300)})},function(e,t,r){"use strict";var n=r(1),i=r(30),a=r(199),o="".startsWith;n(n.P+n.F*r(190)("startsWith"),"String",{startsWith:function(e){var t=a(this,e,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),n=String(e);return o?o.call(t,n,r):t.slice(r,r+n.length)===n}})},function(e,t,r){"use strict";var n=r(13),i=r(36),a=r(35),o=r(1),s=r(64),u=r(114).KEY,l=r(21),c=r(197),f=r(93),d=r(78),h=r(16),p=r(303),g=r(600),m=r(588),v=r(287),y=r(12),M=r(53),w=r(119),x=r(75),b=r(115),T=r(595),S=r(63),_=r(26),E=r(91),A=S.f,I=_.f,D=T.f,L=n.Symbol,N=n.JSON,C=N&&N.stringify,O=h("_hidden"),R=h("toPrimitive"),P={}.propertyIsEnumerable,z=c("symbol-registry"),j=c("symbols"),U=c("op-symbols"),B=Object.prototype,V="function"==typeof L,k=n.QObject,F=!k||!k.prototype||!k.prototype.findChild,G=a&&l(function(){return 7!=b(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=A(B,t);n&&delete B[t],I(e,t,r),n&&e!==B&&I(B,t,n)}:I,H=function(e){var t=j[e]=b(L.prototype);return t._k=e,t},W=V&&"symbol"==typeof L.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof L},Y=function(e,t,r){return e===B&&Y(U,t,r),y(e),t=w(t,!0),y(r),i(j,t)?(r.enumerable?(i(e,O)&&e[O][t]&&(e[O][t]=!1),r=b(r,{enumerable:x(0,!1)})):(i(e,O)||I(e,O,x(1,{})),e[O][t]=!0),G(e,t,r)):I(e,t,r)},Q=function(e,t){y(e);for(var r,n=m(t=M(t)),i=0,a=n.length;a>i;)Y(e,r=n[i++],t[r]);return e},q=function(e,t){return void 0===t?b(e):Q(b(e),t)},X=function(e){var t=P.call(this,e=w(e,!0));return!(this===B&&i(j,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,O)&&this[O][e])||t)},Z=function(e,t){if(e=M(e),t=w(t,!0),e!==B||!i(j,t)||i(U,t)){var r=A(e,t);return!r||!i(j,t)||i(e,O)&&e[O][t]||(r.enumerable=!0),r}},K=function(e){for(var t,r=D(M(e)),n=[],a=0;r.length>a;)i(j,t=r[a++])||t==O||t==u||n.push(t);return n},J=function(e){for(var t,r=e===B,n=D(r?U:M(e)),a=[],o=0;n.length>o;)!i(j,t=n[o++])||r&&!i(B,t)||a.push(j[t]);return a};V||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===B&&t.call(U,r),i(this,O)&&i(this[O],e)&&(this[O][e]=!1),G(this,e,x(1,r))};return a&&F&&G(B,e,{configurable:!0,set:t}),H(e)},s(L.prototype,"toString",function(){return this._k}),S.f=Z,_.f=Y,r(116).f=T.f=K,r(118).f=X,r(144).f=J,a&&!r(90)&&s(B,"propertyIsEnumerable",X,!0),p.f=function(e){return H(h(e))}),o(o.G+o.W+o.F*!V,{Symbol:L});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)h($[ee++]);for(var te=E(h.store),re=0;te.length>re;)g(te[re++]);o(o.S+o.F*!V,"Symbol",{for:function(e){return i(z,e+="")?z[e]:z[e]=L(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){F=!0},useSimple:function(){F=!1}}),o(o.S+o.F*!V,"Object",{create:q,defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:K,getOwnPropertySymbols:J}),N&&o(o.S+o.F*(!V||l(function(){var e=L();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&v(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,C.apply(N,n)}}}),L.prototype[R]||r(42)(L.prototype,R,L.prototype.valueOf),f(L,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){"use strict";var n=r(1),i=r(201),a=r(302),o=r(12),s=r(94),u=r(30),l=r(14),c=r(13).ArrayBuffer,f=r(198),d=a.ArrayBuffer,h=a.DataView,p=i.ABV&&c.isView,g=d.prototype.slice,m=i.VIEW;n(n.G+n.W+n.F*(c!==d),{ArrayBuffer:d}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(e){return p&&p(e)||l(e)&&m in e}}),n(n.P+n.U+n.F*r(21)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(e,t){if(void 0!==g&&void 0===t)return g.call(o(this),e);for(var r=o(this).byteLength,n=s(e,r),i=s(void 0===t?r:t,r),a=new(f(this,d))(u(i-n)),l=new h(this),c=new h(a),p=0;n<i;)c.setUint8(p++,l.getUint8(n++));return a}}),r(145)("ArrayBuffer")},function(e,t,r){r(54)("Float32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(54)("Float64",8,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(54)("Int16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(54)("Int32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(54)("Int8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(54)("Uint16",2,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(54)("Uint32",4,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(54)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}})},function(e,t,r){r(54)("Uint8",1,function(e){return function(t,r,n){return e(this,t,r,n)}},!0)},function(e,t,r){"use strict";var n,i=r(112)(0),a=r(64),o=r(114),s=r(295),u=r(283),l=r(14),c=r(21),f=r(95),d=o.getWeak,h=Object.isExtensible,p=u.ufstore,g={},m=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(l(e)){var t=d(e);return!0===t?p(f(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return u.def(f(this,"WeakMap"),e,t)}},y=e.exports=r(140)("WeakMap",m,v,u,!0,!0);c(function(){return 7!=(new y).set((Object.freeze||Object)(g),7).get(g)})&&(n=u.getConstructor(m,"WeakMap"),s(n.prototype,v),o.NEED=!0,i(["delete","has","get","set"],function(e){var t=y.prototype,r=t[e];a(t,e,function(t,i){if(l(t)&&!h(t)){this._f||(this._f=new n);var a=this._f[e](t,i);return"set"==e?this:a}return r.call(this,t,i)})}))},function(e,t,r){"use strict";var n=r(283),i=r(95);r(140)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(i(this,"WeakSet"),e,!0)}},n,!1,!0)},function(e,t,r){"use strict";var n=r(1),i=r(185)(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(86)("includes")},function(e,t,r){var n=r(1),i=r(297)(!0);n(n.S,"Object",{entries:function(e){return i(e)}})},function(e,t,r){var n=r(1),i=r(298),a=r(53),o=r(63),s=r(187);n(n.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,r,n=a(e),u=o.f,l=i(n),c={},f=0;l.length>f;)void 0!==(r=u(n,t=l[f++]))&&s(c,t,r);return c}})},function(e,t,r){var n=r(1),i=r(297)(!1);n(n.S,"Object",{values:function(e){return i(e)}})},function(e,t,r){"use strict";var n=r(1),i=r(299);n(n.P,"String",{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,r){"use strict";var n=r(1),i=r(299);n(n.P,"String",{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,r){for(var n=r(203),i=r(91),a=r(64),o=r(13),s=r(42),u=r(89),l=r(16),c=l("iterator"),f=l("toStringTag"),d=u.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(h),g=0;g<p.length;g++){var m,v=p[g],y=h[v],M=o[v],w=M&&M.prototype;if(w&&(w[c]||s(w,c,d),w[f]||s(w,f,v),u[v]=d,y))for(m in n)w[m]||a(w,m,n[m],!0)}},function(e,t,r){var n=r(1),i=r(200);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(e,t,r){var n=r(13),i=r(1),a=n.navigator,o=[].slice,s=!!a&&/MSIE .\./.test(a.userAgent),u=function(e){return function(t,r){var n=arguments.length>2,i=!!n&&o.call(arguments,2);return e(n?function(){("function"==typeof t?t:Function(t)).apply(this,i)}:t,r)}};i(i.G+i.B+i.F*s,{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},function(e,t,r){var n,i=r(686);"undefined"!=typeof navigator&&navigator&&(n=navigator.userAgent),e.exports=i(n)},function(e,t){e.exports=function(e){return e?[["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/]].map(function(t){if(t[1].test(e)){var r=t[1].exec(e),n=r&&r[1].split(/[._]/).slice(0,3);return n&&n.length<3&&Array.prototype.push.apply(n,1==n.length?[0,0]:[0]),{name:t[0],version:n.join(".")}}}).filter(Boolean).shift():null}},function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,f=r?i-1:0,d=r?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,n),a-=l}return(h?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:a-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+f>=1?d/u:d*Math.pow(2,1-f),t*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*u-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[r+h]=255&o,h+=p,o/=256,l-=8);e[r+h-p]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(e){return i.exec(e).slice(1)};t.resolve=function(){for(var t="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o=a>=0?arguments[a]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,i="/"===o.charAt(0))}return t=r(n(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),a="/"===o(e,-1);return e=r(n(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&a&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var i=n(e.split("/")),a=n(r.split("/")),o=Math.min(i.length,a.length),s=o,u=0;u<o;u++)if(i[u]!==a[u]){s=u;break}for(var l=[],u=s;u<i.length;u++)l.push("..");return l=l.concat(a.slice(s)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=a(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},t.basename=function(e,t){var r=a(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return a(e)[3]};var o="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(t,r(146))},function(e,t,r){"use strict";var n=r(695);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""),e?e.split("&").reduce(function(e,t){var r=t.replace(/\+/g," ").split("="),n=r.shift(),i=r.length>0?r.join("="):void 0;return n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i),e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i,e},{}):{})},t.stringify=function(e){return e?Object.keys(e).sort().map(function(t){var r=e[t];return void 0===r?"":null===r?t:Array.isArray(r)?r.slice().sort().map(function(e){return n(t)+"="+n(e)}).join("&"):n(t)+"="+n(r)}).filter(function(e){return e.length>0}).join("&"):""}},function(e,t,r){(function(t){!function(t){"use strict";function r(e,t,r,n){var a=t&&t.prototype instanceof i?t:i,o=Object.create(a.prototype),s=new h(n||[]);return o._invoke=l(e,r,s),o}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function i(){}function a(){}function o(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function r(t,i,a,o){var s=n(e[t],e,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&y.call(l,"__await")?Promise.resolve(l.__await).then(function(e){r("next",e,a,o)},function(e){r("throw",e,a,o)}):Promise.resolve(l).then(function(e){u.value=e,a(u)},o)}o(s.arg)}function i(e,t){function n(){return new Promise(function(n,i){r(e,t,n,i)})}return a=a?a.then(n,n):n()}"object"==typeof t.process&&t.process.domain&&(r=t.process.domain.bind(r));var a;this._invoke=i}function l(e,t,r){var i=_;return function(a,o){if(i===A)throw new Error("Generator is already running");if(i===I){if("throw"===a)throw o;return g()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var u=c(s,r);if(u){if(u===D)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===_)throw i=I,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=A;var l=n(e,t,r);if("normal"===l.type){if(i=r.done?I:E,l.arg===D)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=I,r.method="throw",r.arg=l.arg)}}}function c(e,t){var r=e.iterator[t.method];if(r===m){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=m,c(e,t),"throw"===t.method))return D;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var i=n(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,D;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=m),t.delegate=null,D):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,D)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(y.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=m,t.done=!0,t};return n.next=n}}return{next:g}}function g(){return{value:m,done:!0}}var m,v=Object.prototype,y=v.hasOwnProperty,M="function"==typeof Symbol?Symbol:{},w=M.iterator||"@@iterator",x=M.asyncIterator||"@@asyncIterator",b=M.toStringTag||"@@toStringTag",T="object"==typeof e,S=t.regeneratorRuntime;if(S)return void(T&&(e.exports=S));S=t.regeneratorRuntime=T?e.exports:{},S.wrap=r;var _="suspendedStart",E="suspendedYield",A="executing",I="completed",D={},L={};L[w]=function(){return this};var N=Object.getPrototypeOf,C=N&&N(N(p([])));C&&C!==v&&y.call(C,w)&&(L=C);var O=o.prototype=i.prototype=Object.create(L);a.prototype=O.constructor=o,o.constructor=a,o[b]=a.displayName="GeneratorFunction",S.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},S.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,b in e||(e[b]="GeneratorFunction")),e.prototype=Object.create(O),e},S.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[x]=function(){return this},S.AsyncIterator=u,S.async=function(e,t,n,i){var a=new u(r(e,t,n,i));return S.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},s(O),O[b]="Generator",O[w]=function(){return this},O.toString=function(){return"[object Generator]"},S.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},S.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=m),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,D):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),D},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),D}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;d(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=m),D}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,r(66))},function(e,t,r){!function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){"use strict";var n=r(2),i=r(3);!function(){var e="undefined"==typeof JSON?{}:JSON;n.setupJSON(e)}();var a=window._rollbarConfig,o=a&&a.globalAlias||"Rollbar";window[o]&&void 0!==window[o].shimId||!a?(window.Rollbar=n.wrapper,window.RollbarNotifier=i.Notifier):n.wrapper.init(a),e.exports=n.wrapper},function(e,t,r){"use strict";function n(e,t,r){!r[4]&&window._rollbarWrappedError&&(r[4]=window._rollbarWrappedError,window._rollbarWrappedError=null),e.uncaughtError.apply(e,r),t&&t.apply(window,r)}function i(e,t){if(t.hasOwnProperty&&t.hasOwnProperty("addEventListener")){var r=t.addEventListener;t.addEventListener=function(t,n,i){r.call(this,t,e.wrap(n),i)};var n=t.removeEventListener;t.removeEventListener=function(e,t,r){n.call(this,e,t&&t._wrapped||t,r)}}}var a=r(3),o=r(8),s=a.Notifier;window._rollbarWrappedError=null;var u={};u.init=function(e,t){var r=new s(t);if(r.configure(e),e.captureUncaught){var a;t&&o.isType(t._rollbarOldOnError,"function")?a=t._rollbarOldOnError:window.onerror&&!window.onerror.belongsToShim&&(a=window.onerror),window.onerror=function(){var e=Array.prototype.slice.call(arguments,0);n(r,a,e)};var u,l,c=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];for(u=0;u<c.length;++u)l=c[u],window[l]&&window[l].prototype&&i(r,window[l].prototype)}return e.captureUnhandledRejections&&(t&&o.isType(t._unhandledRejectionHandler,"function")&&window.removeEventListener("unhandledrejection",t._unhandledRejectionHandler),r._unhandledRejectionHandler=function(e){var t=e.reason,n=e.promise,i=e.detail;!t&&i&&(t=i.reason,n=i.promise),r.unhandledRejection(t,n)},window.addEventListener("unhandledrejection",r._unhandledRejectionHandler)),window.Rollbar=r,s.processPayloads(),r},e.exports={wrapper:u,setupJSON:a.setupJSON}},function(e,t,r){"use strict";function n(e){x=e,y.setupJSON(e),v.setupJSON(e)}function i(e,t){return function(){var r=t||this;try{return e.apply(r,arguments)}catch(e){v.consoleError("[Rollbar]:",e)}}}function a(){p||(p=setTimeout(d,1e3))}function o(){return b}function s(e){b=b||this;var t="https://"+s.DEFAULT_ENDPOINT;this.options={enabled:!0,endpoint:t,environment:"production",scrubFields:g([],s.DEFAULT_SCRUB_FIELDS),checkIgnore:null,logLevel:s.DEFAULT_LOG_LEVEL,reportLevel:s.DEFAULT_REPORT_LEVEL,uncaughtErrorLevel:s.DEFAULT_UNCAUGHT_ERROR_LEVEL,payload:{}},this.lastError=null,this.plugins={},this.parentNotifier=e,e&&(e.hasOwnProperty("shimId")?e.notifier=this:this.configure(e.options))}function u(e){window._rollbarPayloadQueue.push(e),a()}function l(e){return i(function(){var t=this._getLogArgs(arguments);return this._log(e||t.level||this.options.logLevel||s.DEFAULT_LOG_LEVEL,t.message,t.err,t.custom,t.callback)})}function c(e,t){e||(e=t?x.stringify(t):"");var r={body:e};return t&&(r.extra=g(!0,{},t)),{message:r}}function f(e,t,r){var n=m.guessErrorClass(t.message),i=t.name||n[0],a=n[1],o={exception:{class:i,message:a}};if(e&&(o.exception.description=e||"uncaught exception"),t.stack){var s,u,l,f,d,h,p,y;for(o.frames=[],p=0;p<t.stack.length;++p)s=t.stack[p],u={filename:s.url?v.sanitizeUrl(s.url):"(unknown)",lineno:s.line||null,method:s.func&&"?"!==s.func?s.func:"[anonymous]",colno:s.column},l=f=d=null,h=s.context?s.context.length:0,h&&(y=Math.floor(h/2),f=s.context.slice(0,y),l=s.context[y],d=s.context.slice(y)),l&&(u.code=l),(f||d)&&(u.context={},f&&f.length&&(u.context.pre=f),d&&d.length&&(u.context.post=d)),s.args&&(u.args=s.args),o.frames.push(u);return o.frames.reverse(),r&&(o.extra=g(!0,{},r)),{trace:o}}return c(i+": "+a,r)}function d(){var e;try{for(;e=window._rollbarPayloadQueue.shift();)h(e)}finally{p=void 0}}function h(e){var t=e.endpointUrl,r=e.accessToken,n=e.payload,i=e.callback||function(){},a=(new Date).getTime();a-S>=6e4&&(S=a,E=0);var o=window._globalRollbarOptions.maxItems,l=window._globalRollbarOptions.itemsPerMinute,c=function(){return!n.ignoreRateLimit&&o>=1&&_>=o};return c()?void i(new Error(o+" max items reached")):function(){return!n.ignoreRateLimit&&l>=1&&E>=l}()?void i(new Error(l+" items per minute reached")):(_++,E++,c()&&b._log(b.options.uncaughtErrorLevel,"maxItems has been hit. Ignoring errors for the remainder of the current page load.",null,{maxItems:o},null,!1,!0),n.ignoreRateLimit&&delete n.ignoreRateLimit,void M.post(t,r,n,function(t,r){return t?(t instanceof w&&(e.callback=function(){},setTimeout(function(){u(e)},s.RETRY_DELAY)),i(t)):i(null,r)}))}var p,g=r(4),m=r(5),v=r(8),y=r(11),M=y.XHR,w=y.ConnectionError,x=null;s.NOTIFIER_VERSION="1.9.4",s.DEFAULT_ENDPOINT="api.rollbar.com/api/1/",s.DEFAULT_SCRUB_FIELDS=["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken"],s.DEFAULT_LOG_LEVEL="debug",s.DEFAULT_REPORT_LEVEL="debug",s.DEFAULT_UNCAUGHT_ERROR_LEVEL="error",s.DEFAULT_ITEMS_PER_MIN=60,s.DEFAULT_MAX_ITEMS=0,s.LEVELS={debug:0,info:1,warning:2,error:3,critical:4},s.RETRY_DELAY=1e4,window._rollbarPayloadQueue=window._rollbarPayloadQueue||[],window._globalRollbarOptions={startTime:(new Date).getTime(),maxItems:s.DEFAULT_MAX_ITEMS,itemsPerMinute:s.DEFAULT_ITEMS_PER_MIN};var b,T=s.prototype;T._getLogArgs=function(e){for(var t,r,n,a,o,u,l=this.options.logLevel||s.DEFAULT_LOG_LEVEL,c=[],f=0;f<e.length;++f)u=e[f],o=v.typeName(u),"string"===o?t?c.push(u):t=u:"function"===o?a=i(u,this):"date"===o?c.push(u):"error"===o||u instanceof Error||"undefined"!=typeof DOMException&&u instanceof DOMException?r?c.push(u):r=u:"object"!==o&&"array"!==o||(n?c.push(u):n=u);return c.length&&(n=n||{},n.extraArgs=c),{level:l,message:t,err:r,custom:n,callback:a}},T._route=function(e){var t=this.options.endpoint,r=/\/$/.test(t),n=/^\//.test(e);return r&&n?e=e.substring(1):r||n||(e="/"+e),t+e},T._processShimQueue=function(e){for(var t,r,n,i,a,o,u,l={};r=e.shift();)t=r.shim,n=r.method,i=r.args,a=t.parentShim,u=l[t.shimId],u||(a?(o=l[a.shimId],u=new s(o)):u=this,l[t.shimId]=u),u[n]&&v.isType(u[n],"function")&&u[n].apply(u,i)},T._buildPayload=function(e,t,r,n,i){var a=this.options.accessToken,o=this.options.environment,u=g(!0,{},this.options.payload),l=v.uuid4();if(void 0===s.LEVELS[t])throw new Error("Invalid level");if(!r&&!n&&!i)throw new Error("No message, stack info or custom data");var c={environment:o,endpoint:this.options.endpoint,uuid:l,level:t,platform:"browser",framework:"browser-js",language:"javascript",body:this._buildBody(r,n,i),request:{url:window.location.href,query_string:window.location.search,user_ip:"$remote_ip"},client:{runtime_ms:e.getTime()-window._globalRollbarOptions.startTime,timestamp:Math.round(e.getTime()/1e3),javascript:{browser:window.navigator.userAgent,language:window.navigator.language,cookie_enabled:window.navigator.cookieEnabled,screen:{width:window.screen.width,height:window.screen.height},plugins:this._getBrowserPlugins()}},server:{},notifier:{name:"rollbar-browser-js",version:s.NOTIFIER_VERSION}};u.body&&delete u.body;var f={access_token:a,data:g(!0,c,u)};return this._scrub(f.data),f},T._buildBody=function(e,t,r){return t?f(e,t,r):c(e,r)},T._getBrowserPlugins=function(){if(!this._browserPlugins){var e,t,r=window.navigator.plugins||[],n=r.length,i=[];for(t=0;t<n;++t)e=r[t],i.push({name:e.name,description:e.description});this._browserPlugins=i}return this._browserPlugins},T._scrub=function(e){function t(e,t,r,n,i,a){return t+v.redact(a)}function r(e){var r;if(v.isType(e,"string"))for(r=0;r<s.length;++r)e=e.replace(s[r],t);return e}function n(e,t){var r;for(r=0;r<o.length;++r)if(o[r].test(e)){t=v.redact(t);break}return t}function i(e,t){var i=n(e,t);return i===t?r(i):i}var a=this.options.scrubFields,o=this._getScrubFieldRegexs(a),s=this._getScrubQueryParamRegexs(a);return v.traverse(e,i),e},T._getScrubFieldRegexs=function(e){for(var t,r=[],n=0;n<e.length;++n)t="\\[?(%5[bB])?"+e[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",r.push(new RegExp(t,"i"));return r},T._getScrubQueryParamRegexs=function(e){for(var t,r=[],n=0;n<e.length;++n)t="\\[?(%5[bB])?"+e[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",r.push(new RegExp("("+t+"=)([^&\\n]+)","igm"));return r},T._urlIsWhitelisted=function(e){var t,r,n,i,a,o,s,u,l,c;try{if(t=this.options.hostWhiteList,r=e&&e.data&&e.data.body&&e.data.body.trace,!t||0===t.length)return!0;if(!r)return!0;for(s=t.length,a=r.frames.length,l=0;l<a;l++){if(n=r.frames[l],i=n.filename,!v.isType(i,"string"))return!0;for(c=0;c<s;c++)if(o=t[c],u=new RegExp(o),u.test(i))return!0}}catch(e){return this.configure({hostWhiteList:null}),v.consoleError("[Rollbar]: Error while reading your configuration's hostWhiteList option. Removing custom hostWhiteList.",e),!0}return!1},T._messageIsIgnored=function(e){var t,r,n,i,a,o,s,u,l;try{if(a=!1,!(n=this.options.ignoredMessages)||0===n.length)return!1;if(s=e&&e.data&&e.data.body,u=s&&s.trace&&s.trace.exception&&s.trace.exception.message,l=s&&s.message&&s.message.body,!(t=u||l))return!1;for(i=n.length,r=0;r<i&&(o=new RegExp(n[r],"gi"),!(a=o.test(t)));r++);}catch(e){this.configure({ignoredMessages:null}),v.consoleError("[Rollbar]: Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return a},T._enqueuePayload=function(e,t,r,n){var i={callback:n,accessToken:this.options.accessToken,endpointUrl:this._route("item/"),payload:e},a=function(){if(n){n(null,{err:0,result:{id:null,uuid:null,message:"This item was not sent to Rollbar because it was ignored. This can happen if a custom checkIgnore() function was used or if the item's level was less than the notifier' reportLevel. See https://rollbar.com/docs/notifier/rollbar.js/configuration for more details."}})}};if(this._internalCheckIgnore(t,r,e))return void a();try{if(v.isType(this.options.checkIgnore,"function")&&this.options.checkIgnore(t,r,e))return void a()}catch(e){this.configure({checkIgnore:null}),v.consoleError("[Rollbar]: Error while calling custom checkIgnore() function. Removing custom checkIgnore().",e)}if(this._urlIsWhitelisted(e)&&!this._messageIsIgnored(e)){if(this.options.verbose){if(e.data&&e.data.body&&e.data.body.trace){var o=e.data.body.trace,s=o.exception.message;v.consoleError("[Rollbar]: ",s)}v.consoleInfo("[Rollbar]: ",i)}v.isType(this.options.logFunction,"function")&&this.options.logFunction(i);try{v.isType(this.options.transform,"function")&&this.options.transform(e)}catch(e){this.configure({transform:null}),v.consoleError("[Rollbar]: Error while calling custom transform() function. Removing custom transform().",e)}this.options.enabled&&u(i)}},T._internalCheckIgnore=function(e,t,r){var n=t[0];if((s.LEVELS[n]||0)<(s.LEVELS[this.options.reportLevel]||0))return!0;var i=this.options?this.options.plugins:{};if(i&&i.jquery&&i.jquery.ignoreAjaxErrors)try{return!!r.data.body.message.extra.isAjax}catch(e){return!1}return!1},T._log=function(e,t,r,n,i,a,o){var s=null;if(r)try{if(s=r._savedStackTrace?r._savedStackTrace:m.parse(r),r===this.lastError)return;this.lastError=r}catch(e){v.consoleError("[Rollbar]: Error while parsing the error object.",e),t=r.message||r.description||t||String(r),r=null}var u=this._buildPayload(new Date,e,t,s,n);return o&&(u.ignoreRateLimit=!0),this._enqueuePayload(u,!!a,[e,t,r,n],i),{uuid:u.data.uuid}},T.log=l(),T.debug=l("debug"),T.info=l("info"),T.warn=l("warning"),T.warning=l("warning"),T.error=l("error"),T.critical=l("critical"),T.uncaughtError=i(function(e,t,r,n,i,a){if(a=a||null,i&&v.isType(i,"error"))return void this._log(this.options.uncaughtErrorLevel,e,i,a,null,!0);if(t&&v.isType(t,"error"))return void this._log(this.options.uncaughtErrorLevel,e,t,a,null,!0);var o={url:t||"",line:r};o.func=m.guessFunctionName(o.url,o.line),o.context=m.gatherContext(o.url,o.line);var s={mode:"onerror",message:i?String(i):e||"uncaught exception",url:document.location.href,stack:[o],useragent:navigator.userAgent},u=this._buildPayload(new Date,this.options.uncaughtErrorLevel,e,s,a);this._enqueuePayload(u,!0,[this.options.uncaughtErrorLevel,e,t,r,n,i])}),T.unhandledRejection=i(function(e,t){var r,n;if(e?(r=e.message||String(e),n=e._rollbarContext):r="unhandled rejection was null or undefined!",n=n||t._rollbarContext||null,e&&v.isType(e,"error"))return void this._log(this.options.uncaughtErrorLevel,r,e,n,null,!0);var i={url:"",line:0};i.func=m.guessFunctionName(i.url,i.line),i.context=m.gatherContext(i.url,i.line);var a={mode:"unhandledrejection",message:r,url:document.location.href,stack:[i],useragent:navigator.userAgent},o=this._buildPayload(new Date,this.options.uncaughtErrorLevel,r,a,n);this._enqueuePayload(o,!0,[this.options.uncaughtErrorLevel,r,i.url,i.line,0,e,t])}),T.global=i(function(e){e=e||{};var t={startTime:e.startTime,maxItems:e.maxItems,itemsPerMinute:e.itemsPerMinute};g(!0,window._globalRollbarOptions,t),void 0!==e.maxItems&&(_=0),void 0!==e.itemsPerMinute&&(E=0)}),T.configure=i(function(e,t){var r=g(!0,{},e);g(!t,this.options,r),this.global(r)}),T.scope=i(function(e){var t=new s(this);return g(!0,t.options.payload,e),t}),T.wrap=function(e,t){try{var r;if(r=v.isType(t,"function")?t:function(){return t||{}},!v.isType(e,"function"))return e;if(e._isWrap)return e;if(!e._wrapped){e._wrapped=function(){try{return e.apply(this,arguments)}catch(t){throw"string"==typeof t&&(t=new String(t)),t.stack||(t._savedStackTrace=m.parse(t)),t._rollbarContext=r()||{},t._rollbarContext._wrappedSource=e.toString(),window._rollbarWrappedError=t,t}},e._wrapped._isWrap=!0;for(var n in e)e.hasOwnProperty(n)&&(e._wrapped[n]=e[n])}return e._wrapped}catch(t){return e}},T.loadFull=function(){v.consoleError("[Rollbar]: Unexpected Rollbar.loadFull() called on a Notifier instance")},s.processPayloads=function(e){return e?void d():void a()};var S=(new Date).getTime(),_=0,E=0;e.exports={Notifier:s,setupJSON:n,topLevelNotifier:o}},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},a=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t=r.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!i)return!1;var a;for(a in e);return void 0===a||r.call(e,a)};e.exports=function e(){var t,r,n,o,s,u,l=arguments[0],c=1,f=arguments.length,d=!1;for("boolean"==typeof l?(d=l,l=arguments[1]||{},c=2):("object"!=typeof l&&"function"!=typeof l||null==l)&&(l={});c<f;++c)if(null!=(t=arguments[c]))for(r in t)n=l[r],o=t[r],l!==o&&(d&&o&&(a(o)||(s=i(o)))?(s?(s=!1,u=n&&i(n)?n:[]):u=n&&a(n)?n:{},l[r]=e(d,u,o)):void 0!==o&&(l[r]=o));return l}},function(e,t,r){"use strict";function n(){return c}function i(){return null}function a(e){var t={};return t._stackFrame=e,t.url=e.fileName,t.line=e.lineNumber,t.func=e.functionName,t.column=e.columnNumber,t.args=e.args,t.context=i(t.url,t.line),t}function o(e){return{stack:function(){var t=[];try{t=l.parse(e)}catch(e){t=[]}for(var r=[],n=0;n<t.length;n++)r.push(new a(t[n]));return r}(),message:e.message,name:e.name}}function s(e){return new o(e)}function u(e){if(!e)return["Unknown error. There was no error message to display.",""];var t=e.match(f),r="(unknown)";return t&&(r=t[t.length-1],e=e.replace((t[t.length-2]||"")+r+":",""),e=e.replace(/(^[\s]+|[\s]+$)/g,"")),[r,e]}var l=r(6),c="?",f=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");e.exports={guessFunctionName:n,guessErrorClass:u,gatherContext:i,parse:s,Stack:o,Frame:a}},function(e,t,r){var n,i,a;!function(o,s){"use strict";i=[r(7)],n=s,void 0!==(a="function"==typeof n?n.apply(t,i):n)&&(e.exports=a)}(0,function(e){"use strict";function t(e,t,r){if("function"==typeof Array.prototype.map)return e.map(t,r);for(var n=new Array(e.length),i=0;i<e.length;i++)n[i]=t.call(r,e[i]);return n}function r(e,t,r){if("function"==typeof Array.prototype.filter)return e.filter(t,r);for(var n=[],i=0;i<e.length;i++)t.call(r,e[i])&&n.push(e[i]);return n}var n=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,a=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(i))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=e.replace(/[\(\)\s]/g,"").split(":"),r=t.pop(),n=t[t.length-1];if(!isNaN(parseFloat(n))&&isFinite(n)){var i=t.pop();return[t.join(":"),i,r]}return[t.join(":"),r,void 0]},parseV8OrIE:function(n){return t(r(n.stack.split("\n"),function(e){return!!e.match(i)},this),function(t){t.indexOf("(eval ")>-1&&(t=t.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=t.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(r.pop()),i=r.join(" ")||void 0,a="eval"===n[0]?void 0:n[0];return new e(i,void 0,a,n[1],n[2],t)},this)},parseFFOrSafari:function(n){return t(r(n.stack.split("\n"),function(e){return!e.match(a)},this),function(t){if(t.indexOf(" > eval")>-1&&(t=t.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===t.indexOf("@")&&-1===t.indexOf(":"))return new e(t);var r=t.split("@"),n=this.extractLocation(r.pop()),i=r.shift()||void 0;return new e(i,void 0,n[0],n[1],n[2],t)},this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,n=t.message.split("\n"),i=[],a=2,o=n.length;a<o;a+=2){var s=r.exec(n[a]);s&&i.push(new e(void 0,void 0,s[2],s[1],void 0,n[a]))}return i},parseOpera10:function(t){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=t.stacktrace.split("\n"),i=[],a=0,o=n.length;a<o;a+=2){var s=r.exec(n[a]);s&&i.push(new e(s[3]||void 0,void 0,s[2],s[1],void 0,n[a]))}return i},parseOpera11:function(i){return t(r(i.stack.split("\n"),function(e){return!!e.match(n)&&!e.match(/^Error created at/)},this),function(t){var r,n=t.split("@"),i=this.extractLocation(n.pop()),a=n.shift()||"",o=a.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;a.match(/\(([^\)]*)\)/)&&(r=a.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new e(o,s,i[0],i[1],i[2],t)},this)}}})},function(e,t,r){var n,i,a;!function(r,o){"use strict";i=[],n=o,void 0!==(a="function"==typeof n?n.apply(t,i):n)&&(e.exports=a)}(0,function(){"use strict";function e(e){return!isNaN(parseFloat(e))&&isFinite(e)}function t(e,t,r,n,i,a){void 0!==e&&this.setFunctionName(e),void 0!==t&&this.setArgs(t),void 0!==r&&this.setFileName(r),void 0!==n&&this.setLineNumber(n),void 0!==i&&this.setColumnNumber(i),void 0!==a&&this.setSource(a)}return t.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(e){this.functionName=String(e)},getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getFileName:function(){return this.fileName},setFileName:function(e){this.fileName=String(e)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(t){if(!e(t))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(t)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(t){if(!e(t))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(t)},getSource:function(){return this.source},setSource:function(e){this.source=String(e)},toString:function(){return(this.getFunctionName()||"{anonymous}")+"("+(this.getArgs()||[]).join(",")+")"+(this.getFileName()?"@"+this.getFileName():"")+(e(this.getLineNumber())?":"+this.getLineNumber():"")+(e(this.getColumnNumber())?":"+this.getColumnNumber():"")}},t})},function(e,t,r){"use strict";function n(e){v=e}function i(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function a(e,t){return i(e)===t}function o(e){if(!a(e,"string"))throw new Error("received invalid input");for(var t=y,r=t.parser[t.strictMode?"strict":"loose"].exec(e),n={},i=14;i--;)n[t.key[i]]=r[i]||"";return n[t.q.name]={},n[t.key[12]].replace(t.q.parser,function(e,r,i){r&&(n[t.q.name][r]=i)}),n}function s(e){var t=o(e);return""===t.anchor&&(t.source=t.source.replace("#","")),e=t.source.replace("?"+t.query,"")}function u(e,t){var r,n,i,o=a(e,"object"),s=a(e,"array"),l=[];if(o)for(r in e)e.hasOwnProperty(r)&&l.push(r);else if(s)for(i=0;i<e.length;++i)l.push(i);for(i=0;i<l.length;++i)r=l[i],n=e[r],o=a(n,"object"),s=a(n,"array"),e[r]=o||s?u(n,t):t(r,n);return e}function l(e){return e=String(e),new Array(e.length+1).join("*")}function c(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:7&r|8).toString(16)})}function f(e){return"function"!=typeof Object.create?function(e){var t=function(){};return function(e){if(null!==e&&e!==Object(e))throw TypeError("Argument must be an object, or null");t.prototype=e||{};var r=new t;return t.prototype=null,null===e&&(r.__proto__=null),r}}()(e):Object.create(e)}function d(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];"object"==typeof r?(r=v.stringify(r),r.length>500&&(r=r.substr(0,500)+"...")):void 0===r&&(r="undefined"),e.push(r)}return e.join(" ")}function h(){m.ieVersion()<=8?console.error(d.apply(null,arguments)):console.error.apply(null,arguments)}function p(){m.ieVersion()<=8?console.info(d.apply(null,arguments)):console.info.apply(null,arguments)}function g(){m.ieVersion()<=8?console.log(d.apply(null,arguments)):console.log.apply(null,arguments)}r(9);var m=r(10),v=null,y={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},M={setupJSON:n,isType:a,parseUri:o,parseUriOptions:y,redact:l,sanitizeUrl:s,traverse:u,typeName:i,uuid4:c,objectCreate:f,consoleError:h,consoleInfo:p,consoleLog:g};e.exports=M},function(e,t){!function(e){"use strict";e.console||(e.console={});for(var t,r,n=e.console,i=function(){},a=["memory"],o="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");t=a.pop();)n[t]||(n[t]={});for(;r=o.pop();)n[r]||(n[r]=i)}("undefined"==typeof window?this:window)},function(e,t){"use strict";function r(){for(var e=3,t=document.createElement("div"),r=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",r[0];);return e>4?e:void 0}var n={ieVersion:r};e.exports=n},function(e,t,r){"use strict";function n(e){o=e}function i(e){this.name="Connection Error",this.message=e,this.stack=(new Error).stack}var a=r(8),o=null;i.prototype=a.objectCreate(Error.prototype),i.prototype.constructor=i;var s={XMLHttpFactories:[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],createXMLHTTPObject:function(){var e,t=!1,r=s.XMLHttpFactories,n=r.length;for(e=0;e<n;e++)try{t=r[e]();break}catch(e){}return t},post:function(e,t,r,n){if(!a.isType(r,"object"))throw new Error("Expected an object to POST");r=o.stringify(r),n=n||function(){};var u=s.createXMLHTTPObject();if(u)try{try{var l=function(){try{if(l&&4===u.readyState){l=void 0;var e=o.parse(u.responseText);200===u.status?n(null,e):a.isType(u.status,"number")&&u.status>=400&&u.status<600?(403==u.status&&a.consoleError("[Rollbar]:"+e.message),n(new Error(String(u.status)))):n(new i("XHR response had no status code (likely connection failure)"))}}catch(e){var t;t=e&&e.stack?e:new Error(e),n(t)}};u.open("POST",e,!0),u.setRequestHeader&&(u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("X-Rollbar-Access-Token",t)),u.onreadystatechange=l,u.send(r)}catch(t){if("undefined"!=typeof XDomainRequest){"http:"===window.location.href.substring(0,5)&&"https"===e.substring(0,5)&&(e="http"+e.substring(5));var c=function(){n(new i("Request timed out"))},f=function(){n(new Error("Error during request"))},d=function(){n(null,o.parse(u.responseText))};u=new XDomainRequest,u.onprogress=function(){},u.ontimeout=c,u.onerror=f,u.onload=d,u.open("POST",e,!0),u.send(r)}}}catch(e){n(e)}}};e.exports={XHR:s,setupJSON:n,ConnectionError:i}}])})},function(e,t,r){(function(t){!function(){function r(e){"use strict";for(var t={fill:0},a=function(e){for(e+=9;e%64>0;e+=1);return e},o=function(e,t){var r=new Uint8Array(e.buffer),n=t%4,i=t-n;switch(n){case 0:r[i+3]=0;case 1:r[i+2]=0;case 2:r[i+1]=0;case 3:r[i+0]=0}for(var a=1+(t>>2);a<e.length;a++)e[a]=0},s=function(e,t,r){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=r/(1<<29)|0,e[15+(2+(t>>2)&-16)]=r<<3},u=function(e,t,r,n,i){var a,o=this,s=i%4,u=(n+s)%4,l=n-u;switch(s){case 0:e[i]=o.charCodeAt(r+3);case 1:e[i+1-(s<<1)|0]=o.charCodeAt(r+2);case 2:e[i+2-(s<<1)|0]=o.charCodeAt(r+1);case 3:e[i+3-(s<<1)|0]=o.charCodeAt(r)}if(!(n<u+s)){for(a=4-s;a<l;a=a+4|0)t[i+a>>2]=o.charCodeAt(r+a)<<24|o.charCodeAt(r+a+1)<<16|o.charCodeAt(r+a+2)<<8|o.charCodeAt(r+a+3);switch(u){case 3:e[i+l+1|0]=o.charCodeAt(r+l+2);case 2:e[i+l+2|0]=o.charCodeAt(r+l+1);case 1:e[i+l+3|0]=o.charCodeAt(r+l)}}},l=function(e,t,r,n,i){var a,o=this,s=i%4,u=(n+s)%4,l=n-u;switch(s){case 0:e[i]=o[r+3];case 1:e[i+1-(s<<1)|0]=o[r+2];case 2:e[i+2-(s<<1)|0]=o[r+1];case 3:e[i+3-(s<<1)|0]=o[r]}if(!(n<u+s)){for(a=4-s;a<l;a=a+4|0)t[i+a>>2|0]=o[r+a]<<24|o[r+a+1]<<16|o[r+a+2]<<8|o[r+a+3];switch(u){case 3:e[i+l+1|0]=o[r+l+2];case 2:e[i+l+2|0]=o[r+l+1];case 1:e[i+l+3|0]=o[r+l]}}},c=function(e,t,r,n,a){var o,s=this,u=a%4,l=(n+u)%4,c=n-l,f=new Uint8Array(i.readAsArrayBuffer(s.slice(r,r+n)));switch(u){case 0:e[a]=f[3];case 1:e[a+1-(u<<1)|0]=f[2];case 2:e[a+2-(u<<1)|0]=f[1];case 3:e[a+3-(u<<1)|0]=f[0]}if(!(n<l+u)){for(o=4-u;o<c;o=o+4|0)t[a+o>>2|0]=f[o]<<24|f[o+1]<<16|f[o+2]<<8|f[o+3];switch(l){case 3:e[a+c+1|0]=f[c+2];case 2:e[a+c+2|0]=f[c+1];case 1:e[a+c+3|0]=f[c]}}},f=function(e){switch(n.getDataType(e)){case"string":return u.bind(e);case"array":case"buffer":return l.bind(e);case"arraybuffer":return l.bind(new Uint8Array(e));case"view":return l.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return c.bind(e)}},d=new Array(256),h=0;h<256;h++)d[h]=(h<16?"0":"")+h.toString(16);var p=function(e){for(var t=new Uint8Array(e),r=new Array(e.byteLength),n=0;n<r.length;n++)r[n]=d[t[n]];return r.join("")},g=function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");t.offset=0,t.maxChunkLen=e,t.padMaxChunkLen=a(e),t.heap=new ArrayBuffer(g(t.padMaxChunkLen+320+20)),t.h32=new Int32Array(t.heap),t.h8=new Int8Array(t.heap),t.core=new r._core({Int32Array:Int32Array,DataView:DataView},{},t.heap),t.buffer=null}(e||65536);var m=function(e,r){t.offset=0;var n=new Int32Array(e,r+320,5);n[0]=1732584193,n[1]=-271733879,n[2]=-1732584194,n[3]=271733878,n[4]=-1009589776},v=function(e,r){var n=a(e),i=new Int32Array(t.heap,0,n>>2);return o(i,e),s(i,e,r),n},y=function(e,r,n,i){f(e)(t.h8,t.h32,r,n,i||0)},M=function(e,r,n,i,a){var o=n;y(e,r,n),a&&(o=v(n,i)),t.core.hash(o,t.padMaxChunkLen)},w=function(e,t){var r=new Int32Array(e,t+320,5),n=new Int32Array(5),i=new DataView(n.buffer);return i.setInt32(0,r[0],!1),i.setInt32(4,r[1],!1),i.setInt32(8,r[2],!1),i.setInt32(12,r[3],!1),i.setInt32(16,r[4],!1),n},x=this.rawDigest=function(e){var r=e.byteLength||e.length||e.size||0;m(t.heap,t.padMaxChunkLen);var n=0,i=t.maxChunkLen;for(n=0;r>n+i;n+=i)M(e,n,i,r,!1);return M(e,n,r-n,r,!0),w(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return p(x(e).buffer)},this.resetState=function(){return m(t.heap,t.padMaxChunkLen),this},this.append=function(e){var r,n=0,i=e.byteLength||e.length||e.size||0,a=t.offset%t.maxChunkLen;for(t.offset+=i;n<i;)r=Math.min(i-n,t.maxChunkLen-a),y(e,n,r,a),a+=r,n+=r,a===t.maxChunkLen&&(t.core.hash(t.maxChunkLen,t.padMaxChunkLen),a=0);return this},this.getState=function(){var e,r=t.offset%t.maxChunkLen;if(r)e=t.heap.slice(0);else{var n=new Int32Array(t.heap,t.padMaxChunkLen+320,5);e=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}return{offset:t.offset,heap:e}},this.setState=function(e){if(t.offset=e.offset,20===e.heap.byteLength){new Int32Array(t.heap,t.padMaxChunkLen+320,5).set(new Int32Array(e.heap))}else t.h32.set(new Int32Array(e.heap));return this};var b=this.rawEnd=function(){var e=t.offset,r=e%t.maxChunkLen,n=v(r,e);t.core.hash(n,t.padMaxChunkLen);var i=w(t.heap,t.padMaxChunkLen);return m(t.heap,t.padMaxChunkLen),i};this.end=function(){return p(b().buffer)}}var n={getDataType:function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if(void 0!==t&&t.Buffer&&t.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(r._core=function(e,t,r){"use asm";var n=new e.Int32Array(r);function i(e,t){e=e|0;t=t|0;var r=0,i=0,a=0,o=0,s=0,u=0,l=0,c=0,f=0,d=0,h=0,p=0,g=0,m=0;a=n[t+320>>2]|0;s=n[t+324>>2]|0;l=n[t+328>>2]|0;f=n[t+332>>2]|0;h=n[t+336>>2]|0;for(r=0;(r|0)<(e|0);r=r+64|0){o=a;u=s;c=l;d=f;p=h;for(i=0;(i|0)<64;i=i+4|0){m=n[r+i>>2]|0;g=((a<<5|a>>>27)+(s&l|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;n[e+i>>2]=m}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){m=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;g=((a<<5|a>>>27)+(s&l|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;n[i>>2]=m}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){m=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;g=((a<<5|a>>>27)+(s^l^f)|0)+((m+h|0)+1859775393|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;n[i>>2]=m}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){m=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;g=((a<<5|a>>>27)+(s&l|s&f|l&f)|0)+((m+h|0)-1894007588|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;n[i>>2]=m}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){m=(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])<<1|(n[i-12>>2]^n[i-32>>2]^n[i-56>>2]^n[i-64>>2])>>>31;g=((a<<5|a>>>27)+(s^l^f)|0)+((m+h|0)-899497514|0)|0;h=f;f=l;l=s<<30|s>>>2;s=a;a=g;n[i>>2]=m}a=a+o|0;s=s+u|0;l=l+c|0;f=f+d|0;h=h+p|0}n[t+320>>2]=a;n[t+324>>2]=s;n[t+328>>2]=l;n[t+332>>2]=f;n[t+336>>2]=h}return{hash:i}},e.exports=r,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,a=function(e,t,r){try{return r(null,e.digest(t))}catch(e){return r(e)}},o=function(e,t,r,n,i){var a=new self.FileReader;a.onloadend=function(){var s=a.result;t+=a.result.byteLength;try{e.append(s)}catch(e){return void i(e)}t<n.size?o(e,t,r,n,i):i(null,e.end())},a.readAsArrayBuffer(n.slice(t,t+r))};self.onmessage=function(e){var t=e.data.data,n=e.data.file,i=e.data.id;if(void 0!==i&&(n||t)){var s=e.data.blockSize||4194304,u=new r(s);u.resetState();var l=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};t&&a(u,t,l),n&&o(u,0,s,n,l)}}}}()}).call(t,r(66))},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return l[u]=n,s(u),u++}function i(e){delete l[e]}function a(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function o(e){if(c)setTimeout(o,0,e);else{var t=l[e];if(t){c=!0;try{a(t)}finally{i(e),c=!1}}}}if(!e.setImmediate){var s,u=1,l={},c=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){o(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&o(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),s=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},s=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;s=function(t){var r=f.createElement("script");r.onreadystatechange=function(){o(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){s=function(e){setTimeout(o,0,e)}}(),d.setImmediate=n,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(66),r(146))},function(e,t,r){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(694),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t){function r(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function n(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new r,this.dtree=new r}function i(e,t,r,n){var i,a;for(i=0;i<r;++i)e[i]=0;for(i=0;i<30-r;++i)e[i+r]=i/r|0;for(a=n,i=0;i<30;++i)t[i]=a,a+=1<<e[i]}function a(e,t,r,n){var i,a;for(i=0;i<16;++i)e.table[i]=0;for(i=0;i<n;++i)e.table[t[r+i]]++;for(e.table[0]=0,a=0,i=0;i<16;++i)S[i]=a,a+=e.table[i];for(i=0;i<n;++i)t[r+i]&&(e.trans[S[t[r+i]]++]=i)}function o(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function s(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function u(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,i=0,a=e.tag;do{n=2*n+(1&a),a>>>=1,++i,r+=t.table[i],n-=t.table[i]}while(n>=0);return e.tag=a,e.bitcount-=i,t.trans[r+n]}function l(e,t,r){var n,i,o,l,c,f;for(n=s(e,5,257),i=s(e,5,1),o=s(e,4,4),l=0;l<19;++l)T[l]=0;for(l=0;l<o;++l){var d=s(e,3,0);T[x[l]]=d}for(a(b,T,0,19),c=0;c<n+i;){var h=u(e,b);switch(h){case 16:var p=T[c-1];for(f=s(e,2,3);f;--f)T[c++]=p;break;case 17:for(f=s(e,3,3);f;--f)T[c++]=0;break;case 18:for(f=s(e,7,11);f;--f)T[c++]=0;break;default:T[c++]=h}}a(t,T,0,n),a(r,T,n,i)}function c(e,t,r){for(;;){var n=u(e,t);if(256===n)return h;if(n<256)e.dest[e.destLen++]=n;else{var i,a,o,l;for(n-=257,i=s(e,v[n],y[n]),a=u(e,r),o=e.destLen-s(e,M[a],w[a]),l=o;l<o+i;++l)e.dest[e.destLen++]=e.dest[l]}}}function f(e){for(var t,r,n;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],r=e.source[e.sourceIndex+3],r=256*r+e.source[e.sourceIndex+2],t!==(65535&~r))return p;for(e.sourceIndex+=4,n=t;n;--n)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,h}function d(e,t){var r,i,a=new n(e,t);do{switch(r=o(a),s(a,2,0)){case 0:i=f(a);break;case 1:i=c(a,g,m);break;case 2:l(a,a.ltree,a.dtree),i=c(a,a.ltree,a.dtree);break;default:i=p}if(i!==h)throw new Error("Data error")}while(!r);return a.destLen<a.dest.length?"function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen):a.dest}var h=0,p=-3,g=new r,m=new r,v=new Uint8Array(30),y=new Uint16Array(30),M=new Uint8Array(30),w=new Uint16Array(30),x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),b=new r,T=new Uint8Array(320),S=new Uint16Array(16);!function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(g,m),i(v,y,4,3),i(M,w,2,1),v[28]=0,y[28]=258,e.exports=d},function(module,exports,__webpack_require__){(function(Buffer){var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,r){e=e.split("."),r=r||goog.global,e[0]in r||!r.execScript||r.execScript("var "+e[0]);for(var n;e.length&&(n=e.shift());)!e.length&&goog.isDef(t)?r[n]=t:r=r[n]?r[n]:r[n]={}},goog.define=function(e,t){var r=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?r=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(r=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,r)},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED)return goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var r,n=e.split("."),i=t||goog.global;r=n.shift();){if(!goog.isDefAndNotNull(i[r]))return null;i=i[r]}return i},goog.globalize=function(e,t){var r,n=t||goog.global;for(r in e)n[r]=e[r]},goog.addDependency=function(e,t,r,n){if(goog.DEPENDENCIES_ENABLED){var i;e=e.replace(/\\/g,"/");for(var a=goog.dependencies_,o=0;i=t[o];o++)a.nameToPath[i]=e,a.pathIsModule[e]=!!n;for(n=0;t=r[n];n++)e in a.requires||(a.requires[e]={}),a.requires[e][t]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.included_[t]=!0,goog.writeScripts_(),null}throw e="goog.require could not find: "+e,goog.logToConsole_(e),Error(e)}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return void 0!==e&&"write"in e},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("SCRIPT"),t=e.length-1;0<=t;--t){var r=e[t].src,n=r.lastIndexOf("?"),n=-1==n?r.length:n;if("base.js"==r.substr(n-7,7)){goog.basePath=r.substr(0,n-7);break}}},goog.importScript_=function(e,t){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!goog.global.atob&&goog.global.document&&goog.global.document.all,goog.importModule_=function(e){goog.importScript_("",'goog.retrieveAndExecModule_("'+e+'");')&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(0<e){var t=goog.queuedModules_;goog.queuedModules_=[];for(var r=0;r<e;r++)goog.maybeProcessDeferredPath_(t[r])}},goog.maybeProcessDeferredDep_=function(e){goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)&&(e=goog.getPathFromDeps_(e),goog.maybeProcessDeferredPath_(goog.basePath+e))},goog.isDeferredModule_=function(e){return!(!(e=goog.getPathFromDeps_(e))||!goog.dependencies_.pathIsModule[e])&&goog.basePath+e in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(e){if((e=goog.getPathFromDeps_(e))&&e in goog.dependencies_.requires)for(var t in goog.dependencies_.requires[e])if(!goog.isProvided_(t)&&!goog.isDeferredModule_(t))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1};var r;if(goog.isFunction(e))r=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");r=goog.loadModuleFromSource_.call(goog.global,e)}var n=goog.moduleLoaderState_.moduleName;if(!goog.isString(n)||!n)throw Error('Invalid module name "'+n+'"');if(goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(n,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(r),goog.loadedModules_[n]=r,goog.moduleLoaderState_.declareTestMethods)for(var i in r)0!==i.indexOf("test",0)&&"tearDown"!=i&&"setUp"!=i&&"setUpPage"!=i&&"tearDownPage"!=i||(goog.global[i]=r[i])}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"><\/script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.src=e,r.defer=!1,r.async=!1,t.head.appendChild(r)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var r=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==r.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}var n=goog.IS_OLD_IE_;return void 0===t?n?(n=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ",r.write('<script type="text/javascript" src="'+e+'"'+n+"><\/script>")):goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e):r.write('<script type="text/javascript">'+t+"<\/script>"),!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(){function e(t){if(!(t in i.written)){if(!(t in i.visited)&&(i.visited[t]=!0,t in i.requires))for(var a in i.requires[t])if(!goog.isProvided_(a)){if(!(a in i.nameToPath))throw Error("Undefined nameToPath for "+a);e(i.nameToPath[a])}t in n||(n[t]=!0,r.push(t))}}var t,r=[],n={},i=goog.dependencies_;for(t in goog.included_)i.written[t]||e(t);for(var a=0;a<r.length;a++)t=r[a],goog.dependencies_.written[t]=!0;var o=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,a=0;a<r.length;a++){if(!(t=r[a]))throw goog.moduleLoaderState_=o,Error("Undefined script input");i.pathIsModule[t]?goog.importModule_(goog.basePath+t):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=o},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(e){e=e.split("/");for(var t=0;t<e.length;)"."==e[t]?e.splice(t,1):t&&".."==e[t]&&e[t-1]&&".."!=e[t-1]?e.splice(--t,2):t++;return e.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),t.responseText},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var r=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,n=goog.loadFileSync_(e);if(null==n)throw Error("load of "+e+"failed");n=goog.wrapModule_(e,n),goog.IS_OLD_IE_?(goog.dependencies_.deferred[t]=n,goog.queuedModules_.push(t)):r(e,n)}},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var r,t="array"==t?[]:{};for(r in e)t[r]=goog.cloneObject(e[r]);return t}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),void 0!==goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("SCRIPT");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.body.appendChild(r),t.body.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(e,t){var r=function(e){return goog.cssNameMapping_[e]||e},n=function(e){e=e.split("-");for(var t=[],n=0;n<e.length;n++)t.push(r(e[n]));return t.join("-")},n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:n:function(e){return e};return t?e+"-"+n(t):n(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,r){return r in t?t[r]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,t){function r(){}r.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,n){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[r].apply(e,i)}},goog.base=function(e,t,r){var n=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_){for(var i=Array(arguments.length-1),a=1;a<arguments.length;a++)i[a-1]=arguments[a];return n.superClass_.constructor.apply(e,i)}for(i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];for(var a=!1,o=e.constructor;o;o=o.superClass_&&o.superClass_.constructor)if(o.prototype[t]===n)a=!0;else if(a)return o.prototype[t].apply(e,i);if(e[t]===n)return e.constructor.prototype[t].apply(e,i);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var r=t.constructor,n=t.statics;return r&&r!=Object.prototype.constructor||(r=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),r=goog.defineClass.createSealingConstructor_(r,e),e&&goog.inherits(r,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(r.prototype,t),null!=n&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n)),r},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(e,t){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return e;var r=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===r&&Object.seal(t),t};return r}return e},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.math={},goog.math.Long=function(e,t){this.low_=0|e,this.high_=0|t},goog.math.Long.IntCache_={},goog.math.Long.fromInt=function(e){if(-128<=e&&128>e){var t=goog.math.Long.IntCache_[e];if(t)return t}return t=new goog.math.Long(0|e,0>e?-1:0),-128<=e&&128>e&&(goog.math.Long.IntCache_[e]=t),t},goog.math.Long.fromNumber=function(e){return isNaN(e)||!isFinite(e)?goog.math.Long.getZero():e<=-goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMinValue():e+1>=goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMaxValue():0>e?goog.math.Long.fromNumber(-e).negate():new goog.math.Long(e%goog.math.Long.TWO_PWR_32_DBL_|0,e/goog.math.Long.TWO_PWR_32_DBL_|0)},goog.math.Long.fromBits=function(e,t){return new goog.math.Long(e,t)},goog.math.Long.fromString=function(e,t){if(0==e.length)throw Error("number format error: empty string");var r=t||10;if(2>r||36<r)throw Error("radix out of range: "+r);if("-"==e.charAt(0))return goog.math.Long.fromString(e.substring(1),r).negate();if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character: '+e);for(var n=goog.math.Long.fromNumber(Math.pow(r,8)),i=goog.math.Long.getZero(),a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),s=parseInt(e.substring(a,a+o),r);8>o?(o=goog.math.Long.fromNumber(Math.pow(r,o)),i=i.multiply(o).add(goog.math.Long.fromNumber(s))):(i=i.multiply(n),i=i.add(goog.math.Long.fromNumber(s)))}return i},goog.math.Long.TWO_PWR_16_DBL_=65536,goog.math.Long.getTwoPwr24DBL_=16777216,goog.math.Long.TWO_PWR_32_DBL_=goog.math.Long.TWO_PWR_16_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_31_DBL_=goog.math.Long.TWO_PWR_32_DBL_/2,goog.math.Long.TWO_PWR_48_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_64_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_32_DBL_,goog.math.Long.TWO_PWR_63_DBL_=goog.math.Long.TWO_PWR_64_DBL_/2,goog.math.Long.getZero=function(){return goog.math.Long.ZERO_||(goog.math.Long.ZERO_=goog.math.Long.fromInt(0)),goog.math.Long.ZERO_},goog.math.Long.getOne=function(){return goog.math.Long.ONE_||(goog.math.Long.ONE_=goog.math.Long.fromInt(1)),goog.math.Long.ONE_},goog.math.Long.getNegOne=function(){return goog.math.Long.NEG_ONE_||(goog.math.Long.NEG_ONE_=goog.math.Long.fromInt(-1)),goog.math.Long.NEG_ONE_},goog.math.Long.getMaxValue=function(){return goog.math.Long.MAX_VALUE_||(goog.math.Long.MAX_VALUE_=goog.math.Long.fromBits(-1,2147483647)),goog.math.Long.MAX_VALUE_},goog.math.Long.getMinValue=function(){return goog.math.Long.MIN_VALUE_||(goog.math.Long.MIN_VALUE_=goog.math.Long.fromBits(0,-2147483648)),goog.math.Long.MIN_VALUE_},goog.math.Long.getTwoPwr24=function(){return goog.math.Long.TWO_PWR_24_||(goog.math.Long.TWO_PWR_24_=goog.math.Long.fromInt(16777216)),goog.math.Long.TWO_PWR_24_},goog.math.Long.prototype.toInt=function(){return this.low_},goog.math.Long.prototype.toNumber=function(){return this.high_*goog.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},goog.math.Long.prototype.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(goog.math.Long.getMinValue())){var t=goog.math.Long.fromNumber(e),r=this.div(t),t=r.multiply(t).subtract(this);return r.toString(e)+t.toInt().toString(e)}return"-"+this.negate().toString(e)}for(var r=goog.math.Long.fromNumber(Math.pow(e,6)),t=this,n="";;){var i=t.div(r),a=t.subtract(i.multiply(r)).toInt().toString(e),t=i;if(t.isZero())return a+n;for(;6>a.length;)a="0"+a;n=""+a+n}},goog.math.Long.prototype.getHighBits=function(){return this.high_},goog.math.Long.prototype.getLowBits=function(){return this.low_},goog.math.Long.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_},goog.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(goog.math.Long.getMinValue())?64:this.negate().getNumBitsAbs();for(var e=0!=this.high_?this.high_:this.low_,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high_?t+33:t+1},goog.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},goog.math.Long.prototype.isNegative=function(){return 0>this.high_},goog.math.Long.prototype.isOdd=function(){return 1==(1&this.low_)},goog.math.Long.prototype.equals=function(e){return this.high_==e.high_&&this.low_==e.low_},goog.math.Long.prototype.notEquals=function(e){return this.high_!=e.high_||this.low_!=e.low_},goog.math.Long.prototype.lessThan=function(e){return 0>this.compare(e)},goog.math.Long.prototype.lessThanOrEqual=function(e){return 0>=this.compare(e)},goog.math.Long.prototype.greaterThan=function(e){return 0<this.compare(e)},goog.math.Long.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},goog.math.Long.prototype.compare=function(e){if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.subtract(e).isNegative()?-1:1},goog.math.Long.prototype.negate=function(){return this.equals(goog.math.Long.getMinValue())?goog.math.Long.getMinValue():this.not().add(goog.math.Long.getOne())},goog.math.Long.prototype.add=function(e){var t,r=this.high_>>>16,n=65535&this.high_,i=this.low_>>>16,a=e.high_>>>16,o=65535&e.high_,s=e.low_>>>16;return t=(65535&this.low_)+(65535&e.low_)+0,e=0+(t>>>16),e+=i+s,i=0+(e>>>16),i+=n+o,n=0+(i>>>16),n=n+(r+a)&65535,goog.math.Long.fromBits((65535&e)<<16|65535&t,n<<16|65535&i)},goog.math.Long.prototype.subtract=function(e){return this.add(e.negate())},goog.math.Long.prototype.multiply=function(e){if(this.isZero()||e.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue()))return e.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(e.equals(goog.math.Long.getMinValue()))return this.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(goog.math.Long.getTwoPwr24())&&e.lessThan(goog.math.Long.getTwoPwr24()))return goog.math.Long.fromNumber(this.toNumber()*e.toNumber());var t=this.high_>>>16,r=65535&this.high_,n=this.low_>>>16,i=65535&this.low_,a=e.high_>>>16,o=65535&e.high_,s=e.low_>>>16;e=65535&e.low_;var u,l,c,f;return f=0+i*e,c=0+(f>>>16),c+=n*e,l=0+(c>>>16),c=(65535&c)+i*s,l+=c>>>16,c&=65535,l+=r*e,u=0+(l>>>16),l=(65535&l)+n*s,u+=l>>>16,l&=65535,l+=i*o,u+=l>>>16,l&=65535,u=u+(t*e+r*s+n*o+i*a)&65535,goog.math.Long.fromBits(c<<16|65535&f,u<<16|l)},goog.math.Long.prototype.div=function(e){if(e.isZero())throw Error("division by zero");if(this.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue())){if(e.equals(goog.math.Long.getOne())||e.equals(goog.math.Long.getNegOne()))return goog.math.Long.getMinValue();if(e.equals(goog.math.Long.getMinValue()))return goog.math.Long.getOne();var t=this.shiftRight(1).div(e).shiftLeft(1);if(t.equals(goog.math.Long.getZero()))return e.isNegative()?goog.math.Long.getOne():goog.math.Long.getNegOne();var r=this.subtract(e.multiply(t));return t.add(r.div(e))}if(e.equals(goog.math.Long.getMinValue()))return goog.math.Long.getZero();if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(var n=goog.math.Long.getZero(),r=this;r.greaterThanOrEqual(e);){for(var t=Math.max(1,Math.floor(r.toNumber()/e.toNumber())),i=Math.ceil(Math.log(t)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),a=goog.math.Long.fromNumber(t),o=a.multiply(e);o.isNegative()||o.greaterThan(r);)t-=i,a=goog.math.Long.fromNumber(t),o=a.multiply(e);a.isZero()&&(a=goog.math.Long.getOne()),n=n.add(a),r=r.subtract(o)}return n},goog.math.Long.prototype.modulo=function(e){return this.subtract(this.div(e).multiply(e))},goog.math.Long.prototype.not=function(){return goog.math.Long.fromBits(~this.low_,~this.high_)},goog.math.Long.prototype.and=function(e){return goog.math.Long.fromBits(this.low_&e.low_,this.high_&e.high_)},goog.math.Long.prototype.or=function(e){return goog.math.Long.fromBits(this.low_|e.low_,this.high_|e.high_)},goog.math.Long.prototype.xor=function(e){return goog.math.Long.fromBits(this.low_^e.low_,this.high_^e.high_)},goog.math.Long.prototype.shiftLeft=function(e){if(0==(e&=63))return this;var t=this.low_;return 32>e?goog.math.Long.fromBits(t<<e,this.high_<<e|t>>>32-e):goog.math.Long.fromBits(0,t<<e-32)},goog.math.Long.prototype.shiftRight=function(e){if(0==(e&=63))return this;var t=this.high_;return 32>e?goog.math.Long.fromBits(this.low_>>>e|t<<32-e,t>>e):goog.math.Long.fromBits(t>>e-32,0<=t?0:-1)},goog.math.Long.prototype.shiftRightUnsigned=function(e){if(0==(e&=63))return this;var t=this.high_;return 32>e?goog.math.Long.fromBits(this.low_>>>e|t<<32-e,t>>>e):32==e?goog.math.Long.fromBits(t,0):goog.math.Long.fromBits(t>>>e-32,0)},goog.object={},goog.object.forEach=function(e,t,r){for(var n in e)t.call(r,e[n],n,e)},goog.object.filter=function(e,t,r){var n,i={};for(n in e)t.call(r,e[n],n,e)&&(i[n]=e[n]);return i},goog.object.map=function(e,t,r){var n,i={};for(n in e)i[n]=t.call(r,e[n],n,e);return i},goog.object.some=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return!0;return!1},goog.object.every=function(e,t,r){for(var n in e)if(!t.call(r,e[n],n,e))return!1;return!0},goog.object.getCount=function(e){var t,r=0;for(t in e)r++;return r},goog.object.getAnyKey=function(e){for(var t in e)return t},goog.object.getAnyValue=function(e){for(var t in e)return e[t]},goog.object.contains=function(e,t){return goog.object.containsValue(e,t)},goog.object.getValues=function(e){var t,r=[],n=0;for(t in e)r[n++]=e[t];return r},goog.object.getKeys=function(e){var t,r=[],n=0;for(t in e)r[n++]=t;return r},goog.object.getValueByKeys=function(e,t){for(var r=goog.isArrayLike(t),n=r?t:arguments,r=r?0:1;r<n.length&&(e=e[n[r]],goog.isDef(e));r++);return e},goog.object.containsKey=function(e,t){return t in e},goog.object.containsValue=function(e,t){for(var r in e)if(e[r]==t)return!0;return!1},goog.object.findKey=function(e,t,r){for(var n in e)if(t.call(r,e[n],n,e))return n},goog.object.findValue=function(e,t,r){return(t=goog.object.findKey(e,t,r))&&e[t]},goog.object.isEmpty=function(e){for(var t in e)return!1;return!0},goog.object.clear=function(e){for(var t in e)delete e[t]},goog.object.remove=function(e,t){var r;return(r=t in e)&&delete e[t],r},goog.object.add=function(e,t,r){if(t in e)throw Error('The object already contains the key "'+t+'"');goog.object.set(e,t,r)},goog.object.get=function(e,t,r){return t in e?e[t]:r},goog.object.set=function(e,t,r){e[t]=r},goog.object.setIfUndefined=function(e,t,r){return t in e?e[t]:e[t]=r},goog.object.setWithReturnValueIfNotSet=function(e,t,r){return t in e?e[t]:(r=r(),e[t]=r)},goog.object.equals=function(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;for(r in t)if(!(r in e))return!1;return!0},goog.object.clone=function(e){var t,r={};for(t in e)r[t]=e[t];return r},goog.object.unsafeClone=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var r,t="array"==t?[]:{};for(r in e)t[r]=goog.object.unsafeClone(e[r]);return t}return e},goog.object.transpose=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(e,t){for(var r,n,i=1;i<arguments.length;i++){n=arguments[i];for(r in n)e[r]=n[r];for(var a=0;a<goog.object.PROTOTYPE_FIELDS_.length;a++)r=goog.object.PROTOTYPE_FIELDS_[a],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}},goog.object.create=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(t%2)throw Error("Uneven number of arguments");for(var r={},n=0;n<t;n+=2)r[arguments[n]]=arguments[n+1];return r},goog.object.createSet=function(e){var t=arguments.length;if(1==t&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var r={},n=0;n<t;n++)r[arguments[n]]=!0;return r},goog.object.createImmutableView=function(e){var t=e;return Object.isFrozen&&!Object.isFrozen(e)&&(t=Object.create(e),Object.freeze(t)),t},goog.object.isImmutableView=function(e){return!!Object.isFrozen&&Object.isFrozen(e)};var com={cognitect:{}};com.cognitect.transit={},com.cognitect.transit.delimiters={},com.cognitect.transit.delimiters.ESC="~",com.cognitect.transit.delimiters.TAG="#",com.cognitect.transit.delimiters.SUB="^",com.cognitect.transit.delimiters.RES="`",com.cognitect.transit.delimiters.ESC_TAG="~#",com.cognitect.transit.caching={},com.cognitect.transit.caching.MIN_SIZE_CACHEABLE=3,com.cognitect.transit.caching.BASE_CHAR_IDX=48,com.cognitect.transit.caching.CACHE_CODE_DIGITS=44,com.cognitect.transit.caching.MAX_CACHE_ENTRIES=com.cognitect.transit.caching.CACHE_CODE_DIGITS*com.cognitect.transit.caching.CACHE_CODE_DIGITS,com.cognitect.transit.caching.MAX_CACHE_SIZE=4096,com.cognitect.transit.caching.isCacheable=function(e,t){if(e.length>com.cognitect.transit.caching.MIN_SIZE_CACHEABLE){if(t)return!0;var r=e.charAt(0),n=e.charAt(1);return r===com.cognitect.transit.delimiters.ESC&&(":"===n||"$"===n||"#"===n)}return!1},com.cognitect.transit.caching.idxToCode=function(e){var t=Math.floor(e/com.cognitect.transit.caching.CACHE_CODE_DIGITS);return e=String.fromCharCode(e%com.cognitect.transit.caching.CACHE_CODE_DIGITS+com.cognitect.transit.caching.BASE_CHAR_IDX),0===t?com.cognitect.transit.delimiters.SUB+e:com.cognitect.transit.delimiters.SUB+String.fromCharCode(t+com.cognitect.transit.caching.BASE_CHAR_IDX)+e},com.cognitect.transit.caching.WriteCache=function(){this.cacheSize=this.gen=this.idx=0,this.cache={}},com.cognitect.transit.caching.WriteCache.prototype.write=function(e,t){if(com.cognitect.transit.caching.isCacheable(e,t)){this.cacheSize===com.cognitect.transit.caching.MAX_CACHE_SIZE?(this.clear(),this.gen=0,this.cache={}):this.idx===com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&this.clear();var r=this.cache[e];return null==r?(this.cache[e]=[com.cognitect.transit.caching.idxToCode(this.idx),this.gen],this.idx++,e):r[1]!=this.gen?(r[1]=this.gen,r[0]=com.cognitect.transit.caching.idxToCode(this.idx),this.idx++,e):r[0]}return e},com.cognitect.transit.caching.WriteCache.prototype.clear=function(){this.idx=0,this.gen++},com.cognitect.transit.caching.writeCache=function(){return new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.caching.isCacheCode=function(e){return e.charAt(0)===com.cognitect.transit.delimiters.SUB&&" "!==e.charAt(1)},com.cognitect.transit.caching.codeToIdx=function(e){if(2===e.length)return e.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX;var t=(e.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX)*com.cognitect.transit.caching.CACHE_CODE_DIGITS;return e=e.charCodeAt(2)-com.cognitect.transit.caching.BASE_CHAR_IDX,t+e},com.cognitect.transit.caching.ReadCache=function(){this.idx=0,this.cache=[]},com.cognitect.transit.caching.ReadCache.prototype.write=function(e,t){return this.idx==com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&(this.idx=0),this.cache[this.idx]=e,this.idx++,e},com.cognitect.transit.caching.ReadCache.prototype.read=function(e,t){return this.cache[com.cognitect.transit.caching.codeToIdx(e)]},com.cognitect.transit.caching.ReadCache.prototype.clear=function(){this.idx=0},com.cognitect.transit.caching.readCache=function(){return new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.util={},com.cognitect.transit.util.objectKeys=void 0!==Object.keys?function(e){return Object.keys(e)}:function(e){return goog.object.getKeys(e)},com.cognitect.transit.util.isArray=void 0!==Array.isArray?function(e){return Array.isArray(e)}:function(e){return"array"===goog.typeOf(e)},com.cognitect.transit.util.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",com.cognitect.transit.util.randInt=function(e){return Math.round(Math.random()*e)},com.cognitect.transit.util.randHex=function(){return com.cognitect.transit.util.randInt(15).toString(16)},com.cognitect.transit.util.randomUUID=function(){var e=(8|3&com.cognitect.transit.util.randInt(14)).toString(16);return com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-4"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+e+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()},com.cognitect.transit.util.btoa=function(e){if("undefined"!=typeof btoa)return btoa(e);e=String(e);for(var t,r,n=0,i=com.cognitect.transit.util.chars,a="";e.charAt(0|n)||(i="=",n%1);a+=i.charAt(63&t>>8-n%1*8)){if(255<(r=e.charCodeAt(n+=.75)))throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");t=t<<8|r}return a},com.cognitect.transit.util.atob=function(e){if("undefined"!=typeof atob)return atob(e);if(e=String(e).replace(/=+$/,""),1==e.length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,r,n=0,i=0,a="";r=e.charAt(i++);~r&&(t=n%4?64*t+r:r,n++%4)?a+=String.fromCharCode(255&t>>(-2*n&6)):0)r=com.cognitect.transit.util.chars.indexOf(r);return a},com.cognitect.transit.util.Uint8ToBase64=function(e){for(var t=0,r=e.length,n="",i=null;t<r;)i=e.subarray(t,Math.min(t+32768,r)),n+=String.fromCharCode.apply(null,i),t+=32768;return com.cognitect.transit.util.btoa(n)},com.cognitect.transit.util.Base64ToUint8=function(e){e=com.cognitect.transit.util.atob(e);for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++){var i=e.charCodeAt(n);r[n]=i}return r},com.cognitect.transit.eq={},com.cognitect.transit.eq.hashCodeProperty="transit$hashCode$",com.cognitect.transit.eq.hashCodeCounter=1,com.cognitect.transit.eq.equals=function(e,t){if(null==e)return null==t;if(e===t)return!0;if("object"==typeof e){if(com.cognitect.transit.util.isArray(e)){if(com.cognitect.transit.util.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!com.cognitect.transit.eq.equals(e[r],t[r]))return!1;return!0}return!1}if(e.com$cognitect$transit$equals)return e.com$cognitect$transit$equals(t);if(null!=t&&"object"==typeof t){if(t.com$cognitect$transit$equals)return t.com$cognitect$transit$equals(e);var n,r=0,i=com.cognitect.transit.util.objectKeys(t).length;for(n in e)if(e.hasOwnProperty(n)&&(r++,!t.hasOwnProperty(n)||!com.cognitect.transit.eq.equals(e[n],t[n])))return!1;return r===i}}return!1},com.cognitect.transit.eq.hashCombine=function(e,t){return e^t+2654435769+(e<<6)+(e>>2)},com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=0,com.cognitect.transit.eq.STR_CACHE_MAX=256,com.cognitect.transit.eq.hashString=function(e){var t=com.cognitect.transit.eq.stringCodeCache[e];if(null!=t)return t;for(var r=t=0;r<e.length;++r)t=31*t+e.charCodeAt(r),t%=4294967296;return com.cognitect.transit.eq.stringCodeCacheSize++,com.cognitect.transit.eq.stringCodeCacheSize>=com.cognitect.transit.eq.STR_CACHE_MAX&&(com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=1),com.cognitect.transit.eq.stringCodeCache[e]=t},com.cognitect.transit.eq.hashMapLike=function(e){var t=0;if(null!=e.forEach)e.forEach(function(e,r,n){t=(t+(com.cognitect.transit.eq.hashCode(r)^com.cognitect.transit.eq.hashCode(e)))%4503599627370496});else for(var r=com.cognitect.transit.util.objectKeys(e),n=0;n<r.length;n++)var i=r[n],a=e[i],t=(t+(com.cognitect.transit.eq.hashCode(i)^com.cognitect.transit.eq.hashCode(a)))%4503599627370496;return t},com.cognitect.transit.eq.hashArrayLike=function(e){var t=0;if(com.cognitect.transit.util.isArray(e))for(var r=0;r<e.length;r++)t=com.cognitect.transit.eq.hashCombine(t,com.cognitect.transit.eq.hashCode(e[r]));else e.forEach&&e.forEach(function(e,r){t=com.cognitect.transit.eq.hashCombine(t,com.cognitect.transit.eq.hashCode(e))});return t},com.cognitect.transit.eq.hashCode=function(e){if(null==e)return 0;switch(typeof e){case"number":return e;case"boolean":return!0===e?1:0;case"string":return com.cognitect.transit.eq.hashString(e);case"function":var t=e[com.cognitect.transit.eq.hashCodeProperty];return t||(t=com.cognitect.transit.eq.hashCodeCounter,void 0!==Object.defineProperty?Object.defineProperty(e,com.cognitect.transit.eq.hashCodeProperty,{value:t,enumerable:!1}):e[com.cognitect.transit.eq.hashCodeProperty]=t,com.cognitect.transit.eq.hashCodeCounter++),t;default:return e instanceof Date?e.valueOf():com.cognitect.transit.util.isArray(e)?com.cognitect.transit.eq.hashArrayLike(e):e.com$cognitect$transit$hashCode?e.com$cognitect$transit$hashCode():com.cognitect.transit.eq.hashMapLike(e)}},com.cognitect.transit.eq.extendToEQ=function(e,t){return e.com$cognitect$transit$hashCode=t.hashCode,e.com$cognitect$transit$equals=t.equals,e},com.cognitect.transit.types={},com.cognitect.transit.types.ITERATOR="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",com.cognitect.transit.types.TaggedValue=function(e,t){this.tag=e,this.rep=t,this.hashCode=-1},com.cognitect.transit.types.TaggedValue.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"},com.cognitect.transit.types.TaggedValue.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},com.cognitect.transit.types.TaggedValue.prototype.equiv=com.cognitect.transit.types.TaggedValue.prototype.equiv,com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&(this.tag===e.tag&&com.cognitect.transit.eq.equals(this.rep,e.rep))},com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCombine(com.cognitect.transit.eq.hashCode(this.tag),com.cognitect.transit.eq.hashCode(this.rep))),this.hashCode},com.cognitect.transit.types.taggedValue=function(e,t){return new com.cognitect.transit.types.TaggedValue(e,t)},com.cognitect.transit.types.isTaggedValue=function(e){return e instanceof com.cognitect.transit.types.TaggedValue},com.cognitect.transit.types.nullValue=function(){return null},com.cognitect.transit.types.boolValue=function(e){return"t"===e},com.cognitect.transit.types.MAX_INT=goog.math.Long.fromString("9007199254740991"),com.cognitect.transit.types.MIN_INT=goog.math.Long.fromString("-9007199254740991"),com.cognitect.transit.types.intValue=function(e){return"number"==typeof e||e instanceof goog.math.Long?e:(e=goog.math.Long.fromString(e,10),e.greaterThan(com.cognitect.transit.types.MAX_INT)||e.lessThan(com.cognitect.transit.types.MIN_INT)?e:e.toNumber())},goog.math.Long.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},goog.math.Long.prototype.equiv=goog.math.Long.prototype.equiv,goog.math.Long.prototype.com$cognitect$transit$equals=function(e){return e instanceof goog.math.Long&&this.equals(e)},goog.math.Long.prototype.com$cognitect$transit$hashCode=function(){return this.toInt()},com.cognitect.transit.types.isInteger=function(e){return e instanceof goog.math.Long||"number"==typeof e&&!isNaN(e)&&1/0!==e&&parseFloat(e)===parseInt(e,10)},com.cognitect.transit.types.floatValue=function(e){return parseFloat(e)},com.cognitect.transit.types.bigInteger=function(e){return com.cognitect.transit.types.taggedValue("n",e)},com.cognitect.transit.types.isBigInteger=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"n"===e.tag},com.cognitect.transit.types.bigDecimalValue=function(e){return com.cognitect.transit.types.taggedValue("f",e)},com.cognitect.transit.types.isBigDecimal=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"f"===e.tag},com.cognitect.transit.types.charValue=function(e){return e},com.cognitect.transit.types.Keyword=function(e){this._name=e,this.hashCode=-1},com.cognitect.transit.types.Keyword.prototype.toString=function(){return":"+this._name},com.cognitect.transit.types.Keyword.prototype.namespace=function(){var e=this._name.indexOf("/");return-1!=e?this._name.substring(0,e):null},com.cognitect.transit.types.Keyword.prototype.name=function(){var e=this._name.indexOf("/");return-1!=e?this._name.substring(e+1,this._name.length):this._name},com.cognitect.transit.types.Keyword.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},com.cognitect.transit.types.Keyword.prototype.equiv=com.cognitect.transit.types.Keyword.prototype.equiv,com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.Keyword&&this._name==e._name},com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.keyword=function(e){return new com.cognitect.transit.types.Keyword(e)},com.cognitect.transit.types.isKeyword=function(e){return e instanceof com.cognitect.transit.types.Keyword},com.cognitect.transit.types.Symbol=function(e){this._name=e,this.hashCode=-1},com.cognitect.transit.types.Symbol.prototype.namespace=function(){var e=this._name.indexOf("/");return-1!=e?this._name.substring(0,e):null},com.cognitect.transit.types.Symbol.prototype.name=function(){var e=this._name.indexOf("/");return-1!=e?this._name.substring(e+1,this._name.length):this._name},com.cognitect.transit.types.Symbol.prototype.toString=function(){return this._name},com.cognitect.transit.types.Symbol.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},com.cognitect.transit.types.Symbol.prototype.equiv=com.cognitect.transit.types.Symbol.prototype.equiv,com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.Symbol&&this._name==e._name},com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.symbol=function(e){return new com.cognitect.transit.types.Symbol(e)},com.cognitect.transit.types.isSymbol=function(e){return e instanceof com.cognitect.transit.types.Symbol},com.cognitect.transit.types.hexFor=function(e,t,r){var n="";r=r||t+1;for(var i=8*(7-t),a=goog.math.Long.fromInt(255).shiftLeft(i);t<r;t++,i-=8,a=a.shiftRightUnsigned(8)){var o=e.and(a).shiftRightUnsigned(i).toString(16);1==o.length&&(o="0"+o),n+=o}return n},com.cognitect.transit.types.UUID=function(e,t){this.high=e,this.low=t,this.hashCode=-1},com.cognitect.transit.types.UUID.prototype.getLeastSignificantBits=function(){return this.low},com.cognitect.transit.types.UUID.prototype.getMostSignificantBits=function(){return this.high},com.cognitect.transit.types.UUID.prototype.toString=function(){var e,t=this.high,r=this.low;return e=com.cognitect.transit.types.hexFor(t,0,4)+"-",e+=com.cognitect.transit.types.hexFor(t,4,6)+"-",e+=com.cognitect.transit.types.hexFor(t,6,8)+"-",e+=com.cognitect.transit.types.hexFor(r,0,2)+"-",e+=com.cognitect.transit.types.hexFor(r,2,8)},com.cognitect.transit.types.UUID.prototype.equiv=function(e){return com.cognitect.transit.eq.equals(this,e)},com.cognitect.transit.types.UUID.prototype.equiv=com.cognitect.transit.types.UUID.prototype.equiv,com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.UUID&&this.high.equals(e.high)&&this.low.equals(e.low)},com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this.toString())),this.hashCode},com.cognitect.transit.types.UUIDfromString=function(e){e=e.replace(/-/g,"");for(var t=null,r=null,n=r=0,i=24,a=0,a=r=0,i=24;8>a;a+=2,i-=8)r|=parseInt(e.substring(a,a+2),16)<<i;for(n=0,a=8,i=24;16>a;a+=2,i-=8)n|=parseInt(e.substring(a,a+2),16)<<i;for(t=goog.math.Long.fromBits(n,r),r=0,a=16,i=24;24>a;a+=2,i-=8)r|=parseInt(e.substring(a,a+2),16)<<i;for(n=0,i=a=24;32>a;a+=2,i-=8)n|=parseInt(e.substring(a,a+2),16)<<i;return r=goog.math.Long.fromBits(n,r),new com.cognitect.transit.types.UUID(t,r)},com.cognitect.transit.types.uuid=function(e){return com.cognitect.transit.types.UUIDfromString(e)},com.cognitect.transit.types.isUUID=function(e){return e instanceof com.cognitect.transit.types.UUID},com.cognitect.transit.types.date=function(e){return e="number"==typeof e?e:parseInt(e,10),new Date(e)},com.cognitect.transit.types.verboseDate=function(e){return new Date(e)},Date.prototype.com$cognitect$transit$equals=function(e){return e instanceof Date&&this.valueOf()===e.valueOf()},Date.prototype.com$cognitect$transit$hashCode=function(){return this.valueOf()},com.cognitect.transit.types.binary=function(e,t){return t&&!1===t.preferBuffers||void 0===Buffer?"undefined"!=typeof Uint8Array?com.cognitect.transit.util.Base64ToUint8(e):com.cognitect.transit.types.taggedValue("b",e):new Buffer(e,"base64")},com.cognitect.transit.types.isBinary=function(e){return void 0!==Buffer&&e instanceof Buffer||("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e instanceof com.cognitect.transit.types.TaggedValue&&"b"===e.tag)},com.cognitect.transit.types.uri=function(e){return com.cognitect.transit.types.taggedValue("r",e)},com.cognitect.transit.types.isURI=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"r"===e.tag},com.cognitect.transit.types.KEYS=0,com.cognitect.transit.types.VALUES=1,com.cognitect.transit.types.ENTRIES=2,com.cognitect.transit.types.TransitArrayMapIterator=function(e,t){this.entries=e,this.type=t||com.cognitect.transit.types.KEYS,this.idx=0},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=function(){if(this.idx<this.entries.length){var e=null,e=this.type===com.cognitect.transit.types.KEYS?this.entries[this.idx]:this.type===com.cognitect.transit.types.VALUES?this.entries[this.idx+1]:[this.entries[this.idx],this.entries[this.idx+1]],e={value:e,done:!1};return this.idx+=2,e}return{value:null,done:!0}},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=com.cognitect.transit.types.TransitArrayMapIterator.prototype.next,com.cognitect.transit.types.TransitArrayMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.TransitMapIterator=function(e,t){this.map=e,this.type=t||com.cognitect.transit.types.KEYS,this.keys=this.map.getKeys(),this.idx=0,this.bucket=null,this.bucketIdx=0},com.cognitect.transit.types.TransitMapIterator.prototype.next=function(){if(this.idx<this.map.size){null!=this.bucket&&this.bucketIdx<this.bucket.length||(this.bucket=this.map.map[this.keys[this.idx]],this.bucketIdx=0);var e=null,e=this.type===com.cognitect.transit.types.KEYS?this.bucket[this.bucketIdx]:this.type===com.cognitect.transit.types.VALUES?this.bucket[this.bucketIdx+1]:[this.bucket[this.bucketIdx],this.bucket[this.bucketIdx+1]],e={value:e,done:!1};return this.idx++,this.bucketIdx+=2,e}return{value:null,done:!0}},com.cognitect.transit.types.TransitMapIterator.prototype.next=com.cognitect.transit.types.TransitMapIterator.prototype.next,com.cognitect.transit.types.TransitMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.mapEquals=function(e,t){if(e instanceof com.cognitect.transit.types.TransitMap&&com.cognitect.transit.types.isMap(t)){if(e.size!==t.size)return!1;for(var r in e.map)for(var n=e.map[r],i=0;i<n.length;i+=2)if(!com.cognitect.transit.eq.equals(n[i+1],t.get(n[i])))return!1;return!0}if(e instanceof com.cognitect.transit.types.TransitArrayMap&&com.cognitect.transit.types.isMap(t)){if(e.size!==t.size)return!1;for(r=e._entries,i=0;i<r.length;i+=2)if(!com.cognitect.transit.eq.equals(r[i+1],t.get(r[i])))return!1;return!0}if(null!=t&&"object"==typeof t&&(i=com.cognitect.transit.util.objectKeys(t),r=i.length,e.size===r)){for(n=0;n<r;n++){var a=i[n];if(!e.has(a)||!com.cognitect.transit.eq.equals(t[a],e.get(a)))return!1}return!0}return!1},com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD=8,com.cognitect.transit.types.ARRAY_MAP_THRESHOLD=32,com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD=32,com.cognitect.transit.types.print=function(e){return null==e?"null":goog.isArray(e)?"["+e.toString()+"]":goog.isString(e)?'"'+e+'"':e.toString()},com.cognitect.transit.types.printMap=function(e){var t=0,r="TransitMap {";return e.forEach(function(n,i){r+=com.cognitect.transit.types.print(i)+" => "+com.cognitect.transit.types.print(n),t<e.size-1&&(r+=", "),t++}),r+"}"},com.cognitect.transit.types.printSet=function(e){var t=0,r="TransitSet {";return e.forEach(function(n){r+=com.cognitect.transit.types.print(n),t<e.size-1&&(r+=", "),t++}),r+"}"},com.cognitect.transit.types.TransitArrayMap=function(e){this._entries=e,this.backingMap=null,this.hashCode=-1,this.size=e.length/2,this.accesses=0},com.cognitect.transit.types.TransitArrayMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitArrayMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitArrayMap.prototype.convert=function(){if(this.backingMap)throw Error("Invalid operation, already converted");return!(this.size<com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD)&&(++this.accesses>com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=[],!0))},com.cognitect.transit.types.TransitArrayMap.prototype.clear=function(){this.hashCode=-1,this.backingMap?this.backingMap.clear():this._entries=[],this.size=0},com.cognitect.transit.types.TransitArrayMap.prototype.clear=com.cognitect.transit.types.TransitArrayMap.prototype.clear,com.cognitect.transit.types.TransitArrayMap.prototype.keys=function(){return this.backingMap?this.backingMap.keys():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitArrayMap.prototype.keys=com.cognitect.transit.types.TransitArrayMap.prototype.keys,com.cognitect.transit.types.TransitArrayMap.prototype.keySet=function(){if(this.backingMap)return this.backingMap.keySet();for(var e=[],t=0,r=0;r<this._entries.length;t++,r+=2)e[t]=this._entries[r];return e},com.cognitect.transit.types.TransitArrayMap.prototype.keySet=com.cognitect.transit.types.TransitArrayMap.prototype.keySet,com.cognitect.transit.types.TransitArrayMap.prototype.entries=function(){return this.backingMap?this.backingMap.entries():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitArrayMap.prototype.entries=com.cognitect.transit.types.TransitArrayMap.prototype.entries,com.cognitect.transit.types.TransitArrayMap.prototype.values=function(){return this.backingMap?this.backingMap.values():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitArrayMap.prototype.values=com.cognitect.transit.types.TransitArrayMap.prototype.values,com.cognitect.transit.types.TransitArrayMap.prototype.forEach=function(e){if(this.backingMap)this.backingMap.forEach(e);else for(var t=0;t<this._entries.length;t+=2)e(this._entries[t+1],this._entries[t])},com.cognitect.transit.types.TransitArrayMap.prototype.forEach=com.cognitect.transit.types.TransitArrayMap.prototype.forEach,com.cognitect.transit.types.TransitArrayMap.prototype.get=function(e,t){if(this.backingMap)return this.backingMap.get(e);if(this.convert())return this.get(e);for(var r=0;r<this._entries.length;r+=2)if(com.cognitect.transit.eq.equals(this._entries[r],e))return this._entries[r+1];return t},com.cognitect.transit.types.TransitArrayMap.prototype.get=com.cognitect.transit.types.TransitArrayMap.prototype.get,com.cognitect.transit.types.TransitArrayMap.prototype.has=function(e){if(this.backingMap)return this.backingMap.has(e);if(this.convert())return this.has(e);for(var t=0;t<this._entries.length;t+=2)if(com.cognitect.transit.eq.equals(this._entries[t],e))return!0;return!1},com.cognitect.transit.types.TransitArrayMap.prototype.has=com.cognitect.transit.types.TransitArrayMap.prototype.has,com.cognitect.transit.types.TransitArrayMap.prototype.set=function(e,t){if(this.hashCode=-1,this.backingMap)this.backingMap.set(e,t),this.size=this.backingMap.size;else{for(var r=0;r<this._entries.length;r+=2)if(com.cognitect.transit.eq.equals(this._entries[r],e))return void(this._entries[r+1]=t);this._entries.push(e),this._entries.push(t),this.size++,this.size>com.cognitect.transit.types.ARRAY_MAP_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=null)}},com.cognitect.transit.types.TransitArrayMap.prototype.set=com.cognitect.transit.types.TransitArrayMap.prototype.set,com.cognitect.transit.types.TransitArrayMap.prototype.delete=function(e){if(this.hashCode=-1,this.backingMap)return e=this.backingMap.delete(e),this.size=this.backingMap.size,e;for(var t=0;t<this._entries.length;t+=2)if(com.cognitect.transit.eq.equals(this._entries[t],e))return e=this._entries[t+1],this._entries.splice(t,2),this.size--,e},com.cognitect.transit.types.TransitArrayMap.prototype.clone=function(){var e=com.cognitect.transit.types.map();return this.forEach(function(t,r){e.set(r,t)}),e},com.cognitect.transit.types.TransitArrayMap.prototype.clone=com.cognitect.transit.types.TransitArrayMap.prototype.clone,com.cognitect.transit.types.TransitArrayMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$hashCode=function(){return this.backingMap?this.backingMap.com$cognitect$transit$hashCode():(-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode)},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$equals=function(e){return this.backingMap?com.cognitect.transit.types.mapEquals(this.backingMap,e):com.cognitect.transit.types.mapEquals(this,e)},com.cognitect.transit.types.TransitMap=function(e,t,r){this.map=t||{},this._keys=e||[],this.size=r||0,this.hashCode=-1},com.cognitect.transit.types.TransitMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitMap.prototype.clear=function(){this.hashCode=-1,this.map={},this._keys=[],this.size=0},com.cognitect.transit.types.TransitMap.prototype.clear=com.cognitect.transit.types.TransitMap.prototype.clear,com.cognitect.transit.types.TransitMap.prototype.getKeys=function(){return null!=this._keys?this._keys:com.cognitect.transit.util.objectKeys(this.map)},com.cognitect.transit.types.TransitMap.prototype.delete=function(e){this.hashCode=-1,this._keys=null;for(var t=com.cognitect.transit.eq.hashCode(e),r=this.map[t],n=0;n<r.length;n+=2)if(com.cognitect.transit.eq.equals(e,r[n]))return e=r[n+1],r.splice(n,2),0===r.length&&delete this.map[t],this.size--,e},com.cognitect.transit.types.TransitMap.prototype.entries=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitMap.prototype.entries=com.cognitect.transit.types.TransitMap.prototype.entries,com.cognitect.transit.types.TransitMap.prototype.forEach=function(e){for(var t=this.getKeys(),r=0;r<t.length;r++)for(var n=this.map[t[r]],i=0;i<n.length;i+=2)e(n[i+1],n[i],this)},com.cognitect.transit.types.TransitMap.prototype.forEach=com.cognitect.transit.types.TransitMap.prototype.forEach,com.cognitect.transit.types.TransitMap.prototype.get=function(e,t){var r=com.cognitect.transit.eq.hashCode(e),r=this.map[r];if(null==r)return t;for(var n=0;n<r.length;n+=2)if(com.cognitect.transit.eq.equals(e,r[n]))return r[n+1]},com.cognitect.transit.types.TransitMap.prototype.get=com.cognitect.transit.types.TransitMap.prototype.get,com.cognitect.transit.types.TransitMap.prototype.has=function(e){var t=com.cognitect.transit.eq.hashCode(e),t=this.map[t];if(null!=t)for(var r=0;r<t.length;r+=2)if(com.cognitect.transit.eq.equals(e,t[r]))return!0;return!1},com.cognitect.transit.types.TransitMap.prototype.has=com.cognitect.transit.types.TransitMap.prototype.has,com.cognitect.transit.types.TransitMap.prototype.keys=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitMap.prototype.keys=com.cognitect.transit.types.TransitMap.prototype.keys,com.cognitect.transit.types.TransitMap.prototype.keySet=function(){for(var e=this.getKeys(),t=[],r=0;r<e.length;r++)for(var n=this.map[e[r]],i=0;i<n.length;i+=2)t.push(n[i]);return t},com.cognitect.transit.types.TransitMap.prototype.keySet=com.cognitect.transit.types.TransitMap.prototype.keySet,com.cognitect.transit.types.TransitMap.prototype.set=function(e,t){this.hashCode=-1;var r=com.cognitect.transit.eq.hashCode(e),n=this.map[r];if(null==n)this._keys&&this._keys.push(r),this.map[r]=[e,t],this.size++;else{for(var r=!0,i=0;i<n.length;i+=2)if(com.cognitect.transit.eq.equals(t,n[i])){r=!1,n[i]=t;break}r&&(n.push(e),n.push(t),this.size++)}},com.cognitect.transit.types.TransitMap.prototype.set=com.cognitect.transit.types.TransitMap.prototype.set,com.cognitect.transit.types.TransitMap.prototype.values=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitMap.prototype.values=com.cognitect.transit.types.TransitMap.prototype.values,com.cognitect.transit.types.TransitMap.prototype.clone=function(){var e=com.cognitect.transit.types.map();return this.forEach(function(t,r){e.set(r,t)}),e},com.cognitect.transit.types.TransitMap.prototype.clone=com.cognitect.transit.types.TransitMap.prototype.clone,com.cognitect.transit.types.TransitMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$equals=function(e){return com.cognitect.transit.types.mapEquals(this,e)},com.cognitect.transit.types.map=function(e,t,r){if(e=e||[],t=!1!==t||t,(!0!==r||!r)&&e.length<=2*com.cognitect.transit.types.ARRAY_MAP_THRESHOLD){if(t){var n=e;for(e=[],t=0;t<n.length;t+=2){var i=!1;for(r=0;r<e.length;r+=2)if(com.cognitect.transit.eq.equals(e[r],n[t])){e[r+1]=n[t+1],i=!0;break}i||(e.push(n[t]),e.push(n[t+1]))}}return new com.cognitect.transit.types.TransitArrayMap(e)}var n={},i=[],a=0;for(t=0;t<e.length;t+=2){r=com.cognitect.transit.eq.hashCode(e[t]);var o=n[r];if(null==o)i.push(r),n[r]=[e[t],e[t+1]],a++;else{var s=!0;for(r=0;r<o.length;r+=2)if(com.cognitect.transit.eq.equals(o[r],e[t])){o[r+1]=e[t+1],s=!1;break}s&&(o.push(e[t]),o.push(e[t+1]),a++)}}return new com.cognitect.transit.types.TransitMap(i,n,a)},com.cognitect.transit.types.isArrayMap=function(e){return e instanceof com.cognitect.transit.types.TransitArrayMap},com.cognitect.transit.types.isMap=function(e){return e instanceof com.cognitect.transit.types.TransitArrayMap||e instanceof com.cognitect.transit.types.TransitMap},com.cognitect.transit.types.TransitSet=function(e){this.map=e,this.size=e.size},com.cognitect.transit.types.TransitSet.prototype.toString=function(){return com.cognitect.transit.types.printSet(this)},com.cognitect.transit.types.TransitSet.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitSet.prototype.add=function(e){this.map.set(e,e),this.size=this.map.size},com.cognitect.transit.types.TransitSet.prototype.add=com.cognitect.transit.types.TransitSet.prototype.add,com.cognitect.transit.types.TransitSet.prototype.clear=function(){this.map=new com.cognitect.transit.types.TransitMap,this.size=0},com.cognitect.transit.types.TransitSet.prototype.clear=com.cognitect.transit.types.TransitSet.prototype.clear;com.cognitect.transit.types.TransitSet.prototype.delete=function(e){return e=this.map.delete(e),this.size=this.map.size,e},com.cognitect.transit.types.TransitSet.prototype.entries=function(){return this.map.entries()},com.cognitect.transit.types.TransitSet.prototype.entries=com.cognitect.transit.types.TransitSet.prototype.entries,com.cognitect.transit.types.TransitSet.prototype.forEach=function(e,t){var r=this;this.map.forEach(function(t,n,i){e(n,r)})},com.cognitect.transit.types.TransitSet.prototype.forEach=com.cognitect.transit.types.TransitSet.prototype.forEach,com.cognitect.transit.types.TransitSet.prototype.has=function(e){return this.map.has(e)},com.cognitect.transit.types.TransitSet.prototype.has=com.cognitect.transit.types.TransitSet.prototype.has,com.cognitect.transit.types.TransitSet.prototype.keys=function(){return this.map.keys()},com.cognitect.transit.types.TransitSet.prototype.keys=com.cognitect.transit.types.TransitSet.prototype.keys,com.cognitect.transit.types.TransitSet.prototype.keySet=function(){return this.map.keySet()},com.cognitect.transit.types.TransitSet.prototype.keySet=com.cognitect.transit.types.TransitSet.prototype.keySet,com.cognitect.transit.types.TransitSet.prototype.values=function(){return this.map.values()},com.cognitect.transit.types.TransitSet.prototype.values=com.cognitect.transit.types.TransitSet.prototype.values,com.cognitect.transit.types.TransitSet.prototype.clone=function(){var e=com.cognitect.transit.types.set();return this.forEach(function(t){e.add(t)}),e},com.cognitect.transit.types.TransitSet.prototype.clone=com.cognitect.transit.types.TransitSet.prototype.clone,com.cognitect.transit.types.TransitSet.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.values()},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$equals=function(e){return e instanceof com.cognitect.transit.types.TransitSet&&(this.size===e.size?com.cognitect.transit.eq.equals(this.map,e.map):void 0)},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$hashCode=function(e){return com.cognitect.transit.eq.hashCode(this.map)},com.cognitect.transit.types.set=function(e){e=e||[];for(var t={},r=[],n=0,i=0;i<e.length;i++){var a=com.cognitect.transit.eq.hashCode(e[i]),o=t[a];if(null==o)r.push(a),t[a]=[e[i],e[i]],n++;else{for(var a=!0,s=0;s<o.length;s+=2)if(com.cognitect.transit.eq.equals(o[s],e[i])){a=!1;break}a&&(o.push(e[i]),o.push(e[i]),n++)}}return new com.cognitect.transit.types.TransitSet(new com.cognitect.transit.types.TransitMap(r,t,n))},com.cognitect.transit.types.isSet=function(e){return e instanceof com.cognitect.transit.types.TransitSet},com.cognitect.transit.types.quoted=function(e){return com.cognitect.transit.types.taggedValue("'",e)},com.cognitect.transit.types.isQuoted=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"'"===e.tag},com.cognitect.transit.types.list=function(e){return com.cognitect.transit.types.taggedValue("list",e)},com.cognitect.transit.types.isList=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"list"===e.tag},com.cognitect.transit.types.link=function(e){return com.cognitect.transit.types.taggedValue("link",e)},com.cognitect.transit.types.isLink=function(e){return e instanceof com.cognitect.transit.types.TaggedValue&&"link"===e.tag},com.cognitect.transit.types.specialDouble=function(e){switch(e){case"-INF":return-1/0;case"INF":return 1/0;case"NaN":return NaN;default:throw Error("Invalid special double value "+e)}},com.cognitect.transit.handlers={},com.cognitect.transit.handlers.ctorGuid=0,com.cognitect.transit.handlers.ctorGuidProperty="transit$guid$"+com.cognitect.transit.util.randomUUID(),com.cognitect.transit.handlers.typeTag=function(e){if(null==e)return"null";if(e===String)return"string";if(e===Boolean)return"boolean";if(e===Number)return"number";if(e===Array)return"array";if(e===Object)return"map";var t=e[com.cognitect.transit.handlers.ctorGuidProperty];return null==t&&(void 0!==Object.defineProperty?(t=++com.cognitect.transit.handlers.ctorGuid,Object.defineProperty(e,com.cognitect.transit.handlers.ctorGuidProperty,{value:t,enumerable:!1})):e[com.cognitect.transit.handlers.ctorGuidProperty]=t=++com.cognitect.transit.handlers.ctorGuid),t},com.cognitect.transit.handlers.constructor=function(e){return null==e?null:e.constructor},com.cognitect.transit.handlers.padZeros=function(e,t){for(var r=e.toString(),n=r.length;n<t;n++)r="0"+r;return r},com.cognitect.transit.handlers.stringableKeys=function(e){e=com.cognitect.transit.util.objectKeys(e);for(var t=0;t<e.length;t++);return!0},com.cognitect.transit.handlers.NilHandler=function(){},com.cognitect.transit.handlers.NilHandler.prototype.tag=function(e){return"_"},com.cognitect.transit.handlers.NilHandler.prototype.rep=function(e){return null},com.cognitect.transit.handlers.NilHandler.prototype.stringRep=function(e){return"null"},com.cognitect.transit.handlers.StringHandler=function(){},com.cognitect.transit.handlers.StringHandler.prototype.tag=function(e){return"s"},com.cognitect.transit.handlers.StringHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.StringHandler.prototype.stringRep=function(e){return e},com.cognitect.transit.handlers.NumberHandler=function(){},com.cognitect.transit.handlers.NumberHandler.prototype.tag=function(e){return"i"},com.cognitect.transit.handlers.NumberHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.NumberHandler.prototype.stringRep=function(e){return e.toString()},com.cognitect.transit.handlers.IntegerHandler=function(){},com.cognitect.transit.handlers.IntegerHandler.prototype.tag=function(e){return"i"},com.cognitect.transit.handlers.IntegerHandler.prototype.rep=function(e){return e.toString()},com.cognitect.transit.handlers.IntegerHandler.prototype.stringRep=function(e){return e.toString()},com.cognitect.transit.handlers.BooleanHandler=function(){},com.cognitect.transit.handlers.BooleanHandler.prototype.tag=function(e){return"?"},com.cognitect.transit.handlers.BooleanHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.BooleanHandler.prototype.stringRep=function(e){return e.toString()},com.cognitect.transit.handlers.ArrayHandler=function(){},com.cognitect.transit.handlers.ArrayHandler.prototype.tag=function(e){return"array"},com.cognitect.transit.handlers.ArrayHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.ArrayHandler.prototype.stringRep=function(e){return null},com.cognitect.transit.handlers.MapHandler=function(){},com.cognitect.transit.handlers.MapHandler.prototype.tag=function(e){return"map"},com.cognitect.transit.handlers.MapHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.MapHandler.prototype.stringRep=function(e){return null},com.cognitect.transit.handlers.VerboseDateHandler=function(){},com.cognitect.transit.handlers.VerboseDateHandler.prototype.tag=function(e){return"t"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.rep=function(e){return e.getUTCFullYear()+"-"+com.cognitect.transit.handlers.padZeros(e.getUTCMonth()+1,2)+"-"+com.cognitect.transit.handlers.padZeros(e.getUTCDate(),2)+"T"+com.cognitect.transit.handlers.padZeros(e.getUTCHours(),2)+":"+com.cognitect.transit.handlers.padZeros(e.getUTCMinutes(),2)+":"+com.cognitect.transit.handlers.padZeros(e.getUTCSeconds(),2)+"."+com.cognitect.transit.handlers.padZeros(e.getUTCMilliseconds(),3)+"Z"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.stringRep=function(e,t){return t.rep(e)},com.cognitect.transit.handlers.DateHandler=function(){},com.cognitect.transit.handlers.DateHandler.prototype.tag=function(e){return"m"},com.cognitect.transit.handlers.DateHandler.prototype.rep=function(e){return e.valueOf()},com.cognitect.transit.handlers.DateHandler.prototype.stringRep=function(e){return e.valueOf().toString()},com.cognitect.transit.handlers.DateHandler.prototype.getVerboseHandler=function(e){return new com.cognitect.transit.handlers.VerboseDateHandler},com.cognitect.transit.handlers.UUIDHandler=function(){},com.cognitect.transit.handlers.UUIDHandler.prototype.tag=function(e){return"u"},com.cognitect.transit.handlers.UUIDHandler.prototype.rep=function(e){return e.toString()},com.cognitect.transit.handlers.UUIDHandler.prototype.stringRep=function(e){return e.toString()},com.cognitect.transit.handlers.KeywordHandler=function(){},com.cognitect.transit.handlers.KeywordHandler.prototype.tag=function(e){return":"},com.cognitect.transit.handlers.KeywordHandler.prototype.rep=function(e){return e._name},com.cognitect.transit.handlers.KeywordHandler.prototype.stringRep=function(e,t){return t.rep(e)},com.cognitect.transit.handlers.SymbolHandler=function(){},com.cognitect.transit.handlers.SymbolHandler.prototype.tag=function(e){return"$"},com.cognitect.transit.handlers.SymbolHandler.prototype.rep=function(e){return e._name},com.cognitect.transit.handlers.SymbolHandler.prototype.stringRep=function(e,t){return t.rep(e)},com.cognitect.transit.handlers.TaggedHandler=function(){},com.cognitect.transit.handlers.TaggedHandler.prototype.tag=function(e){return e.tag},com.cognitect.transit.handlers.TaggedHandler.prototype.rep=function(e){return e.rep},com.cognitect.transit.handlers.TaggedHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.TransitSetHandler=function(){},com.cognitect.transit.handlers.TransitSetHandler.prototype.tag=function(e){return"set"},com.cognitect.transit.handlers.TransitSetHandler.prototype.rep=function(e){var t=[];return e.forEach(function(e,r){t.push(e)}),com.cognitect.transit.types.taggedValue("array",t)},com.cognitect.transit.handlers.TransitSetHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.TransitArrayMapHandler=function(){},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.tag=function(e){return"map"},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.TransitMapHandler=function(){},com.cognitect.transit.handlers.TransitMapHandler.prototype.tag=function(e){return"map"},com.cognitect.transit.handlers.TransitMapHandler.prototype.rep=function(e){return e},com.cognitect.transit.handlers.TransitMapHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.BufferHandler=function(){},com.cognitect.transit.handlers.BufferHandler.prototype.tag=function(e){return"b"},com.cognitect.transit.handlers.BufferHandler.prototype.rep=function(e){return e.toString("base64")},com.cognitect.transit.handlers.BufferHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.Uint8ArrayHandler=function(){},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.tag=function(e){return"b"},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.rep=function(e){return com.cognitect.transit.util.Uint8ToBase64(e)},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.stringRep=function(e,t){return null},com.cognitect.transit.handlers.defaultHandlers=function(e){return e.set(null,new com.cognitect.transit.handlers.NilHandler),e.set(String,new com.cognitect.transit.handlers.StringHandler),e.set(Number,new com.cognitect.transit.handlers.NumberHandler),e.set(goog.math.Long,new com.cognitect.transit.handlers.IntegerHandler),e.set(Boolean,new com.cognitect.transit.handlers.BooleanHandler),e.set(Array,new com.cognitect.transit.handlers.ArrayHandler),e.set(Object,new com.cognitect.transit.handlers.MapHandler),e.set(Date,new com.cognitect.transit.handlers.DateHandler),e.set(com.cognitect.transit.types.UUID,new com.cognitect.transit.handlers.UUIDHandler),e.set(com.cognitect.transit.types.Keyword,new com.cognitect.transit.handlers.KeywordHandler),e.set(com.cognitect.transit.types.Symbol,new com.cognitect.transit.handlers.SymbolHandler),e.set(com.cognitect.transit.types.TaggedValue,new com.cognitect.transit.handlers.TaggedHandler),e.set(com.cognitect.transit.types.TransitSet,new com.cognitect.transit.handlers.TransitSetHandler),e.set(com.cognitect.transit.types.TransitArrayMap,new com.cognitect.transit.handlers.TransitArrayMapHandler),e.set(com.cognitect.transit.types.TransitMap,new com.cognitect.transit.handlers.TransitMapHandler),void 0!==Buffer&&e.set(Buffer,new com.cognitect.transit.handlers.BufferHandler),"undefined"!=typeof Uint8Array&&e.set(Uint8Array,new com.cognitect.transit.handlers.Uint8ArrayHandler),e},com.cognitect.transit.handlers.Handlers=function(){this.handlers={},com.cognitect.transit.handlers.defaultHandlers(this)},com.cognitect.transit.handlers.Handlers.prototype.get=function(e){var t=null,t="string"==typeof e?this.handlers[e]:this.handlers[com.cognitect.transit.handlers.typeTag(e)];return null!=t?t:this.handlers.default},com.cognitect.transit.handlers.Handlers.prototype.get=com.cognitect.transit.handlers.Handlers.prototype.get,com.cognitect.transit.handlers.validTag=function(e){switch(e){case"null":case"string":case"boolean":case"number":case"array":case"map":return!1}return!0},com.cognitect.transit.handlers.Handlers.prototype.set=function(e,t){"string"==typeof e&&com.cognitect.transit.handlers.validTag(e)?this.handlers[e]=t:this.handlers[com.cognitect.transit.handlers.typeTag(e)]=t},com.cognitect.transit.impl={},com.cognitect.transit.impl.decoder={},com.cognitect.transit.impl.decoder.Tag=function(e){this.str=e},com.cognitect.transit.impl.decoder.tag=function(e){return new com.cognitect.transit.impl.decoder.Tag(e)},com.cognitect.transit.impl.decoder.isTag=function(e){return e&&e instanceof com.cognitect.transit.impl.decoder.Tag},com.cognitect.transit.impl.decoder.isGroundHandler=function(e){switch(e){case"_":case"s":case"?":case"i":case"d":case"b":case"'":case"array":case"map":return!0}return!1},com.cognitect.transit.impl.decoder.Decoder=function(e){this.options=e||{},this.handlers={};for(var t in this.defaults.handlers)this.handlers[t]=this.defaults.handlers[t];for(t in this.options.handlers){if(com.cognitect.transit.impl.decoder.isGroundHandler(t))throw Error('Cannot override handler for ground type "'+t+'"');this.handlers[t]=this.options.handlers[t]}this.preferStrings=null!=this.options.preferStrings?this.options.preferStrings:this.defaults.preferStrings,this.preferBuffers=null!=this.options.preferBuffers?this.options.preferBuffers:this.defaults.preferBuffers,this.defaultHandler=this.options.defaultHandler||this.defaults.defaultHandler,this.mapBuilder=this.options.mapBuilder,this.arrayBuilder=this.options.arrayBuilder},com.cognitect.transit.impl.decoder.Decoder.prototype.defaults={handlers:{_:function(e,t){return com.cognitect.transit.types.nullValue()},"?":function(e,t){return com.cognitect.transit.types.boolValue(e)},b:function(e,t){return com.cognitect.transit.types.binary(e,t)},i:function(e,t){return com.cognitect.transit.types.intValue(e)},n:function(e,t){return com.cognitect.transit.types.bigInteger(e)},d:function(e,t){return com.cognitect.transit.types.floatValue(e)},f:function(e,t){return com.cognitect.transit.types.bigDecimalValue(e)},c:function(e,t){return com.cognitect.transit.types.charValue(e)},":":function(e,t){return com.cognitect.transit.types.keyword(e)},$:function(e,t){return com.cognitect.transit.types.symbol(e)},r:function(e,t){return com.cognitect.transit.types.uri(e)},z:function(e,t){return com.cognitect.transit.types.specialDouble(e)},"'":function(e,t){return e},m:function(e,t){return com.cognitect.transit.types.date(e)},t:function(e,t){return com.cognitect.transit.types.verboseDate(e)},u:function(e,t){return com.cognitect.transit.types.uuid(e)},set:function(e,t){return com.cognitect.transit.types.set(e)},list:function(e,t){return com.cognitect.transit.types.list(e)},link:function(e,t){return com.cognitect.transit.types.link(e)},cmap:function(e,t){return com.cognitect.transit.types.map(e,!1)}},defaultHandler:function(e,t){return com.cognitect.transit.types.taggedValue(e,t)},preferStrings:!0,preferBuffers:!0},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=function(e,t,r,n){if(null==e)return null;switch(typeof e){case"string":return this.decodeString(e,t,r,n);case"object":return com.cognitect.transit.util.isArray(e)?"^ "===e[0]?this.decodeArrayHash(e,t,r,n):this.decodeArray(e,t,r,n):this.decodeHash(e,t,r,n)}return e},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=com.cognitect.transit.impl.decoder.Decoder.prototype.decode,com.cognitect.transit.impl.decoder.Decoder.prototype.decodeString=function(e,t,r,n){return com.cognitect.transit.caching.isCacheable(e,r)?(e=this.parseString(e,t,!1),t&&t.write(e,r),e):com.cognitect.transit.caching.isCacheCode(e)?t.read(e,r):this.parseString(e,t,r)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeHash=function(e,t,r,n){r=com.cognitect.transit.util.objectKeys(e);var i=r[0];if(n=1==r.length?this.decode(i,t,!1,!1):null,com.cognitect.transit.impl.decoder.isTag(n))return e=e[i],r=this.handlers[n.str],null!=r?r(this.decode(e,t,!1,!0),this):com.cognitect.transit.types.taggedValue(n.str,this.decode(e,t,!1,!1));if(this.mapBuilder){if(r.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD&&this.mapBuilder.fromArray){var a=[];for(n=0;n<r.length;n++)i=r[n],a.push(this.decode(i,t,!0,!1)),a.push(this.decode(e[i],t,!1,!1));return this.mapBuilder.fromArray(a,e)}for(a=this.mapBuilder.init(e),n=0;n<r.length;n++)i=r[n],a=this.mapBuilder.add(a,this.decode(i,t,!0,!1),this.decode(e[i],t,!1,!1),e);return this.mapBuilder.finalize(a,e)}for(a=[],n=0;n<r.length;n++)i=r[n],a.push(this.decode(i,t,!0,!1)),a.push(this.decode(e[i],t,!1,!1));return com.cognitect.transit.types.map(a,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArrayHash=function(e,t,r,n){if(this.mapBuilder){if(e.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD+1&&this.mapBuilder.fromArray){for(n=[],r=1;r<e.length;r+=2)n.push(this.decode(e[r],t,!0,!1)),n.push(this.decode(e[r+1],t,!1,!1));return this.mapBuilder.fromArray(n,e)}for(n=this.mapBuilder.init(e),r=1;r<e.length;r+=2)n=this.mapBuilder.add(n,this.decode(e[r],t,!0,!1),this.decode(e[r+1],t,!1,!1),e);return this.mapBuilder.finalize(n,e)}for(n=[],r=1;r<e.length;r+=2)n.push(this.decode(e[r],t,!0,!1)),n.push(this.decode(e[r+1],t,!1,!1));return com.cognitect.transit.types.map(n,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArray=function(e,t,r,n){if(n){var i=[];for(n=0;n<e.length;n++)i.push(this.decode(e[n],t,r,!1));return i}if(i=t&&t.idx,2===e.length&&"string"==typeof e[0]&&(n=this.decode(e[0],t,!1,!1),com.cognitect.transit.impl.decoder.isTag(n)))return e=e[1],i=this.handlers[n.str],null!=i?i=i(this.decode(e,t,r,!0),this):com.cognitect.transit.types.taggedValue(n.str,this.decode(e,t,r,!1));if(t&&i!=t.idx&&(t.idx=i),this.arrayBuilder){if(32>=e.length&&this.arrayBuilder.fromArray){for(i=[],n=0;n<e.length;n++)i.push(this.decode(e[n],t,r,!1));return this.arrayBuilder.fromArray(i,e)}for(i=this.arrayBuilder.init(e),n=0;n<e.length;n++)i=this.arrayBuilder.add(i,this.decode(e[n],t,r,!1),e);return this.arrayBuilder.finalize(i,e)}for(i=[],n=0;n<e.length;n++)i.push(this.decode(e[n],t,r,!1));return i},com.cognitect.transit.impl.decoder.Decoder.prototype.parseString=function(e,t,r){return e.charAt(0)===com.cognitect.transit.delimiters.ESC?(t=e.charAt(1))===com.cognitect.transit.delimiters.ESC||t===com.cognitect.transit.delimiters.SUB||t===com.cognitect.transit.delimiters.RES?e.substring(1):t===com.cognitect.transit.delimiters.TAG?com.cognitect.transit.impl.decoder.tag(e.substring(2)):(r=this.handlers[t],null==r?this.defaultHandler(t,e.substring(2)):r(e.substring(2),this)):e},com.cognitect.transit.impl.decoder.decoder=function(e){return new com.cognitect.transit.impl.decoder.Decoder(e)},com.cognitect.transit.impl.reader={},com.cognitect.transit.impl.reader.JSONUnmarshaller=function(e){this.decoder=new com.cognitect.transit.impl.decoder.Decoder(e)},com.cognitect.transit.impl.reader.JSONUnmarshaller.prototype.unmarshal=function(e,t){return this.decoder.decode(JSON.parse(e),t)},com.cognitect.transit.impl.reader.Reader=function(e,t){this.unmarshaller=e,this.options=t||{},this.cache=this.options.cache?this.options.cache:new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.impl.reader.Reader.prototype.read=function(e){return e=this.unmarshaller.unmarshal(e,this.cache),this.cache.clear(),e},com.cognitect.transit.impl.reader.Reader.prototype.read=com.cognitect.transit.impl.reader.Reader.prototype.read,com.cognitect.transit.impl.writer={},com.cognitect.transit.impl.writer.escape=function(e){if(0<e.length){var t=e.charAt(0);return t===com.cognitect.transit.delimiters.ESC||t===com.cognitect.transit.delimiters.SUB||t===com.cognitect.transit.delimiters.RES?com.cognitect.transit.delimiters.ESC+e:e}return e},com.cognitect.transit.impl.writer.JSONMarshaller=function(e){if(this.opts=e||{},this.preferStrings=null==this.opts.preferStrings||this.opts.preferStrings,this.objectBuilder=this.opts.objectBuilder||null,this.handlers=new com.cognitect.transit.handlers.Handlers,e=this.opts.handlers){if(com.cognitect.transit.util.isArray(e)||!e.forEach)throw Error('transit writer "handlers" option must be a map');var t=this;e.forEach(function(e,r){if(void 0===r)throw Error("Cannot create handler for JavaScript undefined");t.handlers.set(r,e)})}this.handlerForForeign=this.opts.handlerForForeign,this.unpack=this.opts.unpack||function(e){return!(!com.cognitect.transit.types.isArrayMap(e)||null!==e.backingMap)&&e._entries},this.verbose=this.opts&&this.opts.verbose||!1},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.handler=function(e){var t=this.handlers.get(com.cognitect.transit.handlers.constructor(e));return null!=t?t:(e=e&&e.transitTag)?this.handlers.get(e):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.registerHandler=function(e,t){this.handlers.set(e,t)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitNil=function(e,t){return e?this.emitString(com.cognitect.transit.delimiters.ESC,"_","",e,t):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitString=function(e,t,r,n,i){return e=e+t+r,i?i.write(e,n):e},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBoolean=function(e,t,r){return t?this.emitString(com.cognitect.transit.delimiters.ESC,"?",e.toString()[0],t,r):e},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitInteger=function(e,t,r){return 1/0===e?this.emitString(com.cognitect.transit.delimiters.ESC,"z","INF",t,r):-1/0===e?this.emitString(com.cognitect.transit.delimiters.ESC,"z","-INF",t,r):isNaN(e)?this.emitString(com.cognitect.transit.delimiters.ESC,"z","NaN",t,r):t||"string"==typeof e||e instanceof goog.math.Long?this.emitString(com.cognitect.transit.delimiters.ESC,"i",e.toString(),t,r):e},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitDouble=function(e,t,r){return t?this.emitString(e.ESC,"d",e,t,r):e},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBinary=function(e,t,r){return this.emitString(com.cognitect.transit.delimiters.ESC,"b",e,t,r)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitQuoted=function(e,t,r){if(e.verbose){e={};return e[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,r)]=com.cognitect.transit.impl.writer.marshal(this,t,!1,r),e}return[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,r),com.cognitect.transit.impl.writer.marshal(this,t,!1,r)]},com.cognitect.transit.impl.writer.emitObjects=function(e,t,r){var n=[];if(com.cognitect.transit.util.isArray(t))for(var i=0;i<t.length;i++)n.push(com.cognitect.transit.impl.writer.marshal(e,t[i],!1,r));else t.forEach(function(t,i){n.push(com.cognitect.transit.impl.writer.marshal(e,t,!1,r))});return n},com.cognitect.transit.impl.writer.emitArray=function(e,t,r,n){return com.cognitect.transit.impl.writer.emitObjects(e,t,n)},com.cognitect.transit.impl.writer.isStringableKey=function(e,t){if("string"!=typeof t){var r=e.handler(t);return r&&1===r.tag(t).length}return!0},com.cognitect.transit.impl.writer.stringableKeys=function(e,t){var r=e.unpack(t),n=!0;if(r){for(var i=0;i<r.length&&(n=com.cognitect.transit.impl.writer.isStringableKey(e,r[i]));i+=2);return n}if(t.keys&&(r=t.keys(),i=null,r.next)){for(i=r.next();!i.done&&(n=com.cognitect.transit.impl.writer.isStringableKey(e,i.value));)i=r.next();return n}if(t.forEach)return t.forEach(function(t,r){n=n&&com.cognitect.transit.impl.writer.isStringableKey(e,r)}),n;throw Error("Cannot walk keys of object type "+com.cognitect.transit.handlers.constructor(t).name)},com.cognitect.transit.impl.writer.isForeignObject=function(e){if(e.constructor.transit$isObject)return!0;var t=e.constructor.toString(),t=t.substr(9),t=t.substr(0,t.indexOf("(")),t="Object"==t;return void 0!==Object.defineProperty?Object.defineProperty(e.constructor,"transit$isObject",{value:t,enumerable:!1}):e.constructor.transit$isObject=t,t},com.cognitect.transit.impl.writer.emitMap=function(e,t,r,n){if(t.constructor===Object||null!=t.forEach||e.handlerForForeign&&com.cognitect.transit.impl.writer.isForeignObject(t)){if(e.verbose){if(null!=t.forEach)if(com.cognitect.transit.impl.writer.stringableKeys(e,t)){var i={};t.forEach(function(t,r){i[com.cognitect.transit.impl.writer.marshal(e,r,!0,!1)]=com.cognitect.transit.impl.writer.marshal(e,t,!1,n)})}else{var a=e.unpack(t),o=[],s=e.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,n);if(a)for(r=0;r<a.length;r+=2)o.push(com.cognitect.transit.impl.writer.marshal(e,a[r],!0,!1)),o.push(com.cognitect.transit.impl.writer.marshal(e,a[r+1],!1,n));else t.forEach(function(t,r){o.push(com.cognitect.transit.impl.writer.marshal(e,r,!0,!1)),o.push(com.cognitect.transit.impl.writer.marshal(e,t,!1,n))});i={},i[s]=o}else for(i={},a=com.cognitect.transit.util.objectKeys(t),r=0;r<a.length;r++)i[com.cognitect.transit.impl.writer.marshal(e,a[r],!0,!1)]=com.cognitect.transit.impl.writer.marshal(e,t[a[r]],!1,n);return i}if(null!=t.forEach){if(com.cognitect.transit.impl.writer.stringableKeys(e,t)){if(a=e.unpack(t),i=["^ "],a)for(r=0;r<a.length;r+=2)i.push(com.cognitect.transit.impl.writer.marshal(e,a[r],!0,n)),i.push(com.cognitect.transit.impl.writer.marshal(e,a[r+1],!1,n));else t.forEach(function(t,r){i.push(com.cognitect.transit.impl.writer.marshal(e,r,!0,n)),i.push(com.cognitect.transit.impl.writer.marshal(e,t,!1,n))});return i}if(a=e.unpack(t),o=[],s=e.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,n),a)for(r=0;r<a.length;r+=2)o.push(com.cognitect.transit.impl.writer.marshal(e,a[r],!0,n)),o.push(com.cognitect.transit.impl.writer.marshal(e,a[r+1],!1,n));else t.forEach(function(t,r){o.push(com.cognitect.transit.impl.writer.marshal(e,r,!0,n)),o.push(com.cognitect.transit.impl.writer.marshal(e,t,!1,n))});return[s,o]}for(i=["^ "],a=com.cognitect.transit.util.objectKeys(t),r=0;r<a.length;r++)i.push(com.cognitect.transit.impl.writer.marshal(e,a[r],!0,n)),i.push(com.cognitect.transit.impl.writer.marshal(e,t[a[r]],!1,n));return i}if(null!=e.objectBuilder)return e.objectBuilder(t,function(t){return com.cognitect.transit.impl.writer.marshal(e,t,!0,n)},function(t){return com.cognitect.transit.impl.writer.marshal(e,t,!1,n)});throw r=com.cognitect.transit.handlers.constructor(t).name,a=Error("Cannot write "+r),a.data={obj:t,type:r},a},com.cognitect.transit.impl.writer.emitTaggedMap=function(e,t,r,n,i){return e.verbose?(n={},n[e.emitString(com.cognitect.transit.delimiters.ESC_TAG,t,"",!0,i)]=com.cognitect.transit.impl.writer.marshal(e,r,!1,i),n):[e.emitString(com.cognitect.transit.delimiters.ESC_TAG,t,"",!0,i),com.cognitect.transit.impl.writer.marshal(e,r,!1,i)]},com.cognitect.transit.impl.writer.emitEncoded=function(e,t,r,n,i,a,o){if(1===r.length){if("string"==typeof n)return e.emitString(com.cognitect.transit.delimiters.ESC,r,n,a,o);if(a||e.preferStrings){if((n=e.verbose&&t.getVerboseHandler())?(r=n.tag(i),n=n.stringRep(i,n)):n=t.stringRep(i,t),null!==n)return e.emitString(com.cognitect.transit.delimiters.ESC,r,n,a,o);throw e=Error('Tag "'+r+'" cannot be encoded as string'),e.data={tag:r,rep:n,obj:i},e}}return com.cognitect.transit.impl.writer.emitTaggedMap(e,r,n,a,o)},com.cognitect.transit.impl.writer.marshal=function(e,t,r,n){var i=e.handler(t)||(e.handlerForForeign?e.handlerForForeign(t,e.handlers):null),a=i?i.tag(t):null,o=i?i.rep(t):null;if(null==i||null==a)throw e=com.cognitect.transit.handlers.constructor(t).name,r=Error("Cannot write "+e),r.data={obj:t,type:e},r;switch(a){case"_":return e.emitNil(r,n);case"s":return e.emitString("","",com.cognitect.transit.impl.writer.escape(o),r,n);case"?":return e.emitBoolean(o,r,n);case"i":return e.emitInteger(o,r,n);case"d":return e.emitDouble(o,r,n);case"b":return e.emitBinary(o,r,n);case"'":return e.emitQuoted(e,o,n);case"array":return com.cognitect.transit.impl.writer.emitArray(e,o,r,n);case"map":return com.cognitect.transit.impl.writer.emitMap(e,o,r,n);default:return com.cognitect.transit.impl.writer.emitEncoded(e,i,a,o,t,r,n)}},com.cognitect.transit.impl.writer.maybeQuoted=function(e,t){var r=e.handler(t)||(e.handlerForForeign?e.handlerForForeign(t,e.handlers):null);if(null!=r)return 1===r.tag(t).length?com.cognitect.transit.types.quoted(t):t;var r=com.cognitect.transit.handlers.constructor(t).name,n=Error("Cannot write "+r);throw n.data={obj:t,type:r},n},com.cognitect.transit.impl.writer.marshalTop=function(e,t,r,n){return JSON.stringify(com.cognitect.transit.impl.writer.marshal(e,com.cognitect.transit.impl.writer.maybeQuoted(e,t),r,n))},com.cognitect.transit.impl.writer.Writer=function(e,t){this._marshaller=e,this.options=t||{},this.cache=!1===this.options.cache?null:this.options.cache?this.options.cache:new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=function(){return this._marshaller},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=com.cognitect.transit.impl.writer.Writer.prototype.marshaller,com.cognitect.transit.impl.writer.Writer.prototype.write=function(e,t){var r=null,r=t||{},n=r.asMapKey||!1,i=!this._marshaller.verbose&&this.cache,r=!1===r.marshalTop?com.cognitect.transit.impl.writer.marshal(this._marshaller,e,n,i):com.cognitect.transit.impl.writer.marshalTop(this._marshaller,e,n,i);return null!=this.cache&&this.cache.clear(),r},com.cognitect.transit.impl.writer.Writer.prototype.write=com.cognitect.transit.impl.writer.Writer.prototype.write,com.cognitect.transit.impl.writer.Writer.prototype.register=function(e,t){this._marshaller.registerHandler(e,t)},com.cognitect.transit.impl.writer.Writer.prototype.register=com.cognitect.transit.impl.writer.Writer.prototype.register;var TRANSIT_DEV=!0,TRANSIT_NODE_TARGET=!0,TRANSIT_BROWSER_TARGET=!1,TRANSIT_BROWSER_AMD_TARGET=!1;com.cognitect.transit.reader=function(e,t){if("json"===e||"json-verbose"===e||null==e){var r=new com.cognitect.transit.impl.reader.JSONUnmarshaller(t);return new com.cognitect.transit.impl.reader.Reader(r,t)}throw Error("Cannot create reader of type "+e)},com.cognitect.transit.writer=function(e,t){if("json"===e||"json-verbose"===e||null==e){"json-verbose"===e&&(null==t&&(t={}),t.verbose=!0);var r=new com.cognitect.transit.impl.writer.JSONMarshaller(t);return new com.cognitect.transit.impl.writer.Writer(r,t)}throw r=Error('Type must be "json"'),r.data={type:e},r},com.cognitect.transit.makeWriteHandler=function(e){var t=function(){};return t.prototype.tag=e.tag,t.prototype.rep=e.rep,t.prototype.stringRep=e.stringRep,t.prototype.getVerboseHandler=e.getVerboseHandler,new t},com.cognitect.transit.makeBuilder=function(e){var t=function(){};return t.prototype.init=e.init,t.prototype.add=e.add,t.prototype.finalize=e.finalize,t.prototype.fromArray=e.fromArray,new t},com.cognitect.transit.date=com.cognitect.transit.types.date,com.cognitect.transit.integer=com.cognitect.transit.types.intValue,com.cognitect.transit.isInteger=com.cognitect.transit.types.isInteger,com.cognitect.transit.uuid=com.cognitect.transit.types.uuid,com.cognitect.transit.isUUID=com.cognitect.transit.types.isUUID,com.cognitect.transit.bigInt=com.cognitect.transit.types.bigInteger,com.cognitect.transit.isBigInt=com.cognitect.transit.types.isBigInteger,com.cognitect.transit.bigDec=com.cognitect.transit.types.bigDecimalValue,com.cognitect.transit.isBigDec=com.cognitect.transit.types.isBigDecimal,com.cognitect.transit.keyword=com.cognitect.transit.types.keyword,com.cognitect.transit.isKeyword=com.cognitect.transit.types.isKeyword,com.cognitect.transit.symbol=com.cognitect.transit.types.symbol,com.cognitect.transit.isSymbol=com.cognitect.transit.types.isSymbol,com.cognitect.transit.binary=com.cognitect.transit.types.binary,com.cognitect.transit.isBinary=com.cognitect.transit.types.isBinary,com.cognitect.transit.uri=com.cognitect.transit.types.uri,com.cognitect.transit.isURI=com.cognitect.transit.types.isURI,com.cognitect.transit.map=com.cognitect.transit.types.map,com.cognitect.transit.isMap=com.cognitect.transit.types.isMap,com.cognitect.transit.set=com.cognitect.transit.types.set,com.cognitect.transit.isSet=com.cognitect.transit.types.isSet,com.cognitect.transit.list=com.cognitect.transit.types.list,com.cognitect.transit.isList=com.cognitect.transit.types.isList,com.cognitect.transit.quoted=com.cognitect.transit.types.quoted,com.cognitect.transit.isQuoted=com.cognitect.transit.types.isQuoted,com.cognitect.transit.tagged=com.cognitect.transit.types.taggedValue,com.cognitect.transit.isTaggedValue=com.cognitect.transit.types.isTaggedValue,com.cognitect.transit.link=com.cognitect.transit.types.link,com.cognitect.transit.isLink=com.cognitect.transit.types.isLink,com.cognitect.transit.hash=com.cognitect.transit.eq.hashCode,com.cognitect.transit.hashMapLike=com.cognitect.transit.eq.hashMapLike,com.cognitect.transit.hashArrayLike=com.cognitect.transit.eq.hashArrayLike,com.cognitect.transit.equals=com.cognitect.transit.eq.equals,com.cognitect.transit.extendToEQ=com.cognitect.transit.eq.extendToEQ,com.cognitect.transit.mapToObject=function(e){var t={};return e.forEach(function(e,r){if("string"!=typeof r)throw Error("Cannot convert map with non-string keys");t[r]=e}),t},com.cognitect.transit.objectToMap=function(e){var t,r=com.cognitect.transit.map();for(t in e)e.hasOwnProperty(t)&&r.set(t,e[t]);return r},com.cognitect.transit.decoder=com.cognitect.transit.impl.decoder.decoder,com.cognitect.transit.readCache=com.cognitect.transit.caching.readCache,com.cognitect.transit.writeCache=com.cognitect.transit.caching.writeCache,com.cognitect.transit.UUIDfromString=com.cognitect.transit.types.UUIDfromString,com.cognitect.transit.randomUUID=com.cognitect.transit.util.randomUUID,com.cognitect.transit.stringableKeys=com.cognitect.transit.impl.writer.stringableKeys,TRANSIT_BROWSER_TARGET&&(goog.exportSymbol("transit.reader",com.cognitect.transit.reader),goog.exportSymbol("transit.writer",com.cognitect.transit.writer),goog.exportSymbol("transit.makeBuilder",com.cognitect.transit.makeBuilder),goog.exportSymbol("transit.makeWriteHandler",com.cognitect.transit.makeWriteHandler),goog.exportSymbol("transit.date",com.cognitect.transit.types.date),goog.exportSymbol("transit.integer",com.cognitect.transit.types.intValue),goog.exportSymbol("transit.isInteger",com.cognitect.transit.types.isInteger),goog.exportSymbol("transit.uuid",com.cognitect.transit.types.uuid),goog.exportSymbol("transit.isUUID",com.cognitect.transit.types.isUUID),goog.exportSymbol("transit.bigInt",com.cognitect.transit.types.bigInteger),goog.exportSymbol("transit.isBigInt",com.cognitect.transit.types.isBigInteger),goog.exportSymbol("transit.bigDec",com.cognitect.transit.types.bigDecimalValue),goog.exportSymbol("transit.isBigDec",com.cognitect.transit.types.isBigDecimal),goog.exportSymbol("transit.keyword",com.cognitect.transit.types.keyword),goog.exportSymbol("transit.isKeyword",com.cognitect.transit.types.isKeyword),goog.exportSymbol("transit.symbol",com.cognitect.transit.types.symbol),goog.exportSymbol("transit.isSymbol",com.cognitect.transit.types.isSymbol),goog.exportSymbol("transit.binary",com.cognitect.transit.types.binary),goog.exportSymbol("transit.isBinary",com.cognitect.transit.types.isBinary),goog.exportSymbol("transit.uri",com.cognitect.transit.types.uri),goog.exportSymbol("transit.isURI",com.cognitect.transit.types.isURI),goog.exportSymbol("transit.map",com.cognitect.transit.types.map),goog.exportSymbol("transit.isMap",com.cognitect.transit.types.isMap),goog.exportSymbol("transit.set",com.cognitect.transit.types.set),goog.exportSymbol("transit.isSet",com.cognitect.transit.types.isSet),goog.exportSymbol("transit.list",com.cognitect.transit.types.list),goog.exportSymbol("transit.isList",com.cognitect.transit.types.isList),goog.exportSymbol("transit.quoted",com.cognitect.transit.types.quoted),goog.exportSymbol("transit.isQuoted",com.cognitect.transit.types.isQuoted),goog.exportSymbol("transit.tagged",com.cognitect.transit.types.taggedValue),goog.exportSymbol("transit.isTaggedValue",com.cognitect.transit.types.isTaggedValue),goog.exportSymbol("transit.link",com.cognitect.transit.types.link),goog.exportSymbol("transit.isLink",com.cognitect.transit.types.isLink),goog.exportSymbol("transit.hash",com.cognitect.transit.eq.hashCode),goog.exportSymbol("transit.hashMapLike",com.cognitect.transit.eq.hashMapLike),goog.exportSymbol("transit.hashArrayLike",com.cognitect.transit.eq.hashArrayLike),goog.exportSymbol("transit.equals",com.cognitect.transit.eq.equals),goog.exportSymbol("transit.extendToEQ",com.cognitect.transit.eq.extendToEQ),goog.exportSymbol("transit.mapToObject",com.cognitect.transit.mapToObject),goog.exportSymbol("transit.objectToMap",com.cognitect.transit.objectToMap),goog.exportSymbol("transit.decoder",com.cognitect.transit.impl.decoder.decoder),goog.exportSymbol("transit.UUIDfromString",com.cognitect.transit.types.UUIDfromString),goog.exportSymbol("transit.randomUUID",com.cognitect.transit.util.randomUUID),goog.exportSymbol("transit.stringableKeys",com.cognitect.transit.impl.writer.stringableKeys),goog.exportSymbol("transit.readCache",com.cognitect.transit.caching.readCache),goog.exportSymbol("transit.writeCache",com.cognitect.transit.caching.writeCache)),TRANSIT_NODE_TARGET&&(module.exports={reader:com.cognitect.transit.reader,writer:com.cognitect.transit.writer,makeBuilder:com.cognitect.transit.makeBuilder,makeWriteHandler:com.cognitect.transit.makeWriteHandler,date:com.cognitect.transit.types.date,integer:com.cognitect.transit.types.intValue,isInteger:com.cognitect.transit.types.isInteger,uuid:com.cognitect.transit.types.uuid,isUUID:com.cognitect.transit.types.isUUID,bigInt:com.cognitect.transit.types.bigInteger,isBigInt:com.cognitect.transit.types.isBigInteger,bigDec:com.cognitect.transit.types.bigDecimalValue,isBigDec:com.cognitect.transit.types.isBigDecimal,keyword:com.cognitect.transit.types.keyword,isKeyword:com.cognitect.transit.types.isKeyword,symbol:com.cognitect.transit.types.symbol,isSymbol:com.cognitect.transit.types.isSymbol,binary:com.cognitect.transit.types.binary,isBinary:com.cognitect.transit.types.isBinary,uri:com.cognitect.transit.types.uri,isURI:com.cognitect.transit.types.isURI,map:com.cognitect.transit.types.map,isMap:com.cognitect.transit.types.isMap,set:com.cognitect.transit.types.set,isSet:com.cognitect.transit.types.isSet,list:com.cognitect.transit.types.list,isList:com.cognitect.transit.types.isList,quoted:com.cognitect.transit.types.quoted,isQuoted:com.cognitect.transit.types.isQuoted,tagged:com.cognitect.transit.types.taggedValue,isTaggedValue:com.cognitect.transit.types.isTaggedValue,link:com.cognitect.transit.types.link,isLink:com.cognitect.transit.types.isLink,hash:com.cognitect.transit.eq.hashCode,hashArrayLike:com.cognitect.transit.eq.hashArrayLike,hashMapLike:com.cognitect.transit.eq.hashMapLike,equals:com.cognitect.transit.eq.equals,extendToEQ:com.cognitect.transit.eq.extendToEQ,mapToObject:com.cognitect.transit.mapToObject,objectToMap:com.cognitect.transit.objectToMap,decoder:com.cognitect.transit.impl.decoder.decoder,UUIDfromString:com.cognitect.transit.types.UUIDfromString,randomUUID:com.cognitect.transit.util.randomUUID,stringableKeys:com.cognitect.transit.impl.writer.stringableKeys,readCache:com.cognitect.transit.caching.readCache,writeCache:com.cognitect.transit.caching.writeCache})}).call(exports,__webpack_require__(99).Buffer)},function(e,t){function r(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=r},function(e,t,r){(function(t){var r,n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var a=new Array(16);r=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}e.exports=r}).call(t,r(66))},function(e,t){e.exports={name:"webvr-polyfill",version:"0.9.36",homepage:"https://github.com/googlevr/webvr-polyfill",authors:["Boris Smus <boris@smus.com>","Brandon Jones <tojiro@gmail.com>","Jordan Santell <jordan@jsantell.com>"],description:"Use WebVR today, on mobile or desktop, without requiring a special browser build.",devDependencies:{chai:"^3.5.0",jsdom:"^9.12.0",mocha:"^3.2.0",semver:"^5.3.0",webpack:"^2.6.1","webpack-dev-server":"^2.4.5"},main:"src/node-entry",keywords:["vr","webvr"],license:"Apache-2.0",scripts:{start:"npm run watch",watch:"webpack-dev-server",build:"webpack",test:"mocha"},repository:"googlevr/webvr-polyfill",bugs:{url:"https://github.com/googlevr/webvr-polyfill/issues"}}},function(e,t,r){function n(e){this.gl=e,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=window.WebVRConfig.BUFFER_SCALE,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,a.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=a.linkProgram(e,s,u,this.attribs),this.uniforms=a.getProgramUniforms(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize(),window.WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new i(e))}var i=r(312),a=r(23),o=r(313),s=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),u=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");n.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},n.prototype.onResize=function(){var e=this.gl,t=this,r=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];o(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},n.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,r=this.gl;a.isIOS()||(t.width=a.getScreenWidth()*this.bufferScale,t.height=a.getScreenHeight()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(r){e.bufferWidth=r,e.realCanvasWidth.set.call(t,r),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(r){e.bufferHeight=r,e.realCanvasHeight.set.call(t,r),e.onResize()}})),this.lastBoundFramebuffer=r.getParameter(r.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(r.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,n){e.lastBoundFramebuffer=n||e.framebuffer,e.realBindFramebuffer.call(r,t,e.lastBoundFramebuffer)},this.cullFace=r.getParameter(r.CULL_FACE),this.depthTest=r.getParameter(r.DEPTH_TEST),this.blend=r.getParameter(r.BLEND),this.scissorTest=r.getParameter(r.SCISSOR_TEST),this.stencilTest=r.getParameter(r.STENCIL_TEST),r.enable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!0;break;case r.DEPTH_TEST:e.depthTest=!0;break;case r.BLEND:e.blend=!0;break;case r.SCISSOR_TEST:e.scissorTest=!0;break;case r.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(r,t)},r.disable=function(t){switch(t){case r.CULL_FACE:e.cullFace=!1;break;case r.DEPTH_TEST:e.depthTest=!1;break;case r.BLEND:e.blend=!1;break;case r.SCISSOR_TEST:e.scissorTest=!1;break;case r.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(r,t)},this.colorMask=r.getParameter(r.COLOR_WRITEMASK),r.colorMask=function(t,n,i,a){e.colorMask[0]=t,e.colorMask[1]=n,e.colorMask[2]=i,e.colorMask[3]=a,e.realColorMask.call(r,t,n,i,a)},this.clearColor=r.getParameter(r.COLOR_CLEAR_VALUE),r.clearColor=function(t,n,i,a){e.clearColor[0]=t,e.clearColor[1]=n,e.clearColor[2]=i,e.clearColor[3]=a,e.realClearColor.call(r,t,n,i,a)},this.viewport=r.getParameter(r.VIEWPORT),r.viewport=function(t,n,i,a){e.viewport[0]=t,e.viewport[1]=n,e.viewport[2]=i,e.viewport[3]=a,e.realViewport.call(r,t,n,i,a)},this.isPatched=!0,a.safariCssSizeWorkaround(t)}},n.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;a.isIOS()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){a.safariCssSizeWorkaround(t)},1)}},n.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},n.prototype.submitFrame=function(){var e=this.gl,t=this,r=[];if(window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||r.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),o(e,r,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||a.isIOS())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),a.isIOS()){var n=e.canvas;n.width==t.bufferWidth&&n.height==t.bufferHeight||(t.bufferWidth=n.width,t.bufferHeight=n.height,t.onResize())}},n.prototype.updateDeviceInfo=function(e){var t=this.gl,r=this,n=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];o(t,n,function(t){var n=r.computeMeshVertices_(r.meshWidth,r.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,r.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),!r.indexCount){var i=r.computeMeshIndices_(r.meshWidth,r.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),r.indexCount=i.length}})},n.prototype.computeMeshVertices_=function(e,t,r){for(var n=new Float32Array(2*e*t*5),i=r.getLeftEyeVisibleTanAngles(),o=r.getLeftEyeNoLensTanAngles(),s=r.getLeftEyeVisibleScreenRect(o),u=0,l=0;l<2;l++){for(var c=0;c<t;c++)for(var f=0;f<e;f++,u++){var d=f/(e-1),h=c/(t-1),p=d,g=h,m=a.lerp(i[0],i[2],d),v=a.lerp(i[3],i[1],h),y=Math.sqrt(m*m+v*v),M=r.distortion.distortInverse(y),w=m*M/y,x=v*M/y;d=(w-o[0])/(o[2]-o[0]),h=(x-o[3])/(o[1]-o[3]);r.device.widthMeters,r.device.heightMeters;d=2*(s.x+d*s.width-.5),h=2*(s.y+h*s.height-.5),n[5*u+0]=d,n[5*u+1]=h,n[5*u+2]=p,n[5*u+3]=g,n[5*u+4]=l}var b=i[2]-i[0];i[0]=-(b+i[0]),i[2]=b-i[2],b=o[2]-o[0],o[0]=-(b+o[0]),o[2]=b-o[2],s.x=1-(s.x+s.width)}return n},n.prototype.computeMeshIndices_=function(e,t){for(var r=new Uint16Array(2*(e-1)*(t-1)*6),n=e/2,i=t/2,a=0,o=0,s=0;s<2;s++)for(var u=0;u<t;u++)for(var l=0;l<e;l++,a++)0!=l&&0!=u&&(l<=n==u<=i?(r[o++]=a,r[o++]=a-e-1,r[o++]=a-e,r[o++]=a-e-1,r[o++]=a,r[o++]=a-1):(r[o++]=a-1,r[o++]=a-e,r[o++]=a,r[o++]=a-e,r[o++]=a-1,r[o++]=a-e-1));return r},n.prototype.getOwnPropertyDescriptor_=function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return void 0!==r.get&&void 0!==r.set||(r.configurable=!0,r.enumerable=!0,r.get=function(){return this.getAttribute(t)},r.set=function(e){this.setAttribute(t,e)}),r},e.exports=n},function(e,t,r){function n(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=window.WebVRConfig.BUFFER_SCALE,this.poseSensor_=new u,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new s(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new o(this.dpdb_.getDeviceParams()),this.viewerSelector_=new c,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new l),d.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var i=r(702),a=r(312),o=r(314),s=r(705),u=r(712),l=r(710),c=r(716),f=r(55).VRDisplay,d=r(23),h={LEFT:"left",RIGHT:"right"};n.prototype=new f,n.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},n.prototype.resetPose=function(){this.poseSensor_.resetPose()},n.prototype.getEyeParameters=function(e){var t,r=[.5*this.deviceInfo_.viewer.interLensDistance,0,0];if(e==h.LEFT)r[0]*=-1,t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=h.RIGHT)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:t,offset:r,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},n.prototype.onDeviceParamsUpdated_=function(e){d.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},n.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},n.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?window.WebVRConfig.CARDBOARD_UI_DISABLED||(e.canvas.width=d.getScreenWidth()*this.bufferScale_,e.canvas.height=d.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new a(e)):(this.distorter_=new i(e),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(d.isLandscapeMode()&&d.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},n.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},n.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},n.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},n.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl"),r=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0","box-sizing: content-box"];t.canvas.setAttribute("style",r.join("; ")+";"),d.safariCssSizeWorkaround(t.canvas)}},n.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},n.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},e.exports=n},function(e,t){function r(e){this.coefficients=e}r.prototype.distortInverse=function(e){for(var t=0,r=1,n=e-this.distort(t);Math.abs(r-t)>1e-4;){var i=e-this.distort(r),a=r-i*((r-t)/(i-n));t=r,r=a,n=i}return r},r.prototype.distort=function(e){for(var t=e*e,r=0,n=0;n<this.coefficients.length;n++)r=t*(r+this.coefficients[n]);return(r+1)*e},e.exports=r},function(e,t,r){function n(e,t){if(this.dpdb=a,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var r=new XMLHttpRequest,n=this;r.open("GET",s,!0),r.addEventListener("load",function(){n.loading=!1,r.status>=200&&r.status<=299?(n.dpdb=JSON.parse(r.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),r.send()}}function i(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}var a=r(706),o=r(23),s="https://dpdb.webvr.rocks/dpdb.json";n.prototype.getDeviceParams=function(){return this.deviceParams},n.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},n.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,r=o.getScreenWidth(),n=o.getScreenHeight();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var a=0;a<e.devices.length;a++){var s=e.devices[a];if(s.rules)if("ios"==s.type||"android"==s.type){if(o.isIOS()==("ios"==s.type)){for(var u=!1,l=0;l<s.rules.length;l++){var c=s.rules[l];if(this.matchRule_(c,t,r,n)){u=!0;break}}if(u){var f=s.dpi[0]||s.dpi,d=s.dpi[1]||s.dpi;return new i({xdpi:f,ydpi:d,bevelMm:s.bw})}}}else console.warn("Device["+a+"] has invalid type.");else console.warn("Device["+a+"] has no rules section.")}return console.warn("No DPDB device match."),null},n.prototype.matchRule_=function(e,t,r,n){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var i=e.res[0],a=e.res[1];if(Math.min(r,n)!=Math.min(i,a)||Math.max(r,n)!=Math.max(i,a))return!1}return!0},e.exports=n},function(e,t){e.exports={format:1,last_updated:"2017-06-01T22:33:42Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3}]}},function(e,t,r){var n=r(23),i=r(718).WebVRPolyfill;window.WebVRConfig=n.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1,GET_VR_DISPLAYS_TIMEOUT:1e3},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new i}:new i,window.WebVRPolyfill=i},function(e,t,r){function n(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new a.Quaternion,this.rotateStart_=new a.Vector2,this.rotateEnd_=new a.Vector2,this.rotateDelta_=new a.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var i=r(55).VRDisplay,a=r(96),o=r(23);n.prototype=new i,n.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},n.prototype.onKeyDown_=function(e){38==e.keyCode?this.animatePhi_(this.phi_+.15):39==e.keyCode?this.animateTheta_(this.theta_-.15):40==e.keyCode?this.animatePhi_(this.phi_-.15):37==e.keyCode&&this.animateTheta_(this.theta_+.15)},n.prototype.animateTheta_=function(e){this.animateKeyTransitions_("theta_",e)},n.prototype.animatePhi_=function(e){e=o.clamp(e,-Math.PI/2,Math.PI/2),this.animateKeyTransitions_("phi_",e)},n.prototype.animateKeyTransitions_=function(e,t){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var r=this[e],n=new Date;this.angleAnimation_=requestAnimationFrame(function i(){var a=new Date-n;if(a>=80)return this[e]=t,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(i.bind(this));var o=a/80;this[e]=r+(t-r)*o}.bind(this))},n.prototype.onMouseDown_=function(e){this.rotateStart_.set(e.clientX,e.clientY),this.isDragging_=!0},n.prototype.onMouseMove_=function(e){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var t=e.movementX||e.mozMovementX||0,r=e.movementY||e.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-r)}else this.rotateEnd_.set(e.clientX,e.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Math.PI*this.rotateDelta_.y/screen.height*.3,this.theta_+=2*Math.PI*this.rotateDelta_.x/screen.width*.5,this.phi_=o.clamp(this.phi_,-Math.PI/2,Math.PI/2)}},n.prototype.onMouseUp_=function(e){this.isDragging_=!1},n.prototype.isPointerLocked_=function(){return void 0!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement)},n.prototype.resetPose=function(){this.phi_=0,this.theta_=0},e.exports=n},function(e,t,r){(function(e){void 0!==e&&e.window&&(e.document=e.window.document,e.navigator=e.window.navigator),r(707)}).call(t,r(66))},function(e,t,r){function n(){this.loadIcon_();var e=document.createElement("div"),t=e.style;t.position="fixed",t.top=0,t.right=0,t.bottom=0,t.left=0,t.backgroundColor="gray",t.fontFamily="sans-serif",t.zIndex=1e6;var r=document.createElement("img");r.src=this.icon;var t=r.style;t.marginLeft="25%",t.marginTop="25%",t.width="50%",e.appendChild(r);var n=document.createElement("div"),t=n.style;t.textAlign="center",t.fontSize="16px",t.lineHeight="24px",t.margin="24px 25%",t.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(n);var i=document.createElement("div"),t=i.style;t.backgroundColor="#CFD8DC",t.position="fixed",t.bottom=0,t.width="100%",t.height="48px",t.padding="14px 24px",t.boxSizing="border-box",t.color="#656A6B",e.appendChild(i);var a=document.createElement("div");a.style.float="left",a.innerHTML="No Cardboard viewer?";var o=document.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="_blank";var t=o.style;t.float="right",t.fontWeight=600,t.textTransform="uppercase",t.borderLeft="1px solid gray",t.paddingLeft="24px",t.textDecoration="none",t.color="#656A6B",i.appendChild(a),i.appendChild(o),this.overlay=e,this.text=n,this.hide()}var i=r(23);n.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img"),r=t.style;i.isLandscapeMode()?(r.width="20%",r.marginLeft="40%",r.marginTop="3%"):(r.width="50%",r.marginLeft="25%",r.marginTop="25%")},n.prototype.hide=function(){this.overlay.style.display="none"},n.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},n.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},n.prototype.update=function(){this.disableShowTemporarily(),!i.isLandscapeMode()&&i.isMobile()?this.show():this.hide()},n.prototype.loadIcon_=function(){this.icon=i.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")},e.exports=n},function(e,t,r){function n(e){this.kFilter=e,this.currentAccelMeasurement=new i,this.currentGyroMeasurement=new i,this.previousGyroMeasurement=new i,o.isIOS()?this.filterQ=new a.Quaternion(-1,0,0,1):this.filterQ=new a.Quaternion(1,0,0,1),this.previousFilterQ=new a.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new a.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new a.Vector3,this.measuredGravity=new a.Vector3,this.gyroIntegralQ=new a.Quaternion}var i=r(714),a=r(96),o=r(23);n.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},n.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var r=t-this.previousGyroMeasurement.timestampS;o.isTimestampDeltaValid(r)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},n.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var r=new a.Quaternion;r.copy(this.filterQ),r.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(r),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new a.Quaternion;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),o.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",a.radToDeg*o.getQuaternionAngle(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var i=new a.Quaternion;i.copy(this.filterQ),i.multiply(n),this.filterQ.slerp(i,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},n.prototype.getOrientation=function(){return this.filterQ},n.prototype.accelToQuaternion_=function(e){var t=new a.Vector3;t.copy(e),t.normalize();var r=new a.Quaternion;return r.setFromUnitVectors(new a.Vector3(0,0,-1),t),r.inverse(),r},n.prototype.gyroToQuaternionDelta_=function(e,t){var r=new a.Quaternion,n=new a.Vector3;return n.copy(e),n.normalize(),r.setFromAxisAngle(n,e.length()*t),r},e.exports=n},function(e,t,r){function n(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new s.Vector3,this.gyroscope=new s.Vector3,this.start(),this.filter=new i(window.WebVRConfig.K_FILTER),this.posePredictor=new a(window.WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new o,this.filterToWorldQ=new s.Quaternion,u.isIOS()?this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new s.Quaternion,this.worldToScreenQ=new s.Quaternion,this.originalPoseAdjustQ=new s.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new s.Vector3(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),u.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new s.Quaternion,this.isFirefoxAndroid=u.isFirefoxAndroid(),this.isIOS=u.isIOS(),this.orientationOut_=new Float32Array(4)}var i=r(711),a=r(713),o=r(715),s=r(96),u=r(23);n.prototype.getPosition=function(){return null},n.prototype.getOrientation=function(){var e=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(e,this.gyroscope,this.previousTimestampS);var t=new s.Quaternion;return t.copy(this.filterToWorldQ),t.multiply(this.resetQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||t.multiply(this.touchPanner.getOrientation()),t.multiply(this.predictedQ),t.multiply(this.worldToScreenQ),window.WebVRConfig.YAW_ONLY&&(t.x=0,t.z=0,t.normalize()),this.orientationOut_[0]=t.x,this.orientationOut_[1]=t.y,this.orientationOut_[2]=t.z,this.orientationOut_[3]=t.w,this.orientationOut_},n.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),u.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},n.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},n.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,r=e.rotationRate,n=e.timeStamp/1e3,i=n-this.previousTimestampS;if(i<=u.MIN_TIMESTEP||i>u.MAX_TIMESTEP)return console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=n);this.accelerometer.set(-t.x,-t.y,-t.z),this.gyroscope.set(r.alpha,r.beta,r.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,n),this.filter.addGyroMeasurement(this.gyroscope,n),this.previousTimestampS=n},n.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},n.prototype.onMessage_=function(e){var t=e.data;if(t&&t.type){"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)}},n.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},n.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),u.isIOS()&&u.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},n.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},e.exports=n},function(e,t,r){function n(e){this.predictionTimeS=e,this.previousQ=new i.Quaternion,this.previousTimestampS=null,this.deltaQ=new i.Quaternion,this.outQ=new i.Quaternion}var i=r(96),a=r(23);n.prototype.getPrediction=function(e,t,r){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=r,e;var n=new i.Vector3;n.copy(t),n.normalize();var o=t.length();if(o<20*i.degToRad)return a.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(i.radToDeg*o).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var s=(this.previousTimestampS,o*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(n,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=r,this.outQ},e.exports=n},function(e,t){function r(e,t){this.set(e,t)}r.prototype.set=function(e,t){this.sample=e,this.timestampS=t},r.prototype.copy=function(e){this.set(e.sample,e.timestampS)},e.exports=r},function(e,t,r){function n(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new i.Vector2,this.rotateEnd=new i.Vector2,this.rotateDelta=new i.Vector2,this.theta=0,this.orientation=new i.Quaternion}var i=r(96),a=r(23);n.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},n.prototype.resetSensor=function(){this.theta=0},n.prototype.onTouchStart_=function(e){e.touches&&1==e.touches.length&&(this.rotateStart.set(e.touches[0].pageX,e.touches[0].pageY),this.isTouching=!0)},n.prototype.onTouchMove_=function(e){if(this.isTouching){this.rotateEnd.set(e.touches[0].pageX,e.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),a.isIOS()&&(this.rotateDelta.x*=-1);var t=document.body;this.theta+=2*Math.PI*this.rotateDelta.x/t.clientWidth*.5}},n.prototype.onTouchEnd_=function(e){this.isTouching=!1},e.exports=n},function(e,t,r){function n(){try{this.selectedKey=localStorage.getItem(o)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=a),this.dialog=this.createDialog_(i.Viewers),this.root=null,this.onChangeCallbacks_=[]}var i=r(314),a=(r(23),"CardboardV1"),o="WEBVR_CARDBOARD_VIEWER";n.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},n.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},n.prototype.getCurrentViewer=function(){return i.Viewers[this.selectedKey]},n.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},n.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},n.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},n.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!i.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.fireOnChange_(i.Viewers[this.selectedKey]);try{localStorage.setItem(o,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()},n.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var r=document.createElement("div"),n=r.style;n.position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",r.addEventListener("click",this.hide.bind(this));var i=document.createElement("div"),n=i.style;n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",i.appendChild(this.createH1_("Select your viewer"));for(var a in e)i.appendChild(this.createChoice_(a,e[a].label));return i.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(r),t.appendChild(i),t},n.prototype.createH1_=function(e){var t=document.createElement("h1"),r=t.style;return r.color="black",r.fontSize="20px",r.fontWeight="bold",r.marginTop=0,r.marginBottom="24px",t.innerHTML=e,t},n.prototype.createChoice_=function(e,t){var r=document.createElement("div");r.style.marginTop="8px",r.style.color="black";var n=document.createElement("input");n.style.fontSize="30px",n.setAttribute("id",e),n.setAttribute("type","radio"),n.setAttribute("value",e),n.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",e),i.innerHTML=t,r.appendChild(n),r.appendChild(i),r},n.prototype.createButton_=function(e,t){var r=document.createElement("button");r.innerHTML=e;var n=r.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",r.addEventListener("click",t),r},e.exports=n},function(e,t,r){function n(){function e(e,t,r){var n=document.createElement("source");n.src=r,n.type="video/"+t,e.appendChild(n)}var t=document.createElement("video");t.setAttribute("loop",""),e(t,"webm",a.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),e(t,"mp4",a.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){t.paused&&t.play()},this.release=function(){t.pause()}}function i(){var e=null;this.request=function(){e||(e=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){e&&(clearInterval(e),e=null)}}var a=r(23);e.exports=function(){var e=navigator.userAgent||navigator.vendor||window.opera;return e.match(/iPhone/i)||e.match(/iPod/i)?i:n}()},function(e,t,r){function n(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||(this.enablePolyfill(),window.WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),i()}function i(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=l,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(e){return a.frameDataFromPose(e,this.getPose(),this)})}var a=r(23),o=r(703),s=r(708),u=r(55).VRDisplay,l=r(55).VRFrameData,c=r(55).HMDVRDevice,f=r(55).PositionSensorVRDevice,d=r(315).VRDisplayHMDDevice,h=r(315).VRDisplayPositionSensorDevice,p=r(701).version;n.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},n.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},n.prototype.connectDisplay=function(e){e.fireVRDisplayConnect_(),this.displays.push(e)},n.prototype.populateDevices=function(){if(!this.devicesPopulated){var e=null;this.isCardboardCompatible()&&(e=new o,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new d(e)),this.devices.push(new h(e)))),this.isMobile()||window.WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(e=new s,this.connectDisplay(e),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new d(e)),this.devices.push(new h(e)))),this.devicesPopulated=!0}},n.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&window.VRFrameData){var e=window.VRFrameData,t=new window.VRFrameData,r=window.VRDisplay.prototype.getFrameData;window.VRFrameData=l,window.VRDisplay.prototype.getFrameData=function(n){if(n instanceof e)return void r.call(this,n);r.call(this,t),n.pose=t.pose,a.copyArray(t.leftProjectionMatrix,n.leftProjectionMatrix),a.copyArray(t.rightProjectionMatrix,n.rightProjectionMatrix),a.copyArray(t.leftViewMatrix,n.leftViewMatrix),a.copyArray(t.rightViewMatrix,n.rightViewMatrix)}}if(window.VRDisplay=u,navigator&&!navigator.vrEnabled){var n=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return n.isCardboardCompatible()&&(n.isFullScreenAvailable()||a.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=l)},n.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=c,window.PositionSensorVRDevice=f},n.prototype.getVRDisplays=function(){this.populateDevices();var e=this.displays;if(!this.nativeWebVRAvailable)return Promise.resolve(e);var t,r=this.nativeGetVRDisplaysFunc.call(navigator),n=new Promise(function(e){t=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),e([])},window.WebVRConfig.GET_VR_DISPLAYS_TIMEOUT)});return a.race([r,n]).then(function(r){return clearTimeout(t),window.WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?r.concat(e):r.length>0?r:e})},n.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var e=this;return new Promise(function(t,r){try{if(!e.devicesPopulated){if(e.nativeWebVRAvailable)return navigator.getVRDisplays(function(r){for(var n=0;n<r.length;++n)e.devices.push(new d(r[n])),e.devices.push(new h(r[n]));e.devicesPopulated=!0,t(e.devices)},r);if(e.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(r){for(var n=0;n<r.length;++n)r[n]instanceof c&&e.devices.push(r[n]),r[n]instanceof f&&e.devices.push(r[n]);e.devicesPopulated=!0,t(e.devices)},r)}e.populateDevices(),t(e.devices)}catch(e){r(e)}})},n.prototype.NativeVRFrameData=window.VRFrameData,n.prototype.isMobile=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},n.prototype.isCardboardCompatible=function(){return this.isMobile()||window.WebVRConfig.FORCE_ENABLE_VR},n.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},n.InstallWebVRSpecShim=i,n.version=p,e.exports.WebVRPolyfill=n},function(e,t){},function(e,t,r){e.exports=r(316)}])});